/*! For license information please see 2.a2f3fb3d.chunk.js.LICENSE.txt */
(this["webpackJsonpcan-explorer"]=this["webpackJsonpcan-explorer"]||[]).push([[2],[function(a,A,j){"use strict";function accessor(a,A,j){return a.fields=A||[],a.fname=j,a}function accessorName(a){return null==a?null:a.fname}function accessorFields(a){return null==a?null:a.fields}function getter(a){return 1===a.length?P(a[0]):B(a)}j.d(A,"a",(function(){return ve})),j.d(A,"b",(function(){return pe})),j.d(A,"c",(function(){return me})),j.d(A,"d",(function(){return he})),j.d(A,"e",(function(){return ge})),j.d(A,"f",(function(){return accessor})),j.d(A,"g",(function(){return accessorFields})),j.d(A,"h",(function(){return accessorName})),j.d(A,"i",(function(){return array})),j.d(A,"j",(function(){return Ae})),j.d(A,"k",(function(){return clampRange})),j.d(A,"l",(function(){return compare})),j.d(A,"m",(function(){return constant})),j.d(A,"n",(function(){return debounce})),j.d(A,"o",(function(){return error})),j.d(A,"p",(function(){return extend})),j.d(A,"q",(function(){return extent})),j.d(A,"r",(function(){return extentIndex})),j.d(A,"s",(function(){return le})),j.d(A,"t",(function(){return fastmap})),j.d(A,"u",(function(){return field})),j.d(A,"v",(function(){return flush})),j.d(A,"w",(function(){return _has})),j.d(A,"x",(function(){return q})),j.d(A,"y",(function(){return ne})),j.d(A,"z",(function(){return inherits})),j.d(A,"A",(function(){return inrange})),j.d(A,"B",(function(){return ye})),j.d(A,"C",(function(){return isBoolean})),j.d(A,"D",(function(){return isDate})),j.d(A,"E",(function(){return isFunction})),j.d(A,"F",(function(){return isIterable})),j.d(A,"G",(function(){return isNumber})),j.d(A,"H",(function(){return isObject})),j.d(A,"I",(function(){return isRegExp})),j.d(A,"J",(function(){return isString})),j.d(A,"K",(function(){return key})),j.d(A,"L",(function(){return lerp})),j.d(A,"M",(function(){return logger})),j.d(A,"N",(function(){return lruCache})),j.d(A,"O",(function(){return merge})),j.d(A,"P",(function(){return mergeConfig})),j.d(A,"Q",(function(){return oe})),j.d(A,"R",(function(){return pad})),j.d(A,"S",(function(){return panLinear})),j.d(A,"T",(function(){return panLog})),j.d(A,"U",(function(){return panPow})),j.d(A,"V",(function(){return panSymlog})),j.d(A,"W",(function(){return peek})),j.d(A,"X",(function(){return quarter})),j.d(A,"Y",(function(){return repeat})),j.d(A,"Z",(function(){return span})),j.d(A,"ab",(function(){return splitAccessPath})),j.d(A,"bb",(function(){return $})),j.d(A,"cb",(function(){return toBoolean})),j.d(A,"db",(function(){return toDate})),j.d(A,"eb",(function(){return toNumber})),j.d(A,"fb",(function(){return toSet})),j.d(A,"gb",(function(){return toString})),j.d(A,"hb",(function(){return truncate})),j.d(A,"ib",(function(){return se})),j.d(A,"jb",(function(){return utcquarter})),j.d(A,"kb",(function(){return visitArray})),j.d(A,"lb",(function(){return writeConfig})),j.d(A,"mb",(function(){return ie})),j.d(A,"nb",(function(){return zoomLinear})),j.d(A,"ob",(function(){return zoomLog})),j.d(A,"pb",(function(){return zoomPow})),j.d(A,"qb",(function(){return zoomSymlog}));var P=function get1(a){return function(A){return A[a]}},B=function getN(a){var A=a.length;return function(j){for(var P=0;P<A;++P)j=j[a[P]];return j}};function error(a){throw Error(a)}function splitAccessPath(a){var A,j,P,B=[],q=a.length,ne=null,ie=0,oe="";function push(){B.push(oe+a.substring(A,j)),oe="",A=j+1}for(a+="",A=j=0;j<q;++j)if("\\"===(P=a[j]))oe+=a.substring(A,j),oe+=a.substring(++j,++j),A=j;else if(P===ne)push(),ne=null,ie=-1;else{if(ne)continue;A===ie&&'"'===P||A===ie&&"'"===P?(A=j+1,ne=P):"."!==P||ie?"["===P?(j>A&&push(),ie=A=j+1):"]"===P&&(ie||error("Access path missing open bracket: "+a),ie>0&&push(),ie=0,A=j+1):j>A?push():A=j+1}return ie&&error("Access path missing closing bracket: "+a),ne&&error("Access path missing closing quote: "+a),j>A&&(j++,push()),B}function field(a,A,j){var P=splitAccessPath(a);return a=1===P.length?P[0]:a,accessor((j&&j.get||getter)(P),[a],A||a)}var q=field("id"),ne=accessor((function(a){return a}),[],"identity"),ie=accessor((function(){return 0}),[],"zero"),oe=accessor((function(){return 1}),[],"one"),se=accessor((function(){return!0}),[],"true"),le=accessor((function(){return!1}),[],"false");function log$1(a,A,j){var P=[A].concat([].slice.call(j));console[a].apply(console,P)}var he=0,pe=1,ge=2,me=3,ve=4;function logger(a,A){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:log$1,P=a||he;return{level:function level(a){return arguments.length?(P=+a,this):P},error:function error(){return P>=pe&&j(A||"error","ERROR",arguments),this},warn:function warn(){return P>=ge&&j(A||"warn","WARN",arguments),this},info:function info(){return P>=me&&j(A||"log","INFO",arguments),this},debug:function debug(){return P>=ve&&j(A||"log","DEBUG",arguments),this}}}var ye=Array.isArray;function isObject(a){return a===Object(a)}var _e=function isLegalKey(a){return"__proto__"!==a};function mergeConfig(){for(var a=arguments.length,A=new Array(a),j=0;j<a;j++)A[j]=arguments[j];return A.reduce((function(a,A){for(var j in A)if("signals"===j)a.signals=mergeNamed(a.signals,A.signals);else{var P="legend"===j?{layout:1}:"style"===j||null;writeConfig(a,j,A[j],P)}return a}),{})}function writeConfig(a,A,j,P){var B,q;if(_e(A))if(isObject(j)&&!ye(j))for(B in q=isObject(a[A])?a[A]:a[A]={},j)P&&(!0===P||P[B])?writeConfig(q,B,j[B]):_e(B)&&(q[B]=j[B]);else a[A]=j}function mergeNamed(a,A){if(null==a)return A;var j={},P=[];function add(a){j[a.name]||(j[a.name]=1,P.push(a))}return A.forEach(add),a.forEach(add),P}function peek(a){return a[a.length-1]}function toNumber(a){return null==a||""===a?null:+a}var we=function exp(a){return function(A){return a*Math.exp(A)}},ke=function log(a){return function(A){return Math.log(a*A)}},Oe=function symlog(a){return function(A){return Math.sign(A)*Math.log1p(Math.abs(A/a))}},Se=function symexp(a){return function(A){return Math.sign(A)*Math.expm1(Math.abs(A))*a}},Te=function pow(a){return function(A){return A<0?-Math.pow(-A,a):Math.pow(A,a)}};function pan(a,A,j,P){var B=j(a[0]),q=j(peek(a)),ne=(q-B)*A;return[P(B-ne),P(q-ne)]}function panLinear(a,A){return pan(a,A,toNumber,ne)}function panLog(a,A){var j=Math.sign(a[0]);return pan(a,A,ke(j),we(j))}function panPow(a,A,j){return pan(a,A,Te(j),Te(1/j))}function panSymlog(a,A,j){return pan(a,A,Oe(j),Se(j))}function zoom(a,A,j,P,B){var q=P(a[0]),ne=P(peek(a)),ie=null!=A?P(A):(q+ne)/2;return[B(ie+(q-ie)*j),B(ie+(ne-ie)*j)]}function zoomLinear(a,A,j){return zoom(a,A,j,toNumber,ne)}function zoomLog(a,A,j){var P=Math.sign(a[0]);return zoom(a,A,j,ke(P),we(P))}function zoomPow(a,A,j,P){return zoom(a,A,j,Te(P),Te(1/P))}function zoomSymlog(a,A,j,P){return zoom(a,A,j,Oe(P),Se(P))}function quarter(a){return 1+~~(new Date(a).getMonth()/3)}function utcquarter(a){return 1+~~(new Date(a).getUTCMonth()/3)}function array(a){return null!=a?ye(a)?a:[a]:[]}function clampRange(a,A,j){var P,B=a[0],q=a[1];return q<B&&(P=q,q=B,B=P),(P=q-B)>=j-A?[A,j]:[B=Math.min(Math.max(B,A),j-P),B+P]}function isFunction(a){return"function"===typeof a}function compare(a,A,j){j=j||{},A=array(A)||[];var P=[],B=[],q={},ne=j.comparator||je;return array(a).forEach((function(a,ne){null!=a&&(P.push("descending"===A[ne]?-1:1),B.push(a=isFunction(a)?a:field(a,null,j)),(accessorFields(a)||[]).forEach((function(a){return q[a]=1})))})),0===B.length?null:accessor(ne(B,P),Object.keys(q))}var Ae=function ascending(a,A){return(a<A||null==a)&&null!=A?-1:(a>A||null==A)&&null!=a?1:(A=A instanceof Date?+A:A,(a=a instanceof Date?+a:a)!==a&&A===A?-1:A!==A&&a===a?1:0)},je=function comparator(a,A){return 1===a.length?Fe(a[0],A[0]):Re(a,A,a.length)},Fe=function compare1(a,A){return function(j,P){return Ae(a(j),a(P))*A}},Re=function compareN(a,A,j){return A.push(0),function(P,B){for(var q,ne=0,ie=-1;0===ne&&++ie<j;)q=a[ie],ne=Ae(q(P),q(B));return ne*A[ie]}};function constant(a){return isFunction(a)?a:function(){return a}}function debounce(a,A){var j;return function(P){j&&clearTimeout(j),j=setTimeout((function(){return A(P),j=null}),a)}}function extend(a){for(var A,j,P=1,B=arguments.length;P<B;++P)for(j in A=arguments[P])a[j]=A[j];return a}function extent(a,A){var j,P,B,q,ne=0;if(a&&(j=a.length))if(null==A){for(P=a[ne];ne<j&&(null==P||P!==P);P=a[++ne]);for(B=q=P;ne<j;++ne)null!=(P=a[ne])&&(P<B&&(B=P),P>q&&(q=P))}else{for(P=A(a[ne]);ne<j&&(null==P||P!==P);P=A(a[++ne]));for(B=q=P;ne<j;++ne)null!=(P=A(a[ne]))&&(P<B&&(B=P),P>q&&(q=P))}return[B,q]}function extentIndex(a,A){var j,P,B,q,ne,ie=a.length,oe=-1;if(null==A){for(;++oe<ie;)if(null!=(P=a[oe])&&P>=P){j=B=P;break}if(oe===ie)return[-1,-1];for(q=ne=oe;++oe<ie;)null!=(P=a[oe])&&(j>P&&(j=P,q=oe),B<P&&(B=P,ne=oe))}else{for(;++oe<ie;)if(null!=(P=A(a[oe],oe,a))&&P>=P){j=B=P;break}if(oe===ie)return[-1,-1];for(q=ne=oe;++oe<ie;)null!=(P=A(a[oe],oe,a))&&(j>P&&(j=P,q=oe),B<P&&(B=P,ne=oe))}return[q,ne]}var Me=Object.prototype.hasOwnProperty;function _has(a,A){return Me.call(a,A)}var Ne={};function fastmap(a){var A,j={};function has$1(a){return _has(j,a)&&j[a]!==Ne}var P={size:0,empty:0,object:j,has:has$1,get:function get(a){return has$1(a)?j[a]:void 0},set:function set(a,A){return has$1(a)||(++P.size,j[a]===Ne&&--P.empty),j[a]=A,this},delete:function _delete(a){return has$1(a)&&(--P.size,++P.empty,j[a]=Ne),this},clear:function clear(){P.size=P.empty=0,P.object=j={}},test:function test(a){return arguments.length?(A=a,P):A},clean:function clean(){var a={},B=0;for(var q in j){var ne=j[q];ne===Ne||A&&A(ne)||(a[q]=ne,++B)}P.size=B,P.empty=0,P.object=j=a}};return a&&Object.keys(a).forEach((function(A){P.set(A,a[A])})),P}function flush(a,A,j,P,B,q){if(!j&&0!==j)return q;var ne,ie=+j,oe=a[0],se=peek(a);se<oe&&(ne=oe,oe=se,se=ne),ne=Math.abs(A-oe);var le=Math.abs(se-A);return ne<le&&ne<=ie?P:le<=ie?B:q}function inherits(a,A,j){var P=a.prototype=Object.create(A.prototype);return Object.defineProperty(P,"constructor",{value:a,writable:!0,enumerable:!0,configurable:!0}),extend(P,j)}function inrange(a,A,j,P){var B,q=A[0],ne=A[A.length-1];return q>ne&&(B=q,q=ne,ne=B),P=void 0===P||P,((j=void 0===j||j)?q<=a:q<a)&&(P?a<=ne:a<ne)}function isBoolean(a){return"boolean"===typeof a}function isDate(a){return"[object Date]"===Object.prototype.toString.call(a)}function isIterable(a){return a&&isFunction(a[Symbol.iterator])}function isNumber(a){return"number"===typeof a}function isRegExp(a){return"[object RegExp]"===Object.prototype.toString.call(a)}function isString(a){return"string"===typeof a}function key(a,A,j){a&&(a=A?array(a).map((function(a){return a.replace(/\\(.)/g,"$1")})):array(a));var P,B=a&&a.length,q=j&&j.get||getter,ne=function map(a){return q(A?[a]:splitAccessPath(a))};if(B)if(1===B){var ie=ne(a[0]);P=function fn(a){return""+ie(a)}}else{var oe=a.map(ne);P=function fn(a){for(var A=""+oe[0](a),j=0;++j<B;)A+="|"+oe[j](a);return A}}else P=function fn(){return""};return accessor(P,a,"key")}function lerp(a,A){var j=a[0],P=peek(a),B=+A;return B?1===B?P:j+B*(P-j):j}function lruCache(a){var A,j,P;a=+a||1e4;var B=function clear(){A={},j={},P=0},q=function update(B,q){return++P>a&&(j=A,A={},P=1),A[B]=q};return B(),{clear:B,has:function has(a){return _has(A,a)||_has(j,a)},get:function get(a){return _has(A,a)?A[a]:_has(j,a)?q(a,j[a]):void 0},set:function set(a,j){return _has(A,a)?A[a]=j:q(a,j)}}}function merge(a,A,j,P){var B=A.length,q=j.length;if(!q)return A;if(!B)return j;for(var ne=P||new A.constructor(B+q),ie=0,oe=0,se=0;ie<B&&oe<q;++se)ne[se]=a(A[ie],j[oe])>0?j[oe++]:A[ie++];for(;ie<B;++ie,++se)ne[se]=A[ie];for(;oe<q;++oe,++se)ne[se]=j[oe];return ne}function repeat(a,A){for(var j="";--A>=0;)j+=a;return j}function pad(a,A,j,P){var B=j||" ",q=a+"",ne=A-q.length;return ne<=0?q:"left"===P?repeat(B,ne)+q:"center"===P?repeat(B,~~(ne/2))+q+repeat(B,Math.ceil(ne/2)):q+repeat(B,ne)}function span(a){return a&&peek(a)-a[0]||0}function $(a){return ye(a)?"["+a.map($)+"]":isObject(a)||isString(a)?JSON.stringify(a).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):a}function toBoolean(a){return null==a||""===a?null:!(!a||"false"===a||"0"===a)&&!!a}var Be=function defaultParser(a){return isNumber(a)||isDate(a)?a:Date.parse(a)};function toDate(a,A){return A=A||Be,null==a||""===a?null:A(a)}function toString(a){return null==a||""===a?null:a+""}function toSet(a){for(var A={},j=a.length,P=0;P<j;++P)A[a[P]]=!0;return A}function truncate(a,A,j,P){var B=null!=P?P:"\u2026",q=a+"",ne=q.length,ie=Math.max(0,A-B.length);return ne<=A?q:"left"===j?B+q.slice(ne-ie):"center"===j?q.slice(0,Math.ceil(ie/2))+B+q.slice(ne-~~(ie/2)):q.slice(0,ie)+B}function visitArray(a,A,j){if(a)if(A)for(var P=a.length,B=0;B<P;++B){var q=A(a[B]);q&&j(q,B,a)}else a.forEach(j)}},function(a,A,j){"use strict";a.exports=j(247)},function(a,A,j){"use strict";j.d(A,"a",(function(){return _createForOfIteratorHelper}));var P=j(50);function _createForOfIteratorHelper(a){if("undefined"===typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(a=Object(P.a)(a))){var A=0,j=function F(){};return{s:j,n:function n(){return A>=a.length?{done:!0}:{done:!1,value:a[A++]}},e:function e(a){throw a},f:j}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var B,q,ne=!0,ie=!1;return{s:function s(){B=a[Symbol.iterator]()},n:function n(){var a=B.next();return ne=a.done,a},e:function e(a){ie=!0,q=a},f:function f(){try{ne||null==B.return||B.return()}finally{if(ie)throw q}}}}},function(a,A,j){"use strict";function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}j.d(A,"a",(function(){return _classCallCheck}))},function(a,A,j){"use strict";function _defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}function _createClass(a,A,j){return A&&_defineProperties(a.prototype,A),j&&_defineProperties(a,j),a}j.d(A,"a",(function(){return _createClass}))},function(a,A,j){"use strict";j.d(A,"a",(function(){return _toConsumableArray}));var P=j(78);var B=j(93),q=j(50);function _toConsumableArray(a){return function _arrayWithoutHoles(a){if(Array.isArray(a))return Object(P.a)(a)}(a)||Object(B.a)(a)||Object(q.a)(a)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(a,A,j){"use strict";function _defineProperty(a,A,j){return A in a?Object.defineProperty(a,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):a[A]=j,a}j.d(A,"a",(function(){return _defineProperty}))},function(a,A,j){"use strict";function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}j.d(A,"a",(function(){return _assertThisInitialized}))},function(a,A,j){"use strict";j.d(A,"a",(function(){return _inherits}));var P=j(96);function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),A&&Object(P.a)(a,A)}},function(a,A,j){"use strict";j.d(A,"a",(function(){return _createSuper}));var P=j(24),B=j(97);function _typeof(a){return(_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function _typeof(a){return typeof a}:function _typeof(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var q=j(7);function _possibleConstructorReturn(a,A){return!A||"object"!==_typeof(A)&&"function"!==typeof A?Object(q.a)(a):A}function _createSuper(a){return function(){var A,j=Object(P.a)(a);if(Object(B.a)()){var q=Object(P.a)(this).constructor;A=Reflect.construct(j,arguments,q)}else A=j.apply(this,arguments);return _possibleConstructorReturn(this,A)}}},function(a,A,j){a.exports=j(251)},function(a,A,j){"use strict";j.d(A,"a",(function(){return _slicedToArray}));var P=j(94);var B=j(50),q=j(95);function _slicedToArray(a,A){return Object(P.a)(a)||function _iterableToArrayLimit(a,A){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(a)){var j=[],P=!0,B=!1,q=void 0;try{for(var ne,ie=a[Symbol.iterator]();!(P=(ne=ie.next()).done)&&(j.push(ne.value),!A||j.length!==A);P=!0);}catch(oe){B=!0,q=oe}finally{try{P||null==ie.return||ie.return()}finally{if(B)throw q}}return j}}(a,A)||Object(B.a)(a,A)||Object(q.a)()}},function(a,A,j){"use strict";j.d(A,"e",(function(){return P})),j.d(A,"c",(function(){return B})),j.d(A,"b",(function(){return q})),j.d(A,"a",(function(){return ne})),j.d(A,"f",(function(){return ie})),j.d(A,"d",(function(){return oe})),j.d(A,"g",(function(){return se}));var P=1e3,B=60*P,q=60*B,ne=24*q,ie=7*ne,oe=30*ne,se=365*ne},function(a,A,j){"use strict";function asyncGeneratorStep(a,A,j,P,B,q,ne){try{var ie=a[q](ne),oe=ie.value}catch(se){return void j(se)}ie.done?A(oe):Promise.resolve(oe).then(P,B)}function _asyncToGenerator(a){return function(){var A=this,j=arguments;return new Promise((function(P,B){var q=a.apply(A,j);function _next(a){asyncGeneratorStep(q,P,B,_next,_throw,"next",a)}function _throw(a){asyncGeneratorStep(q,P,B,_next,_throw,"throw",a)}_next(void 0)}))}}j.d(A,"a",(function(){return _asyncToGenerator}))},function(a,A,j){"use strict";j.d(A,"a",(function(){return Ve})),j.d(A,"b",(function(){return Ye})),j.d(A,"c",(function(){return $e})),j.d(A,"d",(function(){return Xe})),j.d(A,"e",(function(){return nt})),j.d(A,"f",(function(){return et})),j.d(A,"g",(function(){return Ue})),j.d(A,"h",(function(){return Be})),j.d(A,"i",(function(){return tt})),j.d(A,"j",(function(){return rt})),j.d(A,"k",(function(){return We})),j.d(A,"l",(function(){return Ne})),j.d(A,"m",(function(){return dayofyear})),j.d(A,"n",(function(){return bin})),j.d(A,"o",(function(){return timeFloor})),j.d(A,"p",(function(){return timeInterval})),j.d(A,"q",(function(){return timeOffset})),j.d(A,"r",(function(){return timeSequence})),j.d(A,"s",(function(){return timeUnitSpecifier})),j.d(A,"t",(function(){return timeUnits})),j.d(A,"u",(function(){return utcFloor})),j.d(A,"v",(function(){return utcInterval})),j.d(A,"w",(function(){return utcOffset})),j.d(A,"x",(function(){return utcSequence})),j.d(A,"y",(function(){return utcdayofyear})),j.d(A,"z",(function(){return utcweek})),j.d(A,"A",(function(){return week}));var P,B,q,ne,ie,oe,se,le=j(6),he=j(0),pe=j(51),ge=j(29),me=j(52),ve=j(30),ye=j(53),_e=j(103),we=j(142),ke=j(143),Oe=j(60),Se=j(104),Te=j(54),Ae=j(105),je=j(144),Fe=j(145),Re=j(106),Me=j(150),Ne="year",Be="quarter",Ue="month",We="week",Ve="date",Ye="day",$e="dayofyear",Xe="hours",et="minutes",tt="seconds",nt="milliseconds",rt=[Ne,Be,Ue,We,Ve,Ye,$e,Xe,et,tt,nt],it=rt.reduce((function(a,A,j){return a[A]=1+j,a}),{});function timeUnits(a){var A=Object(he.i)(a).slice(),j={};return A.length||Object(he.o)("Missing time unit."),A.forEach((function(a){Object(he.w)(it,a)?j[a]=1:Object(he.o)("Invalid time unit: ".concat(a,"."))})),(j[We]||j[Ye]?1:0)+(j[Be]||j[Ue]||j[Ve]?1:0)+(j[$e]?1:0)>1&&Object(he.o)("Incompatible time units: ".concat(a)),A.sort((function(a,A){return it[a]-it[A]})),A}var at=(P={},Object(le.a)(P,Ne,"%Y "),Object(le.a)(P,Be,"Q%q "),Object(le.a)(P,Ue,"%b "),Object(le.a)(P,Ve,"%d "),Object(le.a)(P,We,"W%U "),Object(le.a)(P,Ye,"%a "),Object(le.a)(P,$e,"%j "),Object(le.a)(P,Xe,"%H:00"),Object(le.a)(P,et,"00:%M"),Object(le.a)(P,tt,":%S"),Object(le.a)(P,nt,".%L"),Object(le.a)(P,"".concat(Ne,"-").concat(Ue),"%Y-%m "),Object(le.a)(P,"".concat(Ne,"-").concat(Ue,"-").concat(Ve),"%Y-%m-%d "),Object(le.a)(P,"".concat(Xe,"-").concat(et),"%H:%M"),P);function timeUnitSpecifier(a,A){var j,P,B=Object(he.p)({},at,A),q=timeUnits(a),ne=q.length,ie="",oe=0;for(oe=0;oe<ne;)for(j=q.length;j>oe;--j)if(null!=B[P=q.slice(oe,j).join("-")]){ie+=B[P],oe=j;break}return ie.trim()}var ot=new Date;function localYear(a){return ot.setFullYear(a),ot.setMonth(0),ot.setDate(1),ot.setHours(0,0,0,0),ot}function dayofyear(a){return localDayOfYear(new Date(a))}function week(a){return localWeekNum(new Date(a))}function localDayOfYear(a){return pe.a.count(localYear(a.getFullYear())-1,a)}function localWeekNum(a){return ge.b.count(localYear(a.getFullYear())-1,a)}function localFirst(a){return localYear(a).getDay()}function localDate(a,A,j,P,B,q,ne){if(0<=a&&a<100){var ie=new Date(-1,A,j,P,B,q,ne);return ie.setFullYear(a),ie}return new Date(a,A,j,P,B,q,ne)}function utcdayofyear(a){return utcDayOfYear(new Date(a))}function utcweek(a){return utcWeekNum(new Date(a))}function utcDayOfYear(a){var A=Date.UTC(a.getUTCFullYear(),0,1);return me.a.count(A-1,a)}function utcWeekNum(a){var A=Date.UTC(a.getUTCFullYear(),0,1);return ve.b.count(A-1,a)}function utcFirst(a){return ot.setTime(Date.UTC(a,0,1)),ot.getUTCDay()}function utcDate(a,A,j,P,B,q,ne){if(0<=a&&a<100){var ie=new Date(Date.UTC(-1,A,j,P,B,q,ne));return ie.setUTCFullYear(j.y),ie}return new Date(Date.UTC(a,A,j,P,B,q,ne))}function floor(a,A,j,P,B){var q=A||1,ne=Object(he.W)(a),ie=function _(a,A,B){return function getUnit(a,A,j,P){var B=j<=1?a:P?function(A,B){return P+j*Math.floor((a(A,B)-P)/j)}:function(A,P){return j*Math.floor(a(A,P)/j)};return A?function(a,j){return A(B(a,j),j)}:B}(j[B=B||a],P[B],a===ne&&q,A)},oe=new Date,se=Object(he.fb)(a),le=se[Ne]?ie(Ne):Object(he.m)(2012),pe=se[Ue]?ie(Ue):se[Be]?ie(Be):he.mb,ge=se[We]&&se[Ye]?ie(Ye,1,We+Ye):se[We]?ie(We,1):se[Ye]?ie(Ye,1):se[Ve]?ie(Ve,1):se[$e]?ie($e,1):he.Q,me=se[Xe]?ie(Xe):he.mb,ve=se[et]?ie(et):he.mb,ye=se[tt]?ie(tt):he.mb,_e=se[nt]?ie(nt):he.mb;return function(a){oe.setTime(+a);var A=le(oe);return B(A,pe(oe),ge(oe,A),me(oe),ve(oe),ye(oe),_e(oe))}}function weekday(a,A,j){return A+7*a-(j+6)%7}var st=(B={},Object(le.a)(B,Ne,(function(a){return a.getFullYear()})),Object(le.a)(B,Be,(function(a){return Math.floor(a.getMonth()/3)})),Object(le.a)(B,Ue,(function(a){return a.getMonth()})),Object(le.a)(B,Ve,(function(a){return a.getDate()})),Object(le.a)(B,Xe,(function(a){return a.getHours()})),Object(le.a)(B,et,(function(a){return a.getMinutes()})),Object(le.a)(B,tt,(function(a){return a.getSeconds()})),Object(le.a)(B,nt,(function(a){return a.getMilliseconds()})),Object(le.a)(B,$e,(function(a){return localDayOfYear(a)})),Object(le.a)(B,We,(function(a){return localWeekNum(a)})),Object(le.a)(B,We+Ye,(function(a,A){return weekday(localWeekNum(a),a.getDay(),localFirst(A))})),Object(le.a)(B,Ye,(function(a,A){return weekday(1,a.getDay(),localFirst(A))})),B),ut=(q={},Object(le.a)(q,Be,(function(a){return 3*a})),Object(le.a)(q,We,(function(a,A){return weekday(a,0,localFirst(A))})),q);function timeFloor(a,A){return floor(a,A||1,st,ut,localDate)}var lt=(ne={},Object(le.a)(ne,Ne,(function(a){return a.getUTCFullYear()})),Object(le.a)(ne,Be,(function(a){return Math.floor(a.getUTCMonth()/3)})),Object(le.a)(ne,Ue,(function(a){return a.getUTCMonth()})),Object(le.a)(ne,Ve,(function(a){return a.getUTCDate()})),Object(le.a)(ne,Xe,(function(a){return a.getUTCHours()})),Object(le.a)(ne,et,(function(a){return a.getUTCMinutes()})),Object(le.a)(ne,tt,(function(a){return a.getUTCSeconds()})),Object(le.a)(ne,nt,(function(a){return a.getUTCMilliseconds()})),Object(le.a)(ne,$e,(function(a){return utcDayOfYear(a)})),Object(le.a)(ne,We,(function(a){return utcWeekNum(a)})),Object(le.a)(ne,Ye,(function(a,A){return weekday(1,a.getUTCDay(),utcFirst(A))})),Object(le.a)(ne,We+Ye,(function(a,A){return weekday(utcWeekNum(a),a.getUTCDay(),utcFirst(A))})),ne),ct=(ie={},Object(le.a)(ie,Be,(function(a){return 3*a})),Object(le.a)(ie,We,(function(a,A){return weekday(a,0,utcFirst(A))})),ie);function utcFloor(a,A){return floor(a,A||1,lt,ct,utcDate)}var ft=(oe={},Object(le.a)(oe,Ne,ye.a),Object(le.a)(oe,Be,_e.a.every(3)),Object(le.a)(oe,Ue,_e.a),Object(le.a)(oe,We,ge.b),Object(le.a)(oe,Ve,pe.a),Object(le.a)(oe,Ye,pe.a),Object(le.a)(oe,$e,pe.a),Object(le.a)(oe,Xe,we.a),Object(le.a)(oe,et,ke.a),Object(le.a)(oe,tt,Oe.a),Object(le.a)(oe,nt,Se.a),oe),dt=(se={},Object(le.a)(se,Ne,Te.a),Object(le.a)(se,Be,Ae.a.every(3)),Object(le.a)(se,Ue,Ae.a),Object(le.a)(se,We,ve.b),Object(le.a)(se,Ve,me.a),Object(le.a)(se,Ye,me.a),Object(le.a)(se,$e,me.a),Object(le.a)(se,Xe,je.a),Object(le.a)(se,et,Fe.a),Object(le.a)(se,tt,Oe.a),Object(le.a)(se,nt,Se.a),se);function timeInterval(a){return ft[a]}function utcInterval(a){return dt[a]}function offset(a,A,j){return a?a.offset(A,j):void 0}function timeOffset(a,A,j){return offset(timeInterval(a),A,j)}function utcOffset(a,A,j){return offset(utcInterval(a),A,j)}function sequence(a,A,j,P){return a?a.range(A,j,P):void 0}function timeSequence(a,A,j,P){return sequence(timeInterval(a),A,j,P)}function utcSequence(a,A,j,P){return sequence(utcInterval(a),A,j,P)}var ht=[Ne,Ue,Ve,Xe,et,tt,nt],pt=ht.slice(0,-1),gt=pt.slice(0,-1),mt=gt.slice(0,-1),vt=mt.slice(0,-1),yt=[Ne,Ue],bt=[Ne],_t=[[pt,1,1e3],[pt,5,5e3],[pt,15,15e3],[pt,30,3e4],[gt,1,6e4],[gt,5,3e5],[gt,15,9e5],[gt,30,18e5],[mt,1,36e5],[mt,3,108e5],[mt,6,216e5],[mt,12,432e5],[vt,1,864e5],[[Ne,We],1,6048e5],[yt,1,2592e6],[yt,3,7776e6],[bt,1,31536e6]];function bin(a){var A,j,P=a.extent,B=a.maxbins||40,q=Math.abs(Object(he.Z)(P))/B,ne=Object(Re.a)((function(a){return a[2]})).right(_t,q);return ne===_t.length?(A=bt,j=Object(Me.c)(P[0]/31536e6,P[1]/31536e6,B)):ne?(A=(ne=_t[q/_t[ne-1][2]<_t[ne][2]/q?ne-1:ne])[0],j=ne[1]):(A=ht,j=Math.max(Object(Me.c)(P[0],P[1],B),1)),{units:A,step:j}}},function(a,A,j){"use strict";j.d(A,"a",(function(){return _objectSpread2}));var P=j(6);function ownKeys(a,A){var j=Object.keys(a);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(a);A&&(P=P.filter((function(A){return Object.getOwnPropertyDescriptor(a,A).enumerable}))),j.push.apply(j,P)}return j}function _objectSpread2(a){for(var A=1;A<arguments.length;A++){var j=null!=arguments[A]?arguments[A]:{};A%2?ownKeys(Object(j),!0).forEach((function(A){Object(P.a)(a,A,j[A])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(j)):ownKeys(Object(j)).forEach((function(A){Object.defineProperty(a,A,Object.getOwnPropertyDescriptor(j,A))}))}return a}},function(a,A,j){"use strict";j.d(A,"a",(function(){return newInterval}));var P=new Date,B=new Date;function newInterval(a,A,j,q){function interval(A){return a(A=0===arguments.length?new Date:new Date(+A)),A}return interval.floor=function(A){return a(A=new Date(+A)),A},interval.ceil=function(j){return a(j=new Date(j-1)),A(j,1),a(j),j},interval.round=function(a){var A=interval(a),j=interval.ceil(a);return a-A<j-a?A:j},interval.offset=function(a,j){return A(a=new Date(+a),null==j?1:Math.floor(j)),a},interval.range=function(j,P,B){var q,ne=[];if(j=interval.ceil(j),B=null==B?1:Math.floor(B),!(j<P)||!(B>0))return ne;do{ne.push(q=new Date(+j)),A(j,B),a(j)}while(q<j&&j<P);return ne},interval.filter=function(j){return newInterval((function(A){if(A>=A)for(;a(A),!j(A);)A.setTime(A-1)}),(function(a,P){if(a>=a)if(P<0)for(;++P<=0;)for(;A(a,-1),!j(a););else for(;--P>=0;)for(;A(a,1),!j(a););}))},j&&(interval.count=function(A,q){return P.setTime(+A),B.setTime(+q),a(P),a(B),Math.floor(j(P,B))},interval.every=function(a){return a=Math.floor(a),isFinite(a)&&a>0?a>1?interval.filter(q?function(A){return q(A)%a===0}:function(A){return interval.count(0,A)%a===0}):interval:null}),interval}},,function(a,A,j){var P;!function(){"use strict";var j={}.hasOwnProperty;function classNames(){for(var a=[],A=0;A<arguments.length;A++){var P=arguments[A];if(P){var B=typeof P;if("string"===B||"number"===B)a.push(P);else if(Array.isArray(P)){if(P.length){var q=classNames.apply(null,P);q&&a.push(q)}}else if("object"===B)if(P.toString===Object.prototype.toString)for(var ne in P)j.call(P,ne)&&P[ne]&&a.push(ne);else a.push(P.toString())}}return a.join(" ")}a.exports?(classNames.default=classNames,a.exports=classNames):void 0===(P=function(){return classNames}.apply(A,[]))||(a.exports=P)}()},,,function(a,A){var j=a.exports={version:"2.6.12"};"number"==typeof __e&&(__e=j)},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.config=A.storage=void 0;var P=_interopRequireDefault(j(31)),B=_interopRequireDefault(j(32)),q=function(){var a=(0,B.default)(P.default.mark((function _callee(){var a;return P.default.wrap((function _callee$(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,ie.getCommaAccessToken();case 2:return a=A.sent,A.abrupt("return",a);case 4:case"end":return A.stop()}}),_callee,this)})));return function init(){return a.apply(this,arguments)}}(),ne=function(){var a=(0,B.default)(P.default.mark((function _callee2(){return P.default.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ie.logOut();case 2:"undefined"!==typeof window&&(window.location.href=window.location.origin);case 3:case"end":return a.stop()}}),_callee2,this)})));return function logOut(){return a.apply(this,arguments)}}(),ie=_interopRequireWildcard(j(274)),oe=_interopRequireWildcard(j(276));function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var A={};if(null!=a)for(var j in a)Object.prototype.hasOwnProperty.call(a,j)&&(A[j]=a[j]);return A.default=a,A}function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}A.storage=ie,A.config=oe,A.default={init:q,logOut:ne,isAuthenticated:function isAuthenticated(){return ie.isAuthed}}},,function(a,A,j){"use strict";function _getPrototypeOf(a){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}j.d(A,"a",(function(){return _getPrototypeOf}))},function(a,A,j){a.exports=j(431)()},function(a,A){var j=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=j)},function(a,A,j){var P=j(120)("wks"),B=j(85),q=j(26).Symbol,ne="function"==typeof q;(a.exports=function(a){return P[a]||(P[a]=ne&&q[a]||(ne?q:B)("Symbol."+a))}).store=P},function(a,A,j){"use strict";var P=j(199),B=Object.prototype.toString;function isArray(a){return"[object Array]"===B.call(a)}function isUndefined(a){return"undefined"===typeof a}function isObject(a){return null!==a&&"object"===typeof a}function isPlainObject(a){if("[object Object]"!==B.call(a))return!1;var A=Object.getPrototypeOf(a);return null===A||A===Object.prototype}function isFunction(a){return"[object Function]"===B.call(a)}function forEach(a,A){if(null!==a&&"undefined"!==typeof a)if("object"!==typeof a&&(a=[a]),isArray(a))for(var j=0,P=a.length;j<P;j++)A.call(null,a[j],j,a);else for(var B in a)Object.prototype.hasOwnProperty.call(a,B)&&A.call(null,a[B],B,a)}a.exports={isArray:isArray,isArrayBuffer:function isArrayBuffer(a){return"[object ArrayBuffer]"===B.call(a)},isBuffer:function isBuffer(a){return null!==a&&!isUndefined(a)&&null!==a.constructor&&!isUndefined(a.constructor)&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)},isFormData:function isFormData(a){return"undefined"!==typeof FormData&&a instanceof FormData},isArrayBufferView:function isArrayBufferView(a){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(a):a&&a.buffer&&a.buffer instanceof ArrayBuffer},isString:function isString(a){return"string"===typeof a},isNumber:function isNumber(a){return"number"===typeof a},isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:function isDate(a){return"[object Date]"===B.call(a)},isFile:function isFile(a){return"[object File]"===B.call(a)},isBlob:function isBlob(a){return"[object Blob]"===B.call(a)},isFunction:isFunction,isStream:function isStream(a){return isObject(a)&&isFunction(a.pipe)},isURLSearchParams:function isURLSearchParams(a){return"undefined"!==typeof URLSearchParams&&a instanceof URLSearchParams},isStandardBrowserEnv:function isStandardBrowserEnv(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:forEach,merge:function merge(){var a={};function assignValue(A,j){isPlainObject(a[j])&&isPlainObject(A)?a[j]=merge(a[j],A):isPlainObject(A)?a[j]=merge({},A):isArray(A)?a[j]=A.slice():a[j]=A}for(var A=0,j=arguments.length;A<j;A++)forEach(arguments[A],assignValue);return a},extend:function extend(a,A,j){return forEach(A,(function assignValue(A,B){a[B]=j&&"function"===typeof A?P(A,j):A})),a},trim:function trim(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},stripBOM:function stripBOM(a){return 65279===a.charCodeAt(0)&&(a=a.slice(1)),a}}},function(a,A,j){"use strict";j.d(A,"b",(function(){return q})),j.d(A,"a",(function(){return ne})),j.d(A,"c",(function(){return se}));var P=j(16),B=j(12);function weekday(a){return Object(P.a)((function(A){A.setDate(A.getDate()-(A.getDay()+7-a)%7),A.setHours(0,0,0,0)}),(function(a,A){a.setDate(a.getDate()+7*A)}),(function(a,A){return(A-a-(A.getTimezoneOffset()-a.getTimezoneOffset())*B.c)/B.f}))}var q=weekday(0),ne=weekday(1),ie=weekday(2),oe=weekday(3),se=weekday(4),le=weekday(5),he=weekday(6);q.range,ne.range,ie.range,oe.range,se.range,le.range,he.range},function(a,A,j){"use strict";j.d(A,"b",(function(){return q})),j.d(A,"a",(function(){return ne})),j.d(A,"c",(function(){return se}));var P=j(16),B=j(12);function utcWeekday(a){return Object(P.a)((function(A){A.setUTCDate(A.getUTCDate()-(A.getUTCDay()+7-a)%7),A.setUTCHours(0,0,0,0)}),(function(a,A){a.setUTCDate(a.getUTCDate()+7*A)}),(function(a,A){return(A-a)/B.f}))}var q=utcWeekday(0),ne=utcWeekday(1),ie=utcWeekday(2),oe=utcWeekday(3),se=utcWeekday(4),le=utcWeekday(5),he=utcWeekday(6);q.range,ne.range,ie.range,oe.range,se.range,le.range,he.range},function(a,A,j){a.exports=j(252)},function(a,A,j){"use strict";A.__esModule=!0;var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(254));A.default=function(a){return function(){var A=a.apply(this,arguments);return new P.default((function(a,j){return function step(B,q){try{var ne=A[B](q),ie=ne.value}catch(oe){return void j(oe)}if(!ne.done)return P.default.resolve(ie).then((function(a){step("next",a)}),(function(a){step("throw",a)}));a(ie)}("next")}))}}},function(a,A,j){var P=j(26),B=j(21),q=j(61),ne=j(56),ie=j(57),oe=function $export(a,A,j){var oe,se,le,he=a&$export.F,pe=a&$export.G,ge=a&$export.S,me=a&$export.P,ve=a&$export.B,ye=a&$export.W,_e=pe?B:B[A]||(B[A]={}),we=_e.prototype,ke=pe?P:ge?P[A]:(P[A]||{}).prototype;for(oe in pe&&(j=A),j)(se=!he&&ke&&void 0!==ke[oe])&&ie(_e,oe)||(le=se?ke[oe]:j[oe],_e[oe]=pe&&"function"!=typeof ke[oe]?j[oe]:ve&&se?q(le,P):ye&&ke[oe]==le?function(a){var A=function F(A,j,P){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(A);case 2:return new a(A,j)}return new a(A,j,P)}return a.apply(this,arguments)};return A.prototype=a.prototype,A}(le):me&&"function"==typeof le?q(Function.call,le):le,me&&((_e.virtual||(_e.virtual={}))[oe]=le,a&$export.R&&we&&!we[oe]&&ne(we,oe,le)))};oe.F=1,oe.G=2,oe.S=4,oe.P=8,oe.B=16,oe.W=32,oe.U=64,oe.R=128,a.exports=oe},function(a,A,j){"use strict";j.d(A,"a",(function(){return defaultLocale})),j.d(A,"b",(function(){return locale})),j.d(A,"c",(function(){return numberFormatDefaultLocale})),j.d(A,"d",(function(){return resetDefaultLocale})),j.d(A,"e",(function(){return timeFormatDefaultLocale}));var P,B,q=j(150),ne=j(81),ie=j(506),oe=j(507),se=j(508),le=j(242),he=j(149),pe=j(14),ge=j(0),me=j(107),ve=j(146);function memoize(a){var A={};return function(j){return A[j]||(A[j]=a(j))}}function numberLocale(a){var A=memoize(a.format),j=a.formatPrefix;return{format:A,formatPrefix:j,formatFloat:function formatFloat(a){var j=Object(ne.a)(a||",");if(null==j.precision){switch(j.precision=12,j.type){case"%":j.precision-=2;break;case"e":j.precision-=1}return function trimZeroes(a,A){return function(j){var P=a(j),B=P.indexOf(A);if(B<0)return P;for(var q=function rightmostDigit(a,A){var j,P=a.lastIndexOf("e");if(P>0)return P;for(P=a.length;--P>A;)if((j=a.charCodeAt(P))>=48&&j<=57)return P+1}(P,B),ne=q<P.length?P.slice(q):"";--q>B;)if("0"!==P[q]){++q;break}return P.slice(0,q)+ne}}(A(j),A(".1f")(1)[1])}return A(j)},formatSpan:function formatSpan(a,P,B,le){le=Object(ne.a)(null==le?",f":le);var he,pe=Object(q.c)(a,P,B),ge=Math.max(Math.abs(a),Math.abs(P));if(null==le.precision)switch(le.type){case"s":return isNaN(he=Object(ie.a)(pe,ge))||(le.precision=he),j(le,ge);case"":case"e":case"g":case"p":case"r":isNaN(he=Object(oe.a)(pe,ge))||(le.precision=he-("e"===le.type));break;case"f":case"%":isNaN(he=Object(se.a)(pe))||(le.precision=he-2*("%"===le.type))}return A(le)}}}function resetNumberFormatDefaultLocale(){return P=numberLocale({format:le.a,formatPrefix:le.b})}function numberFormatLocale(a){return numberLocale(Object(he.a)(a))}function numberFormatDefaultLocale(a){return arguments.length?P=numberFormatLocale(a):P}function timeMultiFormat(a,A,j){j=j||{},Object(ge.H)(j)||Object(ge.o)("Invalid time multi-format specifier: ".concat(j));var P=A(pe.i),B=A(pe.f),q=A(pe.d),ne=A(pe.a),ie=A(pe.k),oe=A(pe.g),se=A(pe.h),le=A(pe.l),he=a(j[pe.e]||".%L"),me=a(j[pe.i]||":%S"),ve=a(j[pe.f]||"%I:%M"),ye=a(j[pe.d]||"%I %p"),_e=a(j[pe.a]||j[pe.b]||"%a %d"),we=a(j[pe.k]||"%b %d"),ke=a(j[pe.g]||"%B"),Oe=a(j[pe.h]||"%B"),Se=a(j[pe.l]||"%Y");return function(a){return(P(a)<a?he:B(a)<a?me:q(a)<a?ve:ne(a)<a?ye:oe(a)<a?ie(a)<a?_e:we:le(a)<a?se(a)<a?ke:Oe:Se)(a)}}function timeLocale(a){var A=memoize(a.format),j=memoize(a.utcFormat);return{timeFormat:function timeFormat(a){return Object(ge.J)(a)?A(a):timeMultiFormat(A,pe.p,a)},utcFormat:function utcFormat(a){return Object(ge.J)(a)?j(a):timeMultiFormat(j,pe.v,a)},timeParse:memoize(a.parse),utcParse:memoize(a.utcParse)}}function resetTimeFormatDefaultLocale(){return B=timeLocale({format:me.a,parse:me.b,utcFormat:me.c,utcParse:me.d})}function timeFormatLocale(a){return timeLocale(Object(ve.a)(a))}function timeFormatDefaultLocale(a){return arguments.length?B=timeFormatLocale(a):B}resetNumberFormatDefaultLocale(),resetTimeFormatDefaultLocale();var ye=function createLocale(a,A){return Object(ge.p)({},a,A)};function locale(a,A){var j=a?numberFormatLocale(a):numberFormatDefaultLocale(),P=A?timeFormatLocale(A):timeFormatDefaultLocale();return ye(j,P)}function defaultLocale(a,A){var j=arguments.length;return j&&2!==j&&Object(ge.o)("defaultLocale expects either zero or two arguments."),j?ye(numberFormatDefaultLocale(a),timeFormatDefaultLocale(A)):ye(numberFormatDefaultLocale(),timeFormatDefaultLocale())}function resetDefaultLocale(){return resetNumberFormatDefaultLocale(),resetTimeFormatDefaultLocale(),defaultLocale()}},function(a,A){var j;j=function(){return this}();try{j=j||new Function("return this")()}catch(P){"object"===typeof window&&(j=window)}a.exports=j},function(a,A,j){"use strict";var P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},B=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}(),q=_interopRequireDefault(j(439)),ne=_interopRequireDefault(j(77)),ie=j(207);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}var oe=(0,ne.default)("github:request"),se=function(a){function ResponseError(a,A,j){_classCallCheck(this,ResponseError);var P=function _possibleConstructorReturn(a,A){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!==typeof A&&"function"!==typeof A?a:A}(this,(ResponseError.__proto__||Object.getPrototypeOf(ResponseError)).call(this,a));return P.path=A,P.request=j.config,P.response=(j||{}).response||j,P.status=j.status,P}return function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(a,A):a.__proto__=A)}(ResponseError,Error),ResponseError}(),le=function(){function Requestable(a,A,j){_classCallCheck(this,Requestable),this.__apiBase=A||"https://api.github.com",this.__auth={token:a.token,username:a.username,password:a.password},this.__AcceptHeader=j||"v3",a.token?this.__authorizationHeader="token "+a.token:a.username&&a.password&&(this.__authorizationHeader="Basic "+ie.Base64.encode(a.username+":"+a.password))}return B(Requestable,[{key:"__getURL",value:function __getURL(a){var A=a;-1===a.indexOf("//")&&(A=this.__apiBase+a);var j="timestamp="+(new Date).getTime();return A.replace(/(timestamp=\d+)/,j)}},{key:"__getRequestHeaders",value:function __getRequestHeaders(a,A){var j={"Content-Type":"application/json;charset=UTF-8",Accept:"application/vnd.github."+(A||this.__AcceptHeader)};return a&&(j.Accept+=".raw"),j.Accept+="+json",this.__authorizationHeader&&(j.Authorization=this.__authorizationHeader),j}},{key:"_getOptionsWithDefaults",value:function _getOptionsWithDefaults(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.visibility||a.affiliation||(a.type=a.type||"all"),a.sort=a.sort||"updated",a.per_page=a.per_page||"100",a}},{key:"_dateToISO",value:function _dateToISO(a){return a&&a instanceof Date&&(a=a.toISOString()),a}},{key:"_request",value:function _request(a,A,j,B,ne){var ie=this.__getURL(A),se=(j||{}).AcceptHeader;se&&delete j.AcceptHeader;var le=this.__getRequestHeaders(ne,se),pe={};j&&"object"===("undefined"===typeof j?"undefined":P(j))&&function methodHasNoBody(a){return-1!==he.indexOf(a)}(a)&&(pe=j,j=void 0);var ge={url:ie,method:a,headers:le,params:pe,data:j,responseType:ne?"text":"json"};oe(ge.method+" to "+ge.url);var me=(0,q.default)(ge).catch(callbackErrorOrThrow(B,A));return B&&me.then((function(a){a.data&&Object.keys(a.data).length>0?B(null,a.data,a):"GET"!==ge.method&&Object.keys(a.data).length<1?B(null,a.status<300,a):B(null,a.data,a)})),me}},{key:"_request204or404",value:function _request204or404(a,A,j){var P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"GET";return this._request(P,a,A).then((function success(a){return j&&j(null,!0,a),!0}),(function failure(a){if(404===a.response.status)return j&&j(null,!1,a),!1;throw j&&j(a),a}))}},{key:"_requestAllPages",value:function _requestAllPages(a,A,j,P){var B=this;return P=P||[],this._request("GET",a,A).then((function(q){var ne,ie=void 0;if(q.data instanceof Array)ie=q.data;else{if(!(q.data.items instanceof Array)){var le="cannot figure out how to append "+q.data+" to the result set";throw new se(le,a,q)}ie=q.data.items}(ne=P).push.apply(ne,function _toConsumableArray(a){if(Array.isArray(a)){for(var A=0,j=Array(a.length);A<a.length;A++)j[A]=a[A];return j}return Array.from(a)}(ie));var he=function getNextPage(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",A=a.split(/\s*,\s*/);return A.reduce((function(a,A){return-1!==A.search(/rel="next"/)?(A.match(/<(.*)>/)||[])[1]:a}),void 0)}(q.headers.link);return he&&(A||(A={}),A.page=parseInt(he.match(/([&\?]page=[0-9]*)/g).shift().split("=").pop()),!A||"number"===typeof A.page)?(oe("getting next page: "+he),B._requestAllPages(he,A,j,P)):(j&&j(null,P,q),q.data=P,q)})).catch(callbackErrorOrThrow(j,a))}}]),Requestable}();a.exports=le;var he=["GET","HEAD","DELETE"];function callbackErrorOrThrow(a,A){return function handler(j){var P=void 0;if(j.hasOwnProperty("config")){var B=j.response,q=B.status,ne=B.statusText,ie=j.config,le=q+" error making request "+ie.method+" "+ie.url+': "'+ne+'"';P=new se(le,A,j),oe(le+" "+JSON.stringify(j.data))}else P=j;if(!a)throw oe("throwing error"),P;oe("going to error callback"),a(P)}}},function(a,A,j){"use strict";var P=j(45);A.a=function(a){return(a=Object(P.b)(Math.abs(a)))?a[1]:NaN}},function(a,A,j){"use strict";var P=_interopRequireWildcard(j(278)),B=_interopRequireWildcard(j(329)),q=_interopRequireWildcard(j(330)),ne=_interopRequireWildcard(j(331)),ie=_interopRequireWildcard(j(332)),oe=_interopRequireDefault(j(333)),se=_interopRequireWildcard(j(334)),le=_interopRequireWildcard(j(343)),he=_interopRequireWildcard(j(344)),pe=_interopRequireWildcard(j(43)),ge=_interopRequireWildcard(j(345)),me=_interopRequireWildcard(j(346)),ve=_interopRequireDefault(j(347));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var A={};if(null!=a)for(var j in a)Object.prototype.hasOwnProperty.call(a,j)&&(A[j]=a[j]);return A.default=a,A}a.exports={account:P,athena:B,auth:q,billing:ne,devices:ie,derived:oe.default,drives:se,leaderboard:le,raw:he,request:pe,video:ve.default,navigation:ge,clips:me}},function(a,A,j){"use strict";j.r(A),j.d(A,"Debug",(function(){return ve.a})),j.d(A,"Error",(function(){return ve.b})),j.d(A,"Info",(function(){return ve.c})),j.d(A,"None",(function(){return ve.d})),j.d(A,"Warn",(function(){return ve.e})),j.d(A,"accessor",(function(){return ve.f})),j.d(A,"accessorFields",(function(){return ve.g})),j.d(A,"accessorName",(function(){return ve.h})),j.d(A,"array",(function(){return ve.i})),j.d(A,"ascending",(function(){return ve.j})),j.d(A,"clampRange",(function(){return ve.k})),j.d(A,"compare",(function(){return ve.l})),j.d(A,"constant",(function(){return ve.m})),j.d(A,"debounce",(function(){return ve.n})),j.d(A,"error",(function(){return ve.o})),j.d(A,"extend",(function(){return ve.p})),j.d(A,"extent",(function(){return ve.q})),j.d(A,"extentIndex",(function(){return ve.r})),j.d(A,"falsy",(function(){return ve.s})),j.d(A,"fastmap",(function(){return ve.t})),j.d(A,"field",(function(){return ve.u})),j.d(A,"flush",(function(){return ve.v})),j.d(A,"hasOwnProperty",(function(){return ve.w})),j.d(A,"id",(function(){return ve.x})),j.d(A,"identity",(function(){return ve.y})),j.d(A,"inherits",(function(){return ve.z})),j.d(A,"inrange",(function(){return ve.A})),j.d(A,"isArray",(function(){return ve.B})),j.d(A,"isBoolean",(function(){return ve.C})),j.d(A,"isDate",(function(){return ve.D})),j.d(A,"isFunction",(function(){return ve.E})),j.d(A,"isIterable",(function(){return ve.F})),j.d(A,"isNumber",(function(){return ve.G})),j.d(A,"isObject",(function(){return ve.H})),j.d(A,"isRegExp",(function(){return ve.I})),j.d(A,"isString",(function(){return ve.J})),j.d(A,"key",(function(){return ve.K})),j.d(A,"lerp",(function(){return ve.L})),j.d(A,"logger",(function(){return ve.M})),j.d(A,"lruCache",(function(){return ve.N})),j.d(A,"merge",(function(){return ve.O})),j.d(A,"mergeConfig",(function(){return ve.P})),j.d(A,"one",(function(){return ve.Q})),j.d(A,"pad",(function(){return ve.R})),j.d(A,"panLinear",(function(){return ve.S})),j.d(A,"panLog",(function(){return ve.T})),j.d(A,"panPow",(function(){return ve.U})),j.d(A,"panSymlog",(function(){return ve.V})),j.d(A,"peek",(function(){return ve.W})),j.d(A,"quarter",(function(){return ve.X})),j.d(A,"repeat",(function(){return ve.Y})),j.d(A,"span",(function(){return ve.Z})),j.d(A,"splitAccessPath",(function(){return ve.ab})),j.d(A,"stringValue",(function(){return ve.bb})),j.d(A,"toBoolean",(function(){return ve.cb})),j.d(A,"toDate",(function(){return ve.db})),j.d(A,"toNumber",(function(){return ve.eb})),j.d(A,"toSet",(function(){return ve.fb})),j.d(A,"toString",(function(){return ve.gb})),j.d(A,"truncate",(function(){return ve.hb})),j.d(A,"truthy",(function(){return ve.ib})),j.d(A,"utcquarter",(function(){return ve.jb})),j.d(A,"visitArray",(function(){return ve.kb})),j.d(A,"writeConfig",(function(){return ve.lb})),j.d(A,"zero",(function(){return ve.mb})),j.d(A,"zoomLinear",(function(){return ve.nb})),j.d(A,"zoomLog",(function(){return ve.ob})),j.d(A,"zoomPow",(function(){return ve.pb})),j.d(A,"zoomSymlog",(function(){return ve.qb})),j.d(A,"Dataflow",(function(){return Dataflow})),j.d(A,"EventStream",(function(){return EventStream})),j.d(A,"MultiPulse",(function(){return MultiPulse})),j.d(A,"Operator",(function(){return Operator})),j.d(A,"Parameters",(function(){return Parameters})),j.d(A,"Pulse",(function(){return Pulse})),j.d(A,"Transform",(function(){return Transform})),j.d(A,"changeset",(function(){return changeset})),j.d(A,"definition",(function(){return definition})),j.d(A,"ingest",(function(){return ingest$1})),j.d(A,"isTuple",(function(){return isTuple})),j.d(A,"transform",(function(){return vega_dataflow_module_transform})),j.d(A,"transforms",(function(){return Ue})),j.d(A,"tupleid",(function(){return tupleid})),j.d(A,"bandwidthNRD",(function(){return estimateBandwidth})),j.d(A,"bin",(function(){return bin})),j.d(A,"bootstrapCI",(function(){return bootstrapCI})),j.d(A,"cumulativeLogNormal",(function(){return cumulativeLogNormal})),j.d(A,"cumulativeNormal",(function(){return cumulativeNormal})),j.d(A,"cumulativeUniform",(function(){return cumulativeUniform})),j.d(A,"densityLogNormal",(function(){return densityLogNormal})),j.d(A,"densityNormal",(function(){return densityNormal})),j.d(A,"densityUniform",(function(){return densityUniform})),j.d(A,"dotbin",(function(){return dotbin})),j.d(A,"quantileLogNormal",(function(){return quantileLogNormal})),j.d(A,"quantileNormal",(function(){return quantileNormal})),j.d(A,"quantileUniform",(function(){return quantileUniform})),j.d(A,"quantiles",(function(){return quantiles})),j.d(A,"quartiles",(function(){return quartiles})),j.d(A,"random",(function(){return et})),j.d(A,"randomInteger",(function(){return integer})),j.d(A,"randomKDE",(function(){return vega_statistics_module_kde})),j.d(A,"randomLCG",(function(){return lcg})),j.d(A,"randomLogNormal",(function(){return lognormal})),j.d(A,"randomMixture",(function(){return mixture})),j.d(A,"randomNormal",(function(){return gaussian})),j.d(A,"randomUniform",(function(){return uniform})),j.d(A,"regressionExp",(function(){return exp})),j.d(A,"regressionLinear",(function(){return linear})),j.d(A,"regressionLoess",(function(){return loess})),j.d(A,"regressionLog",(function(){return log})),j.d(A,"regressionPoly",(function(){return poly})),j.d(A,"regressionPow",(function(){return pow})),j.d(A,"regressionQuad",(function(){return vega_statistics_module_quad})),j.d(A,"sampleCurve",(function(){return sampleCurve})),j.d(A,"sampleLogNormal",(function(){return sampleLogNormal})),j.d(A,"sampleNormal",(function(){return sampleNormal})),j.d(A,"sampleUniform",(function(){return sampleUniform})),j.d(A,"setRandom",(function(){return setRandom})),j.d(A,"DATE",(function(){return ot.a})),j.d(A,"DAY",(function(){return ot.b})),j.d(A,"DAYOFYEAR",(function(){return ot.c})),j.d(A,"HOURS",(function(){return ot.d})),j.d(A,"MILLISECONDS",(function(){return ot.e})),j.d(A,"MINUTES",(function(){return ot.f})),j.d(A,"MONTH",(function(){return ot.g})),j.d(A,"QUARTER",(function(){return ot.h})),j.d(A,"SECONDS",(function(){return ot.i})),j.d(A,"TIME_UNITS",(function(){return ot.j})),j.d(A,"WEEK",(function(){return ot.k})),j.d(A,"YEAR",(function(){return ot.l})),j.d(A,"dayofyear",(function(){return ot.m})),j.d(A,"timeBin",(function(){return ot.n})),j.d(A,"timeFloor",(function(){return ot.o})),j.d(A,"timeInterval",(function(){return ot.p})),j.d(A,"timeOffset",(function(){return ot.q})),j.d(A,"timeSequence",(function(){return ot.r})),j.d(A,"timeUnitSpecifier",(function(){return ot.s})),j.d(A,"timeUnits",(function(){return ot.t})),j.d(A,"utcFloor",(function(){return ot.u})),j.d(A,"utcInterval",(function(){return ot.v})),j.d(A,"utcOffset",(function(){return ot.w})),j.d(A,"utcSequence",(function(){return ot.x})),j.d(A,"utcdayofyear",(function(){return ot.y})),j.d(A,"utcweek",(function(){return ot.z})),j.d(A,"week",(function(){return ot.A})),j.d(A,"format",(function(){return ke.a})),j.d(A,"formats",(function(){return ke.b})),j.d(A,"inferType",(function(){return ke.c})),j.d(A,"inferTypes",(function(){return ke.d})),j.d(A,"loader",(function(){return ke.e})),j.d(A,"read",(function(){return ke.f})),j.d(A,"responseType",(function(){return ke.g})),j.d(A,"typeParsers",(function(){return ke.h})),j.d(A,"Bounds",(function(){return Bounds})),j.d(A,"CanvasHandler",(function(){return CanvasHandler})),j.d(A,"CanvasRenderer",(function(){return CanvasRenderer})),j.d(A,"Gradient",(function(){return Gradient})),j.d(A,"GroupItem",(function(){return GroupItem})),j.d(A,"Handler",(function(){return vega_scenegraph_module_Handler})),j.d(A,"Item",(function(){return Item})),j.d(A,"Marks",(function(){return ho})),j.d(A,"RenderType",(function(){return qo})),j.d(A,"Renderer",(function(){return vega_scenegraph_module_Renderer})),j.d(A,"ResourceLoader",(function(){return ResourceLoader})),j.d(A,"SVGHandler",(function(){return SVGHandler})),j.d(A,"SVGRenderer",(function(){return SVGRenderer})),j.d(A,"SVGStringRenderer",(function(){return SVGStringRenderer})),j.d(A,"Scenegraph",(function(){return Scenegraph})),j.d(A,"boundClip",(function(){return boundClip})),j.d(A,"boundContext",(function(){return boundContext})),j.d(A,"boundItem",(function(){return boundItem})),j.d(A,"boundMark",(function(){return boundMark})),j.d(A,"boundStroke",(function(){return boundStroke})),j.d(A,"domChild",(function(){return domChild})),j.d(A,"domClear",(function(){return domClear})),j.d(A,"domCreate",(function(){return domCreate})),j.d(A,"domFind",(function(){return domFind})),j.d(A,"font",(function(){return vega_scenegraph_module_font})),j.d(A,"fontFamily",(function(){return fontFamily})),j.d(A,"fontSize",(function(){return vega_scenegraph_module_fontSize})),j.d(A,"intersect",(function(){return vega_scenegraph_module_intersect})),j.d(A,"intersectBoxLine",(function(){return intersectBoxLine})),j.d(A,"intersectPath",(function(){return intersectPath})),j.d(A,"intersectPoint",(function(){return intersectPoint})),j.d(A,"intersectRule",(function(){return intersectRule})),j.d(A,"lineHeight",(function(){return lineHeight})),j.d(A,"markup",(function(){return markup})),j.d(A,"multiLineOffset",(function(){return multiLineOffset})),j.d(A,"pathCurves",(function(){return curves})),j.d(A,"pathEqual",(function(){return pathEqual})),j.d(A,"pathParse",(function(){return pathParse})),j.d(A,"pathRectangle",(function(){return vg_rect})),j.d(A,"pathRender",(function(){return pathRender})),j.d(A,"pathSymbols",(function(){return vega_scenegraph_module_symbols})),j.d(A,"pathTrail",(function(){return vg_trail})),j.d(A,"point",(function(){return vega_scenegraph_module_point})),j.d(A,"renderModule",(function(){return renderModule})),j.d(A,"resetSVGClipId",(function(){return resetSVGClipId})),j.d(A,"resetSVGDefIds",(function(){return resetSVGDefIds})),j.d(A,"sceneEqual",(function(){return sceneEqual})),j.d(A,"sceneFromJSON",(function(){return sceneFromJSON})),j.d(A,"scenePickVisit",(function(){return pickVisit})),j.d(A,"sceneToJSON",(function(){return sceneToJSON})),j.d(A,"sceneVisit",(function(){return vega_scenegraph_module_visit})),j.d(A,"sceneZOrder",(function(){return zorder})),j.d(A,"serializeXML",(function(){return Po})),j.d(A,"textMetrics",(function(){return lo})),j.d(A,"interpolate",(function(){return vega_scale_module_interpolate})),j.d(A,"interpolateColors",(function(){return interpolateColors})),j.d(A,"interpolateRange",(function(){return interpolateRange})),j.d(A,"quantizeInterpolator",(function(){return quantizeInterpolator})),j.d(A,"scale",(function(){return vega_scale_module_scale})),j.d(A,"scheme",(function(){return vega_scale_module_scheme})),j.d(A,"projection",(function(){return vega_projection_module_projection})),j.d(A,"View",(function(){return View})),j.d(A,"defaultLocale",(function(){return Oe.a})),j.d(A,"formatLocale",(function(){return Oe.c})),j.d(A,"locale",(function(){return Oe.b})),j.d(A,"resetDefaultLocale",(function(){return Oe.d})),j.d(A,"timeFormatLocale",(function(){return Oe.e})),j.d(A,"expressionFunction",(function(){return expressionFunction})),j.d(A,"parse",(function(){return vega_parser_module_parse})),j.d(A,"runtimeContext",(function(){return vega_runtime_module_context})),j.d(A,"codegenExpression",(function(){return vega_expression_module_codegen})),j.d(A,"parseExpression",(function(){return parser})),j.d(A,"parseSelector",(function(){return eventSelector})),j.d(A,"version",(function(){return jg}));var P={};j.r(P),j.d(P,"aggregate",(function(){return Aggregate})),j.d(P,"bin",(function(){return Bin})),j.d(P,"collect",(function(){return Collect})),j.d(P,"compare",(function(){return Compare})),j.d(P,"countpattern",(function(){return CountPattern})),j.d(P,"cross",(function(){return Cross})),j.d(P,"density",(function(){return Density})),j.d(P,"dotbin",(function(){return DotBin})),j.d(P,"expression",(function(){return Expression})),j.d(P,"extent",(function(){return Extent})),j.d(P,"facet",(function(){return Facet})),j.d(P,"field",(function(){return Field})),j.d(P,"filter",(function(){return Filter})),j.d(P,"flatten",(function(){return Flatten})),j.d(P,"fold",(function(){return Fold})),j.d(P,"formula",(function(){return Formula})),j.d(P,"generate",(function(){return Generate})),j.d(P,"impute",(function(){return Impute})),j.d(P,"joinaggregate",(function(){return JoinAggregate})),j.d(P,"kde",(function(){return KDE})),j.d(P,"key",(function(){return Key})),j.d(P,"load",(function(){return Load})),j.d(P,"lookup",(function(){return Lookup})),j.d(P,"multiextent",(function(){return MultiExtent})),j.d(P,"multivalues",(function(){return MultiValues})),j.d(P,"params",(function(){return Params})),j.d(P,"pivot",(function(){return Pivot})),j.d(P,"prefacet",(function(){return PreFacet})),j.d(P,"project",(function(){return Project})),j.d(P,"proxy",(function(){return Proxy})),j.d(P,"quantile",(function(){return Quantile})),j.d(P,"relay",(function(){return Relay})),j.d(P,"sample",(function(){return Sample})),j.d(P,"sequence",(function(){return Sequence})),j.d(P,"sieve",(function(){return Sieve})),j.d(P,"subflow",(function(){return Subflow})),j.d(P,"timeunit",(function(){return TimeUnit})),j.d(P,"tupleindex",(function(){return TupleIndex})),j.d(P,"values",(function(){return Values})),j.d(P,"window",(function(){return Window}));var B={};j.r(B),j.d(B,"interpolate",(function(){return src_value})),j.d(B,"interpolateArray",(function(){return d3_interpolate_src_array})),j.d(B,"interpolateBasis",(function(){return src_basis})),j.d(B,"interpolateBasisClosed",(function(){return src_basisClosed})),j.d(B,"interpolateDate",(function(){return date})),j.d(B,"interpolateDiscrete",(function(){return discrete})),j.d(B,"interpolateHue",(function(){return src_hue})),j.d(B,"interpolateNumber",(function(){return src_number})),j.d(B,"interpolateNumberArray",(function(){return numberArray})),j.d(B,"interpolateObject",(function(){return src_object})),j.d(B,"interpolateRound",(function(){return src_round})),j.d(B,"interpolateString",(function(){return string})),j.d(B,"interpolateTransformCss",(function(){return Jn})),j.d(B,"interpolateTransformSvg",(function(){return Qn})),j.d(B,"interpolateZoom",(function(){return Zn})),j.d(B,"interpolateRgb",(function(){return yn})),j.d(B,"interpolateRgbBasis",(function(){return bn})),j.d(B,"interpolateRgbBasisClosed",(function(){return _n})),j.d(B,"interpolateHsl",(function(){return er})),j.d(B,"interpolateHslLong",(function(){return nr})),j.d(B,"interpolateLab",(function(){return lab_lab})),j.d(B,"interpolateHcl",(function(){return sr})),j.d(B,"interpolateHclLong",(function(){return ur})),j.d(B,"interpolateCubehelix",(function(){return vr})),j.d(B,"interpolateCubehelixLong",(function(){return yr})),j.d(B,"piecewise",(function(){return piecewise_piecewise})),j.d(B,"quantize",(function(){return src_quantize}));var q={};j.r(q),j.d(q,"bound",(function(){return Bound})),j.d(q,"identifier",(function(){return vega_view_transforms_module_Identifier})),j.d(q,"mark",(function(){return Mark})),j.d(q,"overlap",(function(){return Overlap})),j.d(q,"render",(function(){return Render})),j.d(q,"viewlayout",(function(){return ViewLayout}));var ne={};j.r(ne),j.d(ne,"axisticks",(function(){return AxisTicks})),j.d(ne,"datajoin",(function(){return DataJoin})),j.d(ne,"encode",(function(){return Encode})),j.d(ne,"legendentries",(function(){return LegendEntries})),j.d(ne,"linkpath",(function(){return LinkPath})),j.d(ne,"pie",(function(){return Pie})),j.d(ne,"scale",(function(){return Scale})),j.d(ne,"sortitems",(function(){return SortItems})),j.d(ne,"stack",(function(){return Stack}));var ie={};j.r(ie),j.d(ie,"contour",(function(){return Contour})),j.d(ie,"geojson",(function(){return GeoJSON})),j.d(ie,"geopath",(function(){return GeoPath})),j.d(ie,"geopoint",(function(){return GeoPoint})),j.d(ie,"geoshape",(function(){return GeoShape})),j.d(ie,"graticule",(function(){return Graticule})),j.d(ie,"heatmap",(function(){return Heatmap})),j.d(ie,"isocontour",(function(){return Isocontour})),j.d(ie,"kde2d",(function(){return KDE2D})),j.d(ie,"projection",(function(){return Projection}));var oe={};j.r(oe),j.d(oe,"force",(function(){return Force}));var se={};j.r(se),j.d(se,"nest",(function(){return Nest})),j.d(se,"pack",(function(){return Pack})),j.d(se,"partition",(function(){return Partition})),j.d(se,"stratify",(function(){return Stratify})),j.d(se,"tree",(function(){return Tree})),j.d(se,"treelinks",(function(){return TreeLinks})),j.d(se,"treemap",(function(){return Treemap}));var le={};j.r(le),j.d(le,"label",(function(){return Label}));var he={};j.r(he),j.d(he,"loess",(function(){return Loess})),j.d(he,"regression",(function(){return Regression}));var pe={};j.r(pe),j.d(pe,"voronoi",(function(){return vega_voronoi_module_Voronoi}));var ge={};j.r(ge),j.d(ge,"wordcloud",(function(){return Wordcloud}));var me={};j.r(me),j.d(me,"crossfilter",(function(){return CrossFilter})),j.d(me,"resolvefilter",(function(){return ResolveFilter}));var ve=j(0),ye=j(10),_e=j.n(ye),we=j(13),ke=j(44),Oe=j(34);function UniqueList(a){var A=a||ve.y,j=[],P={};return j.add=function(a){var B=A(a);return P[B]||(P[B]=1,j.push(a)),j},j.remove=function(a){var B=A(a);if(P[B]){P[B]=0;var q=j.indexOf(a);q>=0&&j.splice(q,1)}return j},j}function asyncCallback(a,A){return _asyncCallback.apply(this,arguments)}function _asyncCallback(){return(_asyncCallback=Object(we.a)(_e.a.mark((function _callee(a,A){return _e.a.wrap((function _callee$(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,j.next=3,A(a);case 3:j.next=8;break;case 5:j.prev=5,j.t0=j.catch(0),a.error(j.t0);case 8:case"end":return j.stop()}}),_callee,null,[[0,5]])})))).apply(this,arguments)}var Se=Symbol("vega_id"),Te=1;function isTuple(a){return!(!a||!tupleid(a))}function tupleid(a){return a[Se]}function setid(a,A){return a[Se]=A,a}function ingest$1(a){var A=a===Object(a)?a:{data:a};return tupleid(A)?A:setid(A,Te++)}function vega_dataflow_module_derive(a){return rederive(a,ingest$1({}))}function rederive(a,A){for(var j in a)A[j]=a[j];return A}function replace(a,A){return setid(A,tupleid(a))}function stableCompare(a,A){return a?A?function(j,P){return a(j,P)||tupleid(A(j))-tupleid(A(P))}:function(A,j){return a(A,j)||tupleid(A)-tupleid(j)}:null}function isChangeSet(a){return a&&a.constructor===changeset}function changeset(){var a=[],A=[],j=[],P=[],B=[],q=null,ne=!1;return{constructor:changeset,insert:function insert(A){for(var j=Object(ve.i)(A),P=j.length,B=0;B<P;++B)a.push(j[B]);return this},remove:function remove(a){for(var j=Object(ve.E)(a)?P:A,B=Object(ve.i)(a),q=B.length,ne=0;ne<q;++ne)j.push(B[ne]);return this},modify:function modify(a,A,P){var q={field:A,value:Object(ve.m)(P)};return Object(ve.E)(a)?(q.filter=a,B.push(q)):(q.tuple=a,j.push(q)),this},encode:function encode(a,A){return Object(ve.E)(a)?B.push({filter:a,field:A}):j.push({tuple:a,field:A}),this},clean:function clean(a){return q=a,this},reflow:function reflow(){return ne=!0,this},pulse:function pulse(ie,oe){var se,le,he,pe,ge,me,ve={},ye={};for(se=0,le=oe.length;se<le;++se)ve[tupleid(oe[se])]=1;for(se=0,le=A.length;se<le;++se)ve[tupleid(ge=A[se])]=-1;for(se=0,le=P.length;se<le;++se)pe=P[se],oe.forEach((function(a){pe(a)&&(ve[tupleid(a)]=-1)}));for(se=0,le=a.length;se<le;++se)me=tupleid(ge=a[se]),ve[me]?ve[me]=1:ie.add.push(ingest$1(a[se]));for(se=0,le=oe.length;se<le;++se)ge=oe[se],ve[tupleid(ge)]<0&&ie.rem.push(ge);function modify(a,A,j){j?a[A]=j(a):ie.encode=A,ne||(ye[tupleid(a)]=a)}for(se=0,le=j.length;se<le;++se)ge=(he=j[se]).tuple,pe=he.field,(me=ve[tupleid(ge)])>0&&(modify(ge,pe,he.value),ie.modifies(pe));for(se=0,le=B.length;se<le;++se)he=B[se],pe=he.filter,oe.forEach((function(a){pe(a)&&ve[tupleid(a)]>0&&modify(a,he.field,he.value)})),ie.modifies(he.field);if(ne)ie.mod=A.length||P.length?oe.filter((function(a){return ve[tupleid(a)]>0})):oe.slice();else for(me in ye)ie.mod.push(ye[me]);return(q||null==q&&(A.length||P.length))&&ie.clean(!0),ie}}}var Ae="_:mod:_";function Parameters(){Object.defineProperty(this,Ae,{writable:!0,value:{}})}Parameters.prototype={set:function set(a,A,j,P){var B=this,q=B[a],ne=B[Ae];return null!=A&&A>=0?(q[A]!==j||P)&&(q[A]=j,ne[A+":"+a]=-1,ne[a]=-1):(q!==j||P)&&(B[a]=j,ne[a]=Object(ve.B)(j)?1+j.length:-1),B},modified:function modified(a,A){var j=this[Ae];if(!arguments.length){for(var P in j)if(j[P])return!0;return!1}if(Object(ve.B)(a)){for(var B=0;B<a.length;++B)if(j[a[B]])return!0;return!1}return null!=A&&A>=0?A+1<j[a]||!!j[A+":"+a]:!!j[a]},clear:function clear(){return this[Ae]={},this}};var je=0,Fe=new Parameters;function Operator(a,A,j,P){this.id=++je,this.value=a,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,A&&(this._update=A),j&&this.parameters(j,P)}function vega_dataflow_module_flag(a){return function(A){var j=this.flags;return 0===arguments.length?!!(j&a):(this.flags=A?j|a:j&~a,this)}}Operator.prototype={targets:function targets(){return this._targets||(this._targets=UniqueList(ve.x))},set:function set(a){return this.value!==a?(this.value=a,1):0},skip:vega_dataflow_module_flag(1),modified:vega_dataflow_module_flag(2),parameters:function parameters(a,A,j){var P=this;A=!1!==A;var B,q,ne,ie,oe=this._argval=this._argval||new Parameters,se=this._argops=this._argops||[],le=[],he=function add(a,j,B){B instanceof Operator?(B!==P&&(A&&B.targets().add(P),le.push(B)),se.push({op:B,name:a,index:j})):oe.set(a,j,B)};for(B in a)if(q=a[B],"pulse"===B)Object(ve.i)(q).forEach((function(a){a instanceof Operator?a!==P&&(a.targets().add(P),le.push(a)):Object(ve.o)("Pulse parameters must be operator instances.")})),this.source=q;else if(Object(ve.B)(q))for(oe.set(B,-1,Array(ne=q.length)),ie=0;ie<ne;++ie)he(B,ie,q[ie]);else he(B,-1,q);return this.marshall().clear(),j&&(se.initonly=!0),le},marshall:function marshall(a){var A,j,P,B,q=this._argval||Fe,ne=this._argops;if(ne){var ie=ne.length;for(j=0;j<ie;++j)B=(P=(A=ne[j]).op).modified()&&P.stamp===a,q.set(A.name,A.index,P.value,B);if(ne.initonly){for(j=0;j<ie;++j)(A=ne[j]).op.targets().remove(this);this._argops=null,this._update=null}}return q},detach:function detach(){var a,A,j,P=this._argops;if(P)for(a=0,A=P.length;a<A;++a)(j=P[a].op)._targets&&j._targets.remove(this);this.pulse=null,this.source=null},evaluate:function evaluate(a){var A=this._update;if(A){var j=this.marshall(a.stamp),P=A.call(this,j,a);if(j.clear(),P!==this.value)this.value=P;else if(!this.modified())return a.StopPropagation}},run:function run(a){return a.stamp<this.stamp?a.StopPropagation:(this.skip()?(this.skip(!1),A=0):A=this.evaluate(a),this.pulse=A||a);var A}};var Re=0;function EventStream(a,A,j){this.id=++Re,this.value=null,j&&(this.receive=j),a&&(this._filter=a),A&&(this._apply=A)}function vega_dataflow_module_stream(a,A,j){return new EventStream(a,A,j)}function _request(){return(_request=Object(we.a)(_e.a.mark((function _callee2(a,A){var j,P,B;return _e.a.wrap((function _callee2$(q){for(;;)switch(q.prev=q.next){case 0:return j=this,P=0,q.prev=2,q.next=5,j.loader().load(a,{context:"dataflow",response:Object(ke.g)(A&&A.type)});case 5:B=q.sent;try{B=j.parse(B,A)}catch(ne){P=-2,j.warn("Data ingestion failed",a,ne)}q.next=13;break;case 9:q.prev=9,q.t0=q.catch(2),P=-1,j.warn("Loading failed",a,q.t0);case 13:return q.abrupt("return",{data:B,status:P});case 14:case"end":return q.stop()}}),_callee2,this,[[2,9]])})))).apply(this,arguments)}function _preload(){return(_preload=Object(we.a)(_e.a.mark((function _callee3(a,A,j){var P,B,q;return _e.a.wrap((function _callee3$(ne){for(;;)switch(ne.prev=ne.next){case 0:return(B=(P=this)._pending||loadPending(P)).requests+=1,ne.next=4,P.request(A,j);case 4:return q=ne.sent,P.pulse(a,P.changeset().remove(ve.ib).insert(q.data||[])),B.done(),ne.abrupt("return",q);case 8:case"end":return ne.stop()}}),_callee3,this)})))).apply(this,arguments)}function loadPending(a){var A,j=new Promise((function(a){return A=a}));return j.requests=0,j.done=function(){0===--j.requests&&(a._pending=null,A(a))},a._pending=j}EventStream.prototype={_filter:ve.ib,_apply:ve.y,targets:function targets(){return this._targets||(this._targets=UniqueList(ve.x))},consume:function consume(a){return arguments.length?(this._consume=!!a,this):!!this._consume},receive:function receive(a){if(this._filter(a)){for(var A=this.value=this._apply(a),j=this._targets,P=j?j.length:0,B=0;B<P;++B)j[B].receive(A);this._consume&&(a.preventDefault(),a.stopPropagation())}},filter:function filter(a){var A=vega_dataflow_module_stream(a);return this.targets().add(A),A},apply:function apply(a){var A=vega_dataflow_module_stream(null,a);return this.targets().add(A),A},merge:function merge(){var a=vega_dataflow_module_stream();this.targets().add(a);for(var A=0,j=arguments.length;A<j;++A)arguments[A].targets().add(a);return a},throttle:function throttle(a){var A=-1;return this.filter((function(){var j=Date.now();return j-A>a?(A=j,1):0}))},debounce:function debounce(a){var A=vega_dataflow_module_stream();return this.targets().add(vega_dataflow_module_stream(null,null,Object(ve.n)(a,(function(a){var j=a.dataflow;A.receive(a),j&&j.run&&j.run()})))),A},between:function between(a,A){var j=!1;return a.targets().add(vega_dataflow_module_stream(null,null,(function(){return j=!0}))),A.targets().add(vega_dataflow_module_stream(null,null,(function(){return j=!1}))),this.filter((function(){return j}))},detach:function detach(){this._filter=ve.ib,this._targets=null}};var Me={skip:!0};function onStream(a,A,j,P,B,q){var ne,ie,oe=Object(ve.p)({},q,Me);Object(ve.E)(j)||(j=Object(ve.m)(j)),void 0===P?ne=function func(A){return a.touch(j(A))}:Object(ve.E)(P)?(ie=new Operator(null,P,B,!1),ne=function func(A){ie.evaluate(A);var P=j(A),B=ie.value;isChangeSet(B)?a.pulse(P,B,q):a.update(P,B,oe)}):ne=function func(A){return a.update(j(A),P,oe)},A.apply(ne)}function onOperator(a,A,j,P,B,q){if(void 0===P)A.targets().add(j);else{var ne=q||{},ie=new Operator(null,function updater(a,A){return A=Object(ve.E)(A)?A:Object(ve.m)(A),a?function(j,P){var B=A(j,P);return a.skip()||(a.skip(B!==this.value).value=B),B}:A}(j,P),B,!1);ie.modified(ne.force),ie.rank=A.rank,A.targets().add(ie),j&&(ie.skip(!0),ie.value=j.value,ie.targets().add(j),a.connect(j,[ie]))}}var Ne={};function Pulse(a,A,j){this.dataflow=a,this.stamp=null==A?-1:A,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=j||null}function _materialize(a,A){var j=[];return Object(ve.kb)(a,A,(function(a){return j.push(a)})),j}function vega_dataflow_module_filter(a,A){var j={};return a.visit(A,(function(a){j[tupleid(a)]=1})),function(a){return j[tupleid(a)]?null:a}}function addFilter(a,A){return a?function(j,P){return a(j,P)&&A(j,P)}:A}function MultiPulse(a,A,j,P){var B=this,q=j.length,ne=0;this.dataflow=a,this.stamp=A,this.fields=null,this.encode=P||null,this.pulses=j;for(var ie=0;ie<q;++ie){var oe=j[ie];if(oe.stamp===A){if(oe.fields){var se=B.fields||(B.fields={});for(var le in oe.fields)se[le]=1}oe.changed(B.ADD)&&(ne|=B.ADD),oe.changed(B.REM)&&(ne|=B.REM),oe.changed(B.MOD)&&(ne|=B.MOD)}}this.changes=ne}function _evaluate(){return(_evaluate=Object(we.a)(_e.a.mark((function _callee4(a,A,j){var P,B,q,ne,ie,oe,se,le,he;return _e.a.wrap((function _callee4$(pe){for(;;)switch(pe.prev=pe.next){case 0:if(B=[],!(P=this)._pulse){pe.next=3;break}return pe.abrupt("return",reentrant(P));case 3:if(!P._pending){pe.next=6;break}return pe.next=6,P._pending;case 6:if(!A){pe.next=9;break}return pe.next=9,asyncCallback(P,A);case 9:if(P._touched.length){pe.next=12;break}return P.debug("Dataflow invoked, but nothing to do."),pe.abrupt("return",P);case 12:q=++P._clock,P._pulse=new Pulse(P,q,a),P._touched.forEach((function(a){return P._enqueue(a,!0)})),P._touched=UniqueList(ve.x),ne=0,pe.prev=17;case 18:if(!(P._heap.size()>0)){pe.next=35;break}if((ie=P._heap.pop()).rank===ie.qrank){pe.next=23;break}return P._enqueue(ie,!0),pe.abrupt("continue",18);case 23:if(!(oe=ie.run(P._getPulse(ie,a))).then){pe.next=30;break}return pe.next=27,oe;case 27:oe=pe.sent,pe.next=31;break;case 30:oe.async&&(B.push(oe.async),oe=Ne);case 31:oe!==Ne&&ie._targets&&ie._targets.forEach((function(a){return P._enqueue(a)})),++ne,pe.next=18;break;case 35:pe.next=41;break;case 37:pe.prev=37,pe.t0=pe.catch(17),P._heap.clear(),se=pe.t0;case 41:if(P._input={},P._pulse=null,P.debug("Pulse ".concat(q,": ").concat(ne," operators")),se&&(P._postrun=[],P.error(se)),!P._postrun.length){pe.next=55;break}le=P._postrun.sort((function(a,A){return A.priority-a.priority})),P._postrun=[],he=0;case 49:if(!(he<le.length)){pe.next=55;break}return pe.next=52,asyncCallback(P,le[he].callback);case 52:++he,pe.next=49;break;case 55:if(!j){pe.next=58;break}return pe.next=58,asyncCallback(P,j);case 58:return B.length&&Promise.all(B).then((function(a){return P.runAsync(null,(function(){a.forEach((function(a){try{a(P)}catch(A){P.error(A)}}))}))})),pe.abrupt("return",P);case 60:case"end":return pe.stop()}}),_callee4,this,[[17,37]])})))).apply(this,arguments)}function _runAsync(){return(_runAsync=Object(we.a)(_e.a.mark((function _callee5(a,A,j){var P,B=this;return _e.a.wrap((function _callee5$(q){for(;;)switch(q.prev=q.next){case 0:if(!this._running){q.next=5;break}return q.next=3,this._running;case 3:q.next=0;break;case 5:return P=function clear(){return B._running=null},(this._running=this.evaluate(a,A,j)).then(P,P),q.abrupt("return",this._running);case 8:case"end":return q.stop()}}),_callee5,this)})))).apply(this,arguments)}function reentrant(a){return a.error("Dataflow already running. Use runAsync() to chain invocations."),a}Pulse.prototype={StopPropagation:Ne,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork:function fork(a){return new Pulse(this.dataflow).init(this,a)},clone:function clone(){var a=this.fork(7);return a.add=a.add.slice(),a.rem=a.rem.slice(),a.mod=a.mod.slice(),a.source&&(a.source=a.source.slice()),a.materialize(23)},addAll:function addAll(){var a=this;return!a.source||a.add===a.rem||!a.rem.length&&a.source.length===a.add.length||((a=new Pulse(this.dataflow).init(this)).add=a.source,a.rem=[]),a},init:function init(a,A){var j=this;return j.stamp=a.stamp,j.encode=a.encode,!a.fields||64&A||(j.fields=a.fields),1&A?(j.addF=a.addF,j.add=a.add):(j.addF=null,j.add=[]),2&A?(j.remF=a.remF,j.rem=a.rem):(j.remF=null,j.rem=[]),4&A?(j.modF=a.modF,j.mod=a.mod):(j.modF=null,j.mod=[]),32&A?(j.srcF=null,j.source=null):(j.srcF=a.srcF,j.source=a.source,a.cleans&&(j.cleans=a.cleans)),j},runAfter:function runAfter(a){this.dataflow.runAfter(a)},changed:function changed(a){var A=a||7;return 1&A&&this.add.length||2&A&&this.rem.length||4&A&&this.mod.length},reflow:function reflow(a){if(a)return this.fork(7).reflow();var A=this.add.length,j=this.source&&this.source.length;return j&&j!==A&&(this.mod=this.source,A&&this.filter(4,vega_dataflow_module_filter(this,1))),this},clean:function clean(a){return arguments.length?(this.cleans=!!a,this):this.cleans},modifies:function modifies(a){var A=this.fields||(this.fields={});return Object(ve.B)(a)?a.forEach((function(a){return A[a]=!0})):A[a]=!0,this},modified:function modified(a,A){var j=this.fields;return!(!A&&!this.mod.length||!j)&&(arguments.length?Object(ve.B)(a)?a.some((function(a){return j[a]})):j[a]:!!j)},filter:function filter(a,A){var j=this;return 1&a&&(j.addF=addFilter(j.addF,A)),2&a&&(j.remF=addFilter(j.remF,A)),4&a&&(j.modF=addFilter(j.modF,A)),16&a&&(j.srcF=addFilter(j.srcF,A)),j},materialize:function materialize(a){var A=this;return 1&(a=a||7)&&A.addF&&(A.add=_materialize(A.add,A.addF),A.addF=null),2&a&&A.remF&&(A.rem=_materialize(A.rem,A.remF),A.remF=null),4&a&&A.modF&&(A.mod=_materialize(A.mod,A.modF),A.modF=null),16&a&&A.srcF&&(A.source=A.source.filter(A.srcF),A.srcF=null),A},visit:function visit(a,A){var j=this,P=A;if(16&a)return Object(ve.kb)(j.source,j.srcF,P),j;1&a&&Object(ve.kb)(j.add,j.addF,P),2&a&&Object(ve.kb)(j.rem,j.remF,P),4&a&&Object(ve.kb)(j.mod,j.modF,P);var B=j.source;if(8&a&&B){var q=j.add.length+j.mod.length;q===B.length||(q?Object(ve.kb)(B,vega_dataflow_module_filter(j,5),P):Object(ve.kb)(B,j.srcF,P))}return j}},Object(ve.z)(MultiPulse,Pulse,{fork:function fork(a){var A=new Pulse(this.dataflow).init(this,a&this.NO_FIELDS);return void 0!==a&&(a&A.ADD&&this.visit(A.ADD,(function(a){return A.add.push(a)})),a&A.REM&&this.visit(A.REM,(function(a){return A.rem.push(a)})),a&A.MOD&&this.visit(A.MOD,(function(a){return A.mod.push(a)}))),A},changed:function changed(a){return this.changes&a},modified:function modified(a){var A=this,j=A.fields;return j&&A.changes&A.MOD?Object(ve.B)(a)?a.some((function(a){return j[a]})):j[a]:0},filter:function filter(){Object(ve.o)("MultiPulse does not support filtering.")},materialize:function materialize(){Object(ve.o)("MultiPulse does not support materialization.")},visit:function visit(a,A){var j=this,P=j.pulses,B=P.length,q=0;if(a&j.SOURCE)for(;q<B;++q)P[q].visit(a,A);else for(;q<B;++q)P[q].stamp===j.stamp&&P[q].visit(a,A);return j}});var Be={skip:!1,force:!1};function Heap(a){var A=[];return{clear:function clear(){return A=[]},size:function size(){return A.length},peek:function peek(){return A[0]},push:function push(j){return A.push(j),siftdown(A,0,A.length-1,a)},pop:function pop(){var j,P=A.pop();return A.length?(j=A[0],A[0]=P,function siftup(a,A,j){var P,B=A,q=a.length,ne=a[A],ie=1+(A<<1);for(;ie<q;)(P=ie+1)<q&&j(a[ie],a[P])>=0&&(ie=P),a[A]=a[ie],ie=1+((A=ie)<<1);return a[A]=ne,siftdown(a,B,A,j)}(A,0,a)):j=P,j}}}function siftdown(a,A,j,P){for(var B,q,ne=a[j];j>A&&P(ne,B=a[q=j-1>>1])<0;)a[j]=B,j=q;return a[j]=ne}function Dataflow(){this.logger(Object(ve.M)()),this.logLevel(ve.b),this._clock=0,this._rank=0,this._locale=Object(Oe.a)();try{this._loader=Object(ke.e)()}catch(a){}this._touched=UniqueList(ve.x),this._input={},this._pulse=null,this._heap=Heap((function(a,A){return a.qrank-A.qrank})),this._postrun=[]}function logMethod(a){return function(){return this._log[a].apply(this,arguments)}}function Transform(a,A){Operator.call(this,a,null,A)}Dataflow.prototype={stamp:function stamp(){return this._clock},loader:function loader(a){return arguments.length?(this._loader=a,this):this._loader},locale:function locale(a){return arguments.length?(this._locale=a,this):this._locale},logger:function logger(a){return arguments.length?(this._log=a,this):this._log},error:logMethod("error"),warn:logMethod("warn"),info:logMethod("info"),debug:logMethod("debug"),logLevel:logMethod("level"),cleanThreshold:1e4,add:function vega_dataflow_module_add(a,A,j,P){var B,q=1;return a instanceof Operator?B=a:a&&a.prototype instanceof Operator?B=new a:Object(ve.E)(a)?B=new Operator(null,a):(q=0,B=new Operator(a,A)),this.rank(B),q&&(P=j,j=A),j&&this.connect(B,B.parameters(j,P)),this.touch(B),B},connect:function connect(a,A){for(var j=a.rank,P=A.length,B=0;B<P;++B)if(j<A[B].rank)return void this.rerank(a)},rank:function rank(a){a.rank=++this._rank},rerank:function rerank(a){for(var A,j,P,B=[a];B.length;)if(this.rank(A=B.pop()),j=A._targets)for(P=j.length;--P>=0;)B.push(A=j[P]),A===a&&Object(ve.o)("Cycle detected in dataflow graph.")},pulse:function vega_dataflow_module_pulse(a,A,j){this.touch(a,j||Be);var P=new Pulse(this,this._clock+(this._pulse?0:1)),B=a.pulse&&a.pulse.source||[];return P.target=a,this._input[a.id]=A.pulse(P,B),this},touch:function touch(a,A){var j=A||Be;return this._pulse?this._enqueue(a):this._touched.add(a),j.skip&&a.skip(!0),this},update:function vega_dataflow_module_update(a,A,j){var P=j||Be;return(a.set(A)||P.force)&&this.touch(a,P),this},changeset:changeset,ingest:function ingest(a,A,j){return A=this.parse(A,j),this.pulse(a,this.changeset().insert(A))},parse:function vega_dataflow_module_parse(a,A){var j=this.locale();return Object(ke.f)(a,A,j.timeParse,j.utcParse)},preload:function preload(a,A,j){return _preload.apply(this,arguments)},request:function request(a,A){return _request.apply(this,arguments)},events:function vega_dataflow_module_events(a,A,j,P){for(var B,q=this,ne=vega_dataflow_module_stream(j,P),ie=function send(a){a.dataflow=q;try{ne.receive(a)}catch(A){q.error(A)}finally{q.run()}},oe=(B="string"===typeof a&&"undefined"!==typeof document?document.querySelectorAll(a):Object(ve.i)(a)).length,se=0;se<oe;++se)B[se].addEventListener(A,ie);return ne},on:function vega_dataflow_module_on(a,A,j,P,B){return(a instanceof Operator?onOperator:onStream)(this,a,A,j,P,B),this},evaluate:function vega_dataflow_module_evaluate(a,A,j){return _evaluate.apply(this,arguments)},run:function vega_dataflow_module_run(a,A,j){return this._pulse?reentrant(this):(this.evaluate(a,A,j),this)},runAsync:function runAsync(a,A,j){return _runAsync.apply(this,arguments)},runAfter:function runAfter(a,A,j){if(this._pulse||A)this._postrun.push({priority:j||0,callback:a});else try{a(this)}catch(P){this.error(P)}},_enqueue:function enqueue(a,A){var j=a.stamp<this._clock;j&&(a.stamp=this._clock),(j||A)&&(a.qrank=a.rank,this._heap.push(a))},_getPulse:function getPulse(a,A){var j=a.source,P=this._clock;return j&&Object(ve.B)(j)?new MultiPulse(this,P,j.map((function(a){return a.pulse})),A):this._input[a.id]||function singlePulse(a,A){if(A&&A.stamp===a.stamp)return A;a=a.fork(),A&&A!==Ne&&(a.source=A.source);return a}(this._pulse,j&&j.pulse)}},Object(ve.z)(Transform,Operator,{run:function run(a){var A,j=this;return a.stamp<this.stamp?a.StopPropagation:(this.skip()?this.skip(!1):A=this.evaluate(a),(A=A||a).then?A=A.then((function(a){return j.pulse=a})):A!==a.StopPropagation&&(this.pulse=A),A)},evaluate:function evaluate(a){var A=this.marshall(a.stamp),j=this.transform(A,a);return A.clear(),j},transform:function transform(){}});var Ue={};function definition(a){var A=vega_dataflow_module_transform(a);return A&&A.Definition||null}function vega_dataflow_module_transform(a){return a=a&&a.toLowerCase(),Object(ve.w)(Ue,a)?Ue[a]:null}var We=j(2),Ve=j(11),Ye=j(70);function max_max(a,A){var j;if(void 0===A){var P,B=Object(We.a)(a);try{for(B.s();!(P=B.n()).done;){var q=P.value;null!=q&&(j<q||void 0===j&&q>=q)&&(j=q)}}catch(le){B.e(le)}finally{B.f()}}else{var ne,ie=-1,oe=Object(We.a)(a);try{for(oe.s();!(ne=oe.n()).done;){var se=ne.value;null!=(se=A(se,++ie,a))&&(j<se||void 0===j&&se>=se)&&(j=se)}}catch(le){oe.e(le)}finally{oe.f()}}return j}function min_min(a,A){var j;if(void 0===A){var P,B=Object(We.a)(a);try{for(B.s();!(P=B.n()).done;){var q=P.value;null!=q&&(j>q||void 0===j&&q>=q)&&(j=q)}}catch(le){B.e(le)}finally{B.f()}}else{var ne,ie=-1,oe=Object(We.a)(a);try{for(oe.s();!(ne=oe.n()).done;){var se=ne.value;null!=(se=A(se,++ie,a))&&(j>se||void 0===j&&se>=se)&&(j=se)}}catch(le){oe.e(le)}finally{oe.f()}}return j}function swap(a,A,j){var P=a[A];a[A]=a[j],a[j]=P}var $e=_e.a.mark(numbers),number=function(a){return null===a?NaN:+a};function numbers(a,A){var j,P,B,q,ne,ie,oe;return _e.a.wrap((function numbers$(se){for(;;)switch(se.prev=se.next){case 0:if(void 0!==A){se.next=21;break}j=Object(We.a)(a),se.prev=2,j.s();case 4:if((P=j.n()).done){se.next=11;break}if(!(null!=(B=P.value)&&(B=+B)>=B)){se.next=9;break}return se.next=9,B;case 9:se.next=4;break;case 11:se.next=16;break;case 13:se.prev=13,se.t0=se.catch(2),j.e(se.t0);case 16:return se.prev=16,j.f(),se.finish(16);case 19:se.next=40;break;case 21:q=-1,ne=Object(We.a)(a),se.prev=23,ne.s();case 25:if((ie=ne.n()).done){se.next=32;break}if(oe=ie.value,!(null!=(oe=A(oe,++q,a))&&(oe=+oe)>=oe)){se.next=30;break}return se.next=30,oe;case 30:se.next=25;break;case 32:se.next=37;break;case 34:se.prev=34,se.t1=se.catch(23),ne.e(se.t1);case 37:return se.prev=37,ne.f(),se.finish(37);case 40:case"end":return se.stop()}}),$e,null,[[2,13,16,19],[23,34,37,40]])}function quantile(a,A,j){if(P=(a=Float64Array.from(numbers(a,j))).length){if((A=+A)<=0||P<2)return min_min(a);if(A>=1)return max_max(a);var P,B=(P-1)*A,q=Math.floor(B),ne=max_max(function quickselect(a,A){for(var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.length-1,B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ye.a;P>j;){if(P-j>600){var q=P-j+1,ne=A-j+1,ie=Math.log(q),oe=.5*Math.exp(2*ie/3),se=.5*Math.sqrt(ie*oe*(q-oe)/q)*(ne-q/2<0?-1:1),le=Math.max(j,Math.floor(A-ne*oe/q+se)),he=Math.min(P,Math.floor(A+(q-ne)*oe/q+se));quickselect(a,A,le,he,B)}var pe=a[A],ge=j,me=P;for(swap(a,j,A),B(a[P],pe)>0&&swap(a,j,P);ge<me;){for(swap(a,ge,me),++ge,--me;B(a[ge],pe)<0;)++ge;for(;B(a[me],pe)>0;)--me}0===B(a[j],pe)?swap(a,j,me):swap(a,++me,P),me<=A&&(j=me+1),A<=me&&(P=me-1)}return a}(a,q).subarray(0,q+1));return ne+(min_min(a.subarray(q+1))-ne)*(B-q)}}function quantileSorted(a,A){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:number;if(P=a.length){if((A=+A)<=0||P<2)return+j(a[0],0,a);if(A>=1)return+j(a[P-1],P-1,a);var P,B=(P-1)*A,q=Math.floor(B),ne=+j(a[q],q,a),ie=+j(a[q+1],q+1,a);return ne+(ie-ne)*(B-q)}}function deviation(a,A){var j=function variance(a,A){var j,P=0,B=0,q=0;if(void 0===A){var ne,ie=Object(We.a)(a);try{for(ie.s();!(ne=ie.n()).done;){var oe=ne.value;null!=oe&&(oe=+oe)>=oe&&(q+=(j=oe-B)*(oe-(B+=j/++P)))}}catch(ge){ie.e(ge)}finally{ie.f()}}else{var se,le=-1,he=Object(We.a)(a);try{for(he.s();!(se=he.n()).done;){var pe=se.value;null!=(pe=A(pe,++le,a))&&(pe=+pe)>=pe&&(q+=(j=pe-B)*(pe-(B+=j/++P)))}}catch(ge){he.e(ge)}finally{he.f()}}if(P>1)return q/(P-1)}(a,A);return j?Math.sqrt(j):j}var median=function(a,A){return quantile(a,.5,A)},Xe=_e.a.mark(vega_statistics_module_numbers);function vega_statistics_module_numbers(a,A){var j,P,B,q,ne,ie,oe;return _e.a.wrap((function numbers$(se){for(;;)switch(se.prev=se.next){case 0:if(null!=A){se.next=21;break}j=Object(We.a)(a),se.prev=2,j.s();case 4:if((P=j.n()).done){se.next=11;break}if(!(null!=(B=P.value)&&""!==B&&(B=+B)>=B)){se.next=9;break}return se.next=9,B;case 9:se.next=4;break;case 11:se.next=16;break;case 13:se.prev=13,se.t0=se.catch(2),j.e(se.t0);case 16:return se.prev=16,j.f(),se.finish(16);case 19:se.next=41;break;case 21:q=-1,ne=Object(We.a)(a),se.prev=23,ne.s();case 25:if((ie=ne.n()).done){se.next=33;break}if(oe=ie.value,!(null!=(oe=A(oe,++q,a))&&""!==oe&&(oe=+oe)>=oe)){se.next=31;break}return se.next=31,oe;case 31:se.next=25;break;case 33:se.next=38;break;case 35:se.prev=35,se.t1=se.catch(23),ne.e(se.t1);case 38:return se.prev=38,ne.f(),se.finish(38);case 41:case"end":return se.stop()}}),Xe,null,[[2,13,16,19],[23,35,38,41]])}function quantiles(a,A,j){var P=Float64Array.from(vega_statistics_module_numbers(a,j));return P.sort(Ye.a),A.map((function(a){return quantileSorted(P,a)}))}function quartiles(a,A){return quantiles(a,[.25,.5,.75],A)}function estimateBandwidth(a,A){var j=a.length,P=deviation(a,A),B=quartiles(a,A),q=(B[2]-B[0])/1.34;return 1.06*(Math.min(P,q)||P||Math.abs(B[0])||1)*Math.pow(j,-.2)}function bin(a){var A,j,P,B,q,ne,ie=a.maxbins||20,oe=a.base||10,se=Math.log(oe),le=a.divide||[5,2],he=a.extent[0],pe=a.extent[1],ge=a.span||pe-he||Math.abs(he)||1;if(a.step)A=a.step;else if(a.steps){for(B=ge/ie,q=0,ne=a.steps.length;q<ne&&a.steps[q]<B;++q);A=a.steps[Math.max(0,q-1)]}else{for(j=Math.ceil(Math.log(ie)/se),P=a.minstep||0,A=Math.max(P,Math.pow(oe,Math.round(Math.log(ge)/se)-j));Math.ceil(ge/A)>ie;)A*=oe;for(q=0,ne=le.length;q<ne;++q)(B=A/le[q])>=P&&ge/B<=ie&&(A=B)}var me=(B=Math.log(A))>=0?0:1+~~(-B/se),ve=Math.pow(oe,-me-1);return(a.nice||void 0===a.nice)&&(he=he<(B=Math.floor(he/A+ve)*A)?B-A:B,pe=Math.ceil(pe/A)*A),{start:he,stop:pe===he?he+A:pe,step:A}}var et=Math.random;function setRandom(a){et=a}function bootstrapCI(a,A,j,P){if(!a.length)return[void 0,void 0];var B,q,ne,ie,oe=Float64Array.from(vega_statistics_module_numbers(a,P)),se=oe.length,le=A;for(ne=0,ie=Array(le);ne<le;++ne){for(B=0,q=0;q<se;++q)B+=oe[~~(et()*se)];ie[ne]=B/se}return ie.sort(Ye.a),[quantile(ie,j/2),quantile(ie,1-j/2)]}function dotbin(a,A,j,P){P=P||function(a){return a};for(var B,q=a.length,ne=new Float64Array(q),ie=0,oe=1,se=P(a[0]),le=se,he=se+A;oe<q;++oe){if((B=P(a[oe]))>=he){for(le=(se+le)/2;ie<oe;++ie)ne[ie]=le;he=B+A,se=B}le=B}for(le=(se+le)/2;ie<oe;++ie)ne[ie]=le;return j?function smoothing(a,A){var j,P,B=a.length,q=0,ne=1;for(;a[q]===a[ne];)++ne;for(;ne<B;){for(j=ne+1;a[ne]===a[j];)++j;if(a[ne]-a[ne-1]<A){for(P=ne+(q+j-ne-ne>>1);P<ne;)a[P++]=a[ne];for(;P>ne;)a[P--]=a[q]}q=ne,ne=j}return a}(ne,A+A/4):ne}function lcg(a){return function(){return(a=(1103515245*a+12345)%2147483647)/2147483647}}function integer(a,A){var j,P,B;null==A&&(A=a,a=0);var q={min:function min(a){return arguments.length?(B=P-(j=a||0),q):j},max:function max(a){return arguments.length?(B=(P=a||0)-j,q):P},sample:function sample(){return j+Math.floor(B*et())},pdf:function pdf(a){return a===Math.floor(a)&&a>=j&&a<P?1/B:0},cdf:function cdf(a){var A=Math.floor(a);return A<j?0:A>=P?1:(A-j+1)/B},icdf:function icdf(a){return a>=0&&a<=1?j-1+Math.floor(a*B):NaN}};return q.min(a).max(A)}var tt=Math.sqrt(2*Math.PI),nt=Math.SQRT2,rt=NaN;function sampleNormal(a,A){a=a||0,A=null==A?1:A;var j,P,B=0,q=0;if(rt===rt)B=rt,rt=NaN;else{do{j=(B=2*et()-1)*B+(q=2*et()-1)*q}while(0===j||j>1);B*=P=Math.sqrt(-2*Math.log(j)/j),rt=q*P}return a+B*A}function densityNormal(a,A,j){var P=(a-(A||0))/(j=null==j?1:j);return Math.exp(-.5*P*P)/(j*tt)}function cumulativeNormal(a,A,j){var P,B=(a-(A=A||0))/(j=null==j?1:j),q=Math.abs(B);if(q>37)P=0;else{var ne=Math.exp(-q*q/2);q<7.07106781186547?(P=ne*((((((.0352624965998911*q+.700383064443688)*q+6.37396220353165)*q+33.912866078383)*q+112.079291497871)*q+221.213596169931)*q+220.206867912376),P/=((((((.0883883476483184*q+1.75566716318264)*q+16.064177579207)*q+86.7807322029461)*q+296.564248779674)*q+637.333633378831)*q+793.826512519948)*q+440.413735824752):P=ne/(q+1/(q+2/(q+3/(q+4/(q+.65)))))/2.506628274631}return B>0?1-P:P}function quantileNormal(a,A,j){return a<0||a>1?NaN:(A||0)+(null==j?1:j)*nt*function erfinv(a){var A,j=-Math.log((1-a)*(1+a));j<6.25?A=1.6536545626831027+(A=.24015818242558962+(A=(A=(A=.00018673420803405714+(A=(A=(A=4.2347877827932404e-7+(A=(A=(A=1.0512122733215323e-9+(A=(A=(A=26335093153082323e-28+(A=(A=(A=6637638134358324e-30+(A=20972767875968562e-33+(A=(A=11157877678025181e-33+(A=128584807152564e-32+(A=(A=-364441206401782e-35)*(j-=3.125)-16850591381820166e-35)*j)*j)*j-1333171662854621e-31)*j)*j)*j-4054566272975207e-29)*j-8151934197605472e-29)*j)*j-12975133253453532e-27)*j-5415412054294628e-26)*j)*j-4.112633980346984e-9)*j-2.9070369957882005e-8)*j)*j-13654692000834679e-22)*j-13882523362786469e-21)*j)*j-.000740702534166267)*j-.006033670871430149)*j)*j:j<16?(j=Math.sqrt(j)-3.25,A=3.0838856104922208+(A=1.0052589676941592+(A=.005370914553590064+(A=(A=.002491442096107851+(A=(A=.0009532893797373805+(A=(A=24031110387097894e-21+(A=6828485145957318e-20+(A=(A=12475304481671779e-21+(A=29234449089955446e-22+(A=(A=15027403968909828e-22+(A=1.8239629214389228e-8+(A=(A=9.075656193888539e-8+(A=2.2137376921775787e-9)*j)*j-2.7517406297064545e-7)*j)*j)*j-4013867526981546e-21)*j)*j)*j-47318229009055734e-21)*j)*j)*j-.0003550375203628475)*j)*j-.0016882755560235047)*j)*j-.003751208507569241)*j)*j)*j):Number.isFinite(j)?(j=Math.sqrt(j)-5,A=4.849906401408584+(A=1.0103004648645344+(A=(A=(A=7599527703001776e-20+(A=(A=4526062597223154e-21+(A=(A=2.2900482228026655e-7+(A=(A=2.914795345090108e-8+(A=(A=7.61570120807834e-9+(A=(A=1.5076572693500548e-9+(A=(A=-27109920616438573e-27)*j-2.555641816996525e-10)*j)*j-3.789465440126737e-9)*j)*j-1.496002662714924e-8)*j)*j-6.771199775845234e-8)*j)*j-9.9298272942317e-7)*j)*j-1968177810553167e-20)*j)*j-.00021503011930044477)*j-.00013871931833623122)*j)*j):A=1/0;return A*a}(2*a-1)}function gaussian(a,A){var j,P,B={mean:function mean(a){return arguments.length?(j=a||0,B):j},stdev:function stdev(a){return arguments.length?(P=null==a?1:a,B):P},sample:function sample(){return sampleNormal(j,P)},pdf:function pdf(a){return densityNormal(a,j,P)},cdf:function cdf(a){return cumulativeNormal(a,j,P)},icdf:function icdf(a){return quantileNormal(a,j,P)}};return B.mean(a).stdev(A)}function vega_statistics_module_kde(a,A){var j=gaussian(),P=0,B={data:function data(j){return arguments.length?(a=j,P=j?j.length:0,B.bandwidth(A)):a},bandwidth:function bandwidth(j){return arguments.length?(!(A=j)&&a&&(A=estimateBandwidth(a)),B):A},sample:function sample(){return a[~~(et()*P)]+A*j.sample()},pdf:function pdf(B){for(var q=0,ne=0;ne<P;++ne)q+=j.pdf((B-a[ne])/A);return q/A/P},cdf:function cdf(B){for(var q=0,ne=0;ne<P;++ne)q+=j.cdf((B-a[ne])/A);return q/P},icdf:function icdf(){throw Error("KDE icdf not supported.")}};return B.data(a)}function sampleLogNormal(a,A){return a=a||0,A=null==A?1:A,Math.exp(a+sampleNormal()*A)}function densityLogNormal(a,A,j){if(a<=0)return 0;A=A||0,j=null==j?1:j;var P=(Math.log(a)-A)/j;return Math.exp(-.5*P*P)/(j*tt*a)}function cumulativeLogNormal(a,A,j){return cumulativeNormal(Math.log(a),A,j)}function quantileLogNormal(a,A,j){return Math.exp(quantileNormal(a,A,j))}function lognormal(a,A){var j,P,B={mean:function mean(a){return arguments.length?(j=a||0,B):j},stdev:function stdev(a){return arguments.length?(P=null==a?1:a,B):P},sample:function sample(){return sampleLogNormal(j,P)},pdf:function pdf(a){return densityLogNormal(a,j,P)},cdf:function cdf(a){return cumulativeLogNormal(a,j,P)},icdf:function icdf(a){return quantileLogNormal(a,j,P)}};return B.mean(a).stdev(A)}function mixture(a,A){var j,P=0;function normalize(a){var A,j=[],B=0;for(A=0;A<P;++A)B+=j[A]=null==a[A]?1:+a[A];for(A=0;A<P;++A)j[A]/=B;return j}var B={weights:function weights(a){return arguments.length?(j=normalize(A=a||[]),B):A},distributions:function distributions(j){return arguments.length?(j?(P=j.length,a=j):(P=0,a=[]),B.weights(A)):a},sample:function sample(){for(var A=et(),B=a[P-1],q=j[0],ne=0;ne<P-1;q+=j[++ne])if(A<q){B=a[ne];break}return B.sample()},pdf:function pdf(A){for(var B=0,q=0;q<P;++q)B+=j[q]*a[q].pdf(A);return B},cdf:function cdf(A){for(var B=0,q=0;q<P;++q)B+=j[q]*a[q].cdf(A);return B},icdf:function icdf(){throw Error("Mixture icdf not supported.")}};return B.distributions(a).weights(A)}function sampleUniform(a,A){return null==A&&(A=null==a?1:a,a=0),a+(A-a)*et()}function densityUniform(a,A,j){return null==j&&(j=null==A?1:A,A=0),a>=A&&a<=j?1/(j-A):0}function cumulativeUniform(a,A,j){return null==j&&(j=null==A?1:A,A=0),a<A?0:a>j?1:(a-A)/(j-A)}function quantileUniform(a,A,j){return null==j&&(j=null==A?1:A,A=0),a>=0&&a<=1?A+a*(j-A):NaN}function uniform(a,A){var j,P,B={min:function min(a){return arguments.length?(j=a||0,B):j},max:function max(a){return arguments.length?(P=null==a?1:a,B):P},sample:function sample(){return sampleUniform(j,P)},pdf:function pdf(a){return densityUniform(a,j,P)},cdf:function cdf(a){return cumulativeUniform(a,j,P)},icdf:function icdf(a){return quantileUniform(a,j,P)}};return null==A&&(A=null==a?1:a,a=0),B.min(a).max(A)}function ols(a,A,j,P){var B=P-a*a,q=Math.abs(B)<1e-24?0:(j-a*A)/B;return[A-q*a,q]}function vega_statistics_module_points(a,A,j,P){a=a.filter((function(a){var P=A(a),B=j(a);return null!=P&&(P=+P)>=P&&null!=B&&(B=+B)>=B})),P&&a.sort((function(a,j){return A(a)-A(j)}));var B,q,ne,ie,oe=a.length,se=new Float64Array(oe),le=new Float64Array(oe),he=0,pe=0,ge=0,me=Object(We.a)(a);try{for(me.s();!(ie=me.n()).done;)ne=ie.value,se[he]=B=+A(ne),le[he]=q=+j(ne),pe+=(B-pe)/++he,ge+=(q-ge)/he}catch(ve){me.e(ve)}finally{me.f()}for(he=0;he<oe;++he)se[he]-=pe,le[he]-=ge;return[se,le,pe,ge]}function visitPoints(a,A,j,P){var B,q,ne,ie=-1,oe=Object(We.a)(a);try{for(oe.s();!(ne=oe.n()).done;){var se=ne.value;B=A(se),q=j(se),null!=B&&(B=+B)>=B&&null!=q&&(q=+q)>=q&&P(B,q,++ie)}}catch(le){oe.e(le)}finally{oe.f()}}function rSquared(a,A,j,P,B){var q=0,ne=0;return visitPoints(a,A,j,(function(a,A){var j=A-B(a),ie=A-P;q+=j*j,ne+=ie*ie})),1-q/ne}function linear(a,A,j){var P=0,B=0,q=0,ne=0,ie=0;visitPoints(a,A,j,(function(a,A){++ie,P+=(a-P)/ie,B+=(A-B)/ie,q+=(a*A-q)/ie,ne+=(a*a-ne)/ie}));var oe=ols(P,B,q,ne),se=function predict(a){return oe[0]+oe[1]*a};return{coef:oe,predict:se,rSquared:rSquared(a,A,j,B,se)}}function log(a,A,j){var P=0,B=0,q=0,ne=0,ie=0;visitPoints(a,A,j,(function(a,A){++ie,a=Math.log(a),P+=(a-P)/ie,B+=(A-B)/ie,q+=(a*A-q)/ie,ne+=(a*a-ne)/ie}));var oe=ols(P,B,q,ne),se=function predict(a){return oe[0]+oe[1]*Math.log(a)};return{coef:oe,predict:se,rSquared:rSquared(a,A,j,B,se)}}function exp(a,A,j){var P,B,q,ne=vega_statistics_module_points(a,A,j),ie=Object(Ve.a)(ne,4),oe=ie[0],se=(ie[1],ie[2]),le=ie[3],he=0,pe=0,ge=0,me=0,ve=0;visitPoints(a,A,j,(function(a,A){P=oe[ve++],B=Math.log(A),he+=(A*B-he)/ve,pe+=((q=P*A)-pe)/ve,ge+=(q*B-ge)/ve,me+=(P*q-me)/ve}));var ye=ols(pe/le,he/le,ge/le,me/le),_e=Object(Ve.a)(ye,2),we=_e[0],ke=_e[1],Oe=function predict(a){return Math.exp(we+ke*(a-se))};return{coef:[Math.exp(we-ke*se),ke],predict:Oe,rSquared:rSquared(a,A,j,le,Oe)}}function pow(a,A,j){var P=0,B=0,q=0,ne=0,ie=0,oe=0;visitPoints(a,A,j,(function(a,A){var j=Math.log(a),se=Math.log(A);++oe,P+=(j-P)/oe,B+=(se-B)/oe,q+=(j*se-q)/oe,ne+=(j*j-ne)/oe,ie+=(A-ie)/oe}));var se=ols(P,B,q,ne),le=function predict(a){return se[0]*Math.pow(a,se[1])};return se[0]=Math.exp(se[0]),{coef:se,predict:le,rSquared:rSquared(a,A,j,ie,le)}}function vega_statistics_module_quad(a,A,j){var P,B,q,ne,ie=vega_statistics_module_points(a,A,j),oe=Object(Ve.a)(ie,4),se=oe[0],le=oe[1],he=oe[2],pe=oe[3],ge=se.length,me=0,ve=0,ye=0,_e=0,we=0;for(P=0;P<ge;)B=se[P],q=le[P++],me+=((ne=B*B)-me)/P,ve+=(ne*B-ve)/P,ye+=(ne*ne-ye)/P,_e+=(B*q-_e)/P,we+=(ne*q-we)/P;var ke=ye-me*me,Oe=me*ke-ve*ve,Se=(we*me-_e*ve)/Oe,Te=(_e*ke-we*ve)/Oe,Ae=-Se*me,je=function predict(a){return Se*(a-=he)*a+Te*a+Ae+pe};return{coef:[Ae-Te*he+Se*he*he+pe,Te-2*Se*he,Se],predict:je,rSquared:rSquared(a,A,j,pe,je)}}function poly(a,A,j,P){if(1===P)return linear(a,A,j);if(2===P)return vega_statistics_module_quad(a,A,j);var B,q,ne,ie,oe,se=vega_statistics_module_points(a,A,j),le=Object(Ve.a)(se,4),he=le[0],pe=le[1],ge=le[2],me=le[3],ve=he.length,ye=[],_e=[],we=P+1;for(B=0;B<we;++B){for(ne=0,ie=0;ne<ve;++ne)ie+=Math.pow(he[ne],B)*pe[ne];for(ye.push(ie),oe=new Float64Array(we),q=0;q<we;++q){for(ne=0,ie=0;ne<ve;++ne)ie+=Math.pow(he[ne],B+q);oe[q]=ie}_e.push(oe)}_e.push(ye);var ke=function gaussianElimination(a){var A,j,P,B,q,ne=a.length-1,ie=[];for(A=0;A<ne;++A){for(B=A,j=A+1;j<ne;++j)Math.abs(a[A][j])>Math.abs(a[A][B])&&(B=j);for(P=A;P<ne+1;++P)q=a[P][A],a[P][A]=a[P][B],a[P][B]=q;for(j=A+1;j<ne;++j)for(P=ne;P>=A;P--)a[P][j]-=a[P][A]*a[A][j]/a[A][A]}for(j=ne-1;j>=0;--j){for(q=0,P=j+1;P<ne;++P)q+=a[P][j]*ie[P];ie[j]=(a[ne][j]-q)/a[j][j]}return ie}(_e),Oe=function predict(a){a-=ge;var A=me+ke[0]+ke[1]*a+ke[2]*a*a;for(B=3;B<we;++B)A+=ke[B]*Math.pow(a,B);return A};return{coef:uncenter(we,ke,-ge,me),predict:Oe,rSquared:rSquared(a,A,j,me,Oe)}}function uncenter(a,A,j,P){var B,q,ne,ie,oe=Array(a);for(B=0;B<a;++B)oe[B]=0;for(B=a-1;B>=0;--B)for(ne=A[B],ie=1,oe[B]+=ne,q=1;q<=B;++q)ie*=(B+1-q)/q,oe[B-q]+=ne*Math.pow(j,q)*ie;return oe[0]+=P,oe}function loess(a,A,j,P){for(var B=vega_statistics_module_points(a,A,j,!0),q=Object(Ve.a)(B,4),ne=q[0],ie=q[1],oe=q[2],se=q[3],le=ne.length,he=Math.max(2,~~(P*le)),pe=new Float64Array(le),ge=new Float64Array(le),me=new Float64Array(le).fill(1),ve=-1;++ve<=2;){for(var ye=[0,he-1],_e=0;_e<le;++_e){for(var we=ne[_e],ke=ye[0],Oe=ye[1],Se=we-ne[ke]>ne[Oe]-we?ke:Oe,Te=0,Ae=0,je=0,Fe=0,Re=0,Me=1/Math.abs(ne[Se]-we||1),Ne=ke;Ne<=Oe;++Ne){var Be=ne[Ne],Ue=ie[Ne],We=tricube(Math.abs(we-Be)*Me)*me[Ne],Ye=Be*We;Te+=We,Ae+=Ye,je+=Ue*We,Fe+=Ue*Ye,Re+=Be*Ye}var $e=ols(Ae/Te,je/Te,Fe/Te,Re/Te),Xe=Object(Ve.a)($e,2),et=Xe[0],tt=Xe[1];pe[_e]=et+tt*we,ge[_e]=Math.abs(ie[_e]-pe[_e]),updateInterval(ne,_e+1,ye)}if(2===ve)break;var nt=median(ge);if(Math.abs(nt)<1e-12)break;for(var rt,it,at=0;at<le;++at)rt=ge[at]/(6*nt),me[at]=rt>=1?1e-12:(it=1-rt*rt)*it}return function vega_statistics_module_output(a,A,j,P){for(var B,q=a.length,ne=[],ie=0,oe=0,se=[];ie<q;++ie)B=a[ie]+j,se[0]===B?se[1]+=(A[ie]-se[1])/++oe:(oe=0,se[1]+=P,se=[B,A[ie]],ne.push(se));return se[1]+=P,ne}(ne,pe,oe,se)}function tricube(a){return(a=1-a*a*a)*a*a}function updateInterval(a,A,j){var P=a[A],B=j[0],q=j[1]+1;if(!(q>=a.length))for(;A>B&&a[q]-P<=P-a[B];)j[0]=++B,j[1]=q,++q}var it=.5*Math.PI/180;function sampleCurve(a,A,j,P){j=j||25,P=Math.max(j,P||200);var B=function point(A){return[A,a(A)]},q=A[0],ne=A[1],ie=ne-q,oe=ie/P,se=[B(q)],le=[];if(j===P){for(var he=1;he<P;++he)se.push(B(q+he/j*ie));return se.push(B(ne)),se}le.push(B(ne));for(var pe=j;--pe>0;)le.push(B(q+pe/j*ie));for(var ge=se[0],me=le[le.length-1],ve=1/ie,ye=function scaleY(a,A){for(var j=a,P=a,B=A.length,q=0;q<B;++q){var ne=A[q][1];ne<j&&(j=ne),ne>P&&(P=ne)}return 1/(P-j)}(ge[1],le);me;){var _e=B((ge[0]+me[0])/2);_e[0]-ge[0]>=oe&&angleDelta(ge,_e,me,ve,ye)>it?le.push(_e):(ge=me,se.push(me),le.pop()),me=le[le.length-1]}return se}function angleDelta(a,A,j,P,B){var q=Math.atan2(B*(j[1]-a[1]),P*(j[0]-a[0])),ne=Math.atan2(B*(A[1]-a[1]),P*(A[0]-a[0]));return Math.abs(q-ne)}var src_range=function(a,A,j){a=+a,A=+A,j=(B=arguments.length)<2?(A=a,a=0,1):B<3?1:+j;for(var P=-1,B=0|Math.max(0,Math.ceil((A-a)/j)),q=new Array(B);++P<B;)q[P]=a+P*j;return q},at=j(106),ot=j(14);function groupkey(a){return a&&a.length?1===a.length?a[0]:function multikey(a){return function(A){for(var j=a.length,P=1,B=String(a[0](A));P<j;++P)B+="|"+a[P](A);return B}}(a):function(){return""}}function measureName(a,A,j){return j||a+(A?"_"+A:"")}var st=function noop(){},ut={init:st,add:st,rem:st,idx:0},lt={values:{init:function init(a){return a.cell.store=!0},value:function value(a){return a.cell.data.values()},idx:-1},count:{value:function value(a){return a.cell.num}},__count__:{value:function value(a){return a.missing+a.valid}},missing:{value:function value(a){return a.missing}},valid:{value:function value(a){return a.valid}},sum:{init:function init(a){return a.sum=0},value:function value(a){return a.sum},add:function add(a,A){return a.sum+=+A},rem:function rem(a,A){return a.sum-=A}},product:{init:function init(a){return a.product=1},value:function value(a){return a.valid?a.product:void 0},add:function add(a,A){return a.product*=A},rem:function rem(a,A){return a.product/=A}},mean:{init:function init(a){return a.mean=0},value:function value(a){return a.valid?a.mean:void 0},add:function add(a,A){return a.mean_d=A-a.mean,a.mean+=a.mean_d/a.valid},rem:function rem(a,A){return a.mean_d=A-a.mean,a.mean-=a.valid?a.mean_d/a.valid:a.mean}},average:{value:function value(a){return a.valid?a.mean:void 0},req:["mean"],idx:1},variance:{init:function init(a){return a.dev=0},value:function value(a){return a.valid>1?a.dev/(a.valid-1):void 0},add:function add(a,A){return a.dev+=a.mean_d*(A-a.mean)},rem:function rem(a,A){return a.dev-=a.mean_d*(A-a.mean)},req:["mean"],idx:1},variancep:{value:function value(a){return a.valid>1?a.dev/a.valid:void 0},req:["variance"],idx:2},stdev:{value:function value(a){return a.valid>1?Math.sqrt(a.dev/(a.valid-1)):void 0},req:["variance"],idx:2},stdevp:{value:function value(a){return a.valid>1?Math.sqrt(a.dev/a.valid):void 0},req:["variance"],idx:2},stderr:{value:function value(a){return a.valid>1?Math.sqrt(a.dev/(a.valid*(a.valid-1))):void 0},req:["variance"],idx:2},distinct:{value:function value(a){return a.cell.data.distinct(a.get)},req:["values"],idx:3},ci0:{value:function value(a){return a.cell.data.ci0(a.get)},req:["values"],idx:3},ci1:{value:function value(a){return a.cell.data.ci1(a.get)},req:["values"],idx:3},median:{value:function value(a){return a.cell.data.q2(a.get)},req:["values"],idx:3},q1:{value:function value(a){return a.cell.data.q1(a.get)},req:["values"],idx:3},q3:{value:function value(a){return a.cell.data.q3(a.get)},req:["values"],idx:3},min:{init:function init(a){return a.min=void 0},value:function value(a){return a.min=Number.isNaN(a.min)?a.cell.data.min(a.get):a.min},add:function add(a,A){(A<a.min||void 0===a.min)&&(a.min=A)},rem:function rem(a,A){A<=a.min&&(a.min=NaN)},req:["values"],idx:4},max:{init:function init(a){return a.max=void 0},value:function value(a){return a.max=Number.isNaN(a.max)?a.cell.data.max(a.get):a.max},add:function add(a,A){(A>a.max||void 0===a.max)&&(a.max=A)},rem:function rem(a,A){A>=a.max&&(a.max=NaN)},req:["values"],idx:4},argmin:{init:function init(a){return a.argmin=void 0},value:function value(a){return a.argmin||a.cell.data.argmin(a.get)},add:function add(a,A,j){A<a.min&&(a.argmin=j)},rem:function rem(a,A){A<=a.min&&(a.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:function init(a){return a.argmax=void 0},value:function value(a){return a.argmax||a.cell.data.argmax(a.get)},add:function add(a,A,j){A>a.max&&(a.argmax=j)},rem:function rem(a,A){A>=a.max&&(a.argmax=void 0)},req:["max","values"],idx:3}},ct=Object.keys(lt);function createMeasure(a,A){return lt[a](A)}function compareIndex(a,A){return a.idx-A.idx}function vega_transforms_module_init(){var a=this;this.valid=0,this.missing=0,this._ops.forEach((function(A){return A.init(a)}))}function vega_transforms_module_add(a,A){var j=this;null!=a&&""!==a?a===a&&(++this.valid,this._ops.forEach((function(P){return P.add(j,a,A)}))):++this.missing}function vega_transforms_module_rem(a,A){var j=this;null!=a&&""!==a?a===a&&(--this.valid,this._ops.forEach((function(P){return P.rem(j,a,A)}))):--this.missing}function vega_transforms_module_set(a){var A=this;return this._out.forEach((function(j){return a[j.out]=j.value(A)})),a}function compileMeasures(a,A){var j=A||ve.y,P=function resolve(a){var A={};return a.forEach((function(a){return A[a.name]=a})),a.forEach((function getreqs(a){a.req&&a.req.forEach((function(a){A[a]||getreqs(A[a]=lt[a]())}))})),Object.values(A).sort(compareIndex)}(a),B=a.slice().sort(compareIndex);function ctr(a){this._ops=P,this._out=B,this.cell=a,this.init()}return ctr.prototype.init=vega_transforms_module_init,ctr.prototype.add=vega_transforms_module_add,ctr.prototype.rem=vega_transforms_module_rem,ctr.prototype.set=vega_transforms_module_set,ctr.prototype.get=j,ctr.fields=a.map((function(a){return a.out})),ctr}function TupleStore(a){this._key=a?Object(ve.u)(a):tupleid,this.reset()}ct.forEach((function(a){lt[a]=function measure(a,A){return function(j){return Object(ve.p)({name:a,out:j||a},ut,A)}}(a,lt[a])}));var ft=TupleStore.prototype;function Aggregate(a){Transform.call(this,null,a),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ft.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},ft.add=function(a){this._add.push(a)},ft.rem=function(a){this._rem.push(a)},ft.values=function(){if(this._get=null,0===this._rem.length)return this._add;var a,A,j,P=this._add,B=this._rem,q=this._key,ne=P.length,ie=B.length,oe=Array(ne-ie),se={};for(a=0;a<ie;++a)se[q(B[a])]=1;for(a=0,A=0;a<ne;++a)se[q(j=P[a])]?se[q(j)]=0:oe[A++]=j;return this._rem=[],this._add=oe},ft.distinct=function(a){for(var A,j=this.values(),P={},B=j.length,q=0;--B>=0;)A=a(j[B])+"",Object(ve.w)(P,A)||(P[A]=1,++q);return q},ft.extent=function(a){if(this._get!==a||!this._ext){var A=this.values(),j=Object(ve.r)(A,a);this._ext=[A[j[0]],A[j[1]]],this._get=a}return this._ext},ft.argmin=function(a){return this.extent(a)[0]||{}},ft.argmax=function(a){return this.extent(a)[1]||{}},ft.min=function(a){var A=this.extent(a)[0];return null!=A?a(A):void 0},ft.max=function(a){var A=this.extent(a)[1];return null!=A?a(A):void 0},ft.quartile=function(a){return this._get===a&&this._q||(this._q=quartiles(this.values(),a),this._get=a),this._q},ft.q1=function(a){return this.quartile(a)[0]},ft.q2=function(a){return this.quartile(a)[1]},ft.q3=function(a){return this.quartile(a)[2]},ft.ci=function(a){return this._get===a&&this._ci||(this._ci=bootstrapCI(this.values(),1e3,.05,a),this._get=a),this._ci},ft.ci0=function(a){return this.ci(a)[0]},ft.ci1=function(a){return this.ci(a)[1]},Aggregate.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ct},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},Object(ve.z)(Aggregate,Transform,{transform:function transform(a,A){var j=this,P=this,B=A.fork(A.NO_SOURCE|A.NO_FIELDS),q=a.modified();return P.stamp=B.stamp,P.value&&(q||A.modified(P._inputs,!0))?(P._prev=P.value,P.value=q?P.init(a):{},A.visit(A.SOURCE,(function(a){return P.add(a)}))):(P.value=P.value||P.init(a),A.visit(A.REM,(function(a){return P.rem(a)})),A.visit(A.ADD,(function(a){return P.add(a)}))),B.modifies(P._outputs),P._drop=!1!==a.drop,a.cross&&P._dims.length>1&&(P._drop=!1,P.cross()),A.clean()&&P._drop&&B.clean(!0).runAfter((function(){return j.clean()})),P.changes(B)},cross:function cross(){var a=this,A=a.value,j=a._dnames,P=j.map((function(){return{}})),B=j.length;function collect(a){var A,q,ne,ie;for(A in a)for(ne=a[A].tuple,q=0;q<B;++q)P[q][ie=ne[j[q]]]=ie}collect(a._prev),collect(A),function generate(q,ne,ie){var oe=j[ie],se=P[ie++];for(var le in se){var he=q?q+"|"+le:le;ne[oe]=se[le],ie<B?generate(he,ne,ie):A[he]||a.cell(he,ne)}}("",{},0)},init:function init(a){var A=this._inputs=[],j=this._outputs=[],P={};function inputVisit(a){for(var j,B=Object(ve.i)(Object(ve.g)(a)),q=B.length,ne=0;ne<q;++ne)P[j=B[ne]]||(P[j]=1,A.push(j))}this._dims=Object(ve.i)(a.groupby),this._dnames=this._dims.map((function(a){var A=Object(ve.h)(a);return inputVisit(a),j.push(A),A})),this.cellkey=a.key?a.key:groupkey(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var B,q,ne,ie,oe,se,le=a.fields||[null],he=a.ops||["count"],pe=a.as||[],ge=le.length,me={};for(ge!==he.length&&Object(ve.o)("Unmatched number of fields and aggregate ops."),se=0;se<ge;++se)B=le[se],q=he[se],null==B&&"count"!==q&&Object(ve.o)("Null aggregate field specified."),oe=measureName(q,ie=Object(ve.h)(B),pe[se]),j.push(oe),"count"!==q?((ne=me[ie])||(inputVisit(B),(ne=me[ie]=[]).field=B,this._measures.push(ne)),"count"!==q&&(this._countOnly=!1),ne.push(createMeasure(q,oe))):this._counts.push(oe);return this._measures=this._measures.map((function(a){return compileMeasures(a,a.field)})),{}},cellkey:groupkey(),cell:function cell(a,A){var cell=this.value[a];return cell?0===cell.num&&this._drop&&cell.stamp<this.stamp?(cell.stamp=this.stamp,this._adds[this._alen++]=cell):cell.stamp<this.stamp&&(cell.stamp=this.stamp,this._mods[this._mlen++]=cell):(cell=this.value[a]=this.newcell(a,A),this._adds[this._alen++]=cell),cell},newcell:function newcell(a,A){var j={key:a,num:0,agg:null,tuple:this.newtuple(A,this._prev&&this._prev[a]),stamp:this.stamp,store:!1};if(!this._countOnly){var P=this._measures,B=P.length;j.agg=Array(B);for(var q=0;q<B;++q)j.agg[q]=new P[q](j)}return j.store&&(j.data=new TupleStore),j},newtuple:function newtuple(a,A){for(var j=this._dnames,P=this._dims,B=P.length,q={},ne=0;ne<B;++ne)q[j[ne]]=P[ne](a);return A?replace(A.tuple,q):ingest$1(q)},clean:function clean(){var a=this.value;for(var A in a)0===a[A].num&&delete a[A]},add:function add(a){var A=this.cellkey(a),j=this.cell(A,a);if(j.num+=1,!this._countOnly){j.store&&j.data.add(a);for(var P=j.agg,B=0,q=P.length;B<q;++B)P[B].add(P[B].get(a),a)}},rem:function rem(a){var A=this.cellkey(a),j=this.cell(A,a);if(j.num-=1,!this._countOnly){j.store&&j.data.rem(a);for(var P=j.agg,B=0,q=P.length;B<q;++B)P[B].rem(P[B].get(a),a)}},celltuple:function celltuple(a){var A=a.tuple,j=this._counts;a.store&&a.data.values();for(var P=0,B=j.length;P<B;++P)A[j[P]]=a.num;if(!this._countOnly)for(var q=a.agg,ne=0,ie=q.length;ne<ie;++ne)q[ne].set(A);return A},changes:function changes(a){var A,j,P,B,q=this._adds,ne=this._mods,ie=this._prev,oe=this._drop,se=a.add,le=a.rem,he=a.mod;if(ie)for(j in ie)A=ie[j],oe&&!A.num||le.push(A.tuple);for(P=0,B=this._alen;P<B;++P)se.push(this.celltuple(q[P])),q[P]=null;for(P=0,B=this._mlen;P<B;++P)(0===(A=ne[P]).num&&oe?le:he).push(this.celltuple(A)),ne[P]=null;return this._alen=this._mlen=0,this._prev=null,a}});function Bin(a){Transform.call(this,null,a)}function SortedList(a,A,j){var P=a,B=A||[],q=j||[],ne={},ie=0;return{add:function add(a){return q.push(a)},remove:function remove(a){return ne[P(a)]=++ie},size:function size(){return B.length},data:function data(a,A){return ie&&(B=B.filter((function(a){return!ne[P(a)]})),ne={},ie=0),A&&a&&B.sort(a),q.length&&(B=a?Object(ve.O)(a,B,q.sort(a)):B.concat(q),q=[]),B}}}function Collect(a){Transform.call(this,[],a)}function Compare(a){Operator.call(this,null,update$5,a)}function update$5(a){return this.value&&!a.modified()?this.value:Object(ve.l)(a.fields,a.orders)}function CountPattern(a){Transform.call(this,null,a)}function Cross(a){Transform.call(this,null,a)}Bin.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},Object(ve.z)(Bin,Transform,{transform:function transform(a,A){var j,P=!1!==a.interval,B=this._bins(a),q=B.start,ne=B.step,ie=a.as||["bin0","bin1"],oe=ie[0],se=ie[1];return j=a.modified()?(A=A.reflow(!0)).SOURCE:A.modified(Object(ve.g)(a.field))?A.ADD_MOD:A.ADD,A.visit(j,P?function(a){var A=B(a);a[oe]=A,a[se]=null==A?null:q+ne*(1+(A-q)/ne)}:function(a){return a[oe]=B(a)}),A.modifies(P?ie:oe)},_bins:function _bins(a){if(this.value&&!a.modified())return this.value;var A,j,P=a.field,B=bin(a),q=B.step,ne=B.start,ie=ne+Math.ceil((B.stop-ne)/q)*q;null!=(A=a.anchor)&&(j=A-(ne+q*Math.floor((A-ne)/q)),ne+=j,ie+=j);var oe=function f(a){var A=Object(ve.eb)(P(a));return null==A?null:A<ne?-1/0:A>ie?1/0:(A=Math.max(ne,Math.min(A,ie-q)),ne+q*Math.floor(1e-14+(A-ne)/q))};return oe.start=ne,oe.stop=B.stop,oe.step=q,this.value=Object(ve.f)(oe,Object(ve.g)(P),a.name||"bin_"+Object(ve.h)(P))}}),Collect.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Object(ve.z)(Collect,Transform,{transform:function transform(a,A){var j=A.fork(A.ALL),P=SortedList(tupleid,this.value,j.materialize(j.ADD).add),B=a.sort,q=A.changed()||B&&(a.modified("sort")||A.modified(B.fields));return j.visit(j.REM,P.remove),this.modified(q),this.value=j.source=P.data(stableCompare(B),q),A.source&&A.source.root&&(this.value.root=A.source.root),j}}),Object(ve.z)(Compare,Operator),CountPattern.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},Object(ve.z)(CountPattern,Transform,{transform:function transform(a,A){var j=function process(A){return function(j){for(var P,B=function tokenize(a,A,j){switch(A){case"upper":a=a.toUpperCase();break;case"lower":a=a.toLowerCase()}return a.match(j)}(ie(j),a.case,q)||[],oe=0,se=B.length;oe<se;++oe)ne.test(P=B[oe])||A(P)}},P=this._parameterCheck(a,A),B=this._counts,q=this._match,ne=this._stop,ie=a.field,oe=a.as||["text","count"],se=j((function(a){return B[a]=1+(B[a]||0)})),le=j((function(a){return B[a]-=1}));return P?A.visit(A.SOURCE,se):(A.visit(A.ADD,se),A.visit(A.REM,le)),this._finish(A,oe)},_parameterCheck:function _parameterCheck(a,A){var j=!1;return!a.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(a.stopwords||"")+"$","i"),j=!0),!a.modified("pattern")&&this._match||(this._match=new RegExp(a.pattern||"[\\w']+","g"),j=!0),(a.modified("field")||A.modified(a.field.fields))&&(j=!0),j&&(this._counts={}),j},_finish:function _finish(a,A){var j,P,B,q=this._counts,ne=this._tuples||(this._tuples={}),ie=A[0],oe=A[1],se=a.fork(a.NO_SOURCE|a.NO_FIELDS);for(j in q)P=ne[j],B=q[j]||0,!P&&B?(ne[j]=P=ingest$1({}),P[ie]=j,P[oe]=B,se.add.push(P)):0===B?(P&&se.rem.push(P),q[j]=null,ne[j]=null):P[oe]!==B&&(P[oe]=B,se.mod.push(P));return se.modifies(A)}}),Cross.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Object(ve.z)(Cross,Transform,{transform:function transform(a,A){var j=A.fork(A.NO_SOURCE),P=a.as||["a","b"],B=P[0],q=P[1],ne=!this.value||A.changed(A.ADD_REM)||a.modified("as")||a.modified("filter"),ie=this.value;return ne?(ie&&(j.rem=ie),ie=A.materialize(A.SOURCE).source,j.add=this.value=function cross(a,A,j,P){for(var B,q,ne=[],ie={},oe=a.length,se=0;se<oe;++se)for(ie[A]=q=a[se],B=0;B<oe;++B)ie[j]=a[B],P(ie)&&(ne.push(ingest$1(ie)),(ie={})[A]=q);return ne}(ie,B,q,a.filter||ve.ib)):j.mod=ie,j.source=this.value,j.modifies(P)}});var dt={kde:vega_statistics_module_kde,mixture:mixture,normal:gaussian,lognormal:lognormal,uniform:uniform};function Density(a){Transform.call(this,null,a)}var ht=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],pt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:ht},{name:"weights",type:"number",array:!0}]};function fieldNames(a,A){return a?a.map((function(a,j){return A[j]||Object(ve.h)(a)})):null}function partition$1(a,A,j){var P,B,q,ne,ie,oe,se=[],le=function get(a){return a(ne)};if(null==A)se.push(a.map(j));else for(P={},B=0,q=a.length;B<q;++B)ne=a[B],(oe=P[ie=A.map(le)])||(P[ie]=oe=[],oe.dims=ie,se.push(oe)),oe.push(j(ne));return se}Density.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:ht.concat(pt)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(ve.z)(Density,Transform,{transform:function transform(a,A){var j=A.fork(A.NO_SOURCE|A.NO_FIELDS);if(!this.value||A.changed()||a.modified()){var P=function vega_transforms_module_parse(a,A){var j=a.function;Object(ve.w)(dt,j)||Object(ve.o)("Unknown distribution function: "+j);var P=dt[j]();for(var B in a)"field"===B?P.data((a.from||A()).map(a[B])):"distributions"===B?P[B](a[B].map((function(a){return vega_transforms_module_parse(a,A)}))):"function"===typeof P[B]&&P[B](a[B]);return P}(a.distribution,function vega_transforms_module_source(a){return function(){return a.materialize(a.SOURCE).source}}(A)),B=a.steps||a.minsteps||25,q=a.steps||a.maxsteps||200,ne=a.method||"pdf";"pdf"!==ne&&"cdf"!==ne&&Object(ve.o)("Invalid density method: "+ne),a.extent||P.data||Object(ve.o)("Missing density extent parameter."),ne=P[ne];var ie=a.as||["value","density"],oe=sampleCurve(ne,a.extent||Object(ve.q)(P.data()),B,q).map((function(a){var A={};return A[ie[0]]=a[0],A[ie[1]]=a[1],ingest$1(A)}));this.value&&(j.rem=this.value),this.value=j.add=j.source=oe}return j}});function DotBin(a){Transform.call(this,null,a)}DotBin.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};function Expression(a){Operator.call(this,null,update$4,a),this.modified(!0)}function update$4(a){var A=a.expr;return this.value&&!a.modified("expr")?this.value:Object(ve.f)((function(j){return A(j,a)}),Object(ve.g)(A),Object(ve.h)(A))}function Extent(a){Transform.call(this,[void 0,void 0],a)}function Subflow(a,A){Operator.call(this,a),this.parent=A,this.count=0}function Facet(a){Transform.call(this,{},a),this._keys=Object(ve.t)();var A=this._targets=[];A.active=0,A.forEach=function(a){for(var j=0,P=A.active;j<P;++j)a(A[j],j,A)}}function Field(a){Operator.call(this,null,update$3,a)}function update$3(a){return this.value&&!a.modified()?this.value:Object(ve.B)(a.name)?Object(ve.i)(a.name).map((function(a){return Object(ve.u)(a)})):Object(ve.u)(a.name,a.as)}function Filter(a){Transform.call(this,Object(ve.t)(),a)}function Flatten(a){Transform.call(this,[],a)}function Fold(a){Transform.call(this,[],a)}function Formula(a){Transform.call(this,null,a)}function Generate(a){Transform.call(this,[],a)}Object(ve.z)(DotBin,Transform,{transform:function transform(a,A){if(this.value&&!a.modified()&&!A.changed())return A;for(var j,P=A.materialize(A.SOURCE).source,B=partition$1(A.source,a.groupby,ve.y),q=a.smooth||!1,ne=a.field,ie=a.step||function autostep(a,A){return Object(ve.Z)(Object(ve.q)(a,A))/30}(P,ne),oe=stableCompare((function(a,A){return ne(a)-ne(A)})),se=a.as||"bin",le=B.length,he=1/0,pe=-1/0,ge=0;ge<le;++ge){var me=B[ge].sort(oe);j=-1;var ye,_e=Object(We.a)(dotbin(me,ie,q,ne));try{for(_e.s();!(ye=_e.n()).done;){var we=ye.value;we<he&&(he=we),we>pe&&(pe=we),me[++j][se]=we}}catch(ke){_e.e(ke)}finally{_e.f()}}return this.value={start:he,stop:pe,step:ie},A.reflow(!0).modifies(se)}}),Object(ve.z)(Expression,Operator),Extent.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Object(ve.z)(Extent,Transform,{transform:function transform(a,A){var j=this.value,P=a.field,B=A.changed()||A.modified(P.fields)||a.modified("field"),q=j[0],ne=j[1];if((B||null==q)&&(q=1/0,ne=-1/0),A.visit(B?A.SOURCE:A.ADD,(function(a){var A=Object(ve.eb)(P(a));null!=A&&(A<q&&(q=A),A>ne&&(ne=A))})),!Number.isFinite(q)||!Number.isFinite(ne)){var ie=Object(ve.h)(P);ie&&(ie=' for field "'.concat(ie,'"')),A.dataflow.warn("Infinite extent".concat(ie,": [").concat(q,", ").concat(ne,"]")),q=ne=void 0}this.value=[q,ne]}}),Object(ve.z)(Subflow,Operator,{connect:function connect(a){return this.detachSubflow=a.detachSubflow,this.targets().add(a),a.source=this},add:function add(a){this.count+=1,this.value.add.push(a)},rem:function rem(a){this.count-=1,this.value.rem.push(a)},mod:function mod(a){this.value.mod.push(a)},init:function init(a){this.value.init(a,a.NO_SOURCE)},evaluate:function evaluate(){return this.value}}),Object(ve.z)(Facet,Transform,{activate:function activate(a){this._targets[this._targets.active++]=a},subflow:function subflow(a,A,j,P){var B,q,ne=this.value,ie=Object(ve.w)(ne,a)&&ne[a];return ie?ie.value.stamp<j.stamp&&(ie.init(j),this.activate(ie)):(q=P||(q=this._group[a])&&q.tuple,B=j.dataflow,ie=new Subflow(j.fork(j.NO_SOURCE),this),B.add(ie).connect(A(B,a,q)),ne[a]=ie,this.activate(ie)),ie},clean:function clean(){var a=this.value,A=0;for(var j in a)if(0===a[j].count){var P=a[j].detachSubflow;P&&P(),delete a[j],++A}if(A){var B=this._targets.filter((function(a){return a&&a.count>0}));this.initTargets(B)}},initTargets:function initTargets(a){for(var A=this._targets,j=A.length,P=a?a.length:0,B=0;B<P;++B)A[B]=a[B];for(;B<j&&null!=A[B];++B)A[B]=null;A.active=P},transform:function transform(a,A){var j=this,P=A.dataflow,B=a.key,q=a.subflow,ne=this._keys,ie=a.modified("key"),oe=function subflow(a){return j.subflow(a,q,A)};return this._group=a.group||{},this.initTargets(),A.visit(A.REM,(function(a){var A=tupleid(a),j=ne.get(A);void 0!==j&&(ne.delete(A),oe(j).rem(a))})),A.visit(A.ADD,(function(a){var A=B(a);ne.set(tupleid(a),A),oe(A).add(a)})),ie||A.modified(B.fields)?A.visit(A.MOD,(function(a){var A=tupleid(a),j=ne.get(A),P=B(a);j===P?oe(P).mod(a):(ne.set(A,P),oe(j).rem(a),oe(P).add(a))})):A.changed(A.MOD)&&A.visit(A.MOD,(function(a){oe(ne.get(tupleid(a))).mod(a)})),ie&&A.visit(A.REFLOW,(function(a){var A=tupleid(a),j=ne.get(A),P=B(a);j!==P&&(ne.set(A,P),oe(j).rem(a),oe(P).add(a))})),A.clean()?P.runAfter((function(){j.clean(),ne.clean()})):ne.empty>P.cleanThreshold&&P.runAfter(ne.clean),A}}),Object(ve.z)(Field,Operator),Filter.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Object(ve.z)(Filter,Transform,{transform:function transform(a,A){var j=A.dataflow,P=this.value,B=A.fork(),q=B.add,ne=B.rem,ie=B.mod,oe=a.expr,se=!0;function revisit(A){var j=tupleid(A),B=oe(A,a),le=P.get(j);B&&le?(P.delete(j),q.push(A)):B||le?se&&B&&!le&&ie.push(A):(P.set(j,1),ne.push(A))}return A.visit(A.REM,(function(a){var A=tupleid(a);P.has(A)?P.delete(A):ne.push(a)})),A.visit(A.ADD,(function(A){oe(A,a)?q.push(A):P.set(tupleid(A),1)})),A.visit(A.MOD,revisit),a.modified()&&(se=!1,A.visit(A.REFLOW,revisit)),P.empty>j.cleanThreshold&&j.runAfter(P.clean),B}}),Flatten.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},Object(ve.z)(Flatten,Transform,{transform:function transform(a,A){var j=A.fork(A.NO_SOURCE),P=a.fields,B=fieldNames(P,a.as||[]),q=a.index||null,ne=B.length;return j.rem=this.value,A.visit(A.SOURCE,(function(a){for(var A,ie,oe,se=P.map((function(A){return A(a)})),le=se.reduce((function(a,A){return Math.max(a,A.length)}),0),he=0;he<le;++he){for(ie=vega_dataflow_module_derive(a),A=0;A<ne;++A)ie[B[A]]=null==(oe=se[A][he])?null:oe;q&&(ie[q]=he),j.add.push(ie)}})),this.value=j.source=j.add,q&&j.modifies(q),j.modifies(B)}}),Fold.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Object(ve.z)(Fold,Transform,{transform:function transform(a,A){var j=A.fork(A.NO_SOURCE),P=a.fields,B=P.map(ve.h),q=a.as||["key","value"],ne=q[0],ie=q[1],oe=P.length;return j.rem=this.value,A.visit(A.SOURCE,(function(a){for(var A,q=0;q<oe;++q)(A=vega_dataflow_module_derive(a))[ne]=B[q],A[ie]=P[q](a),j.add.push(A)})),this.value=j.source=j.add,j.modifies(q)}}),Formula.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Object(ve.z)(Formula,Transform,{transform:function transform(a,A){var j=a.expr,P=a.as,B=a.modified(),q=a.initonly?A.ADD:B?A.SOURCE:A.modified(j.fields)||A.modified(P)?A.ADD_MOD:A.ADD;return B&&(A=A.materialize().reflow(!0)),a.initonly||A.modifies(P),A.visit(q,(function(A){return A[P]=j(A,a)}))}}),Object(ve.z)(Generate,Transform,{transform:function transform(a,A){var j,P,B,q=A.fork(A.ALL),ne=a.generator,ie=this.value,oe=a.size-ie.length;if(oe>0){for(j=[];--oe>=0;)j.push(B=ingest$1(ne(a))),ie.push(B);q.add=q.add.length?q.materialize(q.ADD).add.concat(j):j}else P=ie.slice(0,-oe),q.rem=q.rem.length?q.materialize(q.REM).rem.concat(P):P,ie=ie.slice(-oe);return q.source=this.value=ie,q}});var gt={value:"value",median:median,mean:function mean_mean(a,A){var j=0,P=0;if(void 0===A){var B,q=Object(We.a)(a);try{for(q.s();!(B=q.n()).done;){var ne=B.value;null!=ne&&(ne=+ne)>=ne&&(++j,P+=ne)}}catch(he){q.e(he)}finally{q.f()}}else{var ie,oe=-1,se=Object(We.a)(a);try{for(se.s();!(ie=se.n()).done;){var le=ie.value;null!=(le=A(le,++oe,a))&&(le=+le)>=le&&(++j,P+=le)}}catch(he){se.e(he)}finally{se.f()}}if(j)return P/j},min:min_min,max:max_max},mt=[];function Impute(a){Transform.call(this,[],a)}function JoinAggregate(a){Aggregate.call(this,a)}function KDE(a){Transform.call(this,null,a)}function Key(a){Operator.call(this,null,update$2,a)}function update$2(a){return this.value&&!a.modified()?this.value:Object(ve.K)(a.fields,a.flat)}function Load(a){Transform.call(this,[],a),this._pending=null}function vega_transforms_module_output(a,A,j){j.forEach(ingest$1);var P=A.fork(A.NO_FIELDS&A.NO_SOURCE);return P.rem=a.value,a.value=P.source=P.add=j,a._pending=null,P.rem.length&&P.clean(!0),P}function Lookup(a){Transform.call(this,{},a)}function MultiExtent(a){Operator.call(this,null,update$1,a)}function update$1(a){if(this.value&&!a.modified())return this.value;var A,j,P=a.extents,B=P.length,q=1/0,ne=-1/0;for(A=0;A<B;++A)(j=P[A])[0]<q&&(q=j[0]),j[1]>ne&&(ne=j[1]);return[q,ne]}function MultiValues(a){Operator.call(this,null,vega_transforms_module_update,a)}function vega_transforms_module_update(a){return this.value&&!a.modified()?this.value:a.values.reduce((function(a,A){return a.concat(A)}),[])}function Params(a){Transform.call(this,null,a)}function Pivot(a){Aggregate.call(this,a)}function PreFacet(a){Facet.call(this,a)}function Project(a){Transform.call(this,null,a)}function Proxy(a){Transform.call(this,null,a)}function Quantile(a){Transform.call(this,null,a)}Impute.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Object(ve.z)(Impute,Transform,{transform:function transform(a,A){var j,P,B,q,ne,ie,oe,se,le,he,pe=A.fork(A.ALL),ge=function getValue(a){var A,j=a.method||gt.value;if(null!=gt[j])return j===gt.value?(A=void 0!==a.value?a.value:0,function(){return A}):gt[j];Object(ve.o)("Unrecognized imputation method: "+j)}(a),me=function getField(a){var A=a.field;return function(a){return a?A(a):NaN}}(a),ye=Object(ve.h)(a.field),_e=Object(ve.h)(a.key),we=(a.groupby||[]).map(ve.h),ke=function vega_transforms_module_partition(a,A,j,P){var B,q,ne,ie,oe,se,le,he,pe=function get(a){return a(he)},ge=[],me=P?P.slice():[],ve={},ye={};for(me.forEach((function(a,A){return ve[a]=A+1})),ie=0,le=a.length;ie<le;++ie)he=a[ie],se=j(he),oe=ve[se]||(ve[se]=me.push(se)),q=(B=A?A.map(pe):mt)+"",(ne=ye[q])||(ne=ye[q]=[],ge.push(ne),ne.values=B),ne[oe-1]=he;return ge.domain=me,ge}(A.source,a.groupby,a.key,a.keyvals),Oe=[],Se=this.value,Te=ke.domain.length;for(ne=0,se=ke.length;ne<se;++ne)for(B=(j=ke[ne]).values,P=NaN,oe=0;oe<Te;++oe)if(null==j[oe]){for(q=ke.domain[oe],he={_impute:!0},ie=0,le=B.length;ie<le;++ie)he[we[ie]]=B[ie];he[_e]=q,he[ye]=Number.isNaN(P)?P=ge(j,me):P,Oe.push(ingest$1(he))}return Oe.length&&(pe.add=pe.materialize(pe.ADD).add.concat(Oe)),Se.length&&(pe.rem=pe.materialize(pe.REM).rem.concat(Se)),this.value=Oe,pe}}),JoinAggregate.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:ct},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},Object(ve.z)(JoinAggregate,Aggregate,{transform:function transform(a,A){var j,P=this,B=a.modified();return P.value&&(B||A.modified(P._inputs,!0))?(j=P.value=B?P.init(a):{},A.visit(A.SOURCE,(function(a){return P.add(a)}))):(j=P.value=P.value||this.init(a),A.visit(A.REM,(function(a){return P.rem(a)})),A.visit(A.ADD,(function(a){return P.add(a)}))),P.changes(),A.visit(A.SOURCE,(function(a){Object(ve.p)(a,j[P.cellkey(a)].tuple)})),A.reflow(B).modifies(this._outputs)},changes:function changes(){var a,A,j=this._adds,P=this._mods;for(a=0,A=this._alen;a<A;++a)this.celltuple(j[a]),j[a]=null;for(a=0,A=this._mlen;a<A;++a)this.celltuple(P[a]),P[a]=null;this._alen=this._mlen=0}}),KDE.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(ve.z)(KDE,Transform,{transform:function transform(a,A){var j=A.fork(A.NO_SOURCE|A.NO_FIELDS);if(!this.value||A.changed()||a.modified()){var P=A.materialize(A.SOURCE).source,B=partition$1(P,a.groupby,a.field),q=(a.groupby||[]).map(ve.h),ne=a.bandwidth,ie=a.cumulative?"cdf":"pdf",oe=a.as||["value","density"],se=[],le=a.extent,he=a.steps||a.minsteps||25,pe=a.steps||a.maxsteps||200;"pdf"!==ie&&"cdf"!==ie&&Object(ve.o)("Invalid density method: "+ie),"shared"===a.resolve&&(le||(le=Object(ve.q)(P,a.field)),he=pe=a.steps||pe),B.forEach((function(A){var j=vega_statistics_module_kde(A,ne)[ie],P=a.counts?A.length:1;sampleCurve(j,le||Object(ve.q)(A),he,pe).forEach((function(a){for(var j={},B=0;B<q.length;++B)j[q[B]]=A.dims[B];j[oe[0]]=a[0],j[oe[1]]=a[1]*P,se.push(ingest$1(j))}))})),this.value&&(j.rem=this.value),this.value=j.add=j.source=se}return j}}),Object(ve.z)(Key,Operator),Object(ve.z)(Load,Transform,{transform:function transform(a,A){var j=this,P=A.dataflow;return this._pending?vega_transforms_module_output(this,A,this._pending):function vega_transforms_module_stop(a){return a.modified("async")&&!(a.modified("values")||a.modified("url")||a.modified("format"))}(a)?A.StopPropagation:a.values?vega_transforms_module_output(this,A,P.parse(a.values,a.format)):a.async?{async:P.request(a.url,a.format).then((function(a){return j._pending=Object(ve.i)(a.data),function(a){return a.touch(j)}}))}:P.request(a.url,a.format).then((function(a){return vega_transforms_module_output(j,A,Object(ve.i)(a.data))}))}}),Lookup.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Object(ve.z)(Lookup,Transform,{transform:function transform(a,A){var j,P,B=a.fields,q=a.index,ne=a.values,ie=null==a.default?null:a.default,oe=a.modified(),se=B.length,le=oe?A.SOURCE:A.ADD,he=A,pe=a.as;return ne?(P=ne.length,se>1&&!pe&&Object(ve.o)('Multi-field lookup requires explicit "as" parameter.'),pe&&pe.length!==se*P&&Object(ve.o)('The "as" parameter has too few output field names.'),pe=pe||ne.map(ve.h),j=function set(a){for(var A,j,oe=0,le=0;oe<se;++oe)if(null==(j=q.get(B[oe](a))))for(A=0;A<P;++A,++le)a[pe[le]]=ie;else for(A=0;A<P;++A,++le)a[pe[le]]=ne[A](j)}):(pe||Object(ve.o)("Missing output field names."),j=function set(a){for(var A,j=0;j<se;++j)A=q.get(B[j](a)),a[pe[j]]=null==A?ie:A}),oe?he=A.reflow(!0):le|=B.some((function(a){return A.modified(a.fields)}))?A.MOD:0,A.visit(le,j),he.modifies(pe)}}),Object(ve.z)(MultiExtent,Operator),Object(ve.z)(MultiValues,Operator),Object(ve.z)(Params,Transform,{transform:function transform(a,A){return this.modified(a.modified()),this.value=a,A.fork(A.NO_SOURCE|A.NO_FIELDS)}}),Pivot.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:ct,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},Object(ve.z)(Pivot,Aggregate,{_transform:Aggregate.prototype.transform,transform:function transform(a,A){return this._transform(function aggregateParams(a,A){var j=a.field,P=a.value,B=("count"===a.op?"__count__":a.op)||"sum",q=Object(ve.g)(j).concat(Object(ve.g)(P)),ne=function pivotKeys(a,A,j){var P={},B=[];return j.visit(j.SOURCE,(function(A){var j=a(A);P[j]||(P[j]=1,B.push(j))})),B.sort(ve.j),A?B.slice(0,A):B}(j,a.limit||0,A);A.changed()&&a.set("__pivot__",null,null,!0);return{key:a.key,groupby:a.groupby,ops:ne.map((function(){return B})),fields:ne.map((function(a){return function vega_transforms_module_get(a,A,j,P){return Object(ve.f)((function(P){return A(P)===a?j(P):NaN}),P,a+"")}(a,j,P,q)})),as:ne.map((function(a){return a+""})),modified:a.modified.bind(a)}}(a,A),A)}}),Object(ve.z)(PreFacet,Facet,{transform:function transform(a,A){var j=this,P=a.subflow,B=a.field,q=function subflow(a){return j.subflow(tupleid(a),P,A,a)};return(a.modified("field")||B&&A.modified(Object(ve.g)(B)))&&Object(ve.o)("PreFacet does not support field modification."),this.initTargets(),B?(A.visit(A.MOD,(function(a){var A=q(a);B(a).forEach((function(a){return A.mod(a)}))})),A.visit(A.ADD,(function(a){var A=q(a);B(a).forEach((function(a){return A.add(ingest$1(a))}))})),A.visit(A.REM,(function(a){var A=q(a);B(a).forEach((function(a){return A.rem(a)}))}))):(A.visit(A.MOD,(function(a){return q(a).mod(a)})),A.visit(A.ADD,(function(a){return q(a).add(a)})),A.visit(A.REM,(function(a){return q(a).rem(a)}))),A.clean()&&A.runAfter((function(){return j.clean()})),A}}),Project.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Object(ve.z)(Project,Transform,{transform:function transform(a,A){var j,P=A.fork(A.NO_SOURCE),B=a.fields,q=fieldNames(a.fields,a.as||[]),ne=B?function(a,A){return function vega_transforms_module_project(a,A,j,P){for(var B=0,q=j.length;B<q;++B)A[P[B]]=j[B](a);return A}(a,A,B,q)}:rederive;return this.value?j=this.value:(A=A.addAll(),j=this.value={}),A.visit(A.REM,(function(a){var A=tupleid(a);P.rem.push(j[A]),j[A]=null})),A.visit(A.ADD,(function(a){var A=ne(a,ingest$1({}));j[tupleid(a)]=A,P.add.push(A)})),A.visit(A.MOD,(function(a){P.mod.push(ne(a,j[tupleid(a)]))})),P}}),Object(ve.z)(Proxy,Transform,{transform:function transform(a,A){return this.value=a.value,a.modified("value")?A.fork(A.NO_SOURCE|A.NO_FIELDS):A.StopPropagation}}),Quantile.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function Relay(a){Transform.call(this,null,a)}function Sample(a){Transform.call(this,[],a),this.count=0}function Sequence(a){Transform.call(this,null,a)}function Sieve(a){Transform.call(this,null,a),this.modified(!0)}function TimeUnit(a){Transform.call(this,null,a)}Object(ve.z)(Quantile,Transform,{transform:function transform(a,A){var j=A.fork(A.NO_SOURCE|A.NO_FIELDS),P=a.as||["prob","value"];if(this.value&&!a.modified()&&!A.changed())return j.source=this.value,j;var B=partition$1(A.materialize(A.SOURCE).source,a.groupby,a.field),q=(a.groupby||[]).map(ve.h),ne=[],ie=a.step||.01,oe=a.probs||src_range(ie/2,1-1e-14,ie),se=oe.length;return B.forEach((function(a){for(var A=quantiles(a,oe),j=0;j<se;++j){for(var B={},ie=0;ie<q.length;++ie)B[q[ie]]=a.dims[ie];B[P[0]]=oe[j],B[P[1]]=A[j],ne.push(ingest$1(B))}})),this.value&&(j.rem=this.value),this.value=j.add=j.source=ne,j}}),Object(ve.z)(Relay,Transform,{transform:function transform(a,A){var j,P;return this.value?P=this.value:(j=A=A.addAll(),P=this.value={}),a.derive&&(j=A.fork(A.NO_SOURCE),A.visit(A.REM,(function(a){var A=tupleid(a);j.rem.push(P[A]),P[A]=null})),A.visit(A.ADD,(function(a){var A=vega_dataflow_module_derive(a);P[tupleid(a)]=A,j.add.push(A)})),A.visit(A.MOD,(function(a){var A=P[tupleid(a)];for(var B in a)A[B]=a[B],j.modifies(B);j.mod.push(A)}))),j}}),Sample.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Object(ve.z)(Sample,Transform,{transform:function transform(a,A){var j=A.fork(A.NO_SOURCE),P=a.modified("size"),B=a.size,q=this.value.reduce((function(a,A){return a[tupleid(A)]=1,a}),{}),ne=this.value,ie=this.count,oe=0;function update(a){var A,P;ne.length<B?ne.push(a):(P=~~((ie+1)*et()))<ne.length&&P>=oe&&(A=ne[P],q[tupleid(A)]&&j.rem.push(A),ne[P]=a),++ie}if(A.rem.length&&(A.visit(A.REM,(function(a){var A=tupleid(a);q[A]&&(q[A]=-1,j.rem.push(a)),--ie})),ne=ne.filter((function(a){return-1!==q[tupleid(a)]}))),(A.rem.length||P)&&ne.length<B&&A.source&&(oe=ie=ne.length,A.visit(A.SOURCE,(function(a){q[tupleid(a)]||update(a)})),oe=-1),P&&ne.length>B){for(var se=ne.length-B,le=0;le<se;++le)q[tupleid(ne[le])]=-1,j.rem.push(ne[le]);ne=ne.slice(se)}return A.mod.length&&A.visit(A.MOD,(function(a){q[tupleid(a)]&&j.mod.push(a)})),A.add.length&&A.visit(A.ADD,update),(A.add.length||oe<0)&&(j.add=ne.filter((function(a){return!q[tupleid(a)]}))),this.count=ie,this.value=j.source=ne,j}}),Sequence.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Object(ve.z)(Sequence,Transform,{transform:function transform(a,A){if(!this.value||a.modified()){var j=A.materialize().fork(A.MOD),P=a.as||"data";return j.rem=this.value?A.rem.concat(this.value):A.rem,this.value=src_range(a.start,a.stop,a.step||1).map((function(a){var A={};return A[P]=a,ingest$1(A)})),j.add=A.add.concat(this.value),j}}}),Object(ve.z)(Sieve,Transform,{transform:function transform(a,A){return this.value=A.source,A.changed()?A.fork(A.NO_SOURCE|A.NO_FIELDS):A.StopPropagation}});var vt=["unit0","unit1"];function TupleIndex(a){Transform.call(this,Object(ve.t)(),a)}function Values(a){Transform.call(this,null,a)}TimeUnit.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:ot.j,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:vt}]},Object(ve.z)(TimeUnit,Transform,{transform:function transform(a,A){var j=a.field,P=!1!==a.interval,B="utc"===a.timezone,q=this._floor(a,A),ne=(B?ot.v:ot.p)(q.unit).offset,ie=a.as||vt,oe=ie[0],se=ie[1],le=q.step,he=q.start||1/0,pe=q.stop||-1/0,ge=A.ADD;return(a.modified()||A.modified(Object(ve.g)(j)))&&(ge=(A=A.reflow(!0)).SOURCE,he=1/0,pe=-1/0),A.visit(ge,(function(a){var A,B,ie=j(a);null==ie?(a[oe]=null,P&&(a[se]=null)):(a[oe]=A=B=q(ie),P&&(a[se]=B=ne(A,le)),A<he&&(he=A),B>pe&&(pe=B))})),q.start=he,q.stop=pe,A.modifies(P?ie:oe)},_floor:function _floor(a,A){var j="utc"===a.timezone,P=a.units?{units:a.units,step:a.step||1}:Object(ot.n)({extent:a.extent||Object(ve.q)(A.materialize(A.SOURCE).source,a.field),maxbins:a.maxbins}),B=P.units,q=P.step,ne=Object(ot.t)(B),ie=this.value||{},oe=(j?ot.u:ot.o)(ne,q);return oe.unit=Object(ve.W)(ne),oe.units=ne,oe.step=q,oe.start=ie.start,oe.stop=ie.stop,this.value=oe}}),Object(ve.z)(TupleIndex,Transform,{transform:function transform(a,A){var j=A.dataflow,P=a.field,B=this.value,q=function set(a){return B.set(P(a),a)},ne=!0;return a.modified("field")||A.modified(P.fields)?(B.clear(),A.visit(A.SOURCE,q)):A.changed()?(A.visit(A.REM,(function(a){return B.delete(P(a))})),A.visit(A.ADD,q)):ne=!1,this.modified(ne),B.empty>j.cleanThreshold&&j.runAfter(B.clean),A.fork()}}),Object(ve.z)(Values,Transform,{transform:function transform(a,A){(!this.value||a.modified("field")||a.modified("sort")||A.changed()||a.sort&&A.modified(a.sort.fields))&&(this.value=(a.sort?A.source.slice().sort(stableCompare(a.sort)):A.source).map(a.field))}});var yt={row_number:function row_number(){return{next:function next(a){return a.index+1}}},rank:function rank(){var rank;return{init:function init(){return rank=1},next:function next(a){var A=a.index,j=a.data;return A&&a.compare(j[A-1],j[A])?rank=A+1:rank}}},dense_rank:function dense_rank(){var a;return{init:function init(){return a=1},next:function next(A){var j=A.index,P=A.data;return j&&A.compare(P[j-1],P[j])?++a:a}}},percent_rank:function percent_rank(){var a=yt.rank(),A=a.next;return{init:a.init,next:function next(a){return(A(a)-1)/(a.data.length-1)}}},cume_dist:function cume_dist(){var a;return{init:function init(){return a=0},next:function next(A){var j=A.data,P=A.compare,B=A.index;if(a<B){for(;B+1<j.length&&!P(j[B],j[B+1]);)++B;a=B}return(1+a)/j.length}}},ntile:function ntile(a,A){(A=+A)>0||Object(ve.o)("ntile num must be greater than zero.");var j=yt.cume_dist(),P=j.next;return{init:j.init,next:function next(a){return Math.ceil(A*P(a))}}},lag:function lag(a,A){return A=+A||1,{next:function next(j){var P=j.index-A;return P>=0?a(j.data[P]):null}}},lead:function lead(a,A){return A=+A||1,{next:function next(j){var P=j.index+A,B=j.data;return P<B.length?a(B[P]):null}}},first_value:function first_value(a){return{next:function next(A){return a(A.data[A.i0])}}},last_value:function last_value(a){return{next:function next(A){return a(A.data[A.i1-1])}}},nth_value:function nth_value(a,A){return(A=+A)>0||Object(ve.o)("nth_value nth must be greater than zero."),{next:function next(j){var P=j.i0+(A-1);return P<j.i1?a(j.data[P]):null}}},prev_value:function prev_value(a){var A;return{init:function init(){return A=null},next:function next(j){var P=a(j.data[j.index]);return null!=P?A=P:A}}},next_value:function next_value(a){var A,j;return{init:function init(){return A=null,j=-1},next:function next(P){var B=P.data;return P.index<=j?A:(j=function find(a,A,j){for(var P=A.length;j<P;++j){if(null!=a(A[j]))return j}return-1}(a,B,P.index))<0?(j=B.length,A=null):A=a(B[j])}}}};var bt=Object.keys(yt);function WindowState(a){var A=Object(ve.i)(a.ops),j=Object(ve.i)(a.fields),P=Object(ve.i)(a.params),B=Object(ve.i)(a.as),q=this.outputs=[],ne=this.windows=[],ie={},oe={},se=[],le=[],he=!0;function visitInputs(a){Object(ve.i)(Object(ve.g)(a)).forEach((function(a){return ie[a]=1}))}visitInputs(a.sort),A.forEach((function(a,A){var ie=j[A],pe=Object(ve.h)(ie),ge=measureName(a,pe,B[A]);if(visitInputs(ie),q.push(ge),Object(ve.w)(yt,a))ne.push(function WindowOp(a,A,j,P){var B=yt[a](A,j);return{init:B.init||ve.mb,update:function update(a,A){A[P]=B.next(a)}}}(a,j[A],P[A],ge));else{if(null==ie&&"count"!==a&&Object(ve.o)("Null aggregate field specified."),"count"===a)return void se.push(ge);he=!1;var me=oe[pe];me||((me=oe[pe]=[]).field=ie,le.push(me)),me.push(createMeasure(a,ge))}})),(se.length||le.length)&&(this.cell=function vega_transforms_module_cell(a,A,j){a=a.map((function(a){return compileMeasures(a,a.field)}));var P={num:0,agg:null,store:!1,count:A};if(!j)for(var B=a.length,q=P.agg=Array(B),ne=0;ne<B;++ne)q[ne]=new a[ne](P);if(P.store)var ie=P.data=new TupleStore;return P.add=function(a){if(P.num+=1,!j){ie&&ie.add(a);for(var A=0;A<B;++A)q[A].add(q[A].get(a),a)}},P.rem=function(a){if(P.num-=1,!j){ie&&ie.rem(a);for(var A=0;A<B;++A)q[A].rem(q[A].get(a),a)}},P.set=function(a){var B,ne;for(ie&&ie.values(),B=0,ne=A.length;B<ne;++B)a[A[B]]=P.num;if(!j)for(B=0,ne=q.length;B<ne;++B)q[B].set(a)},P.init=function(){P.num=0,ie&&ie.reset();for(var a=0;a<B;++a)q[a].init()},P}(le,se,he)),this.inputs=Object.keys(ie)}var _t=WindowState.prototype;function Window(a){Transform.call(this,{},a),this._mlen=0,this._mods=[]}function processPartition(a,A,j,P){var B=P.sort,q=B&&!P.ignorePeers,ne=P.frame||[null,0],ie=a.data(j),oe=ie.length,se=q?Object(at.a)(B):null,le={i0:0,i1:0,p0:0,p1:0,index:0,data:ie,compare:B||Object(ve.m)(-1)};A.init();for(var he=0;he<oe;++he)setWindow(le,ne,he,oe),q&&adjustRange(le,se),A.update(le,ie[he])}function setWindow(a,A,j,P){a.p0=a.i0,a.p1=a.i1,a.i0=null==A[0]?0:Math.max(0,j-Math.abs(A[0])),a.i1=null==A[1]?P:Math.min(P,j+Math.abs(A[1])+1),a.index=j}function adjustRange(a,A){var j=a.i0,P=a.i1-1,B=a.compare,q=a.data,ne=q.length-1;j>0&&!B(q[j],q[j-1])&&(a.i0=A.left(q,q[j])),P<ne&&!B(q[P],q[P+1])&&(a.i1=A.right(q,q[P]))}_t.init=function(){this.windows.forEach((function(a){return a.init()})),this.cell&&this.cell.init()},_t.update=function(a,A){var j,P=this.cell,B=this.windows,q=a.data,ne=B&&B.length;if(P){for(j=a.p0;j<a.i0;++j)P.rem(q[j]);for(j=a.p1;j<a.i1;++j)P.add(q[j]);P.set(A)}for(j=0;j<ne;++j)B[j].update(a,A)},Window.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:bt.concat(ct)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},Object(ve.z)(Window,Transform,{transform:function transform(a,A){var j=this;this.stamp=A.stamp;var P=a.modified(),B=stableCompare(a.sort),q=groupkey(a.groupby),ne=function group(a){return j.group(q(a))},ie=this.state;ie&&!P||(ie=this.state=new WindowState(a)),P||A.modified(ie.inputs)?(this.value={},A.visit(A.SOURCE,(function(a){return ne(a).add(a)}))):(A.visit(A.REM,(function(a){return ne(a).remove(a)})),A.visit(A.ADD,(function(a){return ne(a).add(a)})));for(var oe=0,se=this._mlen;oe<se;++oe)processPartition(this._mods[oe],ie,B,a);return this._mlen=0,this._mods=[],A.reflow(P).modifies(ie.outputs)},group:function group(a){var group=this.value[a];return group||(group=this.value[a]=SortedList(tupleid),group.stamp=-1),group.stamp<this.stamp&&(group.stamp=this.stamp,this._mods[this._mlen++]=group),group}});var xt=j(5),wt=j(6);function basis_point(a,A,j){a._context.bezierCurveTo((2*a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+A)/6,(a._y0+4*a._y1+j)/6)}function Basis(a){this._context=a}Basis.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 3:basis_point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(a,A){switch(a=+a,A=+A,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,A):this._context.moveTo(a,A);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:basis_point(this,a,A)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=A}};var src_noop=function(){};function BasisClosed(a){this._context=a}BasisClosed.prototype={areaStart:src_noop,areaEnd:src_noop,lineStart:function lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function point(a,A){switch(a=+a,A=+A,this._point){case 0:this._point=1,this._x2=a,this._y2=A;break;case 1:this._point=2,this._x3=a,this._y3=A;break;case 2:this._point=3,this._x4=a,this._y4=A,this._context.moveTo((this._x0+4*this._x1+a)/6,(this._y0+4*this._y1+A)/6);break;default:basis_point(this,a,A)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=A}};function BasisOpen(a){this._context=a}BasisOpen.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function lineEnd(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(a,A){switch(a=+a,A=+A,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var j=(this._x0+4*this._x1+a)/6,P=(this._y0+4*this._y1+A)/6;this._line?this._context.lineTo(j,P):this._context.moveTo(j,P);break;case 3:this._point=4;default:basis_point(this,a,A)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=A}};function Bundle(a,A){this._basis=new Basis(a),this._beta=A}Bundle.prototype={lineStart:function lineStart(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function lineEnd(){var a=this._x,A=this._y,j=a.length-1;if(j>0)for(var P,B=a[0],q=A[0],ne=a[j]-B,ie=A[j]-q,oe=-1;++oe<=j;)P=oe/j,this._basis.point(this._beta*a[oe]+(1-this._beta)*(B+P*ne),this._beta*A[oe]+(1-this._beta)*(q+P*ie));this._x=this._y=null,this._basis.lineEnd()},point:function point(a,A){this._x.push(+a),this._y.push(+A)}};var kt=function custom(a){function bundle(A){return 1===a?new Basis(A):new Bundle(A,a)}return bundle.beta=function(a){return custom(+a)},bundle}(.85);function cardinal_point(a,A,j){a._context.bezierCurveTo(a._x1+a._k*(a._x2-a._x0),a._y1+a._k*(a._y2-a._y0),a._x2+a._k*(a._x1-A),a._y2+a._k*(a._y1-j),a._x2,a._y2)}function Cardinal(a,A){this._context=a,this._k=(1-A)/6}Cardinal.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:cardinal_point(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(a,A){switch(a=+a,A=+A,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,A):this._context.moveTo(a,A);break;case 1:this._point=2,this._x1=a,this._y1=A;break;case 2:this._point=3;default:cardinal_point(this,a,A)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=A}};var Ot=function custom(a){function cardinal(A){return new Cardinal(A,a)}return cardinal.tension=function(a){return custom(+a)},cardinal}(0);function CardinalOpen(a,A){this._context=a,this._k=(1-A)/6}CardinalOpen.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function lineEnd(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(a,A){switch(a=+a,A=+A,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cardinal_point(this,a,A)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=A}};var St=function custom(a){function cardinal(A){return new CardinalOpen(A,a)}return cardinal.tension=function(a){return custom(+a)},cardinal}(0);function CardinalClosed(a,A){this._context=a,this._k=(1-A)/6}CardinalClosed.prototype={areaStart:src_noop,areaEnd:src_noop,lineStart:function lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function point(a,A){switch(a=+a,A=+A,this._point){case 0:this._point=1,this._x3=a,this._y3=A;break;case 1:this._point=2,this._context.moveTo(this._x4=a,this._y4=A);break;case 2:this._point=3,this._x5=a,this._y5=A;break;default:cardinal_point(this,a,A)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=A}};var Et=function custom(a){function cardinal(A){return new CardinalClosed(A,a)}return cardinal.tension=function(a){return custom(+a)},cardinal}(0),Ct=Math.abs,Tt=Math.atan2,Dt=Math.cos,At=Math.max,jt=Math.min,Ft=Math.sin,Pt=Math.sqrt,Rt=Math.PI,Mt=Rt/2,Lt=2*Rt;function acos(a){return a>1?0:a<-1?Rt:Math.acos(a)}function asin(a){return a>=1?Mt:a<=-1?-Mt:Math.asin(a)}function catmullRom_point(a,A,j){var P=a._x1,B=a._y1,q=a._x2,ne=a._y2;if(a._l01_a>1e-12){var ie=2*a._l01_2a+3*a._l01_a*a._l12_a+a._l12_2a,oe=3*a._l01_a*(a._l01_a+a._l12_a);P=(P*ie-a._x0*a._l12_2a+a._x2*a._l01_2a)/oe,B=(B*ie-a._y0*a._l12_2a+a._y2*a._l01_2a)/oe}if(a._l23_a>1e-12){var se=2*a._l23_2a+3*a._l23_a*a._l12_a+a._l12_2a,le=3*a._l23_a*(a._l23_a+a._l12_a);q=(q*se+a._x1*a._l23_2a-A*a._l12_2a)/le,ne=(ne*se+a._y1*a._l23_2a-j*a._l12_2a)/le}a._context.bezierCurveTo(P,B,q,ne,a._x2,a._y2)}function CatmullRom(a,A){this._context=a,this._alpha=A}CatmullRom.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(a,A){if(a=+a,A=+A,this._point){var j=this._x2-a,P=this._y2-A;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(j*j+P*P,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(a,A):this._context.moveTo(a,A);break;case 1:this._point=2;break;case 2:this._point=3;default:catmullRom_point(this,a,A)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=A}};var It=function custom(a){function catmullRom(A){return a?new CatmullRom(A,a):new Cardinal(A,0)}return catmullRom.alpha=function(a){return custom(+a)},catmullRom}(.5);function CatmullRomClosed(a,A){this._context=a,this._alpha=A}CatmullRomClosed.prototype={areaStart:src_noop,areaEnd:src_noop,lineStart:function lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function lineEnd(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function point(a,A){if(a=+a,A=+A,this._point){var j=this._x2-a,P=this._y2-A;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(j*j+P*P,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=a,this._y3=A;break;case 1:this._point=2,this._context.moveTo(this._x4=a,this._y4=A);break;case 2:this._point=3,this._x5=a,this._y5=A;break;default:catmullRom_point(this,a,A)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=A}};var Nt=function custom(a){function catmullRom(A){return a?new CatmullRomClosed(A,a):new CardinalClosed(A,0)}return catmullRom.alpha=function(a){return custom(+a)},catmullRom}(.5);function CatmullRomOpen(a,A){this._context=a,this._alpha=A}CatmullRomOpen.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function lineEnd(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(a,A){if(a=+a,A=+A,this._point){var j=this._x2-a,P=this._y2-A;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(j*j+P*P,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:catmullRom_point(this,a,A)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=A}};var Bt=function custom(a){function catmullRom(A){return a?new CatmullRomOpen(A,a):new CardinalOpen(A,0)}return catmullRom.alpha=function(a){return custom(+a)},catmullRom}(.5);function Linear(a){this._context=a}Linear.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._point=0},lineEnd:function lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(a,A){switch(a=+a,A=+A,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,A):this._context.moveTo(a,A);break;case 1:this._point=2;default:this._context.lineTo(a,A)}}};var curve_linear=function(a){return new Linear(a)};function LinearClosed(a){this._context=a}LinearClosed.prototype={areaStart:src_noop,areaEnd:src_noop,lineStart:function lineStart(){this._point=0},lineEnd:function lineEnd(){this._point&&this._context.closePath()},point:function point(a,A){a=+a,A=+A,this._point?this._context.lineTo(a,A):(this._point=1,this._context.moveTo(a,A))}};function monotone_sign(a){return a<0?-1:1}function slope3(a,A,j){var P=a._x1-a._x0,B=A-a._x1,q=(a._y1-a._y0)/(P||B<0&&-0),ne=(j-a._y1)/(B||P<0&&-0),ie=(q*B+ne*P)/(P+B);return(monotone_sign(q)+monotone_sign(ne))*Math.min(Math.abs(q),Math.abs(ne),.5*Math.abs(ie))||0}function slope2(a,A){var j=a._x1-a._x0;return j?(3*(a._y1-a._y0)/j-A)/2:A}function monotone_point(a,A,j){var P=a._x0,B=a._y0,q=a._x1,ne=a._y1,ie=(q-P)/3;a._context.bezierCurveTo(P+ie,B+ie*A,q-ie,ne-ie*j,q,ne)}function MonotoneX(a){this._context=a}function MonotoneY(a){this._context=new ReflectContext(a)}function ReflectContext(a){this._context=a}function Natural(a){this._context=a}function controlPoints(a){var A,j,P=a.length-1,B=new Array(P),q=new Array(P),ne=new Array(P);for(B[0]=0,q[0]=2,ne[0]=a[0]+2*a[1],A=1;A<P-1;++A)B[A]=1,q[A]=4,ne[A]=4*a[A]+2*a[A+1];for(B[P-1]=2,q[P-1]=7,ne[P-1]=8*a[P-1]+a[P],A=1;A<P;++A)j=B[A]/q[A-1],q[A]-=j,ne[A]-=j*ne[A-1];for(B[P-1]=ne[P-1]/q[P-1],A=P-2;A>=0;--A)B[A]=(ne[A]-B[A+1])/q[A];for(q[P-1]=(a[P]+B[P-1])/2,A=0;A<P-1;++A)q[A]=2*a[A+1]-B[A+1];return[B,q]}MonotoneX.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:monotone_point(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(a,A){var j=NaN;if(A=+A,(a=+a)!==this._x1||A!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(a,A):this._context.moveTo(a,A);break;case 1:this._point=2;break;case 2:this._point=3,monotone_point(this,slope2(this,j=slope3(this,a,A)),j);break;default:monotone_point(this,this._t0,j=slope3(this,a,A))}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=A,this._t0=j}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(a,A){MonotoneX.prototype.point.call(this,A,a)},ReflectContext.prototype={moveTo:function moveTo(a,A){this._context.moveTo(A,a)},closePath:function closePath(){this._context.closePath()},lineTo:function lineTo(a,A){this._context.lineTo(A,a)},bezierCurveTo:function bezierCurveTo(a,A,j,P,B,q){this._context.bezierCurveTo(A,a,P,j,q,B)}},Natural.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x=[],this._y=[]},lineEnd:function lineEnd(){var a=this._x,A=this._y,j=a.length;if(j)if(this._line?this._context.lineTo(a[0],A[0]):this._context.moveTo(a[0],A[0]),2===j)this._context.lineTo(a[1],A[1]);else for(var P=controlPoints(a),B=controlPoints(A),q=0,ne=1;ne<j;++q,++ne)this._context.bezierCurveTo(P[0][q],B[0][q],P[1][q],B[1][q],a[ne],A[ne]);(this._line||0!==this._line&&1===j)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function point(a,A){this._x.push(+a),this._y.push(+A)}};function Step(a,A){this._context=a,this._t=A}Step.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x=this._y=NaN,this._point=0},lineEnd:function lineEnd(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function point(a,A){switch(a=+a,A=+A,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,A):this._context.moveTo(a,A);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,A),this._context.lineTo(a,A);else{var j=this._x*(1-this._t)+a*this._t;this._context.lineTo(j,this._y),this._context.lineTo(j,A)}}this._x=a,this._y=A}};var Ut=Math.PI,zt=2*Ut,qt=zt-1e-6;function path_Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path_path(){return new path_Path}path_Path.prototype=path_path.prototype={constructor:path_Path,moveTo:function moveTo(a,A){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+A)},closePath:function closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function lineTo(a,A){this._+="L"+(this._x1=+a)+","+(this._y1=+A)},quadraticCurveTo:function quadraticCurveTo(a,A,j,P){this._+="Q"+ +a+","+ +A+","+(this._x1=+j)+","+(this._y1=+P)},bezierCurveTo:function bezierCurveTo(a,A,j,P,B,q){this._+="C"+ +a+","+ +A+","+ +j+","+ +P+","+(this._x1=+B)+","+(this._y1=+q)},arcTo:function arcTo(a,A,j,P,B){a=+a,A=+A,j=+j,P=+P,B=+B;var q=this._x1,ne=this._y1,ie=j-a,oe=P-A,se=q-a,le=ne-A,he=se*se+le*le;if(B<0)throw new Error("negative radius: "+B);if(null===this._x1)this._+="M"+(this._x1=a)+","+(this._y1=A);else if(he>1e-6)if(Math.abs(le*ie-oe*se)>1e-6&&B){var pe=j-q,ge=P-ne,me=ie*ie+oe*oe,ve=pe*pe+ge*ge,ye=Math.sqrt(me),_e=Math.sqrt(he),we=B*Math.tan((Ut-Math.acos((me+he-ve)/(2*ye*_e)))/2),ke=we/_e,Oe=we/ye;Math.abs(ke-1)>1e-6&&(this._+="L"+(a+ke*se)+","+(A+ke*le)),this._+="A"+B+","+B+",0,0,"+ +(le*pe>se*ge)+","+(this._x1=a+Oe*ie)+","+(this._y1=A+Oe*oe)}else this._+="L"+(this._x1=a)+","+(this._y1=A);else;},arc:function arc(a,A,j,P,B,q){a=+a,A=+A,q=!!q;var ne=(j=+j)*Math.cos(P),ie=j*Math.sin(P),oe=a+ne,se=A+ie,le=1^q,he=q?P-B:B-P;if(j<0)throw new Error("negative radius: "+j);null===this._x1?this._+="M"+oe+","+se:(Math.abs(this._x1-oe)>1e-6||Math.abs(this._y1-se)>1e-6)&&(this._+="L"+oe+","+se),j&&(he<0&&(he=he%zt+zt),he>qt?this._+="A"+j+","+j+",0,1,"+le+","+(a-ne)+","+(A-ie)+"A"+j+","+j+",0,1,"+le+","+(this._x1=oe)+","+(this._y1=se):he>1e-6&&(this._+="A"+j+","+j+",0,"+ +(he>=Ut)+","+le+","+(this._x1=a+j*Math.cos(B))+","+(this._y1=A+j*Math.sin(B))))},rect:function rect(a,A,j,P){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+A)+"h"+ +j+"v"+ +P+"h"+-j+"Z"},toString:function toString(){return this._}};var Wt=path_path,src_constant=function(a){return function constant(){return a}};function arcInnerRadius(a){return a.innerRadius}function arcOuterRadius(a){return a.outerRadius}function arcStartAngle(a){return a.startAngle}function arcEndAngle(a){return a.endAngle}function arcPadAngle(a){return a&&a.padAngle}function arc_intersect(a,A,j,P,B,q,ne,ie){var oe=j-a,se=P-A,le=ne-B,he=ie-q,pe=he*oe-le*se;if(!(pe*pe<1e-12))return[a+(pe=(le*(A-q)-he*(a-B))/pe)*oe,A+pe*se]}function cornerTangents(a,A,j,P,B,q,ne){var ie=a-j,oe=A-P,se=(ne?q:-q)/Pt(ie*ie+oe*oe),le=se*oe,he=-se*ie,pe=a+le,ge=A+he,me=j+le,ve=P+he,ye=(pe+me)/2,_e=(ge+ve)/2,we=me-pe,ke=ve-ge,Oe=we*we+ke*ke,Se=B-q,Te=pe*ve-me*ge,Ae=(ke<0?-1:1)*Pt(At(0,Se*Se*Oe-Te*Te)),je=(Te*ke-we*Ae)/Oe,Fe=(-Te*we-ke*Ae)/Oe,Re=(Te*ke+we*Ae)/Oe,Me=(-Te*we+ke*Ae)/Oe,Ne=je-ye,Be=Fe-_e,Ue=Re-ye,We=Me-_e;return Ne*Ne+Be*Be>Ue*Ue+We*We&&(je=Re,Fe=Me),{cx:je,cy:Fe,x01:-le,y01:-he,x11:je*(B/Se-1),y11:Fe*(B/Se-1)}}Array.prototype.slice;var src_array=function(a){return"object"===typeof a&&"length"in a?a:Array.from(a)};function point_x(a){return a[0]}function point_y(a){return a[1]}var src_line=function(a,A){var j=src_constant(!0),P=null,B=curve_linear,q=null;function line(ne){var ie,oe,se,le=(ne=src_array(ne)).length,he=!1;for(null==P&&(q=B(se=Wt())),ie=0;ie<=le;++ie)!(ie<le&&j(oe=ne[ie],ie,ne))===he&&((he=!he)?q.lineStart():q.lineEnd()),he&&q.point(+a(oe,ie,ne),+A(oe,ie,ne));if(se)return q=null,se+""||null}return a="function"===typeof a?a:void 0===a?point_x:src_constant(a),A="function"===typeof A?A:void 0===A?point_y:src_constant(A),line.x=function(A){return arguments.length?(a="function"===typeof A?A:src_constant(+A),line):a},line.y=function(a){return arguments.length?(A="function"===typeof a?a:src_constant(+a),line):A},line.defined=function(a){return arguments.length?(j="function"===typeof a?a:src_constant(!!a),line):j},line.curve=function(a){return arguments.length?(B=a,null!=P&&(q=B(P)),line):B},line.context=function(a){return arguments.length?(null==a?P=q=null:q=B(P=a),line):P},line},src_area=function(a,A,j){var P=null,B=src_constant(!0),q=null,ne=curve_linear,ie=null;function area(oe){var se,le,he,pe,ge,me=(oe=src_array(oe)).length,ve=!1,ye=new Array(me),_e=new Array(me);for(null==q&&(ie=ne(ge=Wt())),se=0;se<=me;++se){if(!(se<me&&B(pe=oe[se],se,oe))===ve)if(ve=!ve)le=se,ie.areaStart(),ie.lineStart();else{for(ie.lineEnd(),ie.lineStart(),he=se-1;he>=le;--he)ie.point(ye[he],_e[he]);ie.lineEnd(),ie.areaEnd()}ve&&(ye[se]=+a(pe,se,oe),_e[se]=+A(pe,se,oe),ie.point(P?+P(pe,se,oe):ye[se],j?+j(pe,se,oe):_e[se]))}if(ge)return ie=null,ge+""||null}function arealine(){return src_line().defined(B).curve(ne).context(q)}return a="function"===typeof a?a:void 0===a?point_x:src_constant(+a),A="function"===typeof A?A:src_constant(void 0===A?0:+A),j="function"===typeof j?j:void 0===j?point_y:src_constant(+j),area.x=function(A){return arguments.length?(a="function"===typeof A?A:src_constant(+A),P=null,area):a},area.x0=function(A){return arguments.length?(a="function"===typeof A?A:src_constant(+A),area):a},area.x1=function(a){return arguments.length?(P=null==a?null:"function"===typeof a?a:src_constant(+a),area):P},area.y=function(a){return arguments.length?(A="function"===typeof a?a:src_constant(+a),j=null,area):A},area.y0=function(a){return arguments.length?(A="function"===typeof a?a:src_constant(+a),area):A},area.y1=function(a){return arguments.length?(j=null==a?null:"function"===typeof a?a:src_constant(+a),area):j},area.lineX0=area.lineY0=function(){return arealine().x(a).y(A)},area.lineY1=function(){return arealine().x(a).y(j)},area.lineX1=function(){return arealine().x(P).y(A)},area.defined=function(a){return arguments.length?(B="function"===typeof a?a:src_constant(!!a),area):B},area.curve=function(a){return arguments.length?(ne=a,null!=q&&(ie=ne(q)),area):ne},area.context=function(a){return arguments.length?(null==a?q=ie=null:ie=ne(q=a),area):q},area},Ht={draw:function draw(a,A){var j=Math.sqrt(A/Rt);a.moveTo(j,0),a.arc(0,0,j,0,Lt)}},Gt=(Math.sqrt(1/3),Math.sin(Rt/10)/Math.sin(7*Rt/10));Math.sin(Lt/10),Math.cos(Lt/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);function domCanvas(a,A){if("undefined"!==typeof document&&document.createElement){var j=document.createElement("canvas");if(j&&j.getContext)return j.width=a,j.height=A,j}return null}var Vt=function domImage(){return"undefined"!==typeof Image?Image:null},Yt=Object(at.a)(Ye.a),$t=Yt.right,Kt=Yt.left,Xt=(Object(at.a)(number).center,$t);function initRange(a,A){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(A).domain(a)}return this}function initInterpolator(a,A){switch(arguments.length){case 0:break;case 1:"function"===typeof a?this.interpolator(a):this.range(a);break;default:this.domain(a),"function"===typeof A?this.interpolator(A):this.range(A)}return this}var Jt=Symbol("implicit");function ordinal(){var a=new Map,A=[],j=[],P=Jt;function scale(B){var q=B+"",ne=a.get(q);if(!ne){if(P!==Jt)return P;a.set(q,ne=A.push(B))}return j[(ne-1)%j.length]}return scale.domain=function(j){if(!arguments.length)return A.slice();A=[],a=new Map;var P,B=Object(We.a)(j);try{for(B.s();!(P=B.n()).done;){var q=P.value,ne=q+"";a.has(ne)||a.set(ne,A.push(q))}}catch(ie){B.e(ie)}finally{B.f()}return scale},scale.range=function(a){return arguments.length?(j=Array.from(a),scale):j.slice()},scale.unknown=function(a){return arguments.length?(P=a,scale):P},scale.copy=function(){return ordinal(A,j).unknown(P)},initRange.apply(scale,arguments),scale}var Qt=j(150),Zt=j(81),en=j(506),tn=j(242),nn=j(507),rn=j(508);function tickFormat_tickFormat(a,A,j,P){var B,q=Object(Qt.c)(a,A,j);switch((P=Object(Zt.a)(null==P?",f":P)).type){case"s":var ne=Math.max(Math.abs(a),Math.abs(A));return null!=P.precision||isNaN(B=Object(en.a)(q,ne))||(P.precision=B),Object(tn.b)(P,ne);case"":case"e":case"g":case"p":case"r":null!=P.precision||isNaN(B=Object(nn.a)(q,Math.max(Math.abs(a),Math.abs(A))))||(P.precision=B-("e"===P.type));break;case"f":case"%":null!=P.precision||isNaN(B=Object(rn.a)(q))||(P.precision=B-2*("%"===P.type))}return Object(tn.a)(P)}var define=function(a,A,j){a.prototype=A.prototype=j,j.constructor=a};function extend(a,A){var j=Object.create(a.prototype);for(var P in A)j[P]=A[P];return j}function Color(){}var an="\\s*([+-]?\\d+)\\s*",sn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",un="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ln=/^#([0-9a-f]{3,8})$/,cn=new RegExp("^rgb\\("+[an,an,an]+"\\)$"),dn=new RegExp("^rgb\\("+[un,un,un]+"\\)$"),hn=new RegExp("^rgba\\("+[an,an,an,sn]+"\\)$"),pn=new RegExp("^rgba\\("+[un,un,un,sn]+"\\)$"),gn=new RegExp("^hsl\\("+[sn,un,un]+"\\)$"),mn=new RegExp("^hsla\\("+[sn,un,un,sn]+"\\)$"),vn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color_color(a){var A,j;return a=(a+"").trim().toLowerCase(),(A=ln.exec(a))?(j=A[1].length,A=parseInt(A[1],16),6===j?rgbn(A):3===j?new Rgb(A>>8&15|A>>4&240,A>>4&15|240&A,(15&A)<<4|15&A,1):8===j?rgba(A>>24&255,A>>16&255,A>>8&255,(255&A)/255):4===j?rgba(A>>12&15|A>>8&240,A>>8&15|A>>4&240,A>>4&15|240&A,((15&A)<<4|15&A)/255):null):(A=cn.exec(a))?new Rgb(A[1],A[2],A[3],1):(A=dn.exec(a))?new Rgb(255*A[1]/100,255*A[2]/100,255*A[3]/100,1):(A=hn.exec(a))?rgba(A[1],A[2],A[3],A[4]):(A=pn.exec(a))?rgba(255*A[1]/100,255*A[2]/100,255*A[3]/100,A[4]):(A=gn.exec(a))?hsla(A[1],A[2]/100,A[3]/100,1):(A=mn.exec(a))?hsla(A[1],A[2]/100,A[3]/100,A[4]):vn.hasOwnProperty(a)?rgbn(vn[a]):"transparent"===a?new Rgb(NaN,NaN,NaN,0):null}function rgbn(a){return new Rgb(a>>16&255,a>>8&255,255&a,1)}function rgba(a,A,j,P){return P<=0&&(a=A=j=NaN),new Rgb(a,A,j,P)}function rgbConvert(a){return a instanceof Color||(a=color_color(a)),a?new Rgb((a=a.rgb()).r,a.g,a.b,a.opacity):new Rgb}function color_rgb(a,A,j,P){return 1===arguments.length?rgbConvert(a):new Rgb(a,A,j,null==P?1:P)}function Rgb(a,A,j,P){this.r=+a,this.g=+A,this.b=+j,this.opacity=+P}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}function hex(a){return((a=Math.max(0,Math.min(255,Math.round(a)||0)))<16?"0":"")+a.toString(16)}function hsla(a,A,j,P){return P<=0?a=A=j=NaN:j<=0||j>=1?a=A=NaN:A<=0&&(a=NaN),new Hsl(a,A,j,P)}function hslConvert(a){if(a instanceof Hsl)return new Hsl(a.h,a.s,a.l,a.opacity);if(a instanceof Color||(a=color_color(a)),!a)return new Hsl;if(a instanceof Hsl)return a;var A=(a=a.rgb()).r/255,j=a.g/255,P=a.b/255,B=Math.min(A,j,P),q=Math.max(A,j,P),ne=NaN,ie=q-B,oe=(q+B)/2;return ie?(ne=A===q?(j-P)/ie+6*(j<P):j===q?(P-A)/ie+2:(A-j)/ie+4,ie/=oe<.5?q+B:2-q-B,ne*=60):ie=oe>0&&oe<1?0:ne,new Hsl(ne,ie,oe,a.opacity)}function hsl(a,A,j,P){return 1===arguments.length?hslConvert(a):new Hsl(a,A,j,null==P?1:P)}function Hsl(a,A,j,P){this.h=+a,this.s=+A,this.l=+j,this.opacity=+P}function hsl2rgb(a,A,j){return 255*(a<60?A+(j-A)*a/60:a<180?j:a<240?A+(j-A)*(240-a)/60:A)}function basis_basis(a,A,j,P,B){var q=a*a,ne=q*a;return((1-3*a+3*q-ne)*A+(4-6*q+3*ne)*j+(1+3*a+3*q-3*ne)*P+ne*B)/6}define(Color,color_color,{copy:function copy(a){return Object.assign(new this.constructor,this,a)},displayable:function displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:function color_formatHsl(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),define(Rgb,color_rgb,extend(Color,{brighter:function brighter(a){return a=null==a?1/.7:Math.pow(1/.7,a),new Rgb(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function darker(a){return a=null==a?.7:Math.pow(.7,a),new Rgb(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function rgb(){return this},displayable:function displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),define(Hsl,hsl,extend(Color,{brighter:function brighter(a){return a=null==a?1/.7:Math.pow(1/.7,a),new Hsl(this.h,this.s,this.l*a,this.opacity)},darker:function darker(a){return a=null==a?.7:Math.pow(.7,a),new Hsl(this.h,this.s,this.l*a,this.opacity)},rgb:function rgb(){var a=this.h%360+360*(this.h<0),A=isNaN(a)||isNaN(this.s)?0:this.s,j=this.l,P=j+(j<.5?j:1-j)*A,B=2*j-P;return new Rgb(hsl2rgb(a>=240?a-240:a+120,B,P),hsl2rgb(a,B,P),hsl2rgb(a<120?a+240:a-120,B,P),this.opacity)},displayable:function displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function formatHsl(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}));var src_basis=function(a){var A=a.length-1;return function(j){var P=j<=0?j=0:j>=1?(j=1,A-1):Math.floor(j*A),B=a[P],q=a[P+1],ne=P>0?a[P-1]:2*B-q,ie=P<A-1?a[P+2]:2*q-B;return basis_basis((j-P/A)*A,ne,B,q,ie)}},src_basisClosed=function(a){var A=a.length;return function(j){var P=Math.floor(((j%=1)<0?++j:j)*A),B=a[(P+A-1)%A],q=a[P%A],ne=a[(P+1)%A],ie=a[(P+2)%A];return basis_basis((j-P/A)*A,B,q,ne,ie)}},d3_interpolate_src_constant=function(a){return function(){return a}};function color_linear(a,A){return function(j){return a+j*A}}function color_hue(a,A){var j=A-a;return j?color_linear(a,j>180||j<-180?j-360*Math.round(j/360):j):d3_interpolate_src_constant(isNaN(a)?A:a)}function color_gamma(a){return 1===(a=+a)?nogamma:function(A,j){return j-A?function exponential(a,A,j){return a=Math.pow(a,j),A=Math.pow(A,j)-a,j=1/j,function(P){return Math.pow(a+P*A,j)}}(A,j,a):d3_interpolate_src_constant(isNaN(A)?j:A)}}function nogamma(a,A){var j=A-a;return j?color_linear(a,j):d3_interpolate_src_constant(isNaN(a)?A:a)}var yn=function rgbGamma(a){var A=color_gamma(a);function rgb(a,j){var P=A((a=color_rgb(a)).r,(j=color_rgb(j)).r),B=A(a.g,j.g),q=A(a.b,j.b),ne=nogamma(a.opacity,j.opacity);return function(A){return a.r=P(A),a.g=B(A),a.b=q(A),a.opacity=ne(A),a+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(a){return function(A){var j,P,B=A.length,q=new Array(B),ne=new Array(B),ie=new Array(B);for(j=0;j<B;++j)P=color_rgb(A[j]),q[j]=P.r||0,ne[j]=P.g||0,ie[j]=P.b||0;return q=a(q),ne=a(ne),ie=a(ie),P.opacity=1,function(a){return P.r=q(a),P.g=ne(a),P.b=ie(a),P+""}}}var bn=rgbSpline(src_basis),_n=rgbSpline(src_basisClosed),numberArray=function(a,A){A||(A=[]);var j,P=a?Math.min(A.length,a.length):0,B=A.slice();return function(q){for(j=0;j<P;++j)B[j]=a[j]*(1-q)+A[j]*q;return B}};function isNumberArray(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}var d3_interpolate_src_array=function(a,A){return(isNumberArray(A)?numberArray:genericArray)(a,A)};function genericArray(a,A){var j,P=A?A.length:0,B=a?Math.min(P,a.length):0,q=new Array(B),ne=new Array(P);for(j=0;j<B;++j)q[j]=src_value(a[j],A[j]);for(;j<P;++j)ne[j]=A[j];return function(a){for(j=0;j<B;++j)ne[j]=q[j](a);return ne}}var date=function(a,A){var j=new Date;return a=+a,A=+A,function(P){return j.setTime(a*(1-P)+A*P),j}},src_number=function(a,A){return a=+a,A=+A,function(j){return a*(1-j)+A*j}},src_object=function(a,A){var j,P={},B={};for(j in null!==a&&"object"===typeof a||(a={}),null!==A&&"object"===typeof A||(A={}),A)j in a?P[j]=src_value(a[j],A[j]):B[j]=A[j];return function(a){for(j in P)B[j]=P[j](a);return B}},xn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wn=new RegExp(xn.source,"g");var string=function(a,A){var j,P,B,q=xn.lastIndex=wn.lastIndex=0,ne=-1,ie=[],oe=[];for(a+="",A+="";(j=xn.exec(a))&&(P=wn.exec(A));)(B=P.index)>q&&(B=A.slice(q,B),ie[ne]?ie[ne]+=B:ie[++ne]=B),(j=j[0])===(P=P[0])?ie[ne]?ie[ne]+=P:ie[++ne]=P:(ie[++ne]=null,oe.push({i:ne,x:src_number(j,P)})),q=wn.lastIndex;return q<A.length&&(B=A.slice(q),ie[ne]?ie[ne]+=B:ie[++ne]=B),ie.length<2?oe[0]?function one(a){return function(A){return a(A)+""}}(oe[0].x):function string_zero(a){return function(){return a}}(A):(A=oe.length,function(a){for(var j,P=0;P<A;++P)ie[(j=oe[P]).i]=j.x(a);return ie.join("")})},src_value=function(a,A){var j,P=typeof A;return null==A||"boolean"===P?d3_interpolate_src_constant(A):("number"===P?src_number:"string"===P?(j=color_color(A))?(A=j,yn):string:A instanceof color_color?yn:A instanceof Date?date:isNumberArray(A)?numberArray:Array.isArray(A)?genericArray:"function"!==typeof A.valueOf&&"function"!==typeof A.toString||isNaN(A)?src_object:src_number)(a,A)},src_round=function(a,A){return a=+a,A=+A,function(j){return Math.round(a*(1-j)+A*j)}};function number_number(a){return+a}var kn=[0,1];function identity(a){return a}function normalize(a,A){return(A-=a=+a)?function(j){return(j-a)/A}:function constant_constants(a){return function(){return a}}(isNaN(A)?NaN:.5)}function bimap(a,A,j){var P=a[0],B=a[1],q=A[0],ne=A[1];return B<P?(P=normalize(B,P),q=j(ne,q)):(P=normalize(P,B),q=j(q,ne)),function(a){return q(P(a))}}function polymap(a,A,j){var P=Math.min(a.length,A.length)-1,B=new Array(P),q=new Array(P),ne=-1;for(a[P]<a[0]&&(a=a.slice().reverse(),A=A.slice().reverse());++ne<P;)B[ne]=normalize(a[ne],a[ne+1]),q[ne]=j(A[ne],A[ne+1]);return function(A){var j=Xt(a,A,1,P)-1;return q[j](B[j](A))}}function copy(a,A){return A.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function transformer(){var a,A,j,P,B,q,ne=kn,ie=kn,oe=src_value,se=identity;function rescale(){var a=Math.min(ne.length,ie.length);return se!==identity&&(se=function clamper(a,A){var j;return a>A&&(j=a,a=A,A=j),function(j){return Math.max(a,Math.min(A,j))}}(ne[0],ne[a-1])),P=a>2?polymap:bimap,B=q=null,scale}function scale(A){return null==A||isNaN(A=+A)?j:(B||(B=P(ne.map(a),ie,oe)))(a(se(A)))}return scale.invert=function(j){return se(A((q||(q=P(ie,ne.map(a),src_number)))(j)))},scale.domain=function(a){return arguments.length?(ne=Array.from(a,number_number),rescale()):ne.slice()},scale.range=function(a){return arguments.length?(ie=Array.from(a),rescale()):ie.slice()},scale.rangeRound=function(a){return ie=Array.from(a),oe=src_round,rescale()},scale.clamp=function(a){return arguments.length?(se=!!a||identity,rescale()):se!==identity},scale.interpolate=function(a){return arguments.length?(oe=a,rescale()):oe},scale.unknown=function(a){return arguments.length?(j=a,scale):j},function(j,P){return a=j,A=P,rescale()}}function continuous(){return transformer()(identity,identity)}function linearish(a){var A=a.domain;return a.ticks=function(a){var j=A();return Object(Qt.a)(j[0],j[j.length-1],null==a?10:a)},a.tickFormat=function(a,j){var P=A();return tickFormat_tickFormat(P[0],P[P.length-1],null==a?10:a,j)},a.nice=function(j){null==j&&(j=10);var P,B,q=A(),ne=0,ie=q.length-1,oe=q[ne],se=q[ie],le=10;for(se<oe&&(B=oe,oe=se,se=B,B=ne,ne=ie,ie=B);le-- >0;){if((B=Object(Qt.b)(oe,se,j))===P)return q[ne]=oe,q[ie]=se,A(q);if(B>0)oe=Math.floor(oe/B)*B,se=Math.ceil(se/B)*B;else{if(!(B<0))break;oe=Math.ceil(oe*B)/B,se=Math.floor(se*B)/B}P=B}return a},a}function nice_nice(a,A){var j,P=0,B=(a=a.slice()).length-1,q=a[P],ne=a[B];return ne<q&&(j=P,P=B,B=j,j=q,q=ne,ne=j),a[P]=A.floor(q),a[B]=A.ceil(ne),a}function transformLog(a){return Math.log(a)}function transformExp(a){return Math.exp(a)}function transformLogn(a){return-Math.log(-a)}function transformExpn(a){return-Math.exp(-a)}function pow10(a){return isFinite(a)?+("1e"+a):a<0?0:a}function reflect(a){return function(A){return-a(-A)}}function loggish(a){var A,j,P=a(transformLog,transformExp),B=P.domain,q=10;function rescale(){return A=function logp(a){return a===Math.E?Math.log:10===a&&Math.log10||2===a&&Math.log2||(a=Math.log(a),function(A){return Math.log(A)/a})}(q),j=function powp(a){return 10===a?pow10:a===Math.E?Math.exp:function(A){return Math.pow(a,A)}}(q),B()[0]<0?(A=reflect(A),j=reflect(j),a(transformLogn,transformExpn)):a(transformLog,transformExp),P}return P.base=function(a){return arguments.length?(q=+a,rescale()):q},P.domain=function(a){return arguments.length?(B(a),rescale()):B()},P.ticks=function(a){var P,ne=B(),ie=ne[0],oe=ne[ne.length-1];(P=oe<ie)&&(pe=ie,ie=oe,oe=pe);var se,le,he,pe=A(ie),ge=A(oe),me=null==a?10:+a,ve=[];if(!(q%1)&&ge-pe<me){if(pe=Math.floor(pe),ge=Math.ceil(ge),ie>0){for(;pe<=ge;++pe)for(le=1,se=j(pe);le<q;++le)if(!((he=se*le)<ie)){if(he>oe)break;ve.push(he)}}else for(;pe<=ge;++pe)for(le=q-1,se=j(pe);le>=1;--le)if(!((he=se*le)<ie)){if(he>oe)break;ve.push(he)}2*ve.length<me&&(ve=Object(Qt.a)(ie,oe,me))}else ve=Object(Qt.a)(pe,ge,Math.min(ge-pe,me)).map(j);return P?ve.reverse():ve},P.tickFormat=function(a,B){if(null==B&&(B=10===q?".0e":","),"function"!==typeof B&&(B=Object(tn.a)(B)),a===1/0)return B;null==a&&(a=10);var ne=Math.max(1,q*a/P.ticks().length);return function(a){var P=a/j(Math.round(A(a)));return P*q<q-.5&&(P*=q),P<=ne?B(a):""}},P.nice=function(){return B(nice_nice(B(),{floor:function floor(a){return j(Math.floor(A(a)))},ceil:function ceil(a){return j(Math.ceil(A(a)))}}))},P}function transformPow(a){return function(A){return A<0?-Math.pow(-A,a):Math.pow(A,a)}}function transformSqrt(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function transformSquare(a){return a<0?-a*a:a*a}function powish(a){var A=a(identity,identity),j=1;function rescale(){return 1===j?a(identity,identity):.5===j?a(transformSqrt,transformSquare):a(transformPow(j),transformPow(1/j))}return A.exponent=function(a){return arguments.length?(j=+a,rescale()):j},linearish(A)}function pow_pow(){var a=powish(transformer());return a.copy=function(){return copy(a,pow_pow()).exponent(a.exponent())},initRange.apply(a,arguments),a}function transformSymlog(a){return function(A){return Math.sign(A)*Math.log1p(Math.abs(A/a))}}function transformSymexp(a){return function(A){return Math.sign(A)*Math.expm1(Math.abs(A))*a}}function symlogish(a){var A=1,j=a(transformSymlog(A),transformSymexp(A));return j.constant=function(j){return arguments.length?a(transformSymlog(A=+j),transformSymexp(A)):A},linearish(j)}var On=j(12),Sn=j(104),En=j(60),Cn=j(143),Tn=j(142),Dn=j(51),An=j(29),jn=j(103),Fn=j(53),Pn=j(145),Rn=j(144),Mn=j(52),Ln=j(30),In=j(105),Nn=j(54);function ticker(a,A,j,P,B,q){var ne=[[En.a,1,On.e],[En.a,5,5*On.e],[En.a,15,15*On.e],[En.a,30,30*On.e],[q,1,On.c],[q,5,5*On.c],[q,15,15*On.c],[q,30,30*On.c],[B,1,On.b],[B,3,3*On.b],[B,6,6*On.b],[B,12,12*On.b],[P,1,On.a],[P,2,2*On.a],[j,1,On.f],[A,1,On.d],[A,3,3*On.d],[a,1,On.g]];function tickInterval(A,j,P){var B=Math.abs(j-A)/P,q=Object(at.a)((function(a){return Object(Ve.a)(a,3)[2]})).right(ne,B);if(q===ne.length)return a.every(Object(Qt.c)(A/On.g,j/On.g,P));if(0===q)return Sn.a.every(Math.max(Object(Qt.c)(A,j,P),1));var ie=Object(Ve.a)(ne[B/ne[q-1][2]<ne[q][2]/B?q-1:q],2),oe=ie[0],se=ie[1];return oe.every(se)}return[function ticks(a,A,j){var P=A<a;if(P){var B=[A,a];a=B[0],A=B[1]}var q=j&&"function"===typeof j.range?j:tickInterval(a,A,j),ne=q?q.range(a,+A+1):[];return P?ne.reverse():ne},tickInterval]}var Bn=ticker(Nn.a,In.a,Ln.b,Mn.a,Rn.a,Pn.a),Un=Object(Ve.a)(Bn,2),zn=Un[0],qn=Un[1],Wn=ticker(Fn.a,jn.a,An.b,Dn.a,Tn.a,Cn.a),Hn=Object(Ve.a)(Wn,2),Gn=Hn[0],Vn=Hn[1],Yn=j(107);function time_date(a){return new Date(a)}function time_number(a){return a instanceof Date?+a:+new Date(+a)}function calendar(a,A,j,P,B,q,ne,ie,oe,se){var le=continuous(),he=le.invert,pe=le.domain,ge=se(".%L"),me=se(":%S"),ve=se("%I:%M"),ye=se("%I %p"),_e=se("%a %d"),we=se("%b %d"),ke=se("%B"),Oe=se("%Y");function tickFormat(a){return(oe(a)<a?ge:ie(a)<a?me:ne(a)<a?ve:q(a)<a?ye:P(a)<a?B(a)<a?_e:we:j(a)<a?ke:Oe)(a)}return le.invert=function(a){return new Date(he(a))},le.domain=function(a){return arguments.length?pe(Array.from(a,time_number)):pe().map(time_date)},le.ticks=function(A){var j=pe();return a(j[0],j[j.length-1],null==A?10:A)},le.tickFormat=function(a,A){return null==A?tickFormat:se(A)},le.nice=function(a){var j=pe();return a&&"function"===typeof a.range||(a=A(j[0],j[j.length-1],null==a?10:a)),a?pe(nice_nice(j,a)):le},le.copy=function(){return copy(le,calendar(a,A,j,P,B,q,ne,ie,oe,se))},le}function sequential_transformer(){var a,A,j,P,B,q=0,ne=1,ie=identity,oe=!1;function scale(A){return null==A||isNaN(A=+A)?B:ie(0===j?.5:(A=(P(A)-a)*j,oe?Math.max(0,Math.min(1,A)):A))}function range(a){return function(A){var j,P,B,q;return arguments.length?(j=A,B=(P=Object(Ve.a)(j,2))[0],q=P[1],ie=a(B,q),scale):[ie(0),ie(1)]}}return scale.domain=function(B){var ie,oe;return arguments.length?(ie=B,oe=Object(Ve.a)(ie,2),q=oe[0],ne=oe[1],a=P(q=+q),A=P(ne=+ne),j=a===A?0:1/(A-a),scale):[q,ne]},scale.clamp=function(a){return arguments.length?(oe=!!a,scale):oe},scale.interpolator=function(a){return arguments.length?(ie=a,scale):ie},scale.range=range(src_value),scale.rangeRound=range(src_round),scale.unknown=function(a){return arguments.length?(B=a,scale):B},function(B){return P=B,a=B(q),A=B(ne),j=a===A?0:1/(A-a),scale}}function sequential_copy(a,A){return A.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function sequential(){var a=linearish(sequential_transformer()(identity));return a.copy=function(){return sequential_copy(a,sequential())},initInterpolator.apply(a,arguments)}function sequentialPow(){var a=powish(sequential_transformer());return a.copy=function(){return sequential_copy(a,sequentialPow()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function piecewise_piecewise(a,A){void 0===A&&(A=a,a=src_value);for(var j=0,P=A.length-1,B=A[0],q=new Array(P<0?0:P);j<P;)q[j]=a(B,B=A[++j]);return function(a){var A=Math.max(0,Math.min(P-1,Math.floor(a*=P)));return q[A](a-A)}}function diverging_transformer(){var a,A,j,P,B,q,ne,ie=0,oe=.5,se=1,le=1,he=identity,pe=!1;function scale(a){return isNaN(a=+a)?ne:(a=.5+((a=+q(a))-A)*(le*a<le*A?P:B),he(pe?Math.max(0,Math.min(1,a)):a))}function range(a){return function(A){var j,P,B,q,ne;return arguments.length?(j=A,B=(P=Object(Ve.a)(j,3))[0],q=P[1],ne=P[2],he=piecewise_piecewise(a,[B,q,ne]),scale):[he(0),he(.5),he(1)]}}return scale.domain=function(ne){var he,pe;return arguments.length?(he=ne,pe=Object(Ve.a)(he,3),ie=pe[0],oe=pe[1],se=pe[2],a=q(ie=+ie),A=q(oe=+oe),j=q(se=+se),P=a===A?0:.5/(A-a),B=A===j?0:.5/(j-A),le=A<a?-1:1,scale):[ie,oe,se]},scale.clamp=function(a){return arguments.length?(pe=!!a,scale):pe},scale.interpolator=function(a){return arguments.length?(he=a,scale):he},scale.range=range(src_value),scale.rangeRound=range(src_round),scale.unknown=function(a){return arguments.length?(ne=a,scale):ne},function(ne){return q=ne,a=ne(ie),A=ne(oe),j=ne(se),P=a===A?0:.5/(A-a),B=A===j?0:.5/(j-A),le=A<a?-1:1,scale}}function divergingPow(){var a=powish(diverging_transformer());return a.copy=function(){return sequential_copy(a,divergingPow()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}var $n,discrete=function(a){var A=a.length;return function(j){return a[Math.max(0,Math.min(A-1,Math.floor(j*A)))]}},src_hue=function(a,A){var j=color_hue(+a,+A);return function(a){var A=j(a);return A-360*Math.floor(A/360)}},Kn=180/Math.PI,Xn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},decompose=function(a,A,j,P,B,q){var ne,ie,oe;return(ne=Math.sqrt(a*a+A*A))&&(a/=ne,A/=ne),(oe=a*j+A*P)&&(j-=a*oe,P-=A*oe),(ie=Math.sqrt(j*j+P*P))&&(j/=ie,P/=ie,oe/=ie),a*P<A*j&&(a=-a,A=-A,oe=-oe,ne=-ne),{translateX:B,translateY:q,rotate:Math.atan2(A,a)*Kn,skewX:Math.atan(oe)*Kn,scaleX:ne,scaleY:ie}};function interpolateTransform(a,A,j,P){function pop(a){return a.length?a.pop()+" ":""}return function(B,q){var ne=[],ie=[];return B=a(B),q=a(q),function translate(a,P,B,q,ne,ie){if(a!==B||P!==q){var oe=ne.push("translate(",null,A,null,j);ie.push({i:oe-4,x:src_number(a,B)},{i:oe-2,x:src_number(P,q)})}else(B||q)&&ne.push("translate("+B+A+q+j)}(B.translateX,B.translateY,q.translateX,q.translateY,ne,ie),function rotate(a,A,j,B){a!==A?(a-A>180?A+=360:A-a>180&&(a+=360),B.push({i:j.push(pop(j)+"rotate(",null,P)-2,x:src_number(a,A)})):A&&j.push(pop(j)+"rotate("+A+P)}(B.rotate,q.rotate,ne,ie),function skewX(a,A,j,B){a!==A?B.push({i:j.push(pop(j)+"skewX(",null,P)-2,x:src_number(a,A)}):A&&j.push(pop(j)+"skewX("+A+P)}(B.skewX,q.skewX,ne,ie),function scale(a,A,j,P,B,q){if(a!==j||A!==P){var ne=B.push(pop(B)+"scale(",null,",",null,")");q.push({i:ne-4,x:src_number(a,j)},{i:ne-2,x:src_number(A,P)})}else 1===j&&1===P||B.push(pop(B)+"scale("+j+","+P+")")}(B.scaleX,B.scaleY,q.scaleX,q.scaleY,ne,ie),B=q=null,function(a){for(var A,j=-1,P=ie.length;++j<P;)ne[(A=ie[j]).i]=A.x(a);return ne.join("")}}}var Jn=interpolateTransform((function parseCss(a){var A=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(a+"");return A.isIdentity?Xn:decompose(A.a,A.b,A.c,A.d,A.e,A.f)}),"px, ","px)","deg)"),Qn=interpolateTransform((function parseSvg(a){return null==a?Xn:($n||($n=document.createElementNS("http://www.w3.org/2000/svg","g")),$n.setAttribute("transform",a),(a=$n.transform.baseVal.consolidate())?(a=a.matrix,decompose(a.a,a.b,a.c,a.d,a.e,a.f)):Xn)}),", ",")",")");function zoom_cosh(a){return((a=Math.exp(a))+1/a)/2}var Zn=function zoomRho(a,A,j){function zoom(P,B){var q,ne,ie=P[0],oe=P[1],se=P[2],le=B[0],he=B[1],pe=B[2],ge=le-ie,me=he-oe,ve=ge*ge+me*me;if(ve<1e-12)ne=Math.log(pe/se)/a,q=function i(A){return[ie+A*ge,oe+A*me,se*Math.exp(a*A*ne)]};else{var ye=Math.sqrt(ve),_e=(pe*pe-se*se+j*ve)/(2*se*A*ye),we=(pe*pe-se*se-j*ve)/(2*pe*A*ye),ke=Math.log(Math.sqrt(_e*_e+1)-_e),Oe=Math.log(Math.sqrt(we*we+1)-we);ne=(Oe-ke)/a,q=function i(j){var P=j*ne,B=zoom_cosh(ke),q=se/(A*ye)*(B*function tanh(a){return((a=Math.exp(2*a))-1)/(a+1)}(a*P+ke)-function zoom_sinh(a){return((a=Math.exp(a))-1/a)/2}(ke));return[ie+q*ge,oe+q*me,se*B/zoom_cosh(a*P+ke)]}}return q.duration=1e3*ne*a/Math.SQRT2,q}return zoom.rho=function(a){var A=Math.max(.001,+a),j=A*A;return zoomRho(A,j,j*j)},zoom}(Math.SQRT2,2,4);function hsl_hsl(a){return function(A,j){var P=a((A=hsl(A)).h,(j=hsl(j)).h),B=nogamma(A.s,j.s),q=nogamma(A.l,j.l),ne=nogamma(A.opacity,j.opacity);return function(a){return A.h=P(a),A.s=B(a),A.l=q(a),A.opacity=ne(a),A+""}}}var er=hsl_hsl(color_hue),nr=hsl_hsl(nogamma),rr=Math.PI/180,ar=180/Math.PI;function labConvert(a){if(a instanceof Lab)return new Lab(a.l,a.a,a.b,a.opacity);if(a instanceof Hcl)return hcl2lab(a);a instanceof Rgb||(a=rgbConvert(a));var A,j,P=rgb2lrgb(a.r),B=rgb2lrgb(a.g),q=rgb2lrgb(a.b),ne=xyz2lab((.2225045*P+.7168786*B+.0606169*q)/1);return P===B&&B===q?A=j=ne:(A=xyz2lab((.4360747*P+.3850649*B+.1430804*q)/.96422),j=xyz2lab((.0139322*P+.0971045*B+.7141733*q)/.82521)),new Lab(116*ne-16,500*(A-ne),200*(ne-j),a.opacity)}function lab(a,A,j,P){return 1===arguments.length?labConvert(a):new Lab(a,A,j,null==P?1:P)}function Lab(a,A,j,P){this.l=+a,this.a=+A,this.b=+j,this.opacity=+P}function xyz2lab(a){return a>6/29*(6/29)*(6/29)?Math.pow(a,1/3):a/(6/29*3*(6/29))+4/29}function lab2xyz(a){return a>6/29?a*a*a:6/29*3*(6/29)*(a-4/29)}function lrgb2rgb(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function rgb2lrgb(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function hclConvert(a){if(a instanceof Hcl)return new Hcl(a.h,a.c,a.l,a.opacity);if(a instanceof Lab||(a=labConvert(a)),0===a.a&&0===a.b)return new Hcl(NaN,0<a.l&&a.l<100?0:NaN,a.l,a.opacity);var A=Math.atan2(a.b,a.a)*ar;return new Hcl(A<0?A+360:A,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function hcl(a,A,j,P){return 1===arguments.length?hclConvert(a):new Hcl(a,A,j,null==P?1:P)}function Hcl(a,A,j,P){this.h=+a,this.c=+A,this.l=+j,this.opacity=+P}function hcl2lab(a){if(isNaN(a.h))return new Lab(a.l,0,0,a.opacity);var A=a.h*rr;return new Lab(a.l,Math.cos(A)*a.c,Math.sin(A)*a.c,a.opacity)}function lab_lab(a,A){var j=nogamma((a=lab(a)).l,(A=lab(A)).l),P=nogamma(a.a,A.a),B=nogamma(a.b,A.b),q=nogamma(a.opacity,A.opacity);return function(A){return a.l=j(A),a.a=P(A),a.b=B(A),a.opacity=q(A),a+""}}function hcl_hcl(a){return function(A,j){var P=a((A=hcl(A)).h,(j=hcl(j)).h),B=nogamma(A.c,j.c),q=nogamma(A.l,j.l),ne=nogamma(A.opacity,j.opacity);return function(a){return A.h=P(a),A.c=B(a),A.l=q(a),A.opacity=ne(a),A+""}}}define(Lab,lab,extend(Color,{brighter:function brighter(a){return new Lab(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function darker(a){return new Lab(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function rgb(){var a=(this.l+16)/116,A=isNaN(this.a)?a:a+this.a/500,j=isNaN(this.b)?a:a-this.b/200;return new Rgb(lrgb2rgb(3.1338561*(A=.96422*lab2xyz(A))-1.6168667*(a=1*lab2xyz(a))-.4906146*(j=.82521*lab2xyz(j))),lrgb2rgb(-.9787684*A+1.9161415*a+.033454*j),lrgb2rgb(.0719453*A-.2289914*a+1.4052427*j),this.opacity)}})),define(Hcl,hcl,extend(Color,{brighter:function brighter(a){return new Hcl(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function darker(a){return new Hcl(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function rgb(){return hcl2lab(this).rgb()}}));var sr=hcl_hcl(color_hue),ur=hcl_hcl(nogamma),lr=-.29227,fr=1.97294,dr=-.90649*fr,hr=1.78277*fr,pr=-.6557636667999999;function cubehelixConvert(a){if(a instanceof Cubehelix)return new Cubehelix(a.h,a.s,a.l,a.opacity);a instanceof Rgb||(a=rgbConvert(a));var A=a.r/255,j=a.g/255,P=a.b/255,B=(pr*P+dr*A-hr*j)/(pr+dr-hr),q=P-B,ne=(fr*(j-B)-lr*q)/-.90649,ie=Math.sqrt(ne*ne+q*q)/(fr*B*(1-B)),oe=ie?Math.atan2(ne,q)*ar-120:NaN;return new Cubehelix(oe<0?oe+360:oe,ie,B,a.opacity)}function cubehelix_cubehelix(a,A,j,P){return 1===arguments.length?cubehelixConvert(a):new Cubehelix(a,A,j,null==P?1:P)}function Cubehelix(a,A,j,P){this.h=+a,this.s=+A,this.l=+j,this.opacity=+P}function src_cubehelix_cubehelix(a){return function cubehelixGamma(A){function cubehelix(j,P){var B=a((j=cubehelix_cubehelix(j)).h,(P=cubehelix_cubehelix(P)).h),q=nogamma(j.s,P.s),ne=nogamma(j.l,P.l),ie=nogamma(j.opacity,P.opacity);return function(a){return j.h=B(a),j.s=q(a),j.l=ne(Math.pow(a,A)),j.opacity=ie(a),j+""}}return A=+A,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}define(Cubehelix,cubehelix_cubehelix,extend(Color,{brighter:function brighter(a){return a=null==a?1/.7:Math.pow(1/.7,a),new Cubehelix(this.h,this.s,this.l*a,this.opacity)},darker:function darker(a){return a=null==a?.7:Math.pow(.7,a),new Cubehelix(this.h,this.s,this.l*a,this.opacity)},rgb:function rgb(){var a=isNaN(this.h)?0:(this.h+120)*rr,A=+this.l,j=isNaN(this.s)?0:this.s*A*(1-A),P=Math.cos(a),B=Math.sin(a);return new Rgb(255*(A+j*(-.14861*P+1.78277*B)),255*(A+j*(lr*P+-.90649*B)),255*(A+j*(fr*P)),this.opacity)}}));var gr,mr,vr=src_cubehelix_cubehelix(color_hue),yr=src_cubehelix_cubehelix(nogamma),src_quantize=function(a,A){for(var j=new Array(A),P=0;P<A;++P)j[P]=a(P/(A-1));return j};function bandSpace(a,A,j){var P=a-A+2*j;return a?P>0?P:1:0}var _r="log",xr="time",wr="utc",kr="continuous";function vega_scale_module_band(){var a,A,j=ordinal().unknown(void 0),P=j.domain,B=j.range,q=[0,1],ne=!1,ie=0,oe=0,se=.5;function rescale(){var j=P().length,le=q[1]<q[0],he=q[1-le],pe=bandSpace(j,ie,oe),ge=q[le-0];a=(he-ge)/(pe||1),ne&&(a=Math.floor(a)),ge+=(he-ge-a*(j-ie))*se,A=a*(1-ie),ne&&(ge=Math.round(ge),A=Math.round(A));var me=src_range(j).map((function(A){return ge+a*A}));return B(le?me.reverse():me)}return delete j.unknown,j.domain=function(a){return arguments.length?(P(a),rescale()):P()},j.range=function(a){return arguments.length?(q=[+a[0],+a[1]],rescale()):q.slice()},j.rangeRound=function(a){return q=[+a[0],+a[1]],ne=!0,rescale()},j.bandwidth=function(){return A},j.step=function(){return a},j.round=function(a){return arguments.length?(ne=!!a,rescale()):ne},j.padding=function(a){return arguments.length?(oe=Math.max(0,Math.min(1,a)),ie=oe,rescale()):ie},j.paddingInner=function(a){return arguments.length?(ie=Math.max(0,Math.min(1,a)),rescale()):ie},j.paddingOuter=function(a){return arguments.length?(oe=Math.max(0,Math.min(1,a)),rescale()):oe},j.align=function(a){return arguments.length?(se=Math.max(0,Math.min(1,a)),rescale()):se},j.invertRange=function(a){if(null!=a[0]&&null!=a[1]){var j,ne,ie,oe=q[1]<q[0],se=oe?B().reverse():B(),le=se.length-1,he=+a[0],pe=+a[1];if(he===he&&pe===pe&&(pe<he&&(ie=he,he=pe,pe=ie),!(pe<se[0]||he>q[1-oe])))return j=Math.max(0,$t(se,he)-1),ne=he===pe?j:$t(se,pe)-1,he-se[j]>A+1e-10&&++j,oe&&(ie=j,j=le-ne,ne=le-ie),j>ne?void 0:P().slice(j,ne+1)}},j.invert=function(a){var A=j.invertRange([a,a]);return A?A[0]:A},j.copy=function(){return vega_scale_module_band().domain(P()).range(q).round(ne).paddingInner(ie).paddingOuter(oe).align(se)},rescale()}var Or=Array.prototype.map;function vega_scale_module_numbers(a){return Or.call(a,ve.eb)}var Sr=Array.prototype.slice;var Er={};function vega_scale_module_create(a,A,j){var P=function scale(){var j=A();return j.invertRange||(j.invertRange=j.invert?function invertRange(a){return function(A){var j,P=A[0],B=A[1];return B<P&&(j=P,P=B,B=j),[a.invert(P),a.invert(B)]}}(j):j.invertExtent?function invertRangeExtent(a){return function(A){var j,P,B,q,ne=a.range(),ie=A[0],oe=A[1],se=-1;for(oe<ie&&(P=ie,ie=oe,oe=P),B=0,q=ne.length;B<q;++B)ne[B]>=ie&&ne[B]<=oe&&(se<0&&(se=B),j=B);if(!(se<0))return ie=a.invertExtent(ne[se]),oe=a.invertExtent(ne[j]),[void 0===ie[0]?ie[1]:ie[0],void 0===oe[1]?oe[0]:oe[1]]}}(j):void 0),j.type=a,j};return P.metadata=Object(ve.fb)(Object(ve.i)(j)),P}function vega_scale_module_scale(a,A,j){return arguments.length>1?(Er[a]=vega_scale_module_create(a,A,j),this):isValidScaleType(a)?Er[a]:void 0}function isValidScaleType(a){return Object(ve.w)(Er,a)}function hasType(a,A){var j=Er[a];return j&&j.metadata[A]}function isContinuous(a){return hasType(a,kr)}function isDiscrete(a){return hasType(a,"discrete")}function isDiscretizing(a){return hasType(a,"discretizing")}function isLogarithmic(a){return hasType(a,_r)}function isInterpolating(a){return hasType(a,"interpolating")}function isQuantile(a){return hasType(a,"quantile")}vega_scale_module_scale("identity",(function identity_identity(a){var A;function scale(a){return null==a||isNaN(a=+a)?A:a}return scale.invert=scale,scale.domain=scale.range=function(A){return arguments.length?(a=Array.from(A,number_number),scale):a.slice()},scale.unknown=function(a){return arguments.length?(A=a,scale):A},scale.copy=function(){return identity_identity(a).unknown(A)},a=arguments.length?Array.from(a,number_number):[0,1],linearish(scale)})),vega_scale_module_scale("linear",(function linear_linear(){var a=continuous();return a.copy=function(){return copy(a,linear_linear())},initRange.apply(a,arguments),linearish(a)}),kr),vega_scale_module_scale(_r,(function log_log(){var a=loggish(transformer()).domain([1,10]);return a.copy=function(){return copy(a,log_log()).base(a.base())},initRange.apply(a,arguments),a}),[kr,_r]),vega_scale_module_scale("pow",pow_pow,kr),vega_scale_module_scale("sqrt",(function pow_sqrt(){return pow_pow.apply(null,arguments).exponent(.5)}),kr),vega_scale_module_scale("symlog",(function symlog(){var a=symlogish(transformer());return a.copy=function(){return copy(a,symlog()).constant(a.constant())},initRange.apply(a,arguments)}),kr),vega_scale_module_scale(xr,(function time_time(){return initRange.apply(calendar(Gn,Vn,Fn.a,jn.a,An.b,Dn.a,Tn.a,Cn.a,En.a,Yn.a).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[kr,"temporal"]),vega_scale_module_scale(wr,(function utcTime(){return initRange.apply(calendar(zn,qn,Nn.a,In.a,Ln.b,Mn.a,Rn.a,Pn.a,En.a,Yn.c).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[kr,"temporal"]),vega_scale_module_scale("sequential",sequential,[kr,"interpolating"]),vega_scale_module_scale("".concat("sequential","-").concat("linear"),sequential,[kr,"interpolating"]),vega_scale_module_scale("".concat("sequential","-").concat(_r),(function sequentialLog(){var a=loggish(sequential_transformer()).domain([1,10]);return a.copy=function(){return sequential_copy(a,sequentialLog()).base(a.base())},initInterpolator.apply(a,arguments)}),[kr,"interpolating",_r]),vega_scale_module_scale("".concat("sequential","-").concat("pow"),sequentialPow,[kr,"interpolating"]),vega_scale_module_scale("".concat("sequential","-").concat("sqrt"),(function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}),[kr,"interpolating"]),vega_scale_module_scale("".concat("sequential","-").concat("symlog"),(function sequentialSymlog(){var a=symlogish(sequential_transformer());return a.copy=function(){return sequential_copy(a,sequentialSymlog()).constant(a.constant())},initInterpolator.apply(a,arguments)}),[kr,"interpolating"]),vega_scale_module_scale("".concat("diverging","-").concat("linear"),(function diverging(){var a=linearish(diverging_transformer()(identity));return a.copy=function(){return sequential_copy(a,diverging())},initInterpolator.apply(a,arguments)}),[kr,"interpolating"]),vega_scale_module_scale("".concat("diverging","-").concat(_r),(function divergingLog(){var a=loggish(diverging_transformer()).domain([.1,1,10]);return a.copy=function(){return sequential_copy(a,divergingLog()).base(a.base())},initInterpolator.apply(a,arguments)}),[kr,"interpolating",_r]),vega_scale_module_scale("".concat("diverging","-").concat("pow"),divergingPow,[kr,"interpolating"]),vega_scale_module_scale("".concat("diverging","-").concat("sqrt"),(function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}),[kr,"interpolating"]),vega_scale_module_scale("".concat("diverging","-").concat("symlog"),(function divergingSymlog(){var a=symlogish(diverging_transformer());return a.copy=function(){return sequential_copy(a,divergingSymlog()).constant(a.constant())},initInterpolator.apply(a,arguments)}),[kr,"interpolating"]),vega_scale_module_scale("quantile",(function quantile_quantile(){var a,A=[],j=[],P=[];function rescale(){var a=0,B=Math.max(1,j.length);for(P=new Array(B-1);++a<B;)P[a-1]=quantileSorted(A,a/B);return scale}function scale(A){return null==A||isNaN(A=+A)?a:j[Xt(P,A)]}return scale.invertExtent=function(a){var B=j.indexOf(a);return B<0?[NaN,NaN]:[B>0?P[B-1]:A[0],B<P.length?P[B]:A[A.length-1]]},scale.domain=function(a){if(!arguments.length)return A.slice();A=[];var j,P=Object(We.a)(a);try{for(P.s();!(j=P.n()).done;){var B=j.value;null==B||isNaN(B=+B)||A.push(B)}}catch(q){P.e(q)}finally{P.f()}return A.sort(Ye.a),rescale()},scale.range=function(a){return arguments.length?(j=Array.from(a),rescale()):j.slice()},scale.unknown=function(A){return arguments.length?(a=A,scale):a},scale.quantiles=function(){return P.slice()},scale.copy=function(){return quantile_quantile().domain(A).range(j).unknown(a)},initRange.apply(scale,arguments)}),["discretizing","quantile"]),vega_scale_module_scale("quantize",(function quantize(){var a,A=0,j=1,P=1,B=[.5],q=[0,1];function scale(A){return null!=A&&A<=A?q[Xt(B,A,0,P)]:a}function rescale(){var a=-1;for(B=new Array(P);++a<P;)B[a]=((a+1)*j-(a-P)*A)/(P+1);return scale}return scale.domain=function(a){var P,B;return arguments.length?(P=a,B=Object(Ve.a)(P,2),A=B[0],j=B[1],A=+A,j=+j,rescale()):[A,j]},scale.range=function(a){return arguments.length?(P=(q=Array.from(a)).length-1,rescale()):q.slice()},scale.invertExtent=function(a){var ne=q.indexOf(a);return ne<0?[NaN,NaN]:ne<1?[A,B[0]]:ne>=P?[B[P-1],j]:[B[ne-1],B[ne]]},scale.unknown=function(A){return arguments.length?(a=A,scale):scale},scale.thresholds=function(){return B.slice()},scale.copy=function(){return quantize().domain([A,j]).range(q).unknown(a)},initRange.apply(linearish(scale),arguments)}),"discretizing"),vega_scale_module_scale("threshold",(function threshold(){var a,A=[.5],j=[0,1],P=1;function scale(B){return null!=B&&B<=B?j[Xt(A,B,0,P)]:a}return scale.domain=function(a){return arguments.length?(A=Array.from(a),P=Math.min(A.length,j.length-1),scale):A.slice()},scale.range=function(a){return arguments.length?(j=Array.from(a),P=Math.min(A.length,j.length-1),scale):j.slice()},scale.invertExtent=function(a){var P=j.indexOf(a);return[A[P-1],A[P]]},scale.unknown=function(A){return arguments.length?(a=A,scale):a},scale.copy=function(){return threshold().domain(A).range(j).unknown(a)},initRange.apply(scale,arguments)}),"discretizing"),vega_scale_module_scale("bin-ordinal",(function scaleBinOrdinal(){var a=[],A=[];function scale(j){return null==j||j!==j?void 0:A[(Xt(a,j)-1)%A.length]}return scale.domain=function(A){return arguments.length?(a=vega_scale_module_numbers(A),scale):a.slice()},scale.range=function(a){return arguments.length?(A=Sr.call(a),scale):A.slice()},scale.tickFormat=function(A,j){return tickFormat_tickFormat(a[0],Object(ve.W)(a),null==A?10:A,j)},scale.copy=function(){return scaleBinOrdinal().domain(scale.domain()).range(scale.range())},scale}),["discrete","discretizing"]),vega_scale_module_scale("ordinal",ordinal,"discrete"),vega_scale_module_scale("band",vega_scale_module_band,"discrete"),vega_scale_module_scale("point",(function vega_scale_module_point(){return function pointish(a){var A=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,a.copy=function(){return pointish(A())},a}(vega_scale_module_band().paddingInner(1))}),"discrete");var Cr=["clamp","base","constant","exponent"];function interpolateRange(a,A){var j=A[0],P=Object(ve.W)(A)-j;return function(A){return a(j+A*P)}}function interpolateColors(a,A,j){return piecewise_piecewise(vega_scale_module_interpolate(A||"rgb",j),a)}function quantizeInterpolator(a,A){for(var j=new Array(A),P=A+1,B=0;B<A;)j[B]=a(++B/P);return j}function scaleFraction(a,A,j){var P,B,q,ne=j-A;return ne&&Number.isFinite(ne)?(P=(B=a.type).indexOf("-"),B=P<0?B:B.slice(P+1),q=vega_scale_module_scale(B)().domain([A,j]).range([0,1]),Cr.forEach((function(A){return a[A]?q[A](a[A]()):0})),q):Object(ve.m)(.5)}function vega_scale_module_interpolate(a,A){var j=B[function vega_scale_module_method(a){return"interpolate"+a.toLowerCase().split("-").map((function(a){return a[0].toUpperCase()+a.slice(1)})).join("")}(a)];return null!=A&&j&&j.gamma?j.gamma(A):j}function vega_scale_module_colors(a){for(var A=a.length/6|0,j=new Array(A),P=0;P<A;)j[P]="#"+a.slice(6*P,6*++P);return j}function vega_scale_module_apply(a,A){for(var j in a)vega_scale_module_scheme(j,A(a[j]))}var Tr={};function vega_scale_module_scheme(a,A){return a=a&&a.toLowerCase(),arguments.length>1?(Tr[a]=A,this):Tr[a]}vega_scale_module_apply({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},vega_scale_module_colors),vega_scale_module_apply({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(a){return interpolateColors(vega_scale_module_colors(a))}));var Dr=function defaultFormatter(a){return Object(ve.B)(a)?a.map((function(a){return String(a)})):String(a)},Ar=function ascending(a,A){return a[1]-A[1]},jr=function descending(a,A){return A[1]-a[1]};function tickCount(a,A,j){var P;return Object(ve.G)(A)&&(a.bins&&(A=Math.max(A,a.bins.length)),null!=j&&(A=Math.min(A,Math.floor(Object(ve.Z)(a.domain())/j||1)))),Object(ve.H)(A)&&(P=A.step,A=A.interval),Object(ve.J)(A)&&(A=a.type===xr?Object(ot.p)(A):a.type==wr?Object(ot.v)(A):Object(ve.o)("Only time and utc scales accept interval strings."),P&&(A=A.every(P))),A}function validTicks(a,A,j){var P=a.range(),B=P[0],q=Object(ve.W)(P),ne=Ar;if(B>q&&(P=q,q=B,B=P,ne=jr),B=Math.floor(B),q=Math.ceil(q),A=A.map((function(A){return[A,a(A)]})).filter((function(a){return B<=a[1]&&a[1]<=q})).sort(ne).map((function(a){return a[0]})),j>0&&A.length>1){for(var ie=[A[0],Object(ve.W)(A)];A.length>j&&A.length>=3;)A=A.filter((function(a,A){return!(A%2)}));A.length<3&&(A=ie)}return A}function tickValues(a,A){return a.bins?validTicks(a,a.bins):a.ticks?a.ticks(A):a.domain()}function vega_scale_module_tickFormat(a,A,j,P,B,q){var ne=A.type,ie=Dr;if(ne===xr||B===xr)ie=a.timeFormat(P);else if(ne===wr||B===wr)ie=a.utcFormat(P);else if(isLogarithmic(ne)){var oe=a.formatFloat(P);if(q||A.bins)ie=oe;else{var se=tickLog(A,j,!1);ie=function format(a){return se(a)?oe(a):""}}}else if(A.tickFormat){var le=A.domain();ie=a.formatSpan(le[0],le[le.length-1],j,P)}else P&&(ie=a.format(P));return ie}function tickLog(a,A,j){var P=tickValues(a,A),B=a.base(),q=Math.log(B),ne=Math.max(1,B*A/P.length),ie=function test(a){var A=a/Math.pow(B,Math.round(Math.log(a)/q));return A*B<B-.5&&(A*=B),A<=ne};return j?P.filter(ie):ie}var Fr=(gr={},Object(wt.a)(gr,"quantile","quantiles"),Object(wt.a)(gr,"quantize","thresholds"),Object(wt.a)(gr,"threshold","domain"),gr),Pr=(mr={},Object(wt.a)(mr,"quantile","quantiles"),Object(wt.a)(mr,"quantize","domain"),mr);function labelValues(a,A){return a.bins?function binValues(a){var A=a.slice(0,-1);return A.max=Object(ve.W)(a),A}(a.bins):a.type===_r?tickLog(a,A,!0):Fr[a.type]?function thresholdValues(a){var A=[-1/0].concat(a);return A.max=1/0,A}(a[Fr[a.type]]()):tickValues(a,A)}function labelFormat(a,A,j,P,B,q,ne){var ie=Pr[A.type]&&q!==xr&&q!==wr?function thresholdFormat(a,A,j){var P,B=A[Pr[A.type]](),q=B.length,ne=q>1?B[1]-B[0]:B[0];for(P=1;P<q;++P)ne=Math.min(ne,B[P]-B[P-1]);return a.formatSpan(0,ne,30,j)}(a,A,B):vega_scale_module_tickFormat(a,A,j,B,q,ne);return"symbol"===P&&function isDiscreteRange(a){return Fr[a.type]||a.bins}(A)?Rr(ie):"discrete"===P?Lr(ie):Ir(ie)}var Rr=function formatRange(a){return function(A,j,P){var B=Mr(P[j+1],Mr(P.max,1/0)),q=Nr(A,a),ne=Nr(B,a);return q&&ne?q+" \u2013 "+ne:ne?"< "+ne:"\u2265 "+q}},Mr=function get(a,A){return null!=a?a:A},Lr=function formatDiscrete(a){return function(A,j){return j?a(A):null}},Ir=function formatPoint(a){return function(A){return a(A)}},Nr=function formatValue(a,A){return Number.isFinite(a)?A(a):null};function vega_scale_module_format(a,A,j,P){var B=P||A.type;return Object(ve.J)(j)&&function isTemporal(a){return hasType(a,"temporal")}(B)&&(j=j.replace(/%a/g,"%A").replace(/%b/g,"%B")),j||B!==xr?j||B!==wr?labelFormat(a,A,5,null,j,P,!0):a.utcFormat("%A, %d %B %Y, %X UTC"):a.timeFormat("%A, %d %B %Y, %X")}function domainCaption(a,A,j){j=j||{};var P=Math.max(3,j.maxlen||7),B=vega_scale_module_format(a,A,j.format,j.formatType);if(isDiscretizing(A.type)){var q=labelValues(A).slice(1).map(B),ne=q.length;return"".concat(ne," boundar").concat(1===ne?"y":"ies",": ").concat(q.join(", "))}if(isDiscrete(A.type)){var ie=A.domain(),oe=ie.length,se=oe>P?ie.slice(0,P-2).map(B).join(", ")+", ending with "+ie.slice(-1).map(B):ie.map(B).join(", ");return"".concat(oe," value").concat(1===oe?"":"s",": ").concat(se)}var le=A.domain();return"values from ".concat(B(le[0])," to ").concat(B(Object(ve.W)(le)))}var Br=0;function isGradient(a){return a&&a.gradient}function gradientRef(a,A,j){var P=a.gradient,B=a.id,q="radial"===P?"p_":"";return B||(B=a.id="gradient_"+Br++,"radial"===P?(a.x1=vega_scenegraph_module_get(a.x1,.5),a.y1=vega_scenegraph_module_get(a.y1,.5),a.r1=vega_scenegraph_module_get(a.r1,0),a.x2=vega_scenegraph_module_get(a.x2,.5),a.y2=vega_scenegraph_module_get(a.y2,.5),a.r2=vega_scenegraph_module_get(a.r2,.5),q="p_"):(a.x1=vega_scenegraph_module_get(a.x1,0),a.y1=vega_scenegraph_module_get(a.y1,0),a.x2=vega_scenegraph_module_get(a.x2,1),a.y2=vega_scenegraph_module_get(a.y2,0))),A[B]=a,"url("+(j||"")+"#"+q+B+")"}function vega_scenegraph_module_get(a,A){return null!=a?a:A}function Gradient(a,A){var j,P=[];return j={gradient:"linear",x1:a?a[0]:0,y1:a?a[1]:0,x2:A?A[0]:1,y2:A?A[1]:0,stops:P,stop:function stop(a,A){return P.push({offset:a,color:A}),j}}}var Ur={basis:{curve:function(a){return new Basis(a)}},"basis-closed":{curve:function(a){return new BasisClosed(a)}},"basis-open":{curve:function(a){return new BasisOpen(a)}},bundle:{curve:kt,tension:"beta",value:.85},cardinal:{curve:Ot,tension:"tension",value:0},"cardinal-open":{curve:St,tension:"tension",value:0},"cardinal-closed":{curve:Et,tension:"tension",value:0},"catmull-rom":{curve:It,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Nt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Bt,tension:"alpha",value:.5},linear:{curve:curve_linear},"linear-closed":{curve:function(a){return new LinearClosed(a)}},monotone:{horizontal:function monotoneY(a){return new MonotoneY(a)},vertical:function monotoneX(a){return new MonotoneX(a)}},natural:{curve:function(a){return new Natural(a)}},step:{curve:function(a){return new Step(a,.5)}},"step-after":{curve:function stepAfter(a){return new Step(a,1)}},"step-before":{curve:function stepBefore(a){return new Step(a,0)}}};function curves(a,A,j){var P=Object(ve.w)(Ur,a)&&Ur[a],B=null;return P&&(B=P.curve||P[A||"vertical"],P.tension&&null!=j&&(B=B[P.tension](j))),B}var zr={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},qr=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function pathParse(a){var A,j,P,B,q,ne,ie,oe,se,le,he=[],pe=a.slice().replace(qr[0],"###$1").split(qr[1]).slice(1);for(ie=0,se=pe.length;ie<se;++ie){for(j=(A=pe[ie]).slice(1).trim().replace(qr[2],"$1###$2").replace(qr[3],"$1###$2").split(qr[4]),P=[q=A.charAt(0)],oe=0,le=j.length;oe<le;++oe)(B=+j[oe])===B&&P.push(B);if(ne=zr[q.toLowerCase()],P.length-1>ne){var ge=P.length;for(oe=1,he.push([q].concat(P.slice(oe,oe+=ne))),q="M"===q?"L":"m"===q?"l":q;oe<ge;oe+=ne)he.push([q].concat(P.slice(oe,oe+ne)))}else he.push(P)}return he}var Wr=Math.PI/180,Hr=Math.PI/2,Gr=2*Math.PI,Vr=Math.sqrt(3)/2,Yr={},$r={},Kr=[].join;function bezier(a){var A=Kr.call(a);if($r[A])return $r[A];var j=a[0],P=a[1],B=a[2],q=a[3],ne=a[4],ie=a[5],oe=a[6],se=a[7],le=se*ne,he=-oe*ie,pe=oe*ne,ge=se*ie,me=Math.cos(B),ve=Math.sin(B),ye=Math.cos(q),_e=Math.sin(q),we=.5*(q-B),ke=Math.sin(.5*we),Oe=8/3*ke*ke/Math.sin(we),Se=j+me-Oe*ve,Te=P+ve+Oe*me,Ae=j+ye,je=P+_e,Fe=Ae+Oe*_e,Re=je-Oe*ye;return $r[A]=[le*Se+he*Te,pe*Se+ge*Te,le*Fe+he*Re,pe*Fe+ge*Re,le*Ae+he*je,pe*Ae+ge*je]}var Xr=["l",0,0,0,0,0,0,0];function vega_scenegraph_module_scale$1(a,A,j){var P=Xr[0]=a[0];if("a"===P||"A"===P)Xr[1]=A*a[1],Xr[2]=j*a[2],Xr[3]=a[3],Xr[4]=a[4],Xr[5]=a[5],Xr[6]=A*a[6],Xr[7]=j*a[7];else if("h"===P||"H"===P)Xr[1]=A*a[1];else if("v"===P||"V"===P)Xr[1]=j*a[1];else for(var B=1,q=a.length;B<q;++B)Xr[B]=(B%2==1?A:j)*a[B];return Xr}function pathRender(a,A,j,P,B,q){var ne,ie,oe,se,le,he=null,pe=0,ge=0,me=0,ve=0;null==j&&(j=0),null==P&&(P=0),null==B&&(B=1),null==q&&(q=B),a.beginPath&&a.beginPath();for(var ye=0,_e=A.length;ye<_e;++ye){switch(ne=A[ye],1===B&&1===q||(ne=vega_scenegraph_module_scale$1(ne,B,q)),ne[0]){case"l":pe+=ne[1],ge+=ne[2],a.lineTo(pe+j,ge+P);break;case"L":pe=ne[1],ge=ne[2],a.lineTo(pe+j,ge+P);break;case"h":pe+=ne[1],a.lineTo(pe+j,ge+P);break;case"H":pe=ne[1],a.lineTo(pe+j,ge+P);break;case"v":ge+=ne[1],a.lineTo(pe+j,ge+P);break;case"V":ge=ne[1],a.lineTo(pe+j,ge+P);break;case"m":pe+=ne[1],ge+=ne[2],a.moveTo(pe+j,ge+P);break;case"M":pe=ne[1],ge=ne[2],a.moveTo(pe+j,ge+P);break;case"c":ie=pe+ne[5],oe=ge+ne[6],me=pe+ne[3],ve=ge+ne[4],a.bezierCurveTo(pe+ne[1]+j,ge+ne[2]+P,me+j,ve+P,ie+j,oe+P),pe=ie,ge=oe;break;case"C":pe=ne[5],ge=ne[6],me=ne[3],ve=ne[4],a.bezierCurveTo(ne[1]+j,ne[2]+P,me+j,ve+P,pe+j,ge+P);break;case"s":ie=pe+ne[3],oe=ge+ne[4],me=2*pe-me,ve=2*ge-ve,a.bezierCurveTo(me+j,ve+P,pe+ne[1]+j,ge+ne[2]+P,ie+j,oe+P),me=pe+ne[1],ve=ge+ne[2],pe=ie,ge=oe;break;case"S":ie=ne[3],oe=ne[4],me=2*pe-me,ve=2*ge-ve,a.bezierCurveTo(me+j,ve+P,ne[1]+j,ne[2]+P,ie+j,oe+P),pe=ie,ge=oe,me=ne[1],ve=ne[2];break;case"q":ie=pe+ne[3],oe=ge+ne[4],me=pe+ne[1],ve=ge+ne[2],a.quadraticCurveTo(me+j,ve+P,ie+j,oe+P),pe=ie,ge=oe;break;case"Q":ie=ne[3],oe=ne[4],a.quadraticCurveTo(ne[1]+j,ne[2]+P,ie+j,oe+P),pe=ie,ge=oe,me=ne[1],ve=ne[2];break;case"t":ie=pe+ne[1],oe=ge+ne[2],null===he[0].match(/[QqTt]/)?(me=pe,ve=ge):"t"===he[0]?(me=2*pe-se,ve=2*ge-le):"q"===he[0]&&(me=2*pe-me,ve=2*ge-ve),se=me,le=ve,a.quadraticCurveTo(me+j,ve+P,ie+j,oe+P),ge=oe,me=(pe=ie)+ne[1],ve=ge+ne[2];break;case"T":ie=ne[1],oe=ne[2],me=2*pe-me,ve=2*ge-ve,a.quadraticCurveTo(me+j,ve+P,ie+j,oe+P),pe=ie,ge=oe;break;case"a":drawArc(a,pe+j,ge+P,[ne[1],ne[2],ne[3],ne[4],ne[5],ne[6]+pe+j,ne[7]+ge+P]),pe+=ne[6],ge+=ne[7];break;case"A":drawArc(a,pe+j,ge+P,[ne[1],ne[2],ne[3],ne[4],ne[5],ne[6]+j,ne[7]+P]),pe=ne[6],ge=ne[7];break;case"z":case"Z":a.closePath()}he=ne}}function drawArc(a,A,j,P){for(var B=function vega_scenegraph_module_segments(a,A,j,P,B,q,ne,ie,oe){var se=Kr.call(arguments);if(Yr[se])return Yr[se];var le=ne*Wr,he=Math.sin(le),pe=Math.cos(le),ge=pe*(ie-a)*.5+he*(oe-A)*.5,me=pe*(oe-A)*.5-he*(ie-a)*.5,ve=ge*ge/((j=Math.abs(j))*j)+me*me/((P=Math.abs(P))*P);ve>1&&(j*=ve=Math.sqrt(ve),P*=ve);var ye=pe/j,_e=he/j,we=-he/P,ke=pe/P,Oe=ye*ie+_e*oe,Se=we*ie+ke*oe,Te=ye*a+_e*A,Ae=we*a+ke*A,je=(Te-Oe)*(Te-Oe)+(Ae-Se)*(Ae-Se),Fe=1/je-.25;Fe<0&&(Fe=0);var Re=Math.sqrt(Fe);q==B&&(Re=-Re);var Me=.5*(Oe+Te)-Re*(Ae-Se),Ne=.5*(Se+Ae)+Re*(Te-Oe),Be=Math.atan2(Se-Ne,Oe-Me),Ue=Math.atan2(Ae-Ne,Te-Me),We=Ue-Be;We<0&&1===q?We+=Gr:We>0&&0===q&&(We-=Gr);for(var Ve=Math.ceil(Math.abs(We/(Hr+.001))),Ye=[],$e=0;$e<Ve;++$e){var Xe=Be+$e*We/Ve,et=Be+($e+1)*We/Ve;Ye[$e]=[Me,Ne,Xe,et,j,P,he,pe]}return Yr[se]=Ye}(P[5],P[6],P[0],P[1],P[3],P[4],P[2],A,j),q=0;q<B.length;++q){var ne=bezier(B[q]);a.bezierCurveTo(ne[0],ne[1],ne[2],ne[3],ne[4],ne[5])}}var Jr=.5773502691896257,Qr={circle:{draw:function draw(a,A){var j=Math.sqrt(A)/2;a.moveTo(j,0),a.arc(0,0,j,0,Gr)}},cross:{draw:function draw(a,A){var j=Math.sqrt(A)/2,P=j/2.5;a.moveTo(-j,-P),a.lineTo(-j,P),a.lineTo(-P,P),a.lineTo(-P,j),a.lineTo(P,j),a.lineTo(P,P),a.lineTo(j,P),a.lineTo(j,-P),a.lineTo(P,-P),a.lineTo(P,-j),a.lineTo(-P,-j),a.lineTo(-P,-P),a.closePath()}},diamond:{draw:function draw(a,A){var j=Math.sqrt(A)/2;a.moveTo(-j,0),a.lineTo(0,-j),a.lineTo(j,0),a.lineTo(0,j),a.closePath()}},square:{draw:function draw(a,A){var j=Math.sqrt(A),P=-j/2;a.rect(P,P,j,j)}},arrow:{draw:function draw(a,A){var j=Math.sqrt(A)/2,P=j/7,B=j/2.5,q=j/8;a.moveTo(-P,j),a.lineTo(P,j),a.lineTo(P,-q),a.lineTo(B,-q),a.lineTo(0,-j),a.lineTo(-B,-q),a.lineTo(-P,-q),a.closePath()}},wedge:{draw:function draw(a,A){var j=Math.sqrt(A)/2,P=Vr*j,B=P-j*Jr,q=j/4;a.moveTo(0,-P-B),a.lineTo(-q,P-B),a.lineTo(q,P-B),a.closePath()}},triangle:{draw:function draw(a,A){var j=Math.sqrt(A)/2,P=Vr*j,B=P-j*Jr;a.moveTo(0,-P-B),a.lineTo(-j,P-B),a.lineTo(j,P-B),a.closePath()}},"triangle-up":{draw:function draw(a,A){var j=Math.sqrt(A)/2,P=Vr*j;a.moveTo(0,-P),a.lineTo(-j,P),a.lineTo(j,P),a.closePath()}},"triangle-down":{draw:function draw(a,A){var j=Math.sqrt(A)/2,P=Vr*j;a.moveTo(0,P),a.lineTo(-j,-P),a.lineTo(j,-P),a.closePath()}},"triangle-right":{draw:function draw(a,A){var j=Math.sqrt(A)/2,P=Vr*j;a.moveTo(P,0),a.lineTo(-P,-j),a.lineTo(-P,j),a.closePath()}},"triangle-left":{draw:function draw(a,A){var j=Math.sqrt(A)/2,P=Vr*j;a.moveTo(-P,0),a.lineTo(P,-j),a.lineTo(P,j),a.closePath()}},stroke:{draw:function draw(a,A){var j=Math.sqrt(A)/2;a.moveTo(-j,0),a.lineTo(j,0)}}};function vega_scenegraph_module_symbols(a){return Object(ve.w)(Qr,a)?Qr[a]:function customSymbol(a){if(!Object(ve.w)(Zr,a)){var A=pathParse(a);Zr[a]={draw:function draw(a,j){pathRender(a,A,0,0,Math.sqrt(j)/2)}}}return Zr[a]}(a)}var Zr={};function rectangleX(a){return a.x}function rectangleY(a){return a.y}function rectangleWidth(a){return a.width}function rectangleHeight(a){return a.height}function vega_scenegraph_module_number(a){return"function"===typeof a?a:function(){return+a}}function vega_scenegraph_module_clamp(a,A,j){return Math.max(A,Math.min(a,j))}function vg_rect(){var a=rectangleX,A=rectangleY,j=rectangleWidth,P=rectangleHeight,B=vega_scenegraph_module_number(0),q=B,ne=B,ie=B,oe=null;function rectangle(se,le,he){var pe,ge=null!=le?le:+a.call(this,se),me=null!=he?he:+A.call(this,se),ve=+j.call(this,se),ye=+P.call(this,se),_e=Math.min(ve,ye)/2,we=vega_scenegraph_module_clamp(+B.call(this,se),0,_e),ke=vega_scenegraph_module_clamp(+q.call(this,se),0,_e),Oe=vega_scenegraph_module_clamp(+ne.call(this,se),0,_e),Se=vega_scenegraph_module_clamp(+ie.call(this,se),0,_e);if(oe||(oe=pe=Wt()),we<=0&&ke<=0&&Oe<=0&&Se<=0)oe.rect(ge,me,ve,ye);else{var Te=ge+ve,Ae=me+ye;oe.moveTo(ge+we,me),oe.lineTo(Te-ke,me),oe.bezierCurveTo(Te-.448084975506*ke,me,Te,me+.448084975506*ke,Te,me+ke),oe.lineTo(Te,Ae-Se),oe.bezierCurveTo(Te,Ae-.448084975506*Se,Te-.448084975506*Se,Ae,Te-Se,Ae),oe.lineTo(ge+Oe,Ae),oe.bezierCurveTo(ge+.448084975506*Oe,Ae,ge,Ae-.448084975506*Oe,ge,Ae-Oe),oe.lineTo(ge,me+we),oe.bezierCurveTo(ge,me+.448084975506*we,ge+.448084975506*we,me,ge+we,me),oe.closePath()}if(pe)return oe=null,pe+""||null}return rectangle.x=function(A){return arguments.length?(a=vega_scenegraph_module_number(A),rectangle):a},rectangle.y=function(a){return arguments.length?(A=vega_scenegraph_module_number(a),rectangle):A},rectangle.width=function(a){return arguments.length?(j=vega_scenegraph_module_number(a),rectangle):j},rectangle.height=function(a){return arguments.length?(P=vega_scenegraph_module_number(a),rectangle):P},rectangle.cornerRadius=function(a,A,j,P){return arguments.length?(B=vega_scenegraph_module_number(a),q=null!=A?vega_scenegraph_module_number(A):B,ie=null!=j?vega_scenegraph_module_number(j):B,ne=null!=P?vega_scenegraph_module_number(P):q,rectangle):B},rectangle.context=function(a){return arguments.length?(oe=null==a?null:a,rectangle):oe},rectangle}function vg_trail(){var a,A,j,P,B,q,ne,ie,oe=null;function point(a,A,j){var P=j/2;if(B){var se=ne-A,le=a-q;if(se||le){var he=Math.sqrt(se*se+le*le),pe=(se/=he)*ie,ge=(le/=he)*ie,me=Math.atan2(le,se);oe.moveTo(q-pe,ne-ge),oe.lineTo(a-se*P,A-le*P),oe.arc(a,A,P,me-Math.PI,me),oe.lineTo(q+pe,ne+ge),oe.arc(q,ne,ie,me,me+Math.PI)}else oe.arc(a,A,P,0,Gr);oe.closePath()}else B=1;q=a,ne=A,ie=P}function trail(q){var ne,ie,se,le=q.length,he=!1;for(null==oe&&(oe=se=Wt()),ne=0;ne<=le;++ne)!(ne<le&&P(ie=q[ne],ne,q))===he&&(he=!he)&&(B=0),he&&point(+a(ie,ne,q),+A(ie,ne,q),+j(ie,ne,q));if(se)return oe=null,se+""||null}return trail.x=function(A){return arguments.length?(a=A,trail):a},trail.y=function(a){return arguments.length?(A=a,trail):A},trail.size=function(a){return arguments.length?(j=a,trail):j},trail.defined=function(a){return arguments.length?(P=a,trail):P},trail.context=function(a){return arguments.length?(oe=null==a?null:a,trail):oe},trail}function value$1(a,A){return null!=a?a:A}var ti=function x(a){return a.x||0},ii=function y(a){return a.y||0},oi=function def(a){return!(!1===a.defined)},ui=function(){var a=arcInnerRadius,A=arcOuterRadius,j=src_constant(0),P=null,B=arcStartAngle,q=arcEndAngle,ne=arcPadAngle,ie=null;function arc(){var oe,se,le=+a.apply(this,arguments),he=+A.apply(this,arguments),pe=B.apply(this,arguments)-Mt,ge=q.apply(this,arguments)-Mt,me=Ct(ge-pe),ve=ge>pe;if(ie||(ie=oe=Wt()),he<le&&(se=he,he=le,le=se),he>1e-12)if(me>Lt-1e-12)ie.moveTo(he*Dt(pe),he*Ft(pe)),ie.arc(0,0,he,pe,ge,!ve),le>1e-12&&(ie.moveTo(le*Dt(ge),le*Ft(ge)),ie.arc(0,0,le,ge,pe,ve));else{var ye,_e,we=pe,ke=ge,Oe=pe,Se=ge,Te=me,Ae=me,je=ne.apply(this,arguments)/2,Fe=je>1e-12&&(P?+P.apply(this,arguments):Pt(le*le+he*he)),Re=jt(Ct(he-le)/2,+j.apply(this,arguments)),Me=Re,Ne=Re;if(Fe>1e-12){var Be=asin(Fe/le*Ft(je)),Ue=asin(Fe/he*Ft(je));(Te-=2*Be)>1e-12?(Oe+=Be*=ve?1:-1,Se-=Be):(Te=0,Oe=Se=(pe+ge)/2),(Ae-=2*Ue)>1e-12?(we+=Ue*=ve?1:-1,ke-=Ue):(Ae=0,we=ke=(pe+ge)/2)}var We=he*Dt(we),Ve=he*Ft(we),Ye=le*Dt(Se),$e=le*Ft(Se);if(Re>1e-12){var Xe,et=he*Dt(ke),tt=he*Ft(ke),nt=le*Dt(Oe),rt=le*Ft(Oe);if(me<Rt&&(Xe=arc_intersect(We,Ve,nt,rt,et,tt,Ye,$e))){var it=We-Xe[0],at=Ve-Xe[1],ot=et-Xe[0],st=tt-Xe[1],ut=1/Ft(acos((it*ot+at*st)/(Pt(it*it+at*at)*Pt(ot*ot+st*st)))/2),lt=Pt(Xe[0]*Xe[0]+Xe[1]*Xe[1]);Me=jt(Re,(le-lt)/(ut-1)),Ne=jt(Re,(he-lt)/(ut+1))}}Ae>1e-12?Ne>1e-12?(ye=cornerTangents(nt,rt,We,Ve,he,Ne,ve),_e=cornerTangents(et,tt,Ye,$e,he,Ne,ve),ie.moveTo(ye.cx+ye.x01,ye.cy+ye.y01),Ne<Re?ie.arc(ye.cx,ye.cy,Ne,Tt(ye.y01,ye.x01),Tt(_e.y01,_e.x01),!ve):(ie.arc(ye.cx,ye.cy,Ne,Tt(ye.y01,ye.x01),Tt(ye.y11,ye.x11),!ve),ie.arc(0,0,he,Tt(ye.cy+ye.y11,ye.cx+ye.x11),Tt(_e.cy+_e.y11,_e.cx+_e.x11),!ve),ie.arc(_e.cx,_e.cy,Ne,Tt(_e.y11,_e.x11),Tt(_e.y01,_e.x01),!ve))):(ie.moveTo(We,Ve),ie.arc(0,0,he,we,ke,!ve)):ie.moveTo(We,Ve),le>1e-12&&Te>1e-12?Me>1e-12?(ye=cornerTangents(Ye,$e,et,tt,le,-Me,ve),_e=cornerTangents(We,Ve,nt,rt,le,-Me,ve),ie.lineTo(ye.cx+ye.x01,ye.cy+ye.y01),Me<Re?ie.arc(ye.cx,ye.cy,Me,Tt(ye.y01,ye.x01),Tt(_e.y01,_e.x01),!ve):(ie.arc(ye.cx,ye.cy,Me,Tt(ye.y01,ye.x01),Tt(ye.y11,ye.x11),!ve),ie.arc(0,0,le,Tt(ye.cy+ye.y11,ye.cx+ye.x11),Tt(_e.cy+_e.y11,_e.cx+_e.x11),ve),ie.arc(_e.cx,_e.cy,Me,Tt(_e.y11,_e.x11),Tt(_e.y01,_e.x01),!ve))):ie.arc(0,0,le,Se,Oe,ve):ie.lineTo(Ye,$e)}else ie.moveTo(0,0);if(ie.closePath(),oe)return ie=null,oe+""||null}return arc.centroid=function(){var j=(+a.apply(this,arguments)+ +A.apply(this,arguments))/2,P=(+B.apply(this,arguments)+ +q.apply(this,arguments))/2-Rt/2;return[Dt(P)*j,Ft(P)*j]},arc.innerRadius=function(A){return arguments.length?(a="function"===typeof A?A:src_constant(+A),arc):a},arc.outerRadius=function(a){return arguments.length?(A="function"===typeof a?a:src_constant(+a),arc):A},arc.cornerRadius=function(a){return arguments.length?(j="function"===typeof a?a:src_constant(+a),arc):j},arc.padRadius=function(a){return arguments.length?(P=null==a?null:"function"===typeof a?a:src_constant(+a),arc):P},arc.startAngle=function(a){return arguments.length?(B="function"===typeof a?a:src_constant(+a),arc):B},arc.endAngle=function(a){return arguments.length?(q="function"===typeof a?a:src_constant(+a),arc):q},arc.padAngle=function(a){return arguments.length?(ne="function"===typeof a?a:src_constant(+a),arc):ne},arc.context=function(a){return arguments.length?(ie=null==a?null:a,arc):ie},arc}().startAngle((function sa(a){return a.startAngle||0})).endAngle((function ea(a){return a.endAngle||0})).padAngle((function pa(a){return a.padAngle||0})).innerRadius((function ir(a){return a.innerRadius||0})).outerRadius((function or(a){return a.outerRadius||0})).cornerRadius((function cr(a){return a.cornerRadius||0})),vi=src_area().x(ti).y1(ii).y0((function yh(a){return(a.y||0)+(a.height||0)})).defined(oi),_i=src_area().y(ii).x1(ti).x0((function xw(a){return(a.x||0)+(a.width||0)})).defined(oi),wi=src_line().x(ti).y(ii).defined(oi),Ti=vg_rect().x(ti).y(ii).width((function w(a){return a.width||0})).height((function h(a){return a.height||0})).cornerRadius((function tl(a){return value$1(a.cornerRadiusTopLeft,a.cornerRadius)||0}),(function tr(a){return value$1(a.cornerRadiusTopRight,a.cornerRadius)||0}),(function br(a){return value$1(a.cornerRadiusBottomRight,a.cornerRadius)||0}),(function bl(a){return value$1(a.cornerRadiusBottomLeft,a.cornerRadius)||0})),Bi=function(a,A){var j=null;function symbol(){var P;if(j||(j=P=Wt()),a.apply(this,arguments).draw(j,+A.apply(this,arguments)),P)return j=null,P+""||null}return a="function"===typeof a?a:src_constant(a||Ht),A="function"===typeof A?A:src_constant(void 0===A?64:+A),symbol.type=function(A){return arguments.length?(a="function"===typeof A?A:src_constant(A),symbol):a},symbol.size=function(a){return arguments.length?(A="function"===typeof a?a:src_constant(+a),symbol):A},symbol.context=function(a){return arguments.length?(j=null==a?null:a,symbol):j},symbol}().type((function type(a){return vega_scenegraph_module_symbols(a.shape||"circle")})).size((function sz(a){return value$1(a.size,64)})),Wi=vg_trail().x(ti).y(ii).defined(oi).size((function ts(a){return a.size||1}));function hasCornerRadius(a){return a.cornerRadius||a.cornerRadiusTopLeft||a.cornerRadiusTopRight||a.cornerRadiusBottomRight||a.cornerRadiusBottomLeft}function vega_scenegraph_module_rectangle(a,A,j,P){return Ti.context(a)(A,j,P)}var Yi=1;function resetSVGClipId(){Yi=1}function clip$1(a,A,j){var P=A.clip,B=a._defs,q=A.clip_id||(A.clip_id="clip"+Yi++),ne=B.clipping[q]||(B.clipping[q]={id:q});return Object(ve.E)(P)?ne.path=P(null):hasCornerRadius(j)?ne.path=vega_scenegraph_module_rectangle(null,j,0,0):(ne.width=j.width||0,ne.height=j.height||0),"url(#"+q+")"}function Bounds(a){this.clear(),a&&this.union(a)}function Item(a){this.mark=a,this.bounds=this.bounds||new Bounds}function GroupItem(a){Item.call(this,a),this.items=this.items||[]}function ResourceLoader(a){this._pending=0,this._loader=a||Object(ke.e)()}function increment(a){a._pending+=1}function decrement(a){a._pending-=1}function boundStroke(a,A,j){if(A.stroke&&0!==A.opacity&&0!==A.strokeOpacity){var P=null!=A.strokeWidth?+A.strokeWidth:1;a.expand(P+(j?function miterAdjustment(a,A){return a.strokeJoin&&"miter"!==a.strokeJoin?0:A}(A,P):0))}return a}Bounds.prototype={clone:function clone(){return new Bounds(this)},clear:function clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function equals(a){return this.x1===a.x1&&this.y1===a.y1&&this.x2===a.x2&&this.y2===a.y2},set:function set(a,A,j,P){return j<a?(this.x2=a,this.x1=j):(this.x1=a,this.x2=j),P<A?(this.y2=A,this.y1=P):(this.y1=A,this.y2=P),this},add:function add(a,A){return a<this.x1&&(this.x1=a),A<this.y1&&(this.y1=A),a>this.x2&&(this.x2=a),A>this.y2&&(this.y2=A),this},expand:function expand(a){return this.x1-=a,this.y1-=a,this.x2+=a,this.y2+=a,this},round:function round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function scale(a){return this.x1*=a,this.y1*=a,this.x2*=a,this.y2*=a,this},translate:function translate(a,A){return this.x1+=a,this.x2+=a,this.y1+=A,this.y2+=A,this},rotate:function rotate(a,A,j){var P=this.rotatedPoints(a,A,j);return this.clear().add(P[0],P[1]).add(P[2],P[3]).add(P[4],P[5]).add(P[6],P[7])},rotatedPoints:function rotatedPoints(a,A,j){var P=this.x1,B=this.y1,q=this.x2,ne=this.y2,ie=Math.cos(a),oe=Math.sin(a),se=A-A*ie+j*oe,le=j-A*oe-j*ie;return[ie*P-oe*B+se,oe*P+ie*B+le,ie*P-oe*ne+se,oe*P+ie*ne+le,ie*q-oe*B+se,oe*q+ie*B+le,ie*q-oe*ne+se,oe*q+ie*ne+le]},union:function union(a){return a.x1<this.x1&&(this.x1=a.x1),a.y1<this.y1&&(this.y1=a.y1),a.x2>this.x2&&(this.x2=a.x2),a.y2>this.y2&&(this.y2=a.y2),this},intersect:function intersect(a){return a.x1>this.x1&&(this.x1=a.x1),a.y1>this.y1&&(this.y1=a.y1),a.x2<this.x2&&(this.x2=a.x2),a.y2<this.y2&&(this.y2=a.y2),this},encloses:function encloses(a){return a&&this.x1<=a.x1&&this.x2>=a.x2&&this.y1<=a.y1&&this.y2>=a.y2},alignsWith:function alignsWith(a){return a&&(this.x1==a.x1||this.x2==a.x2||this.y1==a.y1||this.y2==a.y2)},intersects:function intersects(a){return a&&!(this.x2<a.x1||this.x1>a.x2||this.y2<a.y1||this.y1>a.y2)},contains:function contains(a,A){return!(a<this.x1||a>this.x2||A<this.y1||A>this.y2)},width:function width(){return this.x2-this.x1},height:function height(){return this.y2-this.y1}},Object(ve.z)(GroupItem,Item),ResourceLoader.prototype={pending:function pending(){return this._pending},sanitizeURL:function sanitizeURL(a){var A=this;return increment(A),A._loader.sanitize(a,{context:"href"}).then((function(a){return decrement(A),a})).catch((function(){return decrement(A),null}))},loadImage:function loadImage(a){var A=this,j=Vt();return increment(A),A._loader.sanitize(a,{context:"image"}).then((function(a){var P=a.href;if(!P||!j)throw{url:P};var B=new j,q=Object(ve.w)(a,"crossOrigin")?a.crossOrigin:"anonymous";return null!=q&&(B.crossOrigin=q),B.onload=function(){return decrement(A)},B.onerror=function(){return decrement(A)},B.src=P,B})).catch((function(a){return decrement(A),{complete:!1,width:0,height:0,src:a&&a.url||""}}))},ready:function ready(){var a=this;return new Promise((function(A){!function poll(j){a.pending()?setTimeout((function(){poll(!0)}),10):A(j)}(!1)}))}};var Zi,ta,na,ia,la,fa,da,ha,ga=Gr-1e-8,ma=function add(a,A){return Zi.add(a,A)},va=function addL(a,A){return ma(ta=a,na=A)},ya=function addX(a){return ma(a,Zi.y1)},_a=function addY(a){return ma(Zi.x1,a)},wa=function px(a,A){return la*a+da*A},Oa=function py(a,A){return fa*a+ha*A},Aa=function addp(a,A){return ma(wa(a,A),Oa(a,A))},Pa=function addpL(a,A){return va(wa(a,A),Oa(a,A))};function boundContext(a,A){return Zi=a,A?(ia=A*Wr,la=ha=Math.cos(ia),fa=Math.sin(ia),da=-fa):(la=ha=1,ia=fa=da=0),Na}var Na={beginPath:function beginPath(){},closePath:function closePath(){},moveTo:Pa,lineTo:Pa,rect:function rect(a,A,j,P){ia?(Aa(a+j,A),Aa(a+j,A+P),Aa(a,A+P),Pa(a,A)):(ma(a+j,A+P),va(a,A))},quadraticCurveTo:function quadraticCurveTo(a,A,j,P){var B=wa(a,A),q=Oa(a,A),ne=wa(j,P),ie=Oa(j,P);quadExtrema(ta,B,ne,ya),quadExtrema(na,q,ie,_a),va(ne,ie)},bezierCurveTo:function bezierCurveTo(a,A,j,P,B,q){var ne=wa(a,A),ie=Oa(a,A),oe=wa(j,P),se=Oa(j,P),le=wa(B,q),he=Oa(B,q);cubicExtrema(ta,ne,oe,le,ya),cubicExtrema(na,ie,se,he,_a),va(le,he)},arc:function arc(a,A,j,P,B,q){if(P+=ia,B+=ia,ta=j*Math.cos(B)+a,na=j*Math.sin(B)+A,Math.abs(B-P)>ga)ma(a-j,A-j),ma(a+j,A+j);else{var ne,ie,oe=function update(P){return ma(j*Math.cos(P)+a,j*Math.sin(P)+A)};if(oe(P),oe(B),B!==P)if((P%=Gr)<0&&(P+=Gr),(B%=Gr)<0&&(B+=Gr),B<P&&(q=!q,ne=P,P=B,B=ne),q)for(B-=Gr,ne=P-P%Hr,ie=0;ie<4&&ne>B;++ie,ne-=Hr)oe(ne);else for(ne=P-P%Hr+Hr,ie=0;ie<4&&ne<B;++ie,ne+=Hr)oe(ne)}}};function quadExtrema(a,A,j,P){var B=(a-A)/(a+j-2*A);0<B&&B<1&&P(a+(A-a)*B)}function cubicExtrema(a,A,j,P,B){var q,ne=P-a+3*A-3*j,ie=a+j-2*A,oe=a-A,se=0,le=0;Math.abs(ne)>1e-14?(q=ie*ie+oe*ne)>=0&&(se=(-ie+(q=Math.sqrt(q)))/ne,le=(-ie-q)/ne):se=.5*oe/ie,0<se&&se<1&&B(cubic(se,a,A,j,P)),0<le&&le<1&&B(cubic(le,a,A,j,P))}function cubic(a,A,j,P,B){var q=1-a,ne=q*q,ie=a*a;return ne*q*A+3*ne*a*j+3*q*ie*P+ie*a*B}var Ba=(Ba=domCanvas(1,1))?Ba.getContext("2d"):null,Ua=new Bounds;function intersectPath(a){return function(A,j){if(!Ba)return!0;a(Ba,A),Ua.clear().union(A.bounds).intersect(j).round();for(var P=Ua.x1,B=Ua.y1,q=Ua.x2,ne=Ua.y2,ie=B;ie<=ne;++ie)for(var oe=P;oe<=q;++oe)if(Ba.isPointInPath(oe,ie))return!0;return!1}}function intersectPoint(a,A){return A.contains(a.x||0,a.y||0)}function intersectRect(a,A){var j=a.x||0,P=a.y||0,B=a.width||0,q=a.height||0;return A.intersects(Ua.set(j,P,j+B,P+q))}function intersectRule(a,A){var j=a.x||0,P=a.y||0;return intersectBoxLine(A,j,P,null!=a.x2?a.x2:j,null!=a.y2?a.y2:P)}function intersectBoxLine(a,A,j,P,B){var q,ne,ie,oe,se=a.x1,le=a.y1,he=a.x2,pe=a.y2,ge=P-A,me=B-j,ve=0,ye=1;for(oe=0;oe<4;++oe){if(0===oe&&(q=-ge,ne=-(se-A)),1===oe&&(q=ge,ne=he-A),2===oe&&(q=-me,ne=-(le-j)),3===oe&&(q=me,ne=pe-j),Math.abs(q)<1e-10&&ne<0)return!1;if(ie=ne/q,q<0){if(ie>ye)return!1;ie>ve&&(ve=ie)}else if(q>0){if(ie<ve)return!1;ie<ye&&(ye=ie)}}return!0}function blend(a,A){a.globalCompositeOperation=A.blend||"source-over"}function vega_scenegraph_module_value(a,A){return null==a?A:a}function addStops(a,A){for(var j=A.length,P=0;P<j;++P)a.addColorStop(A[P].offset,A[P].color);return a}function vega_scenegraph_module_color(a,A,j){return isGradient(j)?function vega_scenegraph_module_gradient(a,A,j){var P,B=j.width(),q=j.height();if("radial"===A.gradient)P=a.createRadialGradient(j.x1+vega_scenegraph_module_value(A.x1,.5)*B,j.y1+vega_scenegraph_module_value(A.y1,.5)*q,Math.max(B,q)*vega_scenegraph_module_value(A.r1,0),j.x1+vega_scenegraph_module_value(A.x2,.5)*B,j.y1+vega_scenegraph_module_value(A.y2,.5)*q,Math.max(B,q)*vega_scenegraph_module_value(A.r2,.5));else{var ne=vega_scenegraph_module_value(A.x1,0),ie=vega_scenegraph_module_value(A.y1,0),oe=vega_scenegraph_module_value(A.x2,1),se=vega_scenegraph_module_value(A.y2,0);if(ne!==oe&&ie!==se&&B!==q){var le=domCanvas(Math.ceil(B),Math.ceil(q)),he=le.getContext("2d");return he.scale(B,q),he.fillStyle=addStops(he.createLinearGradient(ne,ie,oe,se),A.stops),he.fillRect(0,0,B,q),a.createPattern(le,"no-repeat")}P=a.createLinearGradient(j.x1+ne*B,j.y1+ie*q,j.x1+oe*B,j.y1+se*q)}return addStops(P,A.stops)}(a,j,A.bounds):j}function fill(a,A,j){return(j*=null==A.fillOpacity?1:A.fillOpacity)>0&&(a.globalAlpha=j,a.fillStyle=vega_scenegraph_module_color(a,A,A.fill),!0)}var qa=[];function stroke(a,A,j){var P=null!=(P=A.strokeWidth)?P:1;return!(P<=0)&&((j*=null==A.strokeOpacity?1:A.strokeOpacity)>0&&(a.globalAlpha=j,a.strokeStyle=vega_scenegraph_module_color(a,A,A.stroke),a.lineWidth=P,a.lineCap=A.strokeCap||"butt",a.lineJoin=A.strokeJoin||"miter",a.miterLimit=A.strokeMiterLimit||10,a.setLineDash&&(a.setLineDash(A.strokeDash||qa),a.lineDashOffset=A.strokeDashOffset||0),!0))}function vega_scenegraph_module_compare(a,A){return a.zindex-A.zindex||a.index-A.index}function zorder(a){if(!a.zdirty)return a.zitems;var A,j,P,B=a.items,q=[];for(j=0,P=B.length;j<P;++j)(A=B[j]).index=j,A.zindex&&q.push(A);return a.zdirty=!1,a.zitems=q.sort(vega_scenegraph_module_compare)}function vega_scenegraph_module_visit(a,A){var j,P,B=a.items;if(B&&B.length){var q=zorder(a);if(q&&q.length){for(j=0,P=B.length;j<P;++j)B[j].zindex||A(B[j]);B=q}for(j=0,P=B.length;j<P;++j)A(B[j])}}function pickVisit(a,A){var j,P,B=a.items;if(!B||!B.length)return null;var q=zorder(a);for(q&&q.length&&(B=q),P=B.length;--P>=0;)if(j=A(B[P]))return j;if(B===q)for(P=(B=a.items).length;--P>=0;)if(!B[P].zindex&&(j=A(B[P])))return j;return null}function drawAll(a){return function(A,j,P){vega_scenegraph_module_visit(j,(function(j){P&&!P.intersects(j.bounds)||drawPath(a,A,j,j)}))}}function drawPath(a,A,j,P){var B=null==j.opacity?1:j.opacity;0!==B&&(a(A,P)||(blend(A,j),j.fill&&fill(A,j,B)&&A.fill(),j.stroke&&stroke(A,j,B)&&A.stroke()))}function pick$1(a){return a=a||ve.ib,function(A,j,P,B,q,ne){return P*=A.pixelRatio,B*=A.pixelRatio,pickVisit(j,(function(j){var ie=j.bounds;if((!ie||ie.contains(q,ne))&&ie)return a(A,j,P,B,q,ne)?j:void 0}))}}function hitPath(a,A){return function(j,P,B,q){var ne,ie,oe=Array.isArray(P)?P[0]:P,se=null==A?oe.fill:A,le=oe.stroke&&j.isPointInStroke;return le&&(ne=oe.strokeWidth,ie=oe.strokeCap,j.lineWidth=null!=ne?ne:1,j.lineCap=null!=ie?ie:"butt"),!a(j,P)&&(se&&j.isPointInPath(B,q)||le&&j.isPointInStroke(B,q))}}function pickPath(a){return pick$1(hitPath(a))}function vega_scenegraph_module_translate(a,A){return"translate("+a+","+A+")"}function vega_scenegraph_module_rotate(a){return"rotate("+a+")"}function translateItem(a){return vega_scenegraph_module_translate(a.x||0,a.y||0)}function markItemPath(a,A,j){function draw(a,j){var P=j.x||0,B=j.y||0,q=j.angle||0;a.translate(P,B),q&&a.rotate(q*=Wr),a.beginPath(),A(a,j),q&&a.rotate(-q),a.translate(-P,-B)}return{type:a,tag:"path",nested:!1,attr:function attr(a,j){a("transform",function rotateItem(a){return vega_scenegraph_module_translate(a.x||0,a.y||0)+(a.angle?" "+vega_scenegraph_module_rotate(a.angle):"")}(j)),a("d",A(null,j))},bound:function bound(a,j){return A(boundContext(a,j.angle),j),boundStroke(a,j).translate(j.x||0,j.y||0)},draw:drawAll(draw),pick:pickPath(draw),isect:j||intersectPath(draw)}}var Wa=markItemPath("arc",(function arc$1(a,A){return ui.context(a)(A)}));function markMultiItemPath(a,A,j){function draw(a,j){a.beginPath(),A(a,j)}var P,B=hitPath(draw);return{type:a,tag:"path",nested:!0,attr:function attr(a,j){var P=j.mark.items;P.length&&a("d",A(null,P))},bound:function bound(a,j){var P=j.items;return 0===P.length?a:(A(boundContext(a),P),boundStroke(a,P[0]))},draw:(P=draw,function(a,A,j){!A.items.length||j&&!j.intersects(A.bounds)||drawPath(P,a,A.items[0],A.items)}),pick:function pick(a,A,j,P,q,ne){var ie=A.items,oe=A.bounds;return!ie||!ie.length||oe&&!oe.contains(q,ne)?null:(j*=a.pixelRatio,P*=a.pixelRatio,B(a,ie,j,P)?ie[0]:null)},isect:intersectPoint,tip:j}}var Ya=markMultiItemPath("area",(function area$1(a,A){var j=A[0],P=j.interpolate||"linear";return("horizontal"===j.orient?_i:vi).curve(curves(P,j.orient,j.tension)).context(a)(A)}),(function pickArea(a,A){for(var j,P,B="horizontal"===a[0].orient?A[1]:A[0],q="horizontal"===a[0].orient?"y":"x",ne=a.length,ie=1/0;--ne>=0;)!1!==a[ne].defined&&(P=Math.abs(a[ne][q]-B))<ie&&(ie=P,j=a[ne]);return j}));function clipGroup(a,A){a.beginPath(),hasCornerRadius(A)?vega_scenegraph_module_rectangle(a,A,0,0):a.rect(0,0,A.width||0,A.height||0),a.clip()}function offset$1(a){var A=vega_scenegraph_module_value(a.strokeWidth,1);return null!=a.strokeOffset?a.strokeOffset:a.stroke&&A>.5&&A<1.5?.5-Math.abs(A-1):0}function emitRectangle(a,A){var j=offset$1(A);a("d",vega_scenegraph_module_rectangle(null,A,j,j))}function rectanglePath(a,A,j,P){var B=offset$1(A);a.beginPath(),vega_scenegraph_module_rectangle(a,A,(j||0)+B,(P||0)+B)}var $a=hitPath(rectanglePath),Ka=hitPath(rectanglePath,!1),Ja=hitPath(rectanglePath,!0);var Qa={type:"group",tag:"g",nested:!1,attr:function attr$5(a,A){a("transform",translateItem(A))},bound:function bound$5(a,A){if(!A.clip&&A.items)for(var j=A.items,P=j.length,B=0;B<P;++B)a.union(j[B].bounds);return(A.clip||A.width||A.height)&&!A.noBound&&a.add(0,0).add(A.width||0,A.height||0),boundStroke(a,A),a.translate(A.x||0,A.y||0)},draw:function draw$4(a,A,j){var P=this;vega_scenegraph_module_visit(A,(function(A){var B=A.x||0,q=A.y||0,ne=A.strokeForeground,ie=null==A.opacity?1:A.opacity;(A.stroke||A.fill)&&ie&&(rectanglePath(a,A,B,q),blend(a,A),A.fill&&fill(a,A,ie)&&a.fill(),A.stroke&&!ne&&stroke(a,A,ie)&&a.stroke()),a.save(),a.translate(B,q),A.clip&&clipGroup(a,A),j&&j.translate(-B,-q),vega_scenegraph_module_visit(A,(function(A){P.draw(a,A,j)})),j&&j.translate(B,q),a.restore(),ne&&A.stroke&&ie&&(rectanglePath(a,A,B,q),blend(a,A),stroke(a,A,ie)&&a.stroke())}))},pick:function pick(a,A,j,P,B,q){var ne=this;if(A.bounds&&!A.bounds.contains(B,q)||!A.items)return null;var ie=j*a.pixelRatio,oe=P*a.pixelRatio;return pickVisit(A,(function(se){var le,he,pe,ge=se.bounds;if(!ge||ge.contains(B,q)){he=se.x||0,pe=se.y||0;var me=he+(se.width||0),ve=pe+(se.height||0),ye=se.clip;if(!ye||!(B<he||B>me||q<pe||q>ve)){if(a.save(),a.translate(he,pe),he=B-he,pe=q-pe,ye&&hasCornerRadius(se)&&!Ja(a,se,ie,oe))return a.restore(),null;var _e=se.strokeForeground,we=!1!==A.interactive;return we&&_e&&se.stroke&&Ka(a,se,ie,oe)?(a.restore(),se):(!(le=pickVisit(se,(function(a){return function pickMark(a,A,j){return(!1!==a.interactive||"group"===a.marktype)&&a.bounds&&a.bounds.contains(A,j)}(a,he,pe)?ne.pick(a,j,P,he,pe):null})))&&we&&(se.fill||!_e&&se.stroke)&&$a(a,se,ie,oe)&&(le=se),a.restore(),le||null)}}}))},isect:intersectRect,content:function content(a,A,j){a("clip-path",A.clip?clip$1(j,A,A):null)},background:function background(a,A){a("class","background"),a("aria-hidden",!0),emitRectangle(a,A)},foreground:function foreground(a,A){a("class","foreground"),a("aria-hidden",!0),A.strokeForeground?emitRectangle(a,A):a("d","")}},Za={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function getImage(a,A){var j=a.image;return(!j||a.url&&a.url!==j.url)&&(j={complete:!1,width:0,height:0},A.loadImage(a.url).then((function(A){a.image=A,a.image.url=a.url}))),j}function imageWidth(a,A){return null!=a.width?a.width:A&&A.width?!1!==a.aspect&&a.height?a.height*A.width/A.height:A.width:0}function imageHeight(a,A){return null!=a.height?a.height:A&&A.height?!1!==a.aspect&&a.width?a.width*A.height/A.width:A.height:0}function imageXOffset(a,A){return"center"===a?A/2:"right"===a?A:0}function imageYOffset(a,A){return"middle"===a?A/2:"bottom"===a?A:0}var eo={type:"image",tag:"image",nested:!1,attr:function attr$4(a,A,j){var P=getImage(A,j),B=imageWidth(A,P),q=imageHeight(A,P),ne=(A.x||0)-imageXOffset(A.align,B),ie=(A.y||0)-imageYOffset(A.baseline,q);a("href",!P.src&&P.toDataURL?P.toDataURL():P.src||"",Za["xmlns:xlink"],"xlink:href"),a("transform",vega_scenegraph_module_translate(ne,ie)),a("width",B),a("height",q),a("preserveAspectRatio",!1===A.aspect?"none":"xMidYMid")},bound:function bound$4(a,A){var j=A.image,P=imageWidth(A,j),B=imageHeight(A,j),q=(A.x||0)-imageXOffset(A.align,P),ne=(A.y||0)-imageYOffset(A.baseline,B);return a.set(q,ne,q+P,ne+B)},draw:function draw$3(a,A,j){var P=this;vega_scenegraph_module_visit(A,(function(A){if(!j||j.intersects(A.bounds)){var B=getImage(A,P),q=imageWidth(A,B),ne=imageHeight(A,B);if(0!==q&&0!==ne){var ie,oe,se,le,he=(A.x||0)-imageXOffset(A.align,q),pe=(A.y||0)-imageYOffset(A.baseline,ne);!1!==A.aspect&&(oe=B.width/B.height,se=A.width/A.height,oe===oe&&se===se&&oe!==se&&(se<oe?(pe+=(ne-(le=q/oe))/2,ne=le):(he+=(q-(le=ne*oe))/2,q=le))),(B.complete||B.toDataURL)&&(blend(a,A),a.globalAlpha=null!=(ie=A.opacity)?ie:1,a.imageSmoothingEnabled=!1!==A.smooth,a.drawImage(B,he,pe,q,ne))}}}))},pick:pick$1(),isect:ve.ib,get:getImage,xOffset:imageXOffset,yOffset:imageYOffset},no=markMultiItemPath("line",(function line$1(a,A){var j=A[0],P=j.interpolate||"linear";return wi.curve(curves(P,j.orient,j.tension)).context(a)(A)}),(function pickLine(a,A){for(var j,P,B=Math.pow(a[0].strokeWidth||1,2),q=a.length;--q>=0;)if(!1!==a[q].defined&&(j=a[q].x-A[0])*j+(P=a[q].y-A[1])*P<B)return a[q];return null}));function path$1(a,A){var j=A.path;if(null==j)return!0;var P=A.x||0,B=A.y||0,q=A.scaleX||1,ne=A.scaleY||1,ie=(A.angle||0)*Wr,oe=A.pathCache;oe&&oe.path===j||((A.pathCache=oe=pathParse(j)).path=j),ie&&a.rotate&&a.translate?(a.translate(P,B),a.rotate(ie),pathRender(a,oe,0,0,q,ne),a.rotate(-ie),a.translate(-P,-B)):pathRender(a,oe,P,B,q,ne)}var ro={type:"path",tag:"path",nested:!1,attr:function attr$3(a,A){var j=A.scaleX||1,P=A.scaleY||1;1===j&&1===P||a("vector-effect","non-scaling-stroke"),a("transform",function transformItem(a){return vega_scenegraph_module_translate(a.x||0,a.y||0)+(a.angle?" "+vega_scenegraph_module_rotate(a.angle):"")+(a.scaleX||a.scaleY?" "+function vega_scenegraph_module_scale(a,A){return"scale("+a+","+A+")"}(a.scaleX||1,a.scaleY||1):"")}(A)),a("d",A.path)},bound:function bound$3(a,A){return path$1(boundContext(a,A.angle),A)?a.set(0,0,0,0):boundStroke(a,A,!0)},draw:drawAll(path$1),pick:pickPath(path$1),isect:intersectPath(path$1)};function draw$2(a,A){a.beginPath(),vega_scenegraph_module_rectangle(a,A)}var io={type:"rect",tag:"path",nested:!1,attr:function attr$2(a,A){a("d",vega_scenegraph_module_rectangle(null,A))},bound:function bound$2(a,A){var j,P;return boundStroke(a.set(j=A.x||0,P=A.y||0,j+A.width||0,P+A.height||0),A)},draw:drawAll(draw$2),pick:pickPath(draw$2),isect:intersectRect};function vega_scenegraph_module_path(a,A,j){var P,B,q,ne;return!(!A.stroke||!stroke(a,A,j))&&(P=A.x||0,B=A.y||0,q=null!=A.x2?A.x2:P,ne=null!=A.y2?A.y2:B,a.beginPath(),a.moveTo(P,B),a.lineTo(q,ne),!0)}var ao={type:"rule",tag:"line",nested:!1,attr:function attr$1(a,A){a("transform",translateItem(A)),a("x2",null!=A.x2?A.x2-(A.x||0):0),a("y2",null!=A.y2?A.y2-(A.y||0):0)},bound:function bound$1(a,A){var j,P;return boundStroke(a.set(j=A.x||0,P=A.y||0,null!=A.x2?A.x2:j,null!=A.y2?A.y2:P),A)},draw:function draw$1(a,A,j){vega_scenegraph_module_visit(A,(function(A){if(!j||j.intersects(A.bounds)){var P=null==A.opacity?1:A.opacity;P&&vega_scenegraph_module_path(a,A,P)&&(blend(a,A),a.stroke())}}))},pick:pick$1((function hit$1(a,A,j,P){return!!a.isPointInStroke&&(vega_scenegraph_module_path(a,A,1)&&a.isPointInStroke(j,P))})),isect:intersectRule},oo=markItemPath("shape",(function shape$1(a,A){return(A.mark.shape||A.shape).context(a)(A)})),so=markItemPath("symbol",(function symbol$1(a,A){return Bi.context(a)(A)}),intersectPoint),uo=Object(ve.N)(),lo={height:vega_scenegraph_module_fontSize,measureWidth:measureWidth,estimateWidth:estimateWidth,width:estimateWidth,canvas:useCanvas};function useCanvas(a){lo.width=a&&Ba?measureWidth:estimateWidth}function estimateWidth(a,A){return _estimateWidth(textValue(a,A),vega_scenegraph_module_fontSize(a))}function _estimateWidth(a,A){return~~(.8*a.length*A)}function measureWidth(a,A){return vega_scenegraph_module_fontSize(a)<=0||!(A=textValue(a,A))?0:_measureWidth(A,vega_scenegraph_module_font(a))}function _measureWidth(a,A){var j="(".concat(A,") ").concat(a),P=uo.get(j);return void 0===P&&(Ba.font=A,P=Ba.measureText(a).width,uo.set(j,P)),P}function vega_scenegraph_module_fontSize(a){return null!=a.fontSize?+a.fontSize||0:11}function lineHeight(a){return null!=a.lineHeight?a.lineHeight:vega_scenegraph_module_fontSize(a)+2}function textLines(a){return function lineArray(a){return Object(ve.B)(a)?a.length>1?a:a[0]:a}(a.lineBreak&&a.text&&!Object(ve.B)(a.text)?a.text.split(a.lineBreak):a.text)}function multiLineOffset(a){var A=textLines(a);return(Object(ve.B)(A)?A.length-1:0)*lineHeight(a)}function textValue(a,A){var j=null==A?"":(A+"").trim();return a.limit>0&&j.length?function truncate(a,A){var j=+a.limit,P=function widthGetter(a){if(lo.width===measureWidth){var A=vega_scenegraph_module_font(a);return function(a){return _measureWidth(a,A)}}var j=vega_scenegraph_module_fontSize(a);return function(a){return _estimateWidth(a,j)}}(a);if(P(A)<j)return A;var B,q=a.ellipsis||"\u2026",ne="rtl"===a.dir,ie=0,oe=A.length;if(j-=P(q),ne){for(;ie<oe;)B=ie+oe>>>1,P(A.slice(B))>j?ie=B+1:oe=B;return q+A.slice(ie)}for(;ie<oe;)B=1+(ie+oe>>>1),P(A.slice(0,B))<j?ie=B:oe=B-1;return A.slice(0,ie)+q}(a,j):j}function fontFamily(a,A){var j=a.font;return(A&&j?String(j).replace(/"/g,"'"):j)||"sans-serif"}function vega_scenegraph_module_font(a,A){return(a.fontStyle?a.fontStyle+" ":"")+(a.fontVariant?a.fontVariant+" ":"")+(a.fontWeight?a.fontWeight+" ":"")+vega_scenegraph_module_fontSize(a)+"px "+fontFamily(a,A)}function vega_scenegraph_module_offset(a){var A=a.baseline,j=vega_scenegraph_module_fontSize(a);return Math.round("top"===A?.79*j:"middle"===A?.3*j:"bottom"===A?-.21*j:"line-top"===A?.29*j+.5*lineHeight(a):"line-bottom"===A?.29*j-.5*lineHeight(a):0)}useCanvas(!0);var co={left:"start",center:"middle",right:"end"},fo=new Bounds;function anchorPoint(a){var A,j=a.x||0,P=a.y||0,B=a.radius||0;return B&&(A=(a.theta||0)-Hr,j+=B*Math.cos(A),P+=B*Math.sin(A)),fo.x1=j,fo.y1=P,fo}function vega_scenegraph_module_bound(a,A,j){var P,B=lo.height(A),q=A.align,ne=anchorPoint(A),ie=ne.x1,oe=ne.y1,se=A.dx||0,le=(A.dy||0)+vega_scenegraph_module_offset(A)-Math.round(.8*B),he=textLines(A);if(Object(ve.B)(he)?(B+=lineHeight(A)*(he.length-1),P=he.reduce((function(a,j){return Math.max(a,lo.width(A,j))}),0)):P=lo.width(A,he),"center"===q?se-=P/2:"right"===q&&(se-=P),a.set(se+=ie,le+=oe,se+P,le+B),A.angle&&!j)a.rotate(A.angle*Wr,ie,oe);else if(2===j)return a.rotatedPoints(A.angle*Wr,ie,oe);return a}var ho={arc:Wa,area:Ya,group:Qa,image:eo,line:no,path:ro,rect:io,rule:ao,shape:oo,symbol:so,text:{type:"text",tag:"text",nested:!1,attr:function attr(a,A){var j,P=A.dx||0,B=(A.dy||0)+vega_scenegraph_module_offset(A),q=anchorPoint(A),ne=q.x1,ie=q.y1,oe=A.angle||0;a("text-anchor",co[A.align]||"start"),oe?(j=vega_scenegraph_module_translate(ne,ie)+" "+vega_scenegraph_module_rotate(oe),(P||B)&&(j+=" "+vega_scenegraph_module_translate(P,B))):j=vega_scenegraph_module_translate(ne+P,ie+B),a("transform",j)},bound:vega_scenegraph_module_bound,draw:function vega_scenegraph_module_draw(a,A,j){vega_scenegraph_module_visit(A,(function(A){var P,B,q,ne,ie,oe,se,le=null==A.opacity?1:A.opacity;if(!(j&&!j.intersects(A.bounds)||0===le||A.fontSize<=0||null==A.text||0===A.text.length)){if(a.font=vega_scenegraph_module_font(A),a.textAlign=A.align||"left",B=(P=anchorPoint(A)).x1,q=P.y1,A.angle&&(a.save(),a.translate(B,q),a.rotate(A.angle*Wr),B=q=0),B+=A.dx||0,q+=(A.dy||0)+vega_scenegraph_module_offset(A),oe=textLines(A),blend(a,A),Object(ve.B)(oe))for(ie=lineHeight(A),ne=0;ne<oe.length;++ne)se=textValue(A,oe[ne]),A.fill&&fill(a,A,le)&&a.fillText(se,B,q),A.stroke&&stroke(a,A,le)&&a.strokeText(se,B,q),q+=ie;else se=textValue(A,oe),A.fill&&fill(a,A,le)&&a.fillText(se,B,q),A.stroke&&stroke(a,A,le)&&a.strokeText(se,B,q);A.angle&&a.restore()}}))},pick:pick$1((function hit(a,A,j,P,B,q){if(A.fontSize<=0)return!1;if(!A.angle)return!0;var ne=anchorPoint(A),ie=ne.x1,oe=ne.y1,se=vega_scenegraph_module_bound(fo,A,1),le=-A.angle*Wr,he=Math.cos(le),pe=Math.sin(le),ge=he*B-pe*q+(ie-he*ie+pe*oe),me=pe*B+he*q+(oe-pe*ie-he*oe);return se.contains(ge,me)})),isect:function intersectText(a,A){var j=vega_scenegraph_module_bound(fo,a,2);return intersectBoxLine(A,j[0],j[1],j[2],j[3])||intersectBoxLine(A,j[0],j[1],j[4],j[5])||intersectBoxLine(A,j[4],j[5],j[6],j[7])||intersectBoxLine(A,j[2],j[3],j[6],j[7])}},trail:markMultiItemPath("trail",(function trail$1(a,A){return Wi.context(a)(A)}),(function pickTrail(a,A){for(var j,P,B=a.length;--B>=0;)if(!1!==a[B].defined&&(j=a[B].x-A[0])*j+(P=a[B].y-A[1])*P<(j=a[B].size||1)*j)return a[B];return null}))};function boundItem(a,A,j){var P=ho[a.mark.marktype],B=A||P.bound;return P.nested&&(a=a.mark),B(a.bounds||(a.bounds=new Bounds),a,j)}var po={mark:null};function boundMark(a,A,j){var P,B,q,ne,ie=ho[a.marktype],oe=ie.bound,se=a.items,le=se&&se.length;if(ie.nested)return le?q=se[0]:(po.mark=a,q=po),ne=boundItem(q,oe,j),A=A&&A.union(ne)||ne;if(A=A||a.bounds&&a.bounds.clear()||new Bounds,le)for(P=0,B=se.length;P<B;++P)A.union(boundItem(se[P],oe,j));return a.bounds=A}var go=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function sceneToJSON(a,A){return JSON.stringify(a,go,A)}function sceneFromJSON(a){return function vega_scenegraph_module_initialize(a){var A,j,P,B=a.marktype,q=a.items;if(q)for(j=0,P=q.length;j<P;++j)A=B?"mark":"group",q[j][A]=a,q[j].zindex&&(q[j][A].zdirty=!0),"group"===(B||A)&&vega_scenegraph_module_initialize(q[j]);B&&boundMark(a);return a}("string"===typeof a?JSON.parse(a):a)}function Scenegraph(a){arguments.length?this.root=sceneFromJSON(a):(this.root=createMark({marktype:"group",name:"root",role:"frame"}),this.root.items=[new GroupItem(this.root)])}function createMark(a,A){var j={bounds:new Bounds,clip:!!a.clip,group:A,interactive:!1!==a.interactive,items:[],marktype:a.marktype,name:a.name||void 0,role:a.role||void 0,zindex:a.zindex||0};return null!=a.aria&&(j.aria=a.aria),a.description&&(j.description=a.description),j}function domCreate(a,A,j){return!a&&"undefined"!==typeof document&&document.createElement&&(a=document),a?j?a.createElementNS(j,A):a.createElement(A):null}function domFind(a,A){A=A.toLowerCase();for(var j=a.childNodes,P=0,B=j.length;P<B;++P)if(j[P].tagName.toLowerCase()===A)return j[P]}function domChild(a,A,j,P){var B,q=a.childNodes[A];return q&&q.tagName.toLowerCase()===j.toLowerCase()||(B=q||null,q=domCreate(a.ownerDocument,j,P),a.insertBefore(q,B)),q}function domClear(a,A){for(var j=a.childNodes,P=j.length;P>A;)a.removeChild(j[--P]);return a}function cssClass(a){return"mark-"+a.marktype+(a.role?" role-"+a.role:"")+(a.name?" "+a.name:"")}function vega_scenegraph_module_point(a,A){var j=A.getBoundingClientRect();return[a.clientX-j.left-(A.clientLeft||0),a.clientY-j.top-(A.clientTop||0)]}function vega_scenegraph_module_Handler(a,A){this._active=null,this._handlers={},this._loader=a||Object(ke.e)(),this._tooltip=A||defaultTooltip}function defaultTooltip(a,A,j,P){a.element().setAttribute("title",P||"")}function vega_scenegraph_module_Renderer(a){this._el=null,this._bgcolor=null,this._loader=new ResourceLoader(a)}Scenegraph.prototype={toJSON:function toJSON(a){return sceneToJSON(this.root,a||0)},mark:function mark(a,A,j){var mark=createMark(a,A=A||this.root.items[0]);return A.items[j]=mark,mark.zindex&&(mark.group.zdirty=!0),mark}},vega_scenegraph_module_Handler.prototype={initialize:function initialize(a,A,j){return this._el=a,this._obj=j||null,this.origin(A)},element:function element(){return this._el},canvas:function canvas(){return this._el&&this._el.firstChild},origin:function origin(a){return arguments.length?(this._origin=a||[0,0],this):this._origin.slice()},scene:function scene(a){return arguments.length?(this._scene=a,this):this._scene},on:function on(){},off:function off(){},_handlerIndex:function _handlerIndex(a,A,j){for(var P=a?a.length:0;--P>=0;)if(a[P].type===A&&(!j||a[P].handler===j))return P;return-1},handlers:function handlers(a){var A=this._handlers,j=[];if(a)j.push.apply(j,Object(xt.a)(A[this.eventName(a)]));else for(var P in A)j.push.apply(j,Object(xt.a)(A[P]));return j},eventName:function eventName(a){var A=a.indexOf(".");return A<0?a:a.slice(0,A)},handleHref:function handleHref(a,A,j){this._loader.sanitize(j,{context:"href"}).then((function(A){var j=new MouseEvent(a.type,a),P=domCreate(null,"a");for(var B in A)P.setAttribute(B,A[B]);P.dispatchEvent(j)})).catch((function(){}))},handleTooltip:function handleTooltip(a,A,j){if(A&&null!=A.tooltip){A=function resolveItem(a,A,j,P){var B,q,ne=a&&a.mark;if(ne&&(B=ho[ne.marktype]).tip){for((q=vega_scenegraph_module_point(A,j))[0]-=P[0],q[1]-=P[1];a=a.mark.group;)q[0]-=a.x||0,q[1]-=a.y||0;a=B.tip(ne.items,q)}return a}(A,a,this.canvas(),this._origin);var P=j&&A&&A.tooltip||null;this._tooltip.call(this._obj,this,a,A,P)}},getItemBoundingClientRect:function getItemBoundingClientRect(a){var A=this.canvas();if(A){for(var j=A.getBoundingClientRect(),P=this._origin,B=a.bounds,q=B.width(),ne=B.height(),ie=B.x1+P[0]+j.left,oe=B.y1+P[1]+j.top;a.mark&&(a=a.mark.group);)ie+=a.x||0,oe+=a.y||0;return{x:ie,y:oe,width:q,height:ne,left:ie,top:oe,right:ie+q,bottom:oe+ne}}}},vega_scenegraph_module_Renderer.prototype={initialize:function initialize(a,A,j,P,B){return this._el=a,this.resize(A,j,P,B)},element:function element(){return this._el},canvas:function canvas(){return this._el&&this._el.firstChild},background:function background(a){return 0===arguments.length?this._bgcolor:(this._bgcolor=a,this)},resize:function resize(a,A,j,P){return this._width=a,this._height=A,this._origin=j||[0,0],this._scale=P||1,this},dirty:function dirty(){},render:function render(a){var A=this;return A._call=function(){A._render(a)},A._call(),A._call=null,A},_render:function _render(){},renderAsync:function renderAsync(a){var A=this.render(a);return this._ready?this._ready.then((function(){return A})):Promise.resolve(A)},_load:function _load(a,A){var j=this,P=j._loader[a](A);if(!j._ready){var B=j._call;j._ready=j._loader.ready().then((function(a){a&&B(),j._ready=null}))}return P},sanitizeURL:function sanitizeURL(a){return this._load("sanitizeURL",a)},loadImage:function loadImage(a){return this._load("loadImage",a)}};var mo="dragleave",vo="mousedown",yo="mousemove",bo="mouseout",_o="click",xo=["keydown","keypress","keyup","dragenter",mo,"dragover",vo,"mouseup",yo,bo,"mouseover",_o,"dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],wo=yo,ko=bo,Oo=_o;function CanvasHandler(a,A){vega_scenegraph_module_Handler.call(this,a,A),this._down=null,this._touch=null,this._first=!0,this._events={}}function eventListenerCheck(a,A){(function eventBundle(a){return"touchstart"===a||"touchmove"===a||"touchend"===a?["touchstart","touchmove","touchend"]:[a]})(A).forEach((function(A){return function addEventListener(a,A){var j=a.canvas();j&&!a._events[A]&&(a._events[A]=1,j.addEventListener(A,a[A]?function(j){return a[A](j)}:function(j){return a.fire(A,j)}))}(a,A)}))}function move(a,A,j){return function(P){var B=this._active,q=this.pickEvent(P);q===B||(B&&B.exit||this.fire(j,P),this._active=q,this.fire(A,P)),this.fire(a,P)}}function inactive(a){return function(A){this.fire(a,A),this._active=null}}Object(ve.z)(CanvasHandler,vega_scenegraph_module_Handler,{initialize:function initialize(a,A,j){var P=this;return this._canvas=a&&domFind(a,"canvas"),[_o,vo,yo,bo,mo].forEach((function(a){return eventListenerCheck(P,a)})),vega_scenegraph_module_Handler.prototype.initialize.call(this,a,A,j)},canvas:function canvas(){return this._canvas},context:function context(){return this._canvas.getContext("2d")},events:xo,DOMMouseScroll:function DOMMouseScroll(a){this.fire("mousewheel",a)},mousemove:move(yo,"mouseover",bo),dragover:move("dragover","dragenter",mo),mouseout:inactive(bo),dragleave:inactive(mo),mousedown:function mousedown(a){this._down=this._active,this.fire(vo,a)},click:function click(a){this._down===this._active&&(this.fire(_o,a),this._down=null)},touchstart:function touchstart(a){this._touch=this.pickEvent(a.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",a,!0)},touchmove:function touchmove(a){this.fire("touchmove",a,!0)},touchend:function touchend(a){this.fire("touchend",a,!0),this._touch=null},fire:function fire(a,A,j){var P=j?this._touch:this._active,B=this._handlers[a];if(A.vegaType=a,a===Oo&&P&&P.href?this.handleHref(A,P,P.href):a!==wo&&a!==ko||this.handleTooltip(A,P,a!==ko),B)for(var q=0,ne=B.length;q<ne;++q)B[q].handler.call(this._obj,A,P)},on:function on(a,A){var j=this.eventName(a),P=this._handlers;return this._handlerIndex(P[j],a,A)<0&&(eventListenerCheck(this,a),(P[j]||(P[j]=[])).push({type:a,handler:A})),this},off:function off(a,A){var j=this.eventName(a),P=this._handlers[j],B=this._handlerIndex(P,a,A);return B>=0&&P.splice(B,1),this},pickEvent:function pickEvent(a){var A=vega_scenegraph_module_point(a,this._canvas),j=this._origin;return this.pick(this._scene,A[0],A[1],A[0]-j[0],A[1]-j[1])},pick:function pick(a,A,j,P,B){var q=this.context();return ho[a.marktype].pick.call(this,q,a,A,j,P,B)}});var So=function devicePixelRatio(){return"undefined"!==typeof window&&window.devicePixelRatio||1}();function CanvasRenderer(a){vega_scenegraph_module_Renderer.call(this,a),this._options={},this._redraw=!1,this._dirty=new Bounds,this._tempb=new Bounds}var Eo=vega_scenegraph_module_Renderer.prototype;function SVGHandler(a,A){vega_scenegraph_module_Handler.call(this,a,A);var j=this;j._hrefHandler=Co(j,(function(a,A){A&&A.href&&j.handleHref(a,A,A.href)})),j._tooltipHandler=Co(j,(function(a,A){j.handleTooltip(a,A,a.type!==ko)}))}Object(ve.z)(CanvasRenderer,vega_scenegraph_module_Renderer,{initialize:function initialize(a,A,j,P,B,q){return this._options=q||{},this._canvas=this._options.externalContext?null:domCanvas(1,1,this._options.type),a&&this._canvas&&(domClear(a,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Eo.initialize.call(this,a,A,j,P,B)},resize:function resize(a,A,j,P){if(Eo.resize.call(this,a,A,j,P),this._canvas)!function _resize(a,A,j,P,B,q){var ne="undefined"!==typeof HTMLElement&&a instanceof HTMLElement&&null!=a.parentNode,ie=a.getContext("2d"),oe=ne?So:B;for(var se in a.width=A*oe,a.height=j*oe,q)ie[se]=q[se];return ne&&1!==oe&&(a.style.width=A+"px",a.style.height=j+"px"),ie.pixelRatio=oe,ie.setTransform(oe,0,0,oe,oe*P[0],oe*P[1]),a}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var B=this._options.externalContext;B||Object(ve.o)("CanvasRenderer is missing a valid canvas or context"),B.scale(this._scale,this._scale),B.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function canvas(){return this._canvas},context:function context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function dirty(a){for(var A=this._tempb.clear().union(a.bounds),j=a.mark.group;j;)A.translate(j.x||0,j.y||0),j=j.mark.group;this._dirty.union(A)},_render:function _render(a){var A=this.context(),j=this._origin,P=this._width,B=this._height,q=this._dirty,ne=function viewBounds(a,A,j){return(new Bounds).set(0,0,A,j).translate(-a[0],-a[1])}(j,P,B);A.save();var ie=this._redraw||q.empty()?(this._redraw=!1,ne.expand(1)):function clipToBounds(a,A,j){return A.expand(1).round(),a.pixelRatio%1&&A.scale(a.pixelRatio).round().scale(1/a.pixelRatio),A.translate(-j[0]%1,-j[1]%1),a.beginPath(),a.rect(A.x1,A.y1,A.width(),A.height()),a.clip(),A}(A,ne.intersect(q),j);return this.clear(-j[0],-j[1],P,B),this.draw(A,a,ie),A.restore(),q.clear(),this},draw:function draw(a,A,j){var P=ho[A.marktype];A.clip&&function vega_scenegraph_module_clip(a,A){var j=A.clip;a.save(),Object(ve.E)(j)?(a.beginPath(),j(a),a.clip()):clipGroup(a,A.group)}(a,A),P.draw.call(this,a,A,j),A.clip&&a.restore()},clear:function clear(a,A,j,P){var B=this._options,q=this.context();"pdf"===B.type||B.externalContext||q.clearRect(a,A,j,P),null!=this._bgcolor&&(q.fillStyle=this._bgcolor,q.fillRect(a,A,j,P))}});var Co=function listener(a,A){return function(j){var P=j.target.__data__;P=Array.isArray(P)?P[0]:P,j.vegaType=j.type,A.call(a._obj,j,P)}};Object(ve.z)(SVGHandler,vega_scenegraph_module_Handler,{initialize:function initialize(a,A,j){var P=this._svg;return P&&(P.removeEventListener(Oo,this._hrefHandler),P.removeEventListener(wo,this._tooltipHandler),P.removeEventListener(ko,this._tooltipHandler)),this._svg=P=a&&domFind(a,"svg"),P&&(P.addEventListener(Oo,this._hrefHandler),P.addEventListener(wo,this._tooltipHandler),P.addEventListener(ko,this._tooltipHandler)),vega_scenegraph_module_Handler.prototype.initialize.call(this,a,A,j)},canvas:function canvas(){return this._svg},on:function on(a,A){var j=this.eventName(a),P=this._handlers;if(this._handlerIndex(P[j],a,A)<0){var B={type:a,handler:A,listener:Co(this,A)};(P[j]||(P[j]=[])).push(B),this._svg&&this._svg.addEventListener(j,B.listener)}return this},off:function off(a,A){var j=this.eventName(a),P=this._handlers[j],B=this._handlerIndex(P,a,A);return B>=0&&(this._svg&&this._svg.removeEventListener(j,P[B].listener),P.splice(B,1)),this}});var To=function bundle(a,A,j){var P;return P={},Object(wt.a)(P,"role",a),Object(wt.a)(P,"aria-roledescription",A),Object(wt.a)(P,"aria-label",j||void 0),P},Do=Object(ve.fb)(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Ao={axis:{desc:"axis",caption:function axisCaption(a){var A=a.datum,j=a.orient,P=A.title?extractTitle(a):null,B=a.context,q=B.scales[A.scale].value,ne=B.dataflow.locale(),ie=q.type;return"".concat("left"===j||"right"===j?"Y":"X","-axis")+(P?" titled '".concat(P,"'"):"")+" for a ".concat(isDiscrete(ie)?"discrete":ie," scale")+" with ".concat(domainCaption(ne,q,a))}},legend:{desc:"legend",caption:function legendCaption(a){var A=a.datum,j=A.title?extractTitle(a):null,P="".concat(A.type||""," legend").trim(),B=A.scales,q=Object.keys(B),ne=a.context,ie=ne.scales[B[q[0]]].value,oe=ne.dataflow.locale();return function capitalize(a){return a.length?a[0].toUpperCase()+a.slice(1):a}(P)+(j?" titled '".concat(j,"'"):"")+" for ".concat(function channelCaption(a){return(a=a.map((function(a){return a+("fill"===a||"stroke"===a?" color":"")}))).length<2?a[0]:a.slice(0,-1).join(", ")+" and "+Object(ve.W)(a)}(q))+" with ".concat(domainCaption(oe,ie,a))}},"title-text":{desc:"title",caption:function caption(a){return"Title text '".concat(titleCaption(a),"'")}},"title-subtitle":{desc:"subtitle",caption:function caption(a){return"Subtitle text '".concat(titleCaption(a),"'")}}},jo={ariaRole:"role",ariaRoleDescription:"aria-roledescription",description:"aria-label"};function ariaItemAttributes(a,A){var j=!1===A.aria;if(a("aria-hidden",j||void 0),j||null==A.description)for(var P in jo)a(jo[P],void 0);else{var B=A.mark.marktype;a("aria-label",A.description),a("role",A.ariaRole||("group"===B?"graphics-object":"graphics-symbol")),a("aria-roledescription",A.ariaRoleDescription||"".concat(B," mark"))}}function ariaMarkAttributes(a){return!1===a.aria?Object(wt.a)({},"aria-hidden",!0):Do[a.role]?null:Ao[a.role]?function ariaGuide(a,A){try{var j=a.items[0],P=A.caption||function(){return""};return To(A.role||"graphics-symbol",A.desc,j.description||P(j))}catch(B){return null}}(a,Ao[a.role]):function ariaMark(a){var A=a.marktype,j="group"===A||"text"===A||a.items.some((function(a){return null!=a.description&&!1!==a.aria}));return To(j?"graphics-object":"graphics-symbol","".concat(A," mark container"),a.description)}(a)}function titleCaption(a){return Object(ve.i)(a.text).join(" ")}function extractTitle(a){try{return Object(ve.i)(Object(ve.W)(a.items).items[0].text).join(" ")}catch(A){return null}}var Fo=function innerText(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};function markup(){var a="",A="",j="",P=[],B=function clear(){return A=j=""},q=function push(q){A&&(a+="".concat(A,">").concat(j),B()),P.push(q)},ne=function attr(a,j){return null!=j&&(A+=" ".concat(a,'="').concat(function attrText(a){return Fo(a).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")}(j),'"')),ie},ie={open:function open(a){q(a),A="<"+a;for(var j=arguments.length,P=new Array(j>1?j-1:0),B=1;B<j;B++)P[B-1]=arguments[B];for(var oe=0,se=P;oe<se.length;oe++){var le=se[oe];for(var he in le)ne(he,le[he])}return ie},close:function close(){var q=P.pop();return a+=A?A+(j?">".concat(j,"</").concat(q,">"):"/>"):"</".concat(q,">"),B(),ie},attr:ne,text:function text(a){return j+=Fo(a),ie},toString:function toString(){return a}};return ie}var Po=function serializeXML(a){return function _serialize(a,A){if(a.open(A.tagName),A.hasAttributes())for(var j=A.attributes,P=j.length,B=0;B<P;++B)a.attr(j[B].name,j[B].value);if(A.hasChildNodes())for(var q=A.childNodes,ne=q.length,ie=0;ie<ne;ie++){var oe=q[ie];3===oe.nodeType?a.text(oe.nodeValue):_serialize(a,oe)}return a.close()}(markup(),a)+""};var Ro={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},Mo={fill:"none","stroke-miterlimit":10},Lo="http://www.w3.org/2000/xmlns/",Io=Za.xmlns;function SVGRenderer(a){vega_scenegraph_module_Renderer.call(this,a),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var No=vega_scenegraph_module_Renderer.prototype;function dirtyParents(a,A){for(;a&&a.dirty!==A;a=a.mark.group){if(a.dirty=A,!a.mark||a.mark.dirty===A)return;a.mark.dirty=A}}function updateGradient(a,A,j){var P,B,q;if("radial"===A.gradient){var ne=domChild(a,j++,"pattern",Io);setAttributes(ne,{id:"p_"+A.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),setAttributes(ne=domChild(ne,0,"rect",Io),{width:1,height:1,fill:"url(".concat(vega_scenegraph_module_href(),"#").concat(A.id,")")}),setAttributes(a=domChild(a,j++,"radialGradient",Io),{id:A.id,fx:A.x1,fy:A.y1,fr:A.r1,cx:A.x2,cy:A.y2,r:A.r2})}else setAttributes(a=domChild(a,j++,"linearGradient",Io),{id:A.id,x1:A.x1,x2:A.x2,y1:A.y1,y2:A.y2});for(P=0,B=A.stops.length;P<B;++P)(q=domChild(a,P,"stop",Io)).setAttribute("offset",A.stops[P].offset),q.setAttribute("stop-color",A.stops[P].color);return domClear(a,P),j}function updateClipping(a,A,j){return(a=domChild(a,j,"clipPath",Io)).setAttribute("id",A.id),A.path?domChild(a,0,"path",Io).setAttribute("d",A.path):setAttributes(domChild(a,0,"rect",Io),{x:0,y:0,width:A.width,height:A.height}),domClear(a,1),j+1}function vega_scenegraph_module_bind(a,A,j,P,B){var q,ne=a._svg;if(!ne&&(ne=domCreate(q=A.ownerDocument,P,Io),a._svg=ne,a.mark&&(ne.__data__=a,ne.__values__={fill:"default"},"g"===P))){var ie=domCreate(q,"path",Io);ne.appendChild(ie),ie.__data__=a;var oe=domCreate(q,"g",Io);ne.appendChild(oe),oe.__data__=a;var se=domCreate(q,"path",Io);ne.appendChild(se),se.__data__=a,se.__values__={fill:"default"}}return(ne.ownerSVGElement!==B||function siblingCheck(a,A){return a.parentNode&&a.parentNode.childNodes.length>1&&a.previousSibling!=A}(ne,j))&&A.insertBefore(ne,j?j.nextSibling:A.firstChild),ne}Object(ve.z)(SVGRenderer,vega_scenegraph_module_Renderer,{initialize:function initialize(a,A,j,P,B){return this._defs={},this._clearDefs(),a&&(this._svg=domChild(a,0,"svg",Io),this._svg.setAttributeNS(Lo,"xmlns",Io),this._svg.setAttributeNS(Lo,"xmlns:xlink",Za["xmlns:xlink"]),this._svg.setAttribute("version",Za.version),this._svg.setAttribute("class","marks"),domClear(a,1),this._root=domChild(this._svg,0,"g",Io),setAttributes(this._root,Mo),domClear(this._svg,1)),this.background(this._bgcolor),No.initialize.call(this,a,A,j,P,B)},background:function background(a){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",a),No.background.apply(this,arguments)},resize:function resize(a,A,j,P){return No.resize.call(this,a,A,j,P),this._svg&&(setAttributes(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas:function canvas(){return this._svg},svg:function svg(){var a,svg=this._svg,A=this._bgcolor;if(!svg)return null;A&&(svg.removeAttribute("style"),setAttributes(a=domChild(svg,0,"rect",Io),{width:this._width,height:this._height,fill:A}));var j=Po(svg);return A&&(svg.removeChild(a),this._svg.style.setProperty("background-color",A)),j},_render:function _render(a){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,a),domClear(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function dirty(a){a.dirty!==this._dirtyID&&(a.dirty=this._dirtyID,this._dirty.push(a))},isDirty:function isDirty(a){return this._dirtyAll||!a._svg||a.dirty===this._dirtyID},_dirtyCheck:function _dirtyCheck(){this._dirtyAll=!0;var a=this._dirty;if(!a.length||!this._dirtyID)return!0;var A,j,P,B,q,ne,ie,oe=++this._dirtyID;for(q=0,ne=a.length;q<ne;++q)(j=(A=a[q]).mark).marktype!==P&&(P=j.marktype,B=ho[P]),j.zdirty&&j.dirty!==oe&&(this._dirtyAll=!1,dirtyParents(A,oe),j.items.forEach((function(a){a.dirty=oe}))),j.zdirty||(A.exit?(B.nested&&j.items.length?(ie=j.items[0])._svg&&this._update(B,ie._svg,ie):A._svg&&(ie=A._svg.parentNode)&&ie.removeChild(A._svg),A._svg=null):(A=B.nested?j.items[0]:A)._update!==oe&&(A._svg&&A._svg.ownerSVGElement?this._update(B,A._svg,A):(this._dirtyAll=!1,dirtyParents(A,oe)),A._update=oe));return!this._dirtyAll},mark:function mark(a,A,j){var P=this;if(!this.isDirty(A))return A._svg;var B=this._svg,q=ho[A.marktype],ne=!1===A.interactive?"none":null,ie="g"===q.tag,oe=null,se=0,le=vega_scenegraph_module_bind(A,a,j,"g",B);le.setAttribute("class",cssClass(A));var he=ariaMarkAttributes(A);for(var pe in he)setAttribute(le,pe,he[pe]);ie||setAttribute(le,"pointer-events",ne),setAttribute(le,"clip-path",A.clip?clip$1(this,A,A.group):null);var ge=function process(a){var A=P.isDirty(a),j=vega_scenegraph_module_bind(a,le,oe,q.tag,B);A&&(P._update(q,j,a),ie&&function recurse(a,A,j){A=A.lastChild.previousSibling;var P,B=0;vega_scenegraph_module_visit(j,(function(j){P=a.mark(A,j,P),++B})),domClear(A,1+B)}(P,j,a)),oe=j,++se};return q.nested?A.items.length&&ge(A.items[0]):vega_scenegraph_module_visit(A,ge),domClear(le,se),le},_update:function _update(a,A,j){Bo=A,Uo=A.__values__,ariaItemAttributes(emit,j),a.attr(emit,j,this);var P=zo[a.type];P&&P.call(this,a,A,j),Bo&&this.style(Bo,j)},style:function style(a,A){if(null!=A)for(var j in Ro){var P="font"===j?fontFamily(A):A[j];if(P!==Uo[j]){var B=Ro[j];null==P?a.removeAttribute(B):(isGradient(P)&&(P=gradientRef(P,this._defs.gradient,vega_scenegraph_module_href())),a.setAttribute(B,P+"")),Uo[j]=P}}},defs:function defs(){var a=this._svg,defs=this._defs,A=defs.el,j=0;for(var P in defs.gradient)A||(defs.el=A=domChild(a,1,"defs",Io)),j=updateGradient(A,defs.gradient[P],j);for(var B in defs.clipping)A||(defs.el=A=domChild(a,1,"defs",Io)),j=updateClipping(A,defs.clipping[B],j);A&&(0===j?(a.removeChild(A),defs.el=null):domClear(A,j))},_clearDefs:function _clearDefs(){var a=this._defs;a.gradient={},a.clipping={}}});var Bo=null,Uo=null,zo={group:function group(a,A,j){var P=Bo=A.childNodes[2];Uo=P.__values__,a.foreground(emit,j,this),Uo=A.__values__,Bo=A.childNodes[1],a.content(emit,j,this);var B=Bo=A.childNodes[0];a.background(emit,j,this);var q=!1===j.mark.interactive?"none":null;if(q!==Uo.events&&(setAttribute(P,"pointer-events",q),setAttribute(B,"pointer-events",q),Uo.events=q),j.strokeForeground&&j.stroke){var ne=j.fill;setAttribute(P,"display",null),this.style(B,j),setAttribute(B,"stroke",null),ne&&(j.fill=null),Uo=P.__values__,this.style(P,j),ne&&(j.fill=ne),Bo=null}else setAttribute(P,"display","none")},image:function image(a,A,j){!1===j.smooth?(setStyle(A,"image-rendering","optimizeSpeed"),setStyle(A,"image-rendering","pixelated")):setStyle(A,"image-rendering",null)},text:function text(a,A,j){var P,B,q,ne,ie=textLines(j);Object(ve.B)(ie)?(P=(B=ie.map((function(a){return textValue(j,a)}))).join("\n"))!==Uo.text&&(domClear(A,0),q=A.ownerDocument,ne=lineHeight(j),B.forEach((function(a,P){var B=domCreate(q,"tspan",Io);B.__data__=j,B.textContent=a,P&&(B.setAttribute("x",0),B.setAttribute("dy",ne)),A.appendChild(B)})),Uo.text=P):(B=textValue(j,ie))!==Uo.text&&(A.textContent=B,Uo.text=B),setAttribute(A,"font-family",fontFamily(j)),setAttribute(A,"font-size",vega_scenegraph_module_fontSize(j)+"px"),setAttribute(A,"font-style",j.fontStyle),setAttribute(A,"font-variant",j.fontVariant),setAttribute(A,"font-weight",j.fontWeight)}};function emit(a,A,j){A!==Uo[a]&&(j?function setAttributeNS(a,A,j,P){null!=j?a.setAttributeNS(P,A,j):a.removeAttributeNS(P,A)}(Bo,a,A,j):setAttribute(Bo,a,A),Uo[a]=A)}function setStyle(a,A,j){j!==Uo[A]&&(null==j?a.style.removeProperty(A):a.style.setProperty(A,j+""),Uo[A]=j)}function setAttributes(a,A){for(var j in A)setAttribute(a,j,A[j])}function setAttribute(a,A,j){null!=j?a.setAttribute(A,j):a.removeAttribute(A)}function vega_scenegraph_module_href(){var a;return"undefined"===typeof window?"":(a=window.location).hash?a.href.slice(0,-a.hash.length):a.href}function SVGStringRenderer(a){vega_scenegraph_module_Renderer.call(this,a),this._text=null,this._defs={gradient:{},clipping:{}}}Object(ve.z)(SVGStringRenderer,vega_scenegraph_module_Renderer,{svg:function svg(){return this._text},_render:function _render(a){var A=markup();A.open("svg",Object(ve.p)({},Za,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));var j=this._bgcolor;return j&&"transparent"!==j&&"none"!==j&&A.open("rect",{width:this._width,height:this._height,fill:j}).close(),A.open("g",Mo,{transform:"translate("+this._origin+")"}),this.mark(A,a),A.close(),this.defs(A),this._text=A.close()+"",this},mark:function mark(a,A){var j=this,P=ho[A.marktype],B=P.tag,q=[ariaItemAttributes,P.attr];a.open("g",{class:cssClass(A),"clip-path":A.clip?clip$1(this,A,A.group):null},ariaMarkAttributes(A),{"pointer-events":"g"!==B&&!1===A.interactive?"none":null});var ne=function process(ne){var ie=j.href(ne);if(ie&&a.open("a",ie),a.open(B,j.attr(A,ne,q,"g"!==B?B:null)),"text"===B){var oe=textLines(ne);if(Object(ve.B)(oe))for(var se={x:0,dy:lineHeight(ne)},le=0;le<oe.length;++le)a.open("tspan",le?se:null).text(textValue(ne,oe[le])).close();else a.text(textValue(ne,oe))}else if("g"===B){var he=ne.strokeForeground,pe=ne.fill,ge=ne.stroke;he&&ge&&(ne.stroke=null),a.open("path",j.attr(A,ne,P.background,"bgrect")).close(),a.open("g",j.attr(A,ne,P.content)),vega_scenegraph_module_visit(ne,(function(A){return j.mark(a,A)})),a.close(),he&&ge?(pe&&(ne.fill=null),ne.stroke=ge,a.open("path",j.attr(A,ne,P.foreground,"bgrect")).close(),pe&&(ne.fill=pe)):a.open("path",j.attr(A,ne,P.foreground,"bgfore")).close()}a.close(),ie&&a.close()};return P.nested?A.items&&A.items.length&&ne(A.items[0]):vega_scenegraph_module_visit(A,ne),a.close()},href:function href(a){var A,j=this,href=a.href;if(href){if(A=this._hrefs&&this._hrefs[href])return A;this.sanitizeURL(href).then((function(a){a["xlink:href"]=a.href,a.href=null,(j._hrefs||(j._hrefs={}))[href]=a}))}return null},attr:function attr(a,A,j,P){var B=this,q={},ne=function emit(a,A,j,P){q[P||a]=A};return Array.isArray(j)?j.forEach((function(a){return a(ne,A,B)})):j(ne,A,this),P&&function vega_scenegraph_module_style(a,A,j,P,B){if(null==A)return a;"bgrect"===P&&!1===j.interactive&&(a["pointer-events"]="none");if("bgfore"===P&&(!1===j.interactive&&(a["pointer-events"]="none"),a.display="none",null!==A.fill))return a;"image"===P&&!1===A.smooth&&(a.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===P&&(a["font-family"]=fontFamily(A),a["font-size"]=vega_scenegraph_module_fontSize(A)+"px",a["font-style"]=A.fontStyle,a["font-variant"]=A.fontVariant,a["font-weight"]=A.fontWeight);for(var q in Ro){var ne=A[q],ie=Ro[q];("transparent"!==ne||"fill"!==ie&&"stroke"!==ie)&&null!=ne&&(isGradient(ne)&&(ne=gradientRef(ne,B.gradient,"")),a[ie]=ne)}return a}(q,A,a,P,this._defs),q},defs:function defs(a){var A=this._defs.gradient,j=this._defs.clipping;if(0!==Object.keys(A).length+Object.keys(j).length){for(var P in a.open("defs"),A){var B=A[P],q=B.stops;"radial"===B.gradient?(a.open("pattern",{id:"p_"+P,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a.open("rect",{width:"1",height:"1",fill:"url(#"+P+")"}).close(),a.close(),a.open("radialGradient",{id:P,fx:B.x1,fy:B.y1,fr:B.r1,cx:B.x2,cy:B.y2,r:B.r2})):a.open("linearGradient",{id:P,x1:B.x1,x2:B.x2,y1:B.y1,y2:B.y2});for(var ne=0;ne<q.length;++ne)a.open("stop",{offset:q[ne].offset,"stop-color":q[ne].color}).close();a.close()}for(var ie in j){var oe=j[ie];a.open("clipPath",{id:ie}),oe.path?a.open("path",{d:oe.path}).close():a.open("rect",{x:0,y:0,width:oe.width,height:oe.height}).close(),a.close()}a.close()}}});var qo={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},Wo={};function renderModule(a,A){return a=String(a||"").toLowerCase(),arguments.length>1?(Wo[a]=A,this):Wo[a]}function vega_scenegraph_module_intersect(a,A,j){var P=[],B=(new Bounds).union(A),q=a.marktype;return q?intersectMark(a,B,j,P):"group"===q?intersectGroup(a,B,j,P):Object(ve.o)("Intersect scene must be mark node or group item.")}function intersectMark(a,A,j,P){if(function visitMark(a,A,j){return a.bounds&&A.intersects(a.bounds)&&("group"===a.marktype||!1!==a.interactive&&(!j||j(a)))}(a,A,j)){var B=a.items,q=a.marktype,ne=B.length,ie=0;if("group"===q)for(;ie<ne;++ie)intersectGroup(B[ie],A,j,P);else for(var oe=ho[q].isect;ie<ne;++ie){var se=B[ie];intersectItem(se,A,oe)&&P.push(se)}}return P}function intersectGroup(a,A,j,P){j&&j(a.mark)&&intersectItem(a,A,ho.group.isect)&&P.push(a);var B=a.items,q=B&&B.length;if(q){var ne=a.x||0,ie=a.y||0;A.translate(-ne,-ie);for(var oe=0;oe<q;++oe)intersectMark(B[oe],A,j,P);A.translate(ne,ie)}return P}function intersectItem(a,A,j){var P=a.bounds;return A.encloses(P)||A.intersects(P)&&j(a,A)}Wo.canvas=Wo.png={renderer:CanvasRenderer,headless:CanvasRenderer,handler:CanvasHandler},Wo.svg={renderer:SVGRenderer,headless:SVGStringRenderer,handler:SVGHandler},Wo.none={};var Ho=new Bounds;function boundClip(a){var A=a.clip;if(Object(ve.E)(A))A(boundContext(Ho.clear()));else{if(!A)return;Ho.set(0,0,a.group.width,a.group.height)}a.bounds.intersect(Ho)}function sceneEqual(a,A,j){return a===A||("path"===j?pathEqual(a,A):a instanceof Date&&A instanceof Date?+a===+A:Object(ve.G)(a)&&Object(ve.G)(A)?Math.abs(a-A)<=1e-9:a&&A&&(Object(ve.H)(a)||Object(ve.H)(A))?function objectEqual(a,A){var j,P,B=Object.keys(a),q=Object.keys(A);if(B.length!==q.length)return!1;for(B.sort(),q.sort(),P=B.length-1;P>=0;P--)if(B[P]!=q[P])return!1;for(P=B.length-1;P>=0;P--)if(j=B[P],!sceneEqual(a[j],A[j],j))return!1;return typeof a===typeof A}(a,A):a==A)}function pathEqual(a,A){return sceneEqual(pathParse(a),pathParse(A))}function resetSVGDefIds(){resetSVGClipId(),function resetSVGGradientId(){Br=0}()}var Go="top",Vo="left",Yo="right",$o="end",Ko="row";function Bound(a){Transform.call(this,null,a)}function vega_view_transforms_module_boundItem(a,A,j){return A(a.bounds.clear(),a,j)}Object(ve.z)(Bound,Transform,{transform:function transform(a,A){var j,P=A.dataflow,B=a.mark,q=B.marktype,ne=ho[q],ie=ne.bound,oe=B.bounds;if(ne.nested)B.items.length&&P.dirty(B.items[0]),oe=vega_view_transforms_module_boundItem(B,ie),B.items.forEach((function(a){a.bounds.clear().union(oe)}));else if("group"===q||a.modified())switch(A.visit(A.MOD,(function(a){return P.dirty(a)})),oe.clear(),B.items.forEach((function(a){return oe.union(vega_view_transforms_module_boundItem(a,ie))})),B.role){case"axis":case"legend":case"title":A.reflow()}else j=A.changed(A.REM),A.visit(A.ADD,(function(a){oe.union(vega_view_transforms_module_boundItem(a,ie))})),A.visit(A.MOD,(function(a){j=j||oe.alignsWith(a.bounds),P.dirty(a),oe.union(vega_view_transforms_module_boundItem(a,ie))})),j&&(oe.clear(),B.items.forEach((function(a){return oe.union(a.bounds)})));return boundClip(B),A.modifies("bounds")}});function vega_view_transforms_module_Identifier(a){Transform.call(this,0,a)}function Mark(a){Transform.call(this,null,a)}function Overlap(a){Transform.call(this,null,a)}vega_view_transforms_module_Identifier.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Object(ve.z)(vega_view_transforms_module_Identifier,Transform,{transform:function transform(a,A){var j=function getCounter(a){return a._signals[":vega_identifier:"]||(a._signals[":vega_identifier:"]=a.add(0))}(A.dataflow),P=a.as,B=j.value;return A.visit(A.ADD,(function(a){return a[P]=a[P]||++B})),j.set(this.value=B),A}}),Object(ve.z)(Mark,Transform,{transform:function transform(a,A){var j=this.value;j||((j=A.dataflow.scenegraph().mark(a.markdef,function vega_view_transforms_module_lookup(a){var A=a.groups,j=a.parent;return A&&1===A.size?A.get(Object.keys(A.object)[0]):A&&j?A.lookup(j):null}(a),a.index)).group.context=a.context,a.context.group||(a.context.group=j.group),j.source=this.source,j.clip=a.clip,j.interactive=a.interactive,this.value=j);var P="group"===j.marktype?GroupItem:Item;return A.visit(A.ADD,(function(a){return P.call(a,j)})),(a.modified("clip")||a.modified("interactive"))&&(j.clip=a.clip,j.interactive=!!a.interactive,j.zdirty=!0,A.reflow()),j.items=A.source,A}});var Xo={parity:function parity(a){return a.filter((function(a,A){return A%2?a.opacity=0:1}))},greedy:function greedy(a,A){var j;return a.filter((function(a,P){return P&&Jo(j.bounds,a.bounds,A)?a.opacity=0:(j=a,1)}))}},Jo=function intersect(a,A,j){return j>Math.max(A.x1-a.x2,a.x1-A.x2,A.y1-a.y2,a.y1-A.y2)},Qo=function hasOverlap(a,A){for(var j,P=1,B=a.length,q=a[0].bounds;P<B;q=j,++P)if(Jo(q,j=a[P].bounds,A))return!0},Zo=function hasBounds(a){var A=a.bounds;return A.width()>1&&A.height()>1},es=function reset(a){return a.forEach((function(a){return a.opacity=1})),a},ns=function reflow(a,A){return a.reflow(A.modified()).modifies("opacity")};function Render(a){Transform.call(this,null,a)}Object(ve.z)(Overlap,Transform,{transform:function transform(a,A){var j,P,B=Xo[a.method]||Xo.parity,q=a.separation||0,ne=A.materialize(A.SOURCE).source;if(ne&&ne.length){if(!a.method)return a.modified("method")&&(es(ne),A=ns(A,a)),A;if((ne=ne.filter(Zo)).length){if(a.sort&&(ne=ne.slice().sort(a.sort)),j=es(ne),A=ns(A,a),j.length>=3&&Qo(j,q)){do{j=B(j,q)}while(j.length>=3&&Qo(j,q));j.length<3&&!Object(ve.W)(ne).opacity&&(j.length>1&&(Object(ve.W)(j).opacity=0),Object(ve.W)(ne).opacity=1)}a.boundScale&&a.boundTolerance>=0&&(P=function boundTest(a,A,j){var P=a.range(),B=new Bounds;return A===Go||"bottom"===A?B.set(P[0],-1/0,P[1],1/0):B.set(-1/0,P[0],1/0,P[1]),B.expand(j||1),function(a){return B.encloses(a.bounds)}}(a.boundScale,a.boundOrient,+a.boundTolerance),ne.forEach((function(a){P(a)||(a.opacity=0)})));var ie=j[0].mark.bounds.clear();return ne.forEach((function(a){a.opacity&&ie.union(a.bounds)})),A}}}}),Object(ve.z)(Render,Transform,{transform:function transform(a,A){var j=A.dataflow;if(A.visit(A.ALL,(function(a){return j.dirty(a)})),A.fields&&A.fields.zindex){var P=A.source&&A.source[0];P&&(P.mark.zdirty=!0)}}});var rs=new Bounds;function vega_view_transforms_module_set(a,A,j){return a[A]===j?0:(a[A]=j,1)}function isYAxis(a){var A=a.items[0].orient;return A===Vo||A===Yo}function axisLayout(a,A,j,P){var B,q,ne=A.items[0],ie=ne.datum,oe=null!=ne.translate?ne.translate:.5,se=ne.orient,le=function axisIndices(a){var A=+a.grid;return[a.ticks?A++:-1,a.labels?A++:-1,A+ +a.domain]}(ie),he=ne.range,pe=ne.offset,ge=ne.position,me=ne.minExtent,ve=ne.maxExtent,ye=ie.title&&ne.items[le[2]].items[0],_e=ne.titlePadding,we=ne.bounds,ke=ye&&multiLineOffset(ye),Oe=0,Se=0;switch(rs.clear().union(we),we.clear(),(B=le[0])>-1&&we.union(ne.items[B].bounds),(B=le[1])>-1&&we.union(ne.items[B].bounds),se){case Go:Oe=ge||0,Se=-pe,q=Math.max(me,Math.min(ve,-we.y1)),we.add(0,-q).add(he,0),ye&&axisTitleLayout(a,ye,q,_e,ke,0,-1,we);break;case Vo:Oe=-pe,Se=ge||0,q=Math.max(me,Math.min(ve,-we.x1)),we.add(-q,0).add(0,he),ye&&axisTitleLayout(a,ye,q,_e,ke,1,-1,we);break;case Yo:Oe=j+pe,Se=ge||0,q=Math.max(me,Math.min(ve,we.x2)),we.add(0,0).add(q,he),ye&&axisTitleLayout(a,ye,q,_e,ke,1,1,we);break;case"bottom":Oe=ge||0,Se=P+pe,q=Math.max(me,Math.min(ve,we.y2)),we.add(0,0).add(he,q),ye&&axisTitleLayout(a,ye,q,_e,0,0,1,we);break;default:Oe=ne.x,Se=ne.y}return boundStroke(we.translate(Oe,Se),ne),vega_view_transforms_module_set(ne,"x",Oe+oe)|vega_view_transforms_module_set(ne,"y",Se+oe)&&(ne.bounds=rs,a.dirty(ne),ne.bounds=we,a.dirty(ne)),ne.mark.bounds.clear().union(we)}function axisTitleLayout(a,A,j,P,B,q,ne,ie){var oe=A.bounds;if(A.auto){var se=ne*(j+B+P),le=0,he=0;a.dirty(A),q?le=(A.x||0)-(A.x=se):he=(A.y||0)-(A.y=se),A.mark.bounds.clear().union(oe.translate(-le,-he)),a.dirty(A)}ie.union(oe)}var is=function min(a,A){return Math.floor(Math.min(a,A))},os=function max(a,A){return Math.ceil(Math.max(a,A))};function bboxFlush(a){return(new Bounds).set(0,0,a.width||0,a.height||0)}function bboxFull(a){var A=a.bounds.clone();return A.empty()?A.set(0,0,0,0):A.translate(-(a.x||0),-(a.y||0))}function vega_view_transforms_module_get(a,A,j){var P=Object(ve.H)(a)?a[A]:a;return null!=P?P:void 0!==j?j:0}function offsetValue(a){return a<0?Math.ceil(-a):0}function gridLayout(a,A,j){var P,B,q,ne,ie,oe,se,le,he,pe,ge,me=!j.nodirty,ve="flush"===j.bounds?bboxFlush:bboxFull,ye=rs.set(0,0,0,0),_e=vega_view_transforms_module_get(j.align,"column"),we=vega_view_transforms_module_get(j.align,Ko),ke=vega_view_transforms_module_get(j.padding,"column"),Oe=vega_view_transforms_module_get(j.padding,Ko),Se=j.columns||A.length,Te=Se<=0?1:Math.ceil(A.length/Se),Ae=A.length,je=Array(Ae),Fe=Array(Se),Re=0,Me=Array(Ae),Ne=Array(Te),Be=0,Ue=Array(Ae),We=Array(Ae),Ve=Array(Ae);for(B=0;B<Se;++B)Fe[B]=0;for(B=0;B<Te;++B)Ne[B]=0;for(B=0;B<Ae;++B)oe=A[B],ie=Ve[B]=ve(oe),oe.x=oe.x||0,Ue[B]=0,oe.y=oe.y||0,We[B]=0,q=B%Se,ne=~~(B/Se),Re=Math.max(Re,se=Math.ceil(ie.x2)),Be=Math.max(Be,le=Math.ceil(ie.y2)),Fe[q]=Math.max(Fe[q],se),Ne[ne]=Math.max(Ne[ne],le),je[B]=ke+offsetValue(ie.x1),Me[B]=Oe+offsetValue(ie.y1),me&&a.dirty(A[B]);for(B=0;B<Ae;++B)B%Se===0&&(je[B]=0),B<Se&&(Me[B]=0);if("each"===_e)for(q=1;q<Se;++q){for(ge=0,B=q;B<Ae;B+=Se)ge<je[B]&&(ge=je[B]);for(B=q;B<Ae;B+=Se)je[B]=ge+Fe[q-1]}else if("all"===_e){for(ge=0,B=0;B<Ae;++B)B%Se&&ge<je[B]&&(ge=je[B]);for(B=0;B<Ae;++B)B%Se&&(je[B]=ge+Re)}else for(_e=!1,q=1;q<Se;++q)for(B=q;B<Ae;B+=Se)je[B]+=Fe[q-1];if("each"===we)for(ne=1;ne<Te;++ne){for(ge=0,P=(B=ne*Se)+Se;B<P;++B)ge<Me[B]&&(ge=Me[B]);for(B=ne*Se;B<P;++B)Me[B]=ge+Ne[ne-1]}else if("all"===we){for(ge=0,B=Se;B<Ae;++B)ge<Me[B]&&(ge=Me[B]);for(B=Se;B<Ae;++B)Me[B]=ge+Be}else for(we=!1,ne=1;ne<Te;++ne)for(P=(B=ne*Se)+Se;B<P;++B)Me[B]+=Ne[ne-1];for(he=0,B=0;B<Ae;++B)he=je[B]+(B%Se?he:0),Ue[B]+=he-A[B].x;for(q=0;q<Se;++q)for(pe=0,B=q;B<Ae;B+=Se)pe+=Me[B],We[B]+=pe-A[B].y;if(_e&&vega_view_transforms_module_get(j.center,"column")&&Te>1)for(B=0;B<Ae;++B)(he=(ie="all"===_e?Re:Fe[B%Se])-Ve[B].x2-A[B].x-Ue[B])>0&&(Ue[B]+=he/2);if(we&&vega_view_transforms_module_get(j.center,Ko)&&1!==Se)for(B=0;B<Ae;++B)(pe=(ie="all"===we?Be:Ne[~~(B/Se)])-Ve[B].y2-A[B].y-We[B])>0&&(We[B]+=pe/2);for(B=0;B<Ae;++B)ye.union(Ve[B].translate(Ue[B],We[B]));switch(he=vega_view_transforms_module_get(j.anchor,"x"),pe=vega_view_transforms_module_get(j.anchor,"y"),vega_view_transforms_module_get(j.anchor,"column")){case $o:he-=ye.width();break;case"middle":he-=ye.width()/2}switch(vega_view_transforms_module_get(j.anchor,Ko)){case $o:pe-=ye.height();break;case"middle":pe-=ye.height()/2}for(he=Math.round(he),pe=Math.round(pe),ye.clear(),B=0;B<Ae;++B)A[B].mark.bounds.clear();for(B=0;B<Ae;++B)(oe=A[B]).x+=Ue[B]+=he,oe.y+=We[B]+=pe,ye.union(oe.mark.bounds.union(oe.bounds.translate(Ue[B],We[B]))),me&&a.dirty(oe);return ye}function trellisLayout(a,A,j){var P,B,q,ne,ie,oe,se,le=function gridLayoutGroups(a){for(var A,j,P,B,q,ne,ie,oe=a.items,se=oe.length,le=0,he={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};le<se;++le)if(ie=(ne=oe[le]).items,"group"===ne.marktype)switch(ne.role){case"axis":case"legend":case"title":break;case"row-header":(A=he.rowheaders).push.apply(A,Object(xt.a)(ie));break;case"row-footer":(j=he.rowfooters).push.apply(j,Object(xt.a)(ie));break;case"column-header":(P=he.colheaders).push.apply(P,Object(xt.a)(ie));break;case"column-footer":(B=he.colfooters).push.apply(B,Object(xt.a)(ie));break;case"row-title":he.rowtitle=ie[0];break;case"column-title":he.coltitle=ie[0];break;default:(q=he.marks).push.apply(q,Object(xt.a)(ie))}return he}(A),he=le.marks,pe="flush"===j.bounds?boundFlush:boundFull,ge=j.offset,me=j.columns||he.length,ve=me<=0?1:Math.ceil(he.length/me),ye=ve*me,_e=gridLayout(a,he,j);_e.empty()&&_e.set(0,0,0,0),le.rowheaders&&(oe=vega_view_transforms_module_get(j.headerBand,Ko,null),P=layoutHeaders(a,le.rowheaders,he,me,ve,-vega_view_transforms_module_get(ge,"rowHeader"),is,0,pe,"x1",0,me,1,oe)),le.colheaders&&(oe=vega_view_transforms_module_get(j.headerBand,"column",null),B=layoutHeaders(a,le.colheaders,he,me,me,-vega_view_transforms_module_get(ge,"columnHeader"),is,1,pe,"y1",0,1,me,oe)),le.rowfooters&&(oe=vega_view_transforms_module_get(j.footerBand,Ko,null),q=layoutHeaders(a,le.rowfooters,he,me,ve,vega_view_transforms_module_get(ge,"rowFooter"),os,0,pe,"x2",me-1,me,1,oe)),le.colfooters&&(oe=vega_view_transforms_module_get(j.footerBand,"column",null),ne=layoutHeaders(a,le.colfooters,he,me,me,vega_view_transforms_module_get(ge,"columnFooter"),os,1,pe,"y2",ye-me,1,me,oe)),le.rowtitle&&(ie=vega_view_transforms_module_get(j.titleAnchor,Ko),se=vega_view_transforms_module_get(ge,"rowTitle"),se=ie===$o?q+se:P-se,oe=vega_view_transforms_module_get(j.titleBand,Ko,.5),layoutTitle(a,le.rowtitle,se,0,_e,oe)),le.coltitle&&(ie=vega_view_transforms_module_get(j.titleAnchor,"column"),se=vega_view_transforms_module_get(ge,"columnTitle"),se=ie===$o?ne+se:B-se,oe=vega_view_transforms_module_get(j.titleBand,"column",.5),layoutTitle(a,le.coltitle,se,1,_e,oe))}function boundFlush(a,A){return"x1"===A?a.x||0:"y1"===A?a.y||0:"x2"===A?(a.x||0)+(a.width||0):"y2"===A?(a.y||0)+(a.height||0):void 0}function boundFull(a,A){return a.bounds[A]}function layoutHeaders(a,A,j,P,B,q,ne,ie,oe,se,le,he,pe,ge){var me,ve,ye,_e,we,ke,Oe,Se,Te,Ae=j.length,je=0,Fe=0;if(!Ae)return je;for(me=le;me<Ae;me+=he)j[me]&&(je=ne(je,oe(j[me],se)));if(!A.length)return je;for(A.length>B&&(a.warn("Grid headers exceed limit: "+B),A=A.slice(0,B)),je+=q,ve=0,_e=A.length;ve<_e;++ve)a.dirty(A[ve]),A[ve].mark.bounds.clear();for(me=le,ve=0,_e=A.length;ve<_e;++ve,me+=he){for(we=(ke=A[ve]).mark.bounds,ye=me;ye>=0&&null==(Oe=j[ye]);ye-=pe);ie?(Se=null==ge?Oe.x:Math.round(Oe.bounds.x1+ge*Oe.bounds.width()),Te=je):(Se=je,Te=null==ge?Oe.y:Math.round(Oe.bounds.y1+ge*Oe.bounds.height())),we.union(ke.bounds.translate(Se-(ke.x||0),Te-(ke.y||0))),ke.x=Se,ke.y=Te,a.dirty(ke),Fe=ne(Fe,we[se])}return Fe}function layoutTitle(a,A,j,P,B,q){if(A){a.dirty(A);var ne=j,ie=j;P?ne=Math.round(B.x1+q*B.width()):ie=Math.round(B.y1+q*B.height()),A.bounds.translate(ne-(A.x||0),ie-(A.y||0)),A.mark.bounds.clear().union(A.bounds),A.x=ne,A.y=ie,a.dirty(A)}}function legendParams(a,A,j,P,B,q,ne){var ie=function lookup$1(a,A){var j=a[A]||{};return function(A,P){return null!=j[A]?j[A]:null!=a[A]?a[A]:P}}(j,A),oe=function vega_view_transforms_module_offsets(a,A){var j=-1/0;return a.forEach((function(a){null!=a.offset&&(j=Math.max(j,a.offset))})),j>-1/0?j:A}(a,ie("offset",0)),se=ie("anchor","start"),le=se===$o?1:"middle"===se?.5:0,he={align:"each",bounds:ie("bounds","flush"),columns:"vertical"===ie("direction")?1:a.length,padding:ie("margin",8),center:ie("center"),nodirty:!0};switch(A){case Vo:he.anchor={x:Math.floor(P.x1)-oe,column:$o,y:le*(ne||P.height()+2*P.y1),row:se};break;case Yo:he.anchor={x:Math.ceil(P.x2)+oe,y:le*(ne||P.height()+2*P.y1),row:se};break;case Go:he.anchor={y:Math.floor(B.y1)-oe,row:$o,x:le*(q||B.width()+2*B.x1),column:se};break;case"bottom":he.anchor={y:Math.ceil(B.y2)+oe,x:le*(q||B.width()+2*B.x1),column:se};break;case"top-left":he.anchor={x:oe,y:oe};break;case"top-right":he.anchor={x:q-oe,y:oe,column:$o};break;case"bottom-left":he.anchor={x:oe,y:ne-oe,row:$o};break;case"bottom-right":he.anchor={x:q-oe,y:ne-oe,column:$o,row:$o}}return he}function legendLayout(a,A){var j,P,B=A.items[0],q=B.datum,ne=B.orient,ie=B.bounds,oe=B.x,se=B.y;return B._bounds?B._bounds.clear().union(ie):B._bounds=ie.clone(),ie.clear(),function legendGroupLayout(a,A,j){var P=A.padding,B=P-j.x,q=P-j.y;if(A.datum.title){var ne=A.items[1].items[0],ie=ne.anchor,oe=A.titlePadding||0,se=P-ne.x,le=P-ne.y;switch(ne.orient){case Vo:B+=Math.ceil(ne.bounds.width())+oe;break;case Yo:case"bottom":break;default:q+=ne.bounds.height()+oe}switch((B||q)&&vega_view_transforms_module_translate(a,j,B,q),ne.orient){case Vo:le+=legendTitleOffset(A,j,ne,ie,1,1);break;case Yo:se+=legendTitleOffset(A,j,ne,$o,0,0)+oe,le+=legendTitleOffset(A,j,ne,ie,1,1);break;case"bottom":se+=legendTitleOffset(A,j,ne,ie,0,0),le+=legendTitleOffset(A,j,ne,$o,-1,0,1)+oe;break;default:se+=legendTitleOffset(A,j,ne,ie,0,0)}(se||le)&&vega_view_transforms_module_translate(a,ne,se,le),(se=Math.round(ne.bounds.x1-P))<0&&(vega_view_transforms_module_translate(a,j,-se,0),vega_view_transforms_module_translate(a,ne,-se,0))}else(B||q)&&vega_view_transforms_module_translate(a,j,B,q)}(a,B,B.items[0].items[0]),ie=function legendBounds(a,A){return a.items.forEach((function(a){return A.union(a.bounds)})),A.x1=a.padding,A.y1=a.padding,A}(B,ie),j=2*B.padding,P=2*B.padding,ie.empty()||(j=Math.ceil(ie.width()+j),P=Math.ceil(ie.height()+P)),"symbol"===q.type&&function legendEntryLayout(a){var A=a.reduce((function(a,A){return a[A.column]=Math.max(A.bounds.x2-A.x,a[A.column]||0),a}),{});a.forEach((function(a){a.width=A[a.column],a.height=a.bounds.y2-a.y}))}(B.items[0].items[0].items[0].items),"none"!==ne&&(B.x=oe=0,B.y=se=0),B.width=j,B.height=P,boundStroke(ie.set(oe,se,oe+j,se+P),B),B.mark.bounds.clear().union(ie),B}function legendTitleOffset(a,A,j,P,B,q,ne){var ie="symbol"!==a.datum.type,oe=j.datum.vgrad,se=(!ie||!q&&oe||ne?A:A.items[0]).bounds[B?"y2":"x2"]-a.padding,le=oe&&q?se:0,he=oe&&q?0:se,pe=B<=0?0:multiLineOffset(j);return Math.round("start"===P?le:P===$o?he-pe:.5*(se-pe))}function vega_view_transforms_module_translate(a,A,j,P){A.x+=j,A.y+=P,A.bounds.translate(j,P),A.mark.bounds.translate(j,P),a.dirty(A)}function ViewLayout(a){Transform.call(this,null,a)}function sum_sum(a,A){var j=0;if(void 0===A){var P,B=Object(We.a)(a);try{for(B.s();!(P=B.n()).done;){var q=P.value;(q=+q)&&(j+=q)}}catch(le){B.e(le)}finally{B.f()}}else{var ne,ie=-1,oe=Object(We.a)(a);try{for(oe.s();!(ne=oe.n()).done;){var se=ne.value;(se=+A(se,++ie,a))&&(j+=se)}}catch(le){oe.e(le)}finally{oe.f()}}return j}function AxisTicks(a){Transform.call(this,null,a)}function DataJoin(a){Transform.call(this,null,a)}function defaultItemCreate(){return ingest$1({})}function Encode(a){Transform.call(this,null,a)}function LegendEntries(a){Transform.call(this,[],a)}Object(ve.z)(ViewLayout,Transform,{transform:function transform(a,A){var j=A.dataflow;return a.mark.items.forEach((function(A){a.layout&&trellisLayout(j,A,a.layout),function layoutGroup(a,A,j){var P,B,q,ne,ie,oe=A.items,se=Math.max(0,A.width||0),le=Math.max(0,A.height||0),he=(new Bounds).set(0,0,se,le),pe=he.clone(),ge=he.clone(),me=[];for(ne=0,ie=oe.length;ne<ie;++ne)switch((B=oe[ne]).role){case"axis":(isYAxis(B)?pe:ge).union(axisLayout(a,B,se,le));break;case"title":P=B;break;case"legend":me.push(legendLayout(a,B));break;case"frame":case"scope":case"row-header":case"row-footer":case"row-title":case"column-header":case"column-footer":case"column-title":pe.union(B.bounds),ge.union(B.bounds);break;default:he.union(B.bounds)}if(me.length){var ve={};for(var ye in me.forEach((function(a){"none"!==(q=a.orient||Yo)&&(ve[q]||(ve[q]=[])).push(a)})),ve){var _e=ve[ye];gridLayout(a,_e,legendParams(_e,ye,j.legends,pe,ge,se,le))}me.forEach((function(A){var P=A.bounds;if(P.equals(A._bounds)||(A.bounds=A._bounds,a.dirty(A),A.bounds=P,a.dirty(A)),j.autosize&&"fit"===j.autosize.type)switch(A.orient){case Vo:case Yo:he.add(P.x1,0).add(P.x2,0);break;case Go:case"bottom":he.add(0,P.y1).add(0,P.y2)}else he.union(P)}))}he.union(pe).union(ge),P&&he.union(function titleLayout(a,A,j,P,B){var q,ne=A.items[0],ie=ne.frame,oe=ne.orient,se=ne.anchor,le=ne.offset,he=ne.padding,pe=ne.items[0].items[0],ge=ne.items[1]&&ne.items[1].items[0],me=oe===Vo||oe===Yo?P:j,ve=0,ye=0,_e=0,we=0,ke=0;if("group"!==ie?oe===Vo?(ve=B.y2,me=B.y1):oe===Yo?(ve=B.y1,me=B.y2):(ve=B.x1,me=B.x2):oe===Vo&&(ve=P,me=0),q="start"===se?ve:se===$o?me:(ve+me)/2,ge&&ge.text){switch(oe){case Go:case"bottom":ke=pe.bounds.height()+he;break;case Vo:we=pe.bounds.width()+he;break;case Yo:we=-pe.bounds.width()-he}rs.clear().union(ge.bounds),rs.translate(we-(ge.x||0),ke-(ge.y||0)),vega_view_transforms_module_set(ge,"x",we)|vega_view_transforms_module_set(ge,"y",ke)&&(a.dirty(ge),ge.bounds.clear().union(rs),ge.mark.bounds.clear().union(rs),a.dirty(ge)),rs.clear().union(ge.bounds)}else rs.clear();switch(rs.union(pe.bounds),oe){case Go:ye=q,_e=B.y1-rs.height()-le;break;case Vo:ye=B.x1-rs.width()-le,_e=q;break;case Yo:ye=B.x2+rs.width()+le,_e=q;break;case"bottom":ye=q,_e=B.y2+le;break;default:ye=ne.x,_e=ne.y}return vega_view_transforms_module_set(ne,"x",ye)|vega_view_transforms_module_set(ne,"y",_e)&&(rs.translate(ye,_e),a.dirty(ne),ne.bounds.clear().union(rs),A.bounds.clear().union(rs),a.dirty(ne)),ne.bounds}(a,P,se,le,he));A.clip&&he.set(0,0,A.width||0,A.height||0);!function viewSizeLayout(a,A,j,P){var B=P.autosize||{},q=B.type;if(a._autosize<1||!q)return;var ne=a._width,ie=a._height,oe=Math.max(0,A.width||0),se=Math.max(0,Math.ceil(-j.x1)),le=Math.max(0,A.height||0),he=Math.max(0,Math.ceil(-j.y1)),pe=Math.max(0,Math.ceil(j.x2-oe)),ge=Math.max(0,Math.ceil(j.y2-le));if("padding"===B.contains){var me=a.padding();ne-=me.left+me.right,ie-=me.top+me.bottom}"none"===q?(se=0,he=0,oe=ne,le=ie):"fit"===q?(oe=Math.max(0,ne-se-pe),le=Math.max(0,ie-he-ge)):"fit-x"===q?(oe=Math.max(0,ne-se-pe),ie=le+he+ge):"fit-y"===q?(ne=oe+se+pe,le=Math.max(0,ie-he-ge)):"pad"===q&&(ne=oe+se+pe,ie=le+he+ge);a._resizeView(ne,ie,oe,le,[se,he],B.resize)}(a,A,he,j)}(j,A,a)})),function shouldReflow(a){return a&&"legend-entry"!==a.mark.role}(a.mark.group)?A.reflow():A}}),Object(ve.z)(AxisTicks,Transform,{transform:function transform(a,A){if(this.value&&!a.modified())return A.StopPropagation;var j=A.dataflow.locale(),P=A.fork(A.NO_SOURCE|A.NO_FIELDS),B=this.value,q=a.scale,ne=tickCount(q,null==a.count?a.values?a.values.length:10:a.count,a.minstep),ie=a.format||vega_scale_module_tickFormat(j,q,ne,a.formatSpecifier,a.formatType,!!a.values),oe=a.values?validTicks(q,a.values,ne):tickValues(q,ne);return B&&(P.rem=B),B=oe.map((function(a,A){return ingest$1({index:A/(oe.length-1||1),value:a,label:ie(a)})})),a.extra&&B.length&&B.push(ingest$1({index:-1,extra:{value:B[0].value},label:""})),P.source=B,P.add=B,this.value=B,P}}),Object(ve.z)(DataJoin,Transform,{transform:function transform(a,A){var j=A.dataflow,P=A.fork(A.NO_SOURCE|A.NO_FIELDS),B=a.item||defaultItemCreate,q=a.key||tupleid,ne=this.value;return Object(ve.B)(P.encode)&&(P.encode=null),ne&&(a.modified("key")||A.modified(q))&&Object(ve.o)("DataJoin does not support modified key function or fields."),ne||(A=A.addAll(),this.value=ne=function newMap(a){var A=Object(ve.t)().test((function(a){return a.exit}));return A.lookup=function(j){return A.get(a(j))},A}(q)),A.visit(A.ADD,(function(a){var A=q(a),j=ne.get(A);j?j.exit?(ne.empty--,P.add.push(j)):P.mod.push(j):(j=B(a),ne.set(A,j),P.add.push(j)),j.datum=a,j.exit=!1})),A.visit(A.MOD,(function(a){var A=q(a),j=ne.get(A);j&&(j.datum=a,P.mod.push(j))})),A.visit(A.REM,(function(a){var A=q(a),j=ne.get(A);a!==j.datum||j.exit||(P.rem.push(j),j.exit=!0,++ne.empty)})),A.changed(A.ADD_MOD)&&P.modifies("datum"),(A.clean()||a.clean&&ne.empty>j.cleanThreshold)&&j.runAfter(ne.clean),P}}),Object(ve.z)(Encode,Transform,{transform:function transform(a,A){var j=A.fork(A.ADD_REM),P=a.mod||!1,B=a.encoders,q=A.encode;if(Object(ve.B)(q)){if(!j.changed()&&!q.every((function(a){return B[a]})))return A.StopPropagation;q=q[0],j.encode=null}var ne="enter"===q,ie=B.update||ve.s,oe=B.enter||ve.s,se=B.exit||ve.s,le=(q&&!ne?B[q]:ie)||ve.s;if(A.changed(A.ADD)&&(A.visit(A.ADD,(function(A){oe(A,a),ie(A,a)})),j.modifies(oe.output),j.modifies(ie.output),le!==ve.s&&le!==ie&&(A.visit(A.ADD,(function(A){le(A,a)})),j.modifies(le.output))),A.changed(A.REM)&&se!==ve.s&&(A.visit(A.REM,(function(A){se(A,a)})),j.modifies(se.output)),ne||le!==ve.s){var he=A.MOD|(a.modified()?A.REFLOW:0);ne?(A.visit(he,(function(A){var B=oe(A,a)||P;(le(A,a)||B)&&j.mod.push(A)})),j.mod.length&&j.modifies(oe.output)):A.visit(he,(function(A){(le(A,a)||P)&&j.mod.push(A)})),j.mod.length&&j.modifies(le.output)}return j.changed()?j:A.StopPropagation}}),Object(ve.z)(LegendEntries,Transform,{transform:function transform(a,A){if(null!=this.value&&!a.modified())return A.StopPropagation;var j,P,B,q,ne,ie=A.dataflow.locale(),oe=A.fork(A.NO_SOURCE|A.NO_FIELDS),se=this.value,le=a.type||"symbol",he=a.scale,pe=+a.limit,ge=tickCount(he,null==a.count?5:a.count,a.minstep),me=!!a.values||"symbol"===le,ye=a.format||labelFormat(ie,he,ge,le,a.formatSpecifier,a.formatType,me),_e=a.values||labelValues(he,ge);return se&&(oe.rem=se),"symbol"===le?(pe&&_e.length>pe?(A.dataflow.warn("Symbol legend count exceeds limit, filtering items."),se=_e.slice(0,pe-1),ne=!0):se=_e,Object(ve.E)(B=a.size)?(a.values||0!==he(se[0])||(se=se.slice(1)),q=se.reduce((function(A,j){return Math.max(A,B(j,a))}),0)):B=Object(ve.m)(q=B||8),se=se.map((function(A,j){return ingest$1({index:j,label:ye(A,j,se),value:A,offset:q,size:B(A,a)})})),ne&&(ne=_e[se.length],se.push(ingest$1({index:se.length,label:"\u2026".concat(_e.length-se.length," entries"),value:ne,offset:q,size:B(ne,a)})))):"gradient"===le?(j=he.domain(),P=scaleFraction(he,j[0],Object(ve.W)(j)),_e.length<3&&!a.values&&j[0]!==Object(ve.W)(j)&&(_e=[j[0],Object(ve.W)(j)]),se=_e.map((function(a,A){return ingest$1({index:A,label:ye(a,A,_e),value:a,perc:P(a)})}))):(B=_e.length-1,P=function labelFraction(a){var A=a.domain(),j=A.length-1,P=+A[0],B=+Object(ve.W)(A),q=B-P;if("threshold"===a.type){var ne=j?q/j:.1;q=(B+=ne)-(P-=ne)}return function(a){return(a-P)/q}}(he),se=_e.map((function(a,A){return ingest$1({index:A,label:ye(a,A,_e),value:a,perc:A?P(a):0,perc2:A===B?1:P(_e[A+1])})}))),oe.source=se,oe.add=se,this.value=se,oe}});var ss=function sourceX(a){return a.source.x},us=function sourceY(a){return a.source.y},ls=function targetX(a){return a.target.x},cs=function targetY(a){return a.target.y};function LinkPath(a){Transform.call(this,{},a)}LinkPath.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Object(ve.z)(LinkPath,Transform,{transform:function transform(a,A){var j=a.sourceX||ss,P=a.sourceY||us,B=a.targetX||ls,q=a.targetY||cs,ne=a.as||"path",ie=a.orient||"vertical",oe=a.shape||"line",se=ps.get(oe+"-"+ie)||ps.get(oe);return se||Object(ve.o)("LinkPath unsupported type: "+a.shape+(a.orient?"-"+a.orient:"")),A.visit(A.SOURCE,(function(a){a[ne]=se(j(a),P(a),B(a),q(a))})),A.reflow(a.modified()).modifies(ne)}});var fs=function line(a,A,j,P){return"M"+a+","+A+"L"+j+","+P},ds=function arc(a,A,j,P){var B=j-a,q=P-A,ne=Math.sqrt(B*B+q*q)/2;return"M"+a+","+A+"A"+ne+","+ne+" "+180*Math.atan2(q,B)/Math.PI+" 0 1 "+j+","+P},hs=function curve(a,A,j,P){var B=j-a,q=P-A,ne=.2*(B+q),ie=.2*(q-B);return"M"+a+","+A+"C"+(a+ne)+","+(A+ie)+" "+(j+ie)+","+(P-ne)+" "+j+","+P},ps=Object(ve.t)({line:fs,"line-radial":function lineR(a,A,j,P){return fs(A*Math.cos(a),A*Math.sin(a),P*Math.cos(j),P*Math.sin(j))},arc:ds,"arc-radial":function arcR(a,A,j,P){return ds(A*Math.cos(a),A*Math.sin(a),P*Math.cos(j),P*Math.sin(j))},curve:hs,"curve-radial":function curveR(a,A,j,P){return hs(A*Math.cos(a),A*Math.sin(a),P*Math.cos(j),P*Math.sin(j))},"orthogonal-horizontal":function orthoX(a,A,j,P){return"M"+a+","+A+"V"+P+"H"+j},"orthogonal-vertical":function orthoY(a,A,j,P){return"M"+a+","+A+"H"+j+"V"+P},"orthogonal-radial":function orthoR(a,A,j,P){var B=Math.cos(a),q=Math.sin(a),ne=Math.cos(j),ie=Math.sin(j);return"M"+A*B+","+A*q+"A"+A+","+A+" 0 0,"+((Math.abs(j-a)>Math.PI?j<=a:j>a)?1:0)+" "+A*ne+","+A*ie+"L"+P*ne+","+P*ie},"diagonal-horizontal":function diagonalX(a,A,j,P){var B=(a+j)/2;return"M"+a+","+A+"C"+B+","+A+" "+B+","+P+" "+j+","+P},"diagonal-vertical":function diagonalY(a,A,j,P){var B=(A+P)/2;return"M"+a+","+A+"C"+a+","+B+" "+j+","+B+" "+j+","+P},"diagonal-radial":function diagonalR(a,A,j,P){var B=Math.cos(a),q=Math.sin(a),ne=Math.cos(j),ie=Math.sin(j),oe=(A+P)/2;return"M"+A*B+","+A*q+"C"+oe*B+","+oe*q+" "+oe*ne+","+oe*ie+" "+P*ne+","+P*ie}});function Pie(a){Transform.call(this,null,a)}Pie.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Object(ve.z)(Pie,Transform,{transform:function transform(a,A){var j,P,B,q=a.as||["startAngle","endAngle"],ne=q[0],ie=q[1],oe=a.field||ve.Q,se=a.startAngle||0,le=null!=a.endAngle?a.endAngle:2*Math.PI,he=A.source,pe=he.map(oe),ge=pe.length,me=se,ye=(le-se)/sum_sum(pe),_e=src_range(ge);for(a.sort&&_e.sort((function(a,A){return pe[a]-pe[A]})),j=0;j<ge;++j)B=pe[_e[j]],(P=he[_e[j]])[ne]=me,P[ie]=me+=B*ye;return this.value=pe,A.reflow(a.modified()).modifies(q)}});function includePad(a){return isContinuous(a)&&"sequential"!==a}var gs=Object(ve.fb)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Scale(a){Transform.call(this,null,a),this.modified(!0)}function domainCheck(a,A,j){isLogarithmic(a)&&(Math.abs(A.reduce((function(a,A){return a+(A<0?-1:A>0?1:0)}),0))!==A.length&&j.warn("Log scale domain includes zero: "+Object(ve.bb)(A)));return A}function adjustScheme(a,A,j){return Object(ve.E)(a)&&(A||j)?interpolateRange(a,flip(A||[0,1],j)):a}function flip(a,A){return A?a.slice().reverse():a}function SortItems(a){Transform.call(this,null,a)}Object(ve.z)(Scale,Transform,{transform:function transform(a,A){var j=A.dataflow,P=this.value,B=function scaleKey(a){var A,j=a.type,P="";if("sequential"===j)return"sequential-linear";(function isContinuousColor(a){var A=a.type;return isContinuous(A)&&A!==xr&&A!==wr&&(a.scheme||a.range&&a.range.length&&a.range.every(ve.J))})(a)&&(A=a.rawDomain?a.rawDomain.length:a.domain?a.domain.length+ +(null!=a.domainMid):0,P=2===A?"sequential-":3===A?"diverging-":"");return(P+j||"linear").toLowerCase()}(a);for(B in P&&B===P.type||(this.value=P=vega_scale_module_scale(B)()),a)if(!gs[B]){if("padding"===B&&includePad(P.type))continue;Object(ve.E)(P[B])?P[B](a[B]):j.warn("Unsupported scale property: "+B)}return function configureRange(a,A,j){var P=a.type,B=A.round||!1,q=A.range;if(null!=A.rangeStep)q=function configureRangeStep(a,A,j){"band"!==a&&"point"!==a&&Object(ve.o)("Only band and point scales support rangeStep.");var P=(null!=A.paddingOuter?A.paddingOuter:A.padding)||0,B="point"===a?1:(null!=A.paddingInner?A.paddingInner:A.padding)||0;return[0,A.rangeStep*bandSpace(j,B,P)]}(P,A,j);else if(A.scheme&&(q=function configureScheme(a,A,j){var P,B,q=A.schemeExtent;Object(ve.B)(A.scheme)?B=interpolateColors(A.scheme,A.interpolate,A.interpolateGamma):(P=A.scheme.toLowerCase(),(B=vega_scale_module_scheme(P))||Object(ve.o)("Unrecognized scheme name: ".concat(A.scheme)));return j="threshold"===a?j+1:"bin-ordinal"===a?j-1:"quantile"===a||"quantize"===a?+A.schemeCount||5:j,isInterpolating(a)?adjustScheme(B,q,A.reverse):Object(ve.E)(B)?quantizeInterpolator(adjustScheme(B,q),j):"ordinal"===a?B:B.slice(0,j)}(P,A,j),Object(ve.E)(q))){if(a.interpolator)return a.interpolator(q);Object(ve.o)("Scale type ".concat(P," does not support interpolating color schemes."))}if(q&&isInterpolating(P))return a.interpolator(interpolateColors(flip(q,A.reverse),A.interpolate,A.interpolateGamma));q&&A.interpolate&&a.interpolate?a.interpolate(vega_scale_module_interpolate(A.interpolate,A.interpolateGamma)):Object(ve.E)(a.round)?a.round(B):Object(ve.E)(a.rangeRound)&&a.interpolate(B?src_round:src_value);q&&a.range(flip(q,A.reverse))}(P,a,function configureBins(a,A,j){var P=A.bins;if(P&&!Object(ve.B)(P)){var B=a.domain(),q=B[0],ne=Object(ve.W)(B),ie=P.step,oe=null==P.start?q:P.start,se=null==P.stop?ne:P.stop;ie||Object(ve.o)("Scale bins parameter missing step property."),oe<q&&(oe=ie*Math.ceil(q/ie)),se>ne&&(se=ie*Math.floor(ne/ie)),P=src_range(oe,se+ie/2,ie)}P?a.bins=P:a.bins&&delete a.bins;"bin-ordinal"===a.type&&(P?A.domain||A.domainRaw||(a.domain(P),j=P.length):a.bins=a.domain());return j}(P,a,function configureDomain(a,A,j){var P=function rawDomain(a,A,j){return A?(a.domain(domainCheck(a.type,A,j)),A.length):-1}(a,A.domainRaw,j);if(P>-1)return P;var B,q,ne=A.domain,ie=a.type,oe=A.zero||void 0===A.zero&&function includeZero(a){var A=a.type;return!a.bins&&("linear"===A||"pow"===A||"sqrt"===A)}(a);if(!ne)return 0;includePad(ie)&&A.padding&&ne[0]!==Object(ve.W)(ne)&&(ne=function padDomain(a,A,j,P,B,q){var ne=Math.abs(Object(ve.W)(j)-j[0]),ie=ne/(ne-2*P),oe=a===_r?Object(ve.ob)(A,null,ie):"sqrt"===a?Object(ve.pb)(A,null,ie,.5):"pow"===a?Object(ve.pb)(A,null,ie,B||1):"symlog"===a?Object(ve.qb)(A,null,ie,q||1):Object(ve.nb)(A,null,ie);return(A=A.slice())[0]=oe[0],A[A.length-1]=oe[1],A}(ie,ne,A.range,A.padding,A.exponent,A.constant));if((oe||null!=A.domainMin||null!=A.domainMax||null!=A.domainMid)&&(B=(ne=ne.slice()).length-1||1,oe&&(ne[0]>0&&(ne[0]=0),ne[B]<0&&(ne[B]=0)),null!=A.domainMin&&(ne[0]=A.domainMin),null!=A.domainMax&&(ne[B]=A.domainMax),null!=A.domainMid)){var se=(q=A.domainMid)>ne[B]?B+1:q<ne[0]?0:B;se!==B&&j.warn("Scale domainMid exceeds domain min or max.",q),ne.splice(se,0,q)}a.domain(domainCheck(ie,ne,j)),"ordinal"===ie&&a.unknown(A.domainImplicit?Jt:void 0);A.nice&&a.nice&&a.nice(!0!==A.nice&&tickCount(a,A.nice)||null);return ne.length}(P,a,j))),A.fork(A.NO_SOURCE|A.NO_FIELDS)}}),Object(ve.z)(SortItems,Transform,{transform:function transform(a,A){var j=a.modified("sort")||A.changed(A.ADD)||A.modified(a.sort.fields)||A.modified("datum");return j&&A.source.sort(stableCompare(a.sort)),this.modified(j),A}});var ms=["y0","y1"];function Stack(a){Transform.call(this,null,a)}function stackCenter(a,A,j,P,B){for(var q,ne=(A-a.sum)/2,ie=a.length,oe=0;oe<ie;++oe)(q=a[oe])[P]=ne,q[B]=ne+=Math.abs(j(q))}function stackNormalize(a,A,j,P,B){for(var q,ne=1/a.sum,ie=0,oe=a.length,se=0,le=0;se<oe;++se)(q=a[se])[P]=ie,q[B]=ie=ne*(le+=Math.abs(j(q)))}function stackZero(a,A,j,P,B){for(var q,ne,ie=0,oe=0,se=a.length,le=0;le<se;++le)(q=+j(ne=a[le]))<0?(ne[P]=oe,ne[B]=oe+=q):(ne[P]=ie,ne[B]=ie+=q)}Stack.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:ms}]},Object(ve.z)(Stack,Transform,{transform:function transform(a,A){var j,P,B,q,ne=a.as||ms,ie=ne[0],oe=ne[1],se=stableCompare(a.sort),le=a.field||ve.Q,he="center"===a.offset?stackCenter:"normalize"===a.offset?stackNormalize:stackZero;for(j=function vega_encode_module_partition(a,A,j,P){var B,q,ne,ie,oe,se,le,he,pe,ge=[],me=function get(a){return a(oe)};if(null==A)ge.push(a.slice());else for(B={},q=0,ne=a.length;q<ne;++q)oe=a[q],se=A.map(me),(le=B[se])||(B[se]=le=[],ge.push(le)),le.push(oe);for(se=0,pe=0,ie=ge.length;se<ie;++se){for(le=ge[se],q=0,he=0,ne=le.length;q<ne;++q)he+=Math.abs(P(le[q]));le.sum=he,he>pe&&(pe=he),j&&le.sort(j)}return ge.max=pe,ge}(A.source,a.groupby,se,le),P=0,B=j.length,q=j.max;P<B;++P)he(j[P],q,le,ie,oe);return A.reflow(a.modified()).modifies(ne)}});var src_identity=function(a){return a};function streamGeometry(a,A){a&&ys.hasOwnProperty(a.type)&&ys[a.type](a,A)}var vs={Feature:function Feature(a,A){streamGeometry(a.geometry,A)},FeatureCollection:function FeatureCollection(a,A){for(var j=a.features,P=-1,B=j.length;++P<B;)streamGeometry(j[P].geometry,A)}},ys={Sphere:function Sphere(a,A){A.sphere()},Point:function Point(a,A){a=a.coordinates,A.point(a[0],a[1],a[2])},MultiPoint:function MultiPoint(a,A){for(var j=a.coordinates,P=-1,B=j.length;++P<B;)a=j[P],A.point(a[0],a[1],a[2])},LineString:function LineString(a,A){streamLine(a.coordinates,A,0)},MultiLineString:function MultiLineString(a,A){for(var j=a.coordinates,P=-1,B=j.length;++P<B;)streamLine(j[P],A,0)},Polygon:function Polygon(a,A){streamPolygon(a.coordinates,A)},MultiPolygon:function MultiPolygon(a,A){for(var j=a.coordinates,P=-1,B=j.length;++P<B;)streamPolygon(j[P],A)},GeometryCollection:function GeometryCollection(a,A){for(var j=a.geometries,P=-1,B=j.length;++P<B;)streamGeometry(j[P],A)}};function streamLine(a,A,j){var P,B=-1,q=a.length-j;for(A.lineStart();++B<q;)P=a[B],A.point(P[0],P[1],P[2]);A.lineEnd()}function streamPolygon(a,A){var j=-1,P=a.length;for(A.polygonStart();++j<P;)streamLine(a[j],A,1);A.polygonEnd()}var src_stream=function(a,A){a&&vs.hasOwnProperty(a.type)?vs[a.type](a,A):streamGeometry(a,A)},bs=j(3),_s=j(4),xs=function(){function Adder(){Object(bs.a)(this,Adder),this._partials=new Float64Array(32),this._n=0}return Object(_s.a)(Adder,[{key:"add",value:function add(a){for(var A=this._partials,j=0,P=0;P<this._n&&P<32;P++){var B=A[P],q=a+B,ne=Math.abs(a)<Math.abs(B)?a-(q-B):B-(q-a);ne&&(A[j++]=ne),a=q}return A[j]=a,this._n=j+1,this}},{key:"valueOf",value:function valueOf(){var a,A,j,P=this._partials,B=this._n,q=0;if(B>0){for(q=P[--B];B>0&&(a=q,!(j=(A=P[--B])-((q=a+A)-a))););B>0&&(j<0&&P[B-1]<0||j>0&&P[B-1]>0)&&(A=2*j)==(a=q+A)-q&&(q=a)}return q}}]),Adder}();var ws=Math.PI,ks=ws/2,Os=ws/4,Ss=2*ws,Es=180/ws,Cs=ws/180,Ts=Math.abs,Ds=Math.atan,As=Math.atan2,js=Math.cos,Fs=Math.ceil,Ps=Math.exp,Rs=(Math.floor,Math.hypot),Ms=Math.log,Ls=Math.pow,Is=Math.sin,Ns=Math.sign||function(a){return a>0?1:a<0?-1:0},Bs=Math.sqrt,Us=Math.tan;function math_acos(a){return a>1?0:a<-1?ws:Math.acos(a)}function math_asin(a){return a>1?ks:a<-1?-ks:Math.asin(a)}function noop_noop(){}var zs,qs,Ws,Hs,Gs=new xs,Vs=new xs,Ys={point:noop_noop,lineStart:noop_noop,lineEnd:noop_noop,polygonStart:function polygonStart(){Ys.lineStart=areaRingStart,Ys.lineEnd=areaRingEnd},polygonEnd:function polygonEnd(){Ys.lineStart=Ys.lineEnd=Ys.point=noop_noop,Gs.add(Ts(Vs)),Vs=new xs},result:function result(){var a=Gs/2;return Gs=new xs,a}};function areaRingStart(){Ys.point=areaPointFirst}function areaPointFirst(a,A){Ys.point=areaPoint,zs=Ws=a,qs=Hs=A}function areaPoint(a,A){Vs.add(Hs*a-Ws*A),Ws=a,Hs=A}function areaRingEnd(){areaPoint(zs,qs)}var $s=Ys,Ks=1/0,Xs=Ks,Js=-Ks,Qs=Js;var Zs,eu,tu,nu,ru={point:function boundsPoint(a,A){a<Ks&&(Ks=a);a>Js&&(Js=a);A<Xs&&(Xs=A);A>Qs&&(Qs=A)},lineStart:noop_noop,lineEnd:noop_noop,polygonStart:noop_noop,polygonEnd:noop_noop,result:function result(){var a=[[Ks,Xs],[Js,Qs]];return Js=Qs=-(Xs=Ks=1/0),a}},iu=0,au=0,ou=0,su=0,uu=0,lu=0,cu=0,fu=0,du=0,hu={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function polygonStart(){hu.lineStart=centroidRingStart,hu.lineEnd=centroidRingEnd},polygonEnd:function polygonEnd(){hu.point=centroidPoint,hu.lineStart=centroidLineStart,hu.lineEnd=centroidLineEnd},result:function result(){var a=du?[cu/du,fu/du]:lu?[su/lu,uu/lu]:ou?[iu/ou,au/ou]:[NaN,NaN];return iu=au=ou=su=uu=lu=cu=fu=du=0,a}};function centroidPoint(a,A){iu+=a,au+=A,++ou}function centroidLineStart(){hu.point=centroidPointFirstLine}function centroidPointFirstLine(a,A){hu.point=centroidPointLine,centroidPoint(tu=a,nu=A)}function centroidPointLine(a,A){var j=a-tu,P=A-nu,B=Bs(j*j+P*P);su+=B*(tu+a)/2,uu+=B*(nu+A)/2,lu+=B,centroidPoint(tu=a,nu=A)}function centroidLineEnd(){hu.point=centroidPoint}function centroidRingStart(){hu.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(Zs,eu)}function centroidPointFirstRing(a,A){hu.point=centroidPointRing,centroidPoint(Zs=tu=a,eu=nu=A)}function centroidPointRing(a,A){var j=a-tu,P=A-nu,B=Bs(j*j+P*P);su+=B*(tu+a)/2,uu+=B*(nu+A)/2,lu+=B,cu+=(B=nu*a-tu*A)*(tu+a),fu+=B*(nu+A),du+=3*B,centroidPoint(tu=a,nu=A)}var pu=hu;function PathContext(a){this._context=a}PathContext.prototype={_radius:4.5,pointRadius:function pointRadius(a){return this._radius=a,this},polygonStart:function polygonStart(){this._line=0},polygonEnd:function polygonEnd(){this._line=NaN},lineStart:function lineStart(){this._point=0},lineEnd:function lineEnd(){0===this._line&&this._context.closePath(),this._point=NaN},point:function point(a,A){switch(this._point){case 0:this._context.moveTo(a,A),this._point=1;break;case 1:this._context.lineTo(a,A);break;default:this._context.moveTo(a+this._radius,A),this._context.arc(a,A,this._radius,0,Ss)}},result:noop_noop};var gu,mu,vu,yu,bu,_u=new xs,xu={point:noop_noop,lineStart:function lineStart(){xu.point=lengthPointFirst},lineEnd:function lineEnd(){gu&&lengthPoint(mu,vu),xu.point=noop_noop},polygonStart:function polygonStart(){gu=!0},polygonEnd:function polygonEnd(){gu=null},result:function result(){var a=+_u;return _u=new xs,a}};function lengthPointFirst(a,A){xu.point=lengthPoint,mu=yu=a,vu=bu=A}function lengthPoint(a,A){yu-=a,bu-=A,_u.add(Bs(yu*yu+bu*bu)),yu=a,bu=A}var wu=xu;function PathString(){this._string=[]}function string_circle(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}PathString.prototype={_radius:4.5,_circle:string_circle(4.5),pointRadius:function pointRadius(a){return(a=+a)!==this._radius&&(this._radius=a,this._circle=null),this},polygonStart:function polygonStart(){this._line=0},polygonEnd:function polygonEnd(){this._line=NaN},lineStart:function lineStart(){this._point=0},lineEnd:function lineEnd(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function point(a,A){switch(this._point){case 0:this._string.push("M",a,",",A),this._point=1;break;case 1:this._string.push("L",a,",",A);break;default:null==this._circle&&(this._circle=string_circle(this._radius)),this._string.push("M",a,",",A,this._circle)}},result:function result(){if(this._string.length){var result=this._string.join("");return this._string=[],result}return null}};var d3_geo_src_path=function(a,A){var j,P,B=4.5;function path(a){return a&&("function"===typeof B&&P.pointRadius(+B.apply(this,arguments)),src_stream(a,j(P))),P.result()}return path.area=function(a){return src_stream(a,j($s)),$s.result()},path.measure=function(a){return src_stream(a,j(wu)),wu.result()},path.bounds=function(a){return src_stream(a,j(ru)),ru.result()},path.centroid=function(a){return src_stream(a,j(pu)),pu.result()},path.projection=function(A){return arguments.length?(j=null==A?(a=null,src_identity):(a=A).stream,path):a},path.context=function(a){return arguments.length?(P=null==a?(A=null,new PathString):new PathContext(A=a),"function"!==typeof B&&P.pointRadius(B),path):A},path.pointRadius=function(a){return arguments.length?(B="function"===typeof a?a:(P.pointRadius(+a),+a),path):B},path.projection(a).context(A)},clip_buffer=function(){var a,A=[];return{point:function point(A,j,P){a.push([A,j,P])},lineStart:function lineStart(){A.push(a=[])},lineEnd:noop_noop,rejoin:function rejoin(){A.length>1&&A.push(A.pop().concat(A.shift()))},result:function result(){var result=A;return A=[],a=null,result}}},pointEqual=function(a,A){return Ts(a[0]-A[0])<1e-6&&Ts(a[1]-A[1])<1e-6};function Intersection(a,A,j,P){this.x=a,this.z=A,this.o=j,this.e=P,this.v=!1,this.n=this.p=null}var rejoin=function(a,A,j,P,B){var q,ne,ie=[],oe=[];if(a.forEach((function(a){if(!((A=a.length-1)<=0)){var A,j,P=a[0],ne=a[A];if(pointEqual(P,ne)){if(!P[2]&&!ne[2]){for(B.lineStart(),q=0;q<A;++q)B.point((P=a[q])[0],P[1]);return void B.lineEnd()}ne[0]+=2e-6}ie.push(j=new Intersection(P,a,null,!0)),oe.push(j.o=new Intersection(P,null,j,!1)),ie.push(j=new Intersection(ne,a,null,!1)),oe.push(j.o=new Intersection(ne,null,j,!0))}})),ie.length){for(oe.sort(A),rejoin_link(ie),rejoin_link(oe),q=0,ne=oe.length;q<ne;++q)oe[q].e=j=!j;for(var se,le,he=ie[0];;){for(var pe=he,ge=!0;pe.v;)if((pe=pe.n)===he)return;se=pe.z,B.lineStart();do{if(pe.v=pe.o.v=!0,pe.e){if(ge)for(q=0,ne=se.length;q<ne;++q)B.point((le=se[q])[0],le[1]);else P(pe.x,pe.n.x,1,B);pe=pe.n}else{if(ge)for(se=pe.p.z,q=se.length-1;q>=0;--q)B.point((le=se[q])[0],le[1]);else P(pe.x,pe.p.x,-1,B);pe=pe.p}se=(pe=pe.o).z,ge=!ge}while(!pe.v);B.lineEnd()}}};function rejoin_link(a){if(A=a.length){for(var A,j,P=0,B=a[0];++P<A;)B.n=j=a[P],j.p=B,B=j;B.n=j=a[0],j.p=B}}function cartesian_spherical(a){return[As(a[1],a[0]),math_asin(a[2])]}function cartesian_cartesian(a){var A=a[0],j=a[1],P=js(j);return[P*js(A),P*Is(A),Is(j)]}function cartesianDot(a,A){return a[0]*A[0]+a[1]*A[1]+a[2]*A[2]}function cartesianCross(a,A){return[a[1]*A[2]-a[2]*A[1],a[2]*A[0]-a[0]*A[2],a[0]*A[1]-a[1]*A[0]]}function cartesianAddInPlace(a,A){a[0]+=A[0],a[1]+=A[1],a[2]+=A[2]}function cartesianScale(a,A){return[a[0]*A,a[1]*A,a[2]*A]}function cartesianNormalizeInPlace(a){var A=Bs(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=A,a[1]/=A,a[2]/=A}function longitude(a){return Ts(a[0])<=ws?a[0]:Ns(a[0])*((Ts(a[0])+ws)%Ss-ws)}var ku=_e.a.mark(flatten);function flatten(a){var A,j,P;return _e.a.wrap((function flatten$(B){for(;;)switch(B.prev=B.next){case 0:A=Object(We.a)(a),B.prev=1,A.s();case 3:if((j=A.n()).done){B.next=8;break}return P=j.value,B.delegateYield(P,"t0",6);case 6:B.next=3;break;case 8:B.next=13;break;case 10:B.prev=10,B.t1=B.catch(1),A.e(B.t1);case 13:return B.prev=13,A.f(),B.finish(13);case 16:case"end":return B.stop()}}),ku,null,[[1,10,13,16]])}function merge(a){return Array.from(flatten(a))}var src_clip=function(a,A,j,P){return function(B){var q,ne,ie,oe=A(B),se=clip_buffer(),le=A(se),he=!1,pe={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function polygonStart(){pe.point=pointRing,pe.lineStart=ringStart,pe.lineEnd=ringEnd,ne=[],q=[]},polygonEnd:function polygonEnd(){pe.point=point,pe.lineStart=lineStart,pe.lineEnd=lineEnd,ne=merge(ne);var a=function(a,A){var j=longitude(A),P=A[1],B=Is(P),q=[Is(j),-js(j),0],ne=0,ie=0,oe=new xs;1===B?P=ks+1e-6:-1===B&&(P=-ks-1e-6);for(var se=0,le=a.length;se<le;++se)if(pe=(he=a[se]).length)for(var he,pe,ge=he[pe-1],me=longitude(ge),ve=ge[1]/2+Os,ye=Is(ve),_e=js(ve),we=0;we<pe;++we,me=Oe,ye=Te,_e=Ae,ge=ke){var ke=he[we],Oe=longitude(ke),Se=ke[1]/2+Os,Te=Is(Se),Ae=js(Se),je=Oe-me,Fe=je>=0?1:-1,Re=Fe*je,Me=Re>ws,Ne=ye*Te;if(oe.add(As(Ne*Fe*Is(Re),_e*Ae+Ne*js(Re))),ne+=Me?je+Fe*Ss:je,Me^me>=j^Oe>=j){var Be=cartesianCross(cartesian_cartesian(ge),cartesian_cartesian(ke));cartesianNormalizeInPlace(Be);var Ue=cartesianCross(q,Be);cartesianNormalizeInPlace(Ue);var We=(Me^je>=0?-1:1)*math_asin(Ue[2]);(P>We||P===We&&(Be[0]||Be[1]))&&(ie+=Me^je>=0?1:-1)}}return(ne<-1e-6||ne<1e-6&&oe<-1e-12)^1&ie}(q,P);ne.length?(he||(B.polygonStart(),he=!0),rejoin(ne,clip_compareIntersection,a,j,B)):a&&(he||(B.polygonStart(),he=!0),B.lineStart(),j(null,null,1,B),B.lineEnd()),he&&(B.polygonEnd(),he=!1),ne=q=null},sphere:function sphere(){B.polygonStart(),B.lineStart(),j(null,null,1,B),B.lineEnd(),B.polygonEnd()}};function point(A,j){a(A,j)&&B.point(A,j)}function pointLine(a,A){oe.point(a,A)}function lineStart(){pe.point=pointLine,oe.lineStart()}function lineEnd(){pe.point=point,oe.lineEnd()}function pointRing(a,A){ie.push([a,A]),le.point(a,A)}function ringStart(){le.lineStart(),ie=[]}function ringEnd(){pointRing(ie[0][0],ie[0][1]),le.lineEnd();var a,A,j,P,oe=le.clean(),pe=se.result(),ge=pe.length;if(ie.pop(),q.push(ie),ie=null,ge)if(1&oe){if((A=(j=pe[0]).length-1)>0){for(he||(B.polygonStart(),he=!0),B.lineStart(),a=0;a<A;++a)B.point((P=j[a])[0],P[1]);B.lineEnd()}}else ge>1&&2&oe&&pe.push(pe.pop().concat(pe.shift())),ne.push(pe.filter(validSegment))}return pe}};function validSegment(a){return a.length>1}function clip_compareIntersection(a,A){return((a=a.x)[0]<0?a[1]-ks-1e-6:ks-a[1])-((A=A.x)[0]<0?A[1]-ks-1e-6:ks-A[1])}var Ou=src_clip((function(){return!0}),(function clipAntimeridianLine(a){var A,j=NaN,P=NaN,B=NaN;return{lineStart:function lineStart(){a.lineStart(),A=1},point:function point(q,ne){var ie=q>0?ws:-ws,oe=Ts(q-j);Ts(oe-ws)<1e-6?(a.point(j,P=(P+ne)/2>0?ks:-ks),a.point(B,P),a.lineEnd(),a.lineStart(),a.point(ie,P),a.point(q,P),A=0):B!==ie&&oe>=ws&&(Ts(j-B)<1e-6&&(j-=1e-6*B),Ts(q-ie)<1e-6&&(q-=1e-6*ie),P=function clipAntimeridianIntersect(a,A,j,P){var B,q,ne=Is(a-j);return Ts(ne)>1e-6?Ds((Is(A)*(q=js(P))*Is(j)-Is(P)*(B=js(A))*Is(a))/(B*q*ne)):(A+P)/2}(j,P,q,ne),a.point(B,P),a.lineEnd(),a.lineStart(),a.point(ie,P),A=0),a.point(j=q,P=ne),B=ie},lineEnd:function lineEnd(){a.lineEnd(),j=P=NaN},clean:function clean(){return 2-A}}}),(function clipAntimeridianInterpolate(a,A,j,P){var B;if(null==a)B=j*ks,P.point(-ws,B),P.point(0,B),P.point(ws,B),P.point(ws,0),P.point(ws,-B),P.point(0,-B),P.point(-ws,-B),P.point(-ws,0),P.point(-ws,B);else if(Ts(a[0]-A[0])>1e-6){var q=a[0]<A[0]?ws:-ws;B=j*q/2,P.point(-q,B),P.point(0,B),P.point(q,B)}else P.point(A[0],A[1])}),[-ws,-ks]);var compose=function(a,A){function compose(j,P){return j=a(j,P),A(j[0],j[1])}return a.invert&&A.invert&&(compose.invert=function(j,P){return(j=A.invert(j,P))&&a.invert(j[0],j[1])}),compose};function rotationIdentity(a,A){return[Ts(a)>ws?a+Math.round(-a/Ss)*Ss:a,A]}function rotateRadians(a,A,j){return(a%=Ss)?A||j?compose(rotationLambda(a),rotationPhiGamma(A,j)):rotationLambda(a):A||j?rotationPhiGamma(A,j):rotationIdentity}function forwardRotationLambda(a){return function(A,j){return[(A+=a)>ws?A-Ss:A<-ws?A+Ss:A,j]}}function rotationLambda(a){var A=forwardRotationLambda(a);return A.invert=forwardRotationLambda(-a),A}function rotationPhiGamma(a,A){var j=js(a),P=Is(a),B=js(A),q=Is(A);function rotation(a,A){var ne=js(A),ie=js(a)*ne,oe=Is(a)*ne,se=Is(A),le=se*j+ie*P;return[As(oe*B-le*q,ie*j-se*P),math_asin(le*B+oe*q)]}return rotation.invert=function(a,A){var ne=js(A),ie=js(a)*ne,oe=Is(a)*ne,se=Is(A),le=se*B-oe*q;return[As(oe*B+se*q,ie*j+le*P),math_asin(le*j-ie*P)]},rotation}rotationIdentity.invert=rotationIdentity;function circleStream(a,A,j,P,B,q){if(j){var ne=js(A),ie=Is(A),oe=P*j;null==B?(B=A+P*Ss,q=A-oe/2):(B=circleRadius(ne,B),q=circleRadius(ne,q),(P>0?B<q:B>q)&&(B+=P*Ss));for(var se,le=B;P>0?le>q:le<q;le-=oe)se=cartesian_spherical([ne,-ie*js(le),-ie*Is(le)]),a.point(se[0],se[1])}}function circleRadius(a,A){(A=cartesian_cartesian(A))[0]-=a,cartesianNormalizeInPlace(A);var j=math_acos(-A[1]);return((-A[2]<0?-j:j)+Ss-1e-6)%Ss}var clip_circle=function(a){var A=js(a),j=6*Cs,P=A>0,B=Ts(A)>1e-6;function visible(a,j){return js(a)*js(j)>A}function intersect(a,j,P){var B=[1,0,0],q=cartesianCross(cartesian_cartesian(a),cartesian_cartesian(j)),ne=cartesianDot(q,q),ie=q[0],oe=ne-ie*ie;if(!oe)return!P&&a;var se=A*ne/oe,le=-A*ie/oe,he=cartesianCross(B,q),pe=cartesianScale(B,se);cartesianAddInPlace(pe,cartesianScale(q,le));var ge=he,me=cartesianDot(pe,ge),ve=cartesianDot(ge,ge),ye=me*me-ve*(cartesianDot(pe,pe)-1);if(!(ye<0)){var _e=Bs(ye),we=cartesianScale(ge,(-me-_e)/ve);if(cartesianAddInPlace(we,pe),we=cartesian_spherical(we),!P)return we;var ke,Oe=a[0],Se=j[0],Te=a[1],Ae=j[1];Se<Oe&&(ke=Oe,Oe=Se,Se=ke);var je=Se-Oe,Fe=Ts(je-ws)<1e-6;if(!Fe&&Ae<Te&&(ke=Te,Te=Ae,Ae=ke),Fe||je<1e-6?Fe?Te+Ae>0^we[1]<(Ts(we[0]-Oe)<1e-6?Te:Ae):Te<=we[1]&&we[1]<=Ae:je>ws^(Oe<=we[0]&&we[0]<=Se)){var Re=cartesianScale(ge,(-me+_e)/ve);return cartesianAddInPlace(Re,pe),[we,cartesian_spherical(Re)]}}}function code(A,j){var B=P?a:ws-a,q=0;return A<-B?q|=1:A>B&&(q|=2),j<-B?q|=4:j>B&&(q|=8),q}return src_clip(visible,(function clipLine(a){var A,j,q,ne,ie;return{lineStart:function lineStart(){ne=q=!1,ie=1},point:function point(oe,se){var le,he=[oe,se],pe=visible(oe,se),ge=P?pe?0:code(oe,se):pe?code(oe+(oe<0?ws:-ws),se):0;if(!A&&(ne=q=pe)&&a.lineStart(),pe!==q&&(!(le=intersect(A,he))||pointEqual(A,le)||pointEqual(he,le))&&(he[2]=1),pe!==q)ie=0,pe?(a.lineStart(),le=intersect(he,A),a.point(le[0],le[1])):(le=intersect(A,he),a.point(le[0],le[1],2),a.lineEnd()),A=le;else if(B&&A&&P^pe){var me;ge&j||!(me=intersect(he,A,!0))||(ie=0,P?(a.lineStart(),a.point(me[0][0],me[0][1]),a.point(me[1][0],me[1][1]),a.lineEnd()):(a.point(me[1][0],me[1][1]),a.lineEnd(),a.lineStart(),a.point(me[0][0],me[0][1],3)))}!pe||A&&pointEqual(A,he)||a.point(he[0],he[1]),A=he,q=pe,j=ge},lineEnd:function lineEnd(){q&&a.lineEnd(),A=null},clean:function clean(){return ie|(ne&&q)<<1}}}),(function interpolate(A,P,B,q){circleStream(q,a,j,B,A,P)}),P?[0,-a]:[-ws,a-ws])};function clipRectangle(a,A,j,P){function visible(B,q){return a<=B&&B<=j&&A<=q&&q<=P}function interpolate(B,q,ne,ie){var oe=0,se=0;if(null==B||(oe=corner(B,ne))!==(se=corner(q,ne))||comparePoint(B,q)<0^ne>0)do{ie.point(0===oe||3===oe?a:j,oe>1?P:A)}while((oe=(oe+ne+4)%4)!==se);else ie.point(q[0],q[1])}function corner(P,B){return Ts(P[0]-a)<1e-6?B>0?0:3:Ts(P[0]-j)<1e-6?B>0?2:1:Ts(P[1]-A)<1e-6?B>0?1:0:B>0?3:2}function compareIntersection(a,A){return comparePoint(a.x,A.x)}function comparePoint(a,A){var j=corner(a,1),P=corner(A,1);return j!==P?j-P:0===j?A[1]-a[1]:1===j?a[0]-A[0]:2===j?a[1]-A[1]:A[0]-a[0]}return function(B){var q,ne,ie,oe,se,le,he,pe,ge,me,ve,ye=B,_e=clip_buffer(),we={point:point,lineStart:function lineStart(){we.point=linePoint,ne&&ne.push(ie=[]);me=!0,ge=!1,he=pe=NaN},lineEnd:function lineEnd(){q&&(linePoint(oe,se),le&&ge&&_e.rejoin(),q.push(_e.result()));we.point=point,ge&&ye.lineEnd()},polygonStart:function polygonStart(){ye=_e,q=[],ne=[],ve=!0},polygonEnd:function polygonEnd(){var A=function polygonInside(){for(var A=0,j=0,B=ne.length;j<B;++j)for(var q,ie,oe=ne[j],se=1,le=oe.length,he=oe[0],pe=he[0],ge=he[1];se<le;++se)q=pe,ie=ge,he=oe[se],pe=he[0],ge=he[1],ie<=P?ge>P&&(pe-q)*(P-ie)>(ge-ie)*(a-q)&&++A:ge<=P&&(pe-q)*(P-ie)<(ge-ie)*(a-q)&&--A;return A}(),j=ve&&A,oe=(q=merge(q)).length;(j||oe)&&(B.polygonStart(),j&&(B.lineStart(),interpolate(null,null,1,B),B.lineEnd()),oe&&rejoin(q,compareIntersection,A,interpolate,B),B.polygonEnd());ye=B,q=ne=ie=null}};function point(a,A){visible(a,A)&&ye.point(a,A)}function linePoint(B,q){var _e=visible(B,q);if(ne&&ie.push([B,q]),me)oe=B,se=q,le=_e,me=!1,_e&&(ye.lineStart(),ye.point(B,q));else if(_e&&ge)ye.point(B,q);else{var we=[he=Math.max(-1e9,Math.min(1e9,he)),pe=Math.max(-1e9,Math.min(1e9,pe))],ke=[B=Math.max(-1e9,Math.min(1e9,B)),q=Math.max(-1e9,Math.min(1e9,q))];!function(a,A,j,P,B,q){var ne,ie=a[0],oe=a[1],se=0,le=1,he=A[0]-ie,pe=A[1]-oe;if(ne=j-ie,he||!(ne>0)){if(ne/=he,he<0){if(ne<se)return;ne<le&&(le=ne)}else if(he>0){if(ne>le)return;ne>se&&(se=ne)}if(ne=B-ie,he||!(ne<0)){if(ne/=he,he<0){if(ne>le)return;ne>se&&(se=ne)}else if(he>0){if(ne<se)return;ne<le&&(le=ne)}if(ne=P-oe,pe||!(ne>0)){if(ne/=pe,pe<0){if(ne<se)return;ne<le&&(le=ne)}else if(pe>0){if(ne>le)return;ne>se&&(se=ne)}if(ne=q-oe,pe||!(ne<0)){if(ne/=pe,pe<0){if(ne>le)return;ne>se&&(se=ne)}else if(pe>0){if(ne<se)return;ne<le&&(le=ne)}return se>0&&(a[0]=ie+se*he,a[1]=oe+se*pe),le<1&&(A[0]=ie+le*he,A[1]=oe+le*pe),!0}}}}}(we,ke,a,A,j,P)?_e&&(ye.lineStart(),ye.point(B,q),ve=!1):(ge||(ye.lineStart(),ye.point(we[0],we[1])),ye.point(ke[0],ke[1]),_e||ye.lineEnd(),ve=!1)}he=B,pe=q,ge=_e}return we}}function transform_transformer(a){return function(A){var j=new TransformStream;for(var P in a)j[P]=a[P];return j.stream=A,j}}function TransformStream(){}function fit_fit(a,A,j){var P=a.clipExtent&&a.clipExtent();return a.scale(150).translate([0,0]),null!=P&&a.clipExtent(null),src_stream(j,a.stream(ru)),A(ru.result()),null!=P&&a.clipExtent(P),a}function fitExtent(a,A,j){return fit_fit(a,(function(j){var P=A[1][0]-A[0][0],B=A[1][1]-A[0][1],q=Math.min(P/(j[1][0]-j[0][0]),B/(j[1][1]-j[0][1])),ne=+A[0][0]+(P-q*(j[1][0]+j[0][0]))/2,ie=+A[0][1]+(B-q*(j[1][1]+j[0][1]))/2;a.scale(150*q).translate([ne,ie])}),j)}function fitSize(a,A,j){return fitExtent(a,[[0,0],A],j)}function fitWidth(a,A,j){return fit_fit(a,(function(j){var P=+A,B=P/(j[1][0]-j[0][0]),q=(P-B*(j[1][0]+j[0][0]))/2,ne=-B*j[0][1];a.scale(150*B).translate([q,ne])}),j)}function fitHeight(a,A,j){return fit_fit(a,(function(j){var P=+A,B=P/(j[1][1]-j[0][1]),q=-B*j[0][0],ne=(P-B*(j[1][1]+j[0][1]))/2;a.scale(150*B).translate([q,ne])}),j)}TransformStream.prototype={constructor:TransformStream,point:function point(a,A){this.stream.point(a,A)},sphere:function sphere(){this.stream.sphere()},lineStart:function lineStart(){this.stream.lineStart()},lineEnd:function lineEnd(){this.stream.lineEnd()},polygonStart:function polygonStart(){this.stream.polygonStart()},polygonEnd:function polygonEnd(){this.stream.polygonEnd()}};var Su=js(30*Cs),resample=function(a,A){return+A?function resample_resample(a,A){function resampleLineTo(j,P,B,q,ne,ie,oe,se,le,he,pe,ge,me,ve){var ye=oe-j,_e=se-P,we=ye*ye+_e*_e;if(we>4*A&&me--){var ke=q+he,Oe=ne+pe,Se=ie+ge,Te=Bs(ke*ke+Oe*Oe+Se*Se),Ae=math_asin(Se/=Te),je=Ts(Ts(Se)-1)<1e-6||Ts(B-le)<1e-6?(B+le)/2:As(Oe,ke),Fe=a(je,Ae),Re=Fe[0],Me=Fe[1],Ne=Re-j,Be=Me-P,Ue=_e*Ne-ye*Be;(Ue*Ue/we>A||Ts((ye*Ne+_e*Be)/we-.5)>.3||q*he+ne*pe+ie*ge<Su)&&(resampleLineTo(j,P,B,q,ne,ie,Re,Me,je,ke/=Te,Oe/=Te,Se,me,ve),ve.point(Re,Me),resampleLineTo(Re,Me,je,ke,Oe,Se,oe,se,le,he,pe,ge,me,ve))}}return function(A){var j,P,B,q,ne,ie,oe,se,le,he,pe,ge,me={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function polygonStart(){A.polygonStart(),me.lineStart=ringStart},polygonEnd:function polygonEnd(){A.polygonEnd(),me.lineStart=lineStart}};function point(j,P){j=a(j,P),A.point(j[0],j[1])}function lineStart(){se=NaN,me.point=linePoint,A.lineStart()}function linePoint(j,P){var B=cartesian_cartesian([j,P]),q=a(j,P);resampleLineTo(se,le,oe,he,pe,ge,se=q[0],le=q[1],oe=j,he=B[0],pe=B[1],ge=B[2],16,A),A.point(se,le)}function lineEnd(){me.point=point,A.lineEnd()}function ringStart(){lineStart(),me.point=ringPoint,me.lineEnd=ringEnd}function ringPoint(a,A){linePoint(j=a,A),P=se,B=le,q=he,ne=pe,ie=ge,me.point=linePoint}function ringEnd(){resampleLineTo(se,le,oe,he,pe,ge,P,B,j,q,ne,ie,16,A),me.lineEnd=lineEnd,lineEnd()}return me}}(a,A):function resampleNone(a){return transform_transformer({point:function point(A,j){A=a(A,j),this.stream.point(A[0],A[1])}})}(a)};var Eu=transform_transformer({point:function point(a,A){this.stream.point(a*Cs,A*Cs)}});function scaleTranslateRotate(a,A,j,P,B,q){if(!q)return function scaleTranslate(a,A,j,P,B){function transform(q,ne){return[A+a*(q*=P),j-a*(ne*=B)]}return transform.invert=function(q,ne){return[(q-A)/a*P,(j-ne)/a*B]},transform}(a,A,j,P,B);var ne=js(q),ie=Is(q),oe=ne*a,se=ie*a,le=ne/a,he=ie/a,pe=(ie*j-ne*A)/a,ge=(ie*A+ne*j)/a;function transform(a,q){return[oe*(a*=P)-se*(q*=B)+A,j-se*a-oe*q]}return transform.invert=function(a,A){return[P*(le*a-he*A+pe),B*(ge-he*a-le*A)]},transform}function projection_projection(a){return projectionMutator((function(){return a}))()}function projectionMutator(a){var A,j,P,B,q,ne,ie,oe,se,le,he=150,pe=480,ge=250,me=0,ve=0,ye=0,_e=0,we=0,ke=0,Oe=1,Se=1,Te=null,Ae=Ou,je=null,Fe=src_identity,Re=.5;function projection(a){return oe(a[0]*Cs,a[1]*Cs)}function invert(a){return(a=oe.invert(a[0],a[1]))&&[a[0]*Es,a[1]*Es]}function recenter(){var a=scaleTranslateRotate(he,0,0,Oe,Se,ke).apply(null,A(me,ve)),P=scaleTranslateRotate(he,pe-a[0],ge-a[1],Oe,Se,ke);return j=rotateRadians(ye,_e,we),ie=compose(A,P),oe=compose(j,ie),ne=resample(ie,Re),reset()}function reset(){return se=le=null,projection}return projection.stream=function(a){return se&&le===a?se:se=Eu(function transformRotate(a){return transform_transformer({point:function point(A,j){var P=a(A,j);return this.stream.point(P[0],P[1])}})}(j)(Ae(ne(Fe(le=a)))))},projection.preclip=function(a){return arguments.length?(Ae=a,Te=void 0,reset()):Ae},projection.postclip=function(a){return arguments.length?(Fe=a,je=P=B=q=null,reset()):Fe},projection.clipAngle=function(a){return arguments.length?(Ae=+a?clip_circle(Te=a*Cs):(Te=null,Ou),reset()):Te*Es},projection.clipExtent=function(a){return arguments.length?(Fe=null==a?(je=P=B=q=null,src_identity):clipRectangle(je=+a[0][0],P=+a[0][1],B=+a[1][0],q=+a[1][1]),reset()):null==je?null:[[je,P],[B,q]]},projection.scale=function(a){return arguments.length?(he=+a,recenter()):he},projection.translate=function(a){return arguments.length?(pe=+a[0],ge=+a[1],recenter()):[pe,ge]},projection.center=function(a){return arguments.length?(me=a[0]%360*Cs,ve=a[1]%360*Cs,recenter()):[me*Es,ve*Es]},projection.rotate=function(a){return arguments.length?(ye=a[0]%360*Cs,_e=a[1]%360*Cs,we=a.length>2?a[2]%360*Cs:0,recenter()):[ye*Es,_e*Es,we*Es]},projection.angle=function(a){return arguments.length?(ke=a%360*Cs,recenter()):ke*Es},projection.reflectX=function(a){return arguments.length?(Oe=a?-1:1,recenter()):Oe<0},projection.reflectY=function(a){return arguments.length?(Se=a?-1:1,recenter()):Se<0},projection.precision=function(a){return arguments.length?(ne=resample(ie,Re=a*a),reset()):Bs(Re)},projection.fitExtent=function(a,A){return fitExtent(projection,a,A)},projection.fitSize=function(a,A){return fitSize(projection,a,A)},projection.fitWidth=function(a,A){return fitWidth(projection,a,A)},projection.fitHeight=function(a,A){return fitHeight(projection,a,A)},function(){return A=a.apply(this,arguments),projection.invert=A.invert&&invert,recenter()}}function conicProjection(a){var A=0,j=ws/3,P=projectionMutator(a),B=P(A,j);return B.parallels=function(a){return arguments.length?P(A=a[0]*Cs,j=a[1]*Cs):[A*Es,j*Es]},B}function conicEqualAreaRaw(a,A){var j=Is(a),P=(j+Is(A))/2;if(Ts(P)<1e-6)return function cylindricalEqualAreaRaw(a){var A=js(a);function forward(a,j){return[a*A,Is(j)/A]}return forward.invert=function(a,j){return[a/A,math_asin(j*A)]},forward}(a);var B=1+j*(2*P-j),q=Bs(B)/P;function project(a,A){var j=Bs(B-2*P*Is(A))/P;return[j*Is(a*=P),q-j*js(a)]}return project.invert=function(a,A){var j=q-A,ne=As(a,Ts(j))*Ns(j);return j*P<0&&(ne-=ws*Ns(a)*Ns(j)),[ne/P,math_asin((B-(a*a+j*j)*P*P)/(2*P))]},project}var conicEqualArea=function(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])},albers=function(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function azimuthalRaw(a){return function(A,j){var P=js(A),B=js(j),q=a(P*B);return q===1/0?[2,0]:[q*B*Is(A),q*Is(j)]}}function azimuthalInvert(a){return function(A,j){var P=Bs(A*A+j*j),B=a(P),q=Is(B),ne=js(B);return[As(A*q,P*ne),math_asin(P&&j*q/P)]}}var Cu=azimuthalRaw((function(a){return Bs(2/(1+a))}));Cu.invert=azimuthalInvert((function(a){return 2*math_asin(a/2)}));var Tu=azimuthalRaw((function(a){return(a=math_acos(a))&&a/Is(a)}));Tu.invert=azimuthalInvert((function(a){return a}));function mercatorRaw(a,A){return[a,Ms(Us((ks+A)/2))]}mercatorRaw.invert=function(a,A){return[a,2*Ds(Ps(A))-ks]};function mercatorProjection(a){var A,j,P,B=projection_projection(a),q=B.center,ne=B.scale,ie=B.translate,oe=B.clipExtent,se=null;function reclip(){var q=ws*ne(),ie=B(function(a){function forward(A){return(A=a(A[0]*Cs,A[1]*Cs))[0]*=Es,A[1]*=Es,A}return a=rotateRadians(a[0]*Cs,a[1]*Cs,a.length>2?a[2]*Cs:0),forward.invert=function(A){return(A=a.invert(A[0]*Cs,A[1]*Cs))[0]*=Es,A[1]*=Es,A},forward}(B.rotate()).invert([0,0]));return oe(null==se?[[ie[0]-q,ie[1]-q],[ie[0]+q,ie[1]+q]]:a===mercatorRaw?[[Math.max(ie[0]-q,se),A],[Math.min(ie[0]+q,j),P]]:[[se,Math.max(ie[1]-q,A)],[j,Math.min(ie[1]+q,P)]])}return B.scale=function(a){return arguments.length?(ne(a),reclip()):ne()},B.translate=function(a){return arguments.length?(ie(a),reclip()):ie()},B.center=function(a){return arguments.length?(q(a),reclip()):q()},B.clipExtent=function(a){return arguments.length?(null==a?se=A=j=P=null:(se=+a[0][0],A=+a[0][1],j=+a[1][0],P=+a[1][1]),reclip()):null==se?null:[[se,A],[j,P]]},reclip()}function tany(a){return Us((ks+a)/2)}function conicConformalRaw(a,A){var j=js(a),P=a===A?Is(a):Ms(j/js(A))/Ms(tany(A)/tany(a)),B=j*Ls(tany(a),P)/P;if(!P)return mercatorRaw;function project(a,A){B>0?A<1e-6-ks&&(A=1e-6-ks):A>ks-1e-6&&(A=ks-1e-6);var j=B/Ls(tany(A),P);return[j*Is(P*a),B-j*js(P*a)]}return project.invert=function(a,A){var j=B-A,q=Ns(P)*Bs(a*a+j*j),ne=As(a,Ts(j))*Ns(j);return j*P<0&&(ne-=ws*Ns(a)*Ns(j)),[ne/P,2*Ds(Ls(B/q,1/P))-ks]},project}function equirectangularRaw(a,A){return[a,A]}equirectangularRaw.invert=equirectangularRaw;function conicEquidistantRaw(a,A){var j=js(a),P=a===A?Is(a):(j-js(A))/(A-a),B=j/P+a;if(Ts(P)<1e-6)return equirectangularRaw;function project(a,A){var j=B-A,q=P*a;return[j*Is(q),B-j*js(q)]}return project.invert=function(a,A){var j=B-A,q=As(a,Ts(j))*Ns(j);return j*P<0&&(q-=ws*Ns(a)*Ns(j)),[q/P,B-Ns(P)*Bs(a*a+j*j)]},project}var Du=1.340264,Au=-.081106,ju=893e-6,Fu=.003796,Pu=Bs(3)/2;function equalEarthRaw(a,A){var j=math_asin(Pu*Is(A)),P=j*j,B=P*P*P;return[a*js(j)/(Pu*(Du+3*Au*P+B*(7*ju+9*Fu*P))),j*(Du+Au*P+B*(ju+Fu*P))]}equalEarthRaw.invert=function(a,A){for(var j,P=A,B=P*P,q=B*B*B,ne=0;ne<12&&(q=(B=(P-=j=(P*(Du+Au*B+q*(ju+Fu*B))-A)/(Du+3*Au*B+q*(7*ju+9*Fu*B)))*P)*B*B,!(Ts(j)<1e-12));++ne);return[Pu*a*(Du+3*Au*B+q*(7*ju+9*Fu*B))/js(P),math_asin(Is(P)/Pu)]};function gnomonicRaw(a,A){var j=js(A),P=js(a)*j;return[j*Is(a)/P,Is(A)/P]}gnomonicRaw.invert=azimuthalInvert(Ds);function naturalEarth1Raw(a,A){var j=A*A,P=j*j;return[a*(.8707-.131979*j+P*(P*(.003971*j-.001529*P)-.013791)),A*(1.007226+j*(.015085+P*(.028874*j-.044475-.005916*P)))]}naturalEarth1Raw.invert=function(a,A){var j,P=A,B=25;do{var q=P*P,ne=q*q;P-=j=(P*(1.007226+q*(.015085+ne*(.028874*q-.044475-.005916*ne)))-A)/(1.007226+q*(.045255+ne*(.259866*q-.311325-.005916*11*ne)))}while(Ts(j)>1e-6&&--B>0);return[a/(.8707+(q=P*P)*(q*(q*q*q*(.003971-.001529*q)-.013791)-.131979)),P]};function orthographicRaw(a,A){return[js(A)*Is(a),Is(A)]}orthographicRaw.invert=azimuthalInvert(math_asin);function stereographicRaw(a,A){var j=js(A),P=1+js(a)*j;return[j*Is(a)/P,Is(A)/P]}stereographicRaw.invert=azimuthalInvert((function(a){return 2*Ds(a)}));function transverseMercatorRaw(a,A){return[Ms(Us((ks+A)/2)),-a]}transverseMercatorRaw.invert=function(a,A){return[-A,2*Ds(Ps(a))-ks]};var Ru=Math.abs,Mu=(Math.atan,Math.atan2,Math.ceil,Math.cos),Lu=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),Iu=(Math.tan,Math.PI),Nu=Iu/2,Bu=(Math.SQRT1_2,src_math_sqrt(2));src_math_sqrt(Iu);function src_math_asin(a){return a>1?Nu:a<-1?-Nu:Math.asin(a)}function src_math_sqrt(a){return a>0?Math.sqrt(a):0}function mollweideBromleyTheta(a,A){var j,P=a*Lu(A),B=30;do{A-=j=(A+Lu(A)-P)/(1+Mu(A))}while(Ru(j)>1e-6&&--B>0);return A/2}var Uu=function mollweideBromleyRaw(a,A,j){function forward(P,B){return[a*P*Mu(B=mollweideBromleyTheta(j,B)),A*Lu(B)]}return forward.invert=function(P,B){return B=src_math_asin(B/A),[P/(a*Mu(B)),src_math_asin((2*B+Lu(2*B))/j)]},forward}(Bu/Nu,Bu,Iu),zu=d3_geo_src_path(),qu=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function vega_projection_module_create(a,A){return function projection(){var j=A();return j.type=a,j.path=d3_geo_src_path().projection(j),j.copy=j.copy||function(){var a=projection();return qu.forEach((function(A){j[A]&&a[A](j[A]())})),a.path.pointRadius(j.path.pointRadius()),a},j}}function vega_projection_module_projection(a,A){if(!a||"string"!==typeof a)throw new Error("Projection type must be a name string.");return a=a.toLowerCase(),arguments.length>1?(Wu[a]=vega_projection_module_create(a,A),this):Wu[a]||null}function getProjectionPath(a){return a&&a.path||zu}var Wu={albers:albers,albersusa:function(){var a,A,j,P,B,q,ne=albers(),ie=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),oe=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),se={point:function point(a,A){q=[a,A]}};function albersUsa(a){var A=a[0],ne=a[1];return q=null,j.point(A,ne),q||(P.point(A,ne),q)||(B.point(A,ne),q)}function reset(){return a=A=null,albersUsa}return albersUsa.invert=function(a){var A=ne.scale(),j=ne.translate(),P=(a[0]-j[0])/A,B=(a[1]-j[1])/A;return(B>=.12&&B<.234&&P>=-.425&&P<-.214?ie:B>=.166&&B<.234&&P>=-.214&&P<-.115?oe:ne).invert(a)},albersUsa.stream=function(j){return a&&A===j?a:a=function multiplex(a){var A=a.length;return{point:function point(j,P){for(var B=-1;++B<A;)a[B].point(j,P)},sphere:function sphere(){for(var j=-1;++j<A;)a[j].sphere()},lineStart:function lineStart(){for(var j=-1;++j<A;)a[j].lineStart()},lineEnd:function lineEnd(){for(var j=-1;++j<A;)a[j].lineEnd()},polygonStart:function polygonStart(){for(var j=-1;++j<A;)a[j].polygonStart()},polygonEnd:function polygonEnd(){for(var j=-1;++j<A;)a[j].polygonEnd()}}}([ne.stream(A=j),ie.stream(j),oe.stream(j)])},albersUsa.precision=function(a){return arguments.length?(ne.precision(a),ie.precision(a),oe.precision(a),reset()):ne.precision()},albersUsa.scale=function(a){return arguments.length?(ne.scale(a),ie.scale(.35*a),oe.scale(a),albersUsa.translate(ne.translate())):ne.scale()},albersUsa.translate=function(a){if(!arguments.length)return ne.translate();var A=ne.scale(),q=+a[0],le=+a[1];return j=ne.translate(a).clipExtent([[q-.455*A,le-.238*A],[q+.455*A,le+.238*A]]).stream(se),P=ie.translate([q-.307*A,le+.201*A]).clipExtent([[q-.425*A+1e-6,le+.12*A+1e-6],[q-.214*A-1e-6,le+.234*A-1e-6]]).stream(se),B=oe.translate([q-.205*A,le+.212*A]).clipExtent([[q-.214*A+1e-6,le+.166*A+1e-6],[q-.115*A-1e-6,le+.234*A-1e-6]]).stream(se),reset()},albersUsa.fitExtent=function(a,A){return fitExtent(albersUsa,a,A)},albersUsa.fitSize=function(a,A){return fitSize(albersUsa,a,A)},albersUsa.fitWidth=function(a,A){return fitWidth(albersUsa,a,A)},albersUsa.fitHeight=function(a,A){return fitHeight(albersUsa,a,A)},albersUsa.scale(1070)},azimuthalequalarea:function(){return projection_projection(Cu).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return projection_projection(Tu).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])},conicequalarea:conicEqualArea,conicequidistant:function(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])},equalEarth:function(){return projection_projection(equalEarthRaw).scale(177.158)},equirectangular:function(){return projection_projection(equirectangularRaw).scale(152.63)},gnomonic:function(){return projection_projection(gnomonicRaw).scale(144.049).clipAngle(60)},identity:function(){var a,A,j,P,B,q,ne,ie=1,oe=0,se=0,le=1,he=1,pe=0,ge=null,me=1,ve=1,ye=transform_transformer({point:function point(a,A){var j=projection([a,A]);this.stream.point(j[0],j[1])}}),_e=src_identity;function reset(){return me=ie*le,ve=ie*he,q=ne=null,projection}function projection(j){var P=j[0]*me,B=j[1]*ve;if(pe){var q=B*a-P*A;P=P*a+B*A,B=q}return[P+oe,B+se]}return projection.invert=function(j){var P=j[0]-oe,B=j[1]-se;if(pe){var q=B*a+P*A;P=P*a-B*A,B=q}return[P/me,B/ve]},projection.stream=function(a){return q&&ne===a?q:q=ye(_e(ne=a))},projection.postclip=function(a){return arguments.length?(_e=a,ge=j=P=B=null,reset()):_e},projection.clipExtent=function(a){return arguments.length?(_e=null==a?(ge=j=P=B=null,src_identity):clipRectangle(ge=+a[0][0],j=+a[0][1],P=+a[1][0],B=+a[1][1]),reset()):null==ge?null:[[ge,j],[P,B]]},projection.scale=function(a){return arguments.length?(ie=+a,reset()):ie},projection.translate=function(a){return arguments.length?(oe=+a[0],se=+a[1],reset()):[oe,se]},projection.angle=function(j){return arguments.length?(A=Is(pe=j%360*Cs),a=js(pe),reset()):pe*Es},projection.reflectX=function(a){return arguments.length?(le=a?-1:1,reset()):le<0},projection.reflectY=function(a){return arguments.length?(he=a?-1:1,reset()):he<0},projection.fitExtent=function(a,A){return fitExtent(projection,a,A)},projection.fitSize=function(a,A){return fitSize(projection,a,A)},projection.fitWidth=function(a,A){return fitWidth(projection,a,A)},projection.fitHeight=function(a,A){return fitHeight(projection,a,A)},projection},mercator:function(){return mercatorProjection(mercatorRaw).scale(961/Ss)},mollweide:function(){return projection_projection(Uu).scale(169.529)},naturalEarth1:function(){return projection_projection(naturalEarth1Raw).scale(175.295)},orthographic:function(){return projection_projection(orthographicRaw).scale(249.5).clipAngle(90.000001)},stereographic:function(){return projection_projection(stereographicRaw).scale(250).clipAngle(142)},transversemercator:function(){var a=mercatorProjection(transverseMercatorRaw),A=a.center,j=a.rotate;return a.center=function(a){return arguments.length?A([-a[1],a[0]]):[(a=A())[1],-a[0]]},a.rotate=function(a){return arguments.length?j([a[0],a[1],a.length>2?a[2]+90:90]):[(a=j())[0],a[1],a[2]-90]},j([0,0,90]).scale(159.155)}};for(var Hu in Wu)vega_projection_module_projection(Hu,Wu[Hu]);function graticuleX(a,A,j){var P=src_range(a,A-1e-6,j).concat(A);return function(a){return P.map((function(A){return[a,A]}))}}function graticuleY(a,A,j){var P=src_range(a,A-1e-6,j).concat(A);return function(a){return P.map((function(A){return[A,a]}))}}function graticule_graticule(){var a,A,j,P,B,q,ne,ie,oe,se,le,he,pe=10,ge=pe,me=90,ve=360,ye=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return src_range(Fs(P/me)*me,j,me).map(le).concat(src_range(Fs(ie/ve)*ve,ne,ve).map(he)).concat(src_range(Fs(A/pe)*pe,a,pe).filter((function(a){return Ts(a%me)>1e-6})).map(oe)).concat(src_range(Fs(q/ge)*ge,B,ge).filter((function(a){return Ts(a%ve)>1e-6})).map(se))}return graticule.lines=function(){return lines().map((function(a){return{type:"LineString",coordinates:a}}))},graticule.outline=function(){return{type:"Polygon",coordinates:[le(P).concat(he(ne).slice(1),le(j).reverse().slice(1),he(ie).reverse().slice(1))]}},graticule.extent=function(a){return arguments.length?graticule.extentMajor(a).extentMinor(a):graticule.extentMinor()},graticule.extentMajor=function(a){return arguments.length?(P=+a[0][0],j=+a[1][0],ie=+a[0][1],ne=+a[1][1],P>j&&(a=P,P=j,j=a),ie>ne&&(a=ie,ie=ne,ne=a),graticule.precision(ye)):[[P,ie],[j,ne]]},graticule.extentMinor=function(j){return arguments.length?(A=+j[0][0],a=+j[1][0],q=+j[0][1],B=+j[1][1],A>a&&(j=A,A=a,a=j),q>B&&(j=q,q=B,B=j),graticule.precision(ye)):[[A,q],[a,B]]},graticule.step=function(a){return arguments.length?graticule.stepMajor(a).stepMinor(a):graticule.stepMinor()},graticule.stepMajor=function(a){return arguments.length?(me=+a[0],ve=+a[1],graticule):[me,ve]},graticule.stepMinor=function(a){return arguments.length?(pe=+a[0],ge=+a[1],graticule):[pe,ge]},graticule.precision=function(pe){return arguments.length?(ye=+pe,oe=graticuleX(q,B,90),se=graticuleY(A,a,ye),le=graticuleX(ie,ne,90),he=graticuleY(P,j,ye),graticule):ye},graticule.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function vega_geo_module_noop(){}var Gu=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function vega_geo_module_contours(){var a=1,A=1,j=smoothLinear;function contours(a,A){return A.map((function(A){return contour(a,A)}))}function contour(P,B){var q=[],ne=[];return function isorings(j,P,B){var q,ne,ie,oe,se,le,he=new Array,pe=new Array;q=ne=-1,oe=j[0]>=P,Gu[oe<<1].forEach(stitch);for(;++q<a-1;)ie=oe,oe=j[q+1]>=P,Gu[ie|oe<<1].forEach(stitch);Gu[oe<<0].forEach(stitch);for(;++ne<A-1;){for(q=-1,oe=j[ne*a+a]>=P,se=j[ne*a]>=P,Gu[oe<<1|se<<2].forEach(stitch);++q<a-1;)ie=oe,oe=j[ne*a+a+q+1]>=P,le=se,se=j[ne*a+q+1]>=P,Gu[ie|oe<<1|se<<2|le<<3].forEach(stitch);Gu[oe|se<<3].forEach(stitch)}q=-1,se=j[ne*a]>=P,Gu[se<<2].forEach(stitch);for(;++q<a-1;)le=se,se=j[ne*a+q+1]>=P,Gu[se<<2|le<<3].forEach(stitch);function stitch(a){var A,j,P=[a[0][0]+q,a[0][1]+ne],ie=[a[1][0]+q,a[1][1]+ne],oe=index(P),se=index(ie);(A=pe[oe])?(j=he[se])?(delete pe[A.end],delete he[j.start],A===j?(A.ring.push(ie),B(A.ring)):he[A.start]=pe[j.end]={start:A.start,end:j.end,ring:A.ring.concat(j.ring)}):(delete pe[A.end],A.ring.push(ie),pe[A.end=se]=A):(A=he[se])?(j=pe[oe])?(delete he[A.start],delete pe[j.end],A===j?(A.ring.push(ie),B(A.ring)):he[j.start]=pe[A.end]={start:j.start,end:A.end,ring:j.ring.concat(A.ring)}):(delete he[A.start],A.ring.unshift(P),he[A.start=oe]=A):he[oe]=pe[se]={start:oe,end:se,ring:[P,ie]}}Gu[se<<3].forEach(stitch)}(P,B,(function(a){j(a,P,B),function vega_geo_module_area(a){var A=0,j=a.length,P=a[j-1][1]*a[0][0]-a[j-1][0]*a[0][1];for(;++A<j;)P+=a[A-1][1]*a[A][0]-a[A-1][0]*a[A][1];return P}(a)>0?q.push([a]):ne.push(a)})),ne.forEach((function(a){for(var A,j=0,P=q.length;j<P;++j)if(-1!==contains((A=q[j])[0],a))return void A.push(a)})),{type:"MultiPolygon",value:B,coordinates:q}}function index(A){return 2*A[0]+A[1]*(a+1)*4}function smoothLinear(j,P,B){j.forEach((function(j){var q,ne=j[0],ie=j[1],oe=0|ne,se=0|ie,le=P[se*a+oe];ne>0&&ne<a&&oe===ne&&(q=P[se*a+oe-1],j[0]=ne+(B-q)/(le-q)-.5),ie>0&&ie<A&&se===ie&&(q=P[(se-1)*a+oe],j[1]=ie+(B-q)/(le-q)-.5)}))}return contours.contour=contour,contours.size=function(j){if(!arguments.length)return[a,A];var P=Math.floor(j[0]),B=Math.floor(j[1]);return P>=0&&B>=0||Object(ve.o)("invalid size"),a=P,A=B,contours},contours.smooth=function(a){return arguments.length?(j=a?smoothLinear:vega_geo_module_noop,contours):j===smoothLinear},contours}function contains(a,A){for(var j,P=-1,B=A.length;++P<B;)if(j=ringContains(a,A[P]))return j;return 0}function ringContains(a,A){for(var j=A[0],P=A[1],B=-1,q=0,ne=a.length,ie=ne-1;q<ne;ie=q++){var oe=a[q],se=oe[0],le=oe[1],he=a[ie],pe=he[0],ge=he[1];if(segmentContains(oe,he,A))return 0;le>P!==ge>P&&j<(pe-se)*(P-le)/(ge-le)+se&&(B=-B)}return B}function segmentContains(a,A,j){var P;return function vega_geo_module_collinear(a,A,j){return(A[0]-a[0])*(j[1]-a[1])===(j[0]-a[0])*(A[1]-a[1])}(a,A,j)&&function within(a,A,j){return a<=A&&A<=j||j<=A&&A<=a}(a[P=+(a[0]===A[0])],j[P],A[P])}function vega_geo_module_quantize(a,A,j){return function(P){var B=Object(ve.q)(P),q=j?Math.min(B[0],0):B[0],ne=B[1],ie=ne-q,oe=A?Object(Qt.c)(q,ne,a):ie/(a+1);return src_range(q+oe,ne,oe)}}function Isocontour(a){Transform.call(this,null,a)}function _transform(a,A,j,P,B){var q=a.x1||0,ne=a.y1||0,ie=A*j<0;function transformPolygon(a){a.forEach(transformRing)}function transformRing(a){ie&&a.reverse(),a.forEach(transformPoint)}function transformPoint(a){a[0]=(a[0]-q)*A+P,a[1]=(a[1]-ne)*j+B}return function(a){return a.coordinates.forEach(transformPolygon),a}}function vega_geo_module_radius(a,A,j){var P=a>=0?a:estimateBandwidth(A,j);return Math.round((Math.sqrt(4*P*P+1)-1)/2)}function vega_geo_module_number(a){return Object(ve.E)(a)?a:Object(ve.m)(+a)}function density2D(){var a=function x(a){return a[0]},A=function y(a){return a[1]},j=ve.Q,P=[-1,-1],B=960,q=500,ne=2;function density(ie,oe){var se=vega_geo_module_radius(P[0],ie,a)>>ne,le=vega_geo_module_radius(P[1],ie,A)>>ne,he=se?se+2:0,pe=le?le+2:0,ge=2*he+(B>>ne),me=2*pe+(q>>ne),ve=new Float32Array(ge*me),ye=new Float32Array(ge*me),_e=ve;ie.forEach((function(P){var B=he+(+a(P)>>ne),q=pe+(+A(P)>>ne);B>=0&&B<ge&&q>=0&&q<me&&(ve[B+q*ge]+=+j(P))})),se>0&&le>0?(blurX(ge,me,ve,ye,se),blurY(ge,me,ye,ve,le),blurX(ge,me,ve,ye,se),blurY(ge,me,ye,ve,le),blurX(ge,me,ve,ye,se),blurY(ge,me,ye,ve,le)):se>0?(blurX(ge,me,ve,ye,se),blurX(ge,me,ye,ve,se),blurX(ge,me,ve,ye,se),_e=ye):le>0&&(blurY(ge,me,ve,ye,le),blurY(ge,me,ye,ve,le),blurY(ge,me,ve,ye,le),_e=ye);for(var we=oe?Math.pow(2,-2*ne):1/sum_sum(_e),ke=0,Oe=ge*me;ke<Oe;++ke)_e[ke]*=we;return{values:_e,scale:1<<ne,width:ge,height:me,x1:he,y1:pe,x2:he+(B>>ne),y2:pe+(q>>ne)}}return density.x=function(A){return arguments.length?(a=vega_geo_module_number(A),density):a},density.y=function(a){return arguments.length?(A=vega_geo_module_number(a),density):A},density.weight=function(a){return arguments.length?(j=vega_geo_module_number(a),density):j},density.size=function(a){if(!arguments.length)return[B,q];var A=+a[0],j=+a[1];return A>=0&&j>=0||Object(ve.o)("invalid size"),B=A,q=j,density},density.cellSize=function(a){return arguments.length?((a=+a)>=1||Object(ve.o)("invalid cell size"),ne=Math.floor(Math.log(a)/Math.LN2),density):1<<ne},density.bandwidth=function(a){return arguments.length?(1===(a=Object(ve.i)(a)).length&&(a=[+a[0],+a[0]]),2!==a.length&&Object(ve.o)("invalid bandwidth"),P=a,density):P},density}function blurX(a,A,j,P,B){for(var q=1+(B<<1),ne=0;ne<A;++ne)for(var ie=0,oe=0;ie<a+B;++ie)ie<a&&(oe+=j[ie+ne*a]),ie>=B&&(ie>=q&&(oe-=j[ie-q+ne*a]),P[ie-B+ne*a]=oe/Math.min(ie+1,a-1+q-ie,q))}function blurY(a,A,j,P,B){for(var q=1+(B<<1),ne=0;ne<a;++ne)for(var ie=0,oe=0;ie<A+B;++ie)ie<A&&(oe+=j[ne+ie*a]),ie>=B&&(ie>=q&&(oe-=j[ne+(ie-q)*a]),P[ne+(ie-B)*a]=oe/Math.min(ie+1,A-1+q-ie,q))}function KDE2D(a){Transform.call(this,null,a)}Isocontour.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},Object(ve.z)(Isocontour,Transform,{transform:function transform(a,A){if(this.value&&!A.changed()&&!a.modified())return A.StopPropagation;var j=A.fork(A.NO_SOURCE|A.NO_FIELDS),P=A.materialize(A.SOURCE).source,B=a.field||ve.y,q=vega_geo_module_contours().smooth(!1!==a.smooth),ne=a.thresholds||function levels(a,A,j){var P=vega_geo_module_quantize(j.levels||10,j.nice,!1!==j.zero);return"shared"!==j.resolve?P:P(a.map((function(a){return max_max(A(a).values)})))}(P,B,a),ie=null===a.as?null:a.as||"contour",oe=[];return P.forEach((function(A){var j=B(A),P=q.size([j.width,j.height])(j.values,Object(ve.B)(ne)?ne:ne(j.values));!function transformPaths(a,A,j,P){var B=P.scale||A.scale,q=P.translate||A.translate;Object(ve.E)(B)&&(B=B(j,P));Object(ve.E)(q)&&(q=q(j,P));if((1===B||null==B)&&!q)return;var ne=(Object(ve.G)(B)?B:B[0])||1,ie=(Object(ve.G)(B)?B:B[1])||1,oe=q&&q[0]||0,se=q&&q[1]||0;a.forEach(_transform(A,ne,ie,oe,se))}(P,j,A,a),P.forEach((function(a){oe.push(rederive(A,ingest$1(null!=ie?Object(wt.a)({},ie,a):a)))}))})),this.value&&(j.rem=this.value),this.value=j.source=j.add=oe,j}}),KDE2D.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var Vu=["x","y","weight","size","cellSize","bandwidth"];function vega_geo_module_params(a,A){return Vu.forEach((function(j){return null!=A[j]?a[j](A[j]):0})),a}function Contour(a){Transform.call(this,null,a)}Object(ve.z)(KDE2D,Transform,{transform:function transform(a,A){if(this.value&&!A.changed()&&!a.modified())return A.StopPropagation;var j,P=A.fork(A.NO_SOURCE|A.NO_FIELDS),B=function vega_geo_module_partition(a,A){var j,P,B,q,ne,ie,oe=[],se=function get(a){return a(q)};if(null==A)oe.push(a);else for(j={},P=0,B=a.length;P<B;++P)q=a[P],ne=A.map(se),(ie=j[ne])||(j[ne]=ie=[],ie.dims=ne,oe.push(ie)),ie.push(q);return oe}(A.materialize(A.SOURCE).source,a.groupby),q=(a.groupby||[]).map(ve.h),ne=vega_geo_module_params(density2D(),a),ie=a.as||"grid";return j=B.map((function(A){return ingest$1(function set(a,A){for(var j=0;j<q.length;++j)a[q[j]]=A[j];return a}(Object(wt.a)({},ie,ne(A,a.counts)),A.dims))})),this.value&&(P.rem=this.value),this.value=P.source=P.add=j,P}}),Contour.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},Object(ve.z)(Contour,Transform,{transform:function transform(a,A){if(this.value&&!A.changed()&&!a.modified())return A.StopPropagation;var j,P,B=A.fork(A.NO_SOURCE|A.NO_FIELDS),q=vega_geo_module_contours().smooth(!1!==a.smooth),ne=a.values,ie=a.thresholds||vega_geo_module_quantize(a.count||10,a.nice,!!ne),oe=a.size;return ne||(ne=A.materialize(A.SOURCE).source,P=_transform(j=vega_geo_module_params(density2D(),a)(ne,!0),j.scale||1,j.scale||1,0,0),oe=[j.width,j.height],ne=j.values),ie=Object(ve.B)(ie)?ie:ie(ne),ne=q.size(oe)(ne,ie),P&&ne.forEach(P),this.value&&(B.rem=this.value),this.value=B.source=B.add=(ne||[]).map(ingest$1),B}});function GeoJSON(a){Transform.call(this,null,a)}function GeoPath(a){Transform.call(this,null,a)}function GeoPoint(a){Transform.call(this,null,a)}function GeoShape(a){Transform.call(this,null,a)}function Graticule(a){Transform.call(this,[],a),this.generator=graticule_graticule()}function Heatmap(a){Transform.call(this,null,a)}function dependency(a){if(!Object(ve.E)(a))return!1;var A=Object(ve.fb)(Object(ve.g)(a));return A.$x||A.$y||A.$value||A.$max}function Projection(a){Transform.call(this,null,a),this.modified(!0)}function vega_geo_module_set(a,A,j){Object(ve.E)(a[A])&&a[A](j)}GeoJSON.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Object(ve.z)(GeoJSON,Transform,{transform:function transform(a,A){var j,P=this._features,B=this._points,q=a.fields,ne=q&&q[0],ie=q&&q[1],oe=a.geojson||!q&&ve.y,se=A.ADD;j=a.modified()||A.changed(A.REM)||A.modified(Object(ve.g)(oe))||ne&&A.modified(Object(ve.g)(ne))||ie&&A.modified(Object(ve.g)(ie)),this.value&&!j||(se=A.SOURCE,this._features=P=[],this._points=B=[]),oe&&A.visit(se,(function(a){return P.push(oe(a))})),ne&&ie&&(A.visit(se,(function(a){var A=ne(a),j=ie(a);null!=A&&null!=j&&(A=+A)===A&&(j=+j)===j&&B.push([A,j])})),P=P.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:B}})),this.value={type:"FeatureCollection",features:P}}}),GeoPath.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Object(ve.z)(GeoPath,Transform,{transform:function transform(a,A){var j=A.fork(A.ALL),P=this.value,B=a.field||ve.y,q=a.as||"path",ne=j.SOURCE;!P||a.modified()?(this.value=P=getProjectionPath(a.projection),j.materialize().reflow()):ne=B===ve.y||A.modified(B.fields)?j.ADD_MOD:j.ADD;var ie=function initPath(a,A){var j=a.pointRadius();a.context(null),null!=A&&a.pointRadius(A);return j}(P,a.pointRadius);return j.visit(ne,(function(a){return a[q]=P(B(a))})),P.pointRadius(ie),j.modifies(q)}}),GeoPoint.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Object(ve.z)(GeoPoint,Transform,{transform:function transform(a,A){var j,P=a.projection,B=a.fields[0],q=a.fields[1],ne=a.as||["x","y"],ie=ne[0],oe=ne[1];function set(a){var A=P([B(a),q(a)]);A?(a[ie]=A[0],a[oe]=A[1]):(a[ie]=void 0,a[oe]=void 0)}return a.modified()?A=A.materialize().reflow(!0).visit(A.SOURCE,set):(j=A.modified(B.fields)||A.modified(q.fields),A.visit(j?A.ADD_MOD:A.ADD,set)),A.modifies(ne)}}),GeoShape.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Object(ve.z)(GeoShape,Transform,{transform:function transform(a,A){var j=A.fork(A.ALL),P=this.value,B=a.as||"shape",q=j.ADD;return P&&!a.modified()||(this.value=P=function shapeGenerator(a,A,j){var P=null==j?function(j){return a(A(j))}:function(P){var B=a.pointRadius(),q=a.pointRadius(j)(A(P));return a.pointRadius(B),q};return P.context=function(A){return a.context(A),P},P}(getProjectionPath(a.projection),a.field||Object(ve.u)("datum"),a.pointRadius),j.materialize().reflow(),q=j.SOURCE),j.visit(q,(function(a){return a[B]=P})),j.modifies(B)}}),Graticule.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Object(ve.z)(Graticule,Transform,{transform:function transform(a,A){var j,P=this.value,B=this.generator;if(!P.length||a.modified())for(var q in a)Object(ve.E)(B[q])&&B[q](a[q]);return j=B(),P.length?A.mod.push(replace(P[0],j)):A.add.push(ingest$1(j)),P[0]=j,A}}),Heatmap.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},Object(ve.z)(Heatmap,Transform,{transform:function transform(a,A){if(!A.changed()&&!a.modified())return A.StopPropagation;var j=A.materialize(A.SOURCE).source,P="shared"===a.resolve,B=a.field||ve.y,q=function opacity_(a,A){var j;Object(ve.E)(a)?(j=function f(j){return a(j,A)}).dep=dependency(a):a?j=Object(ve.m)(a):(j=function f(a){return a.$value/a.$max||0}).dep=!0;return j}(a.opacity,a),ne=function color_(a,A){var j;Object(ve.E)(a)?(j=function f(j){return color_rgb(a(j,A))}).dep=dependency(a):j=Object(ve.m)(color_rgb(a||"#888"));return j}(a.color,a),ie=a.as||"image",oe={$x:0,$y:0,$value:0,$max:P?max_max(j.map((function(a){return max_max(B(a).values)}))):0};return j.forEach((function(a){var A=B(a),j=Object(ve.p)({},a,oe);P||(j.$max=max_max(A.values||[])),a[ie]=function toCanvas(a,A,j,P){for(var B=a.width,q=a.height,ne=a.x1||0,ie=a.y1||0,oe=a.x2||B,se=a.y2||q,le=a.values,he=le?function(a){return le[a]}:ve.mb,pe=domCanvas(oe-ne,se-ie),ge=pe.getContext("2d"),me=ge.getImageData(0,0,oe-ne,se-ie),ye=me.data,_e=ie,we=0;_e<se;++_e){A.$y=_e-ie;for(var ke=ne,Oe=_e*B;ke<oe;++ke,we+=4){A.$x=ke-ne,A.$value=he(ke+Oe);var Se=j(A);ye[we+0]=Se.r,ye[we+1]=Se.g,ye[we+2]=Se.b,ye[we+3]=~~(255*P(A))}}return ge.putImageData(me,0,0),pe}(A,j,ne.dep?ne:Object(ve.m)(ne(j)),q.dep?q:Object(ve.m)(q(j)))})),A.reflow(!0).modifies(ie)}}),Object(ve.z)(Projection,Transform,{transform:function transform(a,A){var j=this.value;return!j||a.modified("type")?(this.value=j=function vega_geo_module_create(a){var A=vega_projection_module_projection((a||"mercator").toLowerCase());A||Object(ve.o)("Unrecognized projection type: "+a);return A()}(a.type),qu.forEach((function(A){null!=a[A]&&vega_geo_module_set(j,A,a[A])}))):qu.forEach((function(A){a.modified(A)&&vega_geo_module_set(j,A,a[A])})),null!=a.pointRadius&&j.path.pointRadius(a.pointRadius),a.fit&&function vega_geo_module_fit(a,A){var j=function collectGeoJSON(a){return 1===(a=Object(ve.i)(a)).length?a[0]:{type:"FeatureCollection",features:a.reduce((function(a,A){return a.concat(function featurize(a){return"FeatureCollection"===a.type?a.features:Object(ve.i)(a).filter((function(a){return null!=a})).map((function(a){return"Feature"===a.type?a:{type:"Feature",geometry:a}}))}(A))}),[])}}(A.fit);A.extent?a.fitExtent(A.extent,j):A.size&&a.fitSize(A.size,j)}(j,a),A.fork(A.NO_SOURCE|A.NO_FIELDS)}});function add_add(a,A,j,P){if(isNaN(A)||isNaN(j))return a;var B,q,ne,ie,oe,se,le,he,pe,ge=a._root,me={data:P},ve=a._x0,ye=a._y0,_e=a._x1,we=a._y1;if(!ge)return a._root=me,a;for(;ge.length;)if((se=A>=(q=(ve+_e)/2))?ve=q:_e=q,(le=j>=(ne=(ye+we)/2))?ye=ne:we=ne,B=ge,!(ge=ge[he=le<<1|se]))return B[he]=me,a;if(ie=+a._x.call(null,ge.data),oe=+a._y.call(null,ge.data),A===ie&&j===oe)return me.next=ge,B?B[he]=me:a._root=me,a;do{B=B?B[he]=new Array(4):a._root=new Array(4),(se=A>=(q=(ve+_e)/2))?ve=q:_e=q,(le=j>=(ne=(ye+we)/2))?ye=ne:we=ne}while((he=le<<1|se)===(pe=(oe>=ne)<<1|ie>=q));return B[pe]=ge,B[he]=me,a}var src_quad=function(a,A,j,P,B){this.node=a,this.x0=A,this.y0=j,this.x1=P,this.y1=B};function defaultX(a){return a[0]}function defaultY(a){return a[1]}function quadtree(a,A,j){var P=new Quadtree(null==A?defaultX:A,null==j?defaultY:j,NaN,NaN,NaN,NaN);return null==a?P:P.addAll(a)}function Quadtree(a,A,j,P,B,q){this._x=a,this._y=A,this._x0=j,this._y0=P,this._x1=B,this._y1=q,this._root=void 0}function leaf_copy(a){for(var A={data:a.data},j=A;a=a.next;)j=j.next={data:a.data};return A}var Yu=quadtree.prototype=Quadtree.prototype;Yu.copy=function(){var a,A,j=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),P=this._root;if(!P)return j;if(!P.length)return j._root=leaf_copy(P),j;for(a=[{source:P,target:j._root=new Array(4)}];P=a.pop();)for(var B=0;B<4;++B)(A=P.source[B])&&(A.length?a.push({source:A,target:P.target[B]=new Array(4)}):P.target[B]=leaf_copy(A));return j},Yu.add=function(a){var A=+this._x.call(null,a),j=+this._y.call(null,a);return add_add(this.cover(A,j),A,j,a)},Yu.addAll=function addAll(a){var A,j,P,B,q=a.length,ne=new Array(q),ie=new Array(q),oe=1/0,se=1/0,le=-1/0,he=-1/0;for(j=0;j<q;++j)isNaN(P=+this._x.call(null,A=a[j]))||isNaN(B=+this._y.call(null,A))||(ne[j]=P,ie[j]=B,P<oe&&(oe=P),P>le&&(le=P),B<se&&(se=B),B>he&&(he=B));if(oe>le||se>he)return this;for(this.cover(oe,se).cover(le,he),j=0;j<q;++j)add_add(this,ne[j],ie[j],a[j]);return this},Yu.cover=function(a,A){if(isNaN(a=+a)||isNaN(A=+A))return this;var j=this._x0,P=this._y0,B=this._x1,q=this._y1;if(isNaN(j))B=(j=Math.floor(a))+1,q=(P=Math.floor(A))+1;else{for(var ne,ie,oe=B-j||1,se=this._root;j>a||a>=B||P>A||A>=q;)switch(ie=(A<P)<<1|a<j,(ne=new Array(4))[ie]=se,se=ne,oe*=2,ie){case 0:B=j+oe,q=P+oe;break;case 1:j=B-oe,q=P+oe;break;case 2:B=j+oe,P=q-oe;break;case 3:j=B-oe,P=q-oe}this._root&&this._root.length&&(this._root=se)}return this._x0=j,this._y0=P,this._x1=B,this._y1=q,this},Yu.data=function(){var a=[];return this.visit((function(A){if(!A.length)do{a.push(A.data)}while(A=A.next)})),a},Yu.extent=function(a){return arguments.length?this.cover(+a[0][0],+a[0][1]).cover(+a[1][0],+a[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Yu.find=function(a,A,j){var P,B,q,ne,ie,oe,se,le=this._x0,he=this._y0,pe=this._x1,ge=this._y1,me=[],ve=this._root;for(ve&&me.push(new src_quad(ve,le,he,pe,ge)),null==j?j=1/0:(le=a-j,he=A-j,pe=a+j,ge=A+j,j*=j);oe=me.pop();)if(!(!(ve=oe.node)||(B=oe.x0)>pe||(q=oe.y0)>ge||(ne=oe.x1)<le||(ie=oe.y1)<he))if(ve.length){var ye=(B+ne)/2,_e=(q+ie)/2;me.push(new src_quad(ve[3],ye,_e,ne,ie),new src_quad(ve[2],B,_e,ye,ie),new src_quad(ve[1],ye,q,ne,_e),new src_quad(ve[0],B,q,ye,_e)),(se=(A>=_e)<<1|a>=ye)&&(oe=me[me.length-1],me[me.length-1]=me[me.length-1-se],me[me.length-1-se]=oe)}else{var we=a-+this._x.call(null,ve.data),ke=A-+this._y.call(null,ve.data),Oe=we*we+ke*ke;if(Oe<j){var Se=Math.sqrt(j=Oe);le=a-Se,he=A-Se,pe=a+Se,ge=A+Se,P=ve.data}}return P},Yu.remove=function(a){if(isNaN(q=+this._x.call(null,a))||isNaN(ne=+this._y.call(null,a)))return this;var A,j,P,B,q,ne,ie,oe,se,le,he,pe,ge=this._root,me=this._x0,ve=this._y0,ye=this._x1,_e=this._y1;if(!ge)return this;if(ge.length)for(;;){if((se=q>=(ie=(me+ye)/2))?me=ie:ye=ie,(le=ne>=(oe=(ve+_e)/2))?ve=oe:_e=oe,A=ge,!(ge=ge[he=le<<1|se]))return this;if(!ge.length)break;(A[he+1&3]||A[he+2&3]||A[he+3&3])&&(j=A,pe=he)}for(;ge.data!==a;)if(P=ge,!(ge=ge.next))return this;return(B=ge.next)&&delete ge.next,P?(B?P.next=B:delete P.next,this):A?(B?A[he]=B:delete A[he],(ge=A[0]||A[1]||A[2]||A[3])&&ge===(A[3]||A[2]||A[1]||A[0])&&!ge.length&&(j?j[pe]=ge:this._root=ge),this):(this._root=B,this)},Yu.removeAll=function removeAll(a){for(var A=0,j=a.length;A<j;++A)this.remove(a[A]);return this},Yu.root=function(){return this._root},Yu.size=function(){var a=0;return this.visit((function(A){if(!A.length)do{++a}while(A=A.next)})),a},Yu.visit=function(a){var A,j,P,B,q,ne,ie=[],oe=this._root;for(oe&&ie.push(new src_quad(oe,this._x0,this._y0,this._x1,this._y1));A=ie.pop();)if(!a(oe=A.node,P=A.x0,B=A.y0,q=A.x1,ne=A.y1)&&oe.length){var se=(P+q)/2,le=(B+ne)/2;(j=oe[3])&&ie.push(new src_quad(j,se,le,q,ne)),(j=oe[2])&&ie.push(new src_quad(j,P,le,se,ne)),(j=oe[1])&&ie.push(new src_quad(j,se,B,q,le)),(j=oe[0])&&ie.push(new src_quad(j,P,B,se,le))}return this},Yu.visitAfter=function(a){var A,j=[],P=[];for(this._root&&j.push(new src_quad(this._root,this._x0,this._y0,this._x1,this._y1));A=j.pop();){var B=A.node;if(B.length){var q,ne=A.x0,ie=A.y0,oe=A.x1,se=A.y1,le=(ne+oe)/2,he=(ie+se)/2;(q=B[0])&&j.push(new src_quad(q,ne,ie,le,he)),(q=B[1])&&j.push(new src_quad(q,le,ie,oe,he)),(q=B[2])&&j.push(new src_quad(q,ne,he,le,se)),(q=B[3])&&j.push(new src_quad(q,le,he,oe,se))}P.push(A)}for(;A=P.pop();)a(A.node,A.x0,A.y0,A.x1,A.y1);return this},Yu.x=function(a){return arguments.length?(this._x=a,this):this._x},Yu.y=function(a){return arguments.length?(this._y=a,this):this._y};var d3_force_src_constant=function(a){return function(){return a}},jiggle=function(a){return 1e-6*(a()-.5)};function collide_x(a){return a.x+a.vx}function collide_y(a){return a.y+a.vy}var $u={value:function value(){}};function dispatch(){for(var a,A=0,j=arguments.length,P={};A<j;++A){if(!(a=arguments[A]+"")||a in P||/[\s.]/.test(a))throw new Error("illegal type: "+a);P[a]=[]}return new Dispatch(P)}function Dispatch(a){this._=a}function parseTypenames(a,A){return a.trim().split(/^|\s+/).map((function(a){var j="",P=a.indexOf(".");if(P>=0&&(j=a.slice(P+1),a=a.slice(0,P)),a&&!A.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:j}}))}function dispatch_get(a,A){for(var j,P=0,B=a.length;P<B;++P)if((j=a[P]).name===A)return j.value}function dispatch_set(a,A,j){for(var P=0,B=a.length;P<B;++P)if(a[P].name===A){a[P]=$u,a=a.slice(0,P).concat(a.slice(P+1));break}return null!=j&&a.push({name:A,value:j}),a}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function on(a,A){var j,P=this._,B=parseTypenames(a+"",P),q=-1,ne=B.length;if(!(arguments.length<2)){if(null!=A&&"function"!==typeof A)throw new Error("invalid callback: "+A);for(;++q<ne;)if(j=(a=B[q]).type)P[j]=dispatch_set(P[j],a.name,A);else if(null==A)for(j in P)P[j]=dispatch_set(P[j],a.name,null);return this}for(;++q<ne;)if((j=(a=B[q]).type)&&(j=dispatch_get(P[j],a.name)))return j},copy:function copy(){var copy={},a=this._;for(var A in a)copy[A]=a[A].slice();return new Dispatch(copy)},call:function call(a,A){if((j=arguments.length-2)>0)for(var j,P,B=new Array(j),q=0;q<j;++q)B[q]=arguments[q+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(q=0,j=(P=this._[a]).length;q<j;++q)P[q].value.apply(A,B)},apply:function apply(a,A,j){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var P=this._[a],B=0,q=P.length;B<q;++B)P[B].value.apply(A,j)}};var Ku,Xu,Ju=dispatch,Qu=0,Zu=0,el=0,nl=0,rl=0,il=0,al="object"===typeof performance&&performance.now?performance:Date,ol="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function now(){return rl||(ol(clearNow),rl=al.now()+il)}function clearNow(){rl=0}function Timer(){this._call=this._time=this._next=null}function timer(a,A,j){var P=new Timer;return P.restart(a,A,j),P}function wake(){rl=(nl=al.now())+il,Qu=Zu=0;try{!function timerFlush(){now(),++Qu;for(var a,A=Ku;A;)(a=rl-A._time)>=0&&A._call.call(null,a),A=A._next;--Qu}()}finally{Qu=0,function nap(){var a,A,j=Ku,P=1/0;for(;j;)j._call?(P>j._time&&(P=j._time),a=j,j=j._next):(A=j._next,j._next=null,j=a?a._next=A:Ku=A);Xu=a,sleep(P)}(),rl=0}}function poke(){var a=al.now(),A=a-nl;A>1e3&&(il-=A,nl=a)}function sleep(a){Qu||(Zu&&(Zu=clearTimeout(Zu)),a-rl>24?(a<1/0&&(Zu=setTimeout(wake,a-al.now()-il)),el&&(el=clearInterval(el))):(el||(nl=al.now(),el=setInterval(poke,1e3)),Qu=1,ol(wake)))}Timer.prototype=timer.prototype={constructor:Timer,restart:function restart(a,A,j){if("function"!==typeof a)throw new TypeError("callback is not a function");j=(null==j?now():+j)+(null==A?0:+A),this._next||Xu===this||(Xu?Xu._next=this:Ku=this,Xu=this),this._call=a,this._time=j,sleep()},stop:function stop(){this._call&&(this._call=null,this._time=1/0,sleep())}};function simulation_x(a){return a.x}function simulation_y(a){return a.y}var sl=Math.PI*(3-Math.sqrt(5));function link_index(a){return a.index}function link_find(a,A){var j=a.get(A);if(!j)throw new Error("node not found: "+A);return j}var ul={center:function(a,A){var j,P=1;function force(){var B,q,ne=j.length,ie=0,oe=0;for(B=0;B<ne;++B)ie+=(q=j[B]).x,oe+=q.y;for(ie=(ie/ne-a)*P,oe=(oe/ne-A)*P,B=0;B<ne;++B)(q=j[B]).x-=ie,q.y-=oe}return null==a&&(a=0),null==A&&(A=0),force.initialize=function(a){j=a},force.x=function(A){return arguments.length?(a=+A,force):a},force.y=function(a){return arguments.length?(A=+a,force):A},force.strength=function(a){return arguments.length?(P=+a,force):P},force},collide:function(a){var A,j,P,B=1,q=1;function force(){for(var a,ne,ie,oe,se,le,he,pe=A.length,ge=0;ge<q;++ge)for(ne=quadtree(A,collide_x,collide_y).visitAfter(prepare),a=0;a<pe;++a)ie=A[a],le=j[ie.index],he=le*le,oe=ie.x+ie.vx,se=ie.y+ie.vy,ne.visit(apply);function apply(a,A,j,q,ne){var pe=a.data,ge=a.r,me=le+ge;if(!pe)return A>oe+me||q<oe-me||j>se+me||ne<se-me;if(pe.index>ie.index){var ve=oe-pe.x-pe.vx,ye=se-pe.y-pe.vy,_e=ve*ve+ye*ye;_e<me*me&&(0===ve&&(_e+=(ve=jiggle(P))*ve),0===ye&&(_e+=(ye=jiggle(P))*ye),_e=(me-(_e=Math.sqrt(_e)))/_e*B,ie.vx+=(ve*=_e)*(me=(ge*=ge)/(he+ge)),ie.vy+=(ye*=_e)*me,pe.vx-=ve*(me=1-me),pe.vy-=ye*me)}}}function prepare(a){if(a.data)return a.r=j[a.data.index];for(var A=a.r=0;A<4;++A)a[A]&&a[A].r>a.r&&(a.r=a[A].r)}function initialize(){if(A){var P,B,q=A.length;for(j=new Array(q),P=0;P<q;++P)B=A[P],j[B.index]=+a(B,P,A)}}return"function"!==typeof a&&(a=d3_force_src_constant(null==a?1:+a)),force.initialize=function(a,j){A=a,P=j,initialize()},force.iterations=function(a){return arguments.length?(q=+a,force):q},force.strength=function(a){return arguments.length?(B=+a,force):B},force.radius=function(A){return arguments.length?(a="function"===typeof A?A:d3_force_src_constant(+A),initialize(),force):a},force},nbody:function(){var a,A,j,P,B,q=d3_force_src_constant(-30),ne=1,ie=1/0,oe=.81;function force(j){var B,q=a.length,ne=quadtree(a,simulation_x,simulation_y).visitAfter(accumulate);for(P=j,B=0;B<q;++B)A=a[B],ne.visit(apply)}function initialize(){if(a){var A,j,P=a.length;for(B=new Array(P),A=0;A<P;++A)j=a[A],B[j.index]=+q(j,A,a)}}function accumulate(a){var A,j,P,q,ne,ie=0,oe=0;if(a.length){for(P=q=ne=0;ne<4;++ne)(A=a[ne])&&(j=Math.abs(A.value))&&(ie+=A.value,oe+=j,P+=j*A.x,q+=j*A.y);a.x=P/oe,a.y=q/oe}else{(A=a).x=A.data.x,A.y=A.data.y;do{ie+=B[A.data.index]}while(A=A.next)}a.value=ie}function apply(a,q,se,le){if(!a.value)return!0;var he=a.x-A.x,pe=a.y-A.y,ge=le-q,me=he*he+pe*pe;if(ge*ge/oe<me)return me<ie&&(0===he&&(me+=(he=jiggle(j))*he),0===pe&&(me+=(pe=jiggle(j))*pe),me<ne&&(me=Math.sqrt(ne*me)),A.vx+=he*a.value*P/me,A.vy+=pe*a.value*P/me),!0;if(!(a.length||me>=ie)){(a.data!==A||a.next)&&(0===he&&(me+=(he=jiggle(j))*he),0===pe&&(me+=(pe=jiggle(j))*pe),me<ne&&(me=Math.sqrt(ne*me)));do{a.data!==A&&(ge=B[a.data.index]*P/me,A.vx+=he*ge,A.vy+=pe*ge)}while(a=a.next)}}return force.initialize=function(A,P){a=A,j=P,initialize()},force.strength=function(a){return arguments.length?(q="function"===typeof a?a:d3_force_src_constant(+a),initialize(),force):q},force.distanceMin=function(a){return arguments.length?(ne=a*a,force):Math.sqrt(ne)},force.distanceMax=function(a){return arguments.length?(ie=a*a,force):Math.sqrt(ie)},force.theta=function(a){return arguments.length?(oe=a*a,force):Math.sqrt(oe)},force},link:function(a){var A,j,P,B,q,ne,ie=link_index,oe=function defaultStrength(a){return 1/Math.min(B[a.source.index],B[a.target.index])},se=d3_force_src_constant(30),le=1;function force(P){for(var B=0,ie=a.length;B<le;++B)for(var oe,se,he,pe,ge,me,ve,ye=0;ye<ie;++ye)se=(oe=a[ye]).source,pe=(he=oe.target).x+he.vx-se.x-se.vx||jiggle(ne),ge=he.y+he.vy-se.y-se.vy||jiggle(ne),pe*=me=((me=Math.sqrt(pe*pe+ge*ge))-j[ye])/me*P*A[ye],ge*=me,he.vx-=pe*(ve=q[ye]),he.vy-=ge*ve,se.vx+=pe*(ve=1-ve),se.vy+=ge*ve}function initialize(){if(P){var ne,oe,se=P.length,le=a.length,he=new Map(P.map((function(a,A){return[ie(a,A,P),a]})));for(ne=0,B=new Array(se);ne<le;++ne)(oe=a[ne]).index=ne,"object"!==typeof oe.source&&(oe.source=link_find(he,oe.source)),"object"!==typeof oe.target&&(oe.target=link_find(he,oe.target)),B[oe.source.index]=(B[oe.source.index]||0)+1,B[oe.target.index]=(B[oe.target.index]||0)+1;for(ne=0,q=new Array(le);ne<le;++ne)oe=a[ne],q[ne]=B[oe.source.index]/(B[oe.source.index]+B[oe.target.index]);A=new Array(le),initializeStrength(),j=new Array(le),initializeDistance()}}function initializeStrength(){if(P)for(var j=0,B=a.length;j<B;++j)A[j]=+oe(a[j],j,a)}function initializeDistance(){if(P)for(var A=0,B=a.length;A<B;++A)j[A]=+se(a[A],A,a)}return null==a&&(a=[]),force.initialize=function(a,A){P=a,ne=A,initialize()},force.links=function(A){return arguments.length?(a=A,initialize(),force):a},force.id=function(a){return arguments.length?(ie=a,force):ie},force.iterations=function(a){return arguments.length?(le=+a,force):le},force.strength=function(a){return arguments.length?(oe="function"===typeof a?a:d3_force_src_constant(+a),initializeStrength(),force):oe},force.distance=function(a){return arguments.length?(se="function"===typeof a?a:d3_force_src_constant(+a),initializeDistance(),force):se},force},x:function(a){var A,j,P,B=d3_force_src_constant(.1);function force(a){for(var B,q=0,ne=A.length;q<ne;++q)(B=A[q]).vx+=(P[q]-B.x)*j[q]*a}function initialize(){if(A){var q,ne=A.length;for(j=new Array(ne),P=new Array(ne),q=0;q<ne;++q)j[q]=isNaN(P[q]=+a(A[q],q,A))?0:+B(A[q],q,A)}}return"function"!==typeof a&&(a=d3_force_src_constant(null==a?0:+a)),force.initialize=function(a){A=a,initialize()},force.strength=function(a){return arguments.length?(B="function"===typeof a?a:d3_force_src_constant(+a),initialize(),force):B},force.x=function(A){return arguments.length?(a="function"===typeof A?A:d3_force_src_constant(+A),initialize(),force):a},force},y:function(a){var A,j,P,B=d3_force_src_constant(.1);function force(a){for(var B,q=0,ne=A.length;q<ne;++q)(B=A[q]).vy+=(P[q]-B.y)*j[q]*a}function initialize(){if(A){var q,ne=A.length;for(j=new Array(ne),P=new Array(ne),q=0;q<ne;++q)j[q]=isNaN(P[q]=+a(A[q],q,A))?0:+B(A[q],q,A)}}return"function"!==typeof a&&(a=d3_force_src_constant(null==a?0:+a)),force.initialize=function(a){A=a,initialize()},force.strength=function(a){return arguments.length?(B="function"===typeof a?a:d3_force_src_constant(+a),initialize(),force):B},force.y=function(A){return arguments.length?(a="function"===typeof A?A:d3_force_src_constant(+A),initialize(),force):a},force}},ll=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],cl=["static","iterations"],fl=["x","y","vx","vy"];function Force(a){Transform.call(this,null,a)}function setup(a,A,j,P){var B,q,ne,ie,oe=Object(ve.i)(A.forces);for(B=0,q=ll.length;B<q;++B)"forces"!==(ne=ll[B])&&A.modified(ne)&&a[ne](A[ne]);for(B=0,q=oe.length;B<q;++B)ie="forces"+B,(ne=j||A.modified("forces",B)?getForce(oe[B]):P&&vega_force_module_modified(oe[B],P)?a.force(ie):null)&&a.force(ie,ne);for(q=a.numForces||0;B<q;++B)a.force("forces"+B,null);return a.numForces=oe.length,a}function vega_force_module_modified(a,A){var j,P;for(j in a)if(Object(ve.E)(P=a[j])&&A.modified(Object(ve.g)(P)))return 1;return 0}function getForce(a){var A,j;for(j in Object(ve.w)(ul,a.force)||Object(ve.o)("Unrecognized force: "+a.force),A=ul[a.force](),a)Object(ve.E)(A[j])&&setForceParam(A[j],a[j],a);return A}function setForceParam(a,A,j){a(Object(ve.E)(A)?function(a){return A(a,j)}:A)}function count_count(a){var A=0,j=a.children,P=j&&j.length;if(P)for(;--P>=0;)A+=j[P].value;else A=1;a.value=A}Force.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:fl}]},Object(ve.z)(Force,Transform,{transform:function transform(a,A){var j=this.value,P=A.changed(A.ADD_REM),B=a.modified(ll),q=a.iterations||300;if(j?(P&&(A.modifies("index"),j.nodes(A.source)),(B||A.changed(A.MOD))&&setup(j,a,0,A)):(this.value=j=function vega_force_module_simulation(a,A){var j=function(a){var A,j=1,P=.001,B=1-Math.pow(P,1/300),q=0,ne=.6,ie=new Map,oe=timer(step),se=Ju("tick","end"),le=function(){var a=1;return function(){return(a=(1664525*a+1013904223)%4294967296)/4294967296}}();function step(){tick(),se.call("tick",A),j<P&&(oe.stop(),se.call("end",A))}function tick(P){var oe,se,le=a.length;void 0===P&&(P=1);for(var he=0;he<P;++he)for(j+=(q-j)*B,ie.forEach((function(a){a(j)})),oe=0;oe<le;++oe)null==(se=a[oe]).fx?se.x+=se.vx*=ne:(se.x=se.fx,se.vx=0),null==se.fy?se.y+=se.vy*=ne:(se.y=se.fy,se.vy=0);return A}function initializeNodes(){for(var A,j=0,P=a.length;j<P;++j){if((A=a[j]).index=j,null!=A.fx&&(A.x=A.fx),null!=A.fy&&(A.y=A.fy),isNaN(A.x)||isNaN(A.y)){var B=10*Math.sqrt(.5+j),q=j*sl;A.x=B*Math.cos(q),A.y=B*Math.sin(q)}(isNaN(A.vx)||isNaN(A.vy))&&(A.vx=A.vy=0)}}function initializeForce(A){return A.initialize&&A.initialize(a,le),A}return null==a&&(a=[]),initializeNodes(),A={tick:tick,restart:function restart(){return oe.restart(step),A},stop:function stop(){return oe.stop(),A},nodes:function nodes(j){return arguments.length?(a=j,initializeNodes(),ie.forEach(initializeForce),A):a},alpha:function alpha(a){return arguments.length?(j=+a,A):j},alphaMin:function alphaMin(a){return arguments.length?(P=+a,A):P},alphaDecay:function alphaDecay(a){return arguments.length?(B=+a,A):+B},alphaTarget:function alphaTarget(a){return arguments.length?(q=+a,A):q},velocityDecay:function velocityDecay(a){return arguments.length?(ne=1-a,A):1-ne},randomSource:function randomSource(a){return arguments.length?(le=a,ie.forEach(initializeForce),A):le},force:function force(a,j){return arguments.length>1?(null==j?ie.delete(a):ie.set(a,initializeForce(j)),A):ie.get(a)},find:function find(A,j,P){var B,q,ne,ie,oe,se=0,le=a.length;for(null==P?P=1/0:P*=P,se=0;se<le;++se)(ne=(B=A-(ie=a[se]).x)*B+(q=j-ie.y)*q)<P&&(oe=ie,P=ne);return oe},on:function on(a,j){return arguments.length>1?(se.on(a,j),A):se.on(a)}}}(a),P=j.stop,B=j.restart,q=!1;return j.stopped=function(){return q},j.restart=function(){return q=!1,B()},j.stop=function(){return q=!0,P()},setup(j,A,!0).on("end",(function(){return q=!0}))}(A.source,a),j.on("tick",function rerun(a,A){return function(){return a.touch(A).run()}}(A.dataflow,this)),a.static||(P=!0,j.tick()),A.modifies("index")),B||P||a.modified(cl)||A.changed()&&a.restart)if(j.alpha(Math.max(j.alpha(),a.alpha||1)).alphaDecay(1-Math.pow(j.alphaMin(),1/q)),a.static)for(j.stop();--q>=0;)j.tick();else if(j.stopped()&&j.restart(),!P)return A.StopPropagation;return this.finish(a,A)},finish:function finish(a,A){for(var j,P=A.dataflow,B=this._argops,q=0,ne=B.length;q<ne;++q)if("forces"===(j=B[q]).name&&"link"===j.op._argval.force)for(var ie,oe=j.op._argops,se=0,le=oe.length;se<le;++se)if("links"===oe[se].name&&(ie=oe[se].op.source)){P.pulse(ie,P.changeset().reflow());break}return A.reflow(a.modified()).modifies(fl)}});var dl=_e.a.mark(iterator_callee);function iterator_callee(){var a,A,j,P,B,q;return _e.a.wrap((function _callee$(ne){for(;;)switch(ne.prev=ne.next){case 0:j=[a=this];case 1:A=j.reverse(),j=[];case 2:if(!(a=A.pop())){ne.next=8;break}return ne.next=5,a;case 5:if(P=a.children)for(B=0,q=P.length;B<q;++B)j.push(P[B]);ne.next=2;break;case 8:if(j.length){ne.next=1;break}case 9:case"end":return ne.stop()}}),dl,this)}function hierarchy(a,A){a instanceof Map?(a=[void 0,a],void 0===A&&(A=mapChildren)):void 0===A&&(A=objectChildren);for(var j,P,B,q,ne,ie=new Node(a),oe=[ie];j=oe.pop();)if((B=A(j.data))&&(ne=(B=Array.from(B)).length))for(j.children=B,q=ne-1;q>=0;--q)oe.push(P=B[q]=new Node(B[q])),P.parent=j,P.depth=j.depth+1;return ie.eachBefore(computeHeight)}function objectChildren(a){return a.children}function mapChildren(a){return Array.isArray(a)?a[1]:null}function copyData(a){void 0!==a.data.value&&(a.value=a.data.value),a.data=a.data.data}function computeHeight(a){var A=0;do{a.height=A}while((a=a.parent)&&a.height<++A)}function Node(a){this.data=a,this.depth=this.height=0,this.parent=null}Node.prototype=hierarchy.prototype=Object(wt.a)({constructor:Node,count:function(){return this.eachAfter(count_count)},each:function(a,A){var j,P=-1,B=Object(We.a)(this);try{for(B.s();!(j=B.n()).done;){var q=j.value;a.call(A,q,++P,this)}}catch(ne){B.e(ne)}finally{B.f()}return this},eachAfter:function(a,A){for(var j,P,B,q=this,ne=[q],ie=[],oe=-1;q=ne.pop();)if(ie.push(q),j=q.children)for(P=0,B=j.length;P<B;++P)ne.push(j[P]);for(;q=ie.pop();)a.call(A,q,++oe,this);return this},eachBefore:function(a,A){for(var j,P,B=this,q=[B],ne=-1;B=q.pop();)if(a.call(A,B,++ne,this),j=B.children)for(P=j.length-1;P>=0;--P)q.push(j[P]);return this},find:function(a,A){var j,P=-1,B=Object(We.a)(this);try{for(B.s();!(j=B.n()).done;){var q=j.value;if(a.call(A,q,++P,this))return q}}catch(ne){B.e(ne)}finally{B.f()}},sum:function(a){return this.eachAfter((function(A){for(var j=+a(A.data)||0,P=A.children,B=P&&P.length;--B>=0;)j+=P[B].value;A.value=j}))},sort:function(a){return this.eachBefore((function(A){A.children&&A.children.sort(a)}))},path:function(a){for(var A=this,j=function leastCommonAncestor(a,A){if(a===A)return a;var j=a.ancestors(),P=A.ancestors(),B=null;a=j.pop(),A=P.pop();for(;a===A;)B=a,a=j.pop(),A=P.pop();return B}(A,a),P=[A];A!==j;)A=A.parent,P.push(A);for(var B=P.length;a!==j;)P.splice(B,0,a),a=a.parent;return P},ancestors:function(){for(var a=this,A=[a];a=a.parent;)A.push(a);return A},descendants:function(){return Array.from(this)},leaves:function(){var a=[];return this.eachBefore((function(A){A.children||a.push(A)})),a},links:function(){var a=this,A=[];return a.each((function(j){j!==a&&A.push({source:j.parent,target:j})})),A},copy:function node_copy(){return hierarchy(this).eachBefore(copyData)}},Symbol.iterator,iterator_callee);var enclose=function(a){for(var A,j,P=0,B=(a=function shuffle(a){for(var A,j,P=a.length;P;)j=Math.random()*P--|0,A=a[P],a[P]=a[j],a[j]=A;return a}(Array.from(a))).length,q=[];P<B;)A=a[P],j&&enclosesWeak(j,A)?++P:(j=encloseBasis(q=extendBasis(q,A)),P=0);return j};function extendBasis(a,A){var j,P;if(enclosesWeakAll(A,a))return[A];for(j=0;j<a.length;++j)if(enclosesNot(A,a[j])&&enclosesWeakAll(encloseBasis2(a[j],A),a))return[a[j],A];for(j=0;j<a.length-1;++j)for(P=j+1;P<a.length;++P)if(enclosesNot(encloseBasis2(a[j],a[P]),A)&&enclosesNot(encloseBasis2(a[j],A),a[P])&&enclosesNot(encloseBasis2(a[P],A),a[j])&&enclosesWeakAll(encloseBasis3(a[j],a[P],A),a))return[a[j],a[P],A];throw new Error}function enclosesNot(a,A){var j=a.r-A.r,P=A.x-a.x,B=A.y-a.y;return j<0||j*j<P*P+B*B}function enclosesWeak(a,A){var j=a.r-A.r+1e-9*Math.max(a.r,A.r,1),P=A.x-a.x,B=A.y-a.y;return j>0&&j*j>P*P+B*B}function enclosesWeakAll(a,A){for(var j=0;j<A.length;++j)if(!enclosesWeak(a,A[j]))return!1;return!0}function encloseBasis(a){switch(a.length){case 1:return function encloseBasis1(a){return{x:a.x,y:a.y,r:a.r}}(a[0]);case 2:return encloseBasis2(a[0],a[1]);case 3:return encloseBasis3(a[0],a[1],a[2])}}function encloseBasis2(a,A){var j=a.x,P=a.y,B=a.r,q=A.x,ne=A.y,ie=A.r,oe=q-j,se=ne-P,le=ie-B,he=Math.sqrt(oe*oe+se*se);return{x:(j+q+oe/he*le)/2,y:(P+ne+se/he*le)/2,r:(he+B+ie)/2}}function encloseBasis3(a,A,j){var P=a.x,B=a.y,q=a.r,ne=A.x,ie=A.y,oe=A.r,se=j.x,le=j.y,he=j.r,pe=P-ne,ge=P-se,me=B-ie,ve=B-le,ye=oe-q,_e=he-q,we=P*P+B*B-q*q,ke=we-ne*ne-ie*ie+oe*oe,Oe=we-se*se-le*le+he*he,Se=ge*me-pe*ve,Te=(me*Oe-ve*ke)/(2*Se)-P,Ae=(ve*ye-me*_e)/Se,je=(ge*ke-pe*Oe)/(2*Se)-B,Fe=(pe*_e-ge*ye)/Se,Re=Ae*Ae+Fe*Fe-1,Me=2*(q+Te*Ae+je*Fe),Ne=Te*Te+je*je-q*q,Be=-(Re?(Me+Math.sqrt(Me*Me-4*Re*Ne))/(2*Re):Ne/Me);return{x:P+Te+Ae*Be,y:B+je+Fe*Be,r:Be}}function siblings_place(a,A,j){var P,B,q,ne,ie=a.x-A.x,oe=a.y-A.y,se=ie*ie+oe*oe;se?(B=A.r+j.r,B*=B,ne=a.r+j.r,B>(ne*=ne)?(P=(se+ne-B)/(2*se),q=Math.sqrt(Math.max(0,ne/se-P*P)),j.x=a.x-P*ie-q*oe,j.y=a.y-P*oe+q*ie):(P=(se+B-ne)/(2*se),q=Math.sqrt(Math.max(0,B/se-P*P)),j.x=A.x+P*ie-q*oe,j.y=A.y+P*oe+q*ie)):(j.x=A.x+j.r,j.y=A.y)}function intersects(a,A){var j=a.r+A.r-1e-6,P=A.x-a.x,B=A.y-a.y;return j>0&&j*j>P*P+B*B}function score(a){var A=a._,j=a.next._,P=A.r+j.r,B=(A.x*j.r+j.x*A.r)/P,q=(A.y*j.r+j.y*A.r)/P;return B*B+q*q}function siblings_Node(a){this._=a,this.next=null,this.previous=null}function packEnclose(a){if(!(q=(A=a,a="object"===typeof A&&"length"in A?A:Array.from(A)).length))return 0;var A,j,P,B,q,ne,ie,oe,se,le,he,pe;if((j=a[0]).x=0,j.y=0,!(q>1))return j.r;if(P=a[1],j.x=-P.r,P.x=j.r,P.y=0,!(q>2))return j.r+P.r;siblings_place(P,j,B=a[2]),j=new siblings_Node(j),P=new siblings_Node(P),B=new siblings_Node(B),j.next=B.previous=P,P.next=j.previous=B,B.next=P.previous=j;e:for(oe=3;oe<q;++oe){siblings_place(j._,P._,B=a[oe]),B=new siblings_Node(B),se=P.next,le=j.previous,he=P._.r,pe=j._.r;do{if(he<=pe){if(intersects(se._,B._)){P=se,j.next=P,P.previous=j,--oe;continue e}he+=se._.r,se=se.next}else{if(intersects(le._,B._)){(j=le).next=P,P.previous=j,--oe;continue e}pe+=le._.r,le=le.previous}}while(se!==le.next);for(B.previous=j,B.next=P,j.next=P.previous=P=B,ne=score(j);(B=B.next)!==P;)(ie=score(B))<ne&&(j=B,ne=ie);P=j.next}for(j=[P._],B=P;(B=B.next)!==P;)j.push(B._);for(B=enclose(j),oe=0;oe<q;++oe)(j=a[oe]).x-=B.x,j.y-=B.y;return B.r}function optional(a){return null==a?null:required(a)}function required(a){if("function"!==typeof a)throw new Error;return a}function constantZero(){return 0}var d3_hierarchy_src_constant=function(a){return function(){return a}};function defaultRadius(a){return Math.sqrt(a.value)}function radiusLeaf(a){return function(A){A.children||(A.r=Math.max(0,+a(A)||0))}}function packChildren(a,A){return function(j){if(P=j.children){var P,B,q,ne=P.length,ie=a(j)*A||0;if(ie)for(B=0;B<ne;++B)P[B].r+=ie;if(q=packEnclose(P),ie)for(B=0;B<ne;++B)P[B].r-=ie;j.r=q+ie}}}function translateChild(a){return function(A){var j=A.parent;A.r*=a,j&&(A.x=j.x+a*A.x,A.y=j.y+a*A.y)}}var treemap_round=function(a){a.x0=Math.round(a.x0),a.y0=Math.round(a.y0),a.x1=Math.round(a.x1),a.y1=Math.round(a.y1)},dice=function(a,A,j,P,B){for(var q,ne=a.children,ie=-1,oe=ne.length,se=a.value&&(P-A)/a.value;++ie<oe;)(q=ne[ie]).y0=j,q.y1=B,q.x0=A,q.x1=A+=q.value*se},hl={depth:-1},pl={};function defaultId(a){return a.id}function defaultParentId(a){return a.parentId}var src_stratify=function(){var a=defaultId,A=defaultParentId;function stratify(j){var P,B,q,ne,ie,oe,se,le=Array.from(j),he=le.length,pe=new Map;for(B=0;B<he;++B)P=le[B],ie=le[B]=new Node(P),null!=(oe=a(P,B,j))&&(oe+="")&&(se=ie.id=oe,pe.set(se,pe.has(se)?pl:ie)),null!=(oe=A(P,B,j))&&(oe+="")&&(ie.parent=oe);for(B=0;B<he;++B)if(oe=(ie=le[B]).parent){if(!(ne=pe.get(oe)))throw new Error("missing: "+oe);if(ne===pl)throw new Error("ambiguous: "+oe);ne.children?ne.children.push(ie):ne.children=[ie],ie.parent=ne}else{if(q)throw new Error("multiple roots");q=ie}if(!q)throw new Error("no root");if(q.parent=hl,q.eachBefore((function(a){a.depth=a.parent.depth+1,--he})).eachBefore(computeHeight),q.parent=null,he>0)throw new Error("cycle");return q}return stratify.id=function(A){return arguments.length?(a=required(A),stratify):a},stratify.parentId=function(a){return arguments.length?(A=required(a),stratify):A},stratify};function defaultSeparation(a,A){return a.parent===A.parent?1:2}function nextLeft(a){var A=a.children;return A?A[0]:a.t}function nextRight(a){var A=a.children;return A?A[A.length-1]:a.t}function moveSubtree(a,A,j){var P=j/(A.i-a.i);A.c-=P,A.s+=j,a.c+=P,A.z+=j,A.m+=j}function nextAncestor(a,A,j){return a.a.parent===A.parent?a.a:j}function TreeNode(a,A){this._=a,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=A}TreeNode.prototype=Object.create(Node.prototype);function cluster_defaultSeparation(a,A){return a.parent===A.parent?1:2}function meanXReduce(a,A){return a+A.x}function maxYReduce(a,A){return Math.max(a,A.y)}var treemap_slice=function(a,A,j,P,B){for(var q,ne=a.children,ie=-1,oe=ne.length,se=a.value&&(B-j)/a.value;++ie<oe;)(q=ne[ie]).x0=A,q.x1=P,q.y0=j,q.y1=j+=q.value*se},gl=(1+Math.sqrt(5))/2;function squarifyRatio(a,A,j,P,B,q){for(var ne,ie,oe,se,le,he,pe,ge,me,ve,ye,_e=[],we=A.children,ke=0,Oe=0,Se=we.length,Te=A.value;ke<Se;){oe=B-j,se=q-P;do{le=we[Oe++].value}while(!le&&Oe<Se);for(he=pe=le,ye=le*le*(ve=Math.max(se/oe,oe/se)/(Te*a)),me=Math.max(pe/ye,ye/he);Oe<Se;++Oe){if(le+=ie=we[Oe].value,ie<he&&(he=ie),ie>pe&&(pe=ie),ye=le*le*ve,(ge=Math.max(pe/ye,ye/he))>me){le-=ie;break}me=ge}_e.push(ne={value:le,dice:oe<se,children:we.slice(ke,Oe)}),ne.dice?dice(ne,j,P,B,Te?P+=se*le/Te:q):treemap_slice(ne,j,P,Te?j+=oe*le/Te:B,q),Te-=le,ke=Oe}return _e}var ml=function custom(a){function squarify(A,j,P,B,q){squarifyRatio(a,A,j,P,B,q)}return squarify.ratio=function(a){return custom((a=+a)>1?a:1)},squarify}(gl),vl=function custom(a){function resquarify(A,j,P,B,q){if((ne=A._squarify)&&ne.ratio===a)for(var ne,ie,oe,se,le,he=-1,pe=ne.length,ge=A.value;++he<pe;){for(oe=(ie=ne[he]).children,se=ie.value=0,le=oe.length;se<le;++se)ie.value+=oe[se].value;ie.dice?dice(ie,j,P,B,ge?P+=(q-P)*ie.value/ge:q):treemap_slice(ie,j,P,ge?j+=(B-j)*ie.value/ge:B,q),ge-=ie.value}else A._squarify=ne=squarifyRatio(a,A,j,P,B,q),ne.ratio=a}return resquarify.ratio=function(a){return custom((a=+a)>1?a:1)},resquarify}(gl);function vega_hierarchy_module_lookup(a,A,j){var P={};return a.each((function(a){var B=a.data;j(B)&&(P[A(B)]=a)})),a.lookup=P,a}function Nest(a){Transform.call(this,null,a)}Nest.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var yl=function children(a){return a.values};function nest(){var a=[],A={entries:function entries(A){return function _entries(A,j){if(++j>a.length)return A;var P=[];for(var B in A)P.push({key:B,values:_entries(A[B],j)});return P}(function apply(A,j){if(j>=a.length)return A;var P,B,q,ne=A.length,ie=a[j++],oe={},se={},le=-1;for(;++le<ne;)P=ie(B=A[le])+"",(q=oe[P])?q.push(B):oe[P]=[B];for(P in oe)se[P]=apply(oe[P],j);return se}(A,0),0)},key:function key(j){return a.push(j),A}};return A}function HierarchyLayout(a){Transform.call(this,null,a)}Object(ve.z)(Nest,Transform,{transform:function transform(a,A){A.source||Object(ve.o)("Nest transform requires an upstream data source.");var j=a.generate,P=a.modified(),B=A.clone(),q=this.value;return(!q||P||A.changed())&&(q&&q.each((function(a){a.children&&isTuple(a.data)&&B.rem.push(a.data)})),this.value=q=hierarchy({values:Object(ve.i)(a.keys).reduce((function(a,A){return a.key(A),a}),nest()).entries(B.source)},yl),j&&q.each((function(a){a.children&&(a=ingest$1(a.data),B.add.push(a),B.source.push(a))})),vega_hierarchy_module_lookup(q,tupleid,tupleid)),B.source.root=q,B}});var _l=function defaultSeparation(a,A){return a.parent===A.parent?1:2};Object(ve.z)(HierarchyLayout,Transform,{transform:function transform(a,A){A.source&&A.source.root||Object(ve.o)(this.constructor.name+" transform requires a backing tree data source.");var j=this.layout(a.method),P=this.fields,B=A.source.root,q=a.as||P;a.field?B.sum(a.field):B.count(),a.sort&&B.sort(stableCompare(a.sort,(function(a){return a.data}))),function setParams(a,A,j){for(var P,B=0,q=A.length;B<q;++B)(P=A[B])in j&&a[P](j[P])}(j,this.params,a),j.separation&&j.separation(!1!==a.separation?_l:ve.Q);try{this.value=j(B)}catch(ne){Object(ve.o)(ne)}return B.each((function(a){return function setFields(a,A,j){for(var P=a.data,B=A.length-1,q=0;q<B;++q)P[j[q]]=a[A[q]];P[j[B]]=a.children?a.children.length:0}(a,P,q)})),A.reflow(a.modified()).modifies(q).modifies("leaf")}});var xl=["x","y","r","depth","children"];function Pack(a){HierarchyLayout.call(this,a)}Pack.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:xl.length,default:xl}]},Object(ve.z)(Pack,HierarchyLayout,{layout:function(){var a=null,A=1,j=1,P=constantZero;function pack(B){return B.x=A/2,B.y=j/2,a?B.eachBefore(radiusLeaf(a)).eachAfter(packChildren(P,.5)).eachBefore(translateChild(1)):B.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(P,B.r/Math.min(A,j))).eachBefore(translateChild(Math.min(A,j)/(2*B.r))),B}return pack.radius=function(A){return arguments.length?(a=optional(A),pack):a},pack.size=function(a){return arguments.length?(A=+a[0],j=+a[1],pack):[A,j]},pack.padding=function(a){return arguments.length?(P="function"===typeof a?a:d3_hierarchy_src_constant(+a),pack):P},pack},params:["radius","size","padding"],fields:xl});var wl=["x0","y0","x1","y1","depth","children"];function Partition(a){HierarchyLayout.call(this,a)}function Stratify(a){Transform.call(this,null,a)}Partition.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:wl.length,default:wl}]},Object(ve.z)(Partition,HierarchyLayout,{layout:function(){var a=1,A=1,j=0,P=!1;function partition(B){var q=B.height+1;return B.x0=B.y0=j,B.x1=a,B.y1=A/q,B.eachBefore(function positionNode(a,A){return function(P){P.children&&dice(P,P.x0,a*(P.depth+1)/A,P.x1,a*(P.depth+2)/A);var B=P.x0,q=P.y0,ne=P.x1-j,ie=P.y1-j;ne<B&&(B=ne=(B+ne)/2),ie<q&&(q=ie=(q+ie)/2),P.x0=B,P.y0=q,P.x1=ne,P.y1=ie}}(A,q)),P&&B.eachBefore(treemap_round),B}return partition.round=function(a){return arguments.length?(P=!!a,partition):P},partition.size=function(j){return arguments.length?(a=+j[0],A=+j[1],partition):[a,A]},partition.padding=function(a){return arguments.length?(j=+a,partition):j},partition},params:["size","round","padding"],fields:wl}),Stratify.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Object(ve.z)(Stratify,Transform,{transform:function transform(a,A){A.source||Object(ve.o)("Stratify transform requires an upstream data source.");var j=this.value,P=a.modified(),B=A.fork(A.ALL).materialize(A.SOURCE),q=!j||P||A.changed(A.ADD_REM)||A.modified(a.key.fields)||A.modified(a.parentKey.fields);return B.source=B.source.slice(),q&&(j=B.source.length?vega_hierarchy_module_lookup(src_stratify().id(a.key).parentId(a.parentKey)(B.source),a.key,ve.ib):vega_hierarchy_module_lookup(src_stratify()([{}]),a.key,a.key)),B.source.root=this.value=j,B}});var kl={tidy:function(){var a=defaultSeparation,A=1,j=1,P=null;function tree(B){var q=function treeRoot(a){for(var A,j,P,B,q,ne=new TreeNode(a,0),ie=[ne];A=ie.pop();)if(P=A._.children)for(A.children=new Array(q=P.length),B=q-1;B>=0;--B)ie.push(j=A.children[B]=new TreeNode(P[B],B)),j.parent=A;return(ne.parent=new TreeNode(null,0)).children=[ne],ne}(B);if(q.eachAfter(firstWalk),q.parent.m=-q.z,q.eachBefore(secondWalk),P)B.eachBefore(sizeNode);else{var ne=B,ie=B,oe=B;B.eachBefore((function(a){a.x<ne.x&&(ne=a),a.x>ie.x&&(ie=a),a.depth>oe.depth&&(oe=a)}));var se=ne===ie?1:a(ne,ie)/2,le=se-ne.x,he=A/(ie.x+se+le),pe=j/(oe.depth||1);B.eachBefore((function(a){a.x=(a.x+le)*he,a.y=a.depth*pe}))}return B}function firstWalk(A){var j=A.children,P=A.parent.children,B=A.i?P[A.i-1]:null;if(j){!function executeShifts(a){for(var A,j=0,P=0,B=a.children,q=B.length;--q>=0;)(A=B[q]).z+=j,A.m+=j,j+=A.s+(P+=A.c)}(A);var q=(j[0].z+j[j.length-1].z)/2;B?(A.z=B.z+a(A._,B._),A.m=A.z-q):A.z=q}else B&&(A.z=B.z+a(A._,B._));A.parent.A=function apportion(A,j,P){if(j){for(var B,q=A,ne=A,ie=j,oe=q.parent.children[0],se=q.m,le=ne.m,he=ie.m,pe=oe.m;ie=nextRight(ie),q=nextLeft(q),ie&&q;)oe=nextLeft(oe),(ne=nextRight(ne)).a=A,(B=ie.z+he-q.z-se+a(ie._,q._))>0&&(moveSubtree(nextAncestor(ie,A,P),A,B),se+=B,le+=B),he+=ie.m,se+=q.m,pe+=oe.m,le+=ne.m;ie&&!nextRight(ne)&&(ne.t=ie,ne.m+=he-le),q&&!nextLeft(oe)&&(oe.t=q,oe.m+=se-pe,P=A)}return P}(A,B,A.parent.A||P[0])}function secondWalk(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function sizeNode(a){a.x*=A,a.y=a.depth*j}return tree.separation=function(A){return arguments.length?(a=A,tree):a},tree.size=function(a){return arguments.length?(P=!1,A=+a[0],j=+a[1],tree):P?null:[A,j]},tree.nodeSize=function(a){return arguments.length?(P=!0,A=+a[0],j=+a[1],tree):P?[A,j]:null},tree},cluster:function(){var a=cluster_defaultSeparation,A=1,j=1,P=!1;function cluster(B){var q,ne=0;B.eachAfter((function(A){var j=A.children;j?(A.x=function meanX(a){return a.reduce(meanXReduce,0)/a.length}(j),A.y=function maxY(a){return 1+a.reduce(maxYReduce,0)}(j)):(A.x=q?ne+=a(A,q):0,A.y=0,q=A)}));var ie=function leafLeft(a){for(var A;A=a.children;)a=A[0];return a}(B),oe=function leafRight(a){for(var A;A=a.children;)a=A[A.length-1];return a}(B),se=ie.x-a(ie,oe)/2,le=oe.x+a(oe,ie)/2;return B.eachAfter(P?function(a){a.x=(a.x-B.x)*A,a.y=(B.y-a.y)*j}:function(a){a.x=(a.x-se)/(le-se)*A,a.y=(1-(B.y?a.y/B.y:1))*j})}return cluster.separation=function(A){return arguments.length?(a=A,cluster):a},cluster.size=function(a){return arguments.length?(P=!1,A=+a[0],j=+a[1],cluster):P?null:[A,j]},cluster.nodeSize=function(a){return arguments.length?(P=!0,A=+a[0],j=+a[1],cluster):P?[A,j]:null},cluster}},Ol=["x","y","depth","children"];function Tree(a){HierarchyLayout.call(this,a)}function TreeLinks(a){Transform.call(this,[],a)}Tree.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Ol.length,default:Ol}]},Object(ve.z)(Tree,HierarchyLayout,{layout:function layout(a){var A=a||"tidy";if(Object(ve.w)(kl,A))return kl[A]();Object(ve.o)("Unrecognized Tree layout method: "+A)},params:["size","nodeSize"],fields:Ol}),TreeLinks.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Object(ve.z)(TreeLinks,Transform,{transform:function transform(a,A){var j=this.value,P=A.source&&A.source.root,B=A.fork(A.NO_SOURCE),q={};return P||Object(ve.o)("TreeLinks transform requires a tree data source."),A.changed(A.ADD_REM)?(B.rem=j,A.visit(A.SOURCE,(function(a){return q[tupleid(a)]=1})),P.each((function(a){var A=a.data,j=a.parent&&a.parent.data;j&&q[tupleid(A)]&&q[tupleid(j)]&&B.add.push(ingest$1({source:j,target:A}))})),this.value=B.add):A.changed(A.MOD)&&(A.visit(A.MOD,(function(a){return q[tupleid(a)]=1})),j.forEach((function(a){(q[tupleid(a.source)]||q[tupleid(a.target)])&&B.mod.push(a)}))),B}});var Sl={binary:function(a,A,j,P,B){var q,ne,ie=a.children,oe=ie.length,se=new Array(oe+1);for(se[0]=ne=q=0;q<oe;++q)se[q+1]=ne+=ie[q].value;!function partition(a,A,j,P,B,q,ne){if(a>=A-1){var oe=ie[a];return oe.x0=P,oe.y0=B,oe.x1=q,void(oe.y1=ne)}var le=se[a],he=j/2+le,pe=a+1,ge=A-1;for(;pe<ge;){var me=pe+ge>>>1;se[me]<he?pe=me+1:ge=me}he-se[pe-1]<se[pe]-he&&a+1<pe&&--pe;var ve=se[pe]-le,ye=j-ve;if(q-P>ne-B){var _e=j?(P*ye+q*ve)/j:q;partition(a,pe,ve,P,B,_e,ne),partition(pe,A,ye,_e,B,q,ne)}else{var we=j?(B*ye+ne*ve)/j:ne;partition(a,pe,ve,P,B,q,we),partition(pe,A,ye,P,we,q,ne)}}(0,oe,a.value,A,j,P,B)},dice:dice,slice:treemap_slice,slicedice:function(a,A,j,P,B){(1&a.depth?treemap_slice:dice)(a,A,j,P,B)},squarify:ml,resquarify:vl},El=["x0","y0","x1","y1","depth","children"];function Treemap(a){HierarchyLayout.call(this,a)}Treemap.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:El.length,default:El}]},Object(ve.z)(Treemap,HierarchyLayout,{layout:function layout(){var a=function(){var a=ml,A=!1,j=1,P=1,B=[0],q=constantZero,ne=constantZero,ie=constantZero,oe=constantZero,se=constantZero;function treemap(a){return a.x0=a.y0=0,a.x1=j,a.y1=P,a.eachBefore(positionNode),B=[0],A&&a.eachBefore(treemap_round),a}function positionNode(A){var j=B[A.depth],P=A.x0+j,le=A.y0+j,he=A.x1-j,pe=A.y1-j;he<P&&(P=he=(P+he)/2),pe<le&&(le=pe=(le+pe)/2),A.x0=P,A.y0=le,A.x1=he,A.y1=pe,A.children&&(j=B[A.depth+1]=q(A)/2,P+=se(A)-j,le+=ne(A)-j,(he-=ie(A)-j)<P&&(P=he=(P+he)/2),(pe-=oe(A)-j)<le&&(le=pe=(le+pe)/2),a(A,P,le,he,pe))}return treemap.round=function(a){return arguments.length?(A=!!a,treemap):A},treemap.size=function(a){return arguments.length?(j=+a[0],P=+a[1],treemap):[j,P]},treemap.tile=function(A){return arguments.length?(a=required(A),treemap):a},treemap.padding=function(a){return arguments.length?treemap.paddingInner(a).paddingOuter(a):treemap.paddingInner()},treemap.paddingInner=function(a){return arguments.length?(q="function"===typeof a?a:d3_hierarchy_src_constant(+a),treemap):q},treemap.paddingOuter=function(a){return arguments.length?treemap.paddingTop(a).paddingRight(a).paddingBottom(a).paddingLeft(a):treemap.paddingTop()},treemap.paddingTop=function(a){return arguments.length?(ne="function"===typeof a?a:d3_hierarchy_src_constant(+a),treemap):ne},treemap.paddingRight=function(a){return arguments.length?(ie="function"===typeof a?a:d3_hierarchy_src_constant(+a),treemap):ie},treemap.paddingBottom=function(a){return arguments.length?(oe="function"===typeof a?a:d3_hierarchy_src_constant(+a),treemap):oe},treemap.paddingLeft=function(a){return arguments.length?(se="function"===typeof a?a:d3_hierarchy_src_constant(+a),treemap):se},treemap}();return a.ratio=function(A){var j=a.tile();j.ratio&&a.tile(j.ratio(A))},a.method=function(A){Object(ve.w)(Sl,A)?a.tile(Sl[A]):Object(ve.o)("Unrecognized Treemap layout method: "+A)},a},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:El});function markBitmaps(a,A,j,P){var B=a.width,q=a.height,ne=j||P,ie=domCanvas(B,q).getContext("2d");A.forEach((function(a){return function vega_label_module_draw(a,A,j){if(!A.length)return;var P=A[0].mark.marktype;"group"===P?A.forEach((function(A){A.items.forEach((function(A){return vega_label_module_draw(a,A.items,j)}))})):ho[P].draw(a,{items:j?A.map(vega_label_module_prepare):A})}(ie,a,ne)}));var oe,se,le,he,pe,ge=new Uint32Array(ie.getImageData(0,0,B,q).data.buffer),me=a.bitmap(),ve=ne&&a.bitmap();for(se=0;se<q;++se)for(oe=0;oe<B;++oe)(pe=4278190080&ge[se*B+oe])&&(le=a(oe),he=a(se),P||me.set(le,he),ne&&268435456^pe&&ve.set(le,he));return[me,ve]}function vega_label_module_prepare(a){var A=rederive(a,{});return A.stroke&&(A.strokeOpacity=1),A.fill&&(A.fillOpacity=.0625,A.stroke="#000",A.strokeOpacity=1,A.strokeWidth=2),A}var Cl=new Uint32Array(33),Tl=new Uint32Array(33);Tl[0]=0,Cl[0]=~Tl[0];for(var Dl=1;Dl<=32;++Dl)Tl[Dl]=Tl[Dl-1]<<1|1,Cl[Dl]=~Tl[Dl];function scaler(a,A,j){var P=Math.max(1,Math.sqrt(a*A/1e6)),B=~~((a+2*j+P)/P),q=~~((A+2*j+P)/P),ne=function scale(a){return~~((a+j)/P)};return ne.invert=function(a){return a*P-j},ne.bitmap=function(){return function Bitmap(a,A){var j=new Uint32Array(~~((a*A+32)/32));function _set(a,A){j[a]|=A}function _clear(a,A){j[a]&=A}return{array:j,get:function get(A,P){var B=P*a+A;return j[B>>>5]&1<<(31&B)},set:function set(A,j){var P=j*a+A;_set(P>>>5,1<<(31&P))},clear:function clear(A,j){var P=j*a+A;_clear(P>>>5,~(1<<(31&P)))},getRange:function getRange(A,P,B,q){for(var ne,ie,oe,se,le=q;le>=P;--le)if((oe=(ne=le*a+A)>>>5)===(se=(ie=le*a+B)>>>5)){if(j[oe]&Cl[31&ne]&Tl[1+(31&ie)])return!0}else{if(j[oe]&Cl[31&ne])return!0;if(j[se]&Tl[1+(31&ie)])return!0;for(var he=oe+1;he<se;++he)if(j[he])return!0}return!1},setRange:function setRange(A,j,P,B){for(var q,ne,ie,oe,se;j<=B;++j)if((ie=(q=j*a+A)>>>5)===(oe=(ne=j*a+P)>>>5))_set(ie,Cl[31&q]&Tl[1+(31&ne)]);else for(_set(ie,Cl[31&q]),_set(oe,Tl[1+(31&ne)]),se=ie+1;se<oe;++se)_set(se,4294967295)},clearRange:function clearRange(A,j,P,B){for(var q,ne,ie,oe,se;j<=B;++j)if((ie=(q=j*a+A)>>>5)===(oe=(ne=j*a+P)>>>5))_clear(ie,Tl[31&q]|Cl[1+(31&ne)]);else for(_clear(ie,Tl[31&q]),_clear(oe,Cl[1+(31&ne)]),se=ie+1;se<oe;++se)_clear(se,0)},outOfBounds:function outOfBounds(j,P,B,q){return j<0||P<0||q>=A||B>=a}}}(B,q)},ne.ratio=P,ne.padding=j,ne.width=a,ne.height=A,ne}function vega_label_module_outOfBounds(a,A,j,P,B,q){var ne=j/2;return a-ne<0||a+ne>B||A-(ne=P/2)<0||A+ne>q}function _outOfBounds(){return!1}function vega_label_module_collision(a,A,j,P,B,q,ne,ie){var oe=B*q/(2*P),se=a(A-oe),le=a(A+oe),he=a(j-(q/=2)),pe=a(j+q);return ne.outOfBounds(se,he,le,pe)||ne.getRange(se,he,le,pe)||ie&&ie.getRange(se,he,le,pe)}function _collision(a,A,j,P,B,q,ne,ie){var oe=B*q/(2*P),se=a(A-oe),le=a(A+oe),he=a(j-(q/=2)),pe=a(j+q);return se=se>0?se:0,he=he>0?he:0,le=le<a.width?le:a.width-1,pe=pe<a.height?pe:a.height-1,ne.getRange(se,he,le,pe)||ie&&ie.getRange(se,he,le,pe)}function getTests(a){return a?[_collision,_outOfBounds]:[vega_label_module_collision,vega_label_module_outOfBounds]}var Al=[-1,-1,1,1],jl=[-1,1,-1,1];var Fl=["right","center","left"],Pl=["bottom","middle","top"];function vega_label_module_test(a,A,j,P,B,q,ne,ie,oe,se,le,he){return!(B.outOfBounds(a,j,A,P)||(he&&q?q.getRange(a,j,A,P)||!function isInMarkBound(a,A,j,P,B){return B[0]<=a&&j<=B[2]&&B[3]<=A&&P<=B[5]}(ne,oe,ie,se,le):B.getRange(a,j,A,P)))}var Rl={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},Ml={naive:function placeAreaLabelNaive(a,A,j,P){var B=a.width,q=a.height;return function(a){for(var A,j,ne,ie,oe,se,le,he=a.datum.datum.items[P].items,pe=he.length,ge=a.datum.fontSize,me=lo.width(a.datum,a.datum.text),ve=0,ye=0;ye<pe;++ye)A=he[ye].x,ne=he[ye].y,oe=(A+(j=void 0===he[ye].x2?A:he[ye].x2))/2,se=(ne+(ie=void 0===he[ye].y2?ne:he[ye].y2))/2,(le=Math.abs(j-A+ie-ne))>=ve&&(ve=le,a.x=oe,a.y=se);return oe=me/2,se=ge/2,A=a.x-oe,j=a.x+oe,ne=a.y-se,ie=a.y+se,a.align="center",A<0&&j<=B?a.align="left":0<=A&&B<j&&(a.align="right"),a.baseline="middle",ne<0&&ie<=q?a.baseline="top":0<=ne&&q<ie&&(a.baseline="bottom"),!0}},"reduced-search":function placeAreaLabelReducedSearch(a,A,j,P,B){var q=a.width,ne=a.height,ie=getTests(B),oe=Object(Ve.a)(ie,2),se=oe[0],le=oe[1],he=A[0],pe=A[1];function tryLabel(A,j,P,B,ie){var oe,ge=a.invert(A),me=a.invert(j),ve=P,ye=ne;if(!le(ge,me,B,ie,q,ne)&&!se(a,ge,me,ie,B,ve,he,pe)&&!se(a,ge,me,ie,B,ie,he,null)){for(;ye-ve>=1;)se(a,ge,me,ie,B,oe=(ve+ye)/2,he,pe)?ye=oe:ve=oe;if(ve>P)return[ge,me,ve,!0]}}return function(A){for(var B,ie,oe,pe,ge,me,ve,ye,_e,we,ke,Oe,Se,Te,Ae,je,Fe,Re=A.datum.datum.items[P].items,Me=Re.length,Ne=A.datum.fontSize,Be=lo.width(A.datum,A.datum.text),Ue=j?Ne:0,We=!1,Ye=!1,$e=0,Xe=0;Xe<Me;++Xe){for(B=Re[Xe].x,oe=Re[Xe].y,B>(ie=void 0===Re[Xe].x2?B:Re[Xe].x2)&&(Fe=B,B=ie,ie=Fe),oe>(pe=void 0===Re[Xe].y2?oe:Re[Xe].y2)&&(Fe=oe,oe=pe,pe=Fe),we=~~(((_e=a(B))+(ke=a(ie)))/2),Se=~~(((Oe=a(oe))+(Te=a(pe)))/2),ve=we;ve>=_e;--ve)for(ye=Se;ye>=Oe;--ye)if(je=tryLabel(ve,ye,Ue,Be,Ne)){var et=je,tt=Object(Ve.a)(et,4);A.x=tt[0],A.y=tt[1],Ue=tt[2],We=tt[3]}for(ve=we;ve<=ke;++ve)for(ye=Se;ye<=Te;++ye)if(je=tryLabel(ve,ye,Ue,Be,Ne)){var nt=je,rt=Object(Ve.a)(nt,4);A.x=rt[0],A.y=rt[1],Ue=rt[2],We=rt[3]}We||j||(ge=(B+ie)/2,me=(oe+pe)/2,(Ae=Math.abs(ie-B+pe-oe))>=$e&&!le(ge,me,Be,Ne,q,ne)&&!se(a,ge,me,Ne,Be,Ne,he,null)&&($e=Ae,A.x=ge,A.y=me,Ye=!0))}return!(!We&&!Ye)&&(ge=Be/2,me=Ne/2,he.setRange(a(A.x-ge),a(A.y-me),a(A.x+ge),a(A.y+me)),A.align="center",A.baseline="middle",!0)}},floodfill:function placeAreaLabelFloodFill(a,A,j,P,B){var q=a.width,ne=a.height,ie=getTests(B),oe=Object(Ve.a)(ie,2),se=oe[0],le=oe[1],he=A[0],pe=A[1],ge=a.bitmap();return function(A){for(var B,ie,oe,me,ve,ye,_e,we,ke,Oe,Se,Te,Ae=A.datum.datum.items[P].items,je=Ae.length,Fe=A.datum.fontSize,Re=lo.width(A.datum,A.datum.text),Me=[],Ne=j?Fe:0,Be=!1,Ue=!1,We=0,Ye=0;Ye<je;++Ye){for(B=Ae[Ye].x,oe=Ae[Ye].y,ie=void 0===Ae[Ye].x2?B:Ae[Ye].x2,me=void 0===Ae[Ye].y2?oe:Ae[Ye].y2,Me.push([a((B+ie)/2),a((oe+me)/2)]);Me.length;){var $e=Me.pop(),Xe=Object(Ve.a)($e,2);if(_e=Xe[0],we=Xe[1],!(he.get(_e,we)||pe.get(_e,we)||ge.get(_e,we))){ge.set(_e,we);for(var et=0;et<4;++et)ve=_e+Al[et],ye=we+jl[et],ge.outOfBounds(ve,ye,ve,ye)||Me.push([ve,ye]);if(ve=a.invert(_e),ye=a.invert(we),ke=Ne,Oe=ne,!le(ve,ye,Re,Fe,q,ne)&&!se(a,ve,ye,Fe,Re,ke,he,pe)&&!se(a,ve,ye,Fe,Re,Fe,he,null)){for(;Oe-ke>=1;)se(a,ve,ye,Fe,Re,Se=(ke+Oe)/2,he,pe)?Oe=Se:ke=Se;ke>Ne&&(A.x=ve,A.y=ye,Ne=ke,Be=!0)}}}Be||j||(ve=(B+ie)/2,ye=(oe+me)/2,(Te=Math.abs(ie-B+me-oe))>=We&&!le(ve,ye,Re,Fe,q,ne)&&!se(a,ve,ye,Fe,Re,Fe,he,null)&&(We=Te,A.x=ve,A.y=ye,Ue=!0))}return!(!Be&&!Ue)&&(ve=Re/2,ye=Fe/2,he.setRange(a(A.x-ve),a(A.y-ye),a(A.x+ve),a(A.y+ye)),A.align="center",A.baseline="middle",!0)}}};function labelLayout(a,A,j,P,B,q,ne,ie,oe,se,le){if(!a.length)return a;var he,pe=Math.max(P.length,B.length),ge=function getOffsets(a,A){for(var j=new Float64Array(A),P=a.length,B=0;B<P;++B)j[B]=a[B]||0;for(var q=P;q<A;++q)j[q]=j[P-1];return j}(P,pe),me=function getAnchors(a,A){for(var j=new Int8Array(A),P=a.length,B=0;B<P;++B)j[B]|=Rl[a[B]];for(var q=P;q<A;++q)j[q]=j[P-1];return j}(B,pe),ve=function markType(a){return a&&a.mark&&a.mark.marktype}(a[0].datum),ye="group"===ve&&a[0].datum.items[oe].marktype,_e="area"===ye,we=function markBoundary(a,A,j,P){var B=function xy(a){return[a.x,a.x,a.x,a.y,a.y,a.y]};return a?"line"===a||"area"===a?function(a){return B(a.datum)}:"line"===A?function(a){var A=a.datum.items[P].items;return B(A.length?A["start"===j?0:A.length-1]:{x:NaN,y:NaN})}:function(a){var A=a.datum.bounds;return[A.x1,(A.x1+A.x2)/2,A.x2,A.y1,(A.y1+A.y2)/2,A.y2]}:B}(ve,ye,ie,oe),ke=null===se||se===1/0,Oe=scaler(A[0],A[1],ke?0:se),Se=_e&&"naive"===le,Te=a.map((function(a){return{datum:a,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:we(a)}}));if(!Se){j&&Te.sort((function(a,A){return j(a.datum,A.datum)}));for(var Ae=!1,je=0;je<me.length&&!Ae;++je)Ae=5===me[je]||ge[je]<0;ve&&(ne||_e)&&(q=[a.map((function(a){return a.datum}))].concat(q)),he=q.length?markBitmaps(Oe,q,Ae,_e):function baseBitmaps(a,A){var j=a.bitmap();return(A||[]).forEach((function(A){return j.set(a(A.boundary[0]),a(A.boundary[3]))})),[j,void 0]}(Oe,ne&&Te)}var Fe=_e?Ml[le](Oe,he,ne,oe,ke):function placeMarkLabel(a,A,j,P,B){var q=a.width,ne=a.height,ie=A[0],oe=A[1],se=P.length;return function(A){var le=A.boundary,he=A.datum.fontSize;if(!B&&(le[2]<0||le[5]<0||le[0]>q||le[3]>ne))return!1;for(var pe,ge,me,ve,ye,_e,we,ke,Oe,Se,Te,Ae,je,Fe,Re,Me=0,Ne=0;Ne<se;++Ne){if(pe=(3&j[Ne])-1,ge=(j[Ne]>>>2&3)-1,me=0===pe&&0===ge||P[Ne]<0,ve=pe&&ge?Math.SQRT1_2:1,ye=P[Ne]<0?-1:1,_e=le[1+pe]+P[Ne]*pe*ve,ke=(Te=le[4+ge]+ye*he*ge/2+P[Ne]*ge*ve)-he/2,Oe=Te+he/2,Ae=a(_e),Fe=a(ke),Re=a(Oe),B&&(Ae=Ae<0?0:Ae,Fe=Fe<0?0:Fe,Re=Re>=a.height?a.height-1:Re),!Me){if(!vega_label_module_test(Ae,Ae,Fe,Re,ie,oe,_e,_e,ke,Oe,le,me))continue;Me=lo.width(A.datum,A.datum.text)}if(we=(Se=_e+ye*Me*pe/2)+Me/2,Ae=a(_e=Se-Me/2),je=a(we),B&&(Ae=Ae<0?0:Ae,je=je>=a.width?a.width-1:je),vega_label_module_test(Ae,je,Fe,Re,ie,oe,_e,we,ke,Oe,le,me))return A.x=pe?pe*ye<0?we:_e:Se,A.y=ge?ge*ye<0?Oe:ke:Te,A.align=Fl[pe*ye+1],A.baseline=Pl[ge*ye+1],ie.setRange(Ae,Fe,je,Re),!0}return!1}}(Oe,he,me,ge,ke);return Te.forEach((function(a){return a.opacity=+Fe(a)})),Te}var Ll=["x","y","opacity","align","baseline"],Il=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Label(a){Transform.call(this,null,a)}function vega_regression_module_partition(a,A){var j,P,B,q,ne,ie,oe=[],se=function get(a){return a(q)};if(null==A)oe.push(a);else for(j={},P=0,B=a.length;P<B;++P)q=a[P],(ie=j[ne=A.map(se)])||(j[ne]=ie=[],ie.dims=ne,oe.push(ie)),ie.push(q);return oe}function Loess(a){Transform.call(this,null,a)}Label.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Il},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Ll.length,default:Ll}]},Object(ve.z)(Label,Transform,{transform:function transform(a,A){var j=a.modified();if(j||A.changed(A.ADD_REM)||function modp(j){var P=a[j];return Object(ve.E)(P)&&A.modified(P.fields)}("sort")){a.size&&2===a.size.length||Object(ve.o)("Size parameter should be specified as a [width, height] array.");var P=a.as||Ll;return labelLayout(A.materialize(A.SOURCE).source||[],a.size,a.sort,Object(ve.i)(null==a.offset?1:a.offset),Object(ve.i)(a.anchor||Il),a.avoidMarks||[],!1!==a.avoidBaseMark,a.lineAnchor||"end",a.markIndex||0,void 0===a.padding?0:a.padding,a.method||"naive").forEach((function(a){var A=a.datum;A[P[0]]=a.x,A[P[1]]=a.y,A[P[2]]=a.opacity,A[P[3]]=a.align,A[P[4]]=a.baseline})),A.reflow(j).modifies(P)}}}),Loess.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Object(ve.z)(Loess,Transform,{transform:function transform(a,A){var j=A.fork(A.NO_SOURCE|A.NO_FIELDS);if(!this.value||A.changed()||a.modified()){var P=vega_regression_module_partition(A.materialize(A.SOURCE).source,a.groupby),B=(a.groupby||[]).map(ve.h),q=B.length,ne=a.as||[Object(ve.h)(a.x),Object(ve.h)(a.y)],ie=[];P.forEach((function(A){loess(A,a.x,a.y,a.bandwidth||.3).forEach((function(a){for(var j={},P=0;P<q;++P)j[B[P]]=A.dims[P];j[ne[0]]=a[0],j[ne[1]]=a[1],ie.push(ingest$1(j))}))})),this.value&&(j.rem=this.value),this.value=j.add=j.source=ie}return j}});var Nl={linear:linear,log:log,exp:exp,pow:pow,quad:vega_statistics_module_quad,poly:poly};function Regression(a){Transform.call(this,null,a)}Regression.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Nl)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Object(ve.z)(Regression,Transform,{transform:function transform(a,A){var j=A.fork(A.NO_SOURCE|A.NO_FIELDS);if(!this.value||A.changed()||a.modified()){var P=vega_regression_module_partition(A.materialize(A.SOURCE).source,a.groupby),B=(a.groupby||[]).map(ve.h),q=a.method||"linear",ne=a.order||3,ie=function degreesOfFreedom(a,A){return"poly"===a?A:"quad"===a?2:1}(q,ne),oe=a.as||[Object(ve.h)(a.x),Object(ve.h)(a.y)],se=Nl[q],le=[],he=a.extent;Object(ve.w)(Nl,q)||Object(ve.o)("Invalid regression method: "+q),null!=he&&"log"===q&&he[0]<=0&&(A.dataflow.warn("Ignoring extent with values <= 0 for log regression."),he=null),P.forEach((function(j){if(j.length<=ie)A.dataflow.warn("Skipping regression with more parameters than data points.");else{var P=se(j,a.x,a.y,ne);if(a.params)le.push(ingest$1({keys:j.dims,coef:P.coef,rSquared:P.rSquared}));else{var pe=he||Object(ve.q)(j,a.x),ge=function add(a){for(var A={},P=0;P<B.length;++P)A[B[P]]=j.dims[P];A[oe[0]]=a[0],A[oe[1]]=a[1],le.push(ingest$1(A))};"linear"===q?pe.forEach((function(a){return ge([a,P.predict(a)])})):sampleCurve(P.predict,pe,25,200).forEach(ge)}}})),this.value&&(j.rem=this.value),this.value=j.add=j.source=le}return j}});var Bl=Math.pow(2,-52),Ul=new Uint32Array(512),zl=function(){function Delaunator(a){Object(bs.a)(this,Delaunator);var A=a.length>>1;if(A>0&&"number"!==typeof a[0])throw new Error("Expected coords to contain numbers.");this.coords=a;var j=Math.max(2*A-5,0);this._triangles=new Uint32Array(3*j),this._halfedges=new Int32Array(3*j),this._hashSize=Math.ceil(Math.sqrt(A)),this._hullPrev=new Uint32Array(A),this._hullNext=new Uint32Array(A),this._hullTri=new Uint32Array(A),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(A),this._dists=new Float64Array(A),this.update()}return Object(_s.a)(Delaunator,[{key:"update",value:function update(){for(var a=this.coords,A=this._hullPrev,j=this._hullNext,P=this._hullTri,B=this._hullHash,q=a.length>>1,ne=1/0,ie=1/0,oe=-1/0,se=-1/0,le=0;le<q;le++){var he=a[2*le],pe=a[2*le+1];he<ne&&(ne=he),pe<ie&&(ie=pe),he>oe&&(oe=he),pe>se&&(se=pe),this._ids[le]=le}for(var ge,me,ve,ye=(ne+oe)/2,_e=(ie+se)/2,we=1/0,ke=0;ke<q;ke++){var Oe=delaunator_dist(ye,_e,a[2*ke],a[2*ke+1]);Oe<we&&(ge=ke,we=Oe)}var Se=a[2*ge],Te=a[2*ge+1];we=1/0;for(var Ae=0;Ae<q;Ae++)if(Ae!==ge){var je=delaunator_dist(Se,Te,a[2*Ae],a[2*Ae+1]);je<we&&je>0&&(me=Ae,we=je)}for(var Fe=a[2*me],Re=a[2*me+1],Me=1/0,Ne=0;Ne<q;Ne++)if(Ne!==ge&&Ne!==me){var Be=circumradius(Se,Te,Fe,Re,a[2*Ne],a[2*Ne+1]);Be<Me&&(ve=Ne,Me=Be)}var Ue=a[2*ve],We=a[2*ve+1];if(Me===1/0){for(var Ve=0;Ve<q;Ve++)this._dists[Ve]=a[2*Ve]-a[0]||a[2*Ve+1]-a[1];quicksort(this._ids,this._dists,0,q-1);for(var Ye=new Uint32Array(q),$e=0,Xe=0,et=-1/0;Xe<q;Xe++){var tt=this._ids[Xe];this._dists[tt]>et&&(Ye[$e++]=tt,et=this._dists[tt])}return this.hull=Ye.subarray(0,$e),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(delaunator_orient(Se,Te,Fe,Re,Ue,We)){var nt=me,rt=Fe,it=Re;me=ve,Fe=Ue,Re=We,ve=nt,Ue=rt,We=it}var at=function circumcenter(a,A,j,P,B,q){var ne=j-a,ie=P-A,oe=B-a,se=q-A,le=ne*ne+ie*ie,he=oe*oe+se*se,pe=.5/(ne*se-ie*oe);return{x:a+(se*le-ie*he)*pe,y:A+(ne*he-oe*le)*pe}}(Se,Te,Fe,Re,Ue,We);this._cx=at.x,this._cy=at.y;for(var ot=0;ot<q;ot++)this._dists[ot]=delaunator_dist(a[2*ot],a[2*ot+1],at.x,at.y);quicksort(this._ids,this._dists,0,q-1),this._hullStart=ge;var st=3;j[ge]=A[ve]=me,j[me]=A[ge]=ve,j[ve]=A[me]=ge,P[ge]=0,P[me]=1,P[ve]=2,B.fill(-1),B[this._hashKey(Se,Te)]=ge,B[this._hashKey(Fe,Re)]=me,B[this._hashKey(Ue,We)]=ve,this.trianglesLen=0,this._addTriangle(ge,me,ve,-1,-1,-1);for(var ut,lt,ct=0;ct<this._ids.length;ct++){var ft=this._ids[ct],dt=a[2*ft],ht=a[2*ft+1];if(!(ct>0&&Math.abs(dt-ut)<=Bl&&Math.abs(ht-lt)<=Bl)&&(ut=dt,lt=ht,ft!==ge&&ft!==me&&ft!==ve)){for(var pt=0,gt=0,mt=this._hashKey(dt,ht);gt<this._hashSize&&(-1===(pt=B[(mt+gt)%this._hashSize])||pt===j[pt]);gt++);for(var vt=pt=A[pt],yt=void 0;yt=j[vt],!delaunator_orient(dt,ht,a[2*vt],a[2*vt+1],a[2*yt],a[2*yt+1]);)if((vt=yt)===pt){vt=-1;break}if(-1!==vt){var bt=this._addTriangle(vt,ft,j[vt],-1,-1,P[vt]);P[ft]=this._legalize(bt+2),P[vt]=bt,st++;for(var _t=j[vt];yt=j[_t],delaunator_orient(dt,ht,a[2*_t],a[2*_t+1],a[2*yt],a[2*yt+1]);)bt=this._addTriangle(_t,ft,yt,P[ft],-1,P[_t]),P[ft]=this._legalize(bt+2),j[_t]=_t,st--,_t=yt;if(vt===pt)for(;delaunator_orient(dt,ht,a[2*(yt=A[vt])],a[2*yt+1],a[2*vt],a[2*vt+1]);)bt=this._addTriangle(yt,ft,vt,-1,P[vt],P[yt]),this._legalize(bt+2),P[yt]=bt,j[vt]=vt,st--,vt=yt;this._hullStart=A[ft]=vt,j[vt]=A[_t]=ft,j[ft]=_t,B[this._hashKey(dt,ht)]=ft,B[this._hashKey(a[2*vt],a[2*vt+1])]=vt}}}this.hull=new Uint32Array(st);for(var xt=0,wt=this._hullStart;xt<st;xt++)this.hull[xt]=wt,wt=j[wt];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function _hashKey(a,A){return Math.floor(function pseudoAngle(a,A){var j=a/(Math.abs(a)+Math.abs(A));return(A>0?3-j:1+j)/4}(a-this._cx,A-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function _legalize(a){for(var A=this._triangles,j=this._halfedges,P=this.coords,B=0,q=0;;){var ne=j[a],ie=a-a%3;if(q=ie+(a+2)%3,-1!==ne){var oe=ne-ne%3,se=ie+(a+1)%3,le=oe+(ne+2)%3,he=A[q],pe=A[a],ge=A[se],me=A[le];if(inCircle(P[2*he],P[2*he+1],P[2*pe],P[2*pe+1],P[2*ge],P[2*ge+1],P[2*me],P[2*me+1])){A[a]=me,A[ne]=he;var ve=j[le];if(-1===ve){var ye=this._hullStart;do{if(this._hullTri[ye]===le){this._hullTri[ye]=a;break}ye=this._hullPrev[ye]}while(ye!==this._hullStart)}this._link(a,ve),this._link(ne,j[q]),this._link(q,le);var _e=oe+(ne+1)%3;B<Ul.length&&(Ul[B++]=_e)}else{if(0===B)break;a=Ul[--B]}}else{if(0===B)break;a=Ul[--B]}}return q}},{key:"_link",value:function _link(a,A){this._halfedges[a]=A,-1!==A&&(this._halfedges[A]=a)}},{key:"_addTriangle",value:function _addTriangle(a,A,j,P,B,q){var ne=this.trianglesLen;return this._triangles[ne]=a,this._triangles[ne+1]=A,this._triangles[ne+2]=j,this._link(ne,P),this._link(ne+1,B),this._link(ne+2,q),this.trianglesLen+=3,ne}}],[{key:"from",value:function from(a){for(var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultGetX,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:defaultGetY,P=a.length,B=new Float64Array(2*P),q=0;q<P;q++){var ne=a[q];B[2*q]=A(ne),B[2*q+1]=j(ne)}return new Delaunator(B)}}]),Delaunator}();function delaunator_dist(a,A,j,P){var B=a-j,q=A-P;return B*B+q*q}function orientIfSure(a,A,j,P,B,q){var ne=(P-A)*(B-a),ie=(j-a)*(q-A);return Math.abs(ne-ie)>=33306690738754716e-32*Math.abs(ne+ie)?ne-ie:0}function delaunator_orient(a,A,j,P,B,q){return(orientIfSure(B,q,a,A,j,P)||orientIfSure(a,A,j,P,B,q)||orientIfSure(j,P,B,q,a,A))<0}function inCircle(a,A,j,P,B,q,ne,ie){var oe=a-ne,se=A-ie,le=j-ne,he=P-ie,pe=B-ne,ge=q-ie,me=le*le+he*he,ve=pe*pe+ge*ge;return oe*(he*ve-me*ge)-se*(le*ve-me*pe)+(oe*oe+se*se)*(le*ge-he*pe)<0}function circumradius(a,A,j,P,B,q){var ne=j-a,ie=P-A,oe=B-a,se=q-A,le=ne*ne+ie*ie,he=oe*oe+se*se,pe=.5/(ne*se-ie*oe),ge=(se*le-ie*he)*pe,me=(ne*he-oe*le)*pe;return ge*ge+me*me}function quicksort(a,A,j,P){if(P-j<=20)for(var B=j+1;B<=P;B++){for(var q=a[B],ne=A[q],ie=B-1;ie>=j&&A[a[ie]]>ne;)a[ie+1]=a[ie--];a[ie+1]=q}else{var oe=j+1,se=P;delaunator_swap(a,j+P>>1,oe),A[a[j]]>A[a[P]]&&delaunator_swap(a,j,P),A[a[oe]]>A[a[P]]&&delaunator_swap(a,oe,P),A[a[j]]>A[a[oe]]&&delaunator_swap(a,j,oe);for(var le=a[oe],he=A[le];;){do{oe++}while(A[a[oe]]<he);do{se--}while(A[a[se]]>he);if(se<oe)break;delaunator_swap(a,oe,se)}a[j+1]=a[se],a[se]=le,P-oe+1>=se-j?(quicksort(a,A,oe,P),quicksort(a,A,j,se-1)):(quicksort(a,A,j,se-1),quicksort(a,A,oe,P))}}function delaunator_swap(a,A,j){var P=a[A];a[A]=a[j],a[j]=P}function defaultGetX(a){return a[0]}function defaultGetY(a){return a[1]}var ql=function(){function Path(){Object(bs.a)(this,Path),this._x0=this._y0=this._x1=this._y1=null,this._=""}return Object(_s.a)(Path,[{key:"moveTo",value:function moveTo(a,A){this._+="M".concat(this._x0=this._x1=+a,",").concat(this._y0=this._y1=+A)}},{key:"closePath",value:function closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function lineTo(a,A){this._+="L".concat(this._x1=+a,",").concat(this._y1=+A)}},{key:"arc",value:function arc(a,A,j){var P=(a=+a)+(j=+j),B=A=+A;if(j<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(P,",").concat(B):(Math.abs(this._x1-P)>1e-6||Math.abs(this._y1-B)>1e-6)&&(this._+="L"+P+","+B),j&&(this._+="A".concat(j,",").concat(j,",0,1,1,").concat(a-j,",").concat(A,"A").concat(j,",").concat(j,",0,1,1,").concat(this._x1=P,",").concat(this._y1=B))}},{key:"rect",value:function rect(a,A,j,P){this._+="M".concat(this._x0=this._x1=+a,",").concat(this._y0=this._y1=+A,"h").concat(+j,"v").concat(+P,"h").concat(-j,"Z")}},{key:"value",value:function value(){return this._||null}}]),Path}(),Wl=function(){function Polygon(){Object(bs.a)(this,Polygon),this._=[]}return Object(_s.a)(Polygon,[{key:"moveTo",value:function moveTo(a,A){this._.push([a,A])}},{key:"closePath",value:function closePath(){this._.push(this._[0].slice())}},{key:"lineTo",value:function lineTo(a,A){this._.push([a,A])}},{key:"value",value:function value(){return this._.length?this._:null}}]),Polygon}(),Hl=function(){function Voronoi(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],j=Object(Ve.a)(A,4),P=j[0],B=j[1],q=j[2],ne=j[3];if(Object(bs.a)(this,Voronoi),!((q=+q)>=(P=+P))||!((ne=+ne)>=(B=+B)))throw new Error("invalid bounds");this.delaunay=a,this._circumcenters=new Float64Array(2*a.points.length),this.vectors=new Float64Array(2*a.points.length),this.xmax=q,this.xmin=P,this.ymax=ne,this.ymin=B,this._init()}return Object(_s.a)(Voronoi,[{key:"update",value:function update(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function _init(){for(var a,A,j=this.delaunay,P=j.points,B=j.hull,q=j.triangles,ne=this.vectors,ie=this.circumcenters=this._circumcenters.subarray(0,q.length/3*2),oe=0,se=0,le=q.length;oe<le;oe+=3,se+=2){var he=2*q[oe],pe=2*q[oe+1],ge=2*q[oe+2],me=P[he],ve=P[he+1],ye=P[pe],_e=P[pe+1],we=P[ge],ke=P[ge+1],Oe=ye-me,Se=_e-ve,Te=we-me,Ae=ke-ve,je=Oe*Oe+Se*Se,Fe=Te*Te+Ae*Ae,Re=2*(Oe*Ae-Se*Te);if(Re)if(Math.abs(Re)<1e-8)a=(me+we)/2,A=(ve+ke)/2;else{var Me=1/Re;a=me+(Ae*je-Se*Fe)*Me,A=ve+(Oe*Fe-Te*je)*Me}else a=(me+we)/2-1e8*Ae,A=(ve+ke)/2+1e8*Te;ie[se]=a,ie[se+1]=A}var Ne,Be,Ue,We=B[B.length-1],Ve=4*We,Ye=P[2*We],$e=P[2*We+1];ne.fill(0);for(var Xe=0;Xe<B.length;++Xe)Ne=Ve,Be=Ye,Ue=$e,Ve=4*(We=B[Xe]),Ye=P[2*We],$e=P[2*We+1],ne[Ne+2]=ne[Ve]=Ue-$e,ne[Ne+3]=ne[Ve+1]=Ye-Be}},{key:"render",value:function render(a){var A=null==a?a=new ql:void 0,j=this.delaunay,P=j.halfedges,B=j.inedges,q=j.hull,ne=this.circumcenters,ie=this.vectors;if(q.length<=1)return null;for(var oe=0,se=P.length;oe<se;++oe){var le=P[oe];if(!(le<oe)){var he=2*Math.floor(oe/3),pe=2*Math.floor(le/3),ge=ne[he],me=ne[he+1],ve=ne[pe],ye=ne[pe+1];this._renderSegment(ge,me,ve,ye,a)}}for(var _e,we=q[q.length-1],ke=0;ke<q.length;++ke){_e=we,we=q[ke];var Oe=2*Math.floor(B[we]/3),Se=ne[Oe],Te=ne[Oe+1],Ae=4*_e,je=this._project(Se,Te,ie[Ae+2],ie[Ae+3]);je&&this._renderSegment(Se,Te,je[0],je[1],a)}return A&&A.value()}},{key:"renderBounds",value:function renderBounds(a){var A=null==a?a=new ql:void 0;return a.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),A&&A.value()}},{key:"renderCell",value:function renderCell(a,A){var j=null==A?A=new ql:void 0,P=this._clip(a);if(null!==P&&P.length){A.moveTo(P[0],P[1]);for(var B=P.length;P[0]===P[B-2]&&P[1]===P[B-1]&&B>1;)B-=2;for(var q=2;q<B;q+=2)P[q]===P[q-2]&&P[q+1]===P[q-1]||A.lineTo(P[q],P[q+1]);return A.closePath(),j&&j.value()}}},{key:"cellPolygons",value:_e.a.mark((function cellPolygons(){var a,A,j,P;return _e.a.wrap((function cellPolygons$(B){for(;;)switch(B.prev=B.next){case 0:a=this.delaunay.points,A=0,j=a.length/2;case 2:if(!(A<j)){B.next=11;break}if(!(P=this.cellPolygon(A))){B.next=8;break}return P.index=A,B.next=8,P;case 8:++A,B.next=2;break;case 11:case"end":return B.stop()}}),cellPolygons,this)}))},{key:"cellPolygon",value:function cellPolygon(a){var A=new Wl;return this.renderCell(a,A),A.value()}},{key:"_renderSegment",value:function _renderSegment(a,A,j,P,B){var q,ne=this._regioncode(a,A),ie=this._regioncode(j,P);0===ne&&0===ie?(B.moveTo(a,A),B.lineTo(j,P)):(q=this._clipSegment(a,A,j,P,ne,ie))&&(B.moveTo(q[0],q[1]),B.lineTo(q[2],q[3]))}},{key:"contains",value:function contains(a,A,j){return(A=+A)===A&&(j=+j)===j&&this.delaunay._step(a,A,j)===a}},{key:"neighbors",value:_e.a.mark((function neighbors(a){var A,j,P,B,q,ne,ie,oe,se;return _e.a.wrap((function neighbors$(le){for(;;)switch(le.prev=le.next){case 0:if(!(A=this._clip(a))){le.next=33;break}j=Object(We.a)(this.delaunay.neighbors(a)),le.prev=3,j.s();case 5:if((P=j.n()).done){le.next=25;break}if(B=P.value,!(q=this._clip(B))){le.next=23;break}ne=0,ie=A.length;case 10:if(!(ne<ie)){le.next=23;break}oe=0,se=q.length;case 12:if(!(oe<se)){le.next=20;break}if(A[ne]!=q[oe]||A[ne+1]!=q[oe+1]||A[(ne+2)%ie]!=q[(oe+se-2)%se]||A[(ne+3)%ie]!=q[(oe+se-1)%se]){le.next=17;break}return le.next=16,B;case 16:return le.abrupt("break",23);case 17:oe+=2,le.next=12;break;case 20:ne+=2,le.next=10;break;case 23:le.next=5;break;case 25:le.next=30;break;case 27:le.prev=27,le.t0=le.catch(3),j.e(le.t0);case 30:return le.prev=30,j.f(),le.finish(30);case 33:case"end":return le.stop()}}),neighbors,this,[[3,27,30,33]])}))},{key:"_cell",value:function _cell(a){var A=this.circumcenters,j=this.delaunay,P=j.inedges,B=j.halfedges,q=j.triangles,ne=P[a];if(-1===ne)return null;var ie=[],oe=ne;do{var se=Math.floor(oe/3);if(ie.push(A[2*se],A[2*se+1]),q[oe=oe%3===2?oe-2:oe+1]!==a)break;oe=B[oe]}while(oe!==ne&&-1!==oe);return ie}},{key:"_clip",value:function _clip(a){if(0===a&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var A=this._cell(a);if(null===A)return null;var j=this.vectors,P=4*a;return j[P]||j[P+1]?this._clipInfinite(a,A,j[P],j[P+1],j[P+2],j[P+3]):this._clipFinite(a,A)}},{key:"_clipFinite",value:function _clipFinite(a,A){for(var j,P,B,q,ne,ie=A.length,oe=null,se=A[ie-2],le=A[ie-1],he=this._regioncode(se,le),pe=0;pe<ie;pe+=2)if(j=se,P=le,se=A[pe],le=A[pe+1],B=he,he=this._regioncode(se,le),0===B&&0===he)q=ne,ne=0,oe?oe.push(se,le):oe=[se,le];else{var ge=void 0,me=void 0,ve=void 0,ye=void 0,_e=void 0;if(0===B){if(null===(ge=this._clipSegment(j,P,se,le,B,he)))continue;var we=ge,ke=Object(Ve.a)(we,4);me=ke[0],ve=ke[1],ye=ke[2],_e=ke[3]}else{if(null===(ge=this._clipSegment(se,le,j,P,he,B)))continue;var Oe=ge,Se=Object(Ve.a)(Oe,4);ye=Se[0],_e=Se[1],me=Se[2],ve=Se[3],q=ne,ne=this._edgecode(me,ve),q&&ne&&this._edge(a,q,ne,oe,oe.length),oe?oe.push(me,ve):oe=[me,ve]}q=ne,ne=this._edgecode(ye,_e),q&&ne&&this._edge(a,q,ne,oe,oe.length),oe?oe.push(ye,_e):oe=[ye,_e]}if(oe)q=ne,ne=this._edgecode(oe[0],oe[1]),q&&ne&&this._edge(a,q,ne,oe,oe.length);else if(this.contains(a,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return oe}},{key:"_clipSegment",value:function _clipSegment(a,A,j,P,B,q){for(;;){if(0===B&&0===q)return[a,A,j,P];if(B&q)return null;var ne=void 0,ie=void 0,oe=B||q;8&oe?(ne=a+(j-a)*(this.ymax-A)/(P-A),ie=this.ymax):4&oe?(ne=a+(j-a)*(this.ymin-A)/(P-A),ie=this.ymin):2&oe?(ie=A+(P-A)*(this.xmax-a)/(j-a),ne=this.xmax):(ie=A+(P-A)*(this.xmin-a)/(j-a),ne=this.xmin),B?(a=ne,A=ie,B=this._regioncode(a,A)):(j=ne,P=ie,q=this._regioncode(j,P))}}},{key:"_clipInfinite",value:function _clipInfinite(a,A,j,P,B,q){var ne,ie=Array.from(A);if((ne=this._project(ie[0],ie[1],j,P))&&ie.unshift(ne[0],ne[1]),(ne=this._project(ie[ie.length-2],ie[ie.length-1],B,q))&&ie.push(ne[0],ne[1]),ie=this._clipFinite(a,ie))for(var oe,se=0,le=ie.length,he=this._edgecode(ie[le-2],ie[le-1]);se<le;se+=2)oe=he,he=this._edgecode(ie[se],ie[se+1]),oe&&he&&(se=this._edge(a,oe,he,ie,se),le=ie.length);else this.contains(a,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(ie=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return ie}},{key:"_edge",value:function _edge(a,A,j,P,B){for(;A!==j;){var q=void 0,ne=void 0;switch(A){case 5:A=4;continue;case 4:A=6,q=this.xmax,ne=this.ymin;break;case 6:A=2;continue;case 2:A=10,q=this.xmax,ne=this.ymax;break;case 10:A=8;continue;case 8:A=9,q=this.xmin,ne=this.ymax;break;case 9:A=1;continue;case 1:A=5,q=this.xmin,ne=this.ymin}P[B]===q&&P[B+1]===ne||!this.contains(a,q,ne)||(P.splice(B,0,q,ne),B+=2)}if(P.length>4)for(var ie=0;ie<P.length;ie+=2){var oe=(ie+2)%P.length,se=(ie+4)%P.length;(P[ie]===P[oe]&&P[oe]===P[se]||P[ie+1]===P[oe+1]&&P[oe+1]===P[se+1])&&(P.splice(oe,2),ie-=2)}return B}},{key:"_project",value:function _project(a,A,j,P){var B,q,ne,ie=1/0;if(P<0){if(A<=this.ymin)return null;(B=(this.ymin-A)/P)<ie&&(ne=this.ymin,q=a+(ie=B)*j)}else if(P>0){if(A>=this.ymax)return null;(B=(this.ymax-A)/P)<ie&&(ne=this.ymax,q=a+(ie=B)*j)}if(j>0){if(a>=this.xmax)return null;(B=(this.xmax-a)/j)<ie&&(q=this.xmax,ne=A+(ie=B)*P)}else if(j<0){if(a<=this.xmin)return null;(B=(this.xmin-a)/j)<ie&&(q=this.xmin,ne=A+(ie=B)*P)}return[q,ne]}},{key:"_edgecode",value:function _edgecode(a,A){return(a===this.xmin?1:a===this.xmax?2:0)|(A===this.ymin?4:A===this.ymax?8:0)}},{key:"_regioncode",value:function _regioncode(a,A){return(a<this.xmin?1:a>this.xmax?2:0)|(A<this.ymin?4:A>this.ymax?8:0)}}]),Voronoi}(),Gl=_e.a.mark(flatIterable),Vl=2*Math.PI,Yl=Math.pow;function pointX(a){return a[0]}function pointY(a){return a[1]}function jitter(a,A,j){return[a+Math.sin(a+A)*j,A+Math.cos(a-A)*j]}var $l=function(){function Delaunay(a){Object(bs.a)(this,Delaunay),this._delaunator=new zl(a),this.inedges=new Int32Array(a.length/2),this._hullIndex=new Int32Array(a.length/2),this.points=this._delaunator.coords,this._init()}return Object(_s.a)(Delaunay,[{key:"update",value:function update(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function _init(){var a=this._delaunator,A=this.points;if(a.hull&&a.hull.length>2&&function delaunay_collinear(a){for(var A=a.triangles,j=a.coords,P=0;P<A.length;P+=3){var B=2*A[P],q=2*A[P+1],ne=2*A[P+2];if((j[ne]-j[B])*(j[q+1]-j[B+1])-(j[q]-j[B])*(j[ne+1]-j[B+1])>1e-10)return!1}return!0}(a)){this.collinear=Int32Array.from({length:A.length/2},(function(a,A){return A})).sort((function(a,j){return A[2*a]-A[2*j]||A[2*a+1]-A[2*j+1]}));for(var j=this.collinear[0],P=this.collinear[this.collinear.length-1],B=[A[2*j],A[2*j+1],A[2*P],A[2*P+1]],q=1e-8*Math.hypot(B[3]-B[1],B[2]-B[0]),ne=0,ie=A.length/2;ne<ie;++ne){var oe=jitter(A[2*ne],A[2*ne+1],q);A[2*ne]=oe[0],A[2*ne+1]=oe[1]}this._delaunator=new zl(A)}else delete this.collinear;for(var se=this.halfedges=this._delaunator.halfedges,le=this.hull=this._delaunator.hull,he=this.triangles=this._delaunator.triangles,pe=this.inedges.fill(-1),ge=this._hullIndex.fill(-1),me=0,ve=se.length;me<ve;++me){var ye=he[me%3===2?me-2:me+1];-1!==se[me]&&-1!==pe[ye]||(pe[ye]=me)}for(var _e=0,we=le.length;_e<we;++_e)ge[le[_e]]=_e;le.length<=2&&le.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=le[0],this.triangles[1]=le[1],this.triangles[2]=le[1],pe[le[0]]=1,2===le.length&&(pe[le[1]]=0))}},{key:"voronoi",value:function voronoi(a){return new Hl(this,a)}},{key:"neighbors",value:_e.a.mark((function neighbors(a){var A,j,P,B,q,ne,ie,oe,se,le,he;return _e.a.wrap((function neighbors$(pe){for(;;)switch(pe.prev=pe.next){case 0:if(A=this.inedges,j=this.hull,P=this._hullIndex,B=this.halfedges,q=this.triangles,!(ne=this.collinear)){pe.next=10;break}if(!((ie=ne.indexOf(a))>0)){pe.next=6;break}return pe.next=6,ne[ie-1];case 6:if(!(ie<ne.length-1)){pe.next=9;break}return pe.next=9,ne[ie+1];case 9:return pe.abrupt("return");case 10:if(-1!==(oe=A[a])){pe.next=13;break}return pe.abrupt("return");case 13:se=oe,le=-1;case 14:return pe.next=16,le=q[se];case 16:if(q[se=se%3===2?se-2:se+1]===a){pe.next=19;break}return pe.abrupt("return");case 19:if(-1!==(se=B[se])){pe.next=26;break}if((he=j[(P[a]+1)%j.length])===le){pe.next=25;break}return pe.next=25,he;case 25:return pe.abrupt("return");case 26:if(se!==oe){pe.next=14;break}case 27:case"end":return pe.stop()}}),neighbors,this)}))},{key:"find",value:function find(a,A){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((a=+a)!==a||(A=+A)!==A)return-1;for(var P,B=j;(P=this._step(j,a,A))>=0&&P!==j&&P!==B;)j=P;return P}},{key:"_step",value:function _step(a,A,j){var P=this.inedges,B=this.hull,q=this._hullIndex,ne=this.halfedges,ie=this.triangles,oe=this.points;if(-1===P[a]||!oe.length)return(a+1)%(oe.length>>1);var se=a,le=Yl(A-oe[2*a],2)+Yl(j-oe[2*a+1],2),he=P[a],pe=he;do{var ge=ie[pe],me=Yl(A-oe[2*ge],2)+Yl(j-oe[2*ge+1],2);if(me<le&&(le=me,se=ge),ie[pe=pe%3===2?pe-2:pe+1]!==a)break;if(-1===(pe=ne[pe])){if((pe=B[(q[a]+1)%B.length])!==ge&&Yl(A-oe[2*pe],2)+Yl(j-oe[2*pe+1],2)<le)return pe;break}}while(pe!==he);return se}},{key:"render",value:function render(a){for(var A=null==a?a=new ql:void 0,j=this.points,P=this.halfedges,B=this.triangles,q=0,ne=P.length;q<ne;++q){var ie=P[q];if(!(ie<q)){var oe=2*B[q],se=2*B[ie];a.moveTo(j[oe],j[oe+1]),a.lineTo(j[se],j[se+1])}}return this.renderHull(a),A&&A.value()}},{key:"renderPoints",value:function renderPoints(a){for(var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,j=null==a?a=new ql:void 0,P=this.points,B=0,q=P.length;B<q;B+=2){var ne=P[B],ie=P[B+1];a.moveTo(ne+A,ie),a.arc(ne,ie,A,0,Vl)}return j&&j.value()}},{key:"renderHull",value:function renderHull(a){var A=null==a?a=new ql:void 0,j=this.hull,P=this.points,B=2*j[0],q=j.length;a.moveTo(P[B],P[B+1]);for(var ne=1;ne<q;++ne){var ie=2*j[ne];a.lineTo(P[ie],P[ie+1])}return a.closePath(),A&&A.value()}},{key:"hullPolygon",value:function hullPolygon(){var a=new Wl;return this.renderHull(a),a.value()}},{key:"renderTriangle",value:function renderTriangle(a,A){var j=null==A?A=new ql:void 0,P=this.points,B=this.triangles,q=2*B[a*=3],ne=2*B[a+1],ie=2*B[a+2];return A.moveTo(P[q],P[q+1]),A.lineTo(P[ne],P[ne+1]),A.lineTo(P[ie],P[ie+1]),A.closePath(),j&&j.value()}},{key:"trianglePolygons",value:_e.a.mark((function trianglePolygons(){var a,A,j;return _e.a.wrap((function trianglePolygons$(P){for(;;)switch(P.prev=P.next){case 0:a=this.triangles,A=0,j=a.length/3;case 2:if(!(A<j)){P.next=8;break}return P.next=5,this.trianglePolygon(A);case 5:++A,P.next=2;break;case 8:case"end":return P.stop()}}),trianglePolygons,this)}))},{key:"trianglePolygon",value:function trianglePolygon(a){var A=new Wl;return this.renderTriangle(a,A),A.value()}}],[{key:"from",value:function from(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pointX,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pointY,P=arguments.length>3?arguments[3]:void 0;return new Delaunay("length"in a?flatArray(a,A,j,P):Float64Array.from(flatIterable(a,A,j,P)))}}]),Delaunay}();function flatArray(a,A,j,P){for(var B=a.length,q=new Float64Array(2*B),ne=0;ne<B;++ne){var ie=a[ne];q[2*ne]=A.call(P,ie,ne,a),q[2*ne+1]=j.call(P,ie,ne,a)}return q}function flatIterable(a,A,j,P){var B,q,ne,ie;return _e.a.wrap((function flatIterable$(oe){for(;;)switch(oe.prev=oe.next){case 0:B=0,q=Object(We.a)(a),oe.prev=2,q.s();case 4:if((ne=q.n()).done){oe.next=13;break}return ie=ne.value,oe.next=8,A.call(P,ie,B,a);case 8:return oe.next=10,j.call(P,ie,B,a);case 10:++B;case 11:oe.next=4;break;case 13:oe.next=18;break;case 15:oe.prev=15,oe.t0=oe.catch(2),q.e(oe.t0);case 18:return oe.prev=18,q.f(),oe.finish(18);case 21:case"end":return oe.stop()}}),Gl,null,[[2,15,18,21]])}function vega_voronoi_module_Voronoi(a){Transform.call(this,null,a)}vega_voronoi_module_Voronoi.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var Kl=[-1e5,-1e5,1e5,1e5];function toPathString(a){for(var A=a[0][0],j=a[0][1],P=a.length-1;a[P][0]===A&&a[P][1]===j;--P);return"M"+a.slice(0,P+1).join("L")+"Z"}Object(ve.z)(vega_voronoi_module_Voronoi,Transform,{transform:function transform(a,A){var j=a.as||"path",P=A.source;if(!P||!P.length)return A;var B=a.size;B=B?[0,0,B[0],B[1]]:(B=a.extent)?[B[0][0],B[0][1],B[1][0],B[1][1]]:Kl;for(var q=this.value=$l.from(P,a.x,a.y).voronoi(B),ne=0,ie=P.length;ne<ie;++ne){var oe=q.cellPolygon(ne);P[ne][j]=oe?toPathString(oe):null}return A.reflow(a.modified()).modifies(j)}});var Xl=Math.PI/180;function vega_wordcloud_module_cloud(){var a,A,j,P,B,q,ne,ie=[256,256],oe=archimedeanSpiral,se=[],le=Math.random,he={};function place(a,A,j){for(var P,B,q,ne,se,he=A.x,pe=A.y,ge=Math.sqrt(ie[0]*ie[0]+ie[1]*ie[1]),me=oe(ie),ve=le()<.5?1:-1,ye=-ve;(P=me(ye+=ve))&&(B=~~P[0],q=~~P[1],!(Math.min(Math.abs(B),Math.abs(q))>=ge));)if(A.x=he+B,A.y=pe+q,!(A.x+A.x0<0||A.y+A.y0<0||A.x+A.x1>ie[0]||A.y+A.y1>ie[1])&&(!j||!cloudCollide(A,a,ie[0]))&&(!j||(se=j,(ne=A).x+ne.x1>se[0].x&&ne.x+ne.x0<se[1].x&&ne.y+ne.y1>se[0].y&&ne.y+ne.y0<se[1].y))){for(var _e,we=A.sprite,ke=A.width>>5,Oe=ie[0]>>5,Se=A.x-(ke<<4),Te=127&Se,Ae=32-Te,je=A.y1-A.y0,Fe=(A.y+A.y0)*Oe+(Se>>5),Re=0;Re<je;Re++){_e=0;for(var Me=0;Me<=ke;Me++)a[Fe+Me]|=_e<<Ae|(Me<ke?(_e=we[Re*ke+Me])>>>Te:0);Fe+=Oe}return A.sprite=null,!0}return!1}return he.layout=function(){for(var oe=function getContext(a){a.width=a.height=1;var A=Math.sqrt(a.getContext("2d").getImageData(0,0,1,1).data.length>>2);a.width=2048/A,a.height=2048/A;var j=a.getContext("2d");return j.fillStyle=j.strokeStyle="red",j.textAlign="center",{context:j,ratio:A}}(domCanvas()),he=function zeroArray(a){var A=[],j=-1;for(;++j<a;)A[j]=0;return A}((ie[0]>>5)*ie[1]),pe=null,ge=se.length,me=-1,ve=[],ye=se.map((function(ie){return{text:a(ie),font:A(ie),style:P(ie),weight:B(ie),rotate:q(ie),size:~~(j(ie)+1e-14),padding:ne(ie),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:ie}})).sort((function(a,A){return A.size-a.size}));++me<ge;){var _e=ye[me];_e.x=ie[0]*(le()+.5)>>1,_e.y=ie[1]*(le()+.5)>>1,cloudSprite(oe,_e,ye,me),_e.hasText&&place(he,_e,pe)&&(ve.push(_e),pe?cloudBounds(pe,_e):pe=[{x:_e.x+_e.x0,y:_e.y+_e.y0},{x:_e.x+_e.x1,y:_e.y+_e.y1}],_e.x-=ie[0]>>1,_e.y-=ie[1]>>1)}return ve},he.words=function(a){return arguments.length?(se=a,he):se},he.size=function(a){return arguments.length?(ie=[+a[0],+a[1]],he):ie},he.font=function(a){return arguments.length?(A=functor(a),he):A},he.fontStyle=function(a){return arguments.length?(P=functor(a),he):P},he.fontWeight=function(a){return arguments.length?(B=functor(a),he):B},he.rotate=function(a){return arguments.length?(q=functor(a),he):q},he.text=function(A){return arguments.length?(a=functor(A),he):a},he.spiral=function(a){return arguments.length?(oe=Jl[a]||a,he):oe},he.fontSize=function(a){return arguments.length?(j=functor(a),he):j},he.padding=function(a){return arguments.length?(ne=functor(a),he):ne},he.random=function(a){return arguments.length?(le=a,he):le},he}function cloudSprite(a,A,j,P){if(!A.sprite){var B=a.context,q=a.ratio;B.clearRect(0,0,2048/q,2048/q);var ne,ie,oe,se,le,he=0,pe=0,ge=0,me=j.length;for(--P;++P<me;){if(A=j[P],B.save(),B.font=A.style+" "+A.weight+" "+~~((A.size+1)/q)+"px "+A.font,ne=B.measureText(A.text+"m").width*q,oe=A.size<<1,A.rotate){var ve=Math.sin(A.rotate*Xl),ye=Math.cos(A.rotate*Xl),_e=ne*ye,we=ne*ve,ke=oe*ye,Oe=oe*ve;ne=Math.max(Math.abs(_e+Oe),Math.abs(_e-Oe))+31>>5<<5,oe=~~Math.max(Math.abs(we+ke),Math.abs(we-ke))}else ne=ne+31>>5<<5;if(oe>ge&&(ge=oe),he+ne>=2048&&(he=0,pe+=ge,ge=0),pe+oe>=2048)break;B.translate((he+(ne>>1))/q,(pe+(oe>>1))/q),A.rotate&&B.rotate(A.rotate*Xl),B.fillText(A.text,0,0),A.padding&&(B.lineWidth=2*A.padding,B.strokeText(A.text,0,0)),B.restore(),A.width=ne,A.height=oe,A.xoff=he,A.yoff=pe,A.x1=ne>>1,A.y1=oe>>1,A.x0=-A.x1,A.y0=-A.y1,A.hasText=!0,he+=ne}for(var Se=B.getImageData(0,0,2048/q,2048/q).data,Te=[];--P>=0;)if((A=j[P]).hasText){for(ie=(ne=A.width)>>5,oe=A.y1-A.y0,se=0;se<oe*ie;se++)Te[se]=0;if(null==(he=A.xoff))return;pe=A.yoff;var Ae=0,je=-1;for(le=0;le<oe;le++){for(se=0;se<ne;se++){var Fe=ie*le+(se>>5),Re=Se[2048*(pe+le)+(he+se)<<2]?1<<31-se%32:0;Te[Fe]|=Re,Ae|=Re}Ae?je=le:(A.y0++,oe--,le--,pe++)}A.y1=A.y0+je,A.sprite=Te.slice(0,(A.y1-A.y0)*ie)}}}function cloudCollide(a,A,j){j>>=5;for(var P,B=a.sprite,q=a.width>>5,ne=a.x-(q<<4),ie=127&ne,oe=32-ie,se=a.y1-a.y0,le=(a.y+a.y0)*j+(ne>>5),he=0;he<se;he++){P=0;for(var pe=0;pe<=q;pe++)if((P<<oe|(pe<q?(P=B[he*q+pe])>>>ie:0))&A[le+pe])return!0;le+=j}return!1}function cloudBounds(a,A){var j=a[0],P=a[1];A.x+A.x0<j.x&&(j.x=A.x+A.x0),A.y+A.y0<j.y&&(j.y=A.y+A.y0),A.x+A.x1>P.x&&(P.x=A.x+A.x1),A.y+A.y1>P.y&&(P.y=A.y+A.y1)}function archimedeanSpiral(a){var A=a[0]/a[1];return function(a){return[A*(a*=.1)*Math.cos(a),a*Math.sin(a)]}}function functor(a){return"function"===typeof a?a:function(){return a}}var Jl={archimedean:archimedeanSpiral,rectangular:function rectangularSpiral(a){var A=4*a[0]/a[1],j=0,P=0;return function(a){var B=a<0?-1:1;switch(Math.sqrt(1+4*B*a)-B&3){case 0:j+=A;break;case 1:P+=4;break;case 2:j-=A;break;default:P-=4}return[j,P]}}},Ql=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Zl=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Wordcloud(a){Transform.call(this,vega_wordcloud_module_cloud(),a)}Wordcloud.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Ql}]},Object(ve.z)(Wordcloud,Transform,{transform:function transform(a,A){!a.size||a.size[0]&&a.size[1]||Object(ve.o)("Wordcloud size dimensions must be non-zero.");var j=a.modified();if(j||A.changed(A.ADD_REM)||Zl.some((function modp(j){var P=a[j];return Object(ve.E)(P)&&A.modified(P.fields)}))){var P,B=A.materialize(A.SOURCE).source,q=this.value,ne=a.as||Ql,ie=a.fontSize||14;if(Object(ve.E)(ie)?P=a.fontSizeRange:ie=Object(ve.m)(ie),P){var oe=ie,se=vega_scale_module_scale("sqrt")().domain(Object(ve.q)(B,oe)).range(P);ie=function fontSize(a){return se(oe(a))}}B.forEach((function(a){a[ne[0]]=NaN,a[ne[1]]=NaN,a[ne[3]]=0}));for(var le,he,pe=q.words(B).text(a.text).size(a.size||[500,500]).padding(a.padding||1).spiral(a.spiral||"archimedean").rotate(a.rotate||0).font(a.font||"sans-serif").fontStyle(a.fontStyle||"normal").fontWeight(a.fontWeight||"normal").fontSize(ie).random(et).layout(),ge=q.size(),me=ge[0]>>1,ye=ge[1]>>1,_e=pe.length,we=0;we<_e;++we)(he=(le=pe[we]).datum)[ne[0]]=le.x+me,he[ne[1]]=le.y+ye,he[ne[2]]=le.font,he[ne[3]]=le.size,he[ne[4]]=le.style,he[ne[5]]=le.weight,he[ne[6]]=le.rotate;return A.reflow(j).modifies(ne)}}});var ac=function array8(a){return new Uint8Array(a)},pc=function array16(a){return new Uint16Array(a)},bc=function array32(a){return new Uint32Array(a)};function vega_crossfilter_module_array(a,A,j){var P=(A<257?ac:A<65537?pc:bc)(a);return j&&P.set(j),P}function Dimension(a,A,j){var P=1<<A;return{one:P,zero:~P,range:j.slice(),bisect:a.bisect,index:a.index,size:a.size,onAdd:function onAdd(a,A){var j,B=this.bisect(this.range,a.value),q=a.index,ne=B[0],ie=B[1],oe=q.length;for(j=0;j<ne;++j)A[q[j]]|=P;for(j=ie;j<oe;++j)A[q[j]]|=P;return this}}}function SortedIndex(){var a=bc(0),A=[],j=0;return{insert:function insert(P,B,q){if(!B.length)return[];var ne,ie,oe,se=j,le=B.length,he=bc(le),pe=Array(le);for(oe=0;oe<le;++oe)pe[oe]=P(B[oe]),he[oe]=oe;if(pe=function vega_crossfilter_module_sort(a,A){return a.sort.call(A,(function(A,j){var P=a[A],B=a[j];return P<B?-1:P>B?1:0})),function(a,A){return Array.from(A,(function(A){return a[A]}))}(a,A)}(pe,he),se)ne=A,ie=a,A=Array(se+le),a=bc(se+le),function vega_crossfilter_module_merge(a,A,j,P,B,q,ne,ie,oe){var se,le=0,he=0;for(se=0;le<P&&he<ne;++se)A[le]<B[he]?(ie[se]=A[le],oe[se]=j[le++]):(ie[se]=B[he],oe[se]=q[he++]+a);for(;le<P;++le,++se)ie[se]=A[le],oe[se]=j[le];for(;he<ne;++he,++se)ie[se]=B[he],oe[se]=q[he]+a}(q,ne,ie,se,pe,he,le,A,a);else{if(q>0)for(oe=0;oe<le;++oe)he[oe]+=q;A=pe,a=he}return j=se+le,{index:he,value:pe}},remove:function remove(P,B){var q,ne,ie,oe=j;for(ne=0;!B[a[ne]]&&ne<oe;++ne);for(ie=ne;ne<oe;++ne)B[q=a[ne]]||(a[ie]=q,A[ie]=A[ne],++ie);j=oe-P},bisect:function bisect(a,P){var B;return P?B=P.length:(P=A,B=j),[Kt(P,a[0],0,B),$t(P,a[1],0,B)]},reindex:function reindex(A){for(var P=0,B=j;P<B;++P)a[P]=A[a[P]]},index:function index(){return a},size:function size(){return j}}}function CrossFilter(a){Transform.call(this,function Bitmaps(){var a=8,A=[],j=bc(0),P=vega_crossfilter_module_array(0,a),B=vega_crossfilter_module_array(0,a);return{data:function data(){return A},seen:function seen(){return j=function lengthen(a,A,j){return a.length>=A?a:((j=j||new a.constructor(A)).set(a),j)}(j,A.length)},add:function add(a){for(var j,P=0,B=A.length,q=a.length;P<q;++P)(j=a[P])._index=B++,A.push(j)},remove:function remove(a,j){var q,ne,ie,oe=A.length,se=Array(oe-a),le=A;for(ne=0;!j[ne]&&ne<oe;++ne)se[ne]=A[ne],le[ne]=ne;for(ie=ne;ne<oe;++ne)q=A[ne],j[ne]?le[ne]=-1:(le[ne]=ie,P[ie]=P[ne],B[ie]=B[ne],se[ie]=q,q._index=ie++),P[ne]=0;return A=se,le},size:function size(){return A.length},curr:function curr(){return P},prev:function prev(){return B},reset:function reset(a){return B[a]=P[a]},all:function all(){return a<257?255:a<65537?65535:4294967295},set:function set(a,A){P[a]|=A},clear:function clear(a,A){P[a]&=~A},resize:function resize(A,j){(A>P.length||j>a)&&(a=Math.max(j,a),P=vega_crossfilter_module_array(A,a,P),B=vega_crossfilter_module_array(A,a))}}}(),a),this._indices=null,this._dims=null}function ResolveFilter(a){Transform.call(this,null,a)}CrossFilter.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},Object(ve.z)(CrossFilter,Transform,{transform:function transform(a,A){return this._dims?a.modified("fields")||a.fields.some((function(a){return A.modified(a.fields)}))?this.reinit(a,A):this.eval(a,A):this.init(a,A)},init:function init(a,A){for(var j,P,B=a.fields,q=a.query,ne=this._indices={},ie=this._dims=[],oe=q.length,se=0;se<oe;++se)P=ne[j=B[se].fname]||(ne[j]=SortedIndex()),ie.push(Dimension(P,se,q[se]));return this.eval(a,A)},reinit:function reinit(a,A){var j,P,B,q,ne,ie,oe,se,le,he=A.materialize().fork(),pe=a.fields,ge=a.query,me=this._indices,ve=this._dims,ye=this.value,_e=ye.curr(),we=ye.prev(),ke=ye.all(),Oe=he.rem=he.add,Se=he.mod,Te=ge.length,Ae={};if(we.set(_e),A.rem.length&&(ne=this.remove(a,A,he)),A.add.length&&ye.add(A.add),A.mod.length)for(ie={},oe=0,se=(q=A.mod).length;oe<se;++oe)ie[q[oe]._index]=1;for(oe=0;oe<Te;++oe)le=pe[oe],(!ve[oe]||a.modified("fields",oe)||A.modified(le.fields))&&((j=Ae[B=le.fname])||(me[B]=P=SortedIndex(),Ae[B]=j=P.insert(le,A.source,0)),ve[oe]=Dimension(P,oe,ge[oe]).onAdd(j,_e));for(oe=0,se=ye.data().length;oe<se;++oe)ne[oe]||(we[oe]!==_e[oe]?Oe.push(oe):ie[oe]&&_e[oe]!==ke&&Se.push(oe));return ye.mask=(1<<Te)-1,he},eval:function _eval(a,A){var j=A.materialize().fork(),P=this._dims.length,B=0;return A.rem.length&&(this.remove(a,A,j),B|=(1<<P)-1),a.modified("query")&&!a.modified("fields")&&(B|=this.update(a,A,j)),A.add.length&&(this.insert(a,A,j),B|=(1<<P)-1),A.mod.length&&(this.modify(A,j),B|=(1<<P)-1),this.value.mask=B,j},insert:function insert(a,A,j){var P,B,q,ne=A.add,ie=this.value,oe=this._dims,se=this._indices,le=a.fields,he={},pe=j.add,ge=ie.size()+ne.length,me=oe.length,ve=ie.size();ie.resize(ge,me),ie.add(ne);var ye=ie.curr(),_e=ie.prev(),we=ie.all();for(P=0;P<me;++P)q=he[B=le[P].fname]||(he[B]=se[B].insert(le[P],ne,ve)),oe[P].onAdd(q,ye);for(;ve<ge;++ve)_e[ve]=we,ye[ve]!==we&&pe.push(ve)},modify:function modify(a,A){var j,P,B,q=A.mod,ne=this.value,ie=ne.curr(),oe=ne.all(),se=a.mod;for(j=0,P=se.length;j<P;++j)ie[B=se[j]._index]!==oe&&q.push(B)},remove:function remove(a,A,j){var P,B,q,ne,ie=this._indices,oe=this.value,se=oe.curr(),le=oe.prev(),he=oe.all(),pe={},ge=j.rem,me=A.rem;for(P=0,B=me.length;P<B;++P)pe[q=me[P]._index]=1,le[q]=ne=se[q],se[q]=he,ne!==he&&ge.push(q);for(q in ie)ie[q].remove(B,pe);return this.reindex(A,B,pe),pe},reindex:function reindex(a,A,j){var P=this._indices,B=this.value;a.runAfter((function(){var a=B.remove(A,j);for(var q in P)P[q].reindex(a)}))},update:function update(a,A,j){var P,B,q=this._dims,ne=a.query,ie=A.stamp,oe=q.length,se=0;for(j.filters=0,B=0;B<oe;++B)a.modified("query",B)&&(P=B,++se);if(1===se)se=q[P].one,this.incrementOne(q[P],ne[P],j.add,j.rem);else for(B=0,se=0;B<oe;++B)a.modified("query",B)&&(se|=q[B].one,this.incrementAll(q[B],ne[B],ie,j.add),j.rem=j.add);return se},incrementAll:function incrementAll(a,A,j,P){var B,q,ne,ie=this.value,oe=ie.seen(),se=ie.curr(),le=ie.prev(),he=a.index(),pe=a.bisect(a.range),ge=a.bisect(A),me=ge[0],ve=ge[1],ye=pe[0],_e=pe[1],we=a.one;if(me<ye)for(B=me,q=Math.min(ye,ve);B<q;++B)oe[ne=he[B]]!==j&&(le[ne]=se[ne],oe[ne]=j,P.push(ne)),se[ne]^=we;else if(me>ye)for(B=ye,q=Math.min(me,_e);B<q;++B)oe[ne=he[B]]!==j&&(le[ne]=se[ne],oe[ne]=j,P.push(ne)),se[ne]^=we;if(ve>_e)for(B=Math.max(me,_e),q=ve;B<q;++B)oe[ne=he[B]]!==j&&(le[ne]=se[ne],oe[ne]=j,P.push(ne)),se[ne]^=we;else if(ve<_e)for(B=Math.max(ye,ve),q=_e;B<q;++B)oe[ne=he[B]]!==j&&(le[ne]=se[ne],oe[ne]=j,P.push(ne)),se[ne]^=we;a.range=A.slice()},incrementOne:function incrementOne(a,A,j,P){var B,q,ne,ie=this.value.curr(),oe=a.index(),se=a.bisect(a.range),le=a.bisect(A),he=le[0],pe=le[1],ge=se[0],me=se[1],ve=a.one;if(he<ge)for(B=he,q=Math.min(ge,pe);B<q;++B)ie[ne=oe[B]]^=ve,j.push(ne);else if(he>ge)for(B=ge,q=Math.min(he,me);B<q;++B)ie[ne=oe[B]]^=ve,P.push(ne);if(pe>me)for(B=Math.max(he,me),q=pe;B<q;++B)ie[ne=oe[B]]^=ve,j.push(ne);else if(pe<me)for(B=Math.max(ge,pe),q=me;B<q;++B)ie[ne=oe[B]]^=ve,P.push(ne);a.range=A.slice()}}),ResolveFilter.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Object(ve.z)(ResolveFilter,Transform,{transform:function transform(a,A){var j=~(a.ignore||0),P=a.filter,B=P.mask;if(0===(B&j))return A.StopPropagation;var q=A.fork(A.ALL),ne=P.data(),ie=P.curr(),oe=P.prev(),se=function pass(a){return ie[a]&j?null:ne[a]};return q.filter(q.MOD,se),B&B-1?(q.filter(q.ADD,(function(a){var A=ie[a]&j;return!A&&A^oe[a]&j?ne[a]:null})),q.filter(q.REM,(function(a){var A=ie[a]&j;return A&&!(A^A^oe[a]&j)?ne[a]:null}))):(q.filter(q.ADD,se),q.filter(q.REM,(function(a){return(ie[a]&j)===B?ne[a]:null}))),q.filter(q.SOURCE,(function(a){return se(a._index)}))}});var _c,kc,Ec,Cc,Dc;function ASTNode(a){this.type=a}ASTNode.prototype.visit=function(a){var A,j,P;if(a(this))return 1;for(j=0,P=(A=function vega_expression_module_children(a){switch(a.type){case"ArrayExpression":return a.elements;case"BinaryExpression":case"LogicalExpression":return[a.left,a.right];case"CallExpression":return[a.callee].concat(a.arguments);case"ConditionalExpression":return[a.test,a.consequent,a.alternate];case"MemberExpression":return[a.object,a.property];case"ObjectExpression":return a.properties;case"Property":return[a.key,a.value];case"UnaryExpression":return[a.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this)).length;j<P;++j)if(A[j].visit(a))return 1};(_c={})[1]="Boolean",_c[2]="<end>",_c[3]="Identifier",_c[4]="Keyword",_c[5]="Null",_c[6]="Numeric",_c[7]="Punctuator",_c[8]="String",_c[9]="RegularExpression";var Ac="ILLEGAL",Fc=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Ic=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function assert(a,A){if(!a)throw new Error("ASSERT: "+A)}function isDecimalDigit(a){return a>=48&&a<=57}function isHexDigit(a){return"0123456789abcdefABCDEF".indexOf(a)>=0}function isOctalDigit(a){return"01234567".indexOf(a)>=0}function isWhiteSpace(a){return 32===a||9===a||11===a||12===a||160===a||a>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a)>=0}function isLineTerminator(a){return 10===a||13===a||8232===a||8233===a}function isIdentifierStart(a){return 36===a||95===a||a>=65&&a<=90||a>=97&&a<=122||92===a||a>=128&&Fc.test(String.fromCharCode(a))}function isIdentifierPart(a){return 36===a||95===a||a>=65&&a<=90||a>=97&&a<=122||a>=48&&a<=57||92===a||a>=128&&Ic.test(String.fromCharCode(a))}var Bc={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function skipComment(){for(;Ec<Cc;){var a=kc.charCodeAt(Ec);if(!isWhiteSpace(a)&&!isLineTerminator(a))break;++Ec}}function scanHexEscape(a){var A,j,P,B=0;for(j="u"===a?4:2,A=0;A<j;++A)Ec<Cc&&isHexDigit(kc[Ec])?(P=kc[Ec++],B=16*B+"0123456789abcdef".indexOf(P.toLowerCase())):throwError({},"Unexpected token %0",Ac);return String.fromCharCode(B)}function scanUnicodeCodePointEscape(){var a,A,j,P;for(A=0,"}"===(a=kc[Ec])&&throwError({},"Unexpected token %0",Ac);Ec<Cc&&isHexDigit(a=kc[Ec++]);)A=16*A+"0123456789abcdef".indexOf(a.toLowerCase());return(A>1114111||"}"!==a)&&throwError({},"Unexpected token %0",Ac),A<=65535?String.fromCharCode(A):(j=55296+(A-65536>>10),P=56320+(A-65536&1023),String.fromCharCode(j,P))}function getEscapedIdentifier(){var a,A;for(a=kc.charCodeAt(Ec++),A=String.fromCharCode(a),92===a&&(117!==kc.charCodeAt(Ec)&&throwError({},"Unexpected token %0",Ac),++Ec,(a=scanHexEscape("u"))&&"\\"!==a&&isIdentifierStart(a.charCodeAt(0))||throwError({},"Unexpected token %0",Ac),A=a);Ec<Cc&&isIdentifierPart(a=kc.charCodeAt(Ec));)++Ec,A+=String.fromCharCode(a),92===a&&(A=A.substr(0,A.length-1),117!==kc.charCodeAt(Ec)&&throwError({},"Unexpected token %0",Ac),++Ec,(a=scanHexEscape("u"))&&"\\"!==a&&isIdentifierPart(a.charCodeAt(0))||throwError({},"Unexpected token %0",Ac),A+=a);return A}function scanIdentifier(){var a,A;return a=Ec,{type:1===(A=92===kc.charCodeAt(Ec)?getEscapedIdentifier():function getIdentifier(){var a,A;for(a=Ec++;Ec<Cc;){if(92===(A=kc.charCodeAt(Ec)))return Ec=a,getEscapedIdentifier();if(!isIdentifierPart(A))break;++Ec}return kc.slice(a,Ec)}()).length?3:Bc.hasOwnProperty(A)?4:"null"===A?5:"true"===A||"false"===A?1:3,value:A,start:a,end:Ec}}function scanPunctuator(){var a,A,j,P,B=Ec,q=kc.charCodeAt(Ec),ne=kc[Ec];switch(q){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ec,{type:7,value:String.fromCharCode(q),start:B,end:Ec};default:if(61===(a=kc.charCodeAt(Ec+1)))switch(q){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ec+=2,{type:7,value:String.fromCharCode(q)+String.fromCharCode(a),start:B,end:Ec};case 33:case 61:return Ec+=2,61===kc.charCodeAt(Ec)&&++Ec,{type:7,value:kc.slice(B,Ec),start:B,end:Ec}}}return">>>="===(P=kc.substr(Ec,4))?{type:7,value:P,start:B,end:Ec+=4}:">>>"===(j=P.substr(0,3))||"<<="===j||">>="===j?{type:7,value:j,start:B,end:Ec+=3}:ne===(A=j.substr(0,2))[1]&&"+-<>&|".indexOf(ne)>=0||"=>"===A?{type:7,value:A,start:B,end:Ec+=2}:("//"===A&&throwError({},"Unexpected token %0",Ac),"<>=!+-*%&|^/".indexOf(ne)>=0?{type:7,value:ne,start:B,end:++Ec}:void throwError({},"Unexpected token %0",Ac))}function scanNumericLiteral(){var a,A,j;if(assert(isDecimalDigit((j=kc[Ec]).charCodeAt(0))||"."===j,"Numeric literal must start with a decimal digit or a decimal point"),A=Ec,a="","."!==j){if(a=kc[Ec++],j=kc[Ec],"0"===a){if("x"===j||"X"===j)return++Ec,function scanHexLiteral(a){for(var A="";Ec<Cc&&isHexDigit(kc[Ec]);)A+=kc[Ec++];return 0===A.length&&throwError({},"Unexpected token %0",Ac),isIdentifierStart(kc.charCodeAt(Ec))&&throwError({},"Unexpected token %0",Ac),{type:6,value:parseInt("0x"+A,16),start:a,end:Ec}}(A);if(isOctalDigit(j))return function scanOctalLiteral(a){for(var A="0"+kc[Ec++];Ec<Cc&&isOctalDigit(kc[Ec]);)A+=kc[Ec++];return(isIdentifierStart(kc.charCodeAt(Ec))||isDecimalDigit(kc.charCodeAt(Ec)))&&throwError({},"Unexpected token %0",Ac),{type:6,value:parseInt(A,8),octal:!0,start:a,end:Ec}}(A);j&&isDecimalDigit(j.charCodeAt(0))&&throwError({},"Unexpected token %0",Ac)}for(;isDecimalDigit(kc.charCodeAt(Ec));)a+=kc[Ec++];j=kc[Ec]}if("."===j){for(a+=kc[Ec++];isDecimalDigit(kc.charCodeAt(Ec));)a+=kc[Ec++];j=kc[Ec]}if("e"===j||"E"===j)if(a+=kc[Ec++],"+"!==(j=kc[Ec])&&"-"!==j||(a+=kc[Ec++]),isDecimalDigit(kc.charCodeAt(Ec)))for(;isDecimalDigit(kc.charCodeAt(Ec));)a+=kc[Ec++];else throwError({},"Unexpected token %0",Ac);return isIdentifierStart(kc.charCodeAt(Ec))&&throwError({},"Unexpected token %0",Ac),{type:6,value:parseFloat(a),start:A,end:Ec}}function scanRegExp(){var a,A,j,P;return Dc=null,skipComment(),a=Ec,A=function scanRegExpBody(){var a,A,j,P;for(assert("/"===(a=kc[Ec]),"Regular expression literal must start with a slash"),A=kc[Ec++],j=!1,P=!1;Ec<Cc;)if(A+=a=kc[Ec++],"\\"===a)isLineTerminator((a=kc[Ec++]).charCodeAt(0))&&throwError({},"Invalid regular expression: missing /"),A+=a;else if(isLineTerminator(a.charCodeAt(0)))throwError({},"Invalid regular expression: missing /");else if(j)"]"===a&&(j=!1);else{if("/"===a){P=!0;break}"["===a&&(j=!0)}return P||throwError({},"Invalid regular expression: missing /"),{value:A.substr(1,A.length-2),literal:A}}(),j=function scanRegExpFlags(){var a,A,j;for(A="",j="";Ec<Cc&&isIdentifierPart((a=kc[Ec]).charCodeAt(0));)++Ec,"\\"===a&&Ec<Cc?throwError({},"Unexpected token %0",Ac):(j+=a,A+=a);return j.search(/[^gimuy]/g)>=0&&throwError({},"Invalid regular expression",j),{value:j,literal:A}}(),P=function testRegExp(a,A){var j=a;A.indexOf("u")>=0&&(j=j.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(a,A){if(parseInt(A,16)<=1114111)return"x";throwError({},"Invalid regular expression")})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(j)}catch(P){throwError({},"Invalid regular expression")}try{return new RegExp(a,A)}catch(B){return null}}(A.value,j.value),{literal:A.literal+j.literal,value:P,regex:{pattern:A.value,flags:j.value},start:a,end:Ec}}function advance(){if(skipComment(),Ec>=Cc)return{type:2,start:Ec,end:Ec};var a=kc.charCodeAt(Ec);return isIdentifierStart(a)?scanIdentifier():40===a||41===a||59===a?scanPunctuator():39===a||34===a?function scanStringLiteral(){var a,A,j,P,B="",q=!1;for(assert("'"===(a=kc[Ec])||'"'===a,"String literal must starts with a quote"),A=Ec,++Ec;Ec<Cc;){if((j=kc[Ec++])===a){a="";break}if("\\"===j)if((j=kc[Ec++])&&isLineTerminator(j.charCodeAt(0)))"\r"===j&&"\n"===kc[Ec]&&++Ec;else switch(j){case"u":case"x":"{"===kc[Ec]?(++Ec,B+=scanUnicodeCodePointEscape()):B+=scanHexEscape(j);break;case"n":B+="\n";break;case"r":B+="\r";break;case"t":B+="\t";break;case"b":B+="\b";break;case"f":B+="\f";break;case"v":B+="\v";break;default:isOctalDigit(j)?(0!==(P="01234567".indexOf(j))&&(q=!0),Ec<Cc&&isOctalDigit(kc[Ec])&&(q=!0,P=8*P+"01234567".indexOf(kc[Ec++]),"0123".indexOf(j)>=0&&Ec<Cc&&isOctalDigit(kc[Ec])&&(P=8*P+"01234567".indexOf(kc[Ec++]))),B+=String.fromCharCode(P)):B+=j}else{if(isLineTerminator(j.charCodeAt(0)))break;B+=j}}return""!==a&&throwError({},"Unexpected token %0",Ac),{type:8,value:B,octal:q,start:A,end:Ec}}():46===a?isDecimalDigit(kc.charCodeAt(Ec+1))?scanNumericLiteral():scanPunctuator():isDecimalDigit(a)?scanNumericLiteral():scanPunctuator()}function lex(){var a=Dc;return Ec=a.end,Dc=advance(),Ec=a.end,a}function peek(){var a=Ec;Dc=advance(),Ec=a}function finishBinaryExpression(a,A,j){var P=new ASTNode("||"===a||"&&"===a?"LogicalExpression":"BinaryExpression");return P.operator=a,P.left=A,P.right=j,P}function finishCallExpression(a,A){var j=new ASTNode("CallExpression");return j.callee=a,j.arguments=A,j}function finishIdentifier(a){var A=new ASTNode("Identifier");return A.name=a,A}function finishLiteral(a){var A=new ASTNode("Literal");return A.value=a.value,A.raw=kc.slice(a.start,a.end),a.regex&&("//"===A.raw&&(A.raw="/(?:)/"),A.regex=a.regex),A}function finishMemberExpression(a,A,j){var P=new ASTNode("MemberExpression");return P.computed="["===a,P.object=A,P.property=j,P.computed||(j.member=!0),P}function finishProperty(a,A,j){var P=new ASTNode("Property");return P.key=A,P.value=j,P.kind=a,P}function throwError(a,A){var j,P=Array.prototype.slice.call(arguments,2),B=A.replace(/%(\d)/g,(function(a,A){return assert(A<P.length,"Message reference must be in range"),P[A]}));throw(j=new Error(B)).index=Ec,j.description=B,j}function throwUnexpected(a){2===a.type&&throwError(a,"Unexpected end of input"),6===a.type&&throwError(a,"Unexpected number"),8===a.type&&throwError(a,"Unexpected string"),3===a.type&&throwError(a,"Unexpected identifier"),4===a.type&&throwError(a,"Unexpected reserved word"),throwError(a,"Unexpected token %0",a.value)}function expect(a){var A=lex();7===A.type&&A.value===a||throwUnexpected(A)}function match(a){return 7===Dc.type&&Dc.value===a}function matchKeyword(a){return 4===Dc.type&&Dc.value===a}function parseArrayInitialiser(){var a=[];for(Ec=Dc.start,expect("[");!match("]");)match(",")?(lex(),a.push(null)):(a.push(parseConditionalExpression()),match("]")||expect(","));return lex(),function finishArrayExpression(a){var A=new ASTNode("ArrayExpression");return A.elements=a,A}(a)}function parseObjectPropertyKey(){Ec=Dc.start;var a=lex();return 8===a.type||6===a.type?(a.octal&&throwError(a,"Octal literals are not allowed in strict mode."),finishLiteral(a)):finishIdentifier(a.value)}function parseObjectProperty(){var a,A,j;return Ec=Dc.start,3===(a=Dc).type?(j=parseObjectPropertyKey(),expect(":"),finishProperty("init",j,parseConditionalExpression())):2!==a.type&&7!==a.type?(A=parseObjectPropertyKey(),expect(":"),finishProperty("init",A,parseConditionalExpression())):void throwUnexpected(a)}function parseObjectInitialiser(){var a,A,j=[],P={},B=String;for(Ec=Dc.start,expect("{");!match("}");)A="$"+("Identifier"===(a=parseObjectProperty()).key.type?a.key.name:B(a.key.value)),Object.prototype.hasOwnProperty.call(P,A)?throwError({},"Duplicate data property in object literal not allowed in strict mode"):P[A]=!0,j.push(a),match("}")||expect(",");return expect("}"),function finishObjectExpression(a){var A=new ASTNode("ObjectExpression");return A.properties=a,A}(j)}var zc={if:1};function parsePrimaryExpression(){var a,A,j;if(match("("))return function parseGroupExpression(){expect("(");var a=parseExpression();return expect(")"),a}();if(match("["))return parseArrayInitialiser();if(match("{"))return parseObjectInitialiser();if(a=Dc.type,Ec=Dc.start,3===a||zc[Dc.value])j=finishIdentifier(lex().value);else if(8===a||6===a)Dc.octal&&throwError(Dc,"Octal literals are not allowed in strict mode."),j=finishLiteral(lex());else{if(4===a)throw new Error("Disabled.");1===a?((A=lex()).value="true"===A.value,j=finishLiteral(A)):5===a?((A=lex()).value=null,j=finishLiteral(A)):match("/")||match("/=")?(j=finishLiteral(scanRegExp()),peek()):throwUnexpected(lex())}return j}function parseArguments(){var a=[];if(expect("("),!match(")"))for(;Ec<Cc&&(a.push(parseConditionalExpression()),!match(")"));)expect(",");return expect(")"),a}function parseNonComputedMember(){return expect("."),function parseNonComputedProperty(){Ec=Dc.start;var a=lex();return function isIdentifierName(a){return 3===a.type||4===a.type||1===a.type||5===a.type}(a)||throwUnexpected(a),finishIdentifier(a.value)}()}function parseComputedMember(){expect("[");var a=parseExpression();return expect("]"),a}function parsePostfixExpression(){var a=function parseLeftHandSideExpressionAllowCall(){var a;for(a=parsePrimaryExpression();;)if(match("."))a=finishMemberExpression(".",a,parseNonComputedMember());else if(match("("))a=finishCallExpression(a,parseArguments());else{if(!match("["))break;a=finishMemberExpression("[",a,parseComputedMember())}return a}();if(7===Dc.type&&(match("++")||match("--")))throw new Error("Disabled.");return a}function parseUnaryExpression(){var a,A;if(7!==Dc.type&&4!==Dc.type)A=parsePostfixExpression();else{if(match("++")||match("--"))throw new Error("Disabled.");if(match("+")||match("-")||match("~")||match("!"))a=lex(),A=parseUnaryExpression(),A=function finishUnaryExpression(a,A){var j=new ASTNode("UnaryExpression");return j.operator=a,j.argument=A,j.prefix=!0,j}(a.value,A);else{if(matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof"))throw new Error("Disabled.");A=parsePostfixExpression()}}return A}function binaryPrecedence(a){var A=0;if(7!==a.type&&4!==a.type)return 0;switch(a.value){case"||":A=1;break;case"&&":A=2;break;case"|":A=3;break;case"^":A=4;break;case"&":A=5;break;case"==":case"!=":case"===":case"!==":A=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":A=7;break;case"<<":case">>":case">>>":A=8;break;case"+":case"-":A=9;break;case"*":case"/":case"%":A=11}return A}function parseConditionalExpression(){var a,A;return a=function parseBinaryExpression(){var a,A,j,P,B,q,ne,ie,oe,se;if(a=Dc,oe=parseUnaryExpression(),0===(B=binaryPrecedence(P=Dc)))return oe;for(P.prec=B,lex(),A=[a,Dc],q=[oe,P,ne=parseUnaryExpression()];(B=binaryPrecedence(Dc))>0;){for(;q.length>2&&B<=q[q.length-2].prec;)ne=q.pop(),ie=q.pop().value,oe=q.pop(),A.pop(),j=finishBinaryExpression(ie,oe,ne),q.push(j);(P=lex()).prec=B,q.push(P),A.push(Dc),j=parseUnaryExpression(),q.push(j)}for(j=q[se=q.length-1],A.pop();se>1;)A.pop(),j=finishBinaryExpression(q[se-1].value,q[se-2],j),se-=2;return j}(),match("?")&&(lex(),A=parseConditionalExpression(),expect(":"),a=function finishConditionalExpression(a,A,j){var P=new ASTNode("ConditionalExpression");return P.test=a,P.consequent=A,P.alternate=j,P}(a,A,parseConditionalExpression())),a}function parseExpression(){var a=parseConditionalExpression();if(match(","))throw new Error("Disabled.");return a}function parser(a){Ec=0,Cc=(kc=a).length,Dc=null,peek();var A=parseExpression();if(2!==Dc.type)throw new Error("Unexpect token after expression.");return A}var Wc={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Functions(a){function fn(A,j,P){return function(B){return function fncall(A,j,P,B){var q=a(j[0]);return P&&(q=P+"("+q+")",0===P.lastIndexOf("new ",0)&&(q="("+q+")")),q+"."+A+(B<0?"":0===B?"()":"("+j.slice(1).map(a).join(",")+")")}(A,B,j,P)}}var A="new Date";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function clamp(A){A.length<3&&Object(ve.o)("Missing arguments to clamp function."),A.length>3&&Object(ve.o)("Too many arguments to clamp function.");var j=A.map(a);return"Math.max("+j[1]+", Math.min("+j[2]+","+j[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:A,date:fn("getDate",A,0),day:fn("getDay",A,0),year:fn("getFullYear",A,0),month:fn("getMonth",A,0),hours:fn("getHours",A,0),minutes:fn("getMinutes",A,0),seconds:fn("getSeconds",A,0),milliseconds:fn("getMilliseconds",A,0),time:fn("getTime",A,0),timezoneoffset:fn("getTimezoneOffset",A,0),utcdate:fn("getUTCDate",A,0),utcday:fn("getUTCDay",A,0),utcyear:fn("getUTCFullYear",A,0),utcmonth:fn("getUTCMonth",A,0),utchours:fn("getUTCHours",A,0),utcminutes:fn("getUTCMinutes",A,0),utcseconds:fn("getUTCSeconds",A,0),utcmilliseconds:fn("getUTCMilliseconds",A,0),length:fn("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:fn("toUpperCase","String",0),lower:fn("toLowerCase","String",0),substring:fn("substring","String"),split:fn("split","String"),trim:fn("trim","String",0),regexp:"RegExp",test:fn("test","RegExp"),if:function _if(A){A.length<3&&Object(ve.o)("Missing arguments to if function."),A.length>3&&Object(ve.o)("Too many arguments to if function.");var j=A.map(a);return"("+j[0]+"?"+j[1]+":"+j[2]+")"}}}function vega_expression_module_codegen(a){var A=(a=a||{}).allowed?Object(ve.fb)(a.allowed):{},j=a.forbidden?Object(ve.fb)(a.forbidden):{},P=a.constants||Wc,B=(a.functions||Functions)(visit),q=a.globalvar,ne=a.fieldvar,ie=Object(ve.E)(q)?q:function(a){return"".concat(q,'["').concat(a,'"]')},oe={},se={},le=0;function visit(a){if(Object(ve.J)(a))return a;var A=he[a.type];return null==A&&Object(ve.o)("Unsupported type: "+a.type),A(a)}var he={Literal:function Literal(a){return a.raw},Identifier:function Identifier(a){var B=a.name;return le>0?B:Object(ve.w)(j,B)?Object(ve.o)("Illegal identifier: "+B):Object(ve.w)(P,B)?P[B]:Object(ve.w)(A,B)?B:(oe[B]=1,ie(B))},MemberExpression:function MemberExpression(a){var A=!a.computed,j=visit(a.object);A&&(le+=1);var P=visit(a.property);return j===ne&&(se[function stripQuotes(a){var A=a&&a.length-1;return A&&('"'===a[0]&&'"'===a[A]||"'"===a[0]&&"'"===a[A])?a.slice(1,-1):a}(P)]=1),A&&(le-=1),j+(A?"."+P:"["+P+"]")},CallExpression:function CallExpression(a){"Identifier"!==a.callee.type&&Object(ve.o)("Illegal callee type: "+a.callee.type);var A=a.callee.name,j=a.arguments,P=Object(ve.w)(B,A)&&B[A];return P||Object(ve.o)("Unrecognized function: "+A),Object(ve.E)(P)?P(j):P+"("+j.map(visit).join(",")+")"},ArrayExpression:function ArrayExpression(a){return"["+a.elements.map(visit).join(",")+"]"},BinaryExpression:function BinaryExpression(a){return"("+visit(a.left)+" "+a.operator+" "+visit(a.right)+")"},UnaryExpression:function UnaryExpression(a){return"("+a.operator+visit(a.argument)+")"},ConditionalExpression:function ConditionalExpression(a){return"("+visit(a.test)+"?"+visit(a.consequent)+":"+visit(a.alternate)+")"},LogicalExpression:function LogicalExpression(a){return"("+visit(a.left)+a.operator+visit(a.right)+")"},ObjectExpression:function ObjectExpression(a){return"{"+a.properties.map(visit).join(",")+"}"},Property:function Property(a){le+=1;var A=visit(a.key);return le-=1,A+":"+visit(a.value)}};function codegen(a){var A={code:visit(a),globals:Object.keys(oe),fields:Object.keys(se)};return oe={},se={},A}return codegen.functions=B,codegen.constants=P,codegen}var Hc,Gc,Yc,$c,Xc,Zc=new xs,ef=new xs,tf={point:noop_noop,lineStart:noop_noop,lineEnd:noop_noop,polygonStart:function polygonStart(){Zc=new xs,tf.lineStart=area_areaRingStart,tf.lineEnd=area_areaRingEnd},polygonEnd:function polygonEnd(){var a=+Zc;ef.add(a<0?Ss+a:a),this.lineStart=this.lineEnd=this.point=noop_noop},sphere:function sphere(){ef.add(Ss)}};function area_areaRingStart(){tf.point=area_areaPointFirst}function area_areaRingEnd(){area_areaPoint(Hc,Gc)}function area_areaPointFirst(a,A){tf.point=area_areaPoint,Hc=a,Gc=A,Yc=a*=Cs,$c=js(A=(A*=Cs)/2+Os),Xc=Is(A)}function area_areaPoint(a,A){var j=(a*=Cs)-Yc,P=j>=0?1:-1,B=P*j,q=js(A=(A*=Cs)/2+Os),ne=Is(A),ie=Xc*ne,oe=$c*q+ie*js(B),se=ie*P*Is(B);Zc.add(As(se,oe)),Yc=a,$c=q,Xc=ne}var nf,rf,af,sf,uf,lf,cf,ff,df,hf,pf,gf={point:bounds_boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function polygonStart(){gf.point=boundsRingPoint,gf.lineStart=boundsRingStart,gf.lineEnd=boundsRingEnd,df=new xs,tf.polygonStart()},polygonEnd:function polygonEnd(){tf.polygonEnd(),gf.point=bounds_boundsPoint,gf.lineStart=boundsLineStart,gf.lineEnd=boundsLineEnd,Zc<0?(nf=-(af=180),rf=-(sf=90)):df>1e-6?sf=90:df<-1e-6&&(rf=-90),pf[0]=nf,pf[1]=af},sphere:function sphere(){nf=-(af=180),rf=-(sf=90)}};function bounds_boundsPoint(a,A){hf.push(pf=[nf=a,af=a]),A<rf&&(rf=A),A>sf&&(sf=A)}function bounds_linePoint(a,A){var j=cartesian_cartesian([a*Cs,A*Cs]);if(ff){var P=cartesianCross(ff,j),B=cartesianCross([P[1],-P[0],0],P);cartesianNormalizeInPlace(B),B=cartesian_spherical(B);var q,ne=a-uf,ie=ne>0?1:-1,oe=B[0]*Es*ie,se=Ts(ne)>180;se^(ie*uf<oe&&oe<ie*a)?(q=B[1]*Es)>sf&&(sf=q):se^(ie*uf<(oe=(oe+360)%360-180)&&oe<ie*a)?(q=-B[1]*Es)<rf&&(rf=q):(A<rf&&(rf=A),A>sf&&(sf=A)),se?a<uf?bounds_angle(nf,a)>bounds_angle(nf,af)&&(af=a):bounds_angle(a,af)>bounds_angle(nf,af)&&(nf=a):af>=nf?(a<nf&&(nf=a),a>af&&(af=a)):a>uf?bounds_angle(nf,a)>bounds_angle(nf,af)&&(af=a):bounds_angle(a,af)>bounds_angle(nf,af)&&(nf=a)}else hf.push(pf=[nf=a,af=a]);A<rf&&(rf=A),A>sf&&(sf=A),ff=j,uf=a}function boundsLineStart(){gf.point=bounds_linePoint}function boundsLineEnd(){pf[0]=nf,pf[1]=af,gf.point=bounds_boundsPoint,ff=null}function boundsRingPoint(a,A){if(ff){var j=a-uf;df.add(Ts(j)>180?j+(j>0?360:-360):j)}else lf=a,cf=A;tf.point(a,A),bounds_linePoint(a,A)}function boundsRingStart(){tf.lineStart()}function boundsRingEnd(){boundsRingPoint(lf,cf),tf.lineEnd(),Ts(df)>1e-6&&(nf=-(af=180)),pf[0]=nf,pf[1]=af,ff=null}function bounds_angle(a,A){return(A-=a)<0?A+360:A}function rangeCompare(a,A){return a[0]-A[0]}function rangeContains(a,A){return a[0]<=a[1]?a[0]<=A&&A<=a[1]:A<a[0]||a[1]<A}var mf,vf,yf,xf,wf,kf,Of,Sf,Tf,Af,Pf,Rf,Mf,Lf,If,Nf,Bf={sphere:noop_noop,point:centroid_centroidPoint,lineStart:centroid_centroidLineStart,lineEnd:centroid_centroidLineEnd,polygonStart:function polygonStart(){Bf.lineStart=centroid_centroidRingStart,Bf.lineEnd=centroid_centroidRingEnd},polygonEnd:function polygonEnd(){Bf.lineStart=centroid_centroidLineStart,Bf.lineEnd=centroid_centroidLineEnd}};function centroid_centroidPoint(a,A){a*=Cs;var j=js(A*=Cs);centroidPointCartesian(j*js(a),j*Is(a),Is(A))}function centroidPointCartesian(a,A,j){++mf,yf+=(a-yf)/mf,xf+=(A-xf)/mf,wf+=(j-wf)/mf}function centroid_centroidLineStart(){Bf.point=centroidLinePointFirst}function centroidLinePointFirst(a,A){a*=Cs;var j=js(A*=Cs);Lf=j*js(a),If=j*Is(a),Nf=Is(A),Bf.point=centroidLinePoint,centroidPointCartesian(Lf,If,Nf)}function centroidLinePoint(a,A){a*=Cs;var j=js(A*=Cs),P=j*js(a),B=j*Is(a),q=Is(A),ne=As(Bs((ne=If*q-Nf*B)*ne+(ne=Nf*P-Lf*q)*ne+(ne=Lf*B-If*P)*ne),Lf*P+If*B+Nf*q);vf+=ne,kf+=ne*(Lf+(Lf=P)),Of+=ne*(If+(If=B)),Sf+=ne*(Nf+(Nf=q)),centroidPointCartesian(Lf,If,Nf)}function centroid_centroidLineEnd(){Bf.point=centroid_centroidPoint}function centroid_centroidRingStart(){Bf.point=centroidRingPointFirst}function centroid_centroidRingEnd(){centroidRingPoint(Rf,Mf),Bf.point=centroid_centroidPoint}function centroidRingPointFirst(a,A){Rf=a,Mf=A,a*=Cs,A*=Cs,Bf.point=centroidRingPoint;var j=js(A);Lf=j*js(a),If=j*Is(a),Nf=Is(A),centroidPointCartesian(Lf,If,Nf)}function centroidRingPoint(a,A){a*=Cs;var j=js(A*=Cs),P=j*js(a),B=j*Is(a),q=Is(A),ne=If*q-Nf*B,ie=Nf*P-Lf*q,oe=Lf*B-If*P,se=Rs(ne,ie,oe),le=math_asin(se),he=se&&-le/se;Tf.add(he*ne),Af.add(he*ie),Pf.add(he*oe),vf+=le,kf+=le*(Lf+(Lf=P)),Of+=le*(If+(If=B)),Sf+=le*(Nf+(Nf=q)),centroidPointCartesian(Lf,If,Nf)}function testPoint(a,A){for(var j,P,B=A.fields,q=A.values,ne=B.length,ie=0;ie<ne;++ie)if((P=B[ie]).getter=ve.u.getter||Object(ve.u)(P.field),j=P.getter(a),Object(ve.D)(j)&&(j=Object(ve.eb)(j)),Object(ve.D)(q[ie])&&(q[ie]=Object(ve.eb)(q[ie])),Object(ve.D)(q[ie][0])&&(q[ie]=q[ie].map(ve.eb)),"E"===P.type){if(Object(ve.B)(q[ie])?q[ie].indexOf(j)<0:j!==q[ie])return!1}else if("R"===P.type){if(!Object(ve.A)(j,q[ie]))return!1}else if("R-RE"===P.type){if(!Object(ve.A)(j,q[ie],!0,!1))return!1}else if("R-E"===P.type){if(!Object(ve.A)(j,q[ie],!1,!1))return!1}else if("R-LE"===P.type&&!Object(ve.A)(j,q[ie],!1,!0))return!1;return!0}var Uf=Object(ve.u)("_vgsid_"),zf=function vega_selection_module_bisector(a){var A=a,j=a;function left(a,A,P,B){for(null==P&&(P=0),null==B&&(B=a.length);P<B;){var q=P+B>>>1;j(a[q],A)<0?P=q+1:B=q}return P}return 1===a.length&&(A=function delta(A,j){return a(A)-j},j=function ascendingComparator(a){return function(A,j){return function vega_selection_module_ascending(a,A){return a<A?-1:a>A?1:a>=A?0:NaN}(a(A),j)}}(a)),{left:left,center:function center(a,j,P,B){null==P&&(P=0),null==B&&(B=a.length);var q=left(a,j,P,B-1);return q>P&&A(a[q-1],j)>-A(a[q],j)?q-1:q},right:function right(a,A,P,B){for(null==P&&(P=0),null==B&&(B=a.length);P<B;){var q=P+B>>>1;j(a[q],A)>0?B=q:P=q+1}return P}}}(Uf),qf=zf.left,Wf=zf.right;var Vf={E_union:function E_union(a,A){if(!a.length)return A;for(var j=0,P=A.length;j<P;++j)a.indexOf(A[j])<0&&a.push(A[j]);return a},E_intersect:function E_intersect(a,A){return a.length?a.filter((function(a){return A.indexOf(a)>=0})):A},R_union:function R_union(a,A){var j=Object(ve.eb)(A[0]),P=Object(ve.eb)(A[1]);return j>P&&(j=A[1],P=A[0]),a.length?(a[0]>j&&(a[0]=j),a[1]<P&&(a[1]=P),a):[j,P]},R_intersect:function R_intersect(a,A){var j=Object(ve.eb)(A[0]),P=Object(ve.eb)(A[1]);return j>P&&(j=A[1],P=A[0]),a.length?P<a[0]||a[1]<j?[]:(a[0]<j&&(a[0]=j),a[1]>P&&(a[1]=P),a):[j,P]}};function selectionVisitor(a,A,j,P){"Literal"!==A[0].type&&Object(ve.o)("First argument to selection functions must be a string literal.");var B=A[0].value,q=":"+B;"intersect"!==(A.length>=2&&Object(ve.W)(A).value)||Object(ve.w)(P,"@unit")||(P["@unit"]=j.getData(B).indataRef(j,"unit")),Object(ve.w)(P,q)||(P[q]=j.getData(B).tuplesRef())}function vega_functions_module_data(a){var A=this.context.data[a];return A?A.values.value:[]}var Yf=function wrap(a){return function(A,j){return this.context.dataflow.locale()[a](j)(A)}},$f=Yf("format"),Kf=Yf("timeFormat"),Xf=Yf("utcFormat"),Jf=Yf("timeParse"),Qf=Yf("utcParse"),Zf=new Date(2e3,0,1);function vega_functions_module_time(a,A,j){return Number.isInteger(a)&&Number.isInteger(A)?(Zf.setYear(2e3),Zf.setMonth(a),Zf.setDate(A),Kf.call(this,Zf,j)):""}function dataVisitor(a,A,j,P){"Literal"!==A[0].type&&Object(ve.o)("First argument to data functions must be a string literal.");var B=A[0].value,q=":"+B;if(!Object(ve.w)(q,P))try{P[q]=j.getData(B).tuplesRef()}catch(ne){}}function scaleVisitor(a,A,j,P){if("Literal"===A[0].type)addScaleDependency(j,P,A[0].value);else for(a in j.scales)addScaleDependency(j,P,a)}function addScaleDependency(a,A,j){var P="%"+j;if(!Object(ve.w)(A,P))try{A[P]=a.scaleRef(j)}catch(B){}}function vega_functions_module_getScale(a,A){var j;return Object(ve.E)(a)?a:Object(ve.J)(a)?(j=A.scales[a])&&j.value:void 0}function internalScaleFunctions(a,A,j){A.__bandwidth=function(a){return a&&a.bandwidth?a.bandwidth():0},j._bandwidth=scaleVisitor,j._range=scaleVisitor,j._scale=scaleVisitor;var P=function ref(A){return"_["+("Literal"===A.type?Object(ve.bb)("%"+A.value):Object(ve.bb)("%")+"+"+a(A))+"]"};return{_bandwidth:function _bandwidth(a){return"this.__bandwidth(".concat(P(a[0]),")")},_range:function _range(a){return"".concat(P(a[0]),".range()")},_scale:function _scale(A){return"".concat(P(A[0]),"(").concat(a(A[1]),")")}}}function geoMethod(a,A){return function(j,P,B){if(j){var q=vega_functions_module_getScale(j,(B||this).context);return q&&q.path[a](P)}return A(P)}}var ed=geoMethod("area",(function(a){return ef=new xs,src_stream(a,tf),2*ef})),nd=geoMethod("bounds",(function(a){var A,j,P,B,q,ne,ie;if(sf=af=-(nf=rf=1/0),hf=[],src_stream(a,gf),j=hf.length){for(hf.sort(rangeCompare),A=1,q=[P=hf[0]];A<j;++A)rangeContains(P,(B=hf[A])[0])||rangeContains(P,B[1])?(bounds_angle(P[0],B[1])>bounds_angle(P[0],P[1])&&(P[1]=B[1]),bounds_angle(B[0],P[1])>bounds_angle(P[0],P[1])&&(P[0]=B[0])):q.push(P=B);for(ne=-1/0,A=0,P=q[j=q.length-1];A<=j;P=B,++A)B=q[A],(ie=bounds_angle(P[1],B[0]))>ne&&(ne=ie,nf=B[0],af=P[1])}return hf=pf=null,nf===1/0||rf===1/0?[[NaN,NaN],[NaN,NaN]]:[[nf,rf],[af,sf]]})),cd=geoMethod("centroid",(function(a){mf=vf=yf=xf=wf=kf=Of=Sf=0,Tf=new xs,Af=new xs,Pf=new xs,src_stream(a,Bf);var A=+Tf,j=+Af,P=+Pf,B=Rs(A,j,P);return B<1e-12&&(A=kf,j=Of,P=Sf,vf<1e-6&&(A=yf,j=xf,P=wf),(B=Rs(A,j,P))<1e-12)?[NaN,NaN]:[As(j,A)*Es,math_asin(P/B)*Es]}));function vega_functions_module_log(a,A,j){try{a[A].apply(a,["EXPRESSION"].concat([].slice.call(j)))}catch(P){a.warn(P)}return j[j.length-1]}function channel_luminance_value(a){var A=a/255;return A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4)}function luminance(a){var A=color_rgb(a);return.2126*channel_luminance_value(A.r)+.7152*channel_luminance_value(A.g)+.0722*channel_luminance_value(A.b)}function equal(a,A){return a===A||a!==a&&A!==A||(Object(ve.B)(a)?!(!Object(ve.B)(A)||a.length!==A.length)&&function equalArray(a,A){for(var j=0,P=a.length;j<P;++j)if(!equal(a[j],A[j]))return!1;return!0}(a,A):!(!Object(ve.H)(a)||!Object(ve.H)(A))&&equalObject(a,A))}function equalObject(a,A){for(var j in a)if(!equal(a[j],A[j]))return!1;return!0}function removePredicate(a){return function(A){return equalObject(a,A)}}var fd={};function vega_functions_module_array(a){return Object(ve.B)(a)||ArrayBuffer.isView(a)?a:null}function sequence(a){return vega_functions_module_array(a)||(Object(ve.J)(a)?a:null)}var dd=function datum(a){return a.data};function treeNodes(a,A){var j=vega_functions_module_data.call(A,a);return j.root&&j.root.lookup||{}}var bd=function _window(){return"undefined"!==typeof window&&window||null};var _d={random:function random(){return et()},cumulativeNormal:cumulativeNormal,cumulativeLogNormal:cumulativeLogNormal,cumulativeUniform:cumulativeUniform,densityNormal:densityNormal,densityLogNormal:densityLogNormal,densityUniform:densityUniform,quantileNormal:quantileNormal,quantileLogNormal:quantileLogNormal,quantileUniform:quantileUniform,sampleNormal:sampleNormal,sampleLogNormal:sampleLogNormal,sampleUniform:sampleUniform,isArray:ve.B,isBoolean:ve.C,isDate:ve.D,isDefined:function isDefined(a){return void 0!==a},isNumber:ve.G,isObject:ve.H,isRegExp:ve.I,isString:ve.J,isTuple:isTuple,isValid:function isValid(a){return null!=a&&a===a},toBoolean:ve.cb,toDate:ve.db,toNumber:ve.eb,toString:ve.gb,indexof:function indexof(a){for(var A,j=arguments.length,P=new Array(j>1?j-1:0),B=1;B<j;B++)P[B-1]=arguments[B];return(A=sequence(a)).indexOf.apply(A,P)},join:function vega_functions_module_join(a){for(var A,j=arguments.length,P=new Array(j>1?j-1:0),B=1;B<j;B++)P[B-1]=arguments[B];return(A=vega_functions_module_array(a)).join.apply(A,P)},lastindexof:function lastindexof(a){for(var A,j=arguments.length,P=new Array(j>1?j-1:0),B=1;B<j;B++)P[B-1]=arguments[B];return(A=sequence(a)).lastIndexOf.apply(A,P)},replace:function vega_functions_module_replace(a,A,j){return Object(ve.E)(j)&&Object(ve.o)("Function argument passed to replace."),String(a).replace(A,j)},reverse:function vega_functions_module_reverse(a){return vega_functions_module_array(a).slice().reverse()},slice:function vega_functions_module_slice(a){for(var A,j=arguments.length,P=new Array(j>1?j-1:0),B=1;B<j;B++)P[B-1]=arguments[B];return(A=sequence(a)).slice.apply(A,P)},flush:ve.v,lerp:ve.L,merge:function vega_functions_module_merge(){var a=[].slice.call(arguments);return a.unshift({}),ve.p.apply(void 0,Object(xt.a)(a))},pad:ve.R,peek:ve.W,pluck:function pluck(a,A){var j=fd[A]||(fd[A]=Object(ve.u)(A));return Object(ve.B)(a)?a.map(j):j(a)},span:ve.Z,inrange:ve.A,truncate:ve.hb,rgb:color_rgb,lab:lab,hcl:hcl,hsl:hsl,luminance:luminance,contrast:function contrast(a,A){var j=luminance(a),P=luminance(A);return(Math.max(j,P)+.05)/(Math.min(j,P)+.05)},sequence:src_range,format:$f,utcFormat:Xf,utcParse:Qf,utcOffset:ot.w,utcSequence:ot.x,timeFormat:Kf,timeParse:Jf,timeOffset:ot.q,timeSequence:ot.r,timeUnitSpecifier:ot.s,monthFormat:function monthFormat(a){return vega_functions_module_time.call(this,a,1,"%B")},monthAbbrevFormat:function monthAbbrevFormat(a){return vega_functions_module_time.call(this,a,1,"%b")},dayFormat:function dayFormat(a){return vega_functions_module_time.call(this,0,2+a,"%A")},dayAbbrevFormat:function dayAbbrevFormat(a){return vega_functions_module_time.call(this,0,2+a,"%a")},quarter:ve.X,utcquarter:ve.jb,week:ot.A,utcweek:ot.z,dayofyear:ot.m,utcdayofyear:ot.y,warn:function warn(){return vega_functions_module_log(this.context.dataflow,"warn",arguments)},info:function info(){return vega_functions_module_log(this.context.dataflow,"info",arguments)},debug:function debug(){return vega_functions_module_log(this.context.dataflow,"debug",arguments)},extent:ve.q,inScope:function inScope(a){var A=this.context.group,j=!1;if(A)for(;a;){if(a===A){j=!0;break}a=a.mark.group}return j},intersect:function vega_functions_module_intersect(a,A,j){if(!a)return[];var P=Object(Ve.a)(a,2),B=P[0],q=P[1],ne=(new Bounds).set(B[0],B[1],q[0],q[1]);return vega_scenegraph_module_intersect(j||this.context.dataflow.scenegraph().root,ne,function vega_functions_module_filter(a){var A=null;if(a){var j=Object(ve.i)(a.marktype),P=Object(ve.i)(a.markname);A=function p(a){return(!j.length||j.some((function(A){return a.marktype===A})))&&(!P.length||P.some((function(A){return a.name===A})))}}return A}(A))},clampRange:ve.k,pinchDistance:function pinchDistance(a){var A=a.touches,j=A[0].clientX-A[1].clientX,P=A[0].clientY-A[1].clientY;return Math.sqrt(j*j+P*P)},pinchAngle:function pinchAngle(a){var A=a.touches;return Math.atan2(A[0].clientY-A[1].clientY,A[0].clientX-A[1].clientX)},screen:function screen(){var a=bd();return a?a.screen:{}},containerSize:function containerSize(){var a=this.context.dataflow,A=a.container&&a.container();return A?[A.clientWidth,A.clientHeight]:[void 0,void 0]},windowSize:function windowSize(){var a=bd();return a?[a.innerWidth,a.innerHeight]:[void 0,void 0]},bandspace:function bandspace(a,A,j){return bandSpace(a||0,A||0,j||0)},setdata:function setdata(a,A){var j=this.context.dataflow,P=this.context.data[a].input;return j.pulse(P,j.changeset().remove(ve.ib).insert(A)),1},pathShape:function pathShape(a){var A=null;return function(j){return j?pathRender(j,A=A||pathParse(a)):a}},panLinear:ve.S,panLog:ve.T,panPow:ve.U,panSymlog:ve.V,zoomLinear:ve.nb,zoomLog:ve.ob,zoomPow:ve.pb,zoomSymlog:ve.qb,encode:function vega_functions_module_encode(a,A,j){if(a){var P=this.context.dataflow,B=a.mark.source;P.pulse(B,P.changeset().encode(a,A))}return void 0!==j?j:a},modify:function vega_functions_module_modify(a,A,j,P,B,q){var ne,ie,oe=this.context.dataflow,se=this.context.data[a],le=se.input,he=oe.stamp(),pe=se.changes;if(!1===oe._trigger||!(le.value.length||A||P))return 0;if((!pe||pe.stamp<he)&&(se.changes=pe=oe.changeset(),pe.stamp=he,oe.runAfter((function(){se.modified=!0,oe.pulse(le,pe).run()}),!0,1)),j&&(ne=!0===j?ve.ib:Object(ve.B)(j)||isTuple(j)?j:removePredicate(j),pe.remove(ne)),A&&pe.insert(A),P&&(ne=removePredicate(P),le.value.some(ne)?pe.remove(ne):pe.insert(P)),B)for(ie in q)pe.modify(B,ie,q[ie]);return 1}},kd=["view","item","group","xy","x","y"],Od={},Ed={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:function globalvar(a){return"_[".concat(Object(ve.bb)("$"+a),"]")},functions:function buildFunctions(a){var A=Functions(a);for(var j in kd.forEach((function(a){return A[a]="event.vega."+a})),_d)A[j]="this."+j;return Object(ve.p)(A,internalScaleFunctions(a,_d,Od)),A},constants:Wc,visitors:Od},Cd=vega_expression_module_codegen(Ed);function expressionFunction(a,A,j){return 1===arguments.length?_d[a]:(_d[a]=A,j&&(Od[a]=j),Cd&&(Cd.functions[a]="this."+a),this)}function vega_functions_module_parser(a,A){var j,P={};try{j=parser(a=Object(ve.J)(a)?a:Object(ve.bb)(a)+"")}catch(q){Object(ve.o)("Expression parse error: "+a)}j.visit((function(a){if("CallExpression"===a.type){var j=a.callee.name,B=Ed.visitors[j];B&&B(j,a.arguments,A,P)}}));var B=Cd(j);return B.globals.forEach((function(a){var j="$"+a;!Object(ve.w)(P,j)&&A.getSignal(a)&&(P[j]=A.signalRef(a))})),{$expr:Object(ve.p)({code:B.code},A.options.ast?{ast:j}:null),$fields:B.fields,$params:P}}expressionFunction("bandwidth",(function vega_functions_module_bandwidth(a,A){var j=vega_functions_module_getScale(a,(A||this).context);return j&&j.bandwidth?j.bandwidth():0}),scaleVisitor),expressionFunction("copy",(function vega_functions_module_copy(a,A){var j=vega_functions_module_getScale(a,(A||this).context);return j?j.copy():void 0}),scaleVisitor),expressionFunction("domain",(function vega_functions_module_domain(a,A){var j=vega_functions_module_getScale(a,(A||this).context);return j?j.domain():[]}),scaleVisitor),expressionFunction("range",(function vega_functions_module_range(a,A){var j=vega_functions_module_getScale(a,(A||this).context);return j&&j.range?j.range():[]}),scaleVisitor),expressionFunction("invert",(function vega_functions_module_invert(a,A,j){var P=vega_functions_module_getScale(a,(j||this).context);return P?Object(ve.B)(A)?(P.invertRange||P.invert)(A):(P.invert||P.invertExtent)(A):void 0}),scaleVisitor),expressionFunction("scale",(function vega_functions_module_scale(a,A,j){var P=vega_functions_module_getScale(a,(j||this).context);return P?P(A):void 0}),scaleVisitor),expressionFunction("gradient",(function scaleGradient(a,A,j,P,B){a=vega_functions_module_getScale(a,(B||this).context);var q=Gradient(A,j),ne=a.domain(),ie=ne[0],oe=Object(ve.W)(ne),se=ve.y;return oe-ie?se=scaleFraction(a,ie,oe):a=(a.interpolator?vega_scale_module_scale("sequential")().interpolator(a.interpolator()):vega_scale_module_scale("linear")().interpolate(a.interpolate()).range(a.range())).domain([ie=0,oe=1]),a.ticks&&(ie!==(ne=a.ticks(+P||15))[0]&&ne.unshift(ie),oe!==Object(ve.W)(ne)&&ne.push(oe)),ne.forEach((function(A){return q.stop(se(A),a(A))})),q}),scaleVisitor),expressionFunction("geoArea",ed,scaleVisitor),expressionFunction("geoBounds",nd,scaleVisitor),expressionFunction("geoCentroid",cd,scaleVisitor),expressionFunction("geoShape",(function geoShape(a,A,j){var P=vega_functions_module_getScale(a,(j||this).context);return function(a){return P?P.path.context(a)(A):""}}),scaleVisitor),expressionFunction("indata",(function indata(a,A,j){var P=this.context.data[a]["index:"+A],B=P?P.value.get(j):void 0;return B?B.count:B}),(function indataVisitor(a,A,j,P){"Literal"!==A[0].type&&Object(ve.o)("First argument to indata must be a string literal."),"Literal"!==A[1].type&&Object(ve.o)("Second argument to indata must be a string literal.");var B=A[0].value,q=A[1].value,ne="@"+q;Object(ve.w)(ne,P)||(P[ne]=j.getData(B).indataRef(j,q))})),expressionFunction("data",vega_functions_module_data,dataVisitor),expressionFunction("treePath",(function treePath(a,A,j){var P=treeNodes(a,this),B=P[A],q=P[j];return B&&q?B.path(q).map(dd):void 0}),dataVisitor),expressionFunction("treeAncestors",(function treeAncestors(a,A){var j=treeNodes(a,this)[A];return j?j.ancestors().map(dd):void 0}),dataVisitor),expressionFunction("vlSelectionTest",(function selectionTest(a,A,j){for(var P,B,q,ne,ie,oe=this.context.data[a],se=oe?oe.values.value:[],le=oe?oe["index:unit"]&&oe["index:unit"].value:void 0,he="intersect"===j,pe=se.length,ge=0;ge<pe;++ge)if(P=se[ge],le&&he){if(-1===(q=(B=B||{})[ne=P.unit]||0))continue;if(ie=testPoint(A,P),B[ne]=ie?-1:++q,ie&&1===le.size)return!0;if(!ie&&q===le.get(ne).count)return!1}else if(he^(ie=testPoint(A,P)))return ie;return pe&&he}),selectionVisitor),expressionFunction("vlSelectionIdTest",(function selectionIdTest(a,A,j){var P=this.context.data[a],B=P?P.values.value:[],q=P?P["index:unit"]&&P["index:unit"].value:void 0,ne="intersect"===j,ie=Uf(A),oe=qf(B,ie);if(oe===B.length)return!1;if(Uf(B[oe])!==ie)return!1;if(q&&ne){if(1===q.size)return!0;if(Wf(B,ie)-oe<q.size)return!1}return!0}),selectionVisitor),expressionFunction("vlSelectionResolve",(function selectionResolve(a,A,j,P){for(var B,q,ne,ie,oe,se,le,he,pe,ge,me,ye=this.context.data[a],_e=ye?ye.values.value:[],we={},ke={},Oe={},Se=_e.length,Te=0;Te<Se;++Te){for(ie=(B=_e[Te]).unit,q=B.fields,ne=B.values,ge=0,me=q.length;ge<me;++ge)oe=q[ge],le=(se=we[oe.field]||(we[oe.field]={}))[ie]||(se[ie]=[]),Oe[oe.field]=he=oe.type.charAt(0),pe=Vf[he+"_union"],se[ie]=pe(le,Object(ve.i)(ne[ge]));j&&(le=ke[ie]||(ke[ie]=[])).push(Object(ve.i)(ne).reduce((function(a,A,j){return a[q[j].field]=A,a}),{}))}return A=A||"union",Object.keys(we).forEach((function(a){we[a]=Object.keys(we[a]).map((function(A){return we[a][A]})).reduce((function(j,P){return void 0===j?P:Vf[Oe[a]+"_"+A](j,P)}))})),_e=Object.keys(ke),j&&_e.length&&(we[P?"vlPoint":"vlMulti"]="union"===A?Object(wt.a)({},"or",_e.reduce((function(a,A){return a.push.apply(a,Object(xt.a)(ke[A])),a}),[])):Object(wt.a)({},"and",_e.map((function(a){return Object(wt.a)({},"or",ke[a])})))),we}),selectionVisitor),expressionFunction("vlSelectionTuples",(function selectionTuples(a,A){return a.map((function(a){return Object(ve.p)({values:A.fields.map((function(A){return(A.getter||(A.getter=Object(ve.u)(A.field)))(a.datum)}))},A)}))}));var Dd=Object(ve.fb)(["rule"]),Ad=Object(ve.fb)(["group","image","rect"]);function canonicalType(a){return(a+"").toLowerCase()}function expression(a,A,j){";"!==j[j.length-1]&&(j="return("+j+");");var P=Function.apply(void 0,Object(xt.a)(A.concat(j)));return a&&a.functions?P.bind(a.functions):P}var jd={operator:function operator(a,A){return expression(a,["_"],A.code)},parameter:function parameter(a,A){return expression(a,["datum","_"],A.code)},event:function event(a,A){return expression(a,["event"],A.code)},handler:function handler(a,A){return expression(a,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(A.code,";"))},encode:function encode(a,A){var j=A.marktype,P=A.channels,B="var o=item,datum=o.datum,m=0,$;";for(var q in P){var ne="o["+Object(ve.bb)(q)+"]";B+="$=".concat(P[q].code,";if(").concat(ne,"!==$)").concat(ne,"=$,m=1;")}return B+=function adjustSpatial(a,A){var j="";return Dd[A]||(a.x2&&(a.x?(Ad[A]&&(j+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),j+="o.width=o.x2-o.x;"):j+="o.x=o.x2-(o.width||0);"),a.xc&&(j+="o.x=o.xc-(o.width||0)/2;"),a.y2&&(a.y?(Ad[A]&&(j+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),j+="o.height=o.y2-o.y;"):j+="o.y=o.y2-(o.height||0);"),a.yc&&(j+="o.y=o.yc-(o.height||0)/2;")),j}(P,j),expression(a,["item","_"],B+="return m;")},codegen:{get:function get(a){var A="[".concat(a.map(ve.bb).join("]["),"]"),get=Function("_","return _".concat(A,";"));return get.path=A,get},comparator:function comparator(a,A){var j,P=Function("a","b","var u, v; return "+a.map((function map(a,P){var B,q,ne=A[P];return a.path?(B="a".concat(a.path),q="b".concat(a.path)):((j=j||{})["f"+P]=a,B="this.f".concat(P,"(a)"),q="this.f".concat(P,"(b)")),function _compare(a,A,j,P){return"((u = ".concat(a,") < (v = ").concat(A,") || u == null) && v != null ? ").concat(j,"\n  : (u > v || v == null) && u != null ? ").concat(P,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(j,"\n  : v !== v && u === u ? ").concat(P," : ")}(B,q,-ne,ne)})).join("")+"0;");return j?P.bind(j):P}}};function parseParameter(a,A,j){if(!a||!Object(ve.H)(a))return a;for(var P,B=0,q=Md.length;B<q;++B)if(P=Md[B],Object(ve.w)(a,P.key))return P.parse(a,A,j);return a}var Md=[{key:"$ref",parse:function getOperator(a,A){return A.get(a.$ref)||Object(ve.o)("Operator not defined: "+a.$ref)}},{key:"$key",parse:function getKey(a,A){var j="k:"+a.$key+"_"+!!a.$flat;return A.fn[j]||(A.fn[j]=Object(ve.K)(a.$key,a.$flat,A.expr.codegen))}},{key:"$expr",parse:function getExpression(a,A,j){a.$params&&A.parseParameters(a.$params,j);var P="e:"+a.$expr.code+"_"+a.$name;return A.fn[P]||(A.fn[P]=Object(ve.f)(A.parameterExpression(a.$expr),a.$fields,a.$name))}},{key:"$field",parse:function vega_runtime_module_getField(a,A){if(!a.$field)return null;var j="f:"+a.$field+"_"+a.$name;return A.fn[j]||(A.fn[j]=Object(ve.u)(a.$field,a.$name,A.expr.codegen))}},{key:"$encode",parse:function getEncode(a,A){var j=a.$encode,P={};for(var B in j){var q=j[B];P[B]=Object(ve.f)(A.encodeExpression(q.$expr),q.$fields),P[B].output=q.$output}return P}},{key:"$compare",parse:function getCompare(a,A){var j="c:"+a.$compare+"_"+a.$order,P=Object(ve.i)(a.$compare).map((function(a){return a&&a.$tupleid?tupleid:a}));return A.fn[j]||(A.fn[j]=Object(ve.l)(P,a.$order,A.expr.codegen))}},{key:"$context",parse:function vega_runtime_module_getContext(a,A){return A}},{key:"$subflow",parse:function getSubflow(a,A){var j=a.$subflow;return function(a,P,B){var q=A.fork().parse(j),ne=q.get(j.operators[0].id),ie=q.signals.parent;return ie&&ie.set(B),ne.detachSubflow=function(){return A.detach(q)},ne}}},{key:"$tupleid",parse:function getTupleId(){return tupleid}}];var Ld={skip:!0};function vega_runtime_module_context(a,A,j,P){return new Context(a,A,j,P)}function Context(a,A,j,P){this.dataflow=a,this.transforms=A,this.events=a.events.bind(a),this.expr=P||jd,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},j&&(this.functions=Object.create(j),this.functions.context=this)}function Subcontext(a){this.dataflow=a.dataflow,this.transforms=a.transforms,this.events=a.events,this.expr=a.expr,this.signals=Object.create(a.signals),this.scales=Object.create(a.scales),this.nodes=Object.create(a.nodes),this.data=Object.create(a.data),this.fn=Object.create(a.fn),a.functions&&(this.functions=Object.create(a.functions),this.functions.context=this)}Context.prototype=Subcontext.prototype={fork:function fork(){var a=new Subcontext(this);return(this.subcontext||(this.subcontext=[])).push(a),a},detach:function detach(a){this.subcontext=this.subcontext.filter((function(A){return A!==a}));for(var A=Object.keys(a.nodes),j=0,P=A;j<P.length;j++){var B=P[j];a.nodes[B]._targets=null}for(var q=0,ne=A;q<ne.length;q++){var ie=ne[q];a.nodes[ie].detach()}a.nodes=null},get:function get(a){return this.nodes[a]},set:function set(a,A){return this.nodes[a]=A},add:function add(a,A){var j=this,P=j.dataflow,B=a.value;if(j.set(a.id,A),function isCollect(a){return"collect"===canonicalType(a)}(a.type)&&B&&(B.$ingest?P.ingest(A,B.$ingest,B.$format):B.$request?P.preload(A,B.$request,B.$format):P.pulse(A,P.changeset().insert(B))),a.root&&(j.root=A),a.parent){var q=j.get(a.parent.$ref);q?(P.connect(q,[A]),A.targets().add(q)):(j.unresolved=j.unresolved||[]).push((function(){q=j.get(a.parent.$ref),P.connect(q,[A]),A.targets().add(q)}))}if(a.signal&&(j.signals[a.signal]=A),a.scale&&(j.scales[a.scale]=A),a.data){var ne=function _loop(P){var B=j.data[P]||(j.data[P]={});a.data[P].forEach((function(a){return B[a]=A}))};for(var ie in a.data)ne(ie)}},resolve:function resolve(){return(this.unresolved||[]).forEach((function(a){return a()})),delete this.unresolved,this},operator:function operator(a,A){this.add(a,this.dataflow.add(a.value,A))},transform:function transform(a,A){this.add(a,this.dataflow.add(this.transforms[canonicalType(A)]))},stream:function stream(a,A){this.set(a.id,A)},update:function update(a,A,j,P,B){this.dataflow.on(A,j,P,B,a.options)},operatorExpression:function operatorExpression(a){return this.expr.operator(this,a)},parameterExpression:function parameterExpression(a){return this.expr.parameter(this,a)},eventExpression:function eventExpression(a){return this.expr.event(this,a)},handlerExpression:function handlerExpression(a){return this.expr.handler(this,a)},encodeExpression:function encodeExpression(a){return this.expr.encode(this,a)},parse:function vega_runtime_module_parse(a){var A=this,j=a.operators||[];return a.background&&(A.background=a.background),a.eventConfig&&(A.eventConfig=a.eventConfig),a.locale&&(A.locale=a.locale),j.forEach((function(a){return A.parseOperator(a)})),j.forEach((function(a){return A.parseOperatorParameters(a)})),(a.streams||[]).forEach((function(a){return A.parseStream(a)})),(a.updates||[]).forEach((function(a){return A.parseUpdate(a)})),A.resolve()},parseOperator:function parseOperator(a){!function isOperator(a){return"operator"===canonicalType(a)}(a.type)&&a.type?this.transform(a,a.type):this.operator(a,a.update?this.operatorExpression(a.update):null)},parseOperatorParameters:function parseOperatorParameters(a){if(a.params){var A=this.get(a.id);A||Object(ve.o)("Invalid operator id: "+a.id),this.dataflow.connect(A,A.parameters(this.parseParameters(a.params),a.react,a.initonly))}},parseParameters:function parseParameters(a,A){A=A||{};var j=this;for(var P in a){var B=a[P];A[P]=Object(ve.B)(B)?B.map((function(a){return parseParameter(a,j,A)})):parseParameter(B,j,A)}return A},parseStream:function parseStream(a){var A,j=this,P=null!=a.filter?j.eventExpression(a.filter):void 0,B=null!=a.stream?j.get(a.stream):void 0;a.source?B=j.events(a.source,a.type,P):a.merge&&(B=(A=a.merge.map((function(a){return j.get(a)})))[0].merge.apply(A[0],A.slice(1))),a.between&&(A=a.between.map((function(a){return j.get(a)})),B=B.between(A[0],A[1])),a.filter&&(B=B.filter(P)),null!=a.throttle&&(B=B.throttle(+a.throttle)),null!=a.debounce&&(B=B.debounce(+a.debounce)),null==B&&Object(ve.o)("Invalid stream definition: "+JSON.stringify(a)),a.consume&&B.consume(!0),j.stream(a,B)},parseUpdate:function parseUpdate(a){var A,j=Object(ve.H)(j=a.source)?j.$ref:j,P=this.get(j),B=a.update,q=void 0;P||Object(ve.o)("Source not defined: "+a.source),A=a.target&&a.target.$expr?this.eventExpression(a.target.$expr):this.get(a.target),B&&B.$expr&&(B.$params&&(q=this.parseParameters(B.$params)),B=this.handlerExpression(B.$expr)),this.update(a,P,A,B,q)},getState:function getState(a){var A=this,j={};if(a.signals){var P=j.signals={};Object.keys(A.signals).forEach((function(j){var B=A.signals[j];a.signals(j,B)&&(P[j]=B.value)}))}if(a.data){var B=j.data={};Object.keys(A.data).forEach((function(j){var P=A.data[j];a.data(j,P)&&(B[j]=P.input.value)}))}return A.subcontext&&!1!==a.recurse&&(j.subcontext=A.subcontext.map((function(A){return A.getState(a)}))),j},setState:function setState(a){var A=this,j=A.dataflow,P=a.data,B=a.signals;Object.keys(B||{}).forEach((function(a){j.update(A.signals[a],B[a],Ld)})),Object.keys(P||{}).forEach((function(a){j.pulse(A.data[a].input,j.changeset().remove(ve.ib).insert(P[a]))})),(a.subcontext||[]).forEach((function(a,j){var P=A.subcontext[j];P&&P.setState(a)}))}};function ariaLabel(a,A){a&&(null==A?a.removeAttribute("aria-label"):a.setAttribute("aria-label",A))}function setCursor(a,A){var j=a.globalCursor()?"undefined"!==typeof document&&document.body:a.container();if(j)return null==A?j.style.removeProperty("cursor"):j.style.cursor=A}function dataref(a,A){var j=a._runtime.data;return Object(ve.w)(j,A)||Object(ve.o)("Unrecognized data set: "+A),j[A]}function change(a,A){isChangeSet(A)||Object(ve.o)("Second argument to changes must be a changeset.");var j=dataref(this,a);return j.modified=!0,this.pulse(j.input,A)}function vega_view_module_width(a){var A=a.padding();return Math.max(0,a._viewWidth+A.left+A.right)}function vega_view_module_height(a){var A=a.padding();return Math.max(0,a._viewHeight+A.top+A.bottom)}function vega_view_module_offset(a){var A=a.padding(),j=a._origin;return[A.left+j[0],A.top+j[1]]}function resizeRenderer(a){var A=vega_view_module_offset(a),j=vega_view_module_width(a),P=vega_view_module_height(a);a._renderer.background(a.background()),a._renderer.resize(j,P,A),a._handler.origin(A),a._resizeListeners.forEach((function(A){try{A(j,P)}catch(B){a.error(B)}}))}function eventExtend(a,A,j){var P,B,q=a._renderer,ne=q&&q.canvas();return ne&&(B=vega_view_module_offset(a),(P=vega_scenegraph_module_point(A.changedTouches?A.changedTouches[0]:A,ne))[0]-=B[0],P[1]-=B[1]),A.dataflow=a,A.item=j,A.vega=function extension(a,A,j){var P=A?"group"===A.mark.marktype?A:A.mark.group:null;function group(a){var j,B=P;if(a)for(j=A;j;j=j.mark.group)if(j.mark.name===a){B=j;break}return B&&B.mark&&B.mark.interactive?B:{}}function xy(a){if(!a)return j;Object(ve.J)(a)&&(a=group(a));for(var A=j.slice();a;)A[0]-=a.x||0,A[1]-=a.y||0,a=a.mark&&a.mark.group;return A}return{view:Object(ve.m)(a),item:Object(ve.m)(A||{}),group:group,xy:xy,x:function x(a){return xy(a)[0]},y:function y(a){return xy(a)[1]}}}(a,j,P),A}var Id={trap:!1};function trackEventListener(a,A,j,P){a._eventListeners.push({type:j,sources:Object(ve.i)(A),handler:P})}function permit(a,A,j){var P=a._eventConfig&&a._eventConfig[A];return!(!1===P||Object(ve.H)(P)&&!P[j])||(a.warn("Blocked ".concat(A," ").concat(j," event listener.")),!1)}function itemFilter(a){return a.item}function markTarget(a){return a.item.mark.source}function invoke(a){return function(A,j){return j.vega.view().changeset().encode(j.item,a)}}function vega_view_module_element(a,A,j){var P=document.createElement(a);for(var B in A)P.setAttribute(B,A[B]);return null!=j&&(P.textContent=j),P}function vega_view_module_target(a,A,j,P){var B=j.event||"input",q=function handler(){return a.update(A.value)};P.signal(j.signal,A.value),A.addEventListener(B,q),trackEventListener(P,A,B,q),a.set=function(a){A.value=a,A.dispatchEvent(function vega_view_module_event(a){return"undefined"!==typeof Event?new Event(a):{type:a}}(B))}}function vega_view_module_generate(a,A,j,P){var B=P.signal(j.signal),q=vega_view_module_element("div",{class:"vega-bind"}),ne="radio"===j.input?q:q.appendChild(vega_view_module_element("label"));ne.appendChild(vega_view_module_element("span",{class:"vega-bind-name"},j.name||j.signal)),A.appendChild(q);var ie=vega_view_module_form;switch(j.input){case"checkbox":ie=vega_view_module_checkbox;break;case"select":ie=vega_view_module_select;break;case"radio":ie=vega_view_module_radio;break;case"range":ie=vega_view_module_range}ie(a,ne,j,B)}function vega_view_module_form(a,A,j,P){var B=vega_view_module_element("input");for(var q in j)"signal"!==q&&"element"!==q&&B.setAttribute("input"===q?"type":q,j[q]);B.setAttribute("name",j.signal),B.value=P,A.appendChild(B),B.addEventListener("input",(function(){return a.update(B.value)})),a.elements=[B],a.set=function(a){return B.value=a}}function vega_view_module_checkbox(a,A,j,P){var B={type:"checkbox",name:j.signal};P&&(B.checked=!0);var q=vega_view_module_element("input",B);A.appendChild(q),q.addEventListener("change",(function(){return a.update(q.checked)})),a.elements=[q],a.set=function(a){return q.checked=!!a||null}}function vega_view_module_select(a,A,j,P){var B=vega_view_module_element("select",{name:j.signal}),q=j.labels||[];j.options.forEach((function(a,A){var j={value:a};valuesEqual(a,P)&&(j.selected=!0),B.appendChild(vega_view_module_element("option",j,(q[A]||a)+""))})),A.appendChild(B),B.addEventListener("change",(function(){a.update(j.options[B.selectedIndex])})),a.elements=[B],a.set=function(a){for(var A=0,P=j.options.length;A<P;++A)if(valuesEqual(j.options[A],a))return void(B.selectedIndex=A)}}function vega_view_module_radio(a,A,j,P){var B=vega_view_module_element("span",{class:"vega-bind-radio"}),q=j.labels||[];A.appendChild(B),a.elements=j.options.map((function(A,ne){var ie={type:"radio",name:j.signal,value:A};valuesEqual(A,P)&&(ie.checked=!0);var oe=vega_view_module_element("input",ie);oe.addEventListener("change",(function(){return a.update(A)}));var se=vega_view_module_element("label",{},(q[ne]||A)+"");return se.prepend(oe),B.appendChild(se),oe})),a.set=function(A){for(var j=a.elements,P=j.length,B=0;B<P;++B)valuesEqual(j[B].value,A)&&(j[B].checked=!0)}}function vega_view_module_range(a,A,j,P){P=void 0!==P?P:(+j.max+ +j.min)/2;var B=null!=j.max?j.max:Math.max(100,+P)||100,q=j.min||Math.min(0,B,+P)||0,ne=j.step||Object(Qt.c)(q,B,100),ie=vega_view_module_element("input",{type:"range",name:j.signal,min:q,max:B,step:ne});ie.value=P;var oe=vega_view_module_element("span",{},+P);A.appendChild(ie),A.appendChild(oe);var se=function update(){oe.textContent=ie.value,a.update(+ie.value)};ie.addEventListener("input",se),ie.addEventListener("change",se),a.elements=[ie],a.set=function(a){ie.value=a,oe.textContent=a}}function valuesEqual(a,A){return a===A||a+""===A+""}function initializeRenderer(a,A,j,P,B,q){return(A=A||new P(a.loader())).initialize(j,vega_view_module_width(a),vega_view_module_height(a),vega_view_module_offset(a),B,q).background(a.background())}function trap(a,A){return A?function(){try{A.apply(this,arguments)}catch(j){a.error(j)}}:null}function vega_view_module_lookup(a,A,j){if("string"===typeof A){if("undefined"===typeof document)return a.error("DOM document instance not found."),null;if(!(A=document.querySelector(A)))return a.error("Signal bind element not found: "+A),null}if(A&&j)try{A.innerHTML=""}catch(P){A=null,a.error(P)}return A}var Nd=function number(a){return+a||0};function _padding(a){return Object(ve.H)(a)?{top:Nd(a.top),bottom:Nd(a.bottom),left:Nd(a.left),right:Nd(a.right)}:function paddingObject(a){return{top:a,bottom:a,left:a,right:a}}(Nd(a))}function renderHeadless(a,A,j,P){return _renderHeadless.apply(this,arguments)}function _renderHeadless(){return(_renderHeadless=Object(we.a)(_e.a.mark((function _callee2(a,A,j,P){var B,q;return _e.a.wrap((function _callee2$(ne){for(;;)switch(ne.prev=ne.next){case 0:return B=renderModule(A),(q=B&&B.headless)||Object(ve.o)("Unrecognized renderer type: "+A),ne.next=4,a.runAsync();case 4:return ne.abrupt("return",initializeRenderer(a,null,null,q,j,P).renderAsync(a._scenegraph.root));case 5:case"end":return ne.stop()}}),_callee2)})))).apply(this,arguments)}function _renderToImageURL(){return(_renderToImageURL=Object(we.a)(_e.a.mark((function _callee3(a,A){var j;return _e.a.wrap((function _callee3$(P){for(;;)switch(P.prev=P.next){case 0:return a!==qo.Canvas&&a!==qo.SVG&&a!==qo.PNG&&Object(ve.o)("Unrecognized image type: "+a),P.next=3,renderHeadless(this,a,A);case 3:return j=P.sent,P.abrupt("return",a===qo.SVG?toBlobURL(j.svg(),"image/svg+xml"):j.canvas().toDataURL("image/png"));case 5:case"end":return P.stop()}}),_callee3,this)})))).apply(this,arguments)}function toBlobURL(a,A){var j=new Blob([a],{type:A});return window.URL.createObjectURL(j)}function _renderToCanvas(){return(_renderToCanvas=Object(we.a)(_e.a.mark((function _callee4(a,A){var j;return _e.a.wrap((function _callee4$(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,renderHeadless(this,qo.Canvas,a,A);case 2:return j=P.sent,P.abrupt("return",j.canvas());case 4:case"end":return P.stop()}}),_callee4,this)})))).apply(this,arguments)}function _renderToSVG(){return(_renderToSVG=Object(we.a)(_e.a.mark((function _callee5(a){var A;return _e.a.wrap((function _callee5$(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,renderHeadless(this,qo.SVG,a);case 2:return A=j.sent,j.abrupt("return",A.svg());case 4:case"end":return j.stop()}}),_callee5,this)})))).apply(this,arguments)}var Bd={skip:!0};function viewWidth(a,A){var j=a.autosize(),P=a.padding();return A-(j&&"padding"===j.contains?P.left+P.right:0)}function viewHeight(a,A){var j=a.autosize(),P=a.padding();return A-(j&&"padding"===j.contains?P.top+P.bottom:0)}function dataTest(a,A){return A.modified&&Object(ve.B)(A.input.value)&&a.indexOf("_:vega:_")}function signalTest(a,A){return!("parent"===a||A instanceof Ue.proxy)}function vega_view_module_defaultTooltip(a,A,j,P){var B=a.element();B&&B.setAttribute("title",function formatTooltip(a){return null==a?"":Object(ve.B)(a)?formatArray(a):Object(ve.H)(a)&&!Object(ve.D)(a)?function formatObject(a){return Object.keys(a).map((function(A){var j=a[A];return A+": "+(Object(ve.B)(j)?formatArray(j):vega_view_module_formatValue(j))})).join("\n")}(a):a+""}(P))}function formatArray(a){return"["+a.map(vega_view_module_formatValue).join(", ")+"]"}function vega_view_module_formatValue(a){return Object(ve.B)(a)?"[\u2026]":Object(ve.H)(a)&&!Object(ve.D)(a)?"{\u2026}":a}function View(a,A){if(A=A||{},Dataflow.call(this),A.loader&&this.loader(A.loader),A.logger&&this.logger(A.logger),null!=A.logLevel&&this.logLevel(A.logLevel),A.locale||a.locale){var j=Object(ve.p)({},a.locale,A.locale);this.locale(Object(Oe.b)(j.number,j.time))}this._el=null,this._elBind=null,this._renderType=A.renderer||qo.Canvas,this._scenegraph=new Scenegraph;var P=this._scenegraph.root;this._renderer=null,this._tooltip=A.tooltip||vega_view_module_defaultTooltip,this._redraw=!0,this._handler=(new CanvasHandler).scene(P),this._globalCursor=!1,this._preventDefault=!1,this._timers=[],this._eventListeners=[],this._resizeListeners=[],this._eventConfig=function initializeEventConfig(a){var A=Object(ve.p)({defaults:{}},a),j=function unpack(a,A){A.forEach((function(A){Object(ve.B)(a[A])&&(a[A]=Object(ve.fb)(a[A]))}))};return j(A.defaults,["prevent","allow"]),j(A,["view","window","selector"]),A}(a.eventConfig),this.globalCursor(this._eventConfig.globalCursor);var B=function runtime(a,A,j){return vega_runtime_module_context(a,Ue,_d,j).parse(A)}(this,a,A.expr);this._runtime=B,this._signals=B.signals,this._bind=(a.bindings||[]).map((function(a){return{state:null,param:Object(ve.p)({},a)}})),B.root&&B.root.set(P),P.source=B.data.root.input,this.pulse(B.data.root.input,this.changeset().insert(P.items)),this._width=this.width(),this._height=this.height(),this._viewWidth=viewWidth(this,this._width),this._viewHeight=viewHeight(this,this._height),this._origin=[0,0],this._resize=0,this._autosize=1,function initializeResize(a){var A=a._signals,j=A.width,P=A.height,B=A.padding;function resetSize(){a._autosize=a._resize=1}a._resizeWidth=a.add(null,(function(A){a._width=A.size,a._viewWidth=viewWidth(a,A.size),resetSize()}),{size:j}),a._resizeHeight=a.add(null,(function(A){a._height=A.size,a._viewHeight=viewHeight(a,A.size),resetSize()}),{size:P});var q=a.add(null,resetSize,{pad:B});a._resizeWidth.rank=j.rank+1,a._resizeHeight.rank=P.rank+1,q.rank=B.rank+1}(this),function vega_view_module_background(a){a.add(null,(function(A){return a._background=A.bg,a._resize=1,A.bg}),{bg:a._signals.background})}(this),function vega_view_module_cursor(a){var A=a._signals.cursor||(a._signals.cursor=a.add({user:"default",item:null}));a.on(a.events("view","mousemove"),A,(function(a,j){var P=A.value,B=P?Object(ve.J)(P)?P:P.user:"default",q=j.item&&j.item.cursor||null;return P&&B===P.user&&q==P.item?P:{user:B,item:q}})),a.add(null,(function(A){var j=A.cursor,P=this.value;return Object(ve.J)(j)||(P=j.item,j=j.user),setCursor(a,j&&"default"!==j?j:P||j),P}),{cursor:A})}(this),this.description(a.description),A.hover&&this.hover(),A.container&&this.initialize(A.container,A.bind)}function lookupSignal(a,A){return Object(ve.w)(a._signals,A)?a._signals[A]:Object(ve.o)("Unrecognized signal name: "+Object(ve.bb)(A))}function findOperatorHandler(a,A){var j=(a._targets||[]).filter((function(a){return a._update&&a._update.handler===A}));return j.length?j[0]:null}function addOperatorListener(a,A,j,P){var B=findOperatorHandler(j,P);return B||((B=trap(a,(function(){return P(A,j.value)}))).handler=P,a.on(j,null,B)),a}function removeOperatorListener(a,A,j){var P=findOperatorHandler(A,j);return P&&A._targets.remove(P),a}Object(ve.z)(View,Dataflow,{evaluate:function evaluate(a,A,j){var P=this;return Object(we.a)(_e.a.mark((function _callee(){return _e.a.wrap((function _callee$(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,Dataflow.prototype.evaluate.call(P,a,A);case 2:if(!P._redraw&&!P._resize){B.next=14;break}if(B.prev=3,!P._renderer){B.next=8;break}return P._resize&&(P._resize=0,resizeRenderer(P)),B.next=8,P._renderer.renderAsync(P._scenegraph.root);case 8:P._redraw=!1,B.next=14;break;case 11:B.prev=11,B.t0=B.catch(3),P.error(B.t0);case 14:return j&&asyncCallback(P,j),B.abrupt("return",P);case 16:case"end":return B.stop()}}),_callee,null,[[3,11]])})))()},dirty:function dirty(a){this._redraw=!0,this._renderer&&this._renderer.dirty(a)},description:function description(a){if(arguments.length){var A=null!=a?a+"":null;return A!==this._desc&&ariaLabel(this._el,this._desc=A),this}return this._desc},container:function container(){return this._el},scenegraph:function scenegraph(){return this._scenegraph},origin:function origin(){return this._origin.slice()},signal:function signal(a,A,j){var P=lookupSignal(this,a);return 1===arguments.length?P.value:this.update(P,A,j)},width:function width(a){return arguments.length?this.signal("width",a):this.signal("width")},height:function height(a){return arguments.length?this.signal("height",a):this.signal("height")},padding:function padding(a){return arguments.length?this.signal("padding",_padding(a)):_padding(this.signal("padding"))},autosize:function autosize(a){return arguments.length?this.signal("autosize",a):this.signal("autosize")},background:function background(a){return arguments.length?this.signal("background",a):this.signal("background")},renderer:function renderer(a){return arguments.length?(renderModule(a)||Object(ve.o)("Unrecognized renderer type: "+a),a!==this._renderType&&(this._renderType=a,this._resetRenderer()),this):this._renderType},tooltip:function tooltip(a){return arguments.length?(a!==this._tooltip&&(this._tooltip=a,this._resetRenderer()),this):this._tooltip},loader:function loader(a){return arguments.length?(a!==this._loader&&(Dataflow.prototype.loader.call(this,a),this._resetRenderer()),this):this._loader},resize:function resize(){return this._autosize=1,this.touch(lookupSignal(this,"autosize"))},_resetRenderer:function _resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function resizeView(a,A,j,P,B,q){this.runAfter((function(ne){var ie=0;ne._autosize=0,ne.width()!==j&&(ie=1,ne.signal("width",j,Bd),ne._resizeWidth.skip(!0)),ne.height()!==P&&(ie=1,ne.signal("height",P,Bd),ne._resizeHeight.skip(!0)),ne._viewWidth!==a&&(ne._resize=1,ne._viewWidth=a),ne._viewHeight!==A&&(ne._resize=1,ne._viewHeight=A),ne._origin[0]===B[0]&&ne._origin[1]===B[1]||(ne._resize=1,ne._origin=B),ie&&ne.run("enter"),q&&ne.runAfter((function(a){return a.resize()}))}),!1,1)},addEventListener:function addEventListener(a,A,j){var P=A;return j&&!1===j.trap||((P=trap(this,A)).raw=A),this._handler.on(a,P),this},removeEventListener:function removeEventListener(a,A){for(var j,P,B=this._handler.handlers(a),q=B.length;--q>=0;)if(P=B[q].type,j=B[q].handler,a===P&&(A===j||A===j.raw)){this._handler.off(P,j);break}return this},addResizeListener:function addResizeListener(a){var A=this._resizeListeners;return A.indexOf(a)<0&&A.push(a),this},removeResizeListener:function removeResizeListener(a){var A=this._resizeListeners,j=A.indexOf(a);return j>=0&&A.splice(j,1),this},addSignalListener:function addSignalListener(a,A){return addOperatorListener(this,a,lookupSignal(this,a),A)},removeSignalListener:function removeSignalListener(a,A){return removeOperatorListener(this,lookupSignal(this,a),A)},addDataListener:function addDataListener(a,A){return addOperatorListener(this,a,dataref(this,a).values,A)},removeDataListener:function removeDataListener(a,A){return removeOperatorListener(this,dataref(this,a).values,A)},globalCursor:function globalCursor(a){if(arguments.length){if(this._globalCursor!==!!a){var A=setCursor(this,null);this._globalCursor=!!a,A&&setCursor(this,A)}return this}return this._globalCursor},preventDefault:function preventDefault(a){return arguments.length?(this._preventDefault=a,this):this._preventDefault},timer:function vega_view_module_timer(a,A){this._timers.push(function(a,A,j){var P=new Timer,B=A;return null==A?(P.restart(a,A,j),P):(P._restart=P.restart,P.restart=function(a,A,j){A=+A,j=null==j?now():+j,P._restart((function tick(q){q+=B,P._restart(tick,B+=A,j),a(q)}),A,j)},P.restart(a,A,j),P)}((function tick(A){a({timestamp:Date.now(),elapsed:A})}),A))},events:function vega_view_module_events(a,A,j){var P,B=this,q=new EventStream(j),ne=function send(j,P){B.runAsync(null,(function(){"view"===a&&function prevent(a,A){var j=a._eventConfig.defaults,P=j.prevent,B=j.allow;return!1!==P&&!0!==B&&(!0===P||!1===B||(P?P[A]:B?!B[A]:a.preventDefault()))}(B,A)&&j.preventDefault(),q.receive(eventExtend(B,j,P))}))};if("timer"===a)permit(B,"timer",A)&&B.timer(ne,A);else if("view"===a)permit(B,"view",A)&&B.addEventListener(A,ne,Id);else if("window"===a?permit(B,"window",A)&&"undefined"!==typeof window&&(P=[window]):"undefined"!==typeof document&&permit(B,"selector",A)&&(P=document.querySelectorAll(a)),P){for(var ie=0,oe=P.length;ie<oe;++ie)P[ie].addEventListener(A,ne);trackEventListener(B,P,A,ne)}else B.warn("Can not resolve event source: "+a);return q},finalize:function finalize(){var a,A,j,P=this._tooltip,B=this._timers,q=this._eventListeners;for(a=B.length;--a>=0;)B[a].stop();for(a=q.length;--a>=0;)for(A=(j=q[a]).sources.length;--A>=0;)j.sources[A].removeEventListener(j.type,j.handler);return P&&P.call(this,this._handler,null,null,null),this},hover:function hover(a,A){return A=[A||"update",(a=[a||"hover"])[0]],this.on(this.events("view","mouseover",itemFilter),markTarget,invoke(a)),this.on(this.events("view","mouseout",itemFilter),markTarget,invoke(A)),this},data:function vega_view_module_data(a,A){return arguments.length<2?dataref(this,a).values.value:change.call(this,a,changeset().remove(ve.ib).insert(A))},change:change,insert:function vega_view_module_insert(a,A){return change.call(this,a,changeset().insert(A))},remove:function vega_view_module_remove(a,A){return change.call(this,a,changeset().remove(A))},scale:function vega_view_module_scale(a){var A=this._runtime.scales;return Object(ve.w)(A,a)||Object(ve.o)("Unrecognized scale or projection: "+a),A[a].value},initialize:function vega_view_module_initialize(a,A){var j=this,P=j._renderType,B=j._eventConfig.bind,q=renderModule(P);a=j._el=a?vega_view_module_lookup(j,a,!0):null,function initializeAria(a){var A=a.container();A&&(A.setAttribute("role","graphics-document"),A.setAttribute("aria-roleDescription","visualization"),ariaLabel(A,a.description()))}(j),q||j.error("Unrecognized renderer type: "+P);var ne=q.handler||CanvasHandler,ie=a?q.renderer:q.headless;return j._renderer=ie?initializeRenderer(j,j._renderer,a,ie):null,j._handler=function initializeHandler(a,A,j,P){var B=new P(a.loader(),trap(a,a.tooltip())).scene(a.scenegraph().root).initialize(j,vega_view_module_offset(a),a);return A&&A.handlers().forEach((function(a){B.on(a.type,a.handler)})),B}(j,j._handler,a,ne),j._redraw=!0,a&&"none"!==B&&(A=A?j._elBind=vega_view_module_lookup(j,A,!0):a.appendChild(vega_view_module_element("form",{class:"vega-bindings"})),j._bind.forEach((function(a){a.param.element&&"container"!==B&&(a.element=vega_view_module_lookup(j,a.param.element,!!a.param.input))})),j._bind.forEach((function(a){!function vega_view_module_bind(a,A,j){if(A){var P=j.param,B=j.state;return B||(B=j.state={elements:null,active:!1,set:null,update:function update(A){A!=a.signal(P.signal)&&a.runAsync(null,(function(){B.source=!0,a.signal(P.signal,A)}))}},P.debounce&&(B.update=Object(ve.n)(P.debounce,B.update))),(null==P.input&&P.element?vega_view_module_target:vega_view_module_generate)(B,A,P,a),B.active||(a.on(a._signals[P.signal],null,(function(){B.source?B.source=!1:B.set(a.signal(P.signal))})),B.active=!0),B}}(j,a.element||A,a)}))),j},toImageURL:function renderToImageURL(a,A){return _renderToImageURL.apply(this,arguments)},toCanvas:function renderToCanvas(a,A){return _renderToCanvas.apply(this,arguments)},toSVG:function renderToSVG(a){return _renderToSVG.apply(this,arguments)},getState:function vega_view_module_getState(a){return this._runtime.getState(a||{data:dataTest,signals:signalTest,recurse:!0})},setState:function vega_view_module_setState(a){return this.runAsync(null,(function(A){A._trigger=!1,A._runtime.setState(a)}),(function(a){a._trigger=!0})),this}});var zd,qd,Hd=/[[\]{}]/,Yd={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function eventSelector(a,A,j){return zd=A||"view",qd=j||Yd,parseMerge(a.trim()).map(parseSelector)}function vega_event_selector_module_find(a,A,j,P,B){for(var q,ne=a.length,ie=0;A<ne;++A){if(q=a[A],!ie&&q===j)return A;B&&B.indexOf(q)>=0?--ie:P&&P.indexOf(q)>=0&&++ie}return A}function parseMerge(a){for(var A=[],j=a.length,P=0,B=0;B<j;)B=vega_event_selector_module_find(a,B,",","[{","]}"),A.push(a.substring(P,B).trim()),P=++B;if(0===A.length)throw"Empty event selector: "+a;return A}function parseSelector(a){return"["===a[0]?function parseBetween(a){var A,j=a.length,P=1;if((P=vega_event_selector_module_find(a,P,"]","[","]"))===j)throw"Empty between selector: "+a;if(2!==(A=parseMerge(a.substring(1,P))).length)throw"Between selector must have two elements: "+a;if(">"!==(a=a.slice(P+1).trim())[0])throw"Expected '>' after between selector: "+a;A=A.map(parseSelector);var B=parseSelector(a.slice(1).trim());if(B.between)return{between:A,stream:B};B.between=A;return B}(a):function vega_event_selector_module_parseStream(a){var A,j,P={source:zd},B=[],q=[0,0],ne=0,ie=0,oe=a.length,se=0;if("}"===a[oe-1]){if(!((se=a.lastIndexOf("{"))>=0))throw"Unmatched right brace: "+a;try{q=function parseThrottle(a){var A=a.split(",");if(!a.length||A.length>2)throw a;return A.map((function(A){var j=+A;if(j!==j)throw a;return j}))}(a.substring(se+1,oe-1))}catch(le){throw"Invalid throttle specification: "+a}a=a.slice(0,se).trim(),oe=a.length,se=0}if(!oe)throw a;"@"===a[0]&&(ne=++se);(A=vega_event_selector_module_find(a,se,":"))<oe&&(B.push(a.substring(ie,A).trim()),ie=se=++A);if((se=vega_event_selector_module_find(a,se,"["))===oe)B.push(a.substring(ie,oe).trim());else if(B.push(a.substring(ie,se).trim()),j=[],(ie=++se)===oe)throw"Unmatched left bracket: "+a;for(;se<oe;){if((se=vega_event_selector_module_find(a,se,"]"))===oe)throw"Unmatched left bracket: "+a;if(j.push(a.substring(ie,se).trim()),se<oe-1&&"["!==a[++se])throw"Expected left bracket: "+a;ie=++se}if(!(oe=B.length)||Hd.test(B[oe-1]))throw"Invalid event selector: "+a;oe>1?(P.type=B[1],ne?P.markname=B[0].slice(1):!function isMarkType(a){return qd[a]}(B[0])?P.source=B[0]:P.marktype=B[0]):P.type=B[0];"!"===P.type.slice(-1)&&(P.consume=!0,P.type=P.type.slice(0,-1));null!=j&&(P.filter=j);q[0]&&(P.throttle=q[0]);q[1]&&(P.debounce=q[1]);return P}(a)}function parseAutosize(a){return Object(ve.H)(a)?a:{type:a||"pad"}}var $d=function number(a){return+a||0};function parsePadding(a){return Object(ve.H)(a)?a.signal?a:{top:$d(a.top),bottom:$d(a.bottom),left:$d(a.left),right:$d(a.right)}:function paddingObject(a){return{top:a,bottom:a,left:a,right:a}}($d(a))}var Zd=function encoder(a){return Object(ve.H)(a)&&!Object(ve.B)(a)?Object(ve.p)({},a):{value:a}};function addEncode(a,A,j,P){return null!=j?(Object(ve.H)(j)&&!Object(ve.B)(j)||Object(ve.B)(j)&&j.length&&Object(ve.H)(j[0])?a.update[A]=j:a[P||"enter"][A]={value:j},1):0}function addEncoders(a,A,j){for(var P in A)addEncode(a,P,A[P]);for(var B in j)addEncode(a,B,j[B],"update")}function extendEncode(a,A,j){for(var P in A)j&&Object(ve.w)(j,P)||(a[P]=Object(ve.p)(a[P]||{},A[P]));return a}function has(a,A){return A&&(A.enter&&A.enter[a]||A.update&&A.update[a])}function applyDefault(a,A,j){a[A]=j&&j.signal?{signal:j.signal}:{value:j}}var rh=function scaleRef(a){return Object(ve.J)(a)?Object(ve.bb)(a):a.signal?"(".concat(a.signal,")"):vega_parser_module_field(a)};function entry$1(a){if(null!=a.gradient)return function vega_parser_module_gradient(a){var A=[a.start,a.stop,a.count].map((function(a){return null==a?null:Object(ve.bb)(a)}));for(;A.length&&null==Object(ve.W)(A);)A.pop();return A.unshift(rh(a.gradient)),"gradient(".concat(A.join(","),")")}(a);var A=a.signal?"(".concat(a.signal,")"):a.color?function vega_parser_module_color(a){return a.c?ah("hcl",a.h,a.c,a.l):a.h||a.s?ah("hsl",a.h,a.s,a.l):a.l||a.a?ah("lab",a.l,a.a,a.b):a.r||a.g||a.b?ah("rgb",a.r,a.g,a.b):null}(a.color):null!=a.field?vega_parser_module_field(a.field):void 0!==a.value?Object(ve.bb)(a.value):void 0;return null!=a.scale&&(A=function vega_parser_module_scale(a,A){var j=rh(a.scale);null!=a.range?A="lerp(_range(".concat(j,"), ").concat(+a.range,")"):(void 0!==A&&(A="_scale(".concat(j,", ").concat(A,")")),a.band&&(A=(A?A+"+":"")+"_bandwidth(".concat(j,")")+(1===+a.band?"":"*"+vega_parser_module_property(a.band)),a.extra&&(A="(datum.extra ? _scale(".concat(j,", datum.extra.value) : ").concat(A,")"))),null==A&&(A="0"));return A}(a,A)),void 0===A&&(A=null),null!=a.exponent&&(A="pow(".concat(A,",").concat(vega_parser_module_property(a.exponent),")")),null!=a.mult&&(A+="*".concat(vega_parser_module_property(a.mult))),null!=a.offset&&(A+="+".concat(vega_parser_module_property(a.offset))),a.round&&(A="round(".concat(A,")")),A}var ah=function _color(a,A,j,P){return"(".concat(a,"(").concat([A,j,P].map(entry$1).join(","),")+'')")};function vega_parser_module_property(a){return Object(ve.H)(a)?"("+entry$1(a)+")":a}function vega_parser_module_field(a){return function resolveField(a){var A,j,P;if(a.signal)A="datum",P=a.signal;else if(a.group||a.parent){for(j=Math.max(1,a.level||1),A="item";j-- >0;)A+=".mark.group";a.parent?(P=a.parent,A+=".datum"):P=a.group}else a.datum?(A="datum",P=a.datum):Object(ve.o)("Invalid field reference: "+Object(ve.bb)(a));a.signal||(P=Object(ve.J)(P)?Object(ve.ab)(P).map(ve.bb).join("]["):resolveField(P));return A+"["+P+"]"}(Object(ve.H)(a)?a:{datum:a})}function parseEncode(a,A,j,P,B,q){var ne={};for(var ie in(q=q||{}).encoders={$encode:ne},a=function applyDefaults(a,A,j,P,B){var q,ne,ie,oe={},se={};for(ne in ne="lineBreak","text"!==A||null==B[ne]||has(ne,a)||applyDefault(oe,ne,B[ne]),("legend"==j||String(j).startsWith("axis"))&&(j=null),ie="frame"===j?B.group:"mark"===j?Object(ve.p)({},B.mark,B[A]):null)has(ne,a)||("fill"===ne||"stroke"===ne)&&(has("fill",a)||has("stroke",a))||applyDefault(oe,ne,ie[ne]);for(ne in Object(ve.i)(P).forEach((function(A){var j=B.style&&B.style[A];for(var P in j)has(P,a)||applyDefault(oe,P,j[P])})),a=Object(ve.p)({},a),oe)(ie=oe[ne]).signal?(q=q||{})[ne]=ie:se[ne]=ie;return a.enter=Object(ve.p)(se,a.enter),q&&(a.update=Object(ve.p)(q,a.update)),a}(a,A,j,P,B.config))ne[ie]=parseBlock(a[ie],A,q,B);return q}function parseBlock(a,A,j,P){var B,q={},ne={};for(var ie in a)null!=a[ie]&&(q[ie]=parse$1((B=a[ie],Object(ve.B)(B)?function vega_parser_module_rule(a){var A="";return a.forEach((function(a){var j=entry$1(a);A+=a.test?"(".concat(a.test,")?").concat(j,":"):j})),":"===Object(ve.W)(A)&&(A+="null"),A}(B):entry$1(B)),P,j,ne));return{$expr:{marktype:A,channels:q},$fields:Object.keys(ne),$output:Object.keys(a)}}function parse$1(a,A,j,P){var B=vega_functions_module_parser(a,A);return B.$fields.forEach((function(a){return P[a]=1})),Object(ve.p)(j,B.$params),B.$expr}var sh=["value","update","init","react","bind"];function outerError(a,A){Object(ve.o)(a+' for "outer" push: '+Object(ve.bb)(A))}function parseSignal(a,A){var j=a.name;if("outer"===a.push)A.signals[j]||outerError("No prior signal definition",j),sh.forEach((function(A){void 0!==a[A]&&outerError("Invalid property ",A)}));else{var P=A.addSignal(j,a.value);!1===a.react&&(P.react=!1),a.bind&&A.addBinding(j,a.bind)}}function Entry(a,A,j,P){this.id=-1,this.type=a,this.value=A,this.params=j,P&&(this.parent=P)}function vega_parser_module_entry(a,A,j,P){return new Entry(a,A,j,P)}function operator(a,A){return vega_parser_module_entry("operator",a,A)}function vega_parser_module_ref(a){var A={$ref:a.id};return a.id<0&&(a.refs=a.refs||[]).push(A),A}function fieldRef$1(a,A){return A?{$field:a,$name:A}:{$field:a}}var lh=fieldRef$1("key");function _compareRef(a,A){return{$compare:a,$order:A}}function aggrField(a,A){return(a&&a.signal?"$"+a.signal:a||"")+(a&&A?"_":"")+(A&&A.signal?"$"+A.signal:A||"")}function isSignal(a){return a&&a.signal}function hasSignal(a){if(isSignal(a))return!0;if(Object(ve.H)(a))for(var A in a)if(hasSignal(a[A]))return!0;return!1}function vega_parser_module_value(a,A){return null!=a?a:A}function deref(a){return a&&a.signal||a}function vega_parser_module_parseStream(a,A){return(a.merge?mergeStream:a.stream?nestedStream:a.type?eventStream:Object(ve.o)("Invalid stream specification: "+Object(ve.bb)(a)))(a,A)}function mergeStream(a,A){var j=streamParameters({merge:a.merge.map((function(a){return vega_parser_module_parseStream(a,A)}))},a,A);return A.addStream(j).id}function nestedStream(a,A){var j=streamParameters({stream:vega_parser_module_parseStream(a.stream,A)},a,A);return A.addStream(j).id}function eventStream(a,A){var j;"timer"===a.type?(j=A.event("timer",a.throttle),a={between:a.between,filter:a.filter}):j=A.event(function eventSource(a){return"scope"===a?"view":a||"view"}(a.source),a.type);var P=streamParameters({stream:j},a,A);return 1===Object.keys(P).length?j:A.addStream(P).id}function streamParameters(a,A,j){var P=A.between;return P&&(2!==P.length&&Object(ve.o)('Stream "between" parameter must have 2 entries: '+Object(ve.bb)(A)),a.between=[vega_parser_module_parseStream(P[0],j),vega_parser_module_parseStream(P[1],j)]),P=A.filter?[].concat(A.filter):[],(A.marktype||A.markname||A.markrole)&&P.push(function filterMark(a,A,j){var P="event.item";return P+(a&&"*"!==a?"&&"+P+".mark.marktype==='"+a+"'":"")+(j?"&&"+P+".mark.role==='"+j+"'":"")+(A?"&&"+P+".mark.name==='"+A+"'":"")}(A.marktype,A.markname,A.markrole)),"scope"===A.source&&P.push("inScope(event.item)"),P.length&&(a.filter=vega_functions_module_parser("("+P.join(")&&(")+")",j).$expr),null!=(P=A.throttle)&&(a.throttle=+P),null!=(P=A.debounce)&&(a.debounce=+P),A.consume&&(a.consume=!0),a}var ph={code:"_.$value",ast:{type:"Identifier",value:"value"}};function vega_parser_module_parseUpdate(a,A,j){var P=a.encode,B={target:j},q=a.events,ne=a.update,ie=[];q||Object(ve.o)("Signal update missing events specification."),Object(ve.J)(q)&&(q=eventSelector(q,A.isSubscope()?"scope":"view")),q=Object(ve.i)(q).filter((function(a){return a.signal||a.scale?(ie.push(a),0):1})),ie.length>1&&(ie=[mergeSources(ie)]),q.length&&ie.push(q.length>1?{merge:q}:q[0]),null!=P&&(ne&&Object(ve.o)("Signal encode and update are mutually exclusive."),ne="encode(item(),"+Object(ve.bb)(P)+")"),B.update=Object(ve.J)(ne)?vega_functions_module_parser(ne,A):null!=ne.expr?vega_functions_module_parser(ne.expr,A):null!=ne.value?ne.value:null!=ne.signal?{$expr:ph,$params:{$value:A.signalRef(ne.signal)}}:Object(ve.o)("Invalid signal update specification."),a.force&&(B.options={force:!0}),ie.forEach((function(a){return A.addUpdate(Object(ve.p)(function streamSource(a,A){return{source:a.signal?A.signalRef(a.signal):a.scale?A.scaleRef(a.scale):vega_parser_module_parseStream(a,A)}}(a,A),B))}))}function mergeSources(a){return{signal:"["+a.map((function(a){return a.scale?'scale("'+a.scale+'")':a.signal}))+"]"}}var mh=function transform(a){return function(A,j,P){return vega_parser_module_entry(a,j,A||void 0,P)}},bh=mh("aggregate"),_h=mh("axisticks"),kh=mh("bound"),Oh=mh("collect"),jh=mh("compare"),Ph=mh("datajoin"),qh=mh("encode"),Yh=mh("expression"),Qh=mh("facet"),ep=mh("field"),tp=mh("key"),np=mh("legendentries"),rp=mh("load"),ip=mh("mark"),ap=mh("multiextent"),op=mh("multivalues"),sp=mh("overlap"),up=mh("params"),lp=mh("prefacet"),cp=mh("projection"),fp=mh("proxy"),dp=mh("relay"),hp=mh("render"),pp=mh("scale"),gp=mh("sieve"),mp=mh("sortitems"),vp=mh("viewlayout"),yp=mh("values"),bp=0,_p={min:"min",max:"max",count:"sum"};function parseScale(a,A){var j,P=A.getScale(a.name).params;for(j in P.domain=parseScaleDomain(a.domain,a,A),null!=a.range&&(P.range=function parseScaleRange(a,A,j){var P=A.config.range,B=a.range;if(B.signal)return A.signalRef(B.signal);if(Object(ve.J)(B)){if(P&&Object(ve.w)(P,B))return a=Object(ve.p)({},a,{range:P[B]}),parseScaleRange(a,A,j);"width"===B?B=[0,{signal:"width"}]:"height"===B?B=isDiscrete(a.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(ve.o)("Unrecognized scale range value: "+Object(ve.bb)(B))}else{if(B.scheme)return j.scheme=Object(ve.B)(B.scheme)?parseArray(B.scheme,A):parseLiteral(B.scheme,A),B.extent&&(j.schemeExtent=parseArray(B.extent,A)),void(B.count&&(j.schemeCount=parseLiteral(B.count,A)));if(B.step)return void(j.rangeStep=parseLiteral(B.step,A));if(isDiscrete(a.type)&&!Object(ve.B)(B))return parseScaleDomain(B,a,A);Object(ve.B)(B)||Object(ve.o)("Unsupported range type: "+Object(ve.bb)(B))}return B.map((function(a){return(Object(ve.B)(a)?parseArray:parseLiteral)(a,A)}))}(a,A,P)),null!=a.interpolate&&function parseScaleInterpolate(a,A){A.interpolate=parseLiteral(a.type||a),null!=a.gamma&&(A.interpolateGamma=parseLiteral(a.gamma))}(a.interpolate,P),null!=a.nice&&(P.nice=function parseScaleNice(a){return Object(ve.H)(a)?{interval:parseLiteral(a.interval),step:parseLiteral(a.step)}:parseLiteral(a)}(a.nice)),null!=a.bins&&(P.bins=function parseScaleBins(a,A){return a.signal||Object(ve.B)(a)?parseArray(a,A):A.objectProperty(a)}(a.bins,A)),a)Object(ve.w)(P,j)||"name"===j||(P[j]=parseLiteral(a[j],A))}function parseLiteral(a,A){return Object(ve.H)(a)?a.signal?A.signalRef(a.signal):Object(ve.o)("Unsupported object: "+Object(ve.bb)(a)):a}function parseArray(a,A){return a.signal?A.signalRef(a.signal):a.map((function(a){return parseLiteral(a,A)}))}function dataLookupError(a){Object(ve.o)("Can not find data set: "+Object(ve.bb)(a))}function parseScaleDomain(a,A,j){if(a)return a.signal?j.signalRef(a.signal):(Object(ve.B)(a)?explicitDomain:a.fields?multipleDomain:singularDomain)(a,A,j);null==A.domainMin&&null==A.domainMax||Object(ve.o)("No scale domain defined for domainMin/domainMax to override.")}function explicitDomain(a,A,j){return a.map((function(a){return parseLiteral(a,j)}))}function singularDomain(a,A,j){var P=j.getData(a.data);return P||dataLookupError(a.data),isDiscrete(A.type)?P.valuesRef(j,a.field,parseSort(a.sort,!1)):isQuantile(A.type)?P.domainRef(j,a.field):P.extentRef(j,a.field)}function multipleDomain(a,A,j){var P=a.data,B=a.fields.reduce((function(a,A){return A=Object(ve.J)(A)?{data:P,field:A}:Object(ve.B)(A)||A.signal?function vega_parser_module_fieldRef(a,A){var j="_:vega:_"+bp++,P=Oh({});if(Object(ve.B)(a))P.value={$ingest:a};else if(a.signal){var B="setdata("+Object(ve.bb)(j)+","+a.signal+")";P.params.input=A.signalRef(B)}return A.addDataPipeline(j,[P,gp({})]),{data:j,field:"data"}}(A,j):A,a.push(A),a}),[]);return(isDiscrete(A.type)?ordinalMultipleDomain:isQuantile(A.type)?quantileMultipleDomain:numericMultipleDomain)(a,j,B)}function ordinalMultipleDomain(a,A,j){var P,B,q=parseSort(a.sort,!0),ne=j.map((function(a){var j=A.getData(a.data);return j||dataLookupError(a.data),j.countsRef(A,a.field,q)})),ie={groupby:lh,pulse:ne};q&&(P=q.op||"count",B=q.field?aggrField(P,q.field):"count",ie.ops=[_p[P]],ie.fields=[A.fieldRef(B)],ie.as=[B]),P=A.add(bh(ie));var oe=A.add(Oh({pulse:vega_parser_module_ref(P)}));return B=A.add(yp({field:lh,sort:A.sortRef(q),pulse:vega_parser_module_ref(oe)})),vega_parser_module_ref(B)}function parseSort(a,A){return a&&(a.field||a.op?a.field||"count"===a.op?A&&a.field&&a.op&&!_p[a.op]&&Object(ve.o)("Multiple domain scales can not be sorted using "+a.op):Object(ve.o)("No field provided for sort aggregate op: "+a.op):Object(ve.H)(a)?a.field="key":a={field:"key"}),a}function quantileMultipleDomain(a,A,j){var P=j.map((function(a){var j=A.getData(a.data);return j||dataLookupError(a.data),j.domainRef(A,a.field)}));return vega_parser_module_ref(A.add(op({values:P})))}function numericMultipleDomain(a,A,j){var P=j.map((function(a){var j=A.getData(a.data);return j||dataLookupError(a.data),j.extentRef(A,a.field)}));return vega_parser_module_ref(A.add(ap({extents:P})))}function parseParameter$1(a,A,j){return Object(ve.B)(a)?a.map((function(a){return parseParameter$1(a,A,j)})):Object(ve.H)(a)?a.signal?j.signalRef(a.signal):"fit"===A?a:Object(ve.o)("Unsupported parameter object: "+Object(ve.bb)(a)):a}var xp="value",wp=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],kp={name:1,style:1,interactive:1},Op={value:0},Sp={value:1};function guideGroup(a){return a.type="group",a.interactive=a.interactive||!1,a}function vega_parser_module_lookup(a,A){var j=function _(j,P){return vega_parser_module_value(a[j],vega_parser_module_value(A[j],P))};return j.isVertical=function(j){return"vertical"===vega_parser_module_value(a.direction,A.direction||(j?A.symbolDirection:A.gradientDirection))},j.gradientLength=function(){return vega_parser_module_value(a.gradientLength,A.gradientLength||A.gradientWidth)},j.gradientThickness=function(){return vega_parser_module_value(a.gradientThickness,A.gradientThickness||A.gradientHeight)},j.entryColumns=function(){return vega_parser_module_value(a.columns,vega_parser_module_value(A.columns,+j.isVertical(!0)))},j}function getEncoding(a,A){var j=A&&(A.update&&A.update[a]||A.enter&&A.enter[a]);return j&&j.signal?j:j?j.value:null}function anchorExpr(a,A,j){return"item.anchor === '".concat("start","' ? ").concat(a," : item.anchor === '").concat("end","' ? ").concat(A," : ").concat(j)}var Ep=anchorExpr(Object(ve.bb)("left"),Object(ve.bb)("right"),Object(ve.bb)("center"));function extendOffset(a,A){return A?a?Object(ve.H)(a)?Object.assign({},a,{offset:extendOffset(a.offset,A)}):{value:a,offset:A}:A:a}function guideMark(a,A){return A?(a.name=A.name,a.style=A.style||a.style,a.interactive=!!A.interactive,a.encode=extendEncode(a.encode,A,kp)):a.interactive=!1,a}function legendGradient(a,A,j,P){var B,q,ne,ie,oe,se=vega_parser_module_lookup(a,j),le=se.isVertical(),he=se.gradientThickness(),pe=se.gradientLength();le?(q=[0,1],ne=[0,0],ie=he,oe=pe):(q=[0,0],ne=[1,0],ie=pe,oe=he);var ge={enter:B={opacity:Op,x:Op,y:Op,width:Zd(ie),height:Zd(oe)},update:Object(ve.p)({},B,{opacity:Sp,fill:{gradient:A,start:q,stop:ne}}),exit:{opacity:Op}};return addEncoders(ge,{stroke:se("gradientStrokeColor"),strokeWidth:se("gradientStrokeWidth")},{opacity:se("gradientOpacity")}),guideMark({type:"rect",role:"legend-gradient",encode:ge},P)}function legendGradientDiscrete(a,A,j,P,B){var q,ne,ie,oe,se=vega_parser_module_lookup(a,j),le=se.isVertical(),he=se.gradientThickness(),pe=se.gradientLength(),ge="";le?(q="y",ie="y2",ne="x",oe="width",ge="1-"):(q="x",ie="x2",ne="y",oe="height");var me={opacity:Op,fill:{scale:A,field:xp}};me[q]={signal:ge+"datum.perc",mult:pe},me[ne]=Op,me[ie]={signal:ge+"datum.perc2",mult:pe},me[oe]=Zd(he);var ye={enter:me,update:Object(ve.p)({},me,{opacity:Sp}),exit:{opacity:Op}};return addEncoders(ye,{stroke:se("gradientStrokeColor"),strokeWidth:se("gradientStrokeWidth")},{opacity:se("gradientOpacity")}),guideMark({type:"rect",role:"legend-band",key:xp,from:B,encode:ye},P)}var Cp="datum.".concat("perc",'<=0?"').concat("left",'":datum.').concat("perc",'>=1?"').concat("right",'":"').concat("center",'"'),Tp="datum.".concat("perc",'<=0?"').concat("bottom",'":datum.').concat("perc",'>=1?"').concat("top",'":"').concat("middle",'"');function legendGradientLabels(a,A,j,P){var B,q,ne,ie,oe=vega_parser_module_lookup(a,A),se=oe.isVertical(),le=Zd(oe.gradientThickness()),he=oe.gradientLength(),pe=oe("labelOverlap"),ge="",me={enter:B={opacity:Op},update:q={opacity:Sp,text:{field:"label"}},exit:{opacity:Op}};return addEncoders(me,{fill:oe("labelColor"),fillOpacity:oe("labelOpacity"),font:oe("labelFont"),fontSize:oe("labelFontSize"),fontStyle:oe("labelFontStyle"),fontWeight:oe("labelFontWeight"),limit:vega_parser_module_value(a.labelLimit,A.gradientLabelLimit)}),se?(B.align={value:"left"},B.baseline=q.baseline={signal:Tp},ne="y",ie="x",ge="1-"):(B.align=q.align={signal:Cp},B.baseline={value:"top"},ne="x",ie="y"),B[ne]=q[ne]={signal:ge+"datum.perc",mult:he},B[ie]=q[ie]=le,le.offset=vega_parser_module_value(a.labelOffset,A.gradientLabelOffset)||0,pe=pe?{separation:oe("labelSeparation"),method:pe,order:"datum.index"}:void 0,guideMark({type:"text",role:"legend-label",style:"guide-label",key:xp,from:P,encode:me,overlap:pe},j)}function legendSymbolGroups(a,A,j,P,B){var q,ne,ie,oe,se,le=vega_parser_module_lookup(a,A),he=j.entries,pe=!(!he||!he.interactive),ge=he?he.name:void 0,me=le("clipHeight"),ve=le("symbolOffset"),ye={data:"value"},_e="(".concat(B,") ? datum.").concat("offset"," : datum.").concat("size"),we=me?Zd(me):{field:"size"},ke="datum.".concat("index"),Oe="max(1, ".concat(B,")");we.mult=.5,q={enter:ne={opacity:Op,x:{signal:_e,mult:.5,offset:ve},y:we},update:ie={opacity:Sp,x:ne.x,y:ne.y},exit:{opacity:Op}};var Se=null,Te=null;a.fill||(Se=A.symbolBaseFillColor,Te=A.symbolBaseStrokeColor),addEncoders(q,{fill:le("symbolFillColor",Se),shape:le("symbolType"),size:le("symbolSize"),stroke:le("symbolStrokeColor",Te),strokeDash:le("symbolDash"),strokeDashOffset:le("symbolDashOffset"),strokeWidth:le("symbolStrokeWidth")},{opacity:le("symbolOpacity")}),wp.forEach((function(A){a[A]&&(ie[A]=ne[A]={scale:a[A],field:xp})}));var Ae=guideMark({type:"symbol",role:"legend-symbol",key:xp,from:ye,clip:!!me||void 0,encode:q},j.symbols),je=Zd(ve);je.offset=le("labelOffset"),addEncoders(q={enter:ne={opacity:Op,x:{signal:_e,offset:je},y:we},update:ie={opacity:Sp,text:{field:"label"},x:ne.x,y:ne.y},exit:{opacity:Op}},{align:le("labelAlign"),baseline:le("labelBaseline"),fill:le("labelColor"),fillOpacity:le("labelOpacity"),font:le("labelFont"),fontSize:le("labelFontSize"),fontStyle:le("labelFontStyle"),fontWeight:le("labelFontWeight"),limit:le("labelLimit")});var Fe=guideMark({type:"text",role:"legend-label",style:"guide-label",key:xp,from:ye,encode:q},j.labels);return q={enter:{noBound:{value:!me},width:Op,height:me?Zd(me):Op,opacity:Op},exit:{opacity:Op},update:ie={opacity:Sp,row:{signal:null},column:{signal:null}}},le.isVertical(!0)?(oe="ceil(item.mark.items.length / ".concat(Oe,")"),ie.row.signal="".concat(ke,"%").concat(oe),ie.column.signal="floor(".concat(ke," / ").concat(oe,")"),se={field:["row",ke]}):(ie.row.signal="floor(".concat(ke," / ").concat(Oe,")"),ie.column.signal="".concat(ke," % ").concat(Oe),se={field:ke}),ie.column.signal="(".concat(B,")?").concat(ie.column.signal,":").concat(ke),guideGroup({role:"scope",from:P={facet:{data:P,name:"value",groupby:"index"}},encode:extendEncode(q,he,kp),marks:[Ae,Fe],name:ge,interactive:pe,sort:se})}var Dp='item.orient === "left"',Ap='item.orient === "right"',jp="(".concat(Dp," || ").concat(Ap,")"),Fp="datum.vgrad && ".concat(jp),Pp=anchorExpr('"top"','"bottom"','"middle"'),Rp=anchorExpr('"right"','"left"','"center"'),Mp="datum.vgrad && ".concat(Ap," ? (").concat(Rp,") : (").concat(jp," && !(datum.vgrad && ").concat(Dp,')) ? "left" : ').concat(Ep),Lp="item._anchor || (".concat(jp,' ? "middle" : "start")'),Ip="".concat(Fp," ? (").concat(Dp," ? -90 : 90) : 0"),Np="".concat(jp," ? (datum.vgrad ? (").concat(Ap,' ? "bottom" : "top") : ').concat(Pp,') : "top"');function vega_parser_module_clip(a,A){var j;return Object(ve.H)(a)&&(a.signal?j=a.signal:a.path?j="pathShape("+vega_parser_module_param(a.path)+")":a.sphere&&(j="geoShape("+vega_parser_module_param(a.sphere)+', {type: "Sphere"})')),j?A.signalRef(j):!!a}function vega_parser_module_param(a){return Object(ve.H)(a)&&a.signal?a.signal:Object(ve.bb)(a)}function getRole(a){var A=a.role||"";return A.indexOf("axis")&&A.indexOf("legend")&&A.indexOf("title")?"group"===a.type?"scope":A||"mark":A}function vega_parser_module_definition(a){return{marktype:a.type,name:a.name||void 0,role:a.role||getRole(a),zindex:+a.zindex||void 0,aria:a.aria,description:a.description}}function vega_parser_module_interactive(a,A){return a&&a.signal?A.signalRef(a.signal):!1!==a}function parseTransform(a,A){var j=definition(a.type);j||Object(ve.o)("Unrecognized transform type: "+Object(ve.bb)(a.type));var P=vega_parser_module_entry(j.type.toLowerCase(),null,vega_parser_module_parseParameters(j,a,A));return a.signal&&A.addSignal(a.signal,A.proxy(P)),P.metadata=j.metadata||{},P}function vega_parser_module_parseParameters(a,A,j){for(var P={},B=a.params.length,q=0;q<B;++q){var ne=a.params[q];P[ne.name]=vega_parser_module_parseParameter(ne,A,j)}return P}function vega_parser_module_parseParameter(a,A,j){var P=a.type,B=A[a.name];return"index"===P?function parseIndexParameter(a,A,j){Object(ve.J)(A.from)||Object(ve.o)('Lookup "from" parameter must be a string literal.');return j.getData(A.from).lookupRef(j,A.key)}(0,A,j):void 0!==B?"param"===P?function parseSubParameters(a,A,j){var P=A[a.name];return a.array?(Object(ve.B)(P)||Object(ve.o)("Expected an array of sub-parameters. Instead: "+Object(ve.bb)(P)),P.map((function(A){return parseSubParameter(a,A,j)}))):parseSubParameter(a,P,j)}(a,A,j):"projection"===P?j.projectionRef(A[a.name]):a.array&&!isSignal(B)?B.map((function(A){return parameterValue(a,A,j)})):parameterValue(a,B,j):void(a.required&&Object(ve.o)("Missing required "+Object(ve.bb)(A.type)+" parameter: "+Object(ve.bb)(a.name)))}function parameterValue(a,A,j){var P=a.type;if(isSignal(A))return qp(P)?Object(ve.o)("Expression references can not be signals."):Wp(P)?j.fieldRef(A):Hp(P)?j.compareRef(A):j.signalRef(A.signal);var B=a.expr||Wp(P);return B&&Bp(A)?j.exprRef(A.expr,A.as):B&&Up(A)?fieldRef$1(A.field,A.as):qp(P)?vega_functions_module_parser(A,j):zp(P)?vega_parser_module_ref(j.getData(A).values):Wp(P)?fieldRef$1(A):Hp(P)?j.compareRef(A):A}function parseSubParameter(a,A,j){for(var P,B=a.params.length,q=0;q<B;++q){for(var ne in(P=a.params[q]).key)if(P.key[ne]!==A[ne]){P=null;break}if(P)break}P||Object(ve.o)("Unsupported parameter: "+Object(ve.bb)(A));var ie=Object(ve.p)(vega_parser_module_parseParameters(P,A,j),P.key);return vega_parser_module_ref(j.add(up(ie)))}var Bp=function outerExpr(a){return a&&a.expr},Up=function outerField(a){return a&&a.field},zp=function isData(a){return"data"===a},qp=function isExpr(a){return"expr"===a},Wp=function isField(a){return"field"===a},Hp=function isCompare(a){return"compare"===a};function getDataRef(a,A){return a.$ref?a:a.data&&a.data.$ref?a.data:vega_parser_module_ref(A.getData(a.data).output)}function DataScope(a,A,j,P,B){this.scope=a,this.input=A,this.output=j,this.values=P,this.aggregate=B,this.index={}}function fieldKey(a){return Object(ve.J)(a)?a:null}function addSortField(a,A,j){var P,B=aggrField(j.op,j.field);if(A.ops){for(var q=0,ne=A.as.length;q<ne;++q)if(A.as[q]===B)return}else A.ops=["count"],A.fields=[null],A.as=["count"];j.op&&(A.ops.push((P=j.op.signal)?a.signalRef(P):j.op),A.fields.push(a.fieldRef(j.field)),A.as.push(B))}function vega_parser_module_cache(a,A,j,P,B,q,ne){var ie,oe,se=A[j]||(A[j]={}),le=function sortKey(a){return Object(ve.H)(a)?("descending"===a.order?"-":"+")+aggrField(a.op,a.field):""}(q),he=fieldKey(B);if(null!=he&&(a=A.scope,ie=se[he+=le?"|"+le:""]),!ie){var pe=q?{field:lh,pulse:A.countsRef(a,B,q)}:{field:a.fieldRef(B),pulse:vega_parser_module_ref(A.output)};le&&(pe.sort=a.sortRef(q)),oe=a.add(vega_parser_module_entry(P,void 0,pe)),ne&&(A.index[B]=oe),ie=vega_parser_module_ref(oe),null!=he&&(se[he]=ie)}return ie}function parseTrigger(a,A,j){var P=a.remove,B=a.insert,q=a.toggle,ne=a.modify,ie=a.values,oe=A.add(operator()),se=vega_functions_module_parser("if("+a.trigger+',modify("'+j+'",'+[B,P,q,ne,ie].map((function(a){return null==a?"null":a})).join(",")+"),0)",A);oe.update=se.$expr,oe.params=se.$params}function parseMark(a,A){var j,P,B,q,ne,ie,oe,se=getRole(a),le="group"===a.type,he=a.from&&a.from.facet,pe=a.overlap,ge=a.layout||"scope"===se||"frame"===se,me="mark"===se||ge||he,ye=function parseData$1(a,A,j){var P,B,q,ne,ie;return a?(P=a.facet)&&(A||Object(ve.o)("Only group marks can be faceted."),null!=P.field?ne=ie=getDataRef(P,j):(a.data?ie=vega_parser_module_ref(j.getData(a.data).aggregate):((q=parseTransform(Object(ve.p)({type:"aggregate",groupby:Object(ve.i)(P.groupby)},P.aggregate),j)).params.key=j.keyRef(P.groupby),q.params.pulse=getDataRef(P,j),ne=ie=vega_parser_module_ref(j.add(q))),B=j.keyRef(P.groupby,!0))):ne=vega_parser_module_ref(j.add(Oh(null,[{}]))),ne||(ne=getDataRef(a,j)),{key:B,pulse:ne,parent:ie}}(a.from,le,A),_e=vega_parser_module_ref(P=A.add(Ph({key:ye.key||(a.key?fieldRef$1(a.key):void 0),pulse:ye.pulse,clean:!le})));P=B=A.add(Oh({pulse:_e})),P=A.add(ip({markdef:vega_parser_module_definition(a),interactive:vega_parser_module_interactive(a.interactive,A),clip:vega_parser_module_clip(a.clip,A),context:{$context:!0},groups:A.lookup(),parent:A.signals.parent?A.signalRef("parent"):null,index:A.markpath(),pulse:vega_parser_module_ref(P)}));var we=vega_parser_module_ref(P);(P=q=A.add(qh(parseEncode(a.encode,a.type,se,a.style,A,{mod:!1,pulse:we})))).params.parent=A.encode(),a.transform&&a.transform.forEach((function(a){var j=parseTransform(a,A),B=j.metadata;(B.generates||B.changes)&&Object(ve.o)("Mark transforms should not generate new data."),B.nomod||(q.params.mod=!0),j.params.pulse=vega_parser_module_ref(P),A.add(P=j)})),a.sort&&(P=A.add(mp({sort:A.compareRef(a.sort),pulse:vega_parser_module_ref(P)})));var ke=vega_parser_module_ref(P);(he||ge)&&(ie=vega_parser_module_ref(ge=A.add(vp({layout:A.objectProperty(a.layout),legends:A.legends,mark:we,pulse:ke}))));var Oe=A.add(kh({mark:we,pulse:ie||ke}));oe=vega_parser_module_ref(Oe),le&&(me&&((j=A.operators).pop(),ge&&j.pop()),A.pushState(ke,ie||oe,_e),he?function parseFacet(a,A,j){var P,B=a.from.facet,q=B.name,ne=getDataRef(B,A);B.name||Object(ve.o)("Facet must have a name: "+Object(ve.bb)(B)),B.data||Object(ve.o)("Facet must reference a data set: "+Object(ve.bb)(B)),B.field?P=A.add(lp({field:A.fieldRef(B.field),pulse:ne})):B.groupby?P=A.add(Qh({key:A.keyRef(B.groupby),group:vega_parser_module_ref(A.proxy(j.parent)),pulse:ne})):Object(ve.o)("Facet must specify groupby or field: "+Object(ve.bb)(B));var ie=A.fork(),oe=ie.add(Oh()),se=ie.add(gp({pulse:vega_parser_module_ref(oe)}));ie.addData(q,new DataScope(ie,oe,oe,se)),ie.addSignal("parent",null),P.params.subflow={$subflow:ie.parse(a).toRuntime()}}(a,A,ye):me?function parseSubflow(a,A,j){var P=A.add(lp({pulse:j.pulse})),B=A.fork();B.add(gp()),B.addSignal("parent",null),P.params.subflow={$subflow:B.parse(a).toRuntime()}}(a,A,ye):A.parse(a),A.popState(),me&&(ge&&j.push(ge),j.push(Oe))),pe&&(oe=function parseOverlap(a,A,j){var P=a.method,B=a.bound,q=a.separation,ne={separation:isSignal(q)?j.signalRef(q.signal):q,method:isSignal(P)?j.signalRef(P.signal):P,pulse:A};a.order&&(ne.sort=j.compareRef({field:a.order}));if(B){var ie=B.tolerance;ne.boundTolerance=isSignal(ie)?j.signalRef(ie.signal):+ie,ne.boundScale=j.scaleRef(B.scale),ne.boundOrient=B.orient}return vega_parser_module_ref(j.add(sp(ne)))}(pe,oe,A));var Se=A.add(hp({pulse:oe})),Te=A.add(gp({pulse:vega_parser_module_ref(Se)},void 0,A.parent()));null!=a.name&&(ne=a.name,A.addData(ne,new DataScope(A,B,Se,Te)),a.on&&a.on.forEach((function(a){(a.insert||a.remove||a.toggle)&&Object(ve.o)("Marks only support modify triggers."),parseTrigger(a,A,ne)})))}function parseLegend(a,A){var j,P,B,q=A.config.legend,ne=a.encode||{},ie=vega_parser_module_lookup(a,q),oe=ne.legend||{},se=oe.name||void 0,le=oe.interactive,he=oe.style,pe={},ge=0;wp.forEach((function(A){return a[A]?(pe[A]=a[A],ge=ge||a[A]):0})),ge||Object(ve.o)("Missing valid scale for legend.");var me=function legendType(a,A){var j=a.type||"symbol";a.type||1!==function scaleCount(a){return wp.reduce((function(A,j){return A+(a[j]?1:0)}),0)}(a)||!a.fill&&!a.stroke||(j=isContinuous(A)?"gradient":isDiscretizing(A)?"discrete":"symbol");return"gradient"!==j?j:isDiscretizing(A)?"discrete":"gradient"}(a,A.scaleType(ge)),ye={title:null!=a.title,scales:pe,type:me,vgrad:"symbol"!==me&&ie.isVertical()},_e=vega_parser_module_ref(A.add(Oh(null,[ye]))),we=vega_parser_module_ref(A.add(np(P={type:me,scale:A.scaleRef(ge),count:A.objectProperty(ie("tickCount")),limit:A.property(ie("symbolLimit")),values:A.objectProperty(a.values),minstep:A.property(a.tickMinStep),formatType:A.property(a.formatType),formatSpecifier:A.property(a.format)})));return"gradient"===me?(B=[legendGradient(a,ge,q,ne.gradient),legendGradientLabels(a,q,ne.labels,we)],P.count=P.count||A.signalRef("max(2,2*floor((".concat(deref(ie.gradientLength()),")/100))"))):"discrete"===me?B=[legendGradientDiscrete(a,ge,q,ne.gradient,we),legendGradientLabels(a,q,ne.labels,we)]:(j=function legendSymbolLayout(a,A){var j=vega_parser_module_lookup(a,A);return{align:j("gridAlign"),columns:j.entryColumns(),center:{row:!0,column:!1},padding:{row:j("rowPadding"),column:j("columnPadding")}}}(a,q),B=[legendSymbolGroups(a,q,ne,we,deref(j.columns))],P.size=function sizeExpression(a,A,j){var P=deref(getChannel("size",a,j)),B=deref(getChannel("strokeWidth",a,j)),q=deref(function getFontSize(a,A,j){return getEncoding("fontSize",a)||function getStyle(a,A,j){var P=A.config.style[j];return P&&P[a]}("fontSize",A,j)}(j[1].encode,A,"guide-label"));return vega_functions_module_parser("max(ceil(sqrt(".concat(P,")+").concat(B,"),").concat(q,")"),A)}(a,A,B[0].marks)),B=[guideGroup({role:"legend-entry",from:_e,encode:{enter:{x:{value:0},y:{value:0}}},marks:B,layout:j,interactive:le})],ye.title&&B.push(function legendTitle(a,A,j,P){var B=vega_parser_module_lookup(a,A),q={enter:{opacity:Op},update:{opacity:Sp,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Op}};return addEncoders(q,{orient:B("titleOrient"),_anchor:B("titleAnchor"),anchor:{signal:Lp},angle:{signal:Ip},align:{signal:Mp},baseline:{signal:Np},text:a.title,fill:B("titleColor"),fillOpacity:B("titleOpacity"),font:B("titleFont"),fontSize:B("titleFontSize"),fontStyle:B("titleFontStyle"),fontWeight:B("titleFontWeight"),limit:B("titleLimit"),lineHeight:B("titleLineHeight")},{align:B("titleAlign"),baseline:B("titleBaseline")}),guideMark({type:"text",role:"legend-title",style:"guide-title",from:P,encode:q},j)}(a,q,ne.title,_e)),parseMark(guideGroup({role:"legend",from:_e,encode:extendEncode(buildLegendEncode(ie,a,q),oe,kp),marks:B,aria:ie("aria"),description:ie("description"),zindex:ie("zindex"),name:se,interactive:le,style:he}),A)}function buildLegendEncode(a,A,j){var P={enter:{},update:{}};return addEncoders(P,{orient:a("orient"),offset:a("offset"),padding:a("padding"),titlePadding:a("titlePadding"),cornerRadius:a("cornerRadius"),fill:a("fillColor"),stroke:a("strokeColor"),strokeWidth:j.strokeWidth,strokeDash:j.strokeDash,x:a("legendX"),y:a("legendY"),format:A.format,formatType:A.formatType}),P}function getChannel(a,A,j){return A[a]?'scale("'.concat(A[a],'",datum)'):getEncoding(a,j[0].encode)}DataScope.fromEntries=function(a,A){var j=A.length,P=A[j-1],B=A[j-2],q=A[0],ne=null,ie=1;for(q&&"load"===q.type&&(q=A[1]),a.add(A[0]);ie<j;++ie)A[ie].params.pulse=vega_parser_module_ref(A[ie-1]),a.add(A[ie]),"aggregate"===A[ie].type&&(ne=A[ie]);return new DataScope(a,q,B,P,ne)},DataScope.prototype={countsRef:function countsRef(a,A,j){var P,B,q,ne=this.counts||(this.counts={}),ie=fieldKey(A);return null!=ie&&(a=this.scope,P=ne[ie]),P?j&&j.field&&addSortField(a,P.agg.params,j):(q={groupby:a.fieldRef(A,"key"),pulse:vega_parser_module_ref(this.output)},j&&j.field&&addSortField(a,q,j),B=a.add(bh(q)),P=a.add(Oh({pulse:vega_parser_module_ref(B)})),P={agg:B,ref:vega_parser_module_ref(P)},null!=ie&&(ne[ie]=P)),P.ref},tuplesRef:function tuplesRef(){return vega_parser_module_ref(this.values)},extentRef:function extentRef(a,A){return vega_parser_module_cache(a,this,"extent","extent",A,!1)},domainRef:function domainRef(a,A){return vega_parser_module_cache(a,this,"domain","values",A,!1)},valuesRef:function valuesRef(a,A,j){return vega_parser_module_cache(a,this,"vals","values",A,j||!0)},lookupRef:function lookupRef(a,A){return vega_parser_module_cache(a,this,"lookup","tupleindex",A,!1)},indataRef:function indataRef(a,A){return vega_parser_module_cache(a,this,"indata","tupleindex",A,!0,!0)}};var Gp='item.orient==="'.concat("left",'"?-90:item.orient==="').concat("right",'"?90:0');function parseTitle(a,A){var j=vega_parser_module_lookup(a=Object(ve.J)(a)?{text:a}:a,A.config.title),P=a.encode||{},B=P.group||{},q=B.name||void 0,ne=B.interactive,ie=B.style,oe=[],se=vega_parser_module_ref(A.add(Oh(null,[{}])));return oe.push(function buildTitle(a,A,j,P){var B={value:0},q=a.text,ne={enter:{opacity:B},update:{opacity:{value:1}},exit:{opacity:B}};return addEncoders(ne,{text:q,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:A("dx"),dy:A("dy"),fill:A("color"),font:A("font"),fontSize:A("fontSize"),fontStyle:A("fontStyle"),fontWeight:A("fontWeight"),lineHeight:A("lineHeight")},{align:A("align"),angle:A("angle"),baseline:A("baseline")}),guideMark({type:"text",role:"title-text",style:"group-title",from:P,encode:ne},j)}(a,j,function titleEncode(a){var A=a.encode;return A&&A.title||Object(ve.p)({name:a.name,interactive:a.interactive,style:a.style},A)}(a),se)),a.subtitle&&oe.push(function buildSubTitle(a,A,j,P){var B={value:0},q=a.subtitle,ne={enter:{opacity:B},update:{opacity:{value:1}},exit:{opacity:B}};return addEncoders(ne,{text:q,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:A("dx"),dy:A("dy"),fill:A("subtitleColor"),font:A("subtitleFont"),fontSize:A("subtitleFontSize"),fontStyle:A("subtitleFontStyle"),fontWeight:A("subtitleFontWeight"),lineHeight:A("subtitleLineHeight")},{align:A("align"),angle:A("angle"),baseline:A("baseline")}),guideMark({type:"text",role:"title-subtitle",style:"group-subtitle",from:P,encode:ne},j)}(a,j,P.subtitle,se)),parseMark(guideGroup({role:"title",from:se,encode:groupEncode(j,B),marks:oe,aria:j("aria"),description:j("description"),zindex:j("zindex"),name:q,interactive:ne,style:ie}),A)}function groupEncode(a,A){var j={enter:{},update:{}};return addEncoders(j,{orient:a("orient"),anchor:a("anchor"),align:{signal:Ep},angle:{signal:Gp},limit:a("limit"),frame:a("frame"),offset:a("offset")||0,padding:a("subtitlePadding")}),extendEncode(j,A,kp)}function parseData(a,A){var j=[];a.transform&&a.transform.forEach((function(a){j.push(parseTransform(a,A))})),a.on&&a.on.forEach((function(j){parseTrigger(j,A,a.name)})),A.addDataPipeline(a.name,function analyze(a,A,j){var P,B,q,ne,ie,oe=[],se=null,le=!1,he=!1;a.values?isSignal(a.values)||hasSignal(a.format)?(oe.push(load(A,a)),oe.push(se=collect())):oe.push(se=collect({$ingest:a.values,$format:a.format})):a.url?hasSignal(a.url)||hasSignal(a.format)?(oe.push(load(A,a)),oe.push(se=collect())):oe.push(se=collect({$request:a.url,$format:a.format})):a.source&&(se=P=Object(ve.i)(a.source).map((function(a){return vega_parser_module_ref(A.getData(a).output)})),oe.push(null));for(B=0,q=j.length;B<q;++B)ne=j[B],ie=ne.metadata,se||ie.source||oe.push(se=collect()),oe.push(ne),ie.generates&&(he=!0),ie.modifies&&!he&&(le=!0),ie.source?se=ne:ie.changes&&(se=null);P&&(q=P.length-1,oe[0]=dp({derive:le,pulse:q?P:P[0]}),(le||q)&&oe.splice(1,0,collect()));se||oe.push(collect());return oe.push(gp({})),oe}(a,A,j))}function collect(a){var A=Oh({},a);return A.metadata={source:!0},A}function load(a,A){return rp({url:A.url?a.property(A.url):void 0,async:A.async?a.property(A.async):void 0,values:A.values?a.property(A.values):void 0,format:a.objectProperty(A.format)})}var Vp=function isX(a){return"bottom"===a||"top"===a},Yp=function getSign(a,A,j){return isSignal(a)?Zp(a.signal,A,j):"left"===a||"top"===a?A:j},$p=function ifX(a,A,j){return isSignal(a)?Jp(a.signal,A,j):Vp(a)?A:j},Kp=function ifY(a,A,j){return isSignal(a)?Qp(a.signal,A,j):Vp(a)?j:A},Xp=function ifTop(a,A,j){return isSignal(a)?tg(a.signal,A,j):"top"===a?{value:A}:{value:j}},Jp=function ifXEnc(a,A,j){return lg("".concat(a," === '").concat("top","' || ").concat(a," === '").concat("bottom","'"),A,j)},Qp=function ifYEnc(a,A,j){return lg("".concat(a," !== '").concat("top","' && ").concat(a," !== '").concat("bottom","'"),A,j)},Zp=function ifLeftTopExpr(a,A,j){return _g("".concat(a," === '").concat("left","' || ").concat(a," === '").concat("top","'"),A,j)},tg=function ifTopExpr(a,A,j){return _g("".concat(a," === '").concat("top","'"),A,j)},rg=function ifRightExpr(a,A,j){return _g("".concat(a," === '").concat("right","'"),A,j)},lg=function ifEnc(a,A,j){return A=null!=A?Zd(A):A,j=null!=j?Zd(j):j,mg(A)&&mg(j)?(A=A?A.signal||Object(ve.bb)(A.value):null,j=j?j.signal||Object(ve.bb)(j.value):null,{signal:"".concat(a," ? (").concat(A,") : (").concat(j,")")}):[Object(ve.p)({test:a},A)].concat(j||[])},mg=function isSimple(a){return null==a||1===Object.keys(a).length},_g=function ifExpr(a,A,j){return{signal:"".concat(a," ? (").concat(Og(A),") : (").concat(Og(j),")")}},kg=function ifOrient(a,A,j,P,B){return{signal:(null!=P?"".concat(a," === '").concat("left","' ? (").concat(Og(P),") : "):"")+(null!=j?"".concat(a," === '").concat("bottom","' ? (").concat(Og(j),") : "):"")+(null!=B?"".concat(a," === '").concat("right","' ? (").concat(Og(B),") : "):"")+(null!=A?"".concat(a," === '").concat("top","' ? (").concat(Og(A),") : "):"")+"(null)"}},Og=function toExpr(a){return isSignal(a)?a.signal:null==a?null:Object(ve.bb)(a)},Eg=function patch(a,A){var j=a.signal;return j&&j.endsWith("(null)")?{signal:j.slice(0,-6)+A.signal}:a};function fallback(a,A,j,P){var B;if(A&&Object(ve.w)(A,a))return A[a];if(Object(ve.w)(j,a))return j[a];if(a.startsWith("title")){switch(a){case"titleColor":B="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":B=a[5].toLowerCase()+a.slice(6)}return P["guide-title"][B]}if(a.startsWith("label")){switch(a){case"labelColor":B="fill";break;case"labelFont":case"labelFontSize":B=a[5].toLowerCase()+a.slice(6)}return P["guide-label"][B]}return null}function vega_parser_module_keys(a){var A,j={},P=Object(We.a)(a);try{for(P.s();!(A=P.n()).done;){var B=A.value;if(B)for(var q in B)j[q]=1}}catch(ne){P.e(ne)}finally{P.f()}return Object.keys(j)}function vega_parser_module_position(a,A){return{scale:a.scale,range:A}}function axisGrid(a,A,j,P,B){var q,ne,ie,oe=vega_parser_module_lookup(a,A),se=a.orient,le=a.gridScale,he=Yp(se,1,-1),pe=function vega_parser_module_offsetValue(a,A){if(1===A);else if(Object(ve.H)(a)){for(var j=a=Object(ve.p)({},a);null!=j.mult;){if(!Object(ve.H)(j.mult))return j.mult=isSignal(A)?{signal:"(".concat(j.mult,") * (").concat(A.signal,")")}:j.mult*A,a;j=j.mult=Object(ve.p)({},j.mult)}j.mult=A}else a=isSignal(A)?{signal:"(".concat(A.signal,") * (").concat(a||0,")")}:A*(a||0);return a}(a.offset,he),ge={enter:q={opacity:Op},update:ie={opacity:Sp},exit:ne={opacity:Op}};addEncoders(ge,{stroke:oe("gridColor"),strokeCap:oe("gridCap"),strokeDash:oe("gridDash"),strokeDashOffset:oe("gridDashOffset"),strokeOpacity:oe("gridOpacity"),strokeWidth:oe("gridWidth")});var me={scale:a.scale,field:xp,band:B.band,extra:B.extra,offset:B.offset,round:oe("tickRound")},ye=$p(se,{signal:"height"},{signal:"width"}),_e=le?{scale:le,range:0,mult:he,offset:pe}:{value:0,offset:pe},we=le?{scale:le,range:1,mult:he,offset:pe}:Object(ve.p)(ye,{mult:he,offset:pe});return q.x=ie.x=$p(se,me,_e),q.y=ie.y=Kp(se,me,_e),q.x2=ie.x2=Kp(se,we),q.y2=ie.y2=$p(se,we),ne.x=$p(se,me),ne.y=Kp(se,me),guideMark({type:"rule",role:"axis-grid",key:xp,from:P,encode:ge},j)}function flushExpr(a,A,j,P,B){return{signal:'flush(range("'+a+'"), scale("'+a+'", datum.value), '+A+","+j+","+P+","+B+")"}}function axisLabels(a,A,j,P,B,q){var ne,ie=vega_parser_module_lookup(a,A),oe=a.orient,se=a.scale,le=Yp(oe,-1,1),he=deref(ie("labelFlush")),pe=deref(ie("labelFlushOffset")),ge=ie("labelAlign"),me=ie("labelBaseline"),ve=0===he||!!he,ye=Zd(B);ye.mult=le,ye.offset=Zd(ie("labelPadding")||0),ye.offset.mult=le;var _e={scale:se,field:xp,band:.5,offset:extendOffset(q.offset,ie("labelOffset"))},we=$p(oe,ve?flushExpr(se,he,'"left"','"right"','"center"'):{value:"center"},function ifRight(a,A,j){return isSignal(a)?rg(a.signal,A,j):"right"===a?{value:A}:{value:j}}(oe,"left","right")),ke=$p(oe,Xp(oe,"bottom","top"),ve?flushExpr(se,he,'"top"','"bottom"','"middle"'):{value:"middle"}),Oe=flushExpr(se,he,"-(".concat(pe,")"),pe,0);ve=ve&&pe;var Se={opacity:Op,x:$p(oe,_e,ye),y:Kp(oe,_e,ye)},Te={enter:Se,update:ne={opacity:Sp,text:{field:"label"},x:Se.x,y:Se.y,align:we,baseline:ke},exit:{opacity:Op,x:Se.x,y:Se.y}};addEncoders(Te,{dx:!ge&&ve?$p(oe,Oe):null,dy:!me&&ve?Kp(oe,Oe):null}),addEncoders(Te,{angle:ie("labelAngle"),fill:ie("labelColor"),fillOpacity:ie("labelOpacity"),font:ie("labelFont"),fontSize:ie("labelFontSize"),fontWeight:ie("labelFontWeight"),fontStyle:ie("labelFontStyle"),limit:ie("labelLimit"),lineHeight:ie("labelLineHeight")},{align:ge,baseline:me});var Ae=ie("labelBound"),je=ie("labelOverlap");return je=je||Ae?{separation:ie("labelSeparation"),method:je,order:"datum.index",bound:Ae?{scale:se,orient:oe,tolerance:Ae}:null}:void 0,ne.align!==we&&(ne.align=Eg(ne.align,we)),ne.baseline!==ke&&(ne.baseline=Eg(ne.baseline,ke)),guideMark({type:"text",role:"axis-label",style:"guide-label",key:xp,from:P,encode:Te,overlap:je},j)}function axisTitle(a,A,j,P){var B,q,ne=vega_parser_module_lookup(a,A),ie=a.orient,oe=Yp(ie,-1,1),se={enter:B={opacity:Op,anchor:Zd(ne("titleAnchor",null)),align:{signal:Ep}},update:q=Object(ve.p)({},B,{opacity:Sp,text:Zd(a.title)}),exit:{opacity:Op}},le={signal:'lerp(range("'.concat(a.scale,'"), ').concat(anchorExpr(0,1,.5),")")};return q.x=$p(ie,le),q.y=Kp(ie,le),B.angle=$p(ie,Op,function mult(a,A){return 0===A?0:isSignal(a)?{signal:"(".concat(a.signal,") * ").concat(A)}:{value:a*A}}(oe,90)),B.baseline=$p(ie,Xp(ie,"bottom","top"),{value:"bottom"}),q.angle=B.angle,q.baseline=B.baseline,addEncoders(se,{fill:ne("titleColor"),fillOpacity:ne("titleOpacity"),font:ne("titleFont"),fontSize:ne("titleFontSize"),fontStyle:ne("titleFontStyle"),fontWeight:ne("titleFontWeight"),limit:ne("titleLimit"),lineHeight:ne("titleLineHeight")},{align:ne("titleAlign"),angle:ne("titleAngle"),baseline:ne("titleBaseline")}),function autoLayout(a,A,j,P){var B=function auto(a,A){return null!=a?(j.update[A]=Eg(Zd(a),j.update[A]),!1):!has(A,P)},q=B(a("titleX"),"x"),ne=B(a("titleY"),"y");j.enter.auto=ne===q?Zd(ne):$p(A,Zd(ne),Zd(q))}(ne,ie,se,j),se.update.align=Eg(se.update.align,B.align),se.update.angle=Eg(se.update.angle,B.angle),se.update.baseline=Eg(se.update.baseline,B.baseline),guideMark({type:"text",role:"axis-title",style:"guide-title",from:P,encode:se},j)}function parseAxis(a,A){var j,P=function vega_parser_module_axisConfig(a,A){var j,P,B,q=A.config,ne=q.style,ie=q.axis,oe="band"===A.scaleType(a.scale)&&q.axisBand,se=a.orient;if(isSignal(se)){var le=vega_parser_module_keys([q.axisX,q.axisY]),he=vega_parser_module_keys([q.axisTop,q.axisBottom,q.axisLeft,q.axisRight]);j={};var pe,ge=Object(We.a)(le);try{for(ge.s();!(pe=ge.n()).done;)j[B=pe.value]=$p(se,fallback(B,q.axisX,ie,ne),fallback(B,q.axisY,ie,ne))}catch(_e){ge.e(_e)}finally{ge.f()}P={};var me,ye=Object(We.a)(he);try{for(ye.s();!(me=ye.n()).done;)P[B=me.value]=kg(se.signal,fallback(B,q.axisTop,ie,ne),fallback(B,q.axisBottom,ie,ne),fallback(B,q.axisLeft,ie,ne),fallback(B,q.axisRight,ie,ne))}catch(_e){ye.e(_e)}finally{ye.f()}}else j="top"===se||"bottom"===se?q.axisX:q.axisY,P=q["axis"+se[0].toUpperCase()+se.slice(1)];return j||P||oe?Object(ve.p)({},ie,j,P,oe):ie}(a,A),B=a.encode||{},q=B.axis||{},ne=q.name||void 0,ie=q.interactive,oe=q.style,se=vega_parser_module_lookup(a,P),le=function tickBand(a){var A,j,P=a("tickBand"),B=a("tickOffset");return P?P.signal?(A={signal:"(".concat(P.signal,") === 'extent' ? 1 : 0.5")},j={signal:"(".concat(P.signal,") === 'extent'")},Object(ve.H)(B)||(B={signal:"(".concat(P.signal,") === 'extent' ? 0 : ").concat(B)})):"extent"===P?(A=1,j=!0,B=0):(A=.5,j=!1):(A=a("bandPosition"),j=a("tickExtra")),{extra:j,band:A,offset:B}}(se),he={scale:a.scale,ticks:!!se("ticks"),labels:!!se("labels"),grid:!!se("grid"),domain:!!se("domain"),title:null!=a.title},pe=vega_parser_module_ref(A.add(Oh({},[he]))),ge=vega_parser_module_ref(A.add(_h({scale:A.scaleRef(a.scale),extra:A.property(le.extra),count:A.objectProperty(a.tickCount),values:A.objectProperty(a.values),minstep:A.property(a.tickMinStep),formatType:A.property(a.formatType),formatSpecifier:A.property(a.format)}))),me=[];return he.grid&&me.push(axisGrid(a,P,B.grid,ge,le)),he.ticks&&(j=se("tickSize"),me.push(function axisTicks(a,A,j,P,B,q){var ne,ie,oe,se=vega_parser_module_lookup(a,A),le=a.orient,he=Yp(le,-1,1),pe={enter:ne={opacity:Op},update:oe={opacity:Sp},exit:ie={opacity:Op}};addEncoders(pe,{stroke:se("tickColor"),strokeCap:se("tickCap"),strokeDash:se("tickDash"),strokeDashOffset:se("tickDashOffset"),strokeOpacity:se("tickOpacity"),strokeWidth:se("tickWidth")});var ge=Zd(B);ge.mult=he;var me={scale:a.scale,field:xp,band:q.band,extra:q.extra,offset:q.offset,round:se("tickRound")};return oe.y=ne.y=$p(le,Op,me),oe.y2=ne.y2=$p(le,ge),ie.x=$p(le,me),oe.x=ne.x=Kp(le,Op,me),oe.x2=ne.x2=Kp(le,ge),ie.y=Kp(le,me),guideMark({type:"rule",role:"axis-tick",key:xp,from:P,encode:pe},j)}(a,P,B.ticks,ge,j,le))),he.labels&&(j=he.ticks?j:0,me.push(axisLabels(a,P,B.labels,ge,j,le))),he.domain&&me.push(function axisDomain(a,A,j,P){var B,q,ne=vega_parser_module_lookup(a,A),ie=a.orient,oe={enter:B={opacity:Op},update:q={opacity:Sp},exit:{opacity:Op}};addEncoders(oe,{stroke:ne("domainColor"),strokeCap:ne("domainCap"),strokeDash:ne("domainDash"),strokeDashOffset:ne("domainDashOffset"),strokeWidth:ne("domainWidth"),strokeOpacity:ne("domainOpacity")});var se=vega_parser_module_position(a,0),le=vega_parser_module_position(a,1);return B.x=q.x=$p(ie,se,Op),B.x2=q.x2=$p(ie,le),B.y=q.y=Kp(ie,se,Op),B.y2=q.y2=Kp(ie,le),guideMark({type:"rule",role:"axis-domain",from:P,encode:oe},j)}(a,P,B.domain,pe)),he.title&&me.push(axisTitle(a,P,B.title,pe)),parseMark(guideGroup({role:"axis",from:pe,encode:extendEncode(buildAxisEncode(se,a),q,kp),marks:me,aria:se("aria"),description:se("description"),zindex:se("zindex"),name:ne,interactive:ie,style:oe}),A)}function buildAxisEncode(a,A){var j={enter:{},update:{}};return addEncoders(j,{orient:a("orient"),offset:a("offset")||0,position:vega_parser_module_value(A.position,0),titlePadding:a("titlePadding"),minExtent:a("minExtent"),maxExtent:a("maxExtent"),range:{signal:'abs(span(range("'.concat(A.scale,'")))')},translate:a("translate"),format:A.format,formatType:A.formatType}),j}function parseScope(a,A,j){var P=Object(ve.i)(a.signals),B=Object(ve.i)(a.scales);return j||P.forEach((function(a){return parseSignal(a,A)})),Object(ve.i)(a.projections).forEach((function(a){return function parseProjection(a,A){var j=A.config.projection||{},P={};for(var B in a)"name"!==B&&(P[B]=parseParameter$1(a[B],B,A));for(var q in j)null==P[q]&&(P[q]=parseParameter$1(j[q],q,A));A.addProjection(a.name,P)}(a,A)})),B.forEach((function(a){return function initScale(a,A){var j=a.type||"linear";isValidScaleType(j)||Object(ve.o)("Unrecognized scale type: "+Object(ve.bb)(j)),A.addScale(a.name,{type:j,domain:void 0})}(a,A)})),Object(ve.i)(a.data).forEach((function(a){return parseData(a,A)})),B.forEach((function(a){return parseScale(a,A)})),(j||P).forEach((function(a){return function parseSignalUpdates(a,A){var j=A.getSignal(a.name),P=a.update;a.init&&(P?Object(ve.o)("Signals can not include both init and update expressions."):(P=a.init,j.initonly=!0)),P&&(P=vega_functions_module_parser(P,A),j.update=P.$expr,j.params=P.$params),a.on&&a.on.forEach((function(a){return vega_parser_module_parseUpdate(a,A,j.id)}))}(a,A)})),Object(ve.i)(a.axes).forEach((function(a){return parseAxis(a,A)})),Object(ve.i)(a.marks).forEach((function(a){return parseMark(a,A)})),Object(ve.i)(a.legends).forEach((function(a){return parseLegend(a,A)})),a.title&&parseTitle(a.title,A),A.parseLambdas(),A}function parseView(a,A){var j=A.config,P=vega_parser_module_ref(A.root=A.add(operator())),B=function collectSignals(a,A){var j=function _(j){return vega_parser_module_value(a[j],A[j])},P=[signalObject("background",j("background")),signalObject("autosize",parseAutosize(j("autosize"))),signalObject("padding",parsePadding(j("padding"))),signalObject("width",j("width")||0),signalObject("height",j("height")||0)],B=P.reduce((function(a,A){return a[A.name]=A,a}),{}),q={};return Object(ve.i)(a.signals).forEach((function(a){Object(ve.w)(B,a.name)?a=Object(ve.p)(B[a.name],a):P.push(a),q[a.name]=a})),Object(ve.i)(A.signals).forEach((function(a){Object(ve.w)(q,a.name)||Object(ve.w)(B,a.name)||P.push(a)})),P}(a,j);B.forEach((function(a){return parseSignal(a,A)})),A.description=a.description||j.description,A.eventConfig=j.events,A.legends=A.objectProperty(j.legend&&j.legend.layout),A.locale=j.locale;var q=A.add(Oh()),ne=A.add(qh(parseEncode(function rootEncode(a){return extendEncode({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},a)}(a.encode),"group","frame",a.style,A,{pulse:vega_parser_module_ref(q)}))),ie=A.add(vp({layout:A.objectProperty(a.layout),legends:A.legends,autosize:A.signalRef("autosize"),mark:P,pulse:vega_parser_module_ref(ne)}));A.operators.pop(),A.pushState(vega_parser_module_ref(ne),vega_parser_module_ref(ie),null),parseScope(a,A,B),A.operators.push(ie);var oe=A.add(kh({mark:P,pulse:vega_parser_module_ref(ie)}));return oe=A.add(hp({pulse:vega_parser_module_ref(oe)})),oe=A.add(gp({pulse:vega_parser_module_ref(oe)})),A.addData("root",new DataScope(A,q,q,oe)),A}function signalObject(a,A){return A&&A.signal?{name:a,update:A.signal}:{name:a,value:A}}function Scope(a,A){this.config=a||{},this.options=A||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Subscope(a){this.config=a.config,this.options=a.options,this.legends=a.legends,this.field=Object.create(a.field),this.signals=Object.create(a.signals),this.lambdas=Object.create(a.lambdas),this.scales=Object.create(a.scales),this.events=Object.create(a.events),this.data=Object.create(a.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++a._nextsub[0],this._nextsub=a._nextsub,this._parent=a._parent.slice(),this._encode=a._encode.slice(),this._lookup=a._lookup.slice(),this._markpath=a._markpath}function propertyLambda(a){return(Object(ve.B)(a)?arrayLambda:objectLambda)(a)}function arrayLambda(a){for(var A=a.length,j="[",P=0;P<A;++P){var B=a[P];j+=(P>0?",":"")+(Object(ve.H)(B)?B.signal||propertyLambda(B):Object(ve.bb)(B))}return j+"]"}function objectLambda(a){var A,j,P="{",B=0;for(A in a)j=a[A],P+=(++B>1?",":"")+Object(ve.bb)(A)+":"+(Object(ve.H)(j)?j.signal||propertyLambda(j):Object(ve.bb)(j));return P+"}"}function vega_parser_module_parse(a,A,j){return Object(ve.H)(a)||Object(ve.o)("Input Vega specification must be an object."),parseView(a,new Scope(A=Object(ve.P)({description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:"#4c78a8"},area:{fill:"#4c78a8"},image:null,line:{stroke:"#4c78a8",strokeWidth:2},path:{stroke:"#4c78a8"},rect:{fill:"#4c78a8"},rule:{stroke:"#000"},shape:{stroke:"#4c78a8"},symbol:{fill:"#4c78a8",size:64},text:{fill:"#000",font:"sans-serif",fontSize:11},trail:{fill:"#4c78a8",size:2},style:{"guide-label":{fill:"#000",font:"sans-serif",fontSize:10},"guide-title":{fill:"#000",font:"sans-serif",fontSize:11,fontWeight:"bold"},"group-title":{fill:"#000",font:"sans-serif",fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:"#000",font:"sans-serif",fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:"#ddd"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:"#888",grid:!1,gridWidth:1,gridColor:"#ddd",labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:"#888",tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:"#ddd",gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:"#888",titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}},A,a.config),j)).toRuntime()}Scope.prototype=Subscope.prototype={parse:function parse(a){return parseScope(a,this)},fork:function fork(){return new Subscope(this)},isSubscope:function isSubscope(){return this._subid>0},toRuntime:function toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id:function id(){return(this._subid?this._subid+":":0)+this._id++},add:function add(a){return this.operators.push(a),a.id=this.id(),a.refs&&(a.refs.forEach((function(A){A.$ref=a.id})),a.refs=null),a},proxy:function proxy(a){var A=a instanceof Entry?vega_parser_module_ref(a):a;return this.add(fp({value:A}))},addStream:function addStream(a){return this.streams.push(a),a.id=this.id(),a},addUpdate:function addUpdate(a){return this.updates.push(a),a},finish:function finish(){var a,A;for(a in this.root&&(this.root.root=!0),this.signals)this.signals[a].signal=a;for(a in this.scales)this.scales[a].scale=a;function annotate(a,A,j){var P;a&&((P=a.data||(a.data={}))[A]||(P[A]=[])).push(j)}for(a in this.data)for(var j in annotate((A=this.data[a]).input,a,"input"),annotate(A.output,a,"output"),annotate(A.values,a,"values"),A.index)annotate(A.index[j],a,"index:"+j);return this},pushState:function pushState(a,A,j){this._encode.push(vega_parser_module_ref(this.add(gp({pulse:a})))),this._parent.push(A),this._lookup.push(j?vega_parser_module_ref(this.proxy(j)):null),this._markpath.push(-1)},popState:function popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent:function parent(){return Object(ve.W)(this._parent)},encode:function encode(){return Object(ve.W)(this._encode)},lookup:function lookup(){return Object(ve.W)(this._lookup)},markpath:function markpath(){var a=this._markpath;return++a[a.length-1]},fieldRef:function fieldRef(a,A){if(Object(ve.J)(a))return fieldRef$1(a,A);a.signal||Object(ve.o)("Unsupported field reference: "+Object(ve.bb)(a));var j=a.signal,P=this.field[j];if(!P){var B={name:this.signalRef(j)};A&&(B.as=A),this.field[j]=P=vega_parser_module_ref(this.add(ep(B)))}return P},compareRef:function compareRef(a){var A=this,j=!1,P=function check(a){return isSignal(a)?(j=!0,A.signalRef(a.signal)):function isExpr$1(a){return a&&a.expr}(a)?(j=!0,A.exprRef(a.expr)):a},B=Object(ve.i)(a.field).map(P),q=Object(ve.i)(a.order).map(P);return j?vega_parser_module_ref(this.add(jh({fields:B,orders:q}))):_compareRef(B,q)},keyRef:function keyRef(a,A){var j=!1,P=this.signals;return a=Object(ve.i)(a).map((function check(a){return isSignal(a)?(j=!0,vega_parser_module_ref(P[a.signal])):a})),j?vega_parser_module_ref(this.add(tp({fields:a,flat:A}))):function _keyRef(a,A){var j={$key:a};return A&&(j.$flat=!0),j}(a,A)},sortRef:function sortRef(a){if(!a)return a;var A=aggrField(a.op,a.field),j=a.order||"ascending";return j.signal?vega_parser_module_ref(this.add(jh({fields:A,orders:this.signalRef(j.signal)}))):_compareRef(A,j)},event:function event(a,A){var j=a+":"+A;if(!this.events[j]){var P=this.id();this.streams.push({id:P,source:a,type:A}),this.events[j]=P}return this.events[j]},hasOwnSignal:function hasOwnSignal(a){return Object(ve.w)(this.signals,a)},addSignal:function addSignal(a,A){this.hasOwnSignal(a)&&Object(ve.o)("Duplicate signal name: "+Object(ve.bb)(a));var j=A instanceof Entry?A:this.add(operator(A));return this.signals[a]=j},getSignal:function getSignal(a){return this.signals[a]||Object(ve.o)("Unrecognized signal name: "+Object(ve.bb)(a)),this.signals[a]},signalRef:function signalRef(a){return this.signals[a]?vega_parser_module_ref(this.signals[a]):(Object(ve.w)(this.lambdas,a)||(this.lambdas[a]=this.add(operator(null))),vega_parser_module_ref(this.lambdas[a]))},parseLambdas:function parseLambdas(){for(var a=Object.keys(this.lambdas),A=0,j=a.length;A<j;++A){var P=a[A],B=vega_functions_module_parser(P,this),q=this.lambdas[P];q.params=B.$params,q.update=B.$expr}},property:function property(a){return a&&a.signal?this.signalRef(a.signal):a},objectProperty:function objectProperty(a){return a&&Object(ve.H)(a)?this.signalRef(a.signal||propertyLambda(a)):a},exprRef:function exprRef(a,A){var j={expr:vega_functions_module_parser(a,this)};return A&&(j.expr.$name=A),vega_parser_module_ref(this.add(Yh(j)))},addBinding:function addBinding(a,A){this.bindings||Object(ve.o)("Nested signals do not support binding: "+Object(ve.bb)(a)),this.bindings.push(Object(ve.p)({signal:a},A))},addScaleProj:function addScaleProj(a,A){Object(ve.w)(this.scales,a)&&Object(ve.o)("Duplicate scale or projection name: "+Object(ve.bb)(a)),this.scales[a]=this.add(A)},addScale:function addScale(a,A){this.addScaleProj(a,pp(A))},addProjection:function addProjection(a,A){this.addScaleProj(a,cp(A))},getScale:function getScale(a){return this.scales[a]||Object(ve.o)("Unrecognized scale name: "+Object(ve.bb)(a)),this.scales[a]},scaleRef:function scaleRef(a){return vega_parser_module_ref(this.getScale(a))},scaleType:function scaleType(a){return this.getScale(a).params.type},projectionRef:function projectionRef(a){return this.scaleRef(a)},projectionType:function projectionType(a){return this.scaleType(a)},addData:function addData(a,A){return Object(ve.w)(this.data,a)&&Object(ve.o)("Duplicate data set name: "+Object(ve.bb)(a)),this.data[a]=A},getData:function getData(a){return this.data[a]||Object(ve.o)("Undefined data set name: "+Object(ve.bb)(a)),this.data[a]},addDataPipeline:function addDataPipeline(a,A){return Object(ve.w)(this.data,a)&&Object(ve.o)("Duplicate data set name: "+Object(ve.bb)(a)),this.addData(a,DataScope.fromEntries(this,A))}};var Dg="5.21.0";Object(ve.p)(Ue,P,q,ne,ie,oe,le,se,he,pe,ge,me);var jg=Dg},function(a,A,j){var P=j(41),B=j(155),q=j(116),ne=Object.defineProperty;A.f=j(42)?Object.defineProperty:function defineProperty(a,A,j){if(P(a),A=q(A,!0),P(j),B)try{return ne(a,A,j)}catch(ie){}if("get"in j||"set"in j)throw TypeError("Accessors not supported!");return"value"in j&&(a[A]=j.value),a}},function(a,A,j){var P=j(47);a.exports=function(a){if(!P(a))throw TypeError(a+" is not an object!");return a}},function(a,A,j){a.exports=!j(62)((function(){return 7!=Object.defineProperty({},"a",{get:function get(){return 7}}).a}))},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.del=A.put=A.patch=A.postForm=A.post=A.get=void 0;var P=_interopRequireDefault(j(31)),B=_interopRequireDefault(j(32));A.get=function(){var a=(0,B.default)(P.default.mark((function _callee(a,A){return P.default.wrap((function _callee$(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ie.get(a,A);case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}}),_callee,this)})));return function get(A,j){return a.apply(this,arguments)}}(),A.post=function(){var a=(0,B.default)(P.default.mark((function _callee2(a,A){return P.default.wrap((function _callee2$(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ie.post(a,A);case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}}),_callee2,this)})));return function post(A,j){return a.apply(this,arguments)}}(),A.postForm=function(){var a=(0,B.default)(P.default.mark((function _callee3(a,A){return P.default.wrap((function _callee3$(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ie.post(a,A,!1);case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}}),_callee3,this)})));return function postForm(A,j){return a.apply(this,arguments)}}(),A.patch=function(){var a=(0,B.default)(P.default.mark((function _callee4(a,A){return P.default.wrap((function _callee4$(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ie.patch(a,A);case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}}),_callee4,this)})));return function patch(A,j){return a.apply(this,arguments)}}(),A.put=function(){var a=(0,B.default)(P.default.mark((function _callee5(a,A){return P.default.wrap((function _callee5$(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ie.put(a,A);case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}}),_callee5,this)})));return function put(A,j){return a.apply(this,arguments)}}(),A.del=function(){var a=(0,B.default)(P.default.mark((function _callee6(a,A){return P.default.wrap((function _callee6$(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ie.delete(a,A);case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}}),_callee6,this)})));return function del(A,j){return a.apply(this,arguments)}}();A.configure=function configure(a){ie.configure(a)};var q=_interopRequireDefault(j(76)),ne=j(127);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var ie=new q.default(ne.COMMA_URL_ROOT)},function(a,A,j){"use strict";(function(a){j.d(A,"a",(function(){return Oe})),j.d(A,"b",(function(){return formats})),j.d(A,"c",(function(){return inferType})),j.d(A,"d",(function(){return inferTypes})),j.d(A,"e",(function(){return Se})),j.d(A,"f",(function(){return read})),j.d(A,"g",(function(){return responseType})),j.d(A,"h",(function(){return ye}));var P=j(5),B=j(10),q=j.n(B),ne=j(13),ie=j(0),oe=j(509),se=j(148),le=j(34),he=/^(data:|([A-Za-z]+:)?\/\/)/,pe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,ge=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g;function load(a,A){return _load.apply(this,arguments)}function _load(){return(_load=Object(ne.a)(q.a.mark((function _callee2(a,A){var j,P;return q.a.wrap((function _callee2$(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.sanitize(a,A);case 2:return j=B.sent,P=j.href,B.abrupt("return",j.localFile?this.file(P):this.http(P,A));case 5:case"end":return B.stop()}}),_callee2,this)})))).apply(this,arguments)}function sanitize(a,A){return _sanitize.apply(this,arguments)}function _sanitize(){return(_sanitize=Object(ne.a)(q.a.mark((function _callee3(a,A){var j,P,B,ne,oe,se,le;return q.a.wrap((function _callee3$(q){for(;;)switch(q.prev=q.next){case 0:return A=Object(ie.p)({},this.options,A),j=this.fileAccess,P={href:null},se=pe.test(a.replace(ge,"")),null!=a&&"string"===typeof a&&se||Object(ie.o)("Sanitize failure, invalid URI: "+Object(ie.bb)(a)),le=he.test(a),(oe=A.baseURL)&&!le&&(a.startsWith("/")||oe.endsWith("/")||(a="/"+a),a=oe+a),ne=(B=a.startsWith("file://"))||"file"===A.mode||"http"!==A.mode&&!le&&j,B?a=a.slice("file://".length):a.startsWith("//")&&("file"===A.defaultProtocol?(a=a.slice(2),ne=!0):a=(A.defaultProtocol||"http")+":"+a),Object.defineProperty(P,"localFile",{value:!!ne}),P.href=a,A.target&&(P.target=A.target+""),A.rel&&(P.rel=A.rel+""),"image"===A.context&&A.crossOrigin&&(P.crossOrigin=A.crossOrigin+""),q.abrupt("return",P);case 14:case"end":return q.stop()}}),_callee3,this)})))).apply(this,arguments)}function fileLoader(a){return a?function(A){return new Promise((function(j,P){a.readFile(A,(function(a,A){a?P(a):j(A)}))}))}:fileReject}function fileReject(){return _fileReject.apply(this,arguments)}function _fileReject(){return(_fileReject=Object(ne.a)(q.a.mark((function _callee4(){return q.a.wrap((function _callee4$(a){for(;;)switch(a.prev=a.next){case 0:Object(ie.o)("No file system access.");case 1:case"end":return a.stop()}}),_callee4)})))).apply(this,arguments)}function httpLoader(a){return a?function(){var A=Object(ne.a)(q.a.mark((function _callee(A,j){var P,B,ne;return q.a.wrap((function _callee$(q){for(;;)switch(q.prev=q.next){case 0:return P=Object(ie.p)({},this.options.http,j),B=j&&j.response,q.next=4,a(A,P);case 4:return ne=q.sent,q.abrupt("return",ne.ok?Object(ie.E)(ne[B])?ne[B]():ne.text():Object(ie.o)(ne.status+""+ne.statusText));case 6:case"end":return q.stop()}}),_callee,this)})));return function(a,j){return A.apply(this,arguments)}}():httpReject}function httpReject(){return _httpReject.apply(this,arguments)}function _httpReject(){return(_httpReject=Object(ne.a)(q.a.mark((function _callee5(){return q.a.wrap((function _callee5$(a){for(;;)switch(a.prev=a.next){case 0:Object(ie.o)("No HTTP fetch method available.");case 1:case"end":return a.stop()}}),_callee5)})))).apply(this,arguments)}var me=function isValid(a){return null!=a&&a===a},ve=function isNumber(a){return!Number.isNaN(+a)&&!(a instanceof Date)},ye={boolean:ie.cb,integer:ie.eb,number:ie.eb,date:ie.db,string:ie.gb,unknown:ie.y},_e=[function isBoolean(a){return"true"===a||"false"===a||!0===a||!1===a},function isInteger(a){return ve(a)&&Number.isInteger(+a)},ve,function isDate(a){return!Number.isNaN(Date.parse(a))}],we=["boolean","integer","number","date"];function inferType(a,A){if(!a||!a.length)return"unknown";for(var j,P,B=a.length,q=_e.length,ne=_e.map((function(a,A){return A+1})),ie=0,oe=0;ie<B;++ie)for(P=A?a[ie][A]:a[ie],j=0;j<q;++j)if(ne[j]&&me(P)&&!_e[j](P)&&(ne[j]=0,++oe===_e.length))return"string";return we[ne.reduce((function(a,A){return 0===a?A:a}),0)-1]}function inferTypes(a,A){return A.reduce((function(A,j){return A[j]=inferType(a,j),A}),{})}function delimitedFormat(a){var A=function parse(A,j){var P={delimiter:a};return dsv(A,j?Object(ie.p)(j,P):P)};return A.responseType="text",A}function dsv(a,A){return A.header&&(a=A.header.map(ie.bb).join(A.delimiter)+"\n"+a),Object(oe.a)(A.delimiter).parse(a+"")}function json(A,j){var B=j&&j.property?Object(ie.u)(j.property):ie.y;return Object(ie.H)(A)&&!function isBuffer(A){return!("function"!==typeof a||!Object(ie.E)(a.isBuffer))&&a.isBuffer(A)}(A)?function parseJSON(a,A){!Object(ie.B)(a)&&Object(ie.F)(a)&&(a=Object(P.a)(a));return A&&A.copy?JSON.parse(JSON.stringify(a)):a}(B(A),j):B(JSON.parse(A))}dsv.responseType="text",json.responseType="json";var ke={interior:function interior(a,A){return a!==A},exterior:function exterior(a,A){return a===A}};function topojson(a,A){var j,P,B,q;return a=json(a,A),A&&A.feature?(j=se.a,B=A.feature):A&&A.mesh?(j=se.b,B=A.mesh,q=ke[A.filter]):Object(ie.o)("Missing TopoJSON feature or mesh parameter."),(P=(P=a.objects[B])?j(a,P,q):Object(ie.o)("Invalid TopoJSON object: "+B))&&P.features||[P]}topojson.responseType="json";var Oe={dsv:dsv,csv:delimitedFormat(","),tsv:delimitedFormat("\t"),json:json,topojson:topojson};function formats(a,A){return arguments.length>1?(Oe[a]=A,this):Object(ie.w)(Oe,a)?Oe[a]:null}function responseType(a){var A=formats(a);return A&&A.responseType||"text"}function read(a,A,j,P){var B=formats((A=A||{}).type||"json");return B||Object(ie.o)("Unknown data format type: "+A.type),a=B(a,A),A.parse&&function parse(a,A,j,P){if(!a.length)return;var B=Object(le.e)();j=j||B.timeParse,P=P||B.utcParse;var q,ne,ie,oe,se,he,pe=a.columns||Object.keys(a[0]);"auto"===A&&(A=inferTypes(a,pe));var ge=(pe=Object.keys(A)).map((function(a){var B,q,ne=A[a];if(ne&&(ne.startsWith("date:")||ne.startsWith("utc:")))return("'"===(q=(B=ne.split(/:(.+)?/,2))[1])[0]&&"'"===q[q.length-1]||'"'===q[0]&&'"'===q[q.length-1])&&(q=q.slice(1,-1)),("utc"===B[0]?P:j)(q);if(!ye[ne])throw Error("Illegal format pattern: "+a+":"+ne);return ye[ne]}));for(ie=0,se=a.length,he=pe.length;ie<se;++ie)for(q=a[ie],oe=0;oe<he;++oe)ne=pe[oe],q[ne]=ge[oe](q[ne])}(a,A.parse,j,P),Object(ie.w)(a,"columns")&&delete a.columns,a}var Se=function loaderFactory(a,A){return function(j){return{options:j||{},sanitize:sanitize,load:load,fileAccess:!!A,file:fileLoader(A),http:httpLoader(a)}}}("undefined"!==typeof fetch&&fetch,null)}).call(this,j(48).Buffer)},function(a,A,j){"use strict";function formatDecimalParts(a,A){if((j=(a=A?a.toExponential(A-1):a.toExponential()).indexOf("e"))<0)return null;var j,P=a.slice(0,j);return[P.length>1?P[0]+P.slice(2):P,+a.slice(j+1)]}j.d(A,"b",(function(){return formatDecimalParts})),A.a=function(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}},function(a,A,j){a.exports=j(406)},function(a,A){a.exports=function(a){return"object"===typeof a?null!==a:"function"===typeof a}},function(a,A,j){"use strict";(function(a){var P=j(349),B=j(350),q=j(351);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(a,A){if(kMaxLength()<A)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(A)).__proto__=Buffer.prototype:(null===a&&(a=new Buffer(A)),a.length=A),a}function Buffer(a,A,j){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(a,A,j);if("number"===typeof a){if("string"===typeof A)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,a)}return from(this,a,A,j)}function from(a,A,j,P){if("number"===typeof A)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&A instanceof ArrayBuffer?function fromArrayBuffer(a,A,j,P){if(A.byteLength,j<0||A.byteLength<j)throw new RangeError("'offset' is out of bounds");if(A.byteLength<j+(P||0))throw new RangeError("'length' is out of bounds");A=void 0===j&&void 0===P?new Uint8Array(A):void 0===P?new Uint8Array(A,j):new Uint8Array(A,j,P);Buffer.TYPED_ARRAY_SUPPORT?(a=A).__proto__=Buffer.prototype:a=fromArrayLike(a,A);return a}(a,A,j,P):"string"===typeof A?function fromString(a,A,j){"string"===typeof j&&""!==j||(j="utf8");if(!Buffer.isEncoding(j))throw new TypeError('"encoding" must be a valid string encoding');var P=0|byteLength(A,j),B=(a=createBuffer(a,P)).write(A,j);B!==P&&(a=a.slice(0,B));return a}(a,A,j):function fromObject(a,A){if(Buffer.isBuffer(A)){var j=0|checked(A.length);return 0===(a=createBuffer(a,j)).length||A.copy(a,0,0,j),a}if(A){if("undefined"!==typeof ArrayBuffer&&A.buffer instanceof ArrayBuffer||"length"in A)return"number"!==typeof A.length||function isnan(a){return a!==a}(A.length)?createBuffer(a,0):fromArrayLike(a,A);if("Buffer"===A.type&&q(A.data))return fromArrayLike(a,A.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(a,A)}function assertSize(a){if("number"!==typeof a)throw new TypeError('"size" argument must be a number');if(a<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(a,A){if(assertSize(A),a=createBuffer(a,A<0?0:0|checked(A)),!Buffer.TYPED_ARRAY_SUPPORT)for(var j=0;j<A;++j)a[j]=0;return a}function fromArrayLike(a,A){var j=A.length<0?0:0|checked(A.length);a=createBuffer(a,j);for(var P=0;P<j;P+=1)a[P]=255&A[P];return a}function checked(a){if(a>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|a}function byteLength(a,A){if(Buffer.isBuffer(a))return a.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var j=a.length;if(0===j)return 0;for(var P=!1;;)switch(A){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":case void 0:return utf8ToBytes(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*j;case"hex":return j>>>1;case"base64":return base64ToBytes(a).length;default:if(P)return utf8ToBytes(a).length;A=(""+A).toLowerCase(),P=!0}}function slowToString(a,A,j){var P=!1;if((void 0===A||A<0)&&(A=0),A>this.length)return"";if((void 0===j||j>this.length)&&(j=this.length),j<=0)return"";if((j>>>=0)<=(A>>>=0))return"";for(a||(a="utf8");;)switch(a){case"hex":return hexSlice(this,A,j);case"utf8":case"utf-8":return utf8Slice(this,A,j);case"ascii":return asciiSlice(this,A,j);case"latin1":case"binary":return latin1Slice(this,A,j);case"base64":return base64Slice(this,A,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,A,j);default:if(P)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),P=!0}}function swap(a,A,j){var P=a[A];a[A]=a[j],a[j]=P}function bidirectionalIndexOf(a,A,j,P,B){if(0===a.length)return-1;if("string"===typeof j?(P=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),j=+j,isNaN(j)&&(j=B?0:a.length-1),j<0&&(j=a.length+j),j>=a.length){if(B)return-1;j=a.length-1}else if(j<0){if(!B)return-1;j=0}if("string"===typeof A&&(A=Buffer.from(A,P)),Buffer.isBuffer(A))return 0===A.length?-1:arrayIndexOf(a,A,j,P,B);if("number"===typeof A)return A&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?B?Uint8Array.prototype.indexOf.call(a,A,j):Uint8Array.prototype.lastIndexOf.call(a,A,j):arrayIndexOf(a,[A],j,P,B);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(a,A,j,P,B){var q,ne=1,ie=a.length,oe=A.length;if(void 0!==P&&("ucs2"===(P=String(P).toLowerCase())||"ucs-2"===P||"utf16le"===P||"utf-16le"===P)){if(a.length<2||A.length<2)return-1;ne=2,ie/=2,oe/=2,j/=2}function read(a,A){return 1===ne?a[A]:a.readUInt16BE(A*ne)}if(B){var se=-1;for(q=j;q<ie;q++)if(read(a,q)===read(A,-1===se?0:q-se)){if(-1===se&&(se=q),q-se+1===oe)return se*ne}else-1!==se&&(q-=q-se),se=-1}else for(j+oe>ie&&(j=ie-oe),q=j;q>=0;q--){for(var le=!0,he=0;he<oe;he++)if(read(a,q+he)!==read(A,he)){le=!1;break}if(le)return q}return-1}function hexWrite(a,A,j,P){j=Number(j)||0;var B=a.length-j;P?(P=Number(P))>B&&(P=B):P=B;var q=A.length;if(q%2!==0)throw new TypeError("Invalid hex string");P>q/2&&(P=q/2);for(var ne=0;ne<P;++ne){var ie=parseInt(A.substr(2*ne,2),16);if(isNaN(ie))return ne;a[j+ne]=ie}return ne}function utf8Write(a,A,j,P){return blitBuffer(utf8ToBytes(A,a.length-j),a,j,P)}function asciiWrite(a,A,j,P){return blitBuffer(function asciiToBytes(a){for(var A=[],j=0;j<a.length;++j)A.push(255&a.charCodeAt(j));return A}(A),a,j,P)}function latin1Write(a,A,j,P){return asciiWrite(a,A,j,P)}function base64Write(a,A,j,P){return blitBuffer(base64ToBytes(A),a,j,P)}function ucs2Write(a,A,j,P){return blitBuffer(function utf16leToBytes(a,A){for(var j,P,B,q=[],ne=0;ne<a.length&&!((A-=2)<0);++ne)j=a.charCodeAt(ne),P=j>>8,B=j%256,q.push(B),q.push(P);return q}(A,a.length-j),a,j,P)}function base64Slice(a,A,j){return 0===A&&j===a.length?P.fromByteArray(a):P.fromByteArray(a.slice(A,j))}function utf8Slice(a,A,j){j=Math.min(a.length,j);for(var P=[],B=A;B<j;){var q,ne,ie,oe,se=a[B],le=null,he=se>239?4:se>223?3:se>191?2:1;if(B+he<=j)switch(he){case 1:se<128&&(le=se);break;case 2:128===(192&(q=a[B+1]))&&(oe=(31&se)<<6|63&q)>127&&(le=oe);break;case 3:q=a[B+1],ne=a[B+2],128===(192&q)&&128===(192&ne)&&(oe=(15&se)<<12|(63&q)<<6|63&ne)>2047&&(oe<55296||oe>57343)&&(le=oe);break;case 4:q=a[B+1],ne=a[B+2],ie=a[B+3],128===(192&q)&&128===(192&ne)&&128===(192&ie)&&(oe=(15&se)<<18|(63&q)<<12|(63&ne)<<6|63&ie)>65535&&oe<1114112&&(le=oe)}null===le?(le=65533,he=1):le>65535&&(le-=65536,P.push(le>>>10&1023|55296),le=56320|1023&le),P.push(le),B+=he}return function decodeCodePointsArray(a){var A=a.length;if(A<=4096)return String.fromCharCode.apply(String,a);var j="",P=0;for(;P<A;)j+=String.fromCharCode.apply(String,a.slice(P,P+=4096));return j}(P)}A.Buffer=Buffer,A.SlowBuffer=function SlowBuffer(a){+a!=a&&(a=0);return Buffer.alloc(+a)},A.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==a.TYPED_ARRAY_SUPPORT?a.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function foo(){return 42}},42===a.foo()&&"function"===typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(A){return!1}}(),A.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(a){return a.__proto__=Buffer.prototype,a},Buffer.from=function(a,A,j){return from(null,a,A,j)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(a,A,j){return function alloc(a,A,j,P){return assertSize(A),A<=0?createBuffer(a,A):void 0!==j?"string"===typeof P?createBuffer(a,A).fill(j,P):createBuffer(a,A).fill(j):createBuffer(a,A)}(null,a,A,j)},Buffer.allocUnsafe=function(a){return allocUnsafe(null,a)},Buffer.allocUnsafeSlow=function(a){return allocUnsafe(null,a)},Buffer.isBuffer=function isBuffer(a){return!(null==a||!a._isBuffer)},Buffer.compare=function compare(a,A){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(A))throw new TypeError("Arguments must be Buffers");if(a===A)return 0;for(var j=a.length,P=A.length,B=0,q=Math.min(j,P);B<q;++B)if(a[B]!==A[B]){j=a[B],P=A[B];break}return j<P?-1:P<j?1:0},Buffer.isEncoding=function isEncoding(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(a,A){if(!q(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return Buffer.alloc(0);var j;if(void 0===A)for(A=0,j=0;j<a.length;++j)A+=a[j].length;var P=Buffer.allocUnsafe(A),B=0;for(j=0;j<a.length;++j){var ne=a[j];if(!Buffer.isBuffer(ne))throw new TypeError('"list" argument must be an Array of Buffers');ne.copy(P,B),B+=ne.length}return P},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var A=0;A<a;A+=2)swap(this,A,A+1);return this},Buffer.prototype.swap32=function swap32(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var A=0;A<a;A+=4)swap(this,A,A+3),swap(this,A+1,A+2);return this},Buffer.prototype.swap64=function swap64(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var A=0;A<a;A+=8)swap(this,A,A+7),swap(this,A+1,A+6),swap(this,A+2,A+5),swap(this,A+3,A+4);return this},Buffer.prototype.toString=function toString(){var a=0|this.length;return 0===a?"":0===arguments.length?utf8Slice(this,0,a):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(a){if(!Buffer.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===Buffer.compare(this,a)},Buffer.prototype.inspect=function inspect(){var a="",j=A.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,j).match(/.{2}/g).join(" "),this.length>j&&(a+=" ... ")),"<Buffer "+a+">"},Buffer.prototype.compare=function compare(a,A,j,P,B){if(!Buffer.isBuffer(a))throw new TypeError("Argument must be a Buffer");if(void 0===A&&(A=0),void 0===j&&(j=a?a.length:0),void 0===P&&(P=0),void 0===B&&(B=this.length),A<0||j>a.length||P<0||B>this.length)throw new RangeError("out of range index");if(P>=B&&A>=j)return 0;if(P>=B)return-1;if(A>=j)return 1;if(this===a)return 0;for(var q=(B>>>=0)-(P>>>=0),ne=(j>>>=0)-(A>>>=0),ie=Math.min(q,ne),oe=this.slice(P,B),se=a.slice(A,j),le=0;le<ie;++le)if(oe[le]!==se[le]){q=oe[le],ne=se[le];break}return q<ne?-1:ne<q?1:0},Buffer.prototype.includes=function includes(a,A,j){return-1!==this.indexOf(a,A,j)},Buffer.prototype.indexOf=function indexOf(a,A,j){return bidirectionalIndexOf(this,a,A,j,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(a,A,j){return bidirectionalIndexOf(this,a,A,j,!1)},Buffer.prototype.write=function write(a,A,j,P){if(void 0===A)P="utf8",j=this.length,A=0;else if(void 0===j&&"string"===typeof A)P=A,j=this.length,A=0;else{if(!isFinite(A))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");A|=0,isFinite(j)?(j|=0,void 0===P&&(P="utf8")):(P=j,j=void 0)}var B=this.length-A;if((void 0===j||j>B)&&(j=B),a.length>0&&(j<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");for(var q=!1;;)switch(P){case"hex":return hexWrite(this,a,A,j);case"utf8":case"utf-8":return utf8Write(this,a,A,j);case"ascii":return asciiWrite(this,a,A,j);case"latin1":case"binary":return latin1Write(this,a,A,j);case"base64":return base64Write(this,a,A,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,a,A,j);default:if(q)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),q=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function asciiSlice(a,A,j){var P="";j=Math.min(a.length,j);for(var B=A;B<j;++B)P+=String.fromCharCode(127&a[B]);return P}function latin1Slice(a,A,j){var P="";j=Math.min(a.length,j);for(var B=A;B<j;++B)P+=String.fromCharCode(a[B]);return P}function hexSlice(a,A,j){var P=a.length;(!A||A<0)&&(A=0),(!j||j<0||j>P)&&(j=P);for(var B="",q=A;q<j;++q)B+=toHex(a[q]);return B}function utf16leSlice(a,A,j){for(var P=a.slice(A,j),B="",q=0;q<P.length;q+=2)B+=String.fromCharCode(P[q]+256*P[q+1]);return B}function checkOffset(a,A,j){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+A>j)throw new RangeError("Trying to access beyond buffer length")}function checkInt(a,A,j,P,B,q){if(!Buffer.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>B||A<q)throw new RangeError('"value" argument is out of bounds');if(j+P>a.length)throw new RangeError("Index out of range")}function objectWriteUInt16(a,A,j,P){A<0&&(A=65535+A+1);for(var B=0,q=Math.min(a.length-j,2);B<q;++B)a[j+B]=(A&255<<8*(P?B:1-B))>>>8*(P?B:1-B)}function objectWriteUInt32(a,A,j,P){A<0&&(A=4294967295+A+1);for(var B=0,q=Math.min(a.length-j,4);B<q;++B)a[j+B]=A>>>8*(P?B:3-B)&255}function checkIEEE754(a,A,j,P,B,q){if(j+P>a.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function writeFloat(a,A,j,P,q){return q||checkIEEE754(a,0,j,4),B.write(a,A,j,P,23,4),j+4}function writeDouble(a,A,j,P,q){return q||checkIEEE754(a,0,j,8),B.write(a,A,j,P,52,8),j+8}Buffer.prototype.slice=function slice(a,A){var j,P=this.length;if((a=~~a)<0?(a+=P)<0&&(a=0):a>P&&(a=P),(A=void 0===A?P:~~A)<0?(A+=P)<0&&(A=0):A>P&&(A=P),A<a&&(A=a),Buffer.TYPED_ARRAY_SUPPORT)(j=this.subarray(a,A)).__proto__=Buffer.prototype;else{var B=A-a;j=new Buffer(B,void 0);for(var q=0;q<B;++q)j[q]=this[q+a]}return j},Buffer.prototype.readUIntLE=function readUIntLE(a,A,j){a|=0,A|=0,j||checkOffset(a,A,this.length);for(var P=this[a],B=1,q=0;++q<A&&(B*=256);)P+=this[a+q]*B;return P},Buffer.prototype.readUIntBE=function readUIntBE(a,A,j){a|=0,A|=0,j||checkOffset(a,A,this.length);for(var P=this[a+--A],B=1;A>0&&(B*=256);)P+=this[a+--A]*B;return P},Buffer.prototype.readUInt8=function readUInt8(a,A){return A||checkOffset(a,1,this.length),this[a]},Buffer.prototype.readUInt16LE=function readUInt16LE(a,A){return A||checkOffset(a,2,this.length),this[a]|this[a+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(a,A){return A||checkOffset(a,2,this.length),this[a]<<8|this[a+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(a,A){return A||checkOffset(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(a,A){return A||checkOffset(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},Buffer.prototype.readIntLE=function readIntLE(a,A,j){a|=0,A|=0,j||checkOffset(a,A,this.length);for(var P=this[a],B=1,q=0;++q<A&&(B*=256);)P+=this[a+q]*B;return P>=(B*=128)&&(P-=Math.pow(2,8*A)),P},Buffer.prototype.readIntBE=function readIntBE(a,A,j){a|=0,A|=0,j||checkOffset(a,A,this.length);for(var P=A,B=1,q=this[a+--P];P>0&&(B*=256);)q+=this[a+--P]*B;return q>=(B*=128)&&(q-=Math.pow(2,8*A)),q},Buffer.prototype.readInt8=function readInt8(a,A){return A||checkOffset(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},Buffer.prototype.readInt16LE=function readInt16LE(a,A){A||checkOffset(a,2,this.length);var j=this[a]|this[a+1]<<8;return 32768&j?4294901760|j:j},Buffer.prototype.readInt16BE=function readInt16BE(a,A){A||checkOffset(a,2,this.length);var j=this[a+1]|this[a]<<8;return 32768&j?4294901760|j:j},Buffer.prototype.readInt32LE=function readInt32LE(a,A){return A||checkOffset(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(a,A){return A||checkOffset(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},Buffer.prototype.readFloatLE=function readFloatLE(a,A){return A||checkOffset(a,4,this.length),B.read(this,a,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(a,A){return A||checkOffset(a,4,this.length),B.read(this,a,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(a,A){return A||checkOffset(a,8,this.length),B.read(this,a,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(a,A){return A||checkOffset(a,8,this.length),B.read(this,a,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(a,A,j,P){(a=+a,A|=0,j|=0,P)||checkInt(this,a,A,j,Math.pow(2,8*j)-1,0);var B=1,q=0;for(this[A]=255&a;++q<j&&(B*=256);)this[A+q]=a/B&255;return A+j},Buffer.prototype.writeUIntBE=function writeUIntBE(a,A,j,P){(a=+a,A|=0,j|=0,P)||checkInt(this,a,A,j,Math.pow(2,8*j)-1,0);var B=j-1,q=1;for(this[A+B]=255&a;--B>=0&&(q*=256);)this[A+B]=a/q&255;return A+j},Buffer.prototype.writeUInt8=function writeUInt8(a,A,j){return a=+a,A|=0,j||checkInt(this,a,A,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[A]=255&a,A+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(a,A,j){return a=+a,A|=0,j||checkInt(this,a,A,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[A]=255&a,this[A+1]=a>>>8):objectWriteUInt16(this,a,A,!0),A+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(a,A,j){return a=+a,A|=0,j||checkInt(this,a,A,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[A]=a>>>8,this[A+1]=255&a):objectWriteUInt16(this,a,A,!1),A+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(a,A,j){return a=+a,A|=0,j||checkInt(this,a,A,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[A+3]=a>>>24,this[A+2]=a>>>16,this[A+1]=a>>>8,this[A]=255&a):objectWriteUInt32(this,a,A,!0),A+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(a,A,j){return a=+a,A|=0,j||checkInt(this,a,A,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[A]=a>>>24,this[A+1]=a>>>16,this[A+2]=a>>>8,this[A+3]=255&a):objectWriteUInt32(this,a,A,!1),A+4},Buffer.prototype.writeIntLE=function writeIntLE(a,A,j,P){if(a=+a,A|=0,!P){var B=Math.pow(2,8*j-1);checkInt(this,a,A,j,B-1,-B)}var q=0,ne=1,ie=0;for(this[A]=255&a;++q<j&&(ne*=256);)a<0&&0===ie&&0!==this[A+q-1]&&(ie=1),this[A+q]=(a/ne>>0)-ie&255;return A+j},Buffer.prototype.writeIntBE=function writeIntBE(a,A,j,P){if(a=+a,A|=0,!P){var B=Math.pow(2,8*j-1);checkInt(this,a,A,j,B-1,-B)}var q=j-1,ne=1,ie=0;for(this[A+q]=255&a;--q>=0&&(ne*=256);)a<0&&0===ie&&0!==this[A+q+1]&&(ie=1),this[A+q]=(a/ne>>0)-ie&255;return A+j},Buffer.prototype.writeInt8=function writeInt8(a,A,j){return a=+a,A|=0,j||checkInt(this,a,A,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),a<0&&(a=255+a+1),this[A]=255&a,A+1},Buffer.prototype.writeInt16LE=function writeInt16LE(a,A,j){return a=+a,A|=0,j||checkInt(this,a,A,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[A]=255&a,this[A+1]=a>>>8):objectWriteUInt16(this,a,A,!0),A+2},Buffer.prototype.writeInt16BE=function writeInt16BE(a,A,j){return a=+a,A|=0,j||checkInt(this,a,A,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[A]=a>>>8,this[A+1]=255&a):objectWriteUInt16(this,a,A,!1),A+2},Buffer.prototype.writeInt32LE=function writeInt32LE(a,A,j){return a=+a,A|=0,j||checkInt(this,a,A,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[A]=255&a,this[A+1]=a>>>8,this[A+2]=a>>>16,this[A+3]=a>>>24):objectWriteUInt32(this,a,A,!0),A+4},Buffer.prototype.writeInt32BE=function writeInt32BE(a,A,j){return a=+a,A|=0,j||checkInt(this,a,A,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),Buffer.TYPED_ARRAY_SUPPORT?(this[A]=a>>>24,this[A+1]=a>>>16,this[A+2]=a>>>8,this[A+3]=255&a):objectWriteUInt32(this,a,A,!1),A+4},Buffer.prototype.writeFloatLE=function writeFloatLE(a,A,j){return writeFloat(this,a,A,!0,j)},Buffer.prototype.writeFloatBE=function writeFloatBE(a,A,j){return writeFloat(this,a,A,!1,j)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(a,A,j){return writeDouble(this,a,A,!0,j)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(a,A,j){return writeDouble(this,a,A,!1,j)},Buffer.prototype.copy=function copy(a,A,j,P){if(j||(j=0),P||0===P||(P=this.length),A>=a.length&&(A=a.length),A||(A=0),P>0&&P<j&&(P=j),P===j)return 0;if(0===a.length||0===this.length)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("sourceStart out of bounds");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),a.length-A<P-j&&(P=a.length-A+j);var B,q=P-j;if(this===a&&j<A&&A<P)for(B=q-1;B>=0;--B)a[B+A]=this[B+j];else if(q<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(B=0;B<q;++B)a[B+A]=this[B+j];else Uint8Array.prototype.set.call(a,this.subarray(j,j+q),A);return q},Buffer.prototype.fill=function fill(a,A,j,P){if("string"===typeof a){if("string"===typeof A?(P=A,A=0,j=this.length):"string"===typeof j&&(P=j,j=this.length),1===a.length){var B=a.charCodeAt(0);B<256&&(a=B)}if(void 0!==P&&"string"!==typeof P)throw new TypeError("encoding must be a string");if("string"===typeof P&&!Buffer.isEncoding(P))throw new TypeError("Unknown encoding: "+P)}else"number"===typeof a&&(a&=255);if(A<0||this.length<A||this.length<j)throw new RangeError("Out of range index");if(j<=A)return this;var q;if(A>>>=0,j=void 0===j?this.length:j>>>0,a||(a=0),"number"===typeof a)for(q=A;q<j;++q)this[q]=a;else{var ne=Buffer.isBuffer(a)?a:utf8ToBytes(new Buffer(a,P).toString()),ie=ne.length;for(q=0;q<j-A;++q)this[q+A]=ne[q%ie]}return this};var ne=/[^+\/0-9A-Za-z-_]/g;function toHex(a){return a<16?"0"+a.toString(16):a.toString(16)}function utf8ToBytes(a,A){var j;A=A||1/0;for(var P=a.length,B=null,q=[],ne=0;ne<P;++ne){if((j=a.charCodeAt(ne))>55295&&j<57344){if(!B){if(j>56319){(A-=3)>-1&&q.push(239,191,189);continue}if(ne+1===P){(A-=3)>-1&&q.push(239,191,189);continue}B=j;continue}if(j<56320){(A-=3)>-1&&q.push(239,191,189),B=j;continue}j=65536+(B-55296<<10|j-56320)}else B&&(A-=3)>-1&&q.push(239,191,189);if(B=null,j<128){if((A-=1)<0)break;q.push(j)}else if(j<2048){if((A-=2)<0)break;q.push(j>>6|192,63&j|128)}else if(j<65536){if((A-=3)<0)break;q.push(j>>12|224,j>>6&63|128,63&j|128)}else{if(!(j<1114112))throw new Error("Invalid code point");if((A-=4)<0)break;q.push(j>>18|240,j>>12&63|128,j>>6&63|128,63&j|128)}}return q}function base64ToBytes(a){return P.toByteArray(function base64clean(a){if((a=function stringtrim(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}(a).replace(ne,"")).length<2)return"";for(;a.length%4!==0;)a+="=";return a}(a))}function blitBuffer(a,A,j,P){for(var B=0;B<P&&!(B+j>=A.length||B>=a.length);++B)A[B+j]=a[B];return B}}).call(this,j(35))},function(a,A,j){"use strict";var P=j(181);a.exports=function mean(a){if(0===a.length)throw new Error("mean requires at least one data point");return P(a)/a.length}},function(a,A,j){"use strict";j.d(A,"a",(function(){return _unsupportedIterableToArray}));var P=j(78);function _unsupportedIterableToArray(a,A){if(a){if("string"===typeof a)return Object(P.a)(a,A);var j=Object.prototype.toString.call(a).slice(8,-1);return"Object"===j&&a.constructor&&(j=a.constructor.name),"Map"===j||"Set"===j?Array.from(j):"Arguments"===j||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?Object(P.a)(a,A):void 0}}},function(a,A,j){"use strict";var P=j(16),B=j(12),q=Object(P.a)((function(a){return a.setHours(0,0,0,0)}),(function(a,A){return a.setDate(a.getDate()+A)}),(function(a,A){return(A-a-(A.getTimezoneOffset()-a.getTimezoneOffset())*B.c)/B.a}),(function(a){return a.getDate()-1}));A.a=q;q.range},function(a,A,j){"use strict";var P=j(16),B=j(12),q=Object(P.a)((function(a){a.setUTCHours(0,0,0,0)}),(function(a,A){a.setUTCDate(a.getUTCDate()+A)}),(function(a,A){return(A-a)/B.a}),(function(a){return a.getUTCDate()-1}));A.a=q;q.range},function(a,A,j){"use strict";var P=j(16),B=Object(P.a)((function(a){a.setMonth(0,1),a.setHours(0,0,0,0)}),(function(a,A){a.setFullYear(a.getFullYear()+A)}),(function(a,A){return A.getFullYear()-a.getFullYear()}),(function(a){return a.getFullYear()}));B.every=function(a){return isFinite(a=Math.floor(a))&&a>0?Object(P.a)((function(A){A.setFullYear(Math.floor(A.getFullYear()/a)*a),A.setMonth(0,1),A.setHours(0,0,0,0)}),(function(A,j){A.setFullYear(A.getFullYear()+j*a)})):null},A.a=B;B.range},function(a,A,j){"use strict";var P=j(16),B=Object(P.a)((function(a){a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)}),(function(a,A){a.setUTCFullYear(a.getUTCFullYear()+A)}),(function(a,A){return A.getUTCFullYear()-a.getUTCFullYear()}),(function(a){return a.getUTCFullYear()}));B.every=function(a){return isFinite(a=Math.floor(a))&&a>0?Object(P.a)((function(A){A.setUTCFullYear(Math.floor(A.getUTCFullYear()/a)*a),A.setUTCMonth(0,1),A.setUTCHours(0,0,0,0)}),(function(A,j){A.setUTCFullYear(A.getUTCFullYear()+j*a)})):null},A.a=B;B.range},,function(a,A,j){var P=j(40),B=j(72);a.exports=j(42)?function(a,A,j){return P.f(a,A,B(1,j))}:function(a,A,j){return a[A]=j,a}},function(a,A){var j={}.hasOwnProperty;a.exports=function(a,A){return j.call(a,A)}},function(a,A,j){(function(a){a.exports=function(){"use strict";var A,j;function hooks(){return A.apply(null,arguments)}function isArray(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function isObject(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function hasOwnProp(a,A){return Object.prototype.hasOwnProperty.call(a,A)}function isObjectEmpty(a){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(a).length;var A;for(A in a)if(hasOwnProp(a,A))return!1;return!0}function isUndefined(a){return void 0===a}function isNumber(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}function isDate(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function map(a,A){var j,P=[],B=a.length;for(j=0;j<B;++j)P.push(A(a[j],j));return P}function extend(a,A){for(var j in A)hasOwnProp(A,j)&&(a[j]=A[j]);return hasOwnProp(A,"toString")&&(a.toString=A.toString),hasOwnProp(A,"valueOf")&&(a.valueOf=A.valueOf),a}function createUTC(a,A,j,P){return createLocalOrUTC(a,A,j,P,!0).utc()}function getParsingFlags(a){return null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),a._pf}function isValid(a){if(null==a._isValid){var A=getParsingFlags(a),P=j.call(A.parsedDateParts,(function(a){return null!=a})),B=!isNaN(a._d.getTime())&&A.overflow<0&&!A.empty&&!A.invalidEra&&!A.invalidMonth&&!A.invalidWeekday&&!A.weekdayMismatch&&!A.nullInput&&!A.invalidFormat&&!A.userInvalidated&&(!A.meridiem||A.meridiem&&P);if(a._strict&&(B=B&&0===A.charsLeftOver&&0===A.unusedTokens.length&&void 0===A.bigHour),null!=Object.isFrozen&&Object.isFrozen(a))return B;a._isValid=B}return a._isValid}function createInvalid(a){var A=createUTC(NaN);return null!=a?extend(getParsingFlags(A),a):getParsingFlags(A).userInvalidated=!0,A}j=Array.prototype.some?Array.prototype.some:function some(a){var A,j=Object(this),P=j.length>>>0;for(A=0;A<P;A++)if(A in j&&a.call(this,j[A],A,j))return!0;return!1};var P=hooks.momentProperties=[],B=!1;function copyConfig(a,A){var j,B,q,ne=P.length;if(isUndefined(A._isAMomentObject)||(a._isAMomentObject=A._isAMomentObject),isUndefined(A._i)||(a._i=A._i),isUndefined(A._f)||(a._f=A._f),isUndefined(A._l)||(a._l=A._l),isUndefined(A._strict)||(a._strict=A._strict),isUndefined(A._tzm)||(a._tzm=A._tzm),isUndefined(A._isUTC)||(a._isUTC=A._isUTC),isUndefined(A._offset)||(a._offset=A._offset),isUndefined(A._pf)||(a._pf=getParsingFlags(A)),isUndefined(A._locale)||(a._locale=A._locale),ne>0)for(j=0;j<ne;j++)isUndefined(q=A[B=P[j]])||(a[B]=q);return a}function Moment(a){copyConfig(this,a),this._d=new Date(null!=a._d?a._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===B&&(B=!0,hooks.updateOffset(this),B=!1)}function isMoment(a){return a instanceof Moment||null!=a&&null!=a._isAMomentObject}function warn(a){!1===hooks.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function deprecate(a,A){var j=!0;return extend((function(){if(null!=hooks.deprecationHandler&&hooks.deprecationHandler(null,a),j){var P,B,q,ne=[],ie=arguments.length;for(B=0;B<ie;B++){if(P="","object"===typeof arguments[B]){for(q in P+="\n["+B+"] ",arguments[0])hasOwnProp(arguments[0],q)&&(P+=q+": "+arguments[0][q]+", ");P=P.slice(0,-2)}else P=arguments[B];ne.push(P)}warn(a+"\nArguments: "+Array.prototype.slice.call(ne).join("")+"\n"+(new Error).stack),j=!1}return A.apply(this,arguments)}),A)}var q,ne={};function deprecateSimple(a,A){null!=hooks.deprecationHandler&&hooks.deprecationHandler(a,A),ne[a]||(warn(A),ne[a]=!0)}function isFunction(a){return"undefined"!==typeof Function&&a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function mergeConfigs(a,A){var j,P=extend({},a);for(j in A)hasOwnProp(A,j)&&(isObject(a[j])&&isObject(A[j])?(P[j]={},extend(P[j],a[j]),extend(P[j],A[j])):null!=A[j]?P[j]=A[j]:delete P[j]);for(j in a)hasOwnProp(a,j)&&!hasOwnProp(A,j)&&isObject(a[j])&&(P[j]=extend({},P[j]));return P}function Locale(a){null!=a&&this.set(a)}function zeroFill(a,A,j){var P=""+Math.abs(a),B=A-P.length;return(a>=0?j?"+":"":"-")+Math.pow(10,Math.max(0,B)).toString().substr(1)+P}hooks.suppressDeprecationWarnings=!1,hooks.deprecationHandler=null,q=Object.keys?Object.keys:function keys(a){var A,j=[];for(A in a)hasOwnProp(a,A)&&j.push(A);return j};var ie=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,oe=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,se={},le={};function addFormatToken(a,A,j,P){var B=P;"string"===typeof P&&(B=function func(){return this[P]()}),a&&(le[a]=B),A&&(le[A[0]]=function(){return zeroFill(B.apply(this,arguments),A[1],A[2])}),j&&(le[j]=function(){return this.localeData().ordinal(B.apply(this,arguments),a)})}function formatMoment(a,A){return a.isValid()?(A=expandFormat(A,a.localeData()),se[A]=se[A]||function makeFormatFunction(a){var A,j,P,B=a.match(ie);for(A=0,j=B.length;A<j;A++)le[B[A]]?B[A]=le[B[A]]:B[A]=(P=B[A]).match(/\[[\s\S]/)?P.replace(/^\[|\]$/g,""):P.replace(/\\/g,"");return function(A){var P,q="";for(P=0;P<j;P++)q+=isFunction(B[P])?B[P].call(A,a):B[P];return q}}(A),se[A](a)):a.localeData().invalidDate()}function expandFormat(a,A){var j=5;function replaceLongDateFormatTokens(a){return A.longDateFormat(a)||a}for(oe.lastIndex=0;j>=0&&oe.test(a);)a=a.replace(oe,replaceLongDateFormatTokens),oe.lastIndex=0,j-=1;return a}var he={};function addUnitAlias(a,A){var j=a.toLowerCase();he[j]=he[j+"s"]=he[A]=a}function normalizeUnits(a){return"string"===typeof a?he[a]||he[a.toLowerCase()]:void 0}function normalizeObjectUnits(a){var A,j,P={};for(j in a)hasOwnProp(a,j)&&(A=normalizeUnits(j))&&(P[A]=a[j]);return P}var pe={};function addUnitPriority(a,A){pe[a]=A}function isLeapYear(a){return a%4===0&&a%100!==0||a%400===0}function absFloor(a){return a<0?Math.ceil(a)||0:Math.floor(a)}function toInt(a){var A=+a,j=0;return 0!==A&&isFinite(A)&&(j=absFloor(A)),j}function makeGetSet(a,A){return function(j){return null!=j?(set$1(this,a,j),hooks.updateOffset(this,A),this):get(this,a)}}function get(a,A){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+A]():NaN}function set$1(a,A,j){a.isValid()&&!isNaN(j)&&("FullYear"===A&&isLeapYear(a.year())&&1===a.month()&&29===a.date()?(j=toInt(j),a._d["set"+(a._isUTC?"UTC":"")+A](j,a.month(),daysInMonth(j,a.month()))):a._d["set"+(a._isUTC?"UTC":"")+A](j))}var ge,me=/\d/,ve=/\d\d/,ye=/\d{3}/,_e=/\d{4}/,we=/[+-]?\d{6}/,ke=/\d\d?/,Oe=/\d\d\d\d?/,Se=/\d\d\d\d\d\d?/,Te=/\d{1,3}/,Ae=/\d{1,4}/,je=/[+-]?\d{1,6}/,Fe=/\d+/,Re=/[+-]?\d+/,Me=/Z|[+-]\d\d:?\d\d/gi,Ne=/Z|[+-]\d\d(?::?\d\d)?/gi,Be=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function addRegexToken(a,A,j){ge[a]=isFunction(A)?A:function(a,P){return a&&j?j:A}}function getParseRegexForToken(a,A){return hasOwnProp(ge,a)?ge[a](A._strict,A._locale):new RegExp(function unescapeFormat(a){return regexEscape(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(a,A,j,P,B){return A||j||P||B})))}(a))}function regexEscape(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}ge={};var Ue,We={};function addParseToken(a,A){var j,P,B=A;for("string"===typeof a&&(a=[a]),isNumber(A)&&(B=function func(a,j){j[A]=toInt(a)}),P=a.length,j=0;j<P;j++)We[a[j]]=B}function addWeekParseToken(a,A){addParseToken(a,(function(a,j,P,B){P._w=P._w||{},A(a,P._w,P,B)}))}function addTimeToArrayFromToken(a,A,j){null!=A&&hasOwnProp(We,a)&&We[a](A,j._a,j,a)}function daysInMonth(a,A){if(isNaN(a)||isNaN(A))return NaN;var j=function mod(a,A){return(a%A+A)%A}(A,12);return a+=(A-j)/12,1===j?isLeapYear(a)?29:28:31-j%7%2}Ue=Array.prototype.indexOf?Array.prototype.indexOf:function indexOf(a){var A;for(A=0;A<this.length;++A)if(this[A]===a)return A;return-1},addFormatToken("M",["MM",2],"Mo",(function(){return this.month()+1})),addFormatToken("MMM",0,0,(function(a){return this.localeData().monthsShort(this,a)})),addFormatToken("MMMM",0,0,(function(a){return this.localeData().months(this,a)})),addUnitAlias("month","M"),addUnitPriority("month",8),addRegexToken("M",ke),addRegexToken("MM",ke,ve),addRegexToken("MMM",(function(a,A){return A.monthsShortRegex(a)})),addRegexToken("MMMM",(function(a,A){return A.monthsRegex(a)})),addParseToken(["M","MM"],(function(a,A){A[1]=toInt(a)-1})),addParseToken(["MMM","MMMM"],(function(a,A,j,P){var B=j._locale.monthsParse(a,P,j._strict);null!=B?A[1]=B:getParsingFlags(j).invalidMonth=a}));var Ve="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ye="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),$e=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Xe=Be,et=Be;function handleStrictParse(a,A,j){var P,B,q,ne=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],P=0;P<12;++P)q=createUTC([2e3,P]),this._shortMonthsParse[P]=this.monthsShort(q,"").toLocaleLowerCase(),this._longMonthsParse[P]=this.months(q,"").toLocaleLowerCase();return j?"MMM"===A?-1!==(B=Ue.call(this._shortMonthsParse,ne))?B:null:-1!==(B=Ue.call(this._longMonthsParse,ne))?B:null:"MMM"===A?-1!==(B=Ue.call(this._shortMonthsParse,ne))||-1!==(B=Ue.call(this._longMonthsParse,ne))?B:null:-1!==(B=Ue.call(this._longMonthsParse,ne))||-1!==(B=Ue.call(this._shortMonthsParse,ne))?B:null}function setMonth(a,A){var j;if(!a.isValid())return a;if("string"===typeof A)if(/^\d+$/.test(A))A=toInt(A);else if(!isNumber(A=a.localeData().monthsParse(A)))return a;return j=Math.min(a.date(),daysInMonth(a.year(),A)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](A,j),a}function getSetMonth(a){return null!=a?(setMonth(this,a),hooks.updateOffset(this,!0),this):get(this,"Month")}function computeMonthsParse(){function cmpLenRev(a,A){return A.length-a.length}var a,A,j=[],P=[],B=[];for(a=0;a<12;a++)A=createUTC([2e3,a]),j.push(this.monthsShort(A,"")),P.push(this.months(A,"")),B.push(this.months(A,"")),B.push(this.monthsShort(A,""));for(j.sort(cmpLenRev),P.sort(cmpLenRev),B.sort(cmpLenRev),a=0;a<12;a++)j[a]=regexEscape(j[a]),P[a]=regexEscape(P[a]);for(a=0;a<24;a++)B[a]=regexEscape(B[a]);this._monthsRegex=new RegExp("^("+B.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+P.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+j.join("|")+")","i")}function daysInYear(a){return isLeapYear(a)?366:365}addFormatToken("Y",0,0,(function(){var a=this.year();return a<=9999?zeroFill(a,4):"+"+a})),addFormatToken(0,["YY",2],0,(function(){return this.year()%100})),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addUnitPriority("year",1),addRegexToken("Y",Re),addRegexToken("YY",ke,ve),addRegexToken("YYYY",Ae,_e),addRegexToken("YYYYY",je,we),addRegexToken("YYYYYY",je,we),addParseToken(["YYYYY","YYYYYY"],0),addParseToken("YYYY",(function(a,A){A[0]=2===a.length?hooks.parseTwoDigitYear(a):toInt(a)})),addParseToken("YY",(function(a,A){A[0]=hooks.parseTwoDigitYear(a)})),addParseToken("Y",(function(a,A){A[0]=parseInt(a,10)})),hooks.parseTwoDigitYear=function(a){return toInt(a)+(toInt(a)>68?1900:2e3)};var tt=makeGetSet("FullYear",!0);function createDate(a,A,j,P,B,q,ne){var ie;return a<100&&a>=0?(ie=new Date(a+400,A,j,P,B,q,ne),isFinite(ie.getFullYear())&&ie.setFullYear(a)):ie=new Date(a,A,j,P,B,q,ne),ie}function createUTCDate(a){var A,j;return a<100&&a>=0?((j=Array.prototype.slice.call(arguments))[0]=a+400,A=new Date(Date.UTC.apply(null,j)),isFinite(A.getUTCFullYear())&&A.setUTCFullYear(a)):A=new Date(Date.UTC.apply(null,arguments)),A}function firstWeekOffset(a,A,j){var P=7+A-j;return-(7+createUTCDate(a,0,P).getUTCDay()-A)%7+P-1}function dayOfYearFromWeeks(a,A,j,P,B){var q,ne,ie=1+7*(A-1)+(7+j-P)%7+firstWeekOffset(a,P,B);return ie<=0?ne=daysInYear(q=a-1)+ie:ie>daysInYear(a)?(q=a+1,ne=ie-daysInYear(a)):(q=a,ne=ie),{year:q,dayOfYear:ne}}function weekOfYear(a,A,j){var P,B,q=firstWeekOffset(a.year(),A,j),ne=Math.floor((a.dayOfYear()-q-1)/7)+1;return ne<1?P=ne+weeksInYear(B=a.year()-1,A,j):ne>weeksInYear(a.year(),A,j)?(P=ne-weeksInYear(a.year(),A,j),B=a.year()+1):(B=a.year(),P=ne),{week:P,year:B}}function weeksInYear(a,A,j){var P=firstWeekOffset(a,A,j),B=firstWeekOffset(a+1,A,j);return(daysInYear(a)-P+B)/7}function shiftWeekdays(a,A){return a.slice(A,7).concat(a.slice(0,A))}addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addUnitPriority("week",5),addUnitPriority("isoWeek",5),addRegexToken("w",ke),addRegexToken("ww",ke,ve),addRegexToken("W",ke),addRegexToken("WW",ke,ve),addWeekParseToken(["w","ww","W","WW"],(function(a,A,j,P){A[P.substr(0,1)]=toInt(a)})),addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,(function(a){return this.localeData().weekdaysMin(this,a)})),addFormatToken("ddd",0,0,(function(a){return this.localeData().weekdaysShort(this,a)})),addFormatToken("dddd",0,0,(function(a){return this.localeData().weekdays(this,a)})),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addUnitPriority("day",11),addUnitPriority("weekday",11),addUnitPriority("isoWeekday",11),addRegexToken("d",ke),addRegexToken("e",ke),addRegexToken("E",ke),addRegexToken("dd",(function(a,A){return A.weekdaysMinRegex(a)})),addRegexToken("ddd",(function(a,A){return A.weekdaysShortRegex(a)})),addRegexToken("dddd",(function(a,A){return A.weekdaysRegex(a)})),addWeekParseToken(["dd","ddd","dddd"],(function(a,A,j,P){var B=j._locale.weekdaysParse(a,P,j._strict);null!=B?A.d=B:getParsingFlags(j).invalidWeekday=a})),addWeekParseToken(["d","e","E"],(function(a,A,j,P){A[P]=toInt(a)}));var nt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),rt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),it="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),at=Be,ot=Be,st=Be;function handleStrictParse$1(a,A,j){var P,B,q,ne=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],P=0;P<7;++P)q=createUTC([2e3,1]).day(P),this._minWeekdaysParse[P]=this.weekdaysMin(q,"").toLocaleLowerCase(),this._shortWeekdaysParse[P]=this.weekdaysShort(q,"").toLocaleLowerCase(),this._weekdaysParse[P]=this.weekdays(q,"").toLocaleLowerCase();return j?"dddd"===A?-1!==(B=Ue.call(this._weekdaysParse,ne))?B:null:"ddd"===A?-1!==(B=Ue.call(this._shortWeekdaysParse,ne))?B:null:-1!==(B=Ue.call(this._minWeekdaysParse,ne))?B:null:"dddd"===A?-1!==(B=Ue.call(this._weekdaysParse,ne))||-1!==(B=Ue.call(this._shortWeekdaysParse,ne))||-1!==(B=Ue.call(this._minWeekdaysParse,ne))?B:null:"ddd"===A?-1!==(B=Ue.call(this._shortWeekdaysParse,ne))||-1!==(B=Ue.call(this._weekdaysParse,ne))||-1!==(B=Ue.call(this._minWeekdaysParse,ne))?B:null:-1!==(B=Ue.call(this._minWeekdaysParse,ne))||-1!==(B=Ue.call(this._weekdaysParse,ne))||-1!==(B=Ue.call(this._shortWeekdaysParse,ne))?B:null}function computeWeekdaysParse(){function cmpLenRev(a,A){return A.length-a.length}var a,A,j,P,B,q=[],ne=[],ie=[],oe=[];for(a=0;a<7;a++)A=createUTC([2e3,1]).day(a),j=regexEscape(this.weekdaysMin(A,"")),P=regexEscape(this.weekdaysShort(A,"")),B=regexEscape(this.weekdays(A,"")),q.push(j),ne.push(P),ie.push(B),oe.push(j),oe.push(P),oe.push(B);q.sort(cmpLenRev),ne.sort(cmpLenRev),ie.sort(cmpLenRev),oe.sort(cmpLenRev),this._weekdaysRegex=new RegExp("^("+oe.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+ie.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+ne.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+q.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function meridiem(a,A){addFormatToken(a,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),A)}))}function matchMeridiem(a,A){return A._meridiemParse}addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,hFormat),addFormatToken("k",["kk",2],0,(function kFormat(){return this.hours()||24})),addFormatToken("hmm",0,0,(function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)})),addFormatToken("hmmss",0,0,(function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)})),addFormatToken("Hmm",0,0,(function(){return""+this.hours()+zeroFill(this.minutes(),2)})),addFormatToken("Hmmss",0,0,(function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)})),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addUnitPriority("hour",13),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",ke),addRegexToken("h",ke),addRegexToken("k",ke),addRegexToken("HH",ke,ve),addRegexToken("hh",ke,ve),addRegexToken("kk",ke,ve),addRegexToken("hmm",Oe),addRegexToken("hmmss",Se),addRegexToken("Hmm",Oe),addRegexToken("Hmmss",Se),addParseToken(["H","HH"],3),addParseToken(["k","kk"],(function(a,A,j){var P=toInt(a);A[3]=24===P?0:P})),addParseToken(["a","A"],(function(a,A,j){j._isPm=j._locale.isPM(a),j._meridiem=a})),addParseToken(["h","hh"],(function(a,A,j){A[3]=toInt(a),getParsingFlags(j).bigHour=!0})),addParseToken("hmm",(function(a,A,j){var P=a.length-2;A[3]=toInt(a.substr(0,P)),A[4]=toInt(a.substr(P)),getParsingFlags(j).bigHour=!0})),addParseToken("hmmss",(function(a,A,j){var P=a.length-4,B=a.length-2;A[3]=toInt(a.substr(0,P)),A[4]=toInt(a.substr(P,2)),A[5]=toInt(a.substr(B)),getParsingFlags(j).bigHour=!0})),addParseToken("Hmm",(function(a,A,j){var P=a.length-2;A[3]=toInt(a.substr(0,P)),A[4]=toInt(a.substr(P))})),addParseToken("Hmmss",(function(a,A,j){var P=a.length-4,B=a.length-2;A[3]=toInt(a.substr(0,P)),A[4]=toInt(a.substr(P,2)),A[5]=toInt(a.substr(B))}));var ut,lt=makeGetSet("Hours",!0),ct={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ve,monthsShort:Ye,week:{dow:0,doy:6},weekdays:nt,weekdaysMin:it,weekdaysShort:rt,meridiemParse:/[ap]\.?m?\.?/i},ft={},dt={};function commonPrefix(a,A){var j,P=Math.min(a.length,A.length);for(j=0;j<P;j+=1)if(a[j]!==A[j])return j;return P}function normalizeLocale(a){return a?a.toLowerCase().replace("_","-"):a}function loadLocale(A){var j=null;if(void 0===ft[A]&&"undefined"!==typeof a&&a&&a.exports&&function isLocaleNameSane(a){return null!=a.match("^[^/\\\\]*$")}(A))try{j=ut._abbr,function webpackMissingModule(){var a=new Error("Cannot find module 'undefined'");throw a.code="MODULE_NOT_FOUND",a}(),getSetGlobalLocale(j)}catch(P){ft[A]=null}return ft[A]}function getSetGlobalLocale(a,A){var j;return a&&((j=isUndefined(A)?getLocale(a):defineLocale(a,A))?ut=j:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?")),ut._abbr}function defineLocale(a,A){if(null!==A){var j,P=ct;if(A.abbr=a,null!=ft[a])deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),P=ft[a]._config;else if(null!=A.parentLocale)if(null!=ft[A.parentLocale])P=ft[A.parentLocale]._config;else{if(null==(j=loadLocale(A.parentLocale)))return dt[A.parentLocale]||(dt[A.parentLocale]=[]),dt[A.parentLocale].push({name:a,config:A}),null;P=j._config}return ft[a]=new Locale(mergeConfigs(P,A)),dt[a]&&dt[a].forEach((function(a){defineLocale(a.name,a.config)})),getSetGlobalLocale(a),ft[a]}return delete ft[a],null}function getLocale(a){var A;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return ut;if(!isArray(a)){if(A=loadLocale(a))return A;a=[a]}return function chooseLocale(a){for(var A,j,P,B,q=0;q<a.length;){for(A=(B=normalizeLocale(a[q]).split("-")).length,j=(j=normalizeLocale(a[q+1]))?j.split("-"):null;A>0;){if(P=loadLocale(B.slice(0,A).join("-")))return P;if(j&&j.length>=A&&commonPrefix(B,j)>=A-1)break;A--}q++}return ut}(a)}function checkOverflow(a){var A,j=a._a;return j&&-2===getParsingFlags(a).overflow&&(A=j[1]<0||j[1]>11?1:j[2]<1||j[2]>daysInMonth(j[0],j[1])?2:j[3]<0||j[3]>24||24===j[3]&&(0!==j[4]||0!==j[5]||0!==j[6])?3:j[4]<0||j[4]>59?4:j[5]<0||j[5]>59?5:j[6]<0||j[6]>999?6:-1,getParsingFlags(a)._overflowDayOfYear&&(A<0||A>2)&&(A=2),getParsingFlags(a)._overflowWeeks&&-1===A&&(A=7),getParsingFlags(a)._overflowWeekday&&-1===A&&(A=8),getParsingFlags(a).overflow=A),a}var ht=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gt=/Z|[+-]\d\d(?::?\d\d)?/,mt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],vt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],yt=/^\/?Date\((-?\d+)/i,bt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,_t={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function configFromISO(a){var A,j,P,B,q,ne,ie=a._i,oe=ht.exec(ie)||pt.exec(ie),se=mt.length,le=vt.length;if(oe){for(getParsingFlags(a).iso=!0,A=0,j=se;A<j;A++)if(mt[A][1].exec(oe[1])){B=mt[A][0],P=!1!==mt[A][2];break}if(null==B)return void(a._isValid=!1);if(oe[3]){for(A=0,j=le;A<j;A++)if(vt[A][1].exec(oe[3])){q=(oe[2]||" ")+vt[A][0];break}if(null==q)return void(a._isValid=!1)}if(!P&&null!=q)return void(a._isValid=!1);if(oe[4]){if(!gt.exec(oe[4]))return void(a._isValid=!1);ne="Z"}a._f=B+(q||"")+(ne||""),configFromStringAndFormat(a)}else a._isValid=!1}function untruncateYear(a){var A=parseInt(a,10);return A<=49?2e3+A:A<=999?1900+A:A}function configFromRFC2822(a){var A,j=bt.exec(function preprocessRFC2822(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}(a._i));if(j){if(A=function extractFromRFC2822Strings(a,A,j,P,B,q){var ne=[untruncateYear(a),Ye.indexOf(A),parseInt(j,10),parseInt(P,10),parseInt(B,10)];return q&&ne.push(parseInt(q,10)),ne}(j[4],j[3],j[2],j[5],j[6],j[7]),!function checkWeekday(a,A,j){return!a||rt.indexOf(a)===new Date(A[0],A[1],A[2]).getDay()||(getParsingFlags(j).weekdayMismatch=!0,j._isValid=!1,!1)}(j[1],A,a))return;a._a=A,a._tzm=function calculateOffset(a,A,j){if(a)return _t[a];if(A)return 0;var P=parseInt(j,10),B=P%100;return(P-B)/100*60+B}(j[8],j[9],j[10]),a._d=createUTCDate.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),getParsingFlags(a).rfc2822=!0}else a._isValid=!1}function defaults(a,A,j){return null!=a?a:null!=A?A:j}function configFromArray(a){var A,j,P,B,q,ne=[];if(!a._d){for(P=function currentDateArray(a){var A=new Date(hooks.now());return a._useUTC?[A.getUTCFullYear(),A.getUTCMonth(),A.getUTCDate()]:[A.getFullYear(),A.getMonth(),A.getDate()]}(a),a._w&&null==a._a[2]&&null==a._a[1]&&function dayOfYearFromWeekInfo(a){var A,j,P,B,q,ne,ie,oe,se;null!=(A=a._w).GG||null!=A.W||null!=A.E?(q=1,ne=4,j=defaults(A.GG,a._a[0],weekOfYear(createLocal(),1,4).year),P=defaults(A.W,1),((B=defaults(A.E,1))<1||B>7)&&(oe=!0)):(q=a._locale._week.dow,ne=a._locale._week.doy,se=weekOfYear(createLocal(),q,ne),j=defaults(A.gg,a._a[0],se.year),P=defaults(A.w,se.week),null!=A.d?((B=A.d)<0||B>6)&&(oe=!0):null!=A.e?(B=A.e+q,(A.e<0||A.e>6)&&(oe=!0)):B=q),P<1||P>weeksInYear(j,q,ne)?getParsingFlags(a)._overflowWeeks=!0:null!=oe?getParsingFlags(a)._overflowWeekday=!0:(ie=dayOfYearFromWeeks(j,P,B,q,ne),a._a[0]=ie.year,a._dayOfYear=ie.dayOfYear)}(a),null!=a._dayOfYear&&(q=defaults(a._a[0],P[0]),(a._dayOfYear>daysInYear(q)||0===a._dayOfYear)&&(getParsingFlags(a)._overflowDayOfYear=!0),j=createUTCDate(q,0,a._dayOfYear),a._a[1]=j.getUTCMonth(),a._a[2]=j.getUTCDate()),A=0;A<3&&null==a._a[A];++A)a._a[A]=ne[A]=P[A];for(;A<7;A++)a._a[A]=ne[A]=null==a._a[A]?2===A?1:0:a._a[A];24===a._a[3]&&0===a._a[4]&&0===a._a[5]&&0===a._a[6]&&(a._nextDay=!0,a._a[3]=0),a._d=(a._useUTC?createUTCDate:createDate).apply(null,ne),B=a._useUTC?a._d.getUTCDay():a._d.getDay(),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[3]=24),a._w&&"undefined"!==typeof a._w.d&&a._w.d!==B&&(getParsingFlags(a).weekdayMismatch=!0)}}function configFromStringAndFormat(a){if(a._f!==hooks.ISO_8601)if(a._f!==hooks.RFC_2822){a._a=[],getParsingFlags(a).empty=!0;var A,j,P,B,q,ne,oe,se=""+a._i,he=se.length,pe=0;for(oe=(P=expandFormat(a._f,a._locale).match(ie)||[]).length,A=0;A<oe;A++)B=P[A],(j=(se.match(getParseRegexForToken(B,a))||[])[0])&&((q=se.substr(0,se.indexOf(j))).length>0&&getParsingFlags(a).unusedInput.push(q),se=se.slice(se.indexOf(j)+j.length),pe+=j.length),le[B]?(j?getParsingFlags(a).empty=!1:getParsingFlags(a).unusedTokens.push(B),addTimeToArrayFromToken(B,j,a)):a._strict&&!j&&getParsingFlags(a).unusedTokens.push(B);getParsingFlags(a).charsLeftOver=he-pe,se.length>0&&getParsingFlags(a).unusedInput.push(se),a._a[3]<=12&&!0===getParsingFlags(a).bigHour&&a._a[3]>0&&(getParsingFlags(a).bigHour=void 0),getParsingFlags(a).parsedDateParts=a._a.slice(0),getParsingFlags(a).meridiem=a._meridiem,a._a[3]=function meridiemFixWrap(a,A,j){var P;return null==j?A:null!=a.meridiemHour?a.meridiemHour(A,j):null!=a.isPM?((P=a.isPM(j))&&A<12&&(A+=12),P||12!==A||(A=0),A):A}(a._locale,a._a[3],a._meridiem),null!==(ne=getParsingFlags(a).era)&&(a._a[0]=a._locale.erasConvertYear(ne,a._a[0])),configFromArray(a),checkOverflow(a)}else configFromRFC2822(a);else configFromISO(a)}function prepareConfig(a){var A=a._i,j=a._f;return a._locale=a._locale||getLocale(a._l),null===A||void 0===j&&""===A?createInvalid({nullInput:!0}):("string"===typeof A&&(a._i=A=a._locale.preparse(A)),isMoment(A)?new Moment(checkOverflow(A)):(isDate(A)?a._d=A:isArray(j)?function configFromStringAndArray(a){var A,j,P,B,q,ne,ie=!1,oe=a._f.length;if(0===oe)return getParsingFlags(a).invalidFormat=!0,void(a._d=new Date(NaN));for(B=0;B<oe;B++)q=0,ne=!1,A=copyConfig({},a),null!=a._useUTC&&(A._useUTC=a._useUTC),A._f=a._f[B],configFromStringAndFormat(A),isValid(A)&&(ne=!0),q+=getParsingFlags(A).charsLeftOver,q+=10*getParsingFlags(A).unusedTokens.length,getParsingFlags(A).score=q,ie?q<P&&(P=q,j=A):(null==P||q<P||ne)&&(P=q,j=A,ne&&(ie=!0));extend(a,j||A)}(a):j?configFromStringAndFormat(a):function configFromInput(a){var A=a._i;isUndefined(A)?a._d=new Date(hooks.now()):isDate(A)?a._d=new Date(A.valueOf()):"string"===typeof A?function configFromString(a){var A=yt.exec(a._i);null===A?(configFromISO(a),!1===a._isValid&&(delete a._isValid,configFromRFC2822(a),!1===a._isValid&&(delete a._isValid,a._strict?a._isValid=!1:hooks.createFromInputFallback(a)))):a._d=new Date(+A[1])}(a):isArray(A)?(a._a=map(A.slice(0),(function(a){return parseInt(a,10)})),configFromArray(a)):isObject(A)?function configFromObject(a){if(!a._d){var A=normalizeObjectUnits(a._i),j=void 0===A.day?A.date:A.day;a._a=map([A.year,A.month,j,A.hour,A.minute,A.second,A.millisecond],(function(a){return a&&parseInt(a,10)})),configFromArray(a)}}(a):isNumber(A)?a._d=new Date(A):hooks.createFromInputFallback(a)}(a),isValid(a)||(a._d=null),a))}function createLocalOrUTC(a,A,j,P,B){var q={};return!0!==A&&!1!==A||(P=A,A=void 0),!0!==j&&!1!==j||(P=j,j=void 0),(isObject(a)&&isObjectEmpty(a)||isArray(a)&&0===a.length)&&(a=void 0),q._isAMomentObject=!0,q._useUTC=q._isUTC=B,q._l=j,q._i=a,q._f=A,q._strict=P,function createFromConfig(a){var A=new Moment(checkOverflow(prepareConfig(a)));return A._nextDay&&(A.add(1,"d"),A._nextDay=void 0),A}(q)}function createLocal(a,A,j,P){return createLocalOrUTC(a,A,j,P,!1)}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))})),hooks.ISO_8601=function(){},hooks.RFC_2822=function(){};var xt=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var a=createLocal.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:createInvalid()})),wt=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var a=createLocal.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:createInvalid()}));function pickBy(a,A){var j,P;if(1===A.length&&isArray(A[0])&&(A=A[0]),!A.length)return createLocal();for(j=A[0],P=1;P<A.length;++P)A[P].isValid()&&!A[P][a](j)||(j=A[P]);return j}var kt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Duration(a){var A=normalizeObjectUnits(a),j=A.year||0,P=A.quarter||0,B=A.month||0,q=A.week||A.isoWeek||0,ne=A.day||0,ie=A.hour||0,oe=A.minute||0,se=A.second||0,le=A.millisecond||0;this._isValid=function isDurationValid(a){var A,j,P=!1,B=kt.length;for(A in a)if(hasOwnProp(a,A)&&(-1===Ue.call(kt,A)||null!=a[A]&&isNaN(a[A])))return!1;for(j=0;j<B;++j)if(a[kt[j]]){if(P)return!1;parseFloat(a[kt[j]])!==toInt(a[kt[j]])&&(P=!0)}return!0}(A),this._milliseconds=+le+1e3*se+6e4*oe+1e3*ie*60*60,this._days=+ne+7*q,this._months=+B+3*P+12*j,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(a){return a instanceof Duration}function absRound(a){return a<0?-1*Math.round(-1*a):Math.round(a)}function offset(a,A){addFormatToken(a,0,0,(function(){var a=this.utcOffset(),j="+";return a<0&&(a=-a,j="-"),j+zeroFill(~~(a/60),2)+A+zeroFill(~~a%60,2)}))}offset("Z",":"),offset("ZZ",""),addRegexToken("Z",Ne),addRegexToken("ZZ",Ne),addParseToken(["Z","ZZ"],(function(a,A,j){j._useUTC=!0,j._tzm=offsetFromString(Ne,a)}));var Ot=/([\+\-]|\d\d)/gi;function offsetFromString(a,A){var j,P,B=(A||"").match(a);return null===B?null:0===(P=60*(j=((B[B.length-1]||[])+"").match(Ot)||["-",0,0])[1]+toInt(j[2]))?0:"+"===j[0]?P:-P}function cloneWithOffset(a,A){var j,P;return A._isUTC?(j=A.clone(),P=(isMoment(a)||isDate(a)?a.valueOf():createLocal(a).valueOf())-j.valueOf(),j._d.setTime(j._d.valueOf()+P),hooks.updateOffset(j,!1),j):createLocal(a).local()}function getDateOffset(a){return-Math.round(a._d.getTimezoneOffset())}function isUtc(){return!!this.isValid()&&this._isUTC&&0===this._offset}hooks.updateOffset=function(){};var St=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Et=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(a,A){var j,P,B,q=a,ne=null;return isDuration(a)?q={ms:a._milliseconds,d:a._days,M:a._months}:isNumber(a)||!isNaN(+a)?(q={},A?q[A]=+a:q.milliseconds=+a):(ne=St.exec(a))?(j="-"===ne[1]?-1:1,q={y:0,d:toInt(ne[2])*j,h:toInt(ne[3])*j,m:toInt(ne[4])*j,s:toInt(ne[5])*j,ms:toInt(absRound(1e3*ne[6]))*j}):(ne=Et.exec(a))?(j="-"===ne[1]?-1:1,q={y:parseIso(ne[2],j),M:parseIso(ne[3],j),w:parseIso(ne[4],j),d:parseIso(ne[5],j),h:parseIso(ne[6],j),m:parseIso(ne[7],j),s:parseIso(ne[8],j)}):null==q?q={}:"object"===typeof q&&("from"in q||"to"in q)&&(B=function momentsDifference(a,A){var j;return a.isValid()&&A.isValid()?(A=cloneWithOffset(A,a),a.isBefore(A)?j=positiveMomentsDifference(a,A):((j=positiveMomentsDifference(A,a)).milliseconds=-j.milliseconds,j.months=-j.months),j):{milliseconds:0,months:0}}(createLocal(q.from),createLocal(q.to)),(q={}).ms=B.milliseconds,q.M=B.months),P=new Duration(q),isDuration(a)&&hasOwnProp(a,"_locale")&&(P._locale=a._locale),isDuration(a)&&hasOwnProp(a,"_isValid")&&(P._isValid=a._isValid),P}function parseIso(a,A){var j=a&&parseFloat(a.replace(",","."));return(isNaN(j)?0:j)*A}function positiveMomentsDifference(a,A){var j={};return j.months=A.month()-a.month()+12*(A.year()-a.year()),a.clone().add(j.months,"M").isAfter(A)&&--j.months,j.milliseconds=+A-+a.clone().add(j.months,"M"),j}function createAdder(a,A){return function(j,P){var B;return null===P||isNaN(+P)||(deprecateSimple(A,"moment()."+A+"(period, number) is deprecated. Please use moment()."+A+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),B=j,j=P,P=B),addSubtract(this,createDuration(j,P),a),this}}function addSubtract(a,A,j,P){var B=A._milliseconds,q=absRound(A._days),ne=absRound(A._months);a.isValid()&&(P=null==P||P,ne&&setMonth(a,get(a,"Month")+ne*j),q&&set$1(a,"Date",get(a,"Date")+q*j),B&&a._d.setTime(a._d.valueOf()+B*j),P&&hooks.updateOffset(a,q||ne))}createDuration.fn=Duration.prototype,createDuration.invalid=function createInvalid$1(){return createDuration(NaN)};var Ct=createAdder(1,"add"),Tt=createAdder(-1,"subtract");function isString(a){return"string"===typeof a||a instanceof String}function isMomentInput(a){return isMoment(a)||isDate(a)||isString(a)||isNumber(a)||function isNumberOrStringArray(a){var A=isArray(a),j=!1;return A&&(j=0===a.filter((function(A){return!isNumber(A)&&isString(a)})).length),A&&j}(a)||function isMomentInputObject(a){var A,j,P=isObject(a)&&!isObjectEmpty(a),B=!1,q=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],ne=q.length;for(A=0;A<ne;A+=1)j=q[A],B=B||hasOwnProp(a,j);return P&&B}(a)||null===a||void 0===a}function isCalendarSpec(a){var A,j=isObject(a)&&!isObjectEmpty(a),P=!1,B=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(A=0;A<B.length;A+=1)P=P||hasOwnProp(a,B[A]);return j&&P}function monthDiff(a,A){if(a.date()<A.date())return-monthDiff(A,a);var j=12*(A.year()-a.year())+(A.month()-a.month()),P=a.clone().add(j,"months");return-(j+(A-P<0?(A-P)/(P-a.clone().add(j-1,"months")):(A-P)/(a.clone().add(j+1,"months")-P)))||0}function locale(a){var A;return void 0===a?this._locale._abbr:(null!=(A=getLocale(a))&&(this._locale=A),this)}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Dt=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(a){return void 0===a?this.localeData():this.locale(a)}));function localeData(){return this._locale}function mod$1(a,A){return(a%A+A)%A}function localStartOfDate(a,A,j){return a<100&&a>=0?new Date(a+400,A,j)-126227808e5:new Date(a,A,j).valueOf()}function utcStartOfDate(a,A,j){return a<100&&a>=0?Date.UTC(a+400,A,j)-126227808e5:Date.UTC(a,A,j)}function matchEraAbbr(a,A){return A.erasAbbrRegex(a)}function computeErasParse(){var a,A,j=[],P=[],B=[],q=[],ne=this.eras();for(a=0,A=ne.length;a<A;++a)P.push(regexEscape(ne[a].name)),j.push(regexEscape(ne[a].abbr)),B.push(regexEscape(ne[a].narrow)),q.push(regexEscape(ne[a].name)),q.push(regexEscape(ne[a].abbr)),q.push(regexEscape(ne[a].narrow));this._erasRegex=new RegExp("^("+q.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+P.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+j.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+B.join("|")+")","i")}function addWeekYearFormatToken(a,A){addFormatToken(0,[a,a.length],0,A)}function getSetWeekYearHelper(a,A,j,P,B){var q;return null==a?weekOfYear(this,P,B).year:(A>(q=weeksInYear(a,P,B))&&(A=q),setWeekAll.call(this,a,A,j,P,B))}function setWeekAll(a,A,j,P,B){var q=dayOfYearFromWeeks(a,A,j,P,B),ne=createUTCDate(q.year,0,q.dayOfYear);return this.year(ne.getUTCFullYear()),this.month(ne.getUTCMonth()),this.date(ne.getUTCDate()),this}addFormatToken("N",0,0,"eraAbbr"),addFormatToken("NN",0,0,"eraAbbr"),addFormatToken("NNN",0,0,"eraAbbr"),addFormatToken("NNNN",0,0,"eraName"),addFormatToken("NNNNN",0,0,"eraNarrow"),addFormatToken("y",["y",1],"yo","eraYear"),addFormatToken("y",["yy",2],0,"eraYear"),addFormatToken("y",["yyy",3],0,"eraYear"),addFormatToken("y",["yyyy",4],0,"eraYear"),addRegexToken("N",matchEraAbbr),addRegexToken("NN",matchEraAbbr),addRegexToken("NNN",matchEraAbbr),addRegexToken("NNNN",(function matchEraName(a,A){return A.erasNameRegex(a)})),addRegexToken("NNNNN",(function matchEraNarrow(a,A){return A.erasNarrowRegex(a)})),addParseToken(["N","NN","NNN","NNNN","NNNNN"],(function(a,A,j,P){var B=j._locale.erasParse(a,P,j._strict);B?getParsingFlags(j).era=B:getParsingFlags(j).invalidEra=a})),addRegexToken("y",Fe),addRegexToken("yy",Fe),addRegexToken("yyy",Fe),addRegexToken("yyyy",Fe),addRegexToken("yo",(function matchEraYearOrdinal(a,A){return A._eraYearOrdinalRegex||Fe})),addParseToken(["y","yy","yyy","yyyy"],0),addParseToken(["yo"],(function(a,A,j,P){var B;j._locale._eraYearOrdinalRegex&&(B=a.match(j._locale._eraYearOrdinalRegex)),j._locale.eraYearOrdinalParse?A[0]=j._locale.eraYearOrdinalParse(a,B):A[0]=parseInt(a,10)})),addFormatToken(0,["gg",2],0,(function(){return this.weekYear()%100})),addFormatToken(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addUnitPriority("weekYear",1),addUnitPriority("isoWeekYear",1),addRegexToken("G",Re),addRegexToken("g",Re),addRegexToken("GG",ke,ve),addRegexToken("gg",ke,ve),addRegexToken("GGGG",Ae,_e),addRegexToken("gggg",Ae,_e),addRegexToken("GGGGG",je,we),addRegexToken("ggggg",je,we),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],(function(a,A,j,P){A[P.substr(0,2)]=toInt(a)})),addWeekParseToken(["gg","GG"],(function(a,A,j,P){A[P]=hooks.parseTwoDigitYear(a)})),addFormatToken("Q",0,"Qo","quarter"),addUnitAlias("quarter","Q"),addUnitPriority("quarter",7),addRegexToken("Q",me),addParseToken("Q",(function(a,A){A[1]=3*(toInt(a)-1)})),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addUnitPriority("date",9),addRegexToken("D",ke),addRegexToken("DD",ke,ve),addRegexToken("Do",(function(a,A){return a?A._dayOfMonthOrdinalParse||A._ordinalParse:A._dayOfMonthOrdinalParseLenient})),addParseToken(["D","DD"],2),addParseToken("Do",(function(a,A){A[2]=toInt(a.match(ke)[0])}));var At=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addUnitPriority("dayOfYear",4),addRegexToken("DDD",Te),addRegexToken("DDDD",ye),addParseToken(["DDD","DDDD"],(function(a,A,j){j._dayOfYear=toInt(a)})),addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addUnitPriority("minute",14),addRegexToken("m",ke),addRegexToken("mm",ke,ve),addParseToken(["m","mm"],4);var jt=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addUnitPriority("second",15),addRegexToken("s",ke),addRegexToken("ss",ke,ve),addParseToken(["s","ss"],5);var Ft,Pt,Rt=makeGetSet("Seconds",!1);for(addFormatToken("S",0,0,(function(){return~~(this.millisecond()/100)})),addFormatToken(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),addFormatToken(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),addFormatToken(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),addFormatToken(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),addFormatToken(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),addFormatToken(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),addUnitAlias("millisecond","ms"),addUnitPriority("millisecond",16),addRegexToken("S",Te,me),addRegexToken("SS",Te,ve),addRegexToken("SSS",Te,ye),Ft="SSSS";Ft.length<=9;Ft+="S")addRegexToken(Ft,Fe);function parseMs(a,A){A[6]=toInt(1e3*("0."+a))}for(Ft="S";Ft.length<=9;Ft+="S")addParseToken(Ft,parseMs);Pt=makeGetSet("Milliseconds",!1),addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var Mt=Moment.prototype;function preParsePostFormat(a){return a}Mt.add=Ct,Mt.calendar=function calendar$1(a,A){1===arguments.length&&(arguments[0]?isMomentInput(arguments[0])?(a=arguments[0],A=void 0):isCalendarSpec(arguments[0])&&(A=arguments[0],a=void 0):(a=void 0,A=void 0));var j=a||createLocal(),P=cloneWithOffset(j,this).startOf("day"),B=hooks.calendarFormat(this,P)||"sameElse",q=A&&(isFunction(A[B])?A[B].call(this,j):A[B]);return this.format(q||this.localeData().calendar(B,this,createLocal(j)))},Mt.clone=function clone(){return new Moment(this)},Mt.diff=function diff(a,A,j){var P,B,q;if(!this.isValid())return NaN;if(!(P=cloneWithOffset(a,this)).isValid())return NaN;switch(B=6e4*(P.utcOffset()-this.utcOffset()),A=normalizeUnits(A)){case"year":q=monthDiff(this,P)/12;break;case"month":q=monthDiff(this,P);break;case"quarter":q=monthDiff(this,P)/3;break;case"second":q=(this-P)/1e3;break;case"minute":q=(this-P)/6e4;break;case"hour":q=(this-P)/36e5;break;case"day":q=(this-P-B)/864e5;break;case"week":q=(this-P-B)/6048e5;break;default:q=this-P}return j?q:absFloor(q)},Mt.endOf=function endOf(a){var A,j;if(void 0===(a=normalizeUnits(a))||"millisecond"===a||!this.isValid())return this;switch(j=this._isUTC?utcStartOfDate:localStartOfDate,a){case"year":A=j(this.year()+1,0,1)-1;break;case"quarter":A=j(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":A=j(this.year(),this.month()+1,1)-1;break;case"week":A=j(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":A=j(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":A=j(this.year(),this.month(),this.date()+1)-1;break;case"hour":A=this._d.valueOf(),A+=36e5-mod$1(A+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":A=this._d.valueOf(),A+=6e4-mod$1(A,6e4)-1;break;case"second":A=this._d.valueOf(),A+=1e3-mod$1(A,1e3)-1}return this._d.setTime(A),hooks.updateOffset(this,!0),this},Mt.format=function format(a){a||(a=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat);var A=formatMoment(this,a);return this.localeData().postformat(A)},Mt.from=function from(a,A){return this.isValid()&&(isMoment(a)&&a.isValid()||createLocal(a).isValid())?createDuration({to:this,from:a}).locale(this.locale()).humanize(!A):this.localeData().invalidDate()},Mt.fromNow=function fromNow(a){return this.from(createLocal(),a)},Mt.to=function to(a,A){return this.isValid()&&(isMoment(a)&&a.isValid()||createLocal(a).isValid())?createDuration({from:this,to:a}).locale(this.locale()).humanize(!A):this.localeData().invalidDate()},Mt.toNow=function toNow(a){return this.to(createLocal(),a)},Mt.get=function stringGet(a){return isFunction(this[a=normalizeUnits(a)])?this[a]():this},Mt.invalidAt=function invalidAt(){return getParsingFlags(this).overflow},Mt.isAfter=function isAfter(a,A){var j=isMoment(a)?a:createLocal(a);return!(!this.isValid()||!j.isValid())&&("millisecond"===(A=normalizeUnits(A)||"millisecond")?this.valueOf()>j.valueOf():j.valueOf()<this.clone().startOf(A).valueOf())},Mt.isBefore=function isBefore(a,A){var j=isMoment(a)?a:createLocal(a);return!(!this.isValid()||!j.isValid())&&("millisecond"===(A=normalizeUnits(A)||"millisecond")?this.valueOf()<j.valueOf():this.clone().endOf(A).valueOf()<j.valueOf())},Mt.isBetween=function isBetween(a,A,j,P){var B=isMoment(a)?a:createLocal(a),q=isMoment(A)?A:createLocal(A);return!!(this.isValid()&&B.isValid()&&q.isValid())&&(("("===(P=P||"()")[0]?this.isAfter(B,j):!this.isBefore(B,j))&&(")"===P[1]?this.isBefore(q,j):!this.isAfter(q,j)))},Mt.isSame=function isSame(a,A){var j,P=isMoment(a)?a:createLocal(a);return!(!this.isValid()||!P.isValid())&&("millisecond"===(A=normalizeUnits(A)||"millisecond")?this.valueOf()===P.valueOf():(j=P.valueOf(),this.clone().startOf(A).valueOf()<=j&&j<=this.clone().endOf(A).valueOf()))},Mt.isSameOrAfter=function isSameOrAfter(a,A){return this.isSame(a,A)||this.isAfter(a,A)},Mt.isSameOrBefore=function isSameOrBefore(a,A){return this.isSame(a,A)||this.isBefore(a,A)},Mt.isValid=function isValid$2(){return isValid(this)},Mt.lang=Dt,Mt.locale=locale,Mt.localeData=localeData,Mt.max=wt,Mt.min=xt,Mt.parsingFlags=function parsingFlags(){return extend({},getParsingFlags(this))},Mt.set=function stringSet(a,A){if("object"===typeof a){var j,P=function getPrioritizedUnits(a){var A,j=[];for(A in a)hasOwnProp(a,A)&&j.push({unit:A,priority:pe[A]});return j.sort((function(a,A){return a.priority-A.priority})),j}(a=normalizeObjectUnits(a)),B=P.length;for(j=0;j<B;j++)this[P[j].unit](a[P[j].unit])}else if(isFunction(this[a=normalizeUnits(a)]))return this[a](A);return this},Mt.startOf=function startOf(a){var A,j;if(void 0===(a=normalizeUnits(a))||"millisecond"===a||!this.isValid())return this;switch(j=this._isUTC?utcStartOfDate:localStartOfDate,a){case"year":A=j(this.year(),0,1);break;case"quarter":A=j(this.year(),this.month()-this.month()%3,1);break;case"month":A=j(this.year(),this.month(),1);break;case"week":A=j(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":A=j(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":A=j(this.year(),this.month(),this.date());break;case"hour":A=this._d.valueOf(),A-=mod$1(A+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":A=this._d.valueOf(),A-=mod$1(A,6e4);break;case"second":A=this._d.valueOf(),A-=mod$1(A,1e3)}return this._d.setTime(A),hooks.updateOffset(this,!0),this},Mt.subtract=Tt,Mt.toArray=function toArray(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]},Mt.toObject=function toObject(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}},Mt.toDate=function toDate(){return new Date(this.valueOf())},Mt.toISOString=function toISOString(a){if(!this.isValid())return null;var A=!0!==a,j=A?this.clone().utc():this;return j.year()<0||j.year()>9999?formatMoment(j,A?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):isFunction(Date.prototype.toISOString)?A?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",formatMoment(j,"Z")):formatMoment(j,A?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Mt.inspect=function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a,A,j,P="moment",B="";return this.isLocal()||(P=0===this.utcOffset()?"moment.utc":"moment.parseZone",B="Z"),a="["+P+'("]',A=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",j=B+'[")]',this.format(a+A+"-MM-DD[T]HH:mm:ss.SSS"+j)},"undefined"!==typeof Symbol&&null!=Symbol.for&&(Mt[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Mt.toJSON=function toJSON(){return this.isValid()?this.toISOString():null},Mt.toString=function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Mt.unix=function unix(){return Math.floor(this.valueOf()/1e3)},Mt.valueOf=function valueOf(){return this._d.valueOf()-6e4*(this._offset||0)},Mt.creationData=function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Mt.eraName=function getEraName(){var a,A,j,P=this.localeData().eras();for(a=0,A=P.length;a<A;++a){if(j=this.clone().startOf("day").valueOf(),P[a].since<=j&&j<=P[a].until)return P[a].name;if(P[a].until<=j&&j<=P[a].since)return P[a].name}return""},Mt.eraNarrow=function getEraNarrow(){var a,A,j,P=this.localeData().eras();for(a=0,A=P.length;a<A;++a){if(j=this.clone().startOf("day").valueOf(),P[a].since<=j&&j<=P[a].until)return P[a].narrow;if(P[a].until<=j&&j<=P[a].since)return P[a].narrow}return""},Mt.eraAbbr=function getEraAbbr(){var a,A,j,P=this.localeData().eras();for(a=0,A=P.length;a<A;++a){if(j=this.clone().startOf("day").valueOf(),P[a].since<=j&&j<=P[a].until)return P[a].abbr;if(P[a].until<=j&&j<=P[a].since)return P[a].abbr}return""},Mt.eraYear=function getEraYear(){var a,A,j,P,B=this.localeData().eras();for(a=0,A=B.length;a<A;++a)if(j=B[a].since<=B[a].until?1:-1,P=this.clone().startOf("day").valueOf(),B[a].since<=P&&P<=B[a].until||B[a].until<=P&&P<=B[a].since)return(this.year()-hooks(B[a].since).year())*j+B[a].offset;return this.year()},Mt.year=tt,Mt.isLeapYear=function getIsLeapYear(){return isLeapYear(this.year())},Mt.weekYear=function getSetWeekYear(a){return getSetWeekYearHelper.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Mt.isoWeekYear=function getSetISOWeekYear(a){return getSetWeekYearHelper.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)},Mt.quarter=Mt.quarters=function getSetQuarter(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},Mt.month=getSetMonth,Mt.daysInMonth=function getDaysInMonth(){return daysInMonth(this.year(),this.month())},Mt.week=Mt.weeks=function getSetWeek(a){var A=this.localeData().week(this);return null==a?A:this.add(7*(a-A),"d")},Mt.isoWeek=Mt.isoWeeks=function getSetISOWeek(a){var A=weekOfYear(this,1,4).week;return null==a?A:this.add(7*(a-A),"d")},Mt.weeksInYear=function getWeeksInYear(){var a=this.localeData()._week;return weeksInYear(this.year(),a.dow,a.doy)},Mt.weeksInWeekYear=function getWeeksInWeekYear(){var a=this.localeData()._week;return weeksInYear(this.weekYear(),a.dow,a.doy)},Mt.isoWeeksInYear=function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)},Mt.isoWeeksInISOWeekYear=function getISOWeeksInISOWeekYear(){return weeksInYear(this.isoWeekYear(),1,4)},Mt.date=At,Mt.day=Mt.days=function getSetDayOfWeek(a){if(!this.isValid())return null!=a?this:NaN;var A=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=function parseWeekday(a,A){return"string"!==typeof a?a:isNaN(a)?"number"===typeof(a=A.weekdaysParse(a))?a:null:parseInt(a,10)}(a,this.localeData()),this.add(a-A,"d")):A},Mt.weekday=function getSetLocaleDayOfWeek(a){if(!this.isValid())return null!=a?this:NaN;var A=(this.day()+7-this.localeData()._week.dow)%7;return null==a?A:this.add(a-A,"d")},Mt.isoWeekday=function getSetISODayOfWeek(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var A=function parseIsoWeekday(a,A){return"string"===typeof a?A.weekdaysParse(a)%7||7:isNaN(a)?null:a}(a,this.localeData());return this.day(this.day()%7?A:A-7)}return this.day()||7},Mt.dayOfYear=function getSetDayOfYear(a){var A=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?A:this.add(a-A,"d")},Mt.hour=Mt.hours=lt,Mt.minute=Mt.minutes=jt,Mt.second=Mt.seconds=Rt,Mt.millisecond=Mt.milliseconds=Pt,Mt.utcOffset=function getSetOffset(a,A,j){var P,B=this._offset||0;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"===typeof a){if(null===(a=offsetFromString(Ne,a)))return this}else Math.abs(a)<16&&!j&&(a*=60);return!this._isUTC&&A&&(P=getDateOffset(this)),this._offset=a,this._isUTC=!0,null!=P&&this.add(P,"m"),B!==a&&(!A||this._changeInProgress?addSubtract(this,createDuration(a-B,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?B:getDateOffset(this)},Mt.utc=function setOffsetToUTC(a){return this.utcOffset(0,a)},Mt.local=function setOffsetToLocal(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(getDateOffset(this),"m")),this},Mt.parseZone=function setOffsetToParsedOffset(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var a=offsetFromString(Me,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this},Mt.hasAlignedHourOffset=function hasAlignedHourOffset(a){return!!this.isValid()&&(a=a?createLocal(a).utcOffset():0,(this.utcOffset()-a)%60===0)},Mt.isDST=function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Mt.isLocal=function isLocal(){return!!this.isValid()&&!this._isUTC},Mt.isUtcOffset=function isUtcOffset(){return!!this.isValid()&&this._isUTC},Mt.isUtc=isUtc,Mt.isUTC=isUtc,Mt.zoneAbbr=function getZoneAbbr(){return this._isUTC?"UTC":""},Mt.zoneName=function getZoneName(){return this._isUTC?"Coordinated Universal Time":""},Mt.dates=deprecate("dates accessor is deprecated. Use date instead.",At),Mt.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),Mt.years=deprecate("years accessor is deprecated. Use year instead",tt),Mt.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function getSetZone(a,A){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,A),this):-this.utcOffset()})),Mt.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var a,A={};return copyConfig(A,this),(A=prepareConfig(A))._a?(a=A._isUTC?createUTC(A._a):createLocal(A._a),this._isDSTShifted=this.isValid()&&function compareArrays(a,A,j){var P,B=Math.min(a.length,A.length),q=Math.abs(a.length-A.length),ne=0;for(P=0;P<B;P++)(j&&a[P]!==A[P]||!j&&toInt(a[P])!==toInt(A[P]))&&ne++;return ne+q}(A._a,a.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var Lt=Locale.prototype;function get$1(a,A,j,P){var B=getLocale(),q=createUTC().set(P,A);return B[j](q,a)}function listMonthsImpl(a,A,j){if(isNumber(a)&&(A=a,a=void 0),a=a||"",null!=A)return get$1(a,A,j,"month");var P,B=[];for(P=0;P<12;P++)B[P]=get$1(a,P,j,"month");return B}function listWeekdaysImpl(a,A,j,P){"boolean"===typeof a?(isNumber(A)&&(j=A,A=void 0),A=A||""):(j=A=a,a=!1,isNumber(A)&&(j=A,A=void 0),A=A||"");var B,q=getLocale(),ne=a?q._week.dow:0,ie=[];if(null!=j)return get$1(A,(j+ne)%7,P,"day");for(B=0;B<7;B++)ie[B]=get$1(A,(B+ne)%7,P,"day");return ie}Lt.calendar=function calendar(a,A,j){var P=this._calendar[a]||this._calendar.sameElse;return isFunction(P)?P.call(A,j):P},Lt.longDateFormat=function longDateFormat(a){var A=this._longDateFormat[a],j=this._longDateFormat[a.toUpperCase()];return A||!j?A:(this._longDateFormat[a]=j.match(ie).map((function(a){return"MMMM"===a||"MM"===a||"DD"===a||"dddd"===a?a.slice(1):a})).join(""),this._longDateFormat[a])},Lt.invalidDate=function invalidDate(){return this._invalidDate},Lt.ordinal=function ordinal(a){return this._ordinal.replace("%d",a)},Lt.preparse=preParsePostFormat,Lt.postformat=preParsePostFormat,Lt.relativeTime=function relativeTime(a,A,j,P){var B=this._relativeTime[j];return isFunction(B)?B(a,A,j,P):B.replace(/%d/i,a)},Lt.pastFuture=function pastFuture(a,A){var j=this._relativeTime[a>0?"future":"past"];return isFunction(j)?j(A):j.replace(/%s/i,A)},Lt.set=function set(a){var A,j;for(j in a)hasOwnProp(a,j)&&(isFunction(A=a[j])?this[j]=A:this["_"+j]=A);this._config=a,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Lt.eras=function localeEras(a,A){var j,P,B,q=this._eras||getLocale("en")._eras;for(j=0,P=q.length;j<P;++j){switch(typeof q[j].since){case"string":B=hooks(q[j].since).startOf("day"),q[j].since=B.valueOf()}switch(typeof q[j].until){case"undefined":q[j].until=1/0;break;case"string":B=hooks(q[j].until).startOf("day").valueOf(),q[j].until=B.valueOf()}}return q},Lt.erasParse=function localeErasParse(a,A,j){var P,B,q,ne,ie,oe=this.eras();for(a=a.toUpperCase(),P=0,B=oe.length;P<B;++P)if(q=oe[P].name.toUpperCase(),ne=oe[P].abbr.toUpperCase(),ie=oe[P].narrow.toUpperCase(),j)switch(A){case"N":case"NN":case"NNN":if(ne===a)return oe[P];break;case"NNNN":if(q===a)return oe[P];break;case"NNNNN":if(ie===a)return oe[P]}else if([q,ne,ie].indexOf(a)>=0)return oe[P]},Lt.erasConvertYear=function localeErasConvertYear(a,A){var j=a.since<=a.until?1:-1;return void 0===A?hooks(a.since).year():hooks(a.since).year()+(A-a.offset)*j},Lt.erasAbbrRegex=function erasAbbrRegex(a){return hasOwnProp(this,"_erasAbbrRegex")||computeErasParse.call(this),a?this._erasAbbrRegex:this._erasRegex},Lt.erasNameRegex=function erasNameRegex(a){return hasOwnProp(this,"_erasNameRegex")||computeErasParse.call(this),a?this._erasNameRegex:this._erasRegex},Lt.erasNarrowRegex=function erasNarrowRegex(a){return hasOwnProp(this,"_erasNarrowRegex")||computeErasParse.call(this),a?this._erasNarrowRegex:this._erasRegex},Lt.months=function localeMonths(a,A){return a?isArray(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||$e).test(A)?"format":"standalone"][a.month()]:isArray(this._months)?this._months:this._months.standalone},Lt.monthsShort=function localeMonthsShort(a,A){return a?isArray(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[$e.test(A)?"format":"standalone"][a.month()]:isArray(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Lt.monthsParse=function localeMonthsParse(a,A,j){var P,B,q;if(this._monthsParseExact)return handleStrictParse.call(this,a,A,j);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),P=0;P<12;P++){if(B=createUTC([2e3,P]),j&&!this._longMonthsParse[P]&&(this._longMonthsParse[P]=new RegExp("^"+this.months(B,"").replace(".","")+"$","i"),this._shortMonthsParse[P]=new RegExp("^"+this.monthsShort(B,"").replace(".","")+"$","i")),j||this._monthsParse[P]||(q="^"+this.months(B,"")+"|^"+this.monthsShort(B,""),this._monthsParse[P]=new RegExp(q.replace(".",""),"i")),j&&"MMMM"===A&&this._longMonthsParse[P].test(a))return P;if(j&&"MMM"===A&&this._shortMonthsParse[P].test(a))return P;if(!j&&this._monthsParse[P].test(a))return P}},Lt.monthsRegex=function monthsRegex(a){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),a?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=et),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)},Lt.monthsShortRegex=function monthsShortRegex(a){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=Xe),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)},Lt.week=function localeWeek(a){return weekOfYear(a,this._week.dow,this._week.doy).week},Lt.firstDayOfYear=function localeFirstDayOfYear(){return this._week.doy},Lt.firstDayOfWeek=function localeFirstDayOfWeek(){return this._week.dow},Lt.weekdays=function localeWeekdays(a,A){var j=isArray(this._weekdays)?this._weekdays:this._weekdays[a&&!0!==a&&this._weekdays.isFormat.test(A)?"format":"standalone"];return!0===a?shiftWeekdays(j,this._week.dow):a?j[a.day()]:j},Lt.weekdaysMin=function localeWeekdaysMin(a){return!0===a?shiftWeekdays(this._weekdaysMin,this._week.dow):a?this._weekdaysMin[a.day()]:this._weekdaysMin},Lt.weekdaysShort=function localeWeekdaysShort(a){return!0===a?shiftWeekdays(this._weekdaysShort,this._week.dow):a?this._weekdaysShort[a.day()]:this._weekdaysShort},Lt.weekdaysParse=function localeWeekdaysParse(a,A,j){var P,B,q;if(this._weekdaysParseExact)return handleStrictParse$1.call(this,a,A,j);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),P=0;P<7;P++){if(B=createUTC([2e3,1]).day(P),j&&!this._fullWeekdaysParse[P]&&(this._fullWeekdaysParse[P]=new RegExp("^"+this.weekdays(B,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[P]=new RegExp("^"+this.weekdaysShort(B,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[P]=new RegExp("^"+this.weekdaysMin(B,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[P]||(q="^"+this.weekdays(B,"")+"|^"+this.weekdaysShort(B,"")+"|^"+this.weekdaysMin(B,""),this._weekdaysParse[P]=new RegExp(q.replace(".",""),"i")),j&&"dddd"===A&&this._fullWeekdaysParse[P].test(a))return P;if(j&&"ddd"===A&&this._shortWeekdaysParse[P].test(a))return P;if(j&&"dd"===A&&this._minWeekdaysParse[P].test(a))return P;if(!j&&this._weekdaysParse[P].test(a))return P}},Lt.weekdaysRegex=function weekdaysRegex(a){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=at),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)},Lt.weekdaysShortRegex=function weekdaysShortRegex(a){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ot),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Lt.weekdaysMinRegex=function weekdaysMinRegex(a){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=st),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Lt.isPM=function localeIsPM(a){return"p"===(a+"").toLowerCase().charAt(0)},Lt.meridiem=function localeMeridiem(a,A,j){return a>11?j?"pm":"PM":j?"am":"AM"},getSetGlobalLocale("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function ordinal(a){var A=a%10;return a+(1===toInt(a%100/10)?"th":1===A?"st":2===A?"nd":3===A?"rd":"th")}}),hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale),hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var It=Math.abs;function addSubtract$1(a,A,j,P){var B=createDuration(A,j);return a._milliseconds+=P*B._milliseconds,a._days+=P*B._days,a._months+=P*B._months,a._bubble()}function absCeil(a){return a<0?Math.floor(a):Math.ceil(a)}function daysToMonths(a){return 4800*a/146097}function monthsToDays(a){return 146097*a/4800}function makeAs(a){return function(){return this.as(a)}}var Nt=makeAs("ms"),Bt=makeAs("s"),Ut=makeAs("m"),zt=makeAs("h"),qt=makeAs("d"),Wt=makeAs("w"),Ht=makeAs("M"),Gt=makeAs("Q"),Vt=makeAs("y");function makeGetter(a){return function(){return this.isValid()?this._data[a]:NaN}}var Yt=makeGetter("milliseconds"),$t=makeGetter("seconds"),Kt=makeGetter("minutes"),Xt=makeGetter("hours"),Jt=makeGetter("days"),Qt=makeGetter("months"),Zt=makeGetter("years"),en=Math.round,tn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function substituteTimeAgo(a,A,j,P,B){return B.relativeTime(A||1,!!j,a,P)}var nn=Math.abs;function sign(a){return(a>0)-(a<0)||+a}function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var a,A,j,P,B,q,ne,ie,oe=nn(this._milliseconds)/1e3,se=nn(this._days),le=nn(this._months),he=this.asSeconds();return he?(a=absFloor(oe/60),A=absFloor(a/60),oe%=60,a%=60,j=absFloor(le/12),le%=12,P=oe?oe.toFixed(3).replace(/\.?0+$/,""):"",B=he<0?"-":"",q=sign(this._months)!==sign(he)?"-":"",ne=sign(this._days)!==sign(he)?"-":"",ie=sign(this._milliseconds)!==sign(he)?"-":"",B+"P"+(j?q+j+"Y":"")+(le?q+le+"M":"")+(se?ne+se+"D":"")+(A||a||oe?"T":"")+(A?ie+A+"H":"")+(a?ie+a+"M":"")+(oe?ie+P+"S":"")):"P0D"}var rn=Duration.prototype;return rn.isValid=function isValid$1(){return this._isValid},rn.abs=function abs(){var a=this._data;return this._milliseconds=It(this._milliseconds),this._days=It(this._days),this._months=It(this._months),a.milliseconds=It(a.milliseconds),a.seconds=It(a.seconds),a.minutes=It(a.minutes),a.hours=It(a.hours),a.months=It(a.months),a.years=It(a.years),this},rn.add=function add$1(a,A){return addSubtract$1(this,a,A,1)},rn.subtract=function subtract$1(a,A){return addSubtract$1(this,a,A,-1)},rn.as=function as(a){if(!this.isValid())return NaN;var A,j,P=this._milliseconds;if("month"===(a=normalizeUnits(a))||"quarter"===a||"year"===a)switch(A=this._days+P/864e5,j=this._months+daysToMonths(A),a){case"month":return j;case"quarter":return j/3;case"year":return j/12}else switch(A=this._days+Math.round(monthsToDays(this._months)),a){case"week":return A/7+P/6048e5;case"day":return A+P/864e5;case"hour":return 24*A+P/36e5;case"minute":return 1440*A+P/6e4;case"second":return 86400*A+P/1e3;case"millisecond":return Math.floor(864e5*A)+P;default:throw new Error("Unknown unit "+a)}},rn.asMilliseconds=Nt,rn.asSeconds=Bt,rn.asMinutes=Ut,rn.asHours=zt,rn.asDays=qt,rn.asWeeks=Wt,rn.asMonths=Ht,rn.asQuarters=Gt,rn.asYears=Vt,rn.valueOf=function valueOf$1(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12):NaN},rn._bubble=function bubble(){var a,A,j,P,B,q=this._milliseconds,ne=this._days,ie=this._months,oe=this._data;return q>=0&&ne>=0&&ie>=0||q<=0&&ne<=0&&ie<=0||(q+=864e5*absCeil(monthsToDays(ie)+ne),ne=0,ie=0),oe.milliseconds=q%1e3,a=absFloor(q/1e3),oe.seconds=a%60,A=absFloor(a/60),oe.minutes=A%60,j=absFloor(A/60),oe.hours=j%24,ne+=absFloor(j/24),B=absFloor(daysToMonths(ne)),ie+=B,ne-=absCeil(monthsToDays(B)),P=absFloor(ie/12),ie%=12,oe.days=ne,oe.months=ie,oe.years=P,this},rn.clone=function clone$1(){return createDuration(this)},rn.get=function get$2(a){return a=normalizeUnits(a),this.isValid()?this[a+"s"]():NaN},rn.milliseconds=Yt,rn.seconds=$t,rn.minutes=Kt,rn.hours=Xt,rn.days=Jt,rn.weeks=function weeks(){return absFloor(this.days()/7)},rn.months=Qt,rn.years=Zt,rn.humanize=function humanize(a,A){if(!this.isValid())return this.localeData().invalidDate();var j,P,B=!1,q=tn;return"object"===typeof a&&(A=a,a=!1),"boolean"===typeof a&&(B=a),"object"===typeof A&&(q=Object.assign({},tn,A),null!=A.s&&null==A.ss&&(q.ss=A.s-1)),j=this.localeData(),P=function relativeTime$1(a,A,j,P){var B=createDuration(a).abs(),q=en(B.as("s")),ne=en(B.as("m")),ie=en(B.as("h")),oe=en(B.as("d")),se=en(B.as("M")),le=en(B.as("w")),he=en(B.as("y")),pe=q<=j.ss&&["s",q]||q<j.s&&["ss",q]||ne<=1&&["m"]||ne<j.m&&["mm",ne]||ie<=1&&["h"]||ie<j.h&&["hh",ie]||oe<=1&&["d"]||oe<j.d&&["dd",oe];return null!=j.w&&(pe=pe||le<=1&&["w"]||le<j.w&&["ww",le]),(pe=pe||se<=1&&["M"]||se<j.M&&["MM",se]||he<=1&&["y"]||["yy",he])[2]=A,pe[3]=+a>0,pe[4]=P,substituteTimeAgo.apply(null,pe)}(this,!B,q,j),B&&(P=j.pastFuture(+this,P)),j.postformat(P)},rn.toISOString=toISOString$1,rn.toString=toISOString$1,rn.toJSON=toISOString$1,rn.locale=locale,rn.localeData=localeData,rn.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1),rn.lang=Dt,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",Re),addRegexToken("X",/[+-]?\d+(\.\d{1,3})?/),addParseToken("X",(function(a,A,j){j._d=new Date(1e3*parseFloat(a))})),addParseToken("x",(function(a,A,j){j._d=new Date(toInt(a))})),hooks.version="2.29.4",function setHookCallback(a){A=a}(createLocal),hooks.fn=Mt,hooks.min=function min(){var a=[].slice.call(arguments,0);return pickBy("isBefore",a)},hooks.max=function max(){var a=[].slice.call(arguments,0);return pickBy("isAfter",a)},hooks.now=function now(){return Date.now?Date.now():+new Date},hooks.utc=createUTC,hooks.unix=function createUnix(a){return createLocal(1e3*a)},hooks.months=function listMonths(a,A){return listMonthsImpl(a,A,"months")},hooks.isDate=isDate,hooks.locale=getSetGlobalLocale,hooks.invalid=createInvalid,hooks.duration=createDuration,hooks.isMoment=isMoment,hooks.weekdays=function listWeekdays(a,A,j){return listWeekdaysImpl(a,A,j,"weekdays")},hooks.parseZone=function createInZone(){return createLocal.apply(null,arguments).parseZone()},hooks.localeData=getLocale,hooks.isDuration=isDuration,hooks.monthsShort=function listMonthsShort(a,A){return listMonthsImpl(a,A,"monthsShort")},hooks.weekdaysMin=function listWeekdaysMin(a,A,j){return listWeekdaysImpl(a,A,j,"weekdaysMin")},hooks.defineLocale=defineLocale,hooks.updateLocale=function updateLocale(a,A){if(null!=A){var j,P,B=ct;null!=ft[a]&&null!=ft[a].parentLocale?ft[a].set(mergeConfigs(ft[a]._config,A)):(null!=(P=loadLocale(a))&&(B=P._config),A=mergeConfigs(B,A),null==P&&(A.abbr=a),(j=new Locale(A)).parentLocale=ft[a],ft[a]=j),getSetGlobalLocale(a)}else null!=ft[a]&&(null!=ft[a].parentLocale?(ft[a]=ft[a].parentLocale,a===getSetGlobalLocale()&&getSetGlobalLocale(a)):null!=ft[a]&&delete ft[a]);return ft[a]},hooks.locales=function listLocales(){return q(ft)},hooks.weekdaysShort=function listWeekdaysShort(a,A,j){return listWeekdaysImpl(a,A,j,"weekdaysShort")},hooks.normalizeUnits=normalizeUnits,hooks.relativeTimeRounding=function getSetRelativeTimeRounding(a){return void 0===a?en:"function"===typeof a&&(en=a,!0)},hooks.relativeTimeThreshold=function getSetRelativeTimeThreshold(a,A){return void 0!==tn[a]&&(void 0===A?tn[a]:(tn[a]=A,"s"===a&&(tn.ss=A-1),!0))},hooks.calendarFormat=function getCalendarFormat(a,A){var j=a.diff(A,"days",!0);return j<-6?"sameElse":j<-1?"lastWeek":j<0?"lastDay":j<1?"sameDay":j<2?"nextDay":j<7?"nextWeek":"sameElse"},hooks.prototype=Mt,hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},hooks}()}).call(this,j(111)(a))},function(a,A,j){"use strict";a.exports=function(a,A){A||(A={}),"function"===typeof A&&(A={cmp:A});var j,P="boolean"===typeof A.cycles&&A.cycles,B=A.cmp&&(j=A.cmp,function(a){return function(A,P){var B={key:A,value:a[A]},q={key:P,value:a[P]};return j(B,q)}}),q=[];return function stringify(a){if(a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON()),void 0!==a){if("number"==typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var A,j;if(Array.isArray(a)){for(j="[",A=0;A<a.length;A++)A&&(j+=","),j+=stringify(a[A])||"null";return j+"]"}if(null===a)return"null";if(-1!==q.indexOf(a)){if(P)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var ne=q.push(a)-1,ie=Object.keys(a).sort(B&&B(a));for(j="",A=0;A<ie.length;A++){var oe=ie[A],se=stringify(a[oe]);se&&(j&&(j+=","),j+=JSON.stringify(oe)+":"+se)}return q.splice(ne,1),"{"+j+"}"}}(a)}},function(a,A,j){"use strict";var P=j(16),B=j(12),q=Object(P.a)((function(a){a.setTime(a-a.getMilliseconds())}),(function(a,A){a.setTime(+a+A*B.e)}),(function(a,A){return(A-a)/B.e}),(function(a){return a.getUTCSeconds()}));A.a=q;q.range},function(a,A,j){var P=j(84);a.exports=function(a,A,j){if(P(a),void 0===A)return a;switch(j){case 1:return function(j){return a.call(A,j)};case 2:return function(j,P){return a.call(A,j,P)};case 3:return function(j,P,B){return a.call(A,j,P,B)}}return function(){return a.apply(A,arguments)}}},function(a,A){a.exports=function(a){try{return!!a()}catch(A){return!0}}},function(a,A,j){var P=j(158),B=j(114);a.exports=function(a){return P(B(a))}},function(a,A,j){var P=j(114);a.exports=function(a){return Object(P(a))}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function isPrefixedValue(a){return"string"===typeof a&&P.test(a)};var P=/-webkit-|-moz-|-ms-/;a.exports=A.default},function(a,A){var j,P,B=a.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(a){if(j===setTimeout)return setTimeout(a,0);if((j===defaultSetTimout||!j)&&setTimeout)return j=setTimeout,setTimeout(a,0);try{return j(a,0)}catch(A){try{return j.call(null,a,0)}catch(A){return j.call(this,a,0)}}}!function(){try{j="function"===typeof setTimeout?setTimeout:defaultSetTimout}catch(a){j=defaultSetTimout}try{P="function"===typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(a){P=defaultClearTimeout}}();var q,ne=[],ie=!1,oe=-1;function cleanUpNextTick(){ie&&q&&(ie=!1,q.length?ne=q.concat(ne):oe=-1,ne.length&&drainQueue())}function drainQueue(){if(!ie){var a=runTimeout(cleanUpNextTick);ie=!0;for(var A=ne.length;A;){for(q=ne,ne=[];++oe<A;)q&&q[oe].run();oe=-1,A=ne.length}q=null,ie=!1,function runClearTimeout(a){if(P===clearTimeout)return clearTimeout(a);if((P===defaultClearTimeout||!P)&&clearTimeout)return P=clearTimeout,clearTimeout(a);try{return P(a)}catch(A){try{return P.call(null,a)}catch(A){return P.call(this,a)}}}(a)}}function Item(a,A){this.fun=a,this.array=A}function noop(){}B.nextTick=function(a){var A=new Array(arguments.length-1);if(arguments.length>1)for(var j=1;j<arguments.length;j++)A[j-1]=arguments[j];ne.push(new Item(a,A)),1!==ne.length||ie||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},B.title="browser",B.browser=!0,B.env={},B.argv=[],B.version="",B.versions={},B.on=noop,B.addListener=noop,B.once=noop,B.off=noop,B.removeListener=noop,B.removeAllListeners=noop,B.emit=noop,B.prependListener=noop,B.prependOnceListener=noop,B.listeners=function(a){return[]},B.binding=function(a){throw new Error("process.binding is not supported")},B.cwd=function(){return"/"},B.chdir=function(a){throw new Error("process.chdir is not supported")},B.umask=function(){return 0}},function(a,A,j){function Emitter(a){if(a)return function mixin(a){for(var A in Emitter.prototype)a[A]=Emitter.prototype[A];return a}(a)}a.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(a,A){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(A),this},Emitter.prototype.once=function(a,A){function on(){this.off(a,on),A.apply(this,arguments)}return on.fn=A,this.on(a,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(a,A){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var j,P=this._callbacks["$"+a];if(!P)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var B=0;B<P.length;B++)if((j=P[B])===A||j.fn===A){P.splice(B,1);break}return 0===P.length&&delete this._callbacks["$"+a],this},Emitter.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var A=new Array(arguments.length-1),j=this._callbacks["$"+a],P=1;P<arguments.length;P++)A[P-1]=arguments[P];if(j){P=0;for(var B=(j=j.slice(0)).length;P<B;++P)j[P].apply(this,A)}return this},Emitter.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},Emitter.prototype.hasListeners=function(a){return!!this.listeners(a).length}},function(a,A,j){var P,B=j(481),q=j(214),ne=j(483),ie=j(484),oe=j(485);"undefined"!==typeof ArrayBuffer&&(P=j(486));var se="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),le="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),he=se||le;A.protocol=3;var pe=A.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},ge=B(pe),me={type:"error",data:"parser error"},ve=j(487);function map(a,A,j){for(var P=new Array(a.length),B=ie(a.length,j),q=function eachWithIndex(a,j,B){A(j,(function(A,j){P[a]=j,B(A,P)}))},ne=0;ne<a.length;ne++)q(ne,a[ne],B)}A.encodePacket=function(a,j,P,B){"function"===typeof j&&(B=j,j=!1),"function"===typeof P&&(B=P,P=null);var q=void 0===a.data?void 0:a.data.buffer||a.data;if("undefined"!==typeof ArrayBuffer&&q instanceof ArrayBuffer)return function encodeArrayBuffer(a,j,P){if(!j)return A.encodeBase64Packet(a,P);var B=a.data,q=new Uint8Array(B),ne=new Uint8Array(1+B.byteLength);ne[0]=pe[a.type];for(var ie=0;ie<q.length;ie++)ne[ie+1]=q[ie];return P(ne.buffer)}(a,j,B);if("undefined"!==typeof ve&&q instanceof ve)return function encodeBlob(a,j,P){if(!j)return A.encodeBase64Packet(a,P);if(he)return function encodeBlobAsArrayBuffer(a,j,P){if(!j)return A.encodeBase64Packet(a,P);var B=new FileReader;return B.onload=function(){A.encodePacket({type:a.type,data:B.result},j,!0,P)},B.readAsArrayBuffer(a.data)}(a,j,P);var B=new Uint8Array(1);B[0]=pe[a.type];var q=new ve([B.buffer,a.data]);return P(q)}(a,j,B);if(q&&q.base64)return function encodeBase64Object(a,j){var P="b"+A.packets[a.type]+a.data.data;return j(P)}(a,B);var ne=pe[a.type];return void 0!==a.data&&(ne+=P?oe.encode(String(a.data),{strict:!1}):String(a.data)),B(""+ne)},A.encodeBase64Packet=function(a,j){var P,B="b"+A.packets[a.type];if("undefined"!==typeof ve&&a.data instanceof ve){var q=new FileReader;return q.onload=function(){var a=q.result.split(",")[1];j(B+a)},q.readAsDataURL(a.data)}try{P=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(se){for(var ne=new Uint8Array(a.data),ie=new Array(ne.length),oe=0;oe<ne.length;oe++)ie[oe]=ne[oe];P=String.fromCharCode.apply(null,ie)}return B+=btoa(P),j(B)},A.decodePacket=function(a,j,P){if(void 0===a)return me;if("string"===typeof a){if("b"===a.charAt(0))return A.decodeBase64Packet(a.substr(1),j);if(P&&!1===(a=function tryDecode(a){try{a=oe.decode(a,{strict:!1})}catch(A){return!1}return a}(a)))return me;var B=a.charAt(0);return Number(B)==B&&ge[B]?a.length>1?{type:ge[B],data:a.substring(1)}:{type:ge[B]}:me}B=new Uint8Array(a)[0];var q=ne(a,1);return ve&&"blob"===j&&(q=new ve([q])),{type:ge[B],data:q}},A.decodeBase64Packet=function(a,A){var j=ge[a.charAt(0)];if(!P)return{type:j,data:{base64:!0,data:a.substr(1)}};var B=P.decode(a.substr(1));return"blob"===A&&ve&&(B=new ve([B])),{type:j,data:B}},A.encodePayload=function(a,j,P){"function"===typeof j&&(P=j,j=null);var B=q(a);if(j&&B)return ve&&!he?A.encodePayloadAsBlob(a,P):A.encodePayloadAsArrayBuffer(a,P);if(!a.length)return P("0:");map(a,(function encodeOne(a,P){A.encodePacket(a,!!B&&j,!1,(function(a){P(null,function setLengthHeader(a){return a.length+":"+a}(a))}))}),(function(a,A){return P(A.join(""))}))},A.decodePayload=function(a,j,P){if("string"!==typeof a)return A.decodePayloadAsBinary(a,j,P);var B;if("function"===typeof j&&(P=j,j=null),""===a)return P(me,0,1);for(var q,ne,ie="",oe=0,se=a.length;oe<se;oe++){var le=a.charAt(oe);if(":"===le){if(""===ie||ie!=(q=Number(ie)))return P(me,0,1);if(ie!=(ne=a.substr(oe+1,q)).length)return P(me,0,1);if(ne.length){if(B=A.decodePacket(ne,j,!1),me.type===B.type&&me.data===B.data)return P(me,0,1);if(!1===P(B,oe+q,se))return}oe+=q,ie=""}else ie+=le}return""!==ie?P(me,0,1):void 0},A.encodePayloadAsArrayBuffer=function(a,j){if(!a.length)return j(new ArrayBuffer(0));map(a,(function encodeOne(a,j){A.encodePacket(a,!0,!0,(function(a){return j(null,a)}))}),(function(a,A){var P=A.reduce((function(a,A){var j;return a+(j="string"===typeof A?A.length:A.byteLength).toString().length+j+2}),0),B=new Uint8Array(P),q=0;return A.forEach((function(a){var A="string"===typeof a,j=a;if(A){for(var P=new Uint8Array(a.length),ne=0;ne<a.length;ne++)P[ne]=a.charCodeAt(ne);j=P.buffer}B[q++]=A?0:1;var ie=j.byteLength.toString();for(ne=0;ne<ie.length;ne++)B[q++]=parseInt(ie[ne]);B[q++]=255;for(P=new Uint8Array(j),ne=0;ne<P.length;ne++)B[q++]=P[ne]})),j(B.buffer)}))},A.encodePayloadAsBlob=function(a,j){map(a,(function encodeOne(a,j){A.encodePacket(a,!0,!0,(function(a){var A=new Uint8Array(1);if(A[0]=1,"string"===typeof a){for(var P=new Uint8Array(a.length),B=0;B<a.length;B++)P[B]=a.charCodeAt(B);a=P.buffer,A[0]=0}var q=(a instanceof ArrayBuffer?a.byteLength:a.size).toString(),ne=new Uint8Array(q.length+1);for(B=0;B<q.length;B++)ne[B]=parseInt(q[B]);if(ne[q.length]=255,ve){var ie=new ve([A.buffer,ne.buffer,a]);j(null,ie)}}))}),(function(a,A){return j(new ve(A))}))},A.decodePayloadAsBinary=function(a,j,P){"function"===typeof j&&(P=j,j=null);for(var B=a,q=[];B.byteLength>0;){for(var ie=new Uint8Array(B),oe=0===ie[0],se="",le=1;255!==ie[le];le++){if(se.length>310)return P(me,0,1);se+=ie[le]}B=ne(B,2+se.length),se=parseInt(se);var he=ne(B,0,se);if(oe)try{he=String.fromCharCode.apply(null,new Uint8Array(he))}catch(ve){var pe=new Uint8Array(he);he="";for(le=0;le<pe.length;le++)he+=String.fromCharCode(pe[le])}q.push(he),B=ne(B,se)}var ge=q.length;q.forEach((function(a,B){P(A.decodePacket(a,j,!0),B,ge)}))}},,function(a,A,j){"use strict";A.a=function(a,A){return a<A?-1:a>A?1:a>=A?0:NaN}},function(a,A){a.exports=!0},function(a,A){a.exports=function(a,A){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:A}}},function(a,A){a.exports={}},function(a,A,j){var P=j(157),B=j(121);a.exports=Object.keys||function keys(a){return P(a,B)}},function(a,A){var j={}.toString;a.exports=function(a){return j.call(a).slice(8,-1)}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.RequestError=void 0;var P=_interopRequireDefault(j(31)),B=_interopRequireDefault(j(171)),q=_interopRequireDefault(j(280)),ne=_interopRequireDefault(j(283)),ie=_interopRequireDefault(j(32)),oe=_interopRequireDefault(j(288)),se=_interopRequireDefault(j(292)),le=_interopRequireDefault(j(295)),he=_interopRequireDefault(j(296)),pe=_interopRequireDefault(j(308)),ge=_interopRequireDefault(j(176));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var me=A.RequestError=function(a){function RequestError(a){var A;(0,le.default)(this,RequestError);for(var j=arguments.length,P=Array(j>1?j-1:0),B=1;B<j;B++)P[B-1]=arguments[B];var q=(0,he.default)(this,(A=RequestError.__proto__||(0,se.default)(RequestError)).call.apply(A,[this].concat(P)));return q.resp=a,q}return(0,pe.default)(RequestError,a),RequestError}(Error),ve=function(){function ConfigRequest(a){(0,le.default)(this,ConfigRequest),this.defaultHeaders={"Content-Type":"application/json"},this.baseUrl=a+(a.endsWith("/")?"":"/")}return(0,oe.default)(ConfigRequest,[{key:"configure",value:function configure(a){a&&(this.defaultHeaders.Authorization="JWT "+a)}},{key:"request",value:function(){var a=(0,ie.default)(P.default.mark((function _callee(a,A,j,ie,oe){var se,le,he,pe,ve;return P.default.wrap((function _callee$(P){for(;;)switch(P.prev=P.next){case 0:return!1!==ie&&(ie=!0),!1!==oe&&(oe=!0),se=(0,ne.default)({},this.defaultHeaders),ie||(se["Content-Type"]="application/x-www-form-urlencoded"),le=this.baseUrl+A,he=void 0,j&&0!==(0,q.default)(j).length&&("GET"===a||"HEAD"===a?le+="?"+ge.default.stringify(j):he=ie?(0,B.default)(j):ge.default.stringify(j)),P.next=9,fetch(le,{method:a,headers:se,body:he});case 9:if((pe=P.sent).ok){P.next=15;break}return P.next=13,pe.text();case 13:throw ve=P.sent,new me(pe,pe.status+": "+ve);case 15:if(oe){P.next=17;break}return P.abrupt("return",pe);case 17:return P.next=19,pe.json();case 19:return P.abrupt("return",P.sent);case 20:case"end":return P.stop()}}),_callee,this)})));return function request(A,j,P,B,q){return a.apply(this,arguments)}}()}]),ConfigRequest}();A.default=ve,["GET","POST","PUT","PATCH","HEAD","DELETE"].forEach((function(a){var A=a.toLowerCase();ve.prototype[A]=function(){var A=(0,ie.default)(P.default.mark((function _callee2(A,j,B,q){return P.default.wrap((function _callee2$(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,this.request(a,A,j,B,q);case 2:return P.abrupt("return",P.sent);case 3:case"end":return P.stop()}}),_callee2,this)})));return function(a,j,P,B){return A.apply(this,arguments)}}()}))},function(a,A,j){(function(P){function load(){var a;try{a=A.storage.debug}catch(j){}return!a&&"undefined"!==typeof P&&"env"in P&&(a=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).DEBUG),a}(A=a.exports=j(458)).log=function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},A.formatArgs=function formatArgs(a){var j=this.useColors;if(a[0]=(j?"%c":"")+this.namespace+(j?" %c":" ")+a[0]+(j?"%c ":" ")+"+"+A.humanize(this.diff),!j)return;var P="color: "+this.color;a.splice(1,0,P,"color: inherit");var B=0,q=0;a[0].replace(/%[a-zA-Z%]/g,(function(a){"%%"!==a&&(B++,"%c"===a&&(q=B))})),a.splice(q,0,P)},A.save=function save(a){try{null==a?A.storage.removeItem("debug"):A.storage.debug=a}catch(j){}},A.load=load,A.useColors=function useColors(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},A.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function localstorage(){try{return window.localStorage}catch(a){}}(),A.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],A.formatters.j=function(a){try{return JSON.stringify(a)}catch(A){return"[UnexpectedJSONParseError]: "+A.message}},A.enable(load())}).call(this,j(66))},function(a,A,j){"use strict";function _arrayLikeToArray(a,A){(null==A||A>a.length)&&(A=a.length);for(var j=0,P=new Array(A);j<A;j++)P[j]=a[j];return P}j.d(A,"a",(function(){return _arrayLikeToArray}))},,,function(a,A,j){"use strict";j.d(A,"a",(function(){return formatSpecifier}));var P=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(a){if(!(A=P.exec(a)))throw new Error("invalid format: "+a);var A;return new FormatSpecifier({fill:A[1],align:A[2],sign:A[3],symbol:A[4],zero:A[5],width:A[6],comma:A[7],precision:A[8]&&A[8].slice(1),trim:A[9],type:A[10]})}function FormatSpecifier(a){this.fill=void 0===a.fill?" ":a.fill+"",this.align=void 0===a.align?">":a.align+"",this.sign=void 0===a.sign?"-":a.sign+"",this.symbol=void 0===a.symbol?"":a.symbol+"",this.zero=!!a.zero,this.width=void 0===a.width?void 0:+a.width,this.comma=!!a.comma,this.precision=void 0===a.precision?void 0:+a.precision,this.trim=!!a.trim,this.type=void 0===a.type?"":a.type+""}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},function(a,A,j){"undefined"!==typeof window&&function webpackUniversalModuleDefinition(A,j){a.exports=j()}(0,(function(){return function(a){var A={};function __webpack_require__(j){if(A[j])return A[j].exports;var P=A[j]={i:j,l:!1,exports:{}};return a[j].call(P.exports,P,P.exports,__webpack_require__),P.l=!0,P.exports}return __webpack_require__.m=a,__webpack_require__.c=A,__webpack_require__.d=function(a,A,j){__webpack_require__.o(a,A)||Object.defineProperty(a,A,{enumerable:!0,get:j})},__webpack_require__.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},__webpack_require__.t=function(a,A){if(1&A&&(a=__webpack_require__(a)),8&A)return a;if(4&A&&"object"===typeof a&&a&&a.__esModule)return a;var j=Object.create(null);if(__webpack_require__.r(j),Object.defineProperty(j,"default",{enumerable:!0,value:a}),2&A&&"string"!=typeof a)for(var P in a)__webpack_require__.d(j,P,function(A){return a[A]}.bind(null,P));return j},__webpack_require__.n=function(a){var A=a&&a.__esModule?function getDefault(){return a.default}:function getModuleExports(){return a};return __webpack_require__.d(A,"a",A),A},__webpack_require__.o=function(a,A){return Object.prototype.hasOwnProperty.call(a,A)},__webpack_require__.p="/dist/",__webpack_require__(__webpack_require__.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":function node_modulesEventemitter3IndexJs(a,A,j){"use strict";var P=Object.prototype.hasOwnProperty,B="~";function Events(){}function EE(a,A,j){this.fn=a,this.context=A,this.once=j||!1}function addListener(a,A,j,P,q){if("function"!==typeof j)throw new TypeError("The listener must be a function");var ne=new EE(j,P||a,q),ie=B?B+A:A;return a._events[ie]?a._events[ie].fn?a._events[ie]=[a._events[ie],ne]:a._events[ie].push(ne):(a._events[ie]=ne,a._eventsCount++),a}function clearEvent(a,A){0===--a._eventsCount?a._events=new Events:delete a._events[A]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(B=!1)),EventEmitter.prototype.eventNames=function eventNames(){var a,A,j=[];if(0===this._eventsCount)return j;for(A in a=this._events)P.call(a,A)&&j.push(B?A.slice(1):A);return Object.getOwnPropertySymbols?j.concat(Object.getOwnPropertySymbols(a)):j},EventEmitter.prototype.listeners=function listeners(a){var A=B?B+a:a,j=this._events[A];if(!j)return[];if(j.fn)return[j.fn];for(var P=0,q=j.length,ne=new Array(q);P<q;P++)ne[P]=j[P].fn;return ne},EventEmitter.prototype.listenerCount=function listenerCount(a){var A=B?B+a:a,j=this._events[A];return j?j.fn?1:j.length:0},EventEmitter.prototype.emit=function emit(a,A,j,P,q,ne){var ie=B?B+a:a;if(!this._events[ie])return!1;var oe,se,le=this._events[ie],he=arguments.length;if(le.fn){switch(le.once&&this.removeListener(a,le.fn,void 0,!0),he){case 1:return le.fn.call(le.context),!0;case 2:return le.fn.call(le.context,A),!0;case 3:return le.fn.call(le.context,A,j),!0;case 4:return le.fn.call(le.context,A,j,P),!0;case 5:return le.fn.call(le.context,A,j,P,q),!0;case 6:return le.fn.call(le.context,A,j,P,q,ne),!0}for(se=1,oe=new Array(he-1);se<he;se++)oe[se-1]=arguments[se];le.fn.apply(le.context,oe)}else{var pe,ge=le.length;for(se=0;se<ge;se++)switch(le[se].once&&this.removeListener(a,le[se].fn,void 0,!0),he){case 1:le[se].fn.call(le[se].context);break;case 2:le[se].fn.call(le[se].context,A);break;case 3:le[se].fn.call(le[se].context,A,j);break;case 4:le[se].fn.call(le[se].context,A,j,P);break;default:if(!oe)for(pe=1,oe=new Array(he-1);pe<he;pe++)oe[pe-1]=arguments[pe];le[se].fn.apply(le[se].context,oe)}}return!0},EventEmitter.prototype.on=function on(a,A,j){return addListener(this,a,A,j,!1)},EventEmitter.prototype.once=function once(a,A,j){return addListener(this,a,A,j,!0)},EventEmitter.prototype.removeListener=function removeListener(a,A,j,P){var q=B?B+a:a;if(!this._events[q])return this;if(!A)return clearEvent(this,q),this;var ne=this._events[q];if(ne.fn)ne.fn!==A||P&&!ne.once||j&&ne.context!==j||clearEvent(this,q);else{for(var ie=0,oe=[],se=ne.length;ie<se;ie++)(ne[ie].fn!==A||P&&!ne[ie].once||j&&ne[ie].context!==j)&&oe.push(ne[ie]);oe.length?this._events[q]=1===oe.length?oe[0]:oe:clearEvent(this,q)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(a){var A;return a?(A=B?B+a:a,this._events[A]&&clearEvent(this,A)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=B,EventEmitter.EventEmitter=EventEmitter,a.exports=EventEmitter},"./node_modules/node-libs-browser/node_modules/events/events.js":function node_modulesNodeLibsBrowserNode_modulesEventsEventsJs(a,A){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(a){return"function"===typeof a}function isObject(a){return"object"===typeof a&&null!==a}function isUndefined(a){return void 0===a}a.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(a){if(!function isNumber(a){return"number"===typeof a}(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},EventEmitter.prototype.emit=function(a){var A,j,P,B,q,ne;if(this._events||(this._events={}),"error"===a&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if((A=arguments[1])instanceof Error)throw A;var ie=new Error('Uncaught, unspecified "error" event. ('+A+")");throw ie.context=A,ie}if(isUndefined(j=this._events[a]))return!1;if(isFunction(j))switch(arguments.length){case 1:j.call(this);break;case 2:j.call(this,arguments[1]);break;case 3:j.call(this,arguments[1],arguments[2]);break;default:B=Array.prototype.slice.call(arguments,1),j.apply(this,B)}else if(isObject(j))for(B=Array.prototype.slice.call(arguments,1),P=(ne=j.slice()).length,q=0;q<P;q++)ne[q].apply(this,B);return!0},EventEmitter.prototype.addListener=function(a,A){var j;if(!isFunction(A))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,isFunction(A.listener)?A.listener:A),this._events[a]?isObject(this._events[a])?this._events[a].push(A):this._events[a]=[this._events[a],A]:this._events[a]=A,isObject(this._events[a])&&!this._events[a].warned&&(j=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&j>0&&this._events[a].length>j&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"===typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(a,A){if(!isFunction(A))throw TypeError("listener must be a function");var j=!1;function g(){this.removeListener(a,g),j||(j=!0,A.apply(this,arguments))}return g.listener=A,this.on(a,g),this},EventEmitter.prototype.removeListener=function(a,A){var j,P,B,q;if(!isFunction(A))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(B=(j=this._events[a]).length,P=-1,j===A||isFunction(j.listener)&&j.listener===A)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,A);else if(isObject(j)){for(q=B;q-- >0;)if(j[q]===A||j[q].listener&&j[q].listener===A){P=q;break}if(P<0)return this;1===j.length?(j.length=0,delete this._events[a]):j.splice(P,1),this._events.removeListener&&this.emit("removeListener",a,A)}return this},EventEmitter.prototype.removeAllListeners=function(a){var A,j;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(A in this._events)"removeListener"!==A&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events={},this}if(isFunction(j=this._events[a]))this.removeListener(a,j);else if(j)for(;j.length;)this.removeListener(a,j[j.length-1]);return delete this._events[a],this},EventEmitter.prototype.listeners=function(a){return this._events&&this._events[a]?isFunction(this._events[a])?[this._events[a]]:this._events[a].slice():[]},EventEmitter.prototype.listenerCount=function(a){if(this._events){var A=this._events[a];if(isFunction(A))return 1;if(A)return A.length}return 0},EventEmitter.listenerCount=function(a,A){return a.listenerCount(A)}},"./node_modules/url-toolkit/src/url-toolkit.js":function node_modulesUrlToolkitSrcUrlToolkitJs(a,A,j){!function(A){var j=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,P=/^([^\/?#]*)(.*)$/,B=/(?:\/|^)\.(?=\/)/g,q=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,ne={buildAbsoluteURL:function buildAbsoluteURL(a,A,j){if(j=j||{},a=a.trim(),!(A=A.trim())){if(!j.alwaysNormalize)return a;var B=ne.parseURL(a);if(!B)throw new Error("Error trying to parse base URL.");return B.path=ne.normalizePath(B.path),ne.buildURLFromParts(B)}var q=ne.parseURL(A);if(!q)throw new Error("Error trying to parse relative URL.");if(q.scheme)return j.alwaysNormalize?(q.path=ne.normalizePath(q.path),ne.buildURLFromParts(q)):A;var ie=ne.parseURL(a);if(!ie)throw new Error("Error trying to parse base URL.");if(!ie.netLoc&&ie.path&&"/"!==ie.path[0]){var oe=P.exec(ie.path);ie.netLoc=oe[1],ie.path=oe[2]}ie.netLoc&&!ie.path&&(ie.path="/");var se={scheme:ie.scheme,netLoc:q.netLoc,path:null,params:q.params,query:q.query,fragment:q.fragment};if(!q.netLoc&&(se.netLoc=ie.netLoc,"/"!==q.path[0]))if(q.path){var le=ie.path,he=le.substring(0,le.lastIndexOf("/")+1)+q.path;se.path=ne.normalizePath(he)}else se.path=ie.path,q.params||(se.params=ie.params,q.query||(se.query=ie.query));return null===se.path&&(se.path=j.alwaysNormalize?ne.normalizePath(q.path):q.path),ne.buildURLFromParts(se)},parseURL:function parseURL(a){var A=j.exec(a);return A?{scheme:A[1]||"",netLoc:A[2]||"",path:A[3]||"",params:A[4]||"",query:A[5]||"",fragment:A[6]||""}:null},normalizePath:function normalizePath(a){for(a=a.split("").reverse().join("").replace(B,"");a.length!==(a=a.replace(q,"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function buildURLFromParts(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};a.exports=ne}()},"./node_modules/webworkify-webpack/index.js":function node_modulesWebworkifyWebpackIndexJs(a,A,j){function webpackBootstrapFunc(a){var A={};function __webpack_require__(j){if(A[j])return A[j].exports;var P=A[j]={i:j,l:!1,exports:{}};return a[j].call(P.exports,P,P.exports,__webpack_require__),P.l=!0,P.exports}__webpack_require__.m=a,__webpack_require__.c=A,__webpack_require__.i=function(a){return a},__webpack_require__.d=function(a,A,j){__webpack_require__.o(a,A)||Object.defineProperty(a,A,{configurable:!1,enumerable:!0,get:j})},__webpack_require__.r=function(a){Object.defineProperty(a,"__esModule",{value:!0})},__webpack_require__.n=function(a){var A=a&&a.__esModule?function getDefault(){return a.default}:function getModuleExports(){return a};return __webpack_require__.d(A,"a",A),A},__webpack_require__.o=function(a,A){return Object.prototype.hasOwnProperty.call(a,A)},__webpack_require__.p="/",__webpack_require__.oe=function(a){throw console.error(a),a};var j=__webpack_require__(__webpack_require__.s=ENTRY_MODULE);return j.default||j}function quoteRegExp(a){return(a+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function getModuleDependencies(a,A,P){var B={};B[P]=[];var q=A.toString(),ne=q.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!ne)return B;for(var ie,oe=ne[1],se=new RegExp("(\\\\n|\\W)"+quoteRegExp(oe)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");ie=se.exec(q);)"dll-reference"!==ie[3]&&B[P].push(ie[3]);for(se=new RegExp("\\("+quoteRegExp(oe)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");ie=se.exec(q);)a[ie[2]]||(B[P].push(ie[1]),a[ie[2]]=j(ie[1]).m),B[ie[2]]=B[ie[2]]||[],B[ie[2]].push(ie[4]);for(var le,he=Object.keys(B),pe=0;pe<he.length;pe++)for(var ge=0;ge<B[he[pe]].length;ge++)le=B[he[pe]][ge],isNaN(1*le)||(B[he[pe]][ge]=1*B[he[pe]][ge]);return B}function hasValuesInQueues(a){return Object.keys(a).reduce((function(A,j){return A||a[j].length>0}),!1)}a.exports=function(a,A){A=A||{};var P={main:j.m},B=A.all?{main:Object.keys(P.main)}:function getRequiredModules(a,A){for(var j={main:[A]},P={main:[]},B={main:{}};hasValuesInQueues(j);)for(var q=Object.keys(j),ne=0;ne<q.length;ne++){var ie=q[ne],oe=j[ie].pop();if(B[ie]=B[ie]||{},!B[ie][oe]&&a[ie][oe]){B[ie][oe]=!0,P[ie]=P[ie]||[],P[ie].push(oe);for(var se=getModuleDependencies(a,a[ie][oe],ie),le=Object.keys(se),he=0;he<le.length;he++)j[le[he]]=j[le[he]]||[],j[le[he]]=j[le[he]].concat(se[le[he]])}}return P}(P,a),q="";Object.keys(B).filter((function(a){return"main"!==a})).forEach((function(a){for(var A=0;B[a][A];)A++;B[a].push(A),P[a][A]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",q=q+"var "+a+" = ("+webpackBootstrapFunc.toString().replace("ENTRY_MODULE",JSON.stringify(A))+")({"+B[a].map((function(A){return JSON.stringify(A)+": "+P[a][A].toString()})).join(",")+"});\n"})),q=q+"new (("+webpackBootstrapFunc.toString().replace("ENTRY_MODULE",JSON.stringify(a))+")({"+B.main.map((function(a){return JSON.stringify(a)+": "+P.main[a].toString()})).join(",")+"}))(self);";var ne=new window.Blob([q],{type:"text/javascript"});if(A.bare)return ne;var ie=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(ne),oe=new window.Worker(ie);return oe.objectURL=ie,oe}},"./src/config.js":function srcConfigJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/controller/abr-controller.js"),B=j("./src/controller/buffer-controller.js"),q=j("./src/controller/cap-level-controller.js"),ne=j("./src/controller/fps-controller.js"),ie=j("./src/utils/xhr-loader.js"),oe=j("./src/controller/audio-track-controller.js"),se=j("./src/controller/audio-stream-controller.js"),le=j("./src/utils/cues.js"),he=j("./src/controller/timeline-controller.js"),pe=j("./src/controller/subtitle-track-controller.js"),ge=j("./src/controller/subtitle-stream-controller.js"),me=j("./src/controller/eme-controller.js"),ve=j("./src/utils/mediakeys-helper.js");A.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:ie.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:P.default,bufferController:B.default,capLevelController:q.default,fpsController:ne.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:ve.requestMediaKeySystemAccess,disablePtsDtsCorrectionInMp4Remux:!1},A.hlsDefaultConfig.subtitleStreamController=ge.SubtitleStreamController,A.hlsDefaultConfig.subtitleTrackController=pe.default,A.hlsDefaultConfig.timelineController=he.default,A.hlsDefaultConfig.cueHandler=le,A.hlsDefaultConfig.enableCEA708Captions=!0,A.hlsDefaultConfig.enableWebVTT=!0,A.hlsDefaultConfig.captionsTextTrack1Label="English",A.hlsDefaultConfig.captionsTextTrack1LanguageCode="en",A.hlsDefaultConfig.captionsTextTrack2Label="Spanish",A.hlsDefaultConfig.captionsTextTrack2LanguageCode="es",A.hlsDefaultConfig.audioStreamController=se.default,A.hlsDefaultConfig.audioTrackController=oe.default,A.hlsDefaultConfig.emeController=me.default},"./src/controller/abr-controller.js":function srcControllerAbrControllerJs(a,A,j){"use strict";(function(a){var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/events.js"),q=j("./src/event-handler.js"),ne=j("./src/utils/buffer-helper.js"),ie=j("./src/errors.js"),oe=j("./src/utils/logger.js"),se=j("./src/utils/ewma-bandwidth-estimator.js"),le=window.performance,he=function(A){function AbrController(a){var j=A.call(this,a,B.default.FRAG_LOADING,B.default.FRAG_LOADED,B.default.FRAG_BUFFERED,B.default.ERROR)||this;return j.lastLoadedFragLevel=0,j._nextAutoLevel=-1,j.hls=a,j.timer=null,j._bwEstimator=null,j.onCheck=j._abandonRulesCheck.bind(j),j}return P(AbrController,A),AbrController.prototype.destroy=function(){this.clearTimer(),q.default.prototype.destroy.call(this)},AbrController.prototype.onFragLoading=function(a){var A=a.frag;if("main"===A.type&&(this.timer||(this.fragCurrent=A,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var j=this.hls,P=j.config,B=A.level,q=void 0,ne=void 0;j.levels[B].details.live?(q=P.abrEwmaFastLive,ne=P.abrEwmaSlowLive):(q=P.abrEwmaFastVoD,ne=P.abrEwmaSlowVoD),this._bwEstimator=new se.default(j,ne,q,P.abrEwmaDefaultEstimate)}},AbrController.prototype._abandonRulesCheck=function(){var a=this.hls,A=a.media,j=this.fragCurrent;if(j){var P=j.loader,q=a.minAutoLevel;if(!P||P.stats&&P.stats.aborted)return oe.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var ie=P.stats;if(A&&ie&&(!A.paused&&0!==A.playbackRate||!A.readyState)&&j.autoLevel&&j.level){var se=le.now()-ie.trequest,he=Math.abs(A.playbackRate);if(se>500*j.duration/he){var pe=a.levels,ge=Math.max(1,ie.bw?ie.bw/8:1e3*ie.loaded/se),me=pe[j.level],ve=me.realBitrate?Math.max(me.realBitrate,me.bitrate):me.bitrate,ye=ie.total?ie.total:Math.max(ie.loaded,Math.round(j.duration*ve/8)),_e=A.currentTime,we=(ye-ie.loaded)/ge,ke=(ne.BufferHelper.bufferInfo(A,_e,a.config.maxBufferHole).end-_e)/he;if(ke<2*j.duration/he&&we>ke){var Oe=void 0,Se=void 0;for(Se=j.level-1;Se>q;Se--){var Te=pe[Se].realBitrate?Math.max(pe[Se].realBitrate,pe[Se].bitrate):pe[Se].bitrate;if((Oe=j.duration*Te/(6.4*ge))<ke)break}Oe<we&&(oe.logger.warn("loading too slow, abort fragment loading and switch to level "+Se+":fragLoadedDelay["+Se+"]<fragLoadedDelay["+(j.level-1)+"];bufferStarvationDelay:"+Oe.toFixed(1)+"<"+we.toFixed(1)+":"+ke.toFixed(1)),a.nextLoadLevel=Se,this._bwEstimator.sample(se,ie.loaded),P.abort(),this.clearTimer(),a.trigger(B.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:j,stats:ie}))}}}}},AbrController.prototype.onFragLoaded=function(A){var j=A.frag;if("main"===j.type&&a.isFinite(j.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=j.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var P=this.hls.levels[j.level],B=(P.loaded?P.loaded.bytes:0)+A.stats.loaded,q=(P.loaded?P.loaded.duration:0)+A.frag.duration;P.loaded={bytes:B,duration:q},P.realBitrate=Math.round(8*B/q)}if(A.frag.bitrateTest){var ne=A.stats;ne.tparsed=ne.tbuffered=ne.tload,this.onFragBuffered(A)}}},AbrController.prototype.onFragBuffered=function(A){var j=A.stats,P=A.frag;if(!0!==j.aborted&&"main"===P.type&&a.isFinite(P.sn)&&(!P.bitrateTest||j.tload===j.tbuffered)){var B=j.tparsed-j.trequest;oe.logger.log("latency/loading/parsing/append/kbps:"+Math.round(j.tfirst-j.trequest)+"/"+Math.round(j.tload-j.tfirst)+"/"+Math.round(j.tparsed-j.tload)+"/"+Math.round(j.tbuffered-j.tparsed)+"/"+Math.round(8*j.loaded/(j.tbuffered-j.trequest))),this._bwEstimator.sample(B,j.loaded),j.bwEstimate=this._bwEstimator.getEstimate(),P.bitrateTest?this.bitrateTestDelay=B/1e3:this.bitrateTestDelay=0}},AbrController.prototype.onError=function(a){switch(a.details){case ie.ErrorDetails.FRAG_LOAD_ERROR:case ie.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},AbrController.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(AbrController.prototype,"nextAutoLevel",{get:function get(){var a=this._nextAutoLevel,A=this._bwEstimator;if(-1!==a&&(!A||!A.canEstimate()))return a;var j=this._nextABRAutoLevel;return-1!==a&&(j=Math.min(a,j)),j},set:function set(a){this._nextAutoLevel=a},enumerable:!0,configurable:!0}),Object.defineProperty(AbrController.prototype,"_nextABRAutoLevel",{get:function get(){var a=this.hls,A=a.maxAutoLevel,j=a.levels,P=a.config,B=a.minAutoLevel,q=a.media,ie=this.lastLoadedFragLevel,se=this.fragCurrent?this.fragCurrent.duration:0,le=q?q.currentTime:0,he=q&&0!==q.playbackRate?Math.abs(q.playbackRate):1,pe=this._bwEstimator?this._bwEstimator.getEstimate():P.abrEwmaDefaultEstimate,ge=(ne.BufferHelper.bufferInfo(q,le,P.maxBufferHole).end-le)/he,me=this._findBestLevel(ie,se,pe,B,A,ge,P.abrBandWidthFactor,P.abrBandWidthUpFactor,j);if(me>=0)return me;oe.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var ve=se?Math.min(se,P.maxStarvationDelay):P.maxStarvationDelay,ye=P.abrBandWidthFactor,_e=P.abrBandWidthUpFactor;if(0===ge){var we=this.bitrateTestDelay;if(we)ve=(se?Math.min(se,P.maxLoadingDelay):P.maxLoadingDelay)-we,oe.logger.trace("bitrate test took "+Math.round(1e3*we)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*ve)+" ms"),ye=_e=1}return me=this._findBestLevel(ie,se,pe,B,A,ge+ve,ye,_e,j),Math.max(me,0)},enumerable:!0,configurable:!0}),AbrController.prototype._findBestLevel=function(a,A,j,P,B,q,ne,ie,se){for(var le=B;le>=P;le--){var he=se[le];if(he){var pe=he.details,ge=pe?pe.totalduration/pe.fragments.length:A,me=!!pe&&pe.live,ve=void 0;ve=le<=a?ne*j:ie*j;var ye=se[le].realBitrate?Math.max(se[le].realBitrate,se[le].bitrate):se[le].bitrate,_e=ye*ge/ve;if(oe.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+le+"/"+Math.round(ve)+"/"+ye+"/"+ge+"/"+q+"/"+_e),ve>ye&&(!_e||me&&!this.bitrateTestDelay||_e<q))return le}}return-1},AbrController}(q.default);A.default=he}).call(this,j("./src/polyfills/number.js").Number)},"./src/controller/audio-stream-controller.js":function srcControllerAudioStreamControllerJs(a,A,j){"use strict";(function(a){var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/utils/binary-search.js"),q=j("./src/utils/buffer-helper.js"),ne=j("./src/demux/demuxer.js"),ie=j("./src/events.js"),oe=j("./src/controller/level-helper.js"),se=j("./src/utils/time-ranges.js"),le=j("./src/errors.js"),he=j("./src/utils/logger.js"),pe=j("./src/utils/discontinuities.js"),ge=j("./src/controller/fragment-tracker.js"),me=j("./src/loader/fragment.js"),ve=j("./src/controller/base-stream-controller.js"),ye=window.performance,_e=function(A){function AudioStreamController(a,j){var P=A.call(this,a,ie.default.MEDIA_ATTACHED,ie.default.MEDIA_DETACHING,ie.default.AUDIO_TRACKS_UPDATED,ie.default.AUDIO_TRACK_SWITCHING,ie.default.AUDIO_TRACK_LOADED,ie.default.KEY_LOADED,ie.default.FRAG_LOADED,ie.default.FRAG_PARSING_INIT_SEGMENT,ie.default.FRAG_PARSING_DATA,ie.default.FRAG_PARSED,ie.default.ERROR,ie.default.BUFFER_RESET,ie.default.BUFFER_CREATED,ie.default.BUFFER_APPENDED,ie.default.BUFFER_FLUSHED,ie.default.INIT_PTS_FOUND)||this;return P.fragmentTracker=j,P.config=a.config,P.audioCodecSwap=!1,P._state=ve.State.STOPPED,P.initPTS=[],P.waitingFragment=null,P.videoTrackCC=null,P}return P(AudioStreamController,A),AudioStreamController.prototype.onInitPtsFound=function(a){var A=a.id,j=a.frag.cc,P=a.initPTS;"main"===A&&(this.initPTS[j]=P,this.videoTrackCC=j,he.logger.log("InitPTS for cc: "+j+" found from video track: "+P),this.state===ve.State.WAITING_INIT_PTS&&this.tick())},AudioStreamController.prototype.startLoad=function(a){if(this.tracks){var A=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,A>0&&-1===a?(he.logger.log("audio:override startPosition with lastCurrentTime @"+A.toFixed(3)),this.state=ve.State.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:a,this.state=ve.State.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=a,this.state=ve.State.STOPPED},Object.defineProperty(AudioStreamController.prototype,"state",{get:function get(){return this._state},set:function set(a){if(this.state!==a){var A=this.state;this._state=a,he.logger.log("audio stream:"+A+"->"+a)}},enumerable:!0,configurable:!0}),AudioStreamController.prototype.doTick=function(){var A,j,P,ne=this.hls,oe=ne.config;switch(this.state){case ve.State.ERROR:case ve.State.PAUSED:case ve.State.BUFFER_FLUSHING:break;case ve.State.STARTING:this.state=ve.State.WAITING_TRACK,this.loadedmetadata=!1;break;case ve.State.IDLE:var se=this.tracks;if(!se)break;if(!this.media&&(this.startFragRequested||!oe.startFragPrefetch))break;if(this.loadedmetadata)A=this.media.currentTime;else if(void 0===(A=this.nextLoadPosition))break;var le=this.mediaBuffer?this.mediaBuffer:this.media,me=this.videoBuffer?this.videoBuffer:this.media,_e=q.BufferHelper.bufferInfo(le,A,oe.maxBufferHole),we=q.BufferHelper.bufferInfo(me,A,oe.maxBufferHole),ke=_e.len,Oe=_e.end,Se=this.fragPrevious,Te=Math.min(oe.maxBufferLength,oe.maxMaxBufferLength),Ae=Math.max(Te,we.len),je=this.audioSwitch,Fe=this.trackId;if((ke<Ae||je)&&Fe<se.length){if("undefined"===typeof(P=se[Fe].details)){this.state=ve.State.WAITING_TRACK;break}if(!je&&this._streamEnded(_e,P))return this.hls.trigger(ie.default.BUFFER_EOS,{type:"audio"}),void(this.state=ve.State.ENDED);var Re=P.fragments,Me=Re.length,Ne=Re[0].start,Be=Re[Me-1].start+Re[Me-1].duration,Ue=void 0;if(je)if(P.live&&!P.PTSKnown)he.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),Oe=0;else if(Oe=A,P.PTSKnown&&A<Ne){if(!(_e.end>Ne||_e.nextStart))return;he.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=Ne+.05}if(P.initSegment&&!P.initSegment.data)Ue=P.initSegment;else if(Oe<=Ne){if(Ue=Re[0],null!==this.videoTrackCC&&Ue.cc!==this.videoTrackCC&&(Ue=pe.findFragWithCC(Re,this.videoTrackCC)),P.live&&Ue.loadIdx&&Ue.loadIdx===this.fragLoadIdx){var We=_e.nextStart?_e.nextStart:Ne;return he.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(We+.05)),void(this.media.currentTime=We+.05)}}else{var Ve=void 0,Ye=oe.maxFragLookUpTolerance,$e=Se?Re[Se.sn-Re[0].sn+1]:void 0,Xe=function fragmentWithinToleranceTest(a){var A=Math.min(Ye,a.duration);return a.start+a.duration-A<=Oe?1:a.start-A>Oe&&a.start?-1:0};Oe<Be?(Oe>Be-Ye&&(Ye=0),Ve=$e&&!Xe($e)?$e:B.default.search(Re,Xe)):Ve=Re[Me-1],Ve&&(Ue=Ve,Ne=Ve.start,Se&&Ue.level===Se.level&&Ue.sn===Se.sn&&(Ue.sn<P.endSN?(Ue=Re[Ue.sn+1-P.startSN],he.logger.log("SN just loaded, load next one: "+Ue.sn)):Ue=null))}Ue&&(Ue.encrypted?(he.logger.log("Loading key for "+Ue.sn+" of ["+P.startSN+" ,"+P.endSN+"],track "+Fe),this.state=ve.State.KEY_LOADING,ne.trigger(ie.default.KEY_LOADING,{frag:Ue})):(he.logger.log("Loading "+Ue.sn+", cc: "+Ue.cc+" of ["+P.startSN+" ,"+P.endSN+"],track "+Fe+", currentTime:"+A+",bufferEnd:"+Oe.toFixed(3)),this.fragCurrent=Ue,(je||this.fragmentTracker.getState(Ue)===ge.FragmentState.NOT_LOADED)&&(this.startFragRequested=!0,a.isFinite(Ue.sn)&&(this.nextLoadPosition=Ue.start+Ue.duration),ne.trigger(ie.default.FRAG_LOADING,{frag:Ue}),this.state=ve.State.FRAG_LOADING)))}break;case ve.State.WAITING_TRACK:(j=this.tracks[this.trackId])&&j.details&&(this.state=ve.State.IDLE);break;case ve.State.FRAG_LOADING_WAITING_RETRY:var et=ye.now(),tt=this.retryDate,nt=(le=this.media)&&le.seeking;(!tt||et>=tt||nt)&&(he.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=ve.State.IDLE);break;case ve.State.WAITING_INIT_PTS:var rt=this.videoTrackCC;if(void 0===this.initPTS[rt])break;var it=this.waitingFragment;if(it){var at=it.frag.cc;rt!==at?(j=this.tracks[this.trackId]).details&&j.details.live&&(he.logger.warn("Waiting fragment CC ("+at+") does not match video track CC ("+rt+")"),this.waitingFragment=null,this.state=ve.State.IDLE):(this.state=ve.State.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=ve.State.IDLE;break;case ve.State.STOPPED:case ve.State.FRAG_LOADING:case ve.State.PARSING:case ve.State.PARSED:case ve.State.ENDED:}},AudioStreamController.prototype.onMediaAttached=function(a){var A=this.media=this.mediaBuffer=a.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),A.addEventListener("seeking",this.onvseeking),A.addEventListener("ended",this.onvended);var j=this.config;this.tracks&&j.autoStartLoad&&this.startLoad(j.startPosition)},AudioStreamController.prototype.onMediaDetaching=function(){var a=this.media;a&&a.ended&&(he.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),a&&(a.removeEventListener("seeking",this.onvseeking),a.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},AudioStreamController.prototype.onAudioTracksUpdated=function(a){he.logger.log("audio tracks updated"),this.tracks=a.audioTracks},AudioStreamController.prototype.onAudioTrackSwitching=function(a){var A=!!a.url;this.trackId=a.id,this.fragCurrent=null,this.state=ve.State.PAUSED,this.waitingFragment=null,A?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),A&&(this.audioSwitch=!0,this.state=ve.State.IDLE),this.tick()},AudioStreamController.prototype.onAudioTrackLoaded=function(A){var j=A.details,P=A.id,B=this.tracks[P],q=j.totalduration,ne=0;if(he.logger.log("track "+P+" loaded ["+j.startSN+","+j.endSN+"],duration:"+q),j.live){var ie=B.details;ie&&j.fragments.length>0?(oe.mergeDetails(ie,j),ne=j.fragments[0].start,j.PTSKnown?he.logger.log("live audio playlist sliding:"+ne.toFixed(3)):he.logger.log("live audio playlist - outdated PTS, unknown sliding")):(j.PTSKnown=!1,he.logger.log("live audio playlist - first load, unknown sliding"))}else j.PTSKnown=!1;if(B.details=j,!this.startFragRequested){if(-1===this.startPosition){var se=j.startTimeOffset;a.isFinite(se)?(he.logger.log("start time offset found in playlist, adjust startPosition to "+se),this.startPosition=se):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===ve.State.WAITING_TRACK&&(this.state=ve.State.IDLE),this.tick()},AudioStreamController.prototype.onKeyLoaded=function(){this.state===ve.State.KEY_LOADING&&(this.state=ve.State.IDLE,this.tick())},AudioStreamController.prototype.onFragLoaded=function(a){var A=this.fragCurrent,j=a.frag;if(this.state===ve.State.FRAG_LOADING&&A&&"audio"===j.type&&j.level===A.level&&j.sn===A.sn){var P=this.tracks[this.trackId],B=P.details,q=B.totalduration,oe=A.level,se=A.sn,le=A.cc,pe=this.config.defaultAudioCodec||P.audioCodec||"mp4a.40.2",ge=this.stats=a.stats;if("initSegment"===se)this.state=ve.State.IDLE,ge.tparsed=ge.tbuffered=ye.now(),B.initSegment.data=a.payload,this.hls.trigger(ie.default.FRAG_BUFFERED,{stats:ge,frag:A,id:"audio"}),this.tick();else{this.state=ve.State.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new ne.default(this.hls,"audio"));var me=this.initPTS[le],_e=B.initSegment?B.initSegment.data:[];if(B.initSegment||void 0!==me){this.pendingBuffering=!0,he.logger.log("Demuxing "+se+" of ["+B.startSN+" ,"+B.endSN+"],track "+oe);this.demuxer.push(a.payload,_e,pe,null,A,q,!1,me)}else he.logger.log("unknown video PTS for continuity counter "+le+", waiting for video PTS before demuxing audio frag "+se+" of ["+B.startSN+" ,"+B.endSN+"],track "+oe),this.waitingFragment=a,this.state=ve.State.WAITING_INIT_PTS}}this.fragLoadError=0},AudioStreamController.prototype.onFragParsingInitSegment=function(a){var A=this.fragCurrent,j=a.frag;if(A&&"audio"===a.id&&j.sn===A.sn&&j.level===A.level&&this.state===ve.State.PARSING){var P=a.tracks,B=void 0;if(P.video&&delete P.video,B=P.audio){B.levelCodec=B.codec,B.id=a.id,this.hls.trigger(ie.default.BUFFER_CODECS,P),he.logger.log("audio track:audio,container:"+B.container+",codecs[level/parsed]=["+B.levelCodec+"/"+B.codec+"]");var q=B.initSegment;if(q){var ne={type:"audio",data:q,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[ne]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(ie.default.BUFFER_APPENDING,ne))}this.tick()}}},AudioStreamController.prototype.onFragParsingData=function(A){var j=this,P=this.fragCurrent,B=A.frag;if(P&&"audio"===A.id&&"audio"===A.type&&B.sn===P.sn&&B.level===P.level&&this.state===ve.State.PARSING){var q=this.trackId,ne=this.tracks[q],se=this.hls;a.isFinite(A.endPTS)||(A.endPTS=A.startPTS+P.duration,A.endDTS=A.startDTS+P.duration),P.addElementaryStream(me.default.ElementaryStreamTypes.AUDIO),he.logger.log("parsed "+A.type+",PTS:["+A.startPTS.toFixed(3)+","+A.endPTS.toFixed(3)+"],DTS:["+A.startDTS.toFixed(3)+"/"+A.endDTS.toFixed(3)+"],nb:"+A.nb),oe.updateFragPTSDTS(ne.details,P,A.startPTS,A.endPTS);var pe=this.audioSwitch,ge=this.media,ye=!1;if(pe&&ge)if(ge.readyState){var _e=ge.currentTime;he.logger.log("switching audio track : currentTime:"+_e),_e>=A.startPTS&&(he.logger.log("switching audio track : flushing all audio"),this.state=ve.State.BUFFER_FLUSHING,se.trigger(ie.default.BUFFER_FLUSHING,{startOffset:0,endOffset:a.POSITIVE_INFINITY,type:"audio"}),ye=!0,this.audioSwitch=!1,se.trigger(ie.default.AUDIO_TRACK_SWITCHED,{id:q}))}else this.audioSwitch=!1,se.trigger(ie.default.AUDIO_TRACK_SWITCHED,{id:q});var we=this.pendingData;if(!we)return he.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void se.trigger(ie.default.ERROR,{type:le.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([A.data1,A.data2].forEach((function(a){a&&a.length&&we.push({type:A.type,data:a,parent:"audio",content:"data"})})),!ye&&we.length&&(we.forEach((function(a){j.state===ve.State.PARSING&&(j.pendingBuffering=!0,j.hls.trigger(ie.default.BUFFER_APPENDING,a))})),this.pendingData=[],this.appended=!0)),this.tick()}},AudioStreamController.prototype.onFragParsed=function(a){var A=this.fragCurrent,j=a.frag;A&&"audio"===a.id&&j.sn===A.sn&&j.level===A.level&&this.state===ve.State.PARSING&&(this.stats.tparsed=ye.now(),this.state=ve.State.PARSED,this._checkAppendedParsed())},AudioStreamController.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},AudioStreamController.prototype.onBufferCreated=function(a){var A=a.tracks.audio;A&&(this.mediaBuffer=A.buffer,this.loadedmetadata=!0),a.tracks.video&&(this.videoBuffer=a.tracks.video.buffer)},AudioStreamController.prototype.onBufferAppended=function(a){if("audio"===a.parent){var A=this.state;A!==ve.State.PARSING&&A!==ve.State.PARSED||(this.pendingBuffering=a.pending>0,this._checkAppendedParsed())}},AudioStreamController.prototype._checkAppendedParsed=function(){if(this.state===ve.State.PARSED&&(!this.appended||!this.pendingBuffering)){var a=this.fragCurrent,A=this.stats,j=this.hls;if(a){this.fragPrevious=a,A.tbuffered=ye.now(),j.trigger(ie.default.FRAG_BUFFERED,{stats:A,frag:a,id:"audio"});var P=this.mediaBuffer?this.mediaBuffer:this.media;he.logger.log("audio buffered : "+se.default.toString(P.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,j.trigger(ie.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ve.State.IDLE}this.tick()}},AudioStreamController.prototype.onError=function(A){var j=A.frag;if(!j||"audio"===j.type)switch(A.details){case le.ErrorDetails.FRAG_LOAD_ERROR:case le.ErrorDetails.FRAG_LOAD_TIMEOUT:var P=A.frag;if(P&&"audio"!==P.type)break;if(!A.fatal){var B=this.fragLoadError;if(B?B++:B=1,B<=(oe=this.config).fragLoadingMaxRetry){this.fragLoadError=B;var ne=Math.min(Math.pow(2,B-1)*oe.fragLoadingRetryDelay,oe.fragLoadingMaxRetryTimeout);he.logger.warn("AudioStreamController: frag loading failed, retry in "+ne+" ms"),this.retryDate=ye.now()+ne,this.state=ve.State.FRAG_LOADING_WAITING_RETRY}else he.logger.error("AudioStreamController: "+A.details+" reaches max retry, redispatch as fatal ..."),A.fatal=!0,this.state=ve.State.ERROR}break;case le.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case le.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case le.ErrorDetails.KEY_LOAD_ERROR:case le.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==ve.State.ERROR&&(this.state=A.fatal?ve.State.ERROR:ve.State.IDLE,he.logger.warn("AudioStreamController: "+A.details+" while loading frag, now switching to "+this.state+" state ..."));break;case le.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===A.parent&&(this.state===ve.State.PARSING||this.state===ve.State.PARSED)){var oe,se=this.mediaBuffer,pe=this.media.currentTime;if(se&&q.BufferHelper.isBuffered(se,pe)&&q.BufferHelper.isBuffered(se,pe+.5))(oe=this.config).maxMaxBufferLength>=oe.maxBufferLength&&(oe.maxMaxBufferLength/=2,he.logger.warn("AudioStreamController: reduce max buffer length to "+oe.maxMaxBufferLength+"s")),this.state=ve.State.IDLE;else he.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=ve.State.BUFFER_FLUSHING,this.hls.trigger(ie.default.BUFFER_FLUSHING,{startOffset:0,endOffset:a.POSITIVE_INFINITY,type:"audio"})}}},AudioStreamController.prototype.onBufferFlushed=function(){var a=this,A=this.pendingData;A&&A.length?(he.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),A.forEach((function(A){a.hls.trigger(ie.default.BUFFER_APPENDING,A)})),this.appended=!0,this.pendingData=[],this.state=ve.State.PARSED):(this.state=ve.State.IDLE,this.fragPrevious=null,this.tick())},AudioStreamController}(ve.default);A.default=_e}).call(this,j("./src/polyfills/number.js").Number)},"./src/controller/audio-track-controller.js":function srcControllerAudioTrackControllerJs(a,A,j){"use strict";var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/events.js"),q=j("./src/task-loop.js"),ne=j("./src/utils/logger.js"),ie=j("./src/errors.js"),oe=function(a){function AudioTrackController(A){var j=a.call(this,A,B.default.MANIFEST_LOADING,B.default.MANIFEST_PARSED,B.default.AUDIO_TRACK_LOADED,B.default.AUDIO_TRACK_SWITCHED,B.default.LEVEL_LOADED,B.default.ERROR)||this;return j._trackId=-1,j._selectDefaultTrack=!0,j.tracks=[],j.trackIdBlacklist=Object.create(null),j.audioGroupId=null,j}return P(AudioTrackController,a),AudioTrackController.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},AudioTrackController.prototype.onManifestParsed=function(a){var A=this.tracks=a.audioTracks||[];this.hls.trigger(B.default.AUDIO_TRACKS_UPDATED,{audioTracks:A})},AudioTrackController.prototype.onAudioTrackLoaded=function(a){if(a.id>=this.tracks.length)ne.logger.warn("Invalid audio track id:",a.id);else{if(ne.logger.log("audioTrack "+a.id+" loaded"),this.tracks[a.id].details=a.details,a.details.live&&!this.hasInterval()){var A=1e3*a.details.targetduration;this.setInterval(A)}!a.details.live&&this.hasInterval()&&this.clearInterval()}},AudioTrackController.prototype.onAudioTrackSwitched=function(a){var A=this.tracks[a.id].groupId;A&&this.audioGroupId!==A&&(this.audioGroupId=A)},AudioTrackController.prototype.onLevelLoaded=function(a){var A=this.hls.levels[a.level];if(A.audioGroupIds){var j=A.audioGroupIds[A.urlId];this.audioGroupId!==j&&(this.audioGroupId=j,this._selectInitialAudioTrack())}},AudioTrackController.prototype.onError=function(a){a.type===ie.ErrorTypes.NETWORK_ERROR&&(a.fatal&&this.clearInterval(),a.details===ie.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(ne.logger.warn("Network failure on audio-track id:",a.context.id),this._handleLoadError()))},Object.defineProperty(AudioTrackController.prototype,"audioTracks",{get:function get(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(AudioTrackController.prototype,"audioTrack",{get:function get(){return this._trackId},set:function set(a){this._setAudioTrack(a),this._selectDefaultTrack=!1},enumerable:!0,configurable:!0}),AudioTrackController.prototype._setAudioTrack=function(a){if(this._trackId===a&&this.tracks[this._trackId].details)ne.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(a<0||a>=this.tracks.length)ne.logger.warn("Invalid id passed to audio-track controller");else{var A=this.tracks[a];ne.logger.log("Now switching to audio-track index "+a),this.clearInterval(),this._trackId=a;var j=A.url,P=A.type,q=A.id;this.hls.trigger(B.default.AUDIO_TRACK_SWITCHING,{id:q,type:P,url:j}),this._loadTrackDetailsIfNeeded(A)}},AudioTrackController.prototype.doTick=function(){this._updateTrack(this._trackId)},AudioTrackController.prototype._selectInitialAudioTrack=function(){var a=this,A=this.tracks;if(A.length){var j=this.tracks[this._trackId],P=null;if(j&&(P=j.name),this._selectDefaultTrack){var q=A.filter((function(a){return a.default}));q.length?A=q:ne.logger.warn("No default audio tracks defined")}var oe=!1,se=function traverseTracks(){A.forEach((function(A){oe||a.audioGroupId&&A.groupId!==a.audioGroupId||P&&P!==A.name||(a._setAudioTrack(A.id),oe=!0)}))};se(),oe||(P=null,se()),oe||(ne.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(B.default.ERROR,{type:ie.ErrorTypes.MEDIA_ERROR,details:ie.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},AudioTrackController.prototype._needsTrackLoading=function(a){var A=a.details,j=a.url;return!(A&&!A.live)&&!!j},AudioTrackController.prototype._loadTrackDetailsIfNeeded=function(a){if(this._needsTrackLoading(a)){var A=a.url,j=a.id;ne.logger.log("loading audio-track playlist for id: "+j),this.hls.trigger(B.default.AUDIO_TRACK_LOADING,{url:A,id:j})}},AudioTrackController.prototype._updateTrack=function(a){if(!(a<0||a>=this.tracks.length)){this.clearInterval(),this._trackId=a,ne.logger.log("trying to update audio-track "+a);var A=this.tracks[a];this._loadTrackDetailsIfNeeded(A)}},AudioTrackController.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var a=this._trackId,A=this.tracks[a],j=A.name,P=A.language,B=A.groupId;ne.logger.warn("Loading failed on audio track id: "+a+", group-id: "+B+', name/language: "'+j+'" / "'+P+'"');for(var q=a,ie=0;ie<this.tracks.length;ie++){if(!this.trackIdBlacklist[ie])if(this.tracks[ie].name===j){q=ie;break}}q!==a?(ne.logger.log("Attempting audio-track fallback id:",q,"group-id:",this.tracks[q].groupId),this._setAudioTrack(q)):ne.logger.warn('No fallback audio-track found for name/language: "'+j+'" / "'+P+'"')},AudioTrackController}(q.default);A.default=oe},"./src/controller/base-stream-controller.js":function srcControllerBaseStreamControllerJs(a,A,j){"use strict";(function(a){var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/task-loop.js"),q=j("./src/controller/fragment-tracker.js"),ne=j("./src/utils/buffer-helper.js"),ie=j("./src/utils/logger.js");A.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};var oe=function(j){function BaseStreamController(){return null!==j&&j.apply(this,arguments)||this}return P(BaseStreamController,j),BaseStreamController.prototype.doTick=function(){},BaseStreamController.prototype.startLoad=function(){},BaseStreamController.prototype.stopLoad=function(){var a=this.fragCurrent;a&&(a.loader&&a.loader.abort(),this.fragmentTracker.removeFragment(a)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=A.State.STOPPED},BaseStreamController.prototype._streamEnded=function(a,A){var j=this.fragCurrent,P=this.fragmentTracker;if(!A.live&&j&&!j.backtracked&&j.sn===A.endSN&&!a.nextStart){var B=P.getState(j);return B===q.FragmentState.PARTIAL||B===q.FragmentState.OK}return!1},BaseStreamController.prototype.onMediaSeeking=function(){var j=this.config,P=this.media,B=this.mediaBuffer,q=this.state,oe=P?P.currentTime:null,se=ne.BufferHelper.bufferInfo(B||P,oe,this.config.maxBufferHole);if(a.isFinite(oe)&&ie.logger.log("media seeking to "+oe.toFixed(3)),q===A.State.FRAG_LOADING){var le=this.fragCurrent;if(0===se.len&&le){var he=j.maxFragLookUpTolerance,pe=le.start-he,ge=le.start+le.duration+he;oe<pe||oe>ge?(le.loader&&(ie.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),le.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=A.State.IDLE):ie.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else q===A.State.ENDED&&(0===se.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=A.State.IDLE);P&&(this.lastCurrentTime=oe),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=oe),this.tick()},BaseStreamController.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},BaseStreamController.prototype.onHandlerDestroying=function(){this.stopLoad(),j.prototype.onHandlerDestroying.call(this)},BaseStreamController.prototype.onHandlerDestroyed=function(){this.state=A.State.STOPPED,this.fragmentTracker=null},BaseStreamController}(B.default);A.default=oe}).call(this,j("./src/polyfills/number.js").Number)},"./src/controller/buffer-controller.js":function srcControllerBufferControllerJs(a,A,j){"use strict";(function(a){var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/events.js"),q=j("./src/event-handler.js"),ne=j("./src/utils/logger.js"),ie=j("./src/errors.js"),oe=j("./src/utils/mediasource-helper.js").getMediaSource(),se=function(A){function BufferController(a){var j=A.call(this,a,B.default.MEDIA_ATTACHING,B.default.MEDIA_DETACHING,B.default.MANIFEST_PARSED,B.default.BUFFER_RESET,B.default.BUFFER_APPENDING,B.default.BUFFER_CODECS,B.default.BUFFER_EOS,B.default.BUFFER_FLUSHING,B.default.LEVEL_PTS_UPDATED,B.default.LEVEL_UPDATED)||this;return j._msDuration=null,j._levelDuration=null,j._levelTargetDuration=10,j._live=null,j._objectUrl=null,j.bufferCodecEventsExpected=0,j.onsbue=j.onSBUpdateEnd.bind(j),j.onsbe=j.onSBUpdateError.bind(j),j.pendingTracks={},j.tracks={},j}return P(BufferController,A),BufferController.prototype.destroy=function(){q.default.prototype.destroy.call(this)},BufferController.prototype.onLevelPtsUpdated=function(a){var A=a.type,j=this.tracks.audio;if("audio"===A&&j&&"audio/mpeg"===j.container){var P=this.sourceBuffer.audio;if(Math.abs(P.timestampOffset-a.start)>.1){var B=P.updating;try{P.abort()}catch(q){ne.logger.warn("can not abort audio buffer: "+q)}B?this.audioTimestampOffset=a.start:(ne.logger.warn("change mpeg audio timestamp offset from "+P.timestampOffset+" to "+a.start),P.timestampOffset=a.start)}}},BufferController.prototype.onManifestParsed=function(a){this.bufferCodecEventsExpected=a.altAudio?2:1,ne.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},BufferController.prototype.onMediaAttaching=function(a){var A=this.media=a.media;if(A){var j=this.mediaSource=new oe;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),j.addEventListener("sourceopen",this.onmso),j.addEventListener("sourceended",this.onmse),j.addEventListener("sourceclose",this.onmsc),A.src=window.URL.createObjectURL(j),this._objectUrl=A.src}},BufferController.prototype.onMediaDetaching=function(){ne.logger.log("media source detaching");var a=this.mediaSource;if(a){if("open"===a.readyState)try{a.endOfStream()}catch(A){ne.logger.warn("onMediaDetaching:"+A.message+" while calling endOfStream")}a.removeEventListener("sourceopen",this.onmso),a.removeEventListener("sourceended",this.onmse),a.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):ne.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(B.default.MEDIA_DETACHED)},BufferController.prototype.onMediaSourceOpen=function(){ne.logger.log("media source opened"),this.hls.trigger(B.default.MEDIA_ATTACHED,{media:this.media});var a=this.mediaSource;a&&a.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},BufferController.prototype.checkPendingTracks=function(){var a=this.bufferCodecEventsExpected,A=this.pendingTracks,j=Object.keys(A).length;(j&&!a||2===j)&&(this.createSourceBuffers(A),this.pendingTracks={},this.doAppending())},BufferController.prototype.onMediaSourceClose=function(){ne.logger.log("media source closed")},BufferController.prototype.onMediaSourceEnded=function(){ne.logger.log("media source ended")},BufferController.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var a=this.sourceBuffer.audio;ne.logger.warn("change mpeg audio timestamp offset from "+a.timestampOffset+" to "+this.audioTimestampOffset),a.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var A=this.parent,j=this.segments.reduce((function(a,j){return j.parent===A?a+1:a}),0),P={},q=this.sourceBuffer;for(var ie in q)P[ie]=q[ie].buffered;this.hls.trigger(B.default.BUFFER_APPENDED,{parent:A,pending:j,timeRanges:P}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===j&&this.flushLiveBackBuffer()},BufferController.prototype.onSBUpdateError=function(a){ne.logger.error("sourceBuffer error:",a),this.hls.trigger(B.default.ERROR,{type:ie.ErrorTypes.MEDIA_ERROR,details:ie.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},BufferController.prototype.onBufferReset=function(){var a=this.sourceBuffer;for(var A in a){var j=a[A];try{this.mediaSource.removeSourceBuffer(j),j.removeEventListener("updateend",this.onsbue),j.removeEventListener("error",this.onsbe)}catch(P){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},BufferController.prototype.onBufferCodecs=function(a){var A=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(a).forEach((function(j){A.pendingTracks[j]=a[j]}));var j=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),j&&"open"===j.readyState&&this.checkPendingTracks()}},BufferController.prototype.createSourceBuffers=function(a){var A=this.sourceBuffer,j=this.mediaSource;for(var P in a)if(!A[P]){var q=a[P],oe=q.levelCodec||q.codec,se=q.container+";codecs="+oe;ne.logger.log("creating sourceBuffer("+se+")");try{var le=A[P]=j.addSourceBuffer(se);le.addEventListener("updateend",this.onsbue),le.addEventListener("error",this.onsbe),this.tracks[P]={codec:oe,container:q.container},q.buffer=le}catch(he){ne.logger.error("error while trying to add sourceBuffer:"+he.message),this.hls.trigger(B.default.ERROR,{type:ie.ErrorTypes.MEDIA_ERROR,details:ie.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:he,mimeType:se})}}this.hls.trigger(B.default.BUFFER_CREATED,{tracks:a})},BufferController.prototype.onBufferAppending=function(a){this._needsFlush||(this.segments?this.segments.push(a):this.segments=[a],this.doAppending())},BufferController.prototype.onBufferAppendFail=function(a){ne.logger.error("sourceBuffer error:",a.event),this.hls.trigger(B.default.ERROR,{type:ie.ErrorTypes.MEDIA_ERROR,details:ie.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},BufferController.prototype.onBufferEos=function(a){var A=this.sourceBuffer,j=a.type;for(var P in A)j&&P!==j||A[P].ended||(A[P].ended=!0,ne.logger.log(P+" sourceBuffer now EOS"));this.checkEos()},BufferController.prototype.checkEos=function(){var a=this.sourceBuffer,A=this.mediaSource;if(A&&"open"===A.readyState){for(var j in a){var P=a[j];if(!P.ended)return;if(P.updating)return void(this._needsEos=!0)}ne.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{A.endOfStream()}catch(B){ne.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},BufferController.prototype.onBufferFlushing=function(a){this.flushRange.push({start:a.startOffset,end:a.endOffset,type:a.type}),this.flushBufferCounter=0,this.doFlush()},BufferController.prototype.flushLiveBackBuffer=function(){if(this._live){var a=this.hls.config.liveBackBufferLength;if(isFinite(a)&&!(a<0))for(var A=this.media.currentTime,j=this.sourceBuffer,P=Object.keys(j),B=A-Math.max(a,this._levelTargetDuration),q=P.length-1;q>=0;q--){var ne=P[q],ie=j[ne].buffered;ie.length>0&&B>ie.start(0)&&this.removeBufferRange(ne,j[ne],0,B)}}},BufferController.prototype.onLevelUpdated=function(a){var A=a.details;A.fragments.length>0&&(this._levelDuration=A.totalduration+A.fragments[0].start,this._levelTargetDuration=A.averagetargetduration||A.targetduration||10,this._live=A.live,this.updateMediaElementDuration())},BufferController.prototype.updateMediaElementDuration=function(){var A,j=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var P in this.sourceBuffer)if(!0===this.sourceBuffer[P].updating)return;A=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===j.liveDurationInfinity?(ne.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>A||!a.isFinite(A))&&(ne.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},BufferController.prototype.doFlush=function(){for(;this.flushRange.length;){var a=this.flushRange[0];if(!this.flushBuffer(a.start,a.end,a.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var A=0,j=this.sourceBuffer;try{for(var P in j)A+=j[P].buffered.length}catch(q){ne.logger.error("error while accessing sourceBuffer.buffered")}this.appended=A,this.hls.trigger(B.default.BUFFER_FLUSHED)}},BufferController.prototype.doAppending=function(){var a=this.hls,A=this.segments,j=this.sourceBuffer;if(Object.keys(j).length){if(this.media.error)return this.segments=[],void ne.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(A&&A.length){var P=A.shift();try{var q=j[P.type];q?q.updating?A.unshift(P):(q.ended=!1,this.parent=P.parent,q.appendBuffer(P.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(se){ne.logger.error("error while trying to append buffer:"+se.message),A.unshift(P);var oe={type:ie.ErrorTypes.MEDIA_ERROR,parent:P.parent};22!==se.code?(this.appendError?this.appendError++:this.appendError=1,oe.details=ie.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>a.config.appendErrorMaxRetry?(ne.logger.log("fail "+a.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],oe.fatal=!0,a.trigger(B.default.ERROR,oe)):(oe.fatal=!1,a.trigger(B.default.ERROR,oe))):(this.segments=[],oe.details=ie.ErrorDetails.BUFFER_FULL_ERROR,oe.fatal=!1,a.trigger(B.default.ERROR,oe))}}}},BufferController.prototype.flushBuffer=function(a,A,j){var P,B=this.sourceBuffer;if(Object.keys(B).length){if(ne.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+a+"/"+A),this.flushBufferCounter<this.appended){for(var q in B)if(!j||q===j){if((P=B[q]).ended=!1,P.updating)return ne.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(q,P,a,A))return this.flushBufferCounter++,!1}}else ne.logger.warn("abort flushing too many retries");ne.logger.log("buffer flushed")}return!0},BufferController.prototype.removeBufferRange=function(a,A,j,P){try{for(var B=0;B<A.buffered.length;B++){var q=A.buffered.start(B),ie=A.buffered.end(B),oe=Math.max(q,j),se=Math.min(ie,P);if(Math.min(se,ie)-oe>.5)return ne.logger.log("sb remove "+a+" ["+oe+","+se+"], of ["+q+","+ie+"], pos:"+this.media.currentTime),A.remove(oe,se),!0}}catch(le){ne.logger.warn("removeBufferRange failed",le)}return!1},BufferController}(q.default);A.default=se}).call(this,j("./src/polyfills/number.js").Number)},"./src/controller/cap-level-controller.js":function srcControllerCapLevelControllerJs(a,A,j){"use strict";(function(a){var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/events.js"),q=function(A){function CapLevelController(j){var P=A.call(this,j,B.default.FPS_DROP_LEVEL_CAPPING,B.default.MEDIA_ATTACHING,B.default.MANIFEST_PARSED,B.default.BUFFER_CODECS,B.default.MEDIA_DETACHING)||this;return P.autoLevelCapping=a.POSITIVE_INFINITY,P.firstLevel=null,P.levels=[],P.media=null,P.restrictedLevels=[],P.timer=null,P}return P(CapLevelController,A),CapLevelController.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},CapLevelController.prototype.onFpsDropLevelCapping=function(a){CapLevelController.isLevelAllowed(a.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(a.droppedLevel)},CapLevelController.prototype.onMediaAttaching=function(a){this.media=a.media instanceof window.HTMLVideoElement?a.media:null},CapLevelController.prototype.onManifestParsed=function(a){var A=this.hls;this.restrictedLevels=[],this.levels=a.levels,this.firstLevel=a.firstLevel,A.config.capLevelToPlayerSize&&a.video&&this._startCapping()},CapLevelController.prototype.onBufferCodecs=function(a){this.hls.config.capLevelToPlayerSize&&a.video&&this._startCapping()},CapLevelController.prototype.onLevelsUpdated=function(a){this.levels=a.levels},CapLevelController.prototype.onMediaDetaching=function(){this._stopCapping()},CapLevelController.prototype.detectPlayerSize=function(){if(this.media){var a=this.levels?this.levels.length:0;if(a){var A=this.hls;A.autoLevelCapping=this.getMaxLevel(a-1),A.autoLevelCapping>this.autoLevelCapping&&A.streamController.nextLevelSwitch(),this.autoLevelCapping=A.autoLevelCapping}}},CapLevelController.prototype.getMaxLevel=function(a){var A=this;if(!this.levels)return-1;var j=this.levels.filter((function(j,P){return CapLevelController.isLevelAllowed(P,A.restrictedLevels)&&P<=a}));return CapLevelController.getMaxLevelByMediaSize(j,this.mediaWidth,this.mediaHeight)},CapLevelController.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=a.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},CapLevelController.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=a.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(CapLevelController.prototype,"mediaWidth",{get:function get(){var a,A=this.media;return A&&(a=A.width||A.clientWidth||A.offsetWidth,a*=CapLevelController.contentScaleFactor),a},enumerable:!0,configurable:!0}),Object.defineProperty(CapLevelController.prototype,"mediaHeight",{get:function get(){var a,A=this.media;return A&&(a=A.height||A.clientHeight||A.offsetHeight,a*=CapLevelController.contentScaleFactor),a},enumerable:!0,configurable:!0}),Object.defineProperty(CapLevelController,"contentScaleFactor",{get:function get(){var a=1;try{a=window.devicePixelRatio}catch(A){}return a},enumerable:!0,configurable:!0}),CapLevelController.isLevelAllowed=function(a,A){return void 0===A&&(A=[]),-1===A.indexOf(a)},CapLevelController.getMaxLevelByMediaSize=function(a,A,j){if(!a||a&&!a.length)return-1;for(var P=function atGreatestBandiwdth(a,A){return!A||(a.width!==A.width||a.height!==A.height)},B=a.length-1,q=0;q<a.length;q+=1){var ne=a[q];if((ne.width>=A||ne.height>=j)&&P(ne,a[q+1])){B=q;break}}return B},CapLevelController}(j("./src/event-handler.js").default);A.default=q}).call(this,j("./src/polyfills/number.js").Number)},"./src/controller/eme-controller.js":function srcControllerEmeControllerJs(a,A,j){"use strict";var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/event-handler.js"),q=j("./src/events.js"),ne=j("./src/errors.js"),ie=j("./src/utils/logger.js"),oe=window.XMLHttpRequest,se="com.widevine.alpha",le="com.microsoft.playready",he=function(a){function EMEController(A){var j=a.call(this,A,q.default.MEDIA_ATTACHED,q.default.MANIFEST_PARSED)||this;return j._widevineLicenseUrl=A.config.widevineLicenseUrl,j._licenseXhrSetup=A.config.licenseXhrSetup,j._emeEnabled=A.config.emeEnabled,j._requestMediaKeySystemAccess=A.config.requestMediaKeySystemAccessFunc,j._mediaKeysList=[],j._media=null,j._hasSetMediaKeys=!1,j._isMediaEncrypted=!1,j._requestLicenseFailureCount=0,j}return P(EMEController,a),EMEController.prototype.getLicenseServerUrl=function(a){var A;switch(a){case se:A=this._widevineLicenseUrl;break;default:A=null}return A||(ie.logger.error('No license server URL configured for key-system "'+a+'"'),this.hls.trigger(q.default.ERROR,{type:ne.ErrorTypes.KEY_SYSTEM_ERROR,details:ne.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),A},EMEController.prototype._attemptKeySystemAccess=function(a,A,j){var P=this,B=function getSupportedMediaKeySystemConfigurations(a,A,j){switch(a){case se:return function createWidevineMediaKeySystemConfigurations(a,A,j){var P={videoCapabilities:[]};return A.forEach((function(a){P.videoCapabilities.push({contentType:'video/mp4; codecs="'+a+'"'})})),[P]}(0,j);default:throw Error("Unknown key-system: "+a)}}(a,0,j);B?(ie.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(a,B).then((function(A){P._onMediaKeySystemAccessObtained(a,A)})).catch((function(A){ie.logger.error('Failed to obtain key-system "'+a+'" access:',A)}))):ie.logger.warn("Can not create config for key-system (maybe because platform is not supported):",a)},Object.defineProperty(EMEController.prototype,"requestMediaKeySystemAccess",{get:function get(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess},enumerable:!0,configurable:!0}),EMEController.prototype._onMediaKeySystemAccessObtained=function(a,A){var j=this;ie.logger.log('Access for key-system "'+a+'" obtained');var P={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:A,mediaKeySystemDomain:a};this._mediaKeysList.push(P),A.createMediaKeys().then((function(A){P.mediaKeys=A,ie.logger.log('Media-keys created for key-system "'+a+'"'),j._onMediaKeysCreated()})).catch((function(a){ie.logger.error("Failed to create media-keys:",a)}))},EMEController.prototype._onMediaKeysCreated=function(){var a=this;this._mediaKeysList.forEach((function(A){A.mediaKeysSession||(A.mediaKeysSession=A.mediaKeys.createSession(),a._onNewMediaKeySession(A.mediaKeysSession))}))},EMEController.prototype._onNewMediaKeySession=function(a){var A=this;ie.logger.log("New key-system session "+a.sessionId),a.addEventListener("message",(function(j){A._onKeySessionMessage(a,j.message)}),!1)},EMEController.prototype._onKeySessionMessage=function(a,A){ie.logger.log("Got EME message event, creating license request"),this._requestLicense(A,(function(A){ie.logger.log("Received license data, updating key-session"),a.update(A)}))},EMEController.prototype._onMediaEncrypted=function(a,A){ie.logger.log('Media is encrypted using "'+a+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=a,this._mediaEncryptionInitData=A,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},EMEController.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var a=this._mediaKeysList[0];if(!a||!a.mediaKeys)return ie.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(q.default.ERROR,{type:ne.ErrorTypes.KEY_SYSTEM_ERROR,details:ne.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});ie.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(a.mediaKeys),this._hasSetMediaKeys=!0}},EMEController.prototype._generateRequestWithPreferredKeySession=function(){var a=this,A=this._mediaKeysList[0];if(!A)return ie.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(q.default.ERROR,{type:ne.ErrorTypes.KEY_SYSTEM_ERROR,details:ne.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(A.mediaKeysSessionInitialized)ie.logger.warn("Key-Session already initialized but requested again");else{var j=A.mediaKeysSession;j||(ie.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(q.default.ERROR,{type:ne.ErrorTypes.KEY_SYSTEM_ERROR,details:ne.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}));var P=this._mediaEncryptionInitDataType,B=this._mediaEncryptionInitData;ie.logger.log('Generating key-session request for "'+P+'" init data type'),A.mediaKeysSessionInitialized=!0,j.generateRequest(P,B).then((function(){ie.logger.debug("Key-session generation succeeded")})).catch((function(A){ie.logger.error("Error generating key-session request:",A),a.hls.trigger(q.default.ERROR,{type:ne.ErrorTypes.KEY_SYSTEM_ERROR,details:ne.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},EMEController.prototype._createLicenseXhr=function(a,A,j){var P=new oe,B=this._licenseXhrSetup;try{if(B)try{B(P,a)}catch(se){P.open("POST",a,!0),B(P,a)}P.readyState||P.open("POST",a,!0)}catch(se){return ie.logger.error("Error setting up key-system license XHR",se),void this.hls.trigger(q.default.ERROR,{type:ne.ErrorTypes.KEY_SYSTEM_ERROR,details:ne.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return P.responseType="arraybuffer",P.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,P,a,A,j),P},EMEController.prototype._onLicenseRequestReadyStageChange=function(a,A,j,P){switch(a.readyState){case 4:if(200===a.status)this._requestLicenseFailureCount=0,ie.logger.log("License request succeeded"),P(a.response);else{if(ie.logger.error("License Request XHR failed ("+A+"). Status: "+a.status+" ("+a.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=3){var B=3-this._requestLicenseFailureCount+1;return ie.logger.warn("Retrying license request, "+B+" attempts left"),void this._requestLicense(j,P)}this.hls.trigger(q.default.ERROR,{type:ne.ErrorTypes.KEY_SYSTEM_ERROR,details:ne.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},EMEController.prototype._generateLicenseRequestChallenge=function(a,A){var j;return a.mediaKeySystemDomain===le?ie.logger.error("PlayReady is not supported (yet)"):a.mediaKeySystemDomain===se?j=A:ie.logger.error("Unsupported key-system:",a.mediaKeySystemDomain),j},EMEController.prototype._requestLicense=function(a,A){ie.logger.log("Requesting content license for key-system");var j=this._mediaKeysList[0];if(!j)return ie.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(q.default.ERROR,{type:ne.ErrorTypes.KEY_SYSTEM_ERROR,details:ne.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});var P=this.getLicenseServerUrl(j.mediaKeySystemDomain),B=this._createLicenseXhr(P,a,A);ie.logger.log("Sending license request to URL: "+P),B.send(this._generateLicenseRequestChallenge(j,a))},EMEController.prototype.onMediaAttached=function(a){var A=this;if(this._emeEnabled){var j=a.media;this._media=j,j.addEventListener("encrypted",(function(a){A._onMediaEncrypted(a.initDataType,a.initData)}))}},EMEController.prototype.onManifestParsed=function(a){if(this._emeEnabled){var A=a.levels.map((function(a){return a.audioCodec})),j=a.levels.map((function(a){return a.videoCodec}));this._attemptKeySystemAccess(se,A,j)}},EMEController}(B.default);A.default=he},"./src/controller/fps-controller.js":function srcControllerFpsControllerJs(a,A,j){"use strict";var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/events.js"),q=j("./src/event-handler.js"),ne=j("./src/utils/logger.js"),ie=window.performance,oe=function(a){function FPSController(A){return a.call(this,A,B.default.MEDIA_ATTACHING)||this}return P(FPSController,a),FPSController.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},FPSController.prototype.onMediaAttaching=function(a){var A=this.hls.config;A.capLevelOnFPSDrop&&("function"===typeof(this.video=a.media instanceof window.HTMLVideoElement?a.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),A.fpsDroppedMonitoringPeriod))},FPSController.prototype.checkFPS=function(a,A,j){var P=ie.now();if(A){if(this.lastTime){var q=P-this.lastTime,oe=j-this.lastDroppedFrames,se=A-this.lastDecodedFrames,le=1e3*oe/q,he=this.hls;if(he.trigger(B.default.FPS_DROP,{currentDropped:oe,currentDecoded:se,totalDroppedFrames:j}),le>0&&oe>he.config.fpsDroppedMonitoringThreshold*se){var pe=he.currentLevel;ne.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+pe),pe>0&&(-1===he.autoLevelCapping||he.autoLevelCapping>=pe)&&(pe-=1,he.trigger(B.default.FPS_DROP_LEVEL_CAPPING,{level:pe,droppedLevel:he.currentLevel}),he.autoLevelCapping=pe,he.streamController.nextLevelSwitch())}}this.lastTime=P,this.lastDroppedFrames=j,this.lastDecodedFrames=A}},FPSController.prototype.checkFPSInterval=function(){var a=this.video;if(a)if(this.isVideoPlaybackQualityAvailable){var A=a.getVideoPlaybackQuality();this.checkFPS(a,A.totalVideoFrames,A.droppedVideoFrames)}else this.checkFPS(a,a.webkitDecodedFrameCount,a.webkitDroppedFrameCount)},FPSController}(q.default);A.default=oe},"./src/controller/fragment-finders.js":function srcControllerFragmentFindersJs(a,A,j){"use strict";(function(a){Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/binary-search.js");function fragmentWithinToleranceTest(a,A,j){void 0===a&&(a=0),void 0===A&&(A=0);var P=Math.min(A,j.duration+(j.deltaPTS?j.deltaPTS:0));return j.start+j.duration-P<=a?1:j.start-P>a&&j.start?-1:0}function pdtWithinToleranceTest(a,A,j){var P=1e3*Math.min(A,j.duration+(j.deltaPTS?j.deltaPTS:0));return j.endProgramDateTime-P>a}A.findFragmentByPDT=function findFragmentByPDT(A,j,P){if(!Array.isArray(A)||!A.length||!a.isFinite(j))return null;if(j<A[0].programDateTime)return null;if(j>=A[A.length-1].endProgramDateTime)return null;P=P||0;for(var B=0;B<A.length;++B){var q=A[B];if(pdtWithinToleranceTest(j,P,q))return q}return null},A.findFragmentByPTS=function findFragmentByPTS(a,A,j,B){void 0===j&&(j=0),void 0===B&&(B=0);var q=a?A[a.sn-A[0].sn+1]:null;return q&&!fragmentWithinToleranceTest(j,B,q)?q:P.default.search(A,fragmentWithinToleranceTest.bind(null,j,B))},A.fragmentWithinToleranceTest=fragmentWithinToleranceTest,A.pdtWithinToleranceTest=pdtWithinToleranceTest}).call(this,j("./src/polyfills/number.js").Number)},"./src/controller/fragment-tracker.js":function srcControllerFragmentTrackerJs(a,A,j){"use strict";(function(a){var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/event-handler.js"),q=j("./src/events.js");A.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var ne=function(j){function FragmentTracker(a){var A=j.call(this,a,q.default.BUFFER_APPENDED,q.default.FRAG_BUFFERED,q.default.FRAG_LOADED)||this;return A.bufferPadding=.2,A.fragments=Object.create(null),A.timeRanges=Object.create(null),A.config=a.config,A}return P(FragmentTracker,j),FragmentTracker.prototype.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,B.default.prototype.destroy.call(this),j.prototype.destroy.call(this)},FragmentTracker.prototype.getBufferedFrag=function(a,A){var j=this.fragments,P=Object.keys(j).filter((function(P){var B=j[P];if(B.body.type!==A)return!1;if(!B.buffered)return!1;var q=B.body;return q.startPTS<=a&&a<=q.endPTS}));if(0===P.length)return null;var B=P.pop();return j[B].body},FragmentTracker.prototype.detectEvictedFragments=function(a,A){var j,P,B=this;Object.keys(this.fragments).forEach((function(q){var ne=B.fragments[q];if(!0===ne.buffered){var ie=ne.range[a];if(ie){j=ie.time;for(var oe=0;oe<j.length;oe++)if(P=j[oe],!1===B.isTimeBuffered(P.startPTS,P.endPTS,A)){B.removeFragment(ne.body);break}}}}))},FragmentTracker.prototype.detectPartialFragments=function(a){var A=this,j=this.getFragmentKey(a),P=this.fragments[j];P&&(P.buffered=!0,Object.keys(this.timeRanges).forEach((function(j){if(a.hasElementaryStream(j)){var B=A.timeRanges[j];P.range[j]=A.getBufferedTimes(a.startPTS,a.endPTS,B)}})))},FragmentTracker.prototype.getBufferedTimes=function(a,A,j){for(var P,B,q=[],ne=!1,ie=0;ie<j.length;ie++){if(P=j.start(ie)-this.bufferPadding,B=j.end(ie)+this.bufferPadding,a>=P&&A<=B){q.push({startPTS:Math.max(a,j.start(ie)),endPTS:Math.min(A,j.end(ie))});break}if(a<B&&A>P)q.push({startPTS:Math.max(a,j.start(ie)),endPTS:Math.min(A,j.end(ie))}),ne=!0;else if(A<=P)break}return{time:q,partial:ne}},FragmentTracker.prototype.getFragmentKey=function(a){return a.type+"_"+a.level+"_"+a.urlId+"_"+a.sn},FragmentTracker.prototype.getPartialFragment=function(a){var A,j,P,B=this,q=null,ne=0;return Object.keys(this.fragments).forEach((function(ie){var oe=B.fragments[ie];B.isPartial(oe)&&(j=oe.body.startPTS-B.bufferPadding,P=oe.body.endPTS+B.bufferPadding,a>=j&&a<=P&&(A=Math.min(a-j,P-a),ne<=A&&(q=oe.body,ne=A)))})),q},FragmentTracker.prototype.getState=function(a){var j=this.getFragmentKey(a),P=this.fragments[j],B=A.FragmentState.NOT_LOADED;return void 0!==P&&(B=P.buffered?!0===this.isPartial(P)?A.FragmentState.PARTIAL:A.FragmentState.OK:A.FragmentState.APPENDING),B},FragmentTracker.prototype.isPartial=function(a){return!0===a.buffered&&(void 0!==a.range.video&&!0===a.range.video.partial||void 0!==a.range.audio&&!0===a.range.audio.partial)},FragmentTracker.prototype.isTimeBuffered=function(a,A,j){for(var P,B,q=0;q<j.length;q++){if(P=j.start(q)-this.bufferPadding,B=j.end(q)+this.bufferPadding,a>=P&&A<=B)return!0;if(A<=P)return!1}return!1},FragmentTracker.prototype.onFragLoaded=function(A){var j=A.frag;a.isFinite(j.sn)&&!j.bitrateTest&&(this.fragments[this.getFragmentKey(j)]={body:j,range:Object.create(null),buffered:!1})},FragmentTracker.prototype.onBufferAppended=function(a){var A=this;this.timeRanges=a.timeRanges,Object.keys(this.timeRanges).forEach((function(a){var j=A.timeRanges[a];A.detectEvictedFragments(a,j)}))},FragmentTracker.prototype.onFragBuffered=function(a){this.detectPartialFragments(a.frag)},FragmentTracker.prototype.hasFragment=function(a){var A=this.getFragmentKey(a);return void 0!==this.fragments[A]},FragmentTracker.prototype.removeFragment=function(a){var A=this.getFragmentKey(a);delete this.fragments[A]},FragmentTracker.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},FragmentTracker}(B.default);A.FragmentTracker=ne}).call(this,j("./src/polyfills/number.js").Number)},"./src/controller/gap-controller.js":function srcControllerGapControllerJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/buffer-helper.js"),B=j("./src/errors.js"),q=j("./src/events.js"),ne=j("./src/utils/logger.js"),ie=function(){function GapController(a,A,j,P){this.config=a,this.media=A,this.fragmentTracker=j,this.hls=P,this.stallReported=!1}return GapController.prototype.poll=function(a,A){var j=this.config,B=this.media,q=B.currentTime,ie=window.performance.now();if(q!==a)return this.stallReported&&(ne.logger.warn("playback not stuck anymore @"+q+", after "+Math.round(ie-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(B.ended||!B.buffered.length||B.readyState>2)&&(!B.seeking||!P.BufferHelper.isBuffered(B,q))){var oe=ie-this.stalled,se=P.BufferHelper.bufferInfo(B,q,j.maxBufferHole);this.stalled?(oe>=1e3&&this._reportStall(se.len),this._tryFixBufferStall(se,oe)):this.stalled=ie}},GapController.prototype._tryFixBufferStall=function(a,A){var j=this.config,P=this.fragmentTracker,B=this.media.currentTime,q=P.getPartialFragment(B);q&&this._trySkipBufferHole(q),a.len>.5&&A>1e3*j.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},GapController.prototype._reportStall=function(a){var A=this.hls,j=this.media;this.stallReported||(this.stallReported=!0,ne.logger.warn("Playback stalling at @"+j.currentTime+" due to low buffer"),A.trigger(q.default.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:a}))},GapController.prototype._trySkipBufferHole=function(a){for(var A=this.hls,j=this.media,P=j.currentTime,ie=0,oe=0;oe<j.buffered.length;oe++){var se=j.buffered.start(oe);if(P>=ie&&P<se)return j.currentTime=Math.max(se,j.currentTime+.1),ne.logger.warn("skipping hole, adjusting currentTime from "+P+" to "+j.currentTime),this.stalled=null,void A.trigger(q.default.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+P+" to "+j.currentTime,frag:a});ie=j.buffered.end(oe)}},GapController.prototype._tryNudgeBuffer=function(){var a=this.config,A=this.hls,j=this.media,P=j.currentTime,ie=(this.nudgeRetry||0)+1;if(this.nudgeRetry=ie,ie<a.nudgeMaxRetry){var oe=P+ie*a.nudgeOffset;ne.logger.log("adjust currentTime from "+P+" to "+oe),j.currentTime=oe,A.trigger(q.default.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else ne.logger.error("still stuck in high buffer @"+P+" after "+a.nudgeMaxRetry+", raise fatal error"),A.trigger(q.default.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},GapController}();A.default=ie},"./src/controller/id3-track-controller.js":function srcControllerId3TrackControllerJs(a,A,j){"use strict";var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/events.js"),q=j("./src/event-handler.js"),ne=j("./src/demux/id3.js"),ie=j("./src/utils/texttrack-utils.js"),oe=function(a){function ID3TrackController(A){var j=a.call(this,A,B.default.MEDIA_ATTACHED,B.default.MEDIA_DETACHING,B.default.FRAG_PARSING_METADATA)||this;return j.id3Track=void 0,j.media=void 0,j}return P(ID3TrackController,a),ID3TrackController.prototype.destroy=function(){q.default.prototype.destroy.call(this)},ID3TrackController.prototype.onMediaAttached=function(a){this.media=a.media,this.media},ID3TrackController.prototype.onMediaDetaching=function(){ie.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},ID3TrackController.prototype.getID3Track=function(a){for(var A=0;A<a.length;A++){var j=a[A];if("metadata"===j.kind&&"id3"===j.label)return ie.sendAddTrackEvent(j,this.media),j}return this.media.addTextTrack("metadata","id3")},ID3TrackController.prototype.onFragParsingMetadata=function(a){var A=a.frag,j=a.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var P=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,B=0;B<j.length;B++){var q=ne.default.getID3Frames(j[B].data);if(q){var ie=j[B].pts,oe=B<j.length-1?j[B+1].pts:A.endPTS;ie===oe&&(oe+=1e-4);for(var se=0;se<q.length;se++){var le=q[se];if(!ne.default.isTimeStampFrame(le)){var he=new P(ie,oe,"");he.value=le,this.id3Track.addCue(he)}}}}},ID3TrackController}(q.default);A.default=oe},"./src/controller/level-controller.js":function srcControllerLevelControllerJs(a,A,j){"use strict";var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B,q=j("./src/events.js"),ne=j("./src/event-handler.js"),ie=j("./src/utils/logger.js"),oe=j("./src/errors.js"),se=j("./src/utils/codecs.js"),le=j("./src/controller/level-helper.js"),he=(window.performance,function(a){function LevelController(A){var j=a.call(this,A,q.default.MANIFEST_LOADED,q.default.LEVEL_LOADED,q.default.AUDIO_TRACK_SWITCHED,q.default.FRAG_LOADED,q.default.ERROR)||this;return j.canload=!1,j.currentLevelIndex=null,j.manualLevelIndex=-1,j.timer=null,B=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),j}return P(LevelController,a),LevelController.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},LevelController.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},LevelController.prototype.startLoad=function(){var a=this._levels;this.canload=!0,this.levelRetryCount=0,a&&a.forEach((function(a){a.loadError=0;var A=a.details;A&&A.live&&(a.details=void 0)})),null!==this.timer&&this.loadLevel()},LevelController.prototype.stopLoad=function(){this.canload=!1},LevelController.prototype.onManifestLoaded=function(a){var A,j=[],P=[],ne={},he=null,pe=!1,ge=!1;if(a.levels.forEach((function(a){var A=a.attrs;a.loadError=0,a.fragmentError=!1,pe=pe||!!a.videoCodec,ge=ge||!!a.audioCodec,B&&a.audioCodec&&-1!==a.audioCodec.indexOf("mp4a.40.34")&&(a.audioCodec=void 0),(he=ne[a.bitrate])?he.url.push(a.url):(a.url=[a.url],a.urlId=0,ne[a.bitrate]=a,j.push(a)),A&&(A.AUDIO&&(ge=!0,le.addGroupId(he||a,"audio",A.AUDIO)),A.SUBTITLES&&le.addGroupId(he||a,"text",A.SUBTITLES))})),pe&&ge&&(j=j.filter((function(a){return!!a.videoCodec}))),j=j.filter((function(a){var A=a.audioCodec,j=a.videoCodec;return(!A||se.isCodecSupportedInMp4(A,"audio"))&&(!j||se.isCodecSupportedInMp4(j,"video"))})),a.audioTracks&&(P=a.audioTracks.filter((function(a){return!a.audioCodec||se.isCodecSupportedInMp4(a.audioCodec,"audio")}))).forEach((function(a,A){a.id=A})),j.length>0){A=j[0].bitrate,j.sort((function(a,A){return a.bitrate-A.bitrate})),this._levels=j;for(var me=0;me<j.length;me++)if(j[me].bitrate===A){this._firstLevel=me,ie.logger.log("manifest loaded,"+j.length+" level(s) found, first bitrate:"+A);break}this.hls.trigger(q.default.MANIFEST_PARSED,{levels:j,audioTracks:P,firstLevel:this._firstLevel,stats:a.stats,audio:ge,video:pe,altAudio:P.some((function(a){return!!a.url}))})}else this.hls.trigger(q.default.ERROR,{type:oe.ErrorTypes.MEDIA_ERROR,details:oe.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(LevelController.prototype,"levels",{get:function get(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(LevelController.prototype,"level",{get:function get(){return this.currentLevelIndex},set:function set(a){var A=this._levels;A&&(a=Math.min(a,A.length-1),this.currentLevelIndex===a&&A[a].details||this.setLevelInternal(a))},enumerable:!0,configurable:!0}),LevelController.prototype.setLevelInternal=function(a){var A=this._levels,j=this.hls;if(a>=0&&a<A.length){if(this.clearTimer(),this.currentLevelIndex!==a){ie.logger.log("switching to level "+a),this.currentLevelIndex=a;var P=A[a];P.level=a,j.trigger(q.default.LEVEL_SWITCHING,P)}var B=A[a],ne=B.details;if(!ne||ne.live){var se=B.urlId;j.trigger(q.default.LEVEL_LOADING,{url:B.url[se],level:a,id:se})}}else j.trigger(q.default.ERROR,{type:oe.ErrorTypes.OTHER_ERROR,details:oe.ErrorDetails.LEVEL_SWITCH_ERROR,level:a,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(LevelController.prototype,"manualLevel",{get:function get(){return this.manualLevelIndex},set:function set(a){this.manualLevelIndex=a,void 0===this._startLevel&&(this._startLevel=a),-1!==a&&(this.level=a)},enumerable:!0,configurable:!0}),Object.defineProperty(LevelController.prototype,"firstLevel",{get:function get(){return this._firstLevel},set:function set(a){this._firstLevel=a},enumerable:!0,configurable:!0}),Object.defineProperty(LevelController.prototype,"startLevel",{get:function get(){if(void 0===this._startLevel){var a=this.hls.config.startLevel;return void 0!==a?a:this._firstLevel}return this._startLevel},set:function set(a){this._startLevel=a},enumerable:!0,configurable:!0}),LevelController.prototype.onError=function(a){if(a.fatal)a.type===oe.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var A,j=!1,P=!1;switch(a.details){case oe.ErrorDetails.FRAG_LOAD_ERROR:case oe.ErrorDetails.FRAG_LOAD_TIMEOUT:case oe.ErrorDetails.KEY_LOAD_ERROR:case oe.ErrorDetails.KEY_LOAD_TIMEOUT:A=a.frag.level,P=!0;break;case oe.ErrorDetails.LEVEL_LOAD_ERROR:case oe.ErrorDetails.LEVEL_LOAD_TIMEOUT:A=a.context.level,j=!0;break;case oe.ErrorDetails.REMUX_ALLOC_ERROR:A=a.level,j=!0}void 0!==A&&this.recoverLevel(a,A,j,P)}},LevelController.prototype.recoverLevel=function(a,A,j,P){var B,q,ne,oe=this,se=this.hls.config,le=a.details,he=this._levels[A];if(he.loadError++,he.fragmentError=P,j){if(!(this.levelRetryCount+1<=se.levelLoadingMaxRetry))return ie.logger.error("level controller, cannot recover from "+le+" error"),this.currentLevelIndex=null,this.clearTimer(),void(a.fatal=!0);q=Math.min(Math.pow(2,this.levelRetryCount)*se.levelLoadingRetryDelay,se.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return oe.loadLevel()}),q),a.levelRetry=!0,this.levelRetryCount++,ie.logger.warn("level controller, "+le+", retry in "+q+" ms, current retry count is "+this.levelRetryCount)}(j||P)&&((B=he.url.length)>1&&he.loadError<B?(he.urlId=(he.urlId+1)%B,he.details=void 0,ie.logger.warn("level controller, "+le+" for level "+A+": switching to redundant URL-id "+he.urlId)):-1===this.manualLevelIndex?(ne=0===A?this._levels.length-1:A-1,ie.logger.warn("level controller, "+le+": switch to "+ne),this.hls.nextAutoLevel=this.currentLevelIndex=ne):P&&(ie.logger.warn("level controller, "+le+": reload a fragment"),this.currentLevelIndex=null))},LevelController.prototype.onFragLoaded=function(a){var A=a.frag;if(void 0!==A&&"main"===A.type){var j=this._levels[A.level];void 0!==j&&(j.fragmentError=!1,j.loadError=0,this.levelRetryCount=0)}},LevelController.prototype.onLevelLoaded=function(a){var A=this,j=a.level,P=a.details;if(j===this.currentLevelIndex){var B=this._levels[j];if(B.fragmentError||(B.loadError=0,this.levelRetryCount=0),P.live){var q=le.computeReloadInterval(B.details,P,a.stats.trequest);ie.logger.log("live playlist, reload in "+Math.round(q)+" ms"),this.timer=setTimeout((function(){return A.loadLevel()}),q)}else this.clearTimer()}},LevelController.prototype.onAudioTrackSwitched=function(a){var A=this.hls.audioTracks[a.id].groupId,j=this.hls.levels[this.currentLevelIndex];if(j&&j.audioGroupIds){for(var P=-1,B=0;B<j.audioGroupIds.length;B++)if(j.audioGroupIds[B]===A){P=B;break}P!==j.urlId&&(j.urlId=P,this.startLoad())}},LevelController.prototype.loadLevel=function(){if(ie.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var a=this._levels[this.currentLevelIndex];if("object"===typeof a&&a.url.length>0){var A=this.currentLevelIndex,j=a.urlId,P=a.url[j];ie.logger.log("Attempt loading level index "+A+" with URL-id "+j),this.hls.trigger(q.default.LEVEL_LOADING,{url:P,level:A,id:j})}}},Object.defineProperty(LevelController.prototype,"nextLoadLevel",{get:function get(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function set(a){this.level=a,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=a)},enumerable:!0,configurable:!0}),LevelController}(ne.default));A.default=he},"./src/controller/level-helper.js":function srcControllerLevelHelperJs(a,A,j){"use strict";(function(a){Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/logger.js");function updatePTS(A,j,B){var q=A[j],ne=A[B],ie=ne.startPTS;a.isFinite(ie)?B>j?(q.duration=ie-q.start,q.duration<0&&P.logger.warn("negative duration computed for frag "+q.sn+",level "+q.level+", there should be some duration drift between playlist and fragment!")):(ne.duration=q.start-ie,ne.duration<0&&P.logger.warn("negative duration computed for frag "+ne.sn+",level "+ne.level+", there should be some duration drift between playlist and fragment!")):ne.start=B>j?q.start+q.duration:Math.max(q.start-ne.duration,0)}function updateFragPTSDTS(A,j,P,B,q,ne){var ie=P;if(a.isFinite(j.startPTS)){var oe=Math.abs(j.startPTS-P);a.isFinite(j.deltaPTS)?j.deltaPTS=Math.max(oe,j.deltaPTS):j.deltaPTS=oe,ie=Math.max(P,j.startPTS),P=Math.min(P,j.startPTS),B=Math.max(B,j.endPTS),q=Math.min(q,j.startDTS),ne=Math.max(ne,j.endDTS)}var se=P-j.start;j.start=j.startPTS=P,j.maxStartPTS=ie,j.endPTS=B,j.startDTS=q,j.endDTS=ne,j.duration=B-P;var le,he,pe,ge=j.sn;if(!A||ge<A.startSN||ge>A.endSN)return 0;for(le=ge-A.startSN,(he=A.fragments)[le]=j,pe=le;pe>0;pe--)updatePTS(he,pe,pe-1);for(pe=le;pe<he.length-1;pe++)updatePTS(he,pe,pe+1);return A.PTSKnown=!0,se}function mapFragmentIntersection(a,A,j){if(a&&A)for(var P=Math.max(a.startSN,A.startSN)-A.startSN,B=Math.min(a.endSN,A.endSN)-A.startSN,q=A.startSN-a.startSN,ne=P;ne<=B;ne++){var ie=a.fragments[q+ne],oe=A.fragments[ne];if(!ie||!oe)break;j(ie,oe,ne)}}function adjustSliding(a,A){var j=A.startSN-a.startSN,P=a.fragments,B=A.fragments;if(!(j<0||j>P.length))for(var q=0;q<B.length;q++)B[q].start+=P[j].start}A.addGroupId=function addGroupId(a,A,j){switch(A){case"audio":a.audioGroupIds||(a.audioGroupIds=[]),a.audioGroupIds.push(j);break;case"text":a.textGroupIds||(a.textGroupIds=[]),a.textGroupIds.push(j)}},A.updatePTS=updatePTS,A.updateFragPTSDTS=updateFragPTSDTS,A.mergeDetails=function mergeDetails(A,j){j.initSegment&&A.initSegment&&(j.initSegment=A.initSegment);var B,q=0;if(mapFragmentIntersection(A,j,(function(A,P){q=A.cc-P.cc,a.isFinite(A.startPTS)&&(P.start=P.startPTS=A.startPTS,P.endPTS=A.endPTS,P.duration=A.duration,P.backtracked=A.backtracked,P.dropped=A.dropped,B=P),j.PTSKnown=!0})),j.PTSKnown){if(q){P.logger.log("discontinuity sliding from playlist, take drift into account");for(var ne=j.fragments,ie=0;ie<ne.length;ie++)ne[ie].cc+=q}B?updateFragPTSDTS(j,B,B.startPTS,B.endPTS,B.startDTS,B.endDTS):adjustSliding(A,j),j.PTSKnown=A.PTSKnown}},A.mergeSubtitlePlaylists=function mergeSubtitlePlaylists(a,A,j){void 0===j&&(j=0);var P=-1;mapFragmentIntersection(a,A,(function(a,A,j){A.start=a.start,P=j}));var B=A.fragments;if(P<0)B.forEach((function(a){a.start+=j}));else for(var q=P+1;q<B.length;q++)B[q].start=B[q-1].start+B[q-1].duration},A.mapFragmentIntersection=mapFragmentIntersection,A.adjustSliding=adjustSliding,A.computeReloadInterval=function computeReloadInterval(a,A,j){var P=1e3*(A.averagetargetduration?A.averagetargetduration:A.targetduration),B=P/2;return a&&A.endSN===a.endSN&&(P=B),j&&(P=Math.max(B,P-(window.performance.now()-j))),Math.round(P)}}).call(this,j("./src/polyfills/number.js").Number)},"./src/controller/stream-controller.js":function srcControllerStreamControllerJs(a,A,j){"use strict";(function(a){var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/utils/binary-search.js"),q=j("./src/utils/buffer-helper.js"),ne=j("./src/demux/demuxer.js"),ie=j("./src/events.js"),oe=j("./src/controller/fragment-tracker.js"),se=j("./src/loader/fragment.js"),le=j("./src/loader/playlist-loader.js"),he=j("./src/controller/level-helper.js"),pe=j("./src/utils/time-ranges.js"),ge=j("./src/errors.js"),me=j("./src/utils/logger.js"),ve=j("./src/utils/discontinuities.js"),ye=j("./src/controller/fragment-finders.js"),_e=j("./src/controller/gap-controller.js"),we=j("./src/controller/base-stream-controller.js"),ke=function(A){function StreamController(a,j){var P=A.call(this,a,ie.default.MEDIA_ATTACHED,ie.default.MEDIA_DETACHING,ie.default.MANIFEST_LOADING,ie.default.MANIFEST_PARSED,ie.default.LEVEL_LOADED,ie.default.KEY_LOADED,ie.default.FRAG_LOADED,ie.default.FRAG_LOAD_EMERGENCY_ABORTED,ie.default.FRAG_PARSING_INIT_SEGMENT,ie.default.FRAG_PARSING_DATA,ie.default.FRAG_PARSED,ie.default.ERROR,ie.default.AUDIO_TRACK_SWITCHING,ie.default.AUDIO_TRACK_SWITCHED,ie.default.BUFFER_CREATED,ie.default.BUFFER_APPENDED,ie.default.BUFFER_FLUSHED)||this;return P.fragmentTracker=j,P.config=a.config,P.audioCodecSwap=!1,P._state=we.State.STOPPED,P.stallReported=!1,P.gapController=null,P}return P(StreamController,A),StreamController.prototype.startLoad=function(a){if(this.levels){var A=this.lastCurrentTime,j=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var P=j.startLevel;-1===P&&(P=0,this.bitrateTest=!0),this.level=j.nextLoadLevel=P,this.loadedmetadata=!1}A>0&&-1===a&&(me.logger.log("override startPosition with lastCurrentTime @"+A.toFixed(3)),a=A),this.state=we.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=a,this.tick()}else this.forceStartLoad=!0,this.state=we.State.STOPPED},StreamController.prototype.stopLoad=function(){this.forceStartLoad=!1,A.prototype.stopLoad.call(this)},StreamController.prototype.doTick=function(){switch(this.state){case we.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case we.State.IDLE:this._doTickIdle();break;case we.State.WAITING_LEVEL:var a=this.levels[this.level];a&&a.details&&(this.state=we.State.IDLE);break;case we.State.FRAG_LOADING_WAITING_RETRY:var A=window.performance.now(),j=this.retryDate;(!j||A>=j||this.media&&this.media.seeking)&&(me.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=we.State.IDLE);break;case we.State.ERROR:case we.State.STOPPED:case we.State.FRAG_LOADING:case we.State.PARSING:case we.State.PARSED:case we.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},StreamController.prototype._doTickIdle=function(){var a=this.hls,A=a.config,j=this.media;if(void 0!==this.levelLastLoaded&&(j||!this.startFragRequested&&A.startFragPrefetch)){var P;P=this.loadedmetadata?j.currentTime:this.nextLoadPosition;var B=a.nextLoadLevel,ne=this.levels[B];if(ne){var oe,se=ne.bitrate;oe=se?Math.max(8*A.maxBufferSize/se,A.maxBufferLength):A.maxBufferLength,oe=Math.min(oe,A.maxMaxBufferLength);var le=q.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:j,P,A.maxBufferHole),he=le.len;if(!(he>=oe)){me.logger.trace("buffer length of "+he.toFixed(3)+" is below max of "+oe.toFixed(3)+". checking for more payload ..."),this.level=a.nextLoadLevel=B;var pe=ne.details;if(!pe||pe.live&&this.levelLastLoaded!==B)this.state=we.State.WAITING_LEVEL;else{if(this._streamEnded(le,pe)){var ge={};return this.altAudio&&(ge.type="video"),this.hls.trigger(ie.default.BUFFER_EOS,ge),void(this.state=we.State.ENDED)}this._fetchPayloadOrEos(P,le,pe)}}}}},StreamController.prototype._fetchPayloadOrEos=function(a,A,j){var P=this.fragPrevious,B=this.level,q=j.fragments,ne=q.length;if(0!==ne){var ie,oe=q[0].start,se=q[ne-1].start+q[ne-1].duration,le=A.end;if(j.initSegment&&!j.initSegment.data)ie=j.initSegment;else if(j.live){var he=this.config.initialLiveManifestSize;if(ne<he)return void me.logger.warn("Can not start playback of a level, reason: not enough fragments "+ne+" < "+he);if(null===(ie=this._ensureFragmentAtLivePoint(j,le,oe,se,P,q,ne)))return}else le<oe&&(ie=q[0]);ie||(ie=this._findFragment(oe,P,ne,q,le,se,j)),ie&&(ie.encrypted?(me.logger.log("Loading key for "+ie.sn+" of ["+j.startSN+" ,"+j.endSN+"],level "+B),this._loadKey(ie)):(me.logger.log("Loading "+ie.sn+" of ["+j.startSN+" ,"+j.endSN+"],level "+B+", currentTime:"+a.toFixed(3)+",bufferEnd:"+le.toFixed(3)),this._loadFragment(ie)))}},StreamController.prototype._ensureFragmentAtLivePoint=function(a,A,j,P,q,ne,ie){var oe,se=this.hls.config,le=this.media,he=void 0!==se.liveMaxLatencyDuration?se.liveMaxLatencyDuration:se.liveMaxLatencyDurationCount*a.targetduration;if(A<Math.max(j-se.maxFragLookUpTolerance,P-he)){var pe=this.liveSyncPosition=this.computeLivePosition(j,a);me.logger.log("buffer end: "+A.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+pe.toFixed(3)),A=pe,le&&le.readyState&&le.duration>pe&&(le.currentTime=pe),this.nextLoadPosition=pe}if(a.PTSKnown&&A>P&&le&&le.readyState)return null;if(this.startFragRequested&&!a.PTSKnown){if(q)if(a.hasProgramDateTime)me.logger.log("live playlist, switching playlist, load frag with same PDT: "+q.programDateTime),oe=ye.findFragmentByPDT(ne,q.endProgramDateTime,se.maxFragLookUpTolerance);else{var ge=q.sn+1;if(ge>=a.startSN&&ge<=a.endSN){var ve=ne[ge-a.startSN];q.cc===ve.cc&&(oe=ve,me.logger.log("live playlist, switching playlist, load frag with next SN: "+oe.sn))}oe||(oe=B.default.search(ne,(function(a){return q.cc-a.cc})))&&me.logger.log("live playlist, switching playlist, load frag with same CC: "+oe.sn)}oe||(oe=ne[Math.min(ie-1,Math.round(ie/2))],me.logger.log("live playlist, switching playlist, unknown, load middle frag : "+oe.sn))}return oe},StreamController.prototype._findFragment=function(a,A,j,P,B,q,ne){var ie,oe=this.hls.config;if(B<q){var se=B>q-oe.maxFragLookUpTolerance?0:oe.maxFragLookUpTolerance;ie=ye.findFragmentByPTS(A,P,B,se)}else ie=P[j-1];if(ie){var le=ie.sn-ne.startSN,he=A&&ie.level===A.level,pe=P[le-1],ge=P[le+1];if(A&&ie.sn===A.sn)if(he&&!ie.backtracked)if(ie.sn<ne.endSN){var ve=A.deltaPTS;ve&&ve>oe.maxBufferHole&&A.dropped&&le?(ie=pe,me.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(ie=ge,me.logger.log("SN just loaded, load next one: "+ie.sn,ie))}else ie=null;else ie.backtracked&&(ge&&ge.backtracked?(me.logger.warn("Already backtracked from fragment "+ge.sn+", will not backtrack to fragment "+ie.sn+". Loading fragment "+ge.sn),ie=ge):(me.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),ie.dropped=0,pe?(ie=pe).backtracked=!0:le&&(ie=null)))}return ie},StreamController.prototype._loadKey=function(a){this.state=we.State.KEY_LOADING,this.hls.trigger(ie.default.KEY_LOADING,{frag:a})},StreamController.prototype._loadFragment=function(A){var j=this.fragmentTracker.getState(A);this.fragCurrent=A,this.startFragRequested=!0,a.isFinite(A.sn)&&!A.bitrateTest&&(this.nextLoadPosition=A.start+A.duration),A.backtracked||j===oe.FragmentState.NOT_LOADED||j===oe.FragmentState.PARTIAL?(A.autoLevel=this.hls.autoLevelEnabled,A.bitrateTest=this.bitrateTest,this.hls.trigger(ie.default.FRAG_LOADING,{frag:A}),this.demuxer||(this.demuxer=new ne.default(this.hls,"main")),this.state=we.State.FRAG_LOADING):j===oe.FragmentState.APPENDING&&this._reduceMaxBufferLength(A.duration)&&this.fragmentTracker.removeFragment(A)},Object.defineProperty(StreamController.prototype,"state",{get:function get(){return this._state},set:function set(a){if(this.state!==a){var A=this.state;this._state=a,me.logger.log("main stream:"+A+"->"+a),this.hls.trigger(ie.default.STREAM_STATE_TRANSITION,{previousState:A,nextState:a})}},enumerable:!0,configurable:!0}),StreamController.prototype.getBufferedFrag=function(a){return this.fragmentTracker.getBufferedFrag(a,le.default.LevelType.MAIN)},Object.defineProperty(StreamController.prototype,"currentLevel",{get:function get(){var a=this.media;if(a){var A=this.getBufferedFrag(a.currentTime);if(A)return A.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(StreamController.prototype,"nextBufferedFrag",{get:function get(){var a=this.media;return a?this.followingBufferedFrag(this.getBufferedFrag(a.currentTime)):null},enumerable:!0,configurable:!0}),StreamController.prototype.followingBufferedFrag=function(a){return a?this.getBufferedFrag(a.endPTS+.5):null},Object.defineProperty(StreamController.prototype,"nextLevel",{get:function get(){var a=this.nextBufferedFrag;return a?a.level:-1},enumerable:!0,configurable:!0}),StreamController.prototype._checkFragmentChanged=function(){var a,A,j=this.media;if(j&&j.readyState&&!1===j.seeking&&((A=j.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=A),q.BufferHelper.isBuffered(j,A)?a=this.getBufferedFrag(A):q.BufferHelper.isBuffered(j,A+.1)&&(a=this.getBufferedFrag(A+.1)),a)){var P=a;if(P!==this.fragPlaying){this.hls.trigger(ie.default.FRAG_CHANGED,{frag:P});var B=P.level;this.fragPlaying&&this.fragPlaying.level===B||this.hls.trigger(ie.default.LEVEL_SWITCHED,{level:B}),this.fragPlaying=P}}},StreamController.prototype.immediateLevelSwitch=function(){if(me.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var A=this.media,j=void 0;A?(j=A.paused,A.pause()):j=!0,this.previouslyPaused=j}var P=this.fragCurrent;P&&P.loader&&P.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,a.POSITIVE_INFINITY)},StreamController.prototype.immediateLevelSwitchEnd=function(){var a=this.media;a&&a.buffered.length&&(this.immediateSwitch=!1,q.BufferHelper.isBuffered(a,a.currentTime)&&(a.currentTime-=1e-4),this.previouslyPaused||a.play())},StreamController.prototype.nextLevelSwitch=function(){var A=this.media;if(A&&A.readyState){var j,P=void 0,B=void 0;if((j=this.getBufferedFrag(A.currentTime))&&j.startPTS>1&&this.flushMainBuffer(0,j.startPTS-1),A.paused)P=0;else{var q=this.hls.nextLoadLevel,ne=this.levels[q],ie=this.fragLastKbps;P=ie&&this.fragCurrent?this.fragCurrent.duration*ne.bitrate/(1e3*ie)+1:0}if((B=this.getBufferedFrag(A.currentTime+P))&&(B=this.followingBufferedFrag(B))){var oe=this.fragCurrent;oe&&oe.loader&&oe.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(B.maxStartPTS,a.POSITIVE_INFINITY)}}},StreamController.prototype.flushMainBuffer=function(a,A){this.state=we.State.BUFFER_FLUSHING;var j={startOffset:a,endOffset:A};this.altAudio&&(j.type="video"),this.hls.trigger(ie.default.BUFFER_FLUSHING,j)},StreamController.prototype.onMediaAttached=function(a){var A=this.media=this.mediaBuffer=a.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),A.addEventListener("seeking",this.onvseeking),A.addEventListener("seeked",this.onvseeked),A.addEventListener("ended",this.onvended);var j=this.config;this.levels&&j.autoStartLoad&&this.hls.startLoad(j.startPosition),this.gapController=new _e.default(j,A,this.fragmentTracker,this.hls)},StreamController.prototype.onMediaDetaching=function(){var a=this.media;a&&a.ended&&(me.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var A=this.levels;A&&A.forEach((function(a){a.details&&a.details.fragments.forEach((function(a){a.backtracked=void 0}))})),a&&(a.removeEventListener("seeking",this.onvseeking),a.removeEventListener("seeked",this.onvseeked),a.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},StreamController.prototype.onMediaSeeked=function(){var A=this.media,j=A?A.currentTime:void 0;a.isFinite(j)&&me.logger.log("media seeked to "+j.toFixed(3)),this.tick()},StreamController.prototype.onManifestLoading=function(){me.logger.log("trigger BUFFER_RESET"),this.hls.trigger(ie.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},StreamController.prototype.onManifestParsed=function(a){var A,j=!1,P=!1;a.levels.forEach((function(a){(A=a.audioCodec)&&(-1!==A.indexOf("mp4a.40.2")&&(j=!0),-1!==A.indexOf("mp4a.40.5")&&(P=!0))})),this.audioCodecSwitch=j&&P,this.audioCodecSwitch&&me.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=a.levels,this.startFragRequested=!1;var B=this.config;(B.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(B.startPosition)},StreamController.prototype.onLevelLoaded=function(A){var j=A.details,P=A.level,B=this.levels[this.levelLastLoaded],q=this.levels[P],ne=j.totalduration,oe=0;if(me.logger.log("level "+P+" loaded ["+j.startSN+","+j.endSN+"],duration:"+ne),j.live){var se=q.details;se&&j.fragments.length>0?(he.mergeDetails(se,j),oe=j.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(oe,se),j.PTSKnown&&a.isFinite(oe)?me.logger.log("live playlist sliding:"+oe.toFixed(3)):(me.logger.log("live playlist - outdated PTS, unknown sliding"),ve.alignStream(this.fragPrevious,B,j))):(me.logger.log("live playlist - first load, unknown sliding"),j.PTSKnown=!1,ve.alignStream(this.fragPrevious,B,j))}else j.PTSKnown=!1;if(q.details=j,this.levelLastLoaded=P,this.hls.trigger(ie.default.LEVEL_UPDATED,{details:j,level:P}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var le=j.startTimeOffset;a.isFinite(le)?(le<0&&(me.logger.log("negative start time offset "+le+", count from end of last fragment"),le=oe+ne+le),me.logger.log("start time offset found in playlist, adjust startPosition to "+le),this.startPosition=le):j.live?(this.startPosition=this.computeLivePosition(oe,j),me.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===we.State.WAITING_LEVEL&&(this.state=we.State.IDLE),this.tick()},StreamController.prototype.onKeyLoaded=function(){this.state===we.State.KEY_LOADING&&(this.state=we.State.IDLE,this.tick())},StreamController.prototype.onFragLoaded=function(a){var A=this.fragCurrent,j=this.hls,P=this.levels,B=this.media,q=a.frag;if(this.state===we.State.FRAG_LOADING&&A&&"main"===q.type&&q.level===A.level&&q.sn===A.sn){var oe=a.stats,se=P[A.level],le=se.details;if(this.bitrateTest=!1,this.stats=oe,me.logger.log("Loaded "+A.sn+" of ["+le.startSN+" ,"+le.endSN+"],level "+A.level),q.bitrateTest&&j.nextLoadLevel)this.state=we.State.IDLE,this.startFragRequested=!1,oe.tparsed=oe.tbuffered=window.performance.now(),j.trigger(ie.default.FRAG_BUFFERED,{stats:oe,frag:A,id:"main"}),this.tick();else if("initSegment"===q.sn)this.state=we.State.IDLE,oe.tparsed=oe.tbuffered=window.performance.now(),le.initSegment.data=a.payload,j.trigger(ie.default.FRAG_BUFFERED,{stats:oe,frag:A,id:"main"}),this.tick();else{me.logger.log("Parsing "+A.sn+" of ["+le.startSN+" ,"+le.endSN+"],level "+A.level+", cc "+A.cc),this.state=we.State.PARSING,this.pendingBuffering=!0,this.appended=!1,q.bitrateTest&&(q.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:q}));var he=!(B&&B.seeking)&&(le.PTSKnown||!le.live),pe=le.initSegment?le.initSegment.data:[],ge=this._getAudioCodec(se);(this.demuxer=this.demuxer||new ne.default(this.hls,"main")).push(a.payload,pe,ge,se.videoCodec,A,le.totalduration,he)}}this.fragLoadError=0},StreamController.prototype.onFragParsingInitSegment=function(a){var A=this.fragCurrent,j=a.frag;if(A&&"main"===a.id&&j.sn===A.sn&&j.level===A.level&&this.state===we.State.PARSING){var P=a.tracks,B=void 0,q=void 0;if(P.audio&&this.altAudio&&delete P.audio,q=P.audio){var ne=this.levels[this.level].audioCodec,oe=navigator.userAgent.toLowerCase();ne&&this.audioCodecSwap&&(me.logger.log("swapping playlist audio codec"),ne=-1!==ne.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==q.metadata.channelCount&&-1===oe.indexOf("firefox")&&(ne="mp4a.40.5"),-1!==oe.indexOf("android")&&"audio/mpeg"!==q.container&&(ne="mp4a.40.2",me.logger.log("Android: force audio codec to "+ne)),q.levelCodec=ne,q.id=a.id}for(B in(q=P.video)&&(q.levelCodec=this.levels[this.level].videoCodec,q.id=a.id),this.hls.trigger(ie.default.BUFFER_CODECS,P),P){q=P[B],me.logger.log("main track:"+B+",container:"+q.container+",codecs[level/parsed]=["+q.levelCodec+"/"+q.codec+"]");var se=q.initSegment;se&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(ie.default.BUFFER_APPENDING,{type:B,data:se,parent:"main",content:"initSegment"}))}this.tick()}},StreamController.prototype.onFragParsingData=function(A){var j=this,P=this.fragCurrent,B=A.frag;if(P&&"main"===A.id&&B.sn===P.sn&&B.level===P.level&&("audio"!==A.type||!this.altAudio)&&this.state===we.State.PARSING){var q=this.levels[this.level],ne=P;if(a.isFinite(A.endPTS)||(A.endPTS=A.startPTS+P.duration,A.endDTS=A.startDTS+P.duration),!0===A.hasAudio&&ne.addElementaryStream(se.default.ElementaryStreamTypes.AUDIO),!0===A.hasVideo&&ne.addElementaryStream(se.default.ElementaryStreamTypes.VIDEO),me.logger.log("Parsed "+A.type+",PTS:["+A.startPTS.toFixed(3)+","+A.endPTS.toFixed(3)+"],DTS:["+A.startDTS.toFixed(3)+"/"+A.endDTS.toFixed(3)+"],nb:"+A.nb+",dropped:"+(A.dropped||0)),"video"===A.type)if(ne.dropped=A.dropped,ne.dropped)if(ne.backtracked)me.logger.warn("Already backtracked on this fragment, appending with the gap",ne.sn);else{var oe=q.details;if(!oe||ne.sn!==oe.startSN)return me.logger.warn("missing video frame(s), backtracking fragment",ne.sn),this.fragmentTracker.removeFragment(ne),ne.backtracked=!0,this.nextLoadPosition=A.startPTS,this.state=we.State.IDLE,this.fragPrevious=ne,void this.tick();me.logger.warn("missing video frame(s) on first frag, appending with gap",ne.sn)}else ne.backtracked=!1;var le=he.updateFragPTSDTS(q.details,ne,A.startPTS,A.endPTS,A.startDTS,A.endDTS),pe=this.hls;pe.trigger(ie.default.LEVEL_PTS_UPDATED,{details:q.details,level:this.level,drift:le,type:A.type,start:A.startPTS,end:A.endPTS}),[A.data1,A.data2].forEach((function(a){a&&a.length&&j.state===we.State.PARSING&&(j.appended=!0,j.pendingBuffering=!0,pe.trigger(ie.default.BUFFER_APPENDING,{type:A.type,data:a,parent:"main",content:"data"}))})),this.tick()}},StreamController.prototype.onFragParsed=function(a){var A=this.fragCurrent,j=a.frag;A&&"main"===a.id&&j.sn===A.sn&&j.level===A.level&&this.state===we.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=we.State.PARSED,this._checkAppendedParsed())},StreamController.prototype.onAudioTrackSwitching=function(A){var j=!!A.url,P=A.id;if(!j){if(this.mediaBuffer!==this.media){me.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var B=this.fragCurrent;B.loader&&(me.logger.log("switching to main audio track, cancel main fragment load"),B.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=we.State.IDLE}var q=this.hls;q.trigger(ie.default.BUFFER_FLUSHING,{startOffset:0,endOffset:a.POSITIVE_INFINITY,type:"audio"}),q.trigger(ie.default.AUDIO_TRACK_SWITCHED,{id:P}),this.altAudio=!1}},StreamController.prototype.onAudioTrackSwitched=function(a){var A=a.id,j=!!this.hls.audioTracks[A].url;if(j){var P=this.videoBuffer;P&&this.mediaBuffer!==P&&(me.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=P)}this.altAudio=j,this.tick()},StreamController.prototype.onBufferCreated=function(a){var A,j,P=a.tracks,B=!1;for(var q in P){var ne=P[q];"main"===ne.id?(j=q,A=ne,"video"===q&&(this.videoBuffer=P[q].buffer)):B=!0}B&&A?(me.logger.log("alternate track found, use "+j+".buffered to schedule main fragment loading"),this.mediaBuffer=A.buffer):this.mediaBuffer=this.media},StreamController.prototype.onBufferAppended=function(a){if("main"===a.parent){var A=this.state;A!==we.State.PARSING&&A!==we.State.PARSED||(this.pendingBuffering=a.pending>0,this._checkAppendedParsed())}},StreamController.prototype._checkAppendedParsed=function(){if(this.state===we.State.PARSED&&(!this.appended||!this.pendingBuffering)){var a=this.fragCurrent;if(a){var A=this.mediaBuffer?this.mediaBuffer:this.media;me.logger.log("main buffered : "+pe.default.toString(A.buffered)),this.fragPrevious=a;var j=this.stats;j.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*j.total/(j.tbuffered-j.tfirst)),this.hls.trigger(ie.default.FRAG_BUFFERED,{stats:j,frag:a,id:"main"}),this.state=we.State.IDLE}this.tick()}},StreamController.prototype.onError=function(A){var j=A.frag||this.fragCurrent;if(!j||"main"===j.type){var P=!!this.media&&q.BufferHelper.isBuffered(this.media,this.media.currentTime)&&q.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(A.details){case ge.ErrorDetails.FRAG_LOAD_ERROR:case ge.ErrorDetails.FRAG_LOAD_TIMEOUT:case ge.ErrorDetails.KEY_LOAD_ERROR:case ge.ErrorDetails.KEY_LOAD_TIMEOUT:if(!A.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var B=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);me.logger.warn("mediaController: frag loading failed, retry in "+B+" ms"),this.retryDate=window.performance.now()+B,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=we.State.FRAG_LOADING_WAITING_RETRY}else me.logger.error("mediaController: "+A.details+" reaches max retry, redispatch as fatal ..."),A.fatal=!0,this.state=we.State.ERROR;break;case ge.ErrorDetails.LEVEL_LOAD_ERROR:case ge.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==we.State.ERROR&&(A.fatal?(this.state=we.State.ERROR,me.logger.warn("streamController: "+A.details+",switch to "+this.state+" state ...")):A.levelRetry||this.state!==we.State.WAITING_LEVEL||(this.state=we.State.IDLE));break;case ge.ErrorDetails.BUFFER_FULL_ERROR:"main"!==A.parent||this.state!==we.State.PARSING&&this.state!==we.State.PARSED||(P?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=we.State.IDLE):(me.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,a.POSITIVE_INFINITY)))}}},StreamController.prototype._reduceMaxBufferLength=function(a){var A=this.config;return A.maxMaxBufferLength>=a&&(A.maxMaxBufferLength/=2,me.logger.warn("main:reduce max buffer length to "+A.maxMaxBufferLength+"s"),!0)},StreamController.prototype._checkBuffer=function(){var a=this.media;if(a&&0!==a.readyState){var A=(this.mediaBuffer?this.mediaBuffer:a).buffered;!this.loadedmetadata&&A.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,A)}},StreamController.prototype.onFragLoadEmergencyAborted=function(){this.state=we.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},StreamController.prototype.onBufferFlushed=function(){var a=this.mediaBuffer?this.mediaBuffer:this.media;a&&this.fragmentTracker.detectEvictedFragments(se.default.ElementaryStreamTypes.VIDEO,a.buffered),this.state=we.State.IDLE,this.fragPrevious=null},StreamController.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},StreamController.prototype.computeLivePosition=function(a,A){var j=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*A.targetduration;return a+Math.max(0,A.totalduration-j)},StreamController.prototype._seekToStartPos=function(){var a=this.media,A=a.currentTime,j=a.seeking?A:this.startPosition;A!==j&&(me.logger.log("target start position not buffered, seek to buffered.start(0) "+j+" from current time "+A+" "),a.currentTime=j)},StreamController.prototype._getAudioCodec=function(a){var A=this.config.defaultAudioCodec||a.audioCodec;return this.audioCodecSwap&&(me.logger.log("swapping playlist audio codec"),A&&(A=-1!==A.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),A},Object.defineProperty(StreamController.prototype,"liveSyncPosition",{get:function get(){return this._liveSyncPosition},set:function set(a){this._liveSyncPosition=a},enumerable:!0,configurable:!0}),StreamController}(we.default);A.default=ke}).call(this,j("./src/polyfills/number.js").Number)},"./src/controller/subtitle-stream-controller.js":function srcControllerSubtitleStreamControllerJs(a,A,j){"use strict";var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/events.js"),q=j("./src/utils/logger.js"),ne=j("./src/crypt/decrypter.js"),ie=j("./src/utils/buffer-helper.js"),oe=j("./src/controller/fragment-finders.js"),se=j("./src/controller/fragment-tracker.js"),le=j("./src/controller/base-stream-controller.js"),he=j("./src/controller/level-helper.js"),pe=window.performance,ge=function(a){function SubtitleStreamController(A,j){var P=a.call(this,A,B.default.MEDIA_ATTACHED,B.default.MEDIA_DETACHING,B.default.ERROR,B.default.KEY_LOADED,B.default.FRAG_LOADED,B.default.SUBTITLE_TRACKS_UPDATED,B.default.SUBTITLE_TRACK_SWITCH,B.default.SUBTITLE_TRACK_LOADED,B.default.SUBTITLE_FRAG_PROCESSED,B.default.LEVEL_UPDATED)||this;return P.fragmentTracker=j,P.config=A.config,P.state=le.State.STOPPED,P.tracks=[],P.tracksBuffered=[],P.currentTrackId=-1,P.decrypter=new ne.default(A,A.config),P.lastAVStart=0,P._onMediaSeeking=P.onMediaSeeking.bind(P),P}return P(SubtitleStreamController,a),SubtitleStreamController.prototype.onSubtitleFragProcessed=function(a){var A=a.frag,j=a.success;if(this.fragPrevious=A,this.state=le.State.IDLE,j){var P=this.tracksBuffered[this.currentTrackId];if(P){for(var B,q=A.start,ne=0;ne<P.length;ne++)if(q>=P[ne].start&&q<=P[ne].end){B=P[ne];break}var ie=A.start+A.duration;B?B.end=ie:(B={start:q,end:ie},P.push(B))}}},SubtitleStreamController.prototype.onMediaAttached=function(a){var A=a.media;this.media=A,A.addEventListener("seeking",this._onMediaSeeking),this.state=le.State.IDLE},SubtitleStreamController.prototype.onMediaDetaching=function(){this.media.removeEventListener("seeking",this._onMediaSeeking),this.media=null,this.state=le.State.STOPPED},SubtitleStreamController.prototype.onError=function(a){var A=a.frag;A&&"subtitle"===A.type&&(this.state=le.State.IDLE)},SubtitleStreamController.prototype.onSubtitleTracksUpdated=function(a){var A=this;q.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=a.subtitleTracks,this.tracks.forEach((function(a){A.tracksBuffered[a.id]=[]}))},SubtitleStreamController.prototype.onSubtitleTrackSwitch=function(a){if(this.currentTrackId=a.id,this.tracks&&-1!==this.currentTrackId){var A=this.tracks[this.currentTrackId];A&&A.details&&this.setInterval(500)}else this.clearInterval()},SubtitleStreamController.prototype.onSubtitleTrackLoaded=function(a){var A=a.id,j=a.details,P=this.currentTrackId,B=this.tracks,q=B[P];A>=B.length||A!==P||!q||(j.live&&he.mergeSubtitlePlaylists(q.details,j,this.lastAVStart),q.details=j,this.setInterval(500))},SubtitleStreamController.prototype.onKeyLoaded=function(){this.state===le.State.KEY_LOADING&&(this.state=le.State.IDLE)},SubtitleStreamController.prototype.onFragLoaded=function(a){var A=this.fragCurrent,j=a.frag.decryptdata,P=a.frag,q=this.hls;if(this.state===le.State.FRAG_LOADING&&A&&"subtitle"===a.frag.type&&A.sn===a.frag.sn&&a.payload.byteLength>0&&j&&j.key&&"AES-128"===j.method){var ne=pe.now();this.decrypter.decrypt(a.payload,j.key.buffer,j.iv.buffer,(function(a){var A=pe.now();q.trigger(B.default.FRAG_DECRYPTED,{frag:P,payload:a,stats:{tstart:ne,tdecrypt:A}})}))}},SubtitleStreamController.prototype.onLevelUpdated=function(a){var A=a.details.fragments;this.lastAVStart=A.length?A[0].start:0},SubtitleStreamController.prototype.doTick=function(){if(this.media)switch(this.state){case le.State.IDLE:var a=this,A=a.config,j=a.currentTrackId,P=a.fragmentTracker,ne=a.media,he=a.tracks;if(!he||!he[j]||!he[j].details)break;var pe=A.maxBufferHole,ge=A.maxFragLookUpTolerance,me=Math.min(A.maxBufferLength,A.maxMaxBufferLength),ve=ie.BufferHelper.bufferedInfo(this._getBuffered(),ne.currentTime,pe),ye=ve.end,_e=ve.len,we=he[j].details,ke=we.fragments,Oe=ke.length,Se=ke[Oe-1].start+ke[Oe-1].duration;if(_e>me)return;var Te=void 0,Ae=this.fragPrevious;ye<Se?(Ae&&we.hasProgramDateTime&&(Te=oe.findFragmentByPDT(ke,Ae.endProgramDateTime,ge)),Te||(Te=oe.findFragmentByPTS(Ae,ke,ye,ge))):Te=ke[Oe-1],Te&&Te.encrypted?(q.logger.log("Loading key for "+Te.sn),this.state=le.State.KEY_LOADING,this.hls.trigger(B.default.KEY_LOADING,{frag:Te})):Te&&P.getState(Te)===se.FragmentState.NOT_LOADED&&(this.fragCurrent=Te,this.state=le.State.FRAG_LOADING,this.hls.trigger(B.default.FRAG_LOADING,{frag:Te}))}else this.state=le.State.IDLE},SubtitleStreamController.prototype.stopLoad=function(){this.lastAVStart=0,a.prototype.stopLoad.call(this)},SubtitleStreamController.prototype._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},SubtitleStreamController.prototype.onMediaSeeking=function(){this.fragPrevious=null},SubtitleStreamController}(le.default);A.SubtitleStreamController=ge},"./src/controller/subtitle-track-controller.js":function srcControllerSubtitleTrackControllerJs(a,A,j){"use strict";(function(a){var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/events.js"),q=j("./src/event-handler.js"),ne=j("./src/utils/logger.js"),ie=j("./src/controller/level-helper.js"),oe=function(A){function SubtitleTrackController(a){var j=A.call(this,a,B.default.MEDIA_ATTACHED,B.default.MEDIA_DETACHING,B.default.MANIFEST_LOADED,B.default.SUBTITLE_TRACK_LOADED)||this;return j.tracks=[],j.trackId=-1,j.media=null,j.stopped=!0,j.subtitleDisplay=!0,j}return P(SubtitleTrackController,A),SubtitleTrackController.prototype.destroy=function(){q.default.prototype.destroy.call(this)},SubtitleTrackController.prototype.onMediaAttached=function(a){var A=this;this.media=a.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){A.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},SubtitleTrackController.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},SubtitleTrackController.prototype.onManifestLoaded=function(a){var A=this,j=a.subtitles||[];this.tracks=j,this.hls.trigger(B.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:j}),j.forEach((function(a){a.default&&(A.media?A.subtitleTrack=a.id:A.queuedDefaultTrack=a.id)}))},SubtitleTrackController.prototype.onSubtitleTrackLoaded=function(a){var A=this,j=a.id,P=a.details,B=this.trackId,q=this.tracks,oe=q[B];if(j>=q.length||j!==B||!oe||this.stopped)this._clearReloadTimer();else if(ne.logger.log("subtitle track "+j+" loaded"),P.live){var se=ie.computeReloadInterval(oe.details,P,a.stats.trequest);ne.logger.log("Reloading live subtitle playlist in "+se+"ms"),this.timer=setTimeout((function(){A._loadCurrentTrack()}),se)}else this._clearReloadTimer()},SubtitleTrackController.prototype.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},SubtitleTrackController.prototype.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},Object.defineProperty(SubtitleTrackController.prototype,"subtitleTracks",{get:function get(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(SubtitleTrackController.prototype,"subtitleTrack",{get:function get(){return this.trackId},set:function set(a){this.trackId!==a&&(this._toggleTrackModes(a),this._setSubtitleTrackInternal(a))},enumerable:!0,configurable:!0}),SubtitleTrackController.prototype._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},SubtitleTrackController.prototype._loadCurrentTrack=function(){var a=this.trackId,A=this.tracks,j=this.hls,P=A[a];a<0||!P||P.details&&!P.details.live||(ne.logger.log("Loading subtitle track "+a),j.trigger(B.default.SUBTITLE_TRACK_LOADING,{url:P.url,id:a}))},SubtitleTrackController.prototype._toggleTrackModes=function(a){var A=this.media,j=this.subtitleDisplay,P=this.trackId;if(A){var B=filterSubtitleTracks(A.textTracks);if(-1===a)[].slice.call(B).forEach((function(a){a.mode="disabled"}));else{var q=B[P];q&&(q.mode="disabled")}var ne=B[a];ne&&(ne.mode=j?"showing":"hidden")}},SubtitleTrackController.prototype._setSubtitleTrackInternal=function(A){var j=this.hls,P=this.tracks;!a.isFinite(A)||A<-1||A>=P.length||(this.trackId=A,ne.logger.log("Switching to subtitle track "+A),j.trigger(B.default.SUBTITLE_TRACK_SWITCH,{id:A}),this._loadCurrentTrack())},SubtitleTrackController.prototype._onTextTracksChanged=function(){if(this.media){for(var a=-1,A=filterSubtitleTracks(this.media.textTracks),j=0;j<A.length;j++)if("hidden"===A[j].mode)a=j;else if("showing"===A[j].mode){a=j;break}this.subtitleTrack=a}},SubtitleTrackController}(q.default);function filterSubtitleTracks(a){for(var A=[],j=0;j<a.length;j++){var P=a[j];"subtitles"===P.kind&&P.label&&A.push(a[j])}return A}A.default=oe}).call(this,j("./src/polyfills/number.js").Number)},"./src/controller/timeline-controller.js":function srcControllerTimelineControllerJs(a,A,j){"use strict";(function(a){var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/events.js"),q=j("./src/event-handler.js"),ne=j("./src/utils/cea-608-parser.js"),ie=j("./src/utils/output-filter.js"),oe=j("./src/utils/webvtt-parser.js"),se=j("./src/utils/logger.js"),le=j("./src/utils/texttrack-utils.js");function canReuseVttTextTrack(a,A){return a&&a.label===A.name&&!(a.textTrack1||a.textTrack2)}var he=function(A){function TimelineController(a){var j=A.call(this,a,B.default.MEDIA_ATTACHING,B.default.MEDIA_DETACHING,B.default.FRAG_PARSING_USERDATA,B.default.FRAG_DECRYPTED,B.default.MANIFEST_LOADING,B.default.MANIFEST_LOADED,B.default.FRAG_LOADED,B.default.LEVEL_SWITCHING,B.default.INIT_PTS_FOUND)||this;if(j.hls=a,j.config=a.config,j.enabled=!0,j.Cues=a.config.cueHandler,j.textTracks=[],j.tracks=[],j.unparsedVttFrags=[],j.initPTS=[],j.cueRanges=[],j.captionsTracks={},j.captionsProperties={textTrack1:{label:j.config.captionsTextTrack1Label,languageCode:j.config.captionsTextTrack1LanguageCode},textTrack2:{label:j.config.captionsTextTrack2Label,languageCode:j.config.captionsTextTrack2LanguageCode}},j.config.enableCEA708Captions){var P=new ie.default(j,"textTrack1"),q=new ie.default(j,"textTrack2");j.cea608Parser=new ne.default(0,P,q)}return j}return P(TimelineController,A),TimelineController.prototype.addCues=function(a,A,j,P){for(var B,q,ne,ie,oe=this.cueRanges,se=!1,le=oe.length;le--;){var he=oe[le],pe=(B=he[0],q=he[1],ne=A,ie=j,Math.min(q,ie)-Math.max(B,ne));if(pe>=0&&(he[0]=Math.min(he[0],A),he[1]=Math.max(he[1],j),se=!0,pe/(j-A)>.5))return}se||oe.push([A,j]),this.Cues.newCue(this.captionsTracks[a],A,j,P)},TimelineController.prototype.onInitPtsFound=function(a){var A=this;if("main"===a.id&&(this.initPTS[a.frag.cc]=a.initPTS),this.unparsedVttFrags.length){var j=this.unparsedVttFrags;this.unparsedVttFrags=[],j.forEach((function(a){A.onFragLoaded(a)}))}},TimelineController.prototype.getExistingTrack=function(a){var A=this.media;if(A)for(var j=0;j<A.textTracks.length;j++){var P=A.textTracks[j];if(P[a])return P}return null},TimelineController.prototype.createCaptionsTrack=function(a){var A=this.captionsProperties[a],j=A.label,P=A.languageCode,B=this.captionsTracks;if(!B[a]){var q=this.getExistingTrack(a);if(q)B[a]=q,le.clearCurrentCues(B[a]),le.sendAddTrackEvent(B[a],this.media);else{var ne=this.createTextTrack("captions",j,P);ne&&(ne[a]=!0,B[a]=ne)}}},TimelineController.prototype.createTextTrack=function(a,A,j){var P=this.media;if(P)return P.addTextTrack(a,A,j)},TimelineController.prototype.destroy=function(){q.default.prototype.destroy.call(this)},TimelineController.prototype.onMediaAttaching=function(a){this.media=a.media,this._cleanTracks()},TimelineController.prototype.onMediaDetaching=function(){var a=this.captionsTracks;Object.keys(a).forEach((function(A){le.clearCurrentCues(a[A]),delete a[A]}))},TimelineController.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},TimelineController.prototype._cleanTracks=function(){var a=this.media;if(a){var A=a.textTracks;if(A)for(var j=0;j<A.length;j++)le.clearCurrentCues(A[j])}},TimelineController.prototype.onManifestLoaded=function(a){var A=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=a.subtitles||[];var j=this.media?this.media.textTracks:[];this.tracks.forEach((function(a,P){var B;if(P<j.length){for(var q=null,ne=0;ne<j.length;ne++)if(canReuseVttTextTrack(j[ne],a)){q=j[ne];break}q&&(B=q)}B||(B=A.createTextTrack("subtitles",a.name,a.lang)),a.default?B.mode=A.hls.subtitleDisplay?"showing":"hidden":B.mode="disabled",A.textTracks.push(B)}))}},TimelineController.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},TimelineController.prototype.onFragLoaded=function(A){var j=A.frag,P=A.payload;if("main"===j.type){var q=j.sn;if(q!==this.lastSn+1){var ne=this.cea608Parser;ne&&ne.reset()}this.lastSn=q}else if("subtitle"===j.type)if(P.byteLength){if(!a.isFinite(this.initPTS[j.cc]))return this.unparsedVttFrags.push(A),void(this.initPTS.length&&this.hls.trigger(B.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:j}));var ie=j.decryptdata;null!=ie&&null!=ie.key&&"AES-128"===ie.method||this._parseVTTs(j,P)}else this.hls.trigger(B.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:j})},TimelineController.prototype._parseVTTs=function(a,A){var j=this.vttCCs;j[a.cc]||(j[a.cc]={start:a.start,prevCC:this.prevCC,new:!0},this.prevCC=a.cc);var P=this.textTracks,q=this.hls;oe.default.parse(A,this.initPTS[a.cc],j,a.cc,(function(A){var j=P[a.level];"disabled"!==j.mode?(A.forEach((function(a){if(!j.cues.getCueById(a.id))try{j.addCue(a)}catch(P){var A=new window.TextTrackCue(a.startTime,a.endTime,a.text);A.id=a.id,j.addCue(A)}})),q.trigger(B.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:a})):q.trigger(B.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:a})}),(function(A){se.logger.log("Failed to parse VTT cue: "+A),q.trigger(B.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:a})}))},TimelineController.prototype.onFragDecrypted=function(A){var j=A.payload,P=A.frag;if("subtitle"===P.type){if(!a.isFinite(this.initPTS[P.cc]))return void this.unparsedVttFrags.push(A);this._parseVTTs(P,j)}},TimelineController.prototype.onFragParsingUserdata=function(a){if(this.enabled&&this.config.enableCEA708Captions)for(var A=0;A<a.samples.length;A++){var j=this.extractCea608Data(a.samples[A].bytes);this.cea608Parser.addData(a.samples[A].pts,j)}},TimelineController.prototype.extractCea608Data=function(a){for(var A,j,P,B=31&a[0],q=2,ne=[],ie=0;ie<B;ie++)A=a[q++],j=127&a[q++],P=127&a[q++],0===j&&0===P||0!==(4&A)&&0===(3&A)&&(ne.push(j),ne.push(P));return ne},TimelineController}(q.default);A.default=he}).call(this,j("./src/polyfills/number.js").Number)},"./src/crypt/aes-crypto.js":function srcCryptAesCryptoJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=function(){function AESCrypto(a,A){this.subtle=a,this.aesIV=A}return AESCrypto.prototype.decrypt=function(a,A){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},A,a)},AESCrypto}();A.default=P},"./src/crypt/aes-decryptor.js":function srcCryptAesDecryptorJs(a,A,j){"use strict";function removePadding(a){var A=a.byteLength,j=A&&new DataView(a).getUint8(A-1);return j?a.slice(0,A-j):a}Object.defineProperty(A,"__esModule",{value:!0}),A.removePadding=removePadding;var P=function(){function AESDecryptor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return AESDecryptor.prototype.uint8ArrayToUint32Array_=function(a){for(var A=new DataView(a),j=new Uint32Array(4),P=0;P<4;P++)j[P]=A.getUint32(4*P);return j},AESDecryptor.prototype.initTable=function(){var a=this.sBox,A=this.invSBox,j=this.subMix,P=j[0],B=j[1],q=j[2],ne=j[3],ie=this.invSubMix,oe=ie[0],se=ie[1],le=ie[2],he=ie[3],pe=new Uint32Array(256),ge=0,me=0,ve=0;for(ve=0;ve<256;ve++)pe[ve]=ve<128?ve<<1:ve<<1^283;for(ve=0;ve<256;ve++){var ye=me^me<<1^me<<2^me<<3^me<<4;ye=ye>>>8^255&ye^99,a[ge]=ye,A[ye]=ge;var _e=pe[ge],we=pe[_e],ke=pe[we],Oe=257*pe[ye]^16843008*ye;P[ge]=Oe<<24|Oe>>>8,B[ge]=Oe<<16|Oe>>>16,q[ge]=Oe<<8|Oe>>>24,ne[ge]=Oe,Oe=16843009*ke^65537*we^257*_e^16843008*ge,oe[ye]=Oe<<24|Oe>>>8,se[ye]=Oe<<16|Oe>>>16,le[ye]=Oe<<8|Oe>>>24,he[ye]=Oe,ge?(ge=_e^pe[pe[pe[ke^_e]]],me^=pe[pe[me]]):ge=me=1}},AESDecryptor.prototype.expandKey=function(a){for(var A=this.uint8ArrayToUint32Array_(a),j=!0,P=0;P<A.length&&j;)j=A[P]===this.key[P],P++;if(!j){this.key=A;var B=this.keySize=A.length;if(4!==B&&6!==B&&8!==B)throw new Error("Invalid aes key size="+B);var q,ne,ie,oe,se=this.ksRows=4*(B+6+1),le=this.keySchedule=new Uint32Array(se),he=this.invKeySchedule=new Uint32Array(se),pe=this.sBox,ge=this.rcon,me=this.invSubMix,ve=me[0],ye=me[1],_e=me[2],we=me[3];for(q=0;q<se;q++)q<B?ie=le[q]=A[q]:(oe=ie,q%B===0?(oe=pe[(oe=oe<<8|oe>>>24)>>>24]<<24|pe[oe>>>16&255]<<16|pe[oe>>>8&255]<<8|pe[255&oe],oe^=ge[q/B|0]<<24):B>6&&q%B===4&&(oe=pe[oe>>>24]<<24|pe[oe>>>16&255]<<16|pe[oe>>>8&255]<<8|pe[255&oe]),le[q]=ie=(le[q-B]^oe)>>>0);for(ne=0;ne<se;ne++)q=se-ne,oe=3&ne?le[q]:le[q-4],he[ne]=ne<4||q<=4?oe:ve[pe[oe>>>24]]^ye[pe[oe>>>16&255]]^_e[pe[oe>>>8&255]]^we[pe[255&oe]],he[ne]=he[ne]>>>0}},AESDecryptor.prototype.networkToHostOrderSwap=function(a){return a<<24|(65280&a)<<8|(16711680&a)>>8|a>>>24},AESDecryptor.prototype.decrypt=function(a,A,j,P){for(var B,q,ne,ie,oe,se,le,he,pe,ge,me,ve,ye,_e,we=this.keySize+6,ke=this.invKeySchedule,Oe=this.invSBox,Se=this.invSubMix,Te=Se[0],Ae=Se[1],je=Se[2],Fe=Se[3],Re=this.uint8ArrayToUint32Array_(j),Me=Re[0],Ne=Re[1],Be=Re[2],Ue=Re[3],We=new Int32Array(a),Ve=new Int32Array(We.length),Ye=this.networkToHostOrderSwap;A<We.length;){for(pe=Ye(We[A]),ge=Ye(We[A+1]),me=Ye(We[A+2]),ve=Ye(We[A+3]),oe=pe^ke[0],se=ve^ke[1],le=me^ke[2],he=ge^ke[3],ye=4,_e=1;_e<we;_e++)B=Te[oe>>>24]^Ae[se>>16&255]^je[le>>8&255]^Fe[255&he]^ke[ye],q=Te[se>>>24]^Ae[le>>16&255]^je[he>>8&255]^Fe[255&oe]^ke[ye+1],ne=Te[le>>>24]^Ae[he>>16&255]^je[oe>>8&255]^Fe[255&se]^ke[ye+2],ie=Te[he>>>24]^Ae[oe>>16&255]^je[se>>8&255]^Fe[255&le]^ke[ye+3],oe=B,se=q,le=ne,he=ie,ye+=4;B=Oe[oe>>>24]<<24^Oe[se>>16&255]<<16^Oe[le>>8&255]<<8^Oe[255&he]^ke[ye],q=Oe[se>>>24]<<24^Oe[le>>16&255]<<16^Oe[he>>8&255]<<8^Oe[255&oe]^ke[ye+1],ne=Oe[le>>>24]<<24^Oe[he>>16&255]<<16^Oe[oe>>8&255]<<8^Oe[255&se]^ke[ye+2],ie=Oe[he>>>24]<<24^Oe[oe>>16&255]<<16^Oe[se>>8&255]<<8^Oe[255&le]^ke[ye+3],ye+=3,Ve[A]=Ye(B^Me),Ve[A+1]=Ye(ie^Ne),Ve[A+2]=Ye(ne^Be),Ve[A+3]=Ye(q^Ue),Me=pe,Ne=ge,Be=me,Ue=ve,A+=4}return P?removePadding(Ve.buffer):Ve.buffer},AESDecryptor.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},AESDecryptor}();A.default=P},"./src/crypt/decrypter.js":function srcCryptDecrypterJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/crypt/aes-crypto.js"),B=j("./src/crypt/fast-aes-key.js"),q=j("./src/crypt/aes-decryptor.js"),ne=j("./src/errors.js"),ie=j("./src/utils/logger.js"),oe=j("./src/events.js"),se=j("./src/utils/get-self-scope.js").getSelfScope(),le=function(){function Decrypter(a,A,j){var P=(void 0===j?{}:j).removePKCS7Padding,B=void 0===P||P;if(this.logEnabled=!0,this.observer=a,this.config=A,this.removePKCS7Padding=B,B)try{var q=se.crypto;q&&(this.subtle=q.subtle||q.webkitSubtle)}catch(ne){}this.disableWebCrypto=!this.subtle}return Decrypter.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},Decrypter.prototype.decrypt=function(a,A,j,ne){var oe=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(ie.logger.log("JS AES decrypt"),this.logEnabled=!1);var se=this.decryptor;se||(this.decryptor=se=new q.default),se.expandKey(A),ne(se.decrypt(a,0,j,this.removePKCS7Padding))}else{this.logEnabled&&(ie.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var le=this.subtle;this.key!==A&&(this.key=A,this.fastAesKey=new B.default(le,A)),this.fastAesKey.expandKey().then((function(B){new P.default(le,j).decrypt(a,B).catch((function(P){oe.onWebCryptoError(P,a,A,j,ne)})).then((function(a){ne(a)}))})).catch((function(P){oe.onWebCryptoError(P,a,A,j,ne)}))}},Decrypter.prototype.onWebCryptoError=function(a,A,j,P,B){this.config.enableSoftwareAES?(ie.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(A,j,P,B)):(ie.logger.error("decrypting error : "+a.message),this.observer.trigger(oe.default.ERROR,{type:ne.ErrorTypes.MEDIA_ERROR,details:ne.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:a.message}))},Decrypter.prototype.destroy=function(){var a=this.decryptor;a&&(a.destroy(),this.decryptor=void 0)},Decrypter}();A.default=le},"./src/crypt/fast-aes-key.js":function srcCryptFastAesKeyJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=function(){function FastAESKey(a,A){this.subtle=a,this.key=A}return FastAESKey.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},FastAESKey}();A.default=P},"./src/demux/aacdemuxer.js":function srcDemuxAacdemuxerJs(a,A,j){"use strict";(function(a){Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/demux/adts.js"),B=j("./src/utils/logger.js"),q=j("./src/demux/id3.js"),ne=function(){function AACDemuxer(a,A,j){this.observer=a,this.config=j,this.remuxer=A}return AACDemuxer.prototype.resetInitSegment=function(a,A,j,P){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:A,duration:P,inputTimeScale:9e4}},AACDemuxer.prototype.resetTimeStamp=function(){},AACDemuxer.probe=function(a){if(!a)return!1;for(var A=(q.default.getID3Data(a,0)||[]).length,j=a.length;A<j;A++)if(P.probe(a,A))return B.logger.log("ADTS sync word found !"),!0;return!1},AACDemuxer.prototype.append=function(A,j,ne,ie){for(var oe=this._audioTrack,se=q.default.getID3Data(A,0)||[],le=q.default.getTimeStamp(se),he=a.isFinite(le)?90*le:9e4*j,pe=0,ge=he,me=A.length,ve=se.length,ye=[{pts:ge,dts:ge,data:se}];ve<me-1;)if(P.isHeader(A,ve)&&ve+5<me){P.initTrackConfig(oe,this.observer,A,ve,oe.manifestCodec);var _e=P.appendFrame(oe,A,ve,he,pe);if(!_e){B.logger.log("Unable to parse AAC frame");break}ve+=_e.length,ge=_e.sample.pts,pe++}else q.default.isHeader(A,ve)?(se=q.default.getID3Data(A,ve),ye.push({pts:ge,dts:ge,data:se}),ve+=se.length):ve++;this.remuxer.remux(oe,{samples:[]},{samples:ye,inputTimeScale:9e4},{samples:[]},j,ne,ie)},AACDemuxer.prototype.destroy=function(){},AACDemuxer}();A.default=ne}).call(this,j("./src/polyfills/number.js").Number)},"./src/demux/adts.js":function srcDemuxAdtsJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/logger.js"),B=j("./src/errors.js"),q=j("./src/events.js");function getAudioConfig(a,A,j,ne){var ie,oe,se,le,he,pe=navigator.userAgent.toLowerCase(),ge=ne,me=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(ie=1+((192&A[j+2])>>>6),!((oe=(60&A[j+2])>>>2)>me.length-1))return le=(1&A[j+2])<<2,le|=(192&A[j+3])>>>6,P.logger.log("manifest codec:"+ne+",ADTS data:type:"+ie+",sampleingIndex:"+oe+"["+me[oe]+"Hz],channelConfig:"+le),/firefox/i.test(pe)?oe>=6?(ie=5,he=new Array(4),se=oe-3):(ie=2,he=new Array(2),se=oe):-1!==pe.indexOf("android")?(ie=2,he=new Array(2),se=oe):(ie=5,he=new Array(4),ne&&(-1!==ne.indexOf("mp4a.40.29")||-1!==ne.indexOf("mp4a.40.5"))||!ne&&oe>=6?se=oe-3:((ne&&-1!==ne.indexOf("mp4a.40.2")&&(oe>=6&&1===le||/vivaldi/i.test(pe))||!ne&&1===le)&&(ie=2,he=new Array(2)),se=oe)),he[0]=ie<<3,he[0]|=(14&oe)>>1,he[1]|=(1&oe)<<7,he[1]|=le<<3,5===ie&&(he[1]|=(14&se)>>1,he[2]=(1&se)<<7,he[2]|=8,he[3]=0),{config:he,samplerate:me[oe],channelCount:le,codec:"mp4a.40."+ie,manifestCodec:ge};a.trigger(q.default.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+oe})}function isHeaderPattern(a,A){return 255===a[A]&&240===(246&a[A+1])}function getHeaderLength(a,A){return 1&a[A+1]?7:9}function getFullFrameLength(a,A){return(3&a[A+3])<<11|a[A+4]<<3|(224&a[A+5])>>>5}function getFrameDuration(a){return 9216e4/a}function parseFrameHeader(a,A,j,P,B){var q,ne,ie=a.length;if(q=getHeaderLength(a,A),ne=getFullFrameLength(a,A),(ne-=q)>0&&A+q+ne<=ie)return{headerLength:q,frameLength:ne,stamp:j+P*B}}A.getAudioConfig=getAudioConfig,A.isHeaderPattern=isHeaderPattern,A.getHeaderLength=getHeaderLength,A.getFullFrameLength=getFullFrameLength,A.isHeader=function isHeader(a,A){return!!(A+1<a.length&&isHeaderPattern(a,A))},A.probe=function probe(a,A){if(A+1<a.length&&isHeaderPattern(a,A)){var j=getHeaderLength(a,A);A+5<a.length&&(j=getFullFrameLength(a,A));var P=A+j;if(P===a.length||P+1<a.length&&isHeaderPattern(a,P))return!0}return!1},A.initTrackConfig=function initTrackConfig(a,A,j,B,q){if(!a.samplerate){var ne=getAudioConfig(A,j,B,q);a.config=ne.config,a.samplerate=ne.samplerate,a.channelCount=ne.channelCount,a.codec=ne.codec,a.manifestCodec=ne.manifestCodec,P.logger.log("parsed codec:"+a.codec+",rate:"+ne.samplerate+",nb channel:"+ne.channelCount)}},A.getFrameDuration=getFrameDuration,A.parseFrameHeader=parseFrameHeader,A.appendFrame=function appendFrame(a,A,j,P,B){var q=parseFrameHeader(A,j,P,B,getFrameDuration(a.samplerate));if(q){var ne=q.stamp,ie=q.headerLength,oe=q.frameLength,se={unit:A.subarray(j+ie,j+ie+oe),pts:ne,dts:ne};return a.samples.push(se),a.len+=oe,{sample:se,length:oe+ie}}}},"./src/demux/demuxer-inline.js":function srcDemuxDemuxerInlineJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P,B=j("./src/events.js"),q=j("./src/errors.js"),ne=j("./src/crypt/decrypter.js"),ie=j("./src/demux/aacdemuxer.js"),oe=j("./src/demux/mp4demuxer.js"),se=j("./src/demux/tsdemuxer.js"),le=j("./src/demux/mp3demuxer.js"),he=j("./src/remux/mp4-remuxer.js"),pe=j("./src/remux/passthrough-remuxer.js"),ge=j("./src/utils/get-self-scope.js"),me=j("./src/utils/logger.js"),ve=ge.getSelfScope();try{P=ve.performance.now.bind(ve.performance)}catch(_e){me.logger.debug("Unable to use Performance API on this environment"),P=ve.Date.now}var ye=function(){function DemuxerInline(a,A,j,P){this.observer=a,this.typeSupported=A,this.config=j,this.vendor=P}return DemuxerInline.prototype.destroy=function(){var a=this.demuxer;a&&a.destroy()},DemuxerInline.prototype.push=function(a,A,j,q,ie,oe,se,le,he,pe,ge,me){var ve=this;if(a.byteLength>0&&null!=A&&null!=A.key&&"AES-128"===A.method){var ye=this.decrypter;null==ye&&(ye=this.decrypter=new ne.default(this.observer,this.config));var _e=P();ye.decrypt(a,A.key.buffer,A.iv.buffer,(function(a){var ne=P();ve.observer.trigger(B.default.FRAG_DECRYPTED,{stats:{tstart:_e,tdecrypt:ne}}),ve.pushDecrypted(new Uint8Array(a),A,new Uint8Array(j),q,ie,oe,se,le,he,pe,ge,me)}))}else this.pushDecrypted(new Uint8Array(a),A,new Uint8Array(j),q,ie,oe,se,le,he,pe,ge,me)},DemuxerInline.prototype.pushDecrypted=function(a,A,j,P,ne,ge,me,ve,ye,_e,we,ke){var Oe=this.demuxer;if(!Oe||(me||ve)&&!this.probe(a)){for(var Se=this.observer,Te=this.typeSupported,Ae=this.config,je=[{demux:se.default,remux:he.default},{demux:oe.default,remux:pe.default},{demux:ie.default,remux:he.default},{demux:le.default,remux:he.default}],Fe=0,Re=je.length;Fe<Re;Fe++){var Me=je[Fe],Ne=Me.demux.probe;if(Ne(a)){var Be=this.remuxer=new Me.remux(Se,Ae,Te,this.vendor);Oe=new Me.demux(Se,Be,Ae,Te),this.probe=Ne;break}}if(!Oe)return void Se.trigger(B.default.ERROR,{type:q.ErrorTypes.MEDIA_ERROR,details:q.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=Oe}var Ue=this.remuxer;(me||ve)&&(Oe.resetInitSegment(j,P,ne,_e),Ue.resetInitSegment()),me&&(Oe.resetTimeStamp(ke),Ue.resetTimeStamp(ke)),"function"===typeof Oe.setDecryptData&&Oe.setDecryptData(A),Oe.append(a,ge,ye,we)},DemuxerInline}();A.default=ye},"./src/demux/demuxer-worker.js":function srcDemuxDemuxerWorkerJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/demux/demuxer-inline.js"),B=j("./src/events.js"),q=j("./src/utils/logger.js"),ne=j("./node_modules/node-libs-browser/node_modules/events/events.js");A.default=function DemuxerWorker(a){var A=new ne.EventEmitter;A.trigger=function trigger(a){for(var j=[],P=1;P<arguments.length;P++)j[P-1]=arguments[P];A.emit.apply(A,[a,a].concat(j))},A.off=function off(a){for(var j=[],P=1;P<arguments.length;P++)j[P-1]=arguments[P];A.removeListener.apply(A,[a].concat(j))};var j=function forwardMessage(A,j){a.postMessage({event:A,data:j})};a.addEventListener("message",(function(B){var ne=B.data;switch(ne.cmd){case"init":var ie=JSON.parse(ne.config);a.demuxer=new P.default(A,ne.typeSupported,ie,ne.vendor),q.enableLogs(ie.debug),j("init",null);break;case"demux":a.demuxer.push(ne.data,ne.decryptdata,ne.initSegment,ne.audioCodec,ne.videoCodec,ne.timeOffset,ne.discontinuity,ne.trackSwitch,ne.contiguous,ne.duration,ne.accurateTimeOffset,ne.defaultInitPTS)}})),A.on(B.default.FRAG_DECRYPTED,j),A.on(B.default.FRAG_PARSING_INIT_SEGMENT,j),A.on(B.default.FRAG_PARSED,j),A.on(B.default.ERROR,j),A.on(B.default.FRAG_PARSING_METADATA,j),A.on(B.default.FRAG_PARSING_USERDATA,j),A.on(B.default.INIT_PTS_FOUND,j),A.on(B.default.FRAG_PARSING_DATA,(function(A,j){var P=[],B={event:A,data:j};j.data1&&(B.data1=j.data1.buffer,P.push(j.data1.buffer),delete j.data1),j.data2&&(B.data2=j.data2.buffer,P.push(j.data2.buffer),delete j.data2),a.postMessage(B,P)}))}},"./src/demux/demuxer.js":function srcDemuxDemuxerJs(a,A,j){"use strict";(function(a){Object.defineProperty(A,"__esModule",{value:!0});var P=j("./node_modules/webworkify-webpack/index.js"),B=j("./src/events.js"),q=j("./src/demux/demuxer-inline.js"),ne=j("./src/utils/logger.js"),ie=j("./src/errors.js"),oe=j("./src/utils/mediasource-helper.js"),se=j("./src/utils/get-self-scope.js"),le=j("./src/observer.js"),he=se.getSelfScope(),pe=oe.getMediaSource(),ge=function(){function Demuxer(a,A){var j=this;this.hls=a,this.id=A;var oe=this.observer=new le.Observer,se=a.config,ge=function forwardMessage(A,P){(P=P||{}).frag=j.frag,P.id=j.id,a.trigger(A,P)};oe.on(B.default.FRAG_DECRYPTED,ge),oe.on(B.default.FRAG_PARSING_INIT_SEGMENT,ge),oe.on(B.default.FRAG_PARSING_DATA,ge),oe.on(B.default.FRAG_PARSED,ge),oe.on(B.default.ERROR,ge),oe.on(B.default.FRAG_PARSING_METADATA,ge),oe.on(B.default.FRAG_PARSING_USERDATA,ge),oe.on(B.default.INIT_PTS_FOUND,ge);var me={mp4:pe.isTypeSupported("video/mp4"),mpeg:pe.isTypeSupported("audio/mpeg"),mp3:pe.isTypeSupported('audio/mp4; codecs="mp3"')},ve=navigator.vendor;if(se.enableWorker&&"undefined"!==typeof Worker){ne.logger.log("demuxing in webworker");var ye=void 0;try{ye=this.w=P("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),ye.addEventListener("message",this.onwmsg),ye.onerror=function(A){a.trigger(B.default.ERROR,{type:ie.ErrorTypes.OTHER_ERROR,details:ie.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:A.message+" ("+A.filename+":"+A.lineno+")"}})},ye.postMessage({cmd:"init",typeSupported:me,vendor:ve,id:A,config:JSON.stringify(se)})}catch(_e){ne.logger.warn("Error in worker:",_e),ne.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),ye&&he.URL.revokeObjectURL(ye.objectURL),this.demuxer=new q.default(oe,me,se,ve),this.w=void 0}}else this.demuxer=new q.default(oe,me,se,ve)}return Demuxer.prototype.destroy=function(){var a=this.w;if(a)a.removeEventListener("message",this.onwmsg),a.terminate(),this.w=null;else{var A=this.demuxer;A&&(A.destroy(),this.demuxer=null)}var j=this.observer;j&&(j.removeAllListeners(),this.observer=null)},Demuxer.prototype.push=function(A,j,P,B,q,ie,oe,se){var le=this.w,he=a.isFinite(q.startPTS)?q.startPTS:q.start,pe=q.decryptdata,ge=this.frag,me=!(ge&&q.cc===ge.cc),ve=!(ge&&q.level===ge.level),ye=ge&&q.sn===ge.sn+1,_e=!ve&&ye;if(me&&ne.logger.log(this.id+":discontinuity detected"),ve&&ne.logger.log(this.id+":switch detected"),this.frag=q,le)le.postMessage({cmd:"demux",data:A,decryptdata:pe,initSegment:j,audioCodec:P,videoCodec:B,timeOffset:he,discontinuity:me,trackSwitch:ve,contiguous:_e,duration:ie,accurateTimeOffset:oe,defaultInitPTS:se},A instanceof ArrayBuffer?[A]:[]);else{var we=this.demuxer;we&&we.push(A,pe,j,P,B,he,me,ve,_e,ie,oe,se)}},Demuxer.prototype.onWorkerMessage=function(a){var A=a.data,j=this.hls;switch(A.event){case"init":he.URL.revokeObjectURL(this.w.objectURL);break;case B.default.FRAG_PARSING_DATA:A.data.data1=new Uint8Array(A.data1),A.data2&&(A.data.data2=new Uint8Array(A.data2));default:A.data=A.data||{},A.data.frag=this.frag,A.data.id=this.id,j.trigger(A.event,A.data)}},Demuxer}();A.default=ge}).call(this,j("./src/polyfills/number.js").Number)},"./src/demux/exp-golomb.js":function srcDemuxExpGolombJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/logger.js"),B=function(){function ExpGolomb(a){this.data=a,this.bytesAvailable=a.byteLength,this.word=0,this.bitsAvailable=0}return ExpGolomb.prototype.loadWord=function(){var a=this.data,A=this.bytesAvailable,j=a.byteLength-A,P=new Uint8Array(4),B=Math.min(4,A);if(0===B)throw new Error("no bytes available");P.set(a.subarray(j,j+B)),this.word=new DataView(P.buffer).getUint32(0),this.bitsAvailable=8*B,this.bytesAvailable-=B},ExpGolomb.prototype.skipBits=function(a){var A;this.bitsAvailable>a?(this.word<<=a,this.bitsAvailable-=a):(a-=this.bitsAvailable,a-=(A=a>>3)>>3,this.bytesAvailable-=A,this.loadWord(),this.word<<=a,this.bitsAvailable-=a)},ExpGolomb.prototype.readBits=function(a){var A=Math.min(this.bitsAvailable,a),j=this.word>>>32-A;return a>32&&P.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=A,this.bitsAvailable>0?this.word<<=A:this.bytesAvailable>0&&this.loadWord(),(A=a-A)>0&&this.bitsAvailable?j<<A|this.readBits(A):j},ExpGolomb.prototype.skipLZ=function(){var a;for(a=0;a<this.bitsAvailable;++a)if(0!==(this.word&2147483648>>>a))return this.word<<=a,this.bitsAvailable-=a,a;return this.loadWord(),a+this.skipLZ()},ExpGolomb.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},ExpGolomb.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},ExpGolomb.prototype.readUEG=function(){var a=this.skipLZ();return this.readBits(a+1)-1},ExpGolomb.prototype.readEG=function(){var a=this.readUEG();return 1&a?1+a>>>1:-1*(a>>>1)},ExpGolomb.prototype.readBoolean=function(){return 1===this.readBits(1)},ExpGolomb.prototype.readUByte=function(){return this.readBits(8)},ExpGolomb.prototype.readUShort=function(){return this.readBits(16)},ExpGolomb.prototype.readUInt=function(){return this.readBits(32)},ExpGolomb.prototype.skipScalingList=function(a){var A,j=8,P=8;for(A=0;A<a;A++)0!==P&&(P=(j+this.readEG()+256)%256),j=0===P?j:P},ExpGolomb.prototype.readSPS=function(){var a,A,j,P,B,q,ne,ie=0,oe=0,se=0,le=0,he=this.readUByte.bind(this),pe=this.readBits.bind(this),ge=this.readUEG.bind(this),me=this.readBoolean.bind(this),ve=this.skipBits.bind(this),ye=this.skipEG.bind(this),_e=this.skipUEG.bind(this),we=this.skipScalingList.bind(this);if(he(),a=he(),pe(5),ve(3),he(),_e(),100===a||110===a||122===a||244===a||44===a||83===a||86===a||118===a||128===a){var ke=ge();if(3===ke&&ve(1),_e(),_e(),ve(1),me())for(q=3!==ke?8:12,ne=0;ne<q;ne++)me()&&we(ne<6?16:64)}_e();var Oe=ge();if(0===Oe)ge();else if(1===Oe)for(ve(1),ye(),ye(),A=ge(),ne=0;ne<A;ne++)ye();_e(),ve(1),j=ge(),P=ge(),0===(B=pe(1))&&ve(1),ve(1),me()&&(ie=ge(),oe=ge(),se=ge(),le=ge());var Se=[1,1];if(me()&&me())switch(he()){case 1:Se=[1,1];break;case 2:Se=[12,11];break;case 3:Se=[10,11];break;case 4:Se=[16,11];break;case 5:Se=[40,33];break;case 6:Se=[24,11];break;case 7:Se=[20,11];break;case 8:Se=[32,11];break;case 9:Se=[80,33];break;case 10:Se=[18,11];break;case 11:Se=[15,11];break;case 12:Se=[64,33];break;case 13:Se=[160,99];break;case 14:Se=[4,3];break;case 15:Se=[3,2];break;case 16:Se=[2,1];break;case 255:Se=[he()<<8|he(),he()<<8|he()]}return{width:Math.ceil(16*(j+1)-2*ie-2*oe),height:(2-B)*(P+1)*16-(B?2:4)*(se+le),pixelRatio:Se}},ExpGolomb.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},ExpGolomb}();A.default=B},"./src/demux/id3.js":function srcDemuxId3Js(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=function(){function ID3(){}return ID3.isHeader=function(a,A){return A+10<=a.length&&73===a[A]&&68===a[A+1]&&51===a[A+2]&&a[A+3]<255&&a[A+4]<255&&a[A+6]<128&&a[A+7]<128&&a[A+8]<128&&a[A+9]<128},ID3.isFooter=function(a,A){return A+10<=a.length&&51===a[A]&&68===a[A+1]&&73===a[A+2]&&a[A+3]<255&&a[A+4]<255&&a[A+6]<128&&a[A+7]<128&&a[A+8]<128&&a[A+9]<128},ID3.getID3Data=function(a,A){for(var j=A,P=0;ID3.isHeader(a,A);){P+=10,P+=ID3._readSize(a,A+6),ID3.isFooter(a,A+10)&&(P+=10),A+=P}if(P>0)return a.subarray(j,j+P)},ID3._readSize=function(a,A){var j=0;return j=(127&a[A])<<21,j|=(127&a[A+1])<<14,j|=(127&a[A+2])<<7,j|=127&a[A+3]},ID3.getTimeStamp=function(a){for(var A=ID3.getID3Frames(a),j=0;j<A.length;j++){var P=A[j];if(ID3.isTimeStampFrame(P))return ID3._readTimeStamp(P)}},ID3.isTimeStampFrame=function(a){return a&&"PRIV"===a.key&&"com.apple.streaming.transportStreamTimestamp"===a.info},ID3._getFrameData=function(a){var A=String.fromCharCode(a[0],a[1],a[2],a[3]),j=ID3._readSize(a,4);return{type:A,size:j,data:a.subarray(10,10+j)}},ID3.getID3Frames=function(a){for(var A=0,j=[];ID3.isHeader(a,A);){for(var P=ID3._readSize(a,A+6),B=(A+=10)+P;A+8<B;){var q=ID3._getFrameData(a.subarray(A)),ne=ID3._decodeFrame(q);ne&&j.push(ne),A+=q.size+10}ID3.isFooter(a,A)&&(A+=10)}return j},ID3._decodeFrame=function(a){return"PRIV"===a.type?ID3._decodePrivFrame(a):"T"===a.type[0]?ID3._decodeTextFrame(a):"W"===a.type[0]?ID3._decodeURLFrame(a):void 0},ID3._readTimeStamp=function(a){if(8===a.data.byteLength){var A=new Uint8Array(a.data),j=1&A[3],P=(A[4]<<23)+(A[5]<<15)+(A[6]<<7)+A[7];return P/=45,j&&(P+=47721858.84),Math.round(P)}},ID3._decodePrivFrame=function(a){if(!(a.size<2)){var A=ID3._utf8ArrayToStr(a.data,!0),j=new Uint8Array(a.data.subarray(A.length+1));return{key:a.type,info:A,data:j.buffer}}},ID3._decodeTextFrame=function(a){if(!(a.size<2)){if("TXXX"===a.type){var A=1,j=ID3._utf8ArrayToStr(a.data.subarray(A));A+=j.length+1;var P=ID3._utf8ArrayToStr(a.data.subarray(A));return{key:a.type,info:j,data:P}}var B=ID3._utf8ArrayToStr(a.data.subarray(1));return{key:a.type,data:B}}},ID3._decodeURLFrame=function(a){if("WXXX"===a.type){if(a.size<2)return;var A=1,j=ID3._utf8ArrayToStr(a.data.subarray(A));A+=j.length+1;var P=ID3._utf8ArrayToStr(a.data.subarray(A));return{key:a.type,info:j,data:P}}var B=ID3._utf8ArrayToStr(a.data);return{key:a.type,data:B}},ID3._utf8ArrayToStr=function(a,A){void 0===A&&(A=!1);for(var j,P,B,q=a.length,ne="",ie=0;ie<q;){if(0===(j=a[ie++])&&A)return ne;if(0!==j&&3!==j)switch(j>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:ne+=String.fromCharCode(j);break;case 12:case 13:P=a[ie++],ne+=String.fromCharCode((31&j)<<6|63&P);break;case 14:P=a[ie++],B=a[ie++],ne+=String.fromCharCode((15&j)<<12|(63&P)<<6|(63&B)<<0)}}return ne},ID3}(),B=P._utf8ArrayToStr;A.utf8ArrayToStr=B,A.default=P},"./src/demux/mp3demuxer.js":function srcDemuxMp3demuxerJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/demux/id3.js"),B=j("./src/utils/logger.js"),q=j("./src/demux/mpegaudio.js"),ne=function(){function MP3Demuxer(a,A,j){this.observer=a,this.config=j,this.remuxer=A}return MP3Demuxer.prototype.resetInitSegment=function(a,A,j,P){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:A,duration:P,inputTimeScale:9e4}},MP3Demuxer.prototype.resetTimeStamp=function(){},MP3Demuxer.probe=function(a){var A,j,ne=P.default.getID3Data(a,0);if(ne&&void 0!==P.default.getTimeStamp(ne))for(A=ne.length,j=Math.min(a.length-1,A+100);A<j;A++)if(q.default.probe(a,A))return B.logger.log("MPEG Audio sync word found !"),!0;return!1},MP3Demuxer.prototype.append=function(a,A,j,B){for(var ne=P.default.getID3Data(a,0),ie=P.default.getTimeStamp(ne),oe=ie?90*ie:9e4*A,se=ne.length,le=a.length,he=0,pe=0,ge=this._audioTrack,me=[{pts:oe,dts:oe,data:ne}];se<le;)if(q.default.isHeader(a,se)){var ve=q.default.appendFrame(ge,a,se,oe,he);if(!ve)break;se+=ve.length,pe=ve.sample.pts,he++}else P.default.isHeader(a,se)?(ne=P.default.getID3Data(a,se),me.push({pts:pe,dts:pe,data:ne}),se+=ne.length):se++;this.remuxer.remux(ge,{samples:[]},{samples:me,inputTimeScale:9e4},{samples:[]},A,j,B)},MP3Demuxer.prototype.destroy=function(){},MP3Demuxer}();A.default=ne},"./src/demux/mp4demuxer.js":function srcDemuxMp4demuxerJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/logger.js"),B=j("./src/events.js"),q=Math.pow(2,32)-1,ne=function(){function MP4Demuxer(a,A){this.observer=a,this.remuxer=A}return MP4Demuxer.prototype.resetTimeStamp=function(a){this.initPTS=a},MP4Demuxer.prototype.resetInitSegment=function(a,A,j,P){if(a&&a.byteLength){var q=this.initData=MP4Demuxer.parseInitSegment(a);null==A&&(A="mp4a.40.5"),null==j&&(j="avc1.42e01e");var ne={};q.audio&&q.video?ne.audiovideo={container:"video/mp4",codec:A+","+j,initSegment:P?a:null}:(q.audio&&(ne.audio={container:"audio/mp4",codec:A,initSegment:P?a:null}),q.video&&(ne.video={container:"video/mp4",codec:j,initSegment:P?a:null})),this.observer.trigger(B.default.FRAG_PARSING_INIT_SEGMENT,{tracks:ne})}else A&&(this.audioCodec=A),j&&(this.videoCodec=j)},MP4Demuxer.probe=function(a){return MP4Demuxer.findBox({data:a,start:0,end:Math.min(a.length,16384)},["moof"]).length>0},MP4Demuxer.bin2str=function(a){return String.fromCharCode.apply(null,a)},MP4Demuxer.readUint16=function(a,A){a.data&&(A+=a.start,a=a.data);var j=a[A]<<8|a[A+1];return j<0?65536+j:j},MP4Demuxer.readUint32=function(a,A){a.data&&(A+=a.start,a=a.data);var j=a[A]<<24|a[A+1]<<16|a[A+2]<<8|a[A+3];return j<0?4294967296+j:j},MP4Demuxer.writeUint32=function(a,A,j){a.data&&(A+=a.start,a=a.data),a[A]=j>>24,a[A+1]=j>>16&255,a[A+2]=j>>8&255,a[A+3]=255&j},MP4Demuxer.findBox=function(a,A){var j,P,B,q,ne,ie,oe=[];if(a.data?(ne=a.start,B=a.end,a=a.data):(ne=0,B=a.byteLength),!A.length)return null;for(j=ne;j<B;)ie=(P=MP4Demuxer.readUint32(a,j))>1?j+P:B,MP4Demuxer.bin2str(a.subarray(j+4,j+8))===A[0]&&(1===A.length?oe.push({data:a,start:j+8,end:ie}):(q=MP4Demuxer.findBox({data:a,start:j+8,end:ie},A.slice(1))).length&&(oe=oe.concat(q))),j=ie;return oe},MP4Demuxer.parseSegmentIndex=function(a){var A,j=MP4Demuxer.findBox(a,["moov"])[0],P=j?j.end:null,B=0,q=MP4Demuxer.findBox(a,["sidx"]);if(!q||!q[0])return null;A=[];var ne=(q=q[0]).data[0];B=0===ne?8:16;var ie=MP4Demuxer.readUint32(q,B);B+=4;B+=0===ne?8:16,B+=2;var oe=q.end+0,se=MP4Demuxer.readUint16(q,B);B+=2;for(var le=0;le<se;le++){var he=B,pe=MP4Demuxer.readUint32(q,he);he+=4;var ge=2147483647&pe;if(1===(2147483648&pe)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var me=MP4Demuxer.readUint32(q,he);he+=4,A.push({referenceSize:ge,subsegmentDuration:me,info:{duration:me/ie,start:oe,end:oe+ge-1}}),oe+=ge,B=he+=4}return{earliestPresentationTime:0,timescale:ie,version:ne,referencesCount:se,references:A,moovEndOffset:P}},MP4Demuxer.parseInitSegment=function(a){var A=[];return MP4Demuxer.findBox(a,["moov","trak"]).forEach((function(a){var j=MP4Demuxer.findBox(a,["tkhd"])[0];if(j){var B=j.data[j.start],q=0===B?12:20,ne=MP4Demuxer.readUint32(j,q),ie=MP4Demuxer.findBox(a,["mdia","mdhd"])[0];if(ie){q=0===(B=ie.data[ie.start])?12:20;var oe=MP4Demuxer.readUint32(ie,q),se=MP4Demuxer.findBox(a,["mdia","hdlr"])[0];if(se){var le={soun:"audio",vide:"video"}[MP4Demuxer.bin2str(se.data.subarray(se.start+8,se.start+12))];if(le){var he=MP4Demuxer.findBox(a,["mdia","minf","stbl","stsd"]);if(he.length){he=he[0];var pe=MP4Demuxer.bin2str(he.data.subarray(he.start+12,he.start+16));P.logger.log("MP4Demuxer:"+le+":"+pe+" found")}A[ne]={timescale:oe,type:le},A[le]={timescale:oe,id:ne}}}}}})),A},MP4Demuxer.getStartDTS=function(a,A){var j,P,B;return j=MP4Demuxer.findBox(A,["moof","traf"]),P=[].concat.apply([],j.map((function(A){return MP4Demuxer.findBox(A,["tfhd"]).map((function(j){var P,B;return P=MP4Demuxer.readUint32(j,4),B=a[P].timescale||9e4,MP4Demuxer.findBox(A,["tfdt"]).map((function(a){var A,j;return A=a.data[a.start],j=MP4Demuxer.readUint32(a,4),1===A&&(j*=Math.pow(2,32),j+=MP4Demuxer.readUint32(a,8)),j}))[0]/B}))}))),B=Math.min.apply(null,P),isFinite(B)?B:0},MP4Demuxer.offsetStartDTS=function(a,A,j){MP4Demuxer.findBox(A,["moof","traf"]).map((function(A){return MP4Demuxer.findBox(A,["tfhd"]).map((function(P){var B=MP4Demuxer.readUint32(P,4),ne=a[B].timescale||9e4;MP4Demuxer.findBox(A,["tfdt"]).map((function(a){var A=a.data[a.start],P=MP4Demuxer.readUint32(a,4);if(0===A)MP4Demuxer.writeUint32(a,4,P-j*ne);else{P*=Math.pow(2,32),P+=MP4Demuxer.readUint32(a,8),P-=j*ne,P=Math.max(P,0);var B=Math.floor(P/(q+1)),ie=Math.floor(P%(q+1));MP4Demuxer.writeUint32(a,4,B),MP4Demuxer.writeUint32(a,8,ie)}}))}))}))},MP4Demuxer.prototype.append=function(a,A,j,P){var q=this.initData;q||(this.resetInitSegment(a,this.audioCodec,this.videoCodec,!1),q=this.initData);var ne,ie=this.initPTS;if(void 0===ie){var oe=MP4Demuxer.getStartDTS(q,a);this.initPTS=ie=oe-A,this.observer.trigger(B.default.INIT_PTS_FOUND,{initPTS:ie})}MP4Demuxer.offsetStartDTS(q,a,ie),ne=MP4Demuxer.getStartDTS(q,a),this.remuxer.remux(q.audio,q.video,null,null,ne,j,P,a)},MP4Demuxer.prototype.destroy=function(){},MP4Demuxer}();A.default=ne},"./src/demux/mpegaudio.js":function srcDemuxMpegaudioJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function appendFrame(a,A,j,P,B){if(!(j+24>A.length)){var q=this.parseHeader(A,j);if(q&&j+q.frameLength<=A.length){var ne=P+B*(9e4*q.samplesPerFrame/q.sampleRate),ie={unit:A.subarray(j,j+q.frameLength),pts:ne,dts:ne};return a.config=[],a.channelCount=q.channelCount,a.samplerate=q.sampleRate,a.samples.push(ie),a.len+=q.frameLength,{sample:ie,length:q.frameLength}}}},parseHeader:function parseHeader(a,A){var j=a[A+1]>>3&3,B=a[A+1]>>1&3,q=a[A+2]>>4&15,ne=a[A+2]>>2&3,ie=a[A+2]>>1&1;if(1!==j&&0!==q&&15!==q&&3!==ne){var oe=3===j?3-B:3===B?3:4,se=1e3*P.BitratesMap[14*oe+q-1],le=3===j?0:2===j?1:2,he=P.SamplingRateMap[3*le+ne],pe=a[A+3]>>6===3?1:2,ge=P.SamplesCoefficients[j][B],me=P.BytesInSlot[B],ve=8*ge*me;return{sampleRate:he,channelCount:pe,frameLength:parseInt(ge*se/he+ie,10)*me,samplesPerFrame:ve}}},isHeaderPattern:function isHeaderPattern(a,A){return 255===a[A]&&224===(224&a[A+1])&&0!==(6&a[A+1])},isHeader:function isHeader(a,A){return!!(A+1<a.length&&this.isHeaderPattern(a,A))},probe:function probe(a,A){if(A+1<a.length&&this.isHeaderPattern(a,A)){var j=this.parseHeader(a,A),P=4;j&&j.frameLength&&(P=j.frameLength);var B=A+P;if(B===a.length||B+1<a.length&&this.isHeaderPattern(a,B))return!0}return!1}};A.default=P},"./src/demux/sample-aes.js":function srcDemuxSampleAesJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/crypt/decrypter.js"),B=function(){function SampleAesDecrypter(a,A,j,B){this.decryptdata=j,this.discardEPB=B,this.decrypter=new P.default(a,A,{removePKCS7Padding:!1})}return SampleAesDecrypter.prototype.decryptBuffer=function(a,A){this.decrypter.decrypt(a,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,A)},SampleAesDecrypter.prototype.decryptAacSample=function(a,A,j,P){var B=a[A].unit,q=B.subarray(16,B.length-B.length%16),ne=q.buffer.slice(q.byteOffset,q.byteOffset+q.length),ie=this;this.decryptBuffer(ne,(function(q){q=new Uint8Array(q),B.set(q,16),P||ie.decryptAacSamples(a,A+1,j)}))},SampleAesDecrypter.prototype.decryptAacSamples=function(a,A,j){for(;;A++){if(A>=a.length)return void j();if(!(a[A].unit.length<32)){var P=this.decrypter.isSync();if(this.decryptAacSample(a,A,j,P),!P)return}}},SampleAesDecrypter.prototype.getAvcEncryptedData=function(a){for(var A=16*Math.floor((a.length-48)/160)+16,j=new Int8Array(A),P=0,B=32;B<=a.length-16;B+=160,P+=16)j.set(a.subarray(B,B+16),P);return j},SampleAesDecrypter.prototype.getAvcDecryptedUnit=function(a,A){A=new Uint8Array(A);for(var j=0,P=32;P<=a.length-16;P+=160,j+=16)a.set(A.subarray(j,j+16),P);return a},SampleAesDecrypter.prototype.decryptAvcSample=function(a,A,j,P,B,q){var ne=this.discardEPB(B.data),ie=this.getAvcEncryptedData(ne),oe=this;this.decryptBuffer(ie.buffer,(function(ie){B.data=oe.getAvcDecryptedUnit(ne,ie),q||oe.decryptAvcSamples(a,A,j+1,P)}))},SampleAesDecrypter.prototype.decryptAvcSamples=function(a,A,j,P){for(;;A++,j=0){if(A>=a.length)return void P();for(var B=a[A].units;!(j>=B.length);j++){var q=B[j];if(!(q.length<=48||1!==q.type&&5!==q.type)){var ne=this.decrypter.isSync();if(this.decryptAvcSample(a,A,j,P,q,ne),!ne)return}}}},SampleAesDecrypter}();A.default=B},"./src/demux/tsdemuxer.js":function srcDemuxTsdemuxerJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/demux/adts.js"),B=j("./src/demux/mpegaudio.js"),q=j("./src/events.js"),ne=j("./src/demux/exp-golomb.js"),ie=j("./src/demux/sample-aes.js"),oe=j("./src/utils/logger.js"),se=j("./src/errors.js"),le={video:1,audio:2,id3:3,text:4},he=function(){function TSDemuxer(a,A,j,P){this.observer=a,this.config=j,this.typeSupported=P,this.remuxer=A,this.sampleAes=null}return TSDemuxer.prototype.setDecryptData=function(a){null!=a&&null!=a.key&&"SAMPLE-AES"===a.method?this.sampleAes=new ie.default(this.observer,this.config,a,this.discardEPB):this.sampleAes=null},TSDemuxer.probe=function(a){var A=TSDemuxer._syncOffset(a);return!(A<0)&&(A&&oe.logger.warn("MPEG2-TS detected but first sync word found @ offset "+A+", junk ahead ?"),!0)},TSDemuxer._syncOffset=function(a){for(var A=Math.min(1e3,a.length-564),j=0;j<A;){if(71===a[j]&&71===a[j+188]&&71===a[j+376])return j;j++}return-1},TSDemuxer.createTrack=function(a,A){return{container:"video"===a||"audio"===a?"video/mp2t":void 0,type:a,id:le[a],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===a?0:void 0,isAAC:"audio"===a||void 0,duration:"audio"===a?A:void 0}},TSDemuxer.prototype.resetInitSegment=function(a,A,j,P){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=TSDemuxer.createTrack("video",P),this._audioTrack=TSDemuxer.createTrack("audio",P),this._id3Track=TSDemuxer.createTrack("id3",P),this._txtTrack=TSDemuxer.createTrack("text",P),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=A,this.videoCodec=j,this._duration=P},TSDemuxer.prototype.resetTimeStamp=function(){},TSDemuxer.prototype.append=function(a,A,j,P){var B,ne,ie,le,he,pe=a.length,ge=!1;this.contiguous=j;var me=this.pmtParsed,ve=this._avcTrack,ye=this._audioTrack,_e=this._id3Track,we=ve.pid,ke=ye.pid,Oe=_e.pid,Se=this._pmtId,Te=ve.pesData,Ae=ye.pesData,je=_e.pesData,Fe=this._parsePAT,Re=this._parsePMT,Me=this._parsePES,Ne=this._parseAVCPES.bind(this),Be=this._parseAACPES.bind(this),Ue=this._parseMPEGPES.bind(this),We=this._parseID3PES.bind(this),Ve=TSDemuxer._syncOffset(a);for(pe-=(pe+Ve)%188,B=Ve;B<pe;B+=188)if(71===a[B]){if(ne=!!(64&a[B+1]),ie=((31&a[B+1])<<8)+a[B+2],(48&a[B+3])>>4>1){if((le=B+5+a[B+4])===B+188)continue}else le=B+4;switch(ie){case we:ne&&(Te&&(he=Me(Te))&&void 0!==he.pts&&Ne(he,!1),Te={data:[],size:0}),Te&&(Te.data.push(a.subarray(le,B+188)),Te.size+=B+188-le);break;case ke:ne&&(Ae&&(he=Me(Ae))&&void 0!==he.pts&&(ye.isAAC?Be(he):Ue(he)),Ae={data:[],size:0}),Ae&&(Ae.data.push(a.subarray(le,B+188)),Ae.size+=B+188-le);break;case Oe:ne&&(je&&(he=Me(je))&&void 0!==he.pts&&We(he),je={data:[],size:0}),je&&(je.data.push(a.subarray(le,B+188)),je.size+=B+188-le);break;case 0:ne&&(le+=a[le]+1),Se=this._pmtId=Fe(a,le);break;case Se:ne&&(le+=a[le]+1);var Ye=Re(a,le,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(we=Ye.avc)>0&&(ve.pid=we),(ke=Ye.audio)>0&&(ye.pid=ke,ye.isAAC=Ye.isAAC),(Oe=Ye.id3)>0&&(_e.pid=Oe),ge&&!me&&(oe.logger.log("reparse from beginning"),ge=!1,B=Ve-188),me=this.pmtParsed=!0;break;case 17:case 8191:break;default:ge=!0}}else this.observer.trigger(q.default.ERROR,{type:se.ErrorTypes.MEDIA_ERROR,details:se.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});Te&&(he=Me(Te))&&void 0!==he.pts?(Ne(he,!0),ve.pesData=null):ve.pesData=Te,Ae&&(he=Me(Ae))&&void 0!==he.pts?(ye.isAAC?Be(he):Ue(he),ye.pesData=null):(Ae&&Ae.size&&oe.logger.log("last AAC PES packet truncated,might overlap between fragments"),ye.pesData=Ae),je&&(he=Me(je))&&void 0!==he.pts?(We(he),_e.pesData=null):_e.pesData=je,null==this.sampleAes?this.remuxer.remux(ye,ve,_e,this._txtTrack,A,j,P):this.decryptAndRemux(ye,ve,_e,this._txtTrack,A,j,P)},TSDemuxer.prototype.decryptAndRemux=function(a,A,j,P,B,q,ne){if(a.samples&&a.isAAC){var ie=this;this.sampleAes.decryptAacSamples(a.samples,0,(function(){ie.decryptAndRemuxAvc(a,A,j,P,B,q,ne)}))}else this.decryptAndRemuxAvc(a,A,j,P,B,q,ne)},TSDemuxer.prototype.decryptAndRemuxAvc=function(a,A,j,P,B,q,ne){if(A.samples){var ie=this;this.sampleAes.decryptAvcSamples(A.samples,0,0,(function(){ie.remuxer.remux(a,A,j,P,B,q,ne)}))}else this.remuxer.remux(a,A,j,P,B,q,ne)},TSDemuxer.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},TSDemuxer.prototype._parsePAT=function(a,A){return(31&a[A+10])<<8|a[A+11]},TSDemuxer.prototype._parsePMT=function(a,A,j,P){var B,q,ne={audio:-1,avc:-1,id3:-1,isAAC:!0};for(B=A+3+((15&a[A+1])<<8|a[A+2])-4,A+=12+((15&a[A+10])<<8|a[A+11]);A<B;){switch(q=(31&a[A+1])<<8|a[A+2],a[A]){case 207:if(!P){oe.logger.log("unkown stream type:"+a[A]);break}case 15:-1===ne.audio&&(ne.audio=q);break;case 21:-1===ne.id3&&(ne.id3=q);break;case 219:if(!P){oe.logger.log("unkown stream type:"+a[A]);break}case 27:-1===ne.avc&&(ne.avc=q);break;case 3:case 4:j?-1===ne.audio&&(ne.audio=q,ne.isAAC=!1):oe.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:oe.logger.warn("HEVC stream type found, not supported for now");break;default:oe.logger.log("unkown stream type:"+a[A])}A+=5+((15&a[A+3])<<8|a[A+4])}return ne},TSDemuxer.prototype._parsePES=function(a){var A,j,P,B,q,ne,ie,se,le=0,he=a.data;if(!a||0===a.size)return null;for(;he[0].length<19&&he.length>1;){var pe=new Uint8Array(he[0].length+he[1].length);pe.set(he[0]),pe.set(he[1],he[0].length),he[0]=pe,he.splice(1,1)}if(1===((A=he[0])[0]<<16)+(A[1]<<8)+A[2]){if((P=(A[4]<<8)+A[5])&&P>a.size-6)return null;192&(j=A[7])&&(ne=536870912*(14&A[9])+4194304*(255&A[10])+16384*(254&A[11])+128*(255&A[12])+(254&A[13])/2,64&j?((ie=536870912*(14&A[14])+4194304*(255&A[15])+16384*(254&A[16])+128*(255&A[17])+(254&A[18])/2)>4294967295&&(ie-=8589934592),ne-ie>54e5&&(oe.logger.warn(Math.round((ne-ie)/9e4)+"s delta between PTS and DTS, align them"),ne=ie)):ie=ne),se=(B=A[8])+9,a.size-=se,q=new Uint8Array(a.size);for(var ge=0,me=he.length;ge<me;ge++){var ve=(A=he[ge]).byteLength;if(se){if(se>ve){se-=ve;continue}A=A.subarray(se),ve-=se,se=0}q.set(A,le),le+=ve}return P&&(P-=B+3),{data:q,pts:ne,dts:ie,len:P}}return null},TSDemuxer.prototype.pushAccesUnit=function(a,A){if(a.units.length&&a.frame){var j=A.samples,P=j.length;!this.config.forceKeyFrameOnDiscontinuity||!0===a.key||A.sps&&(P||this.contiguous)?(a.id=P,j.push(a)):A.dropped++}a.debug.length&&oe.logger.log(a.pts+"/"+a.dts+":"+a.debug)},TSDemuxer.prototype._parseAVCPES=function(a,A){var j,P,B,q=this,ie=this._avcTrack,oe=this._parseAVCNALu(a.data),se=this.avcSample,le=!1,he=this.pushAccesUnit.bind(this),pe=function createAVCSample(a,A,j,P){return{key:a,pts:A,dts:j,units:[],debug:P}};a.data=null,se&&oe.length&&!ie.audFound&&(he(se,ie),se=this.avcSample=pe(!1,a.pts,a.dts,"")),oe.forEach((function(A){switch(A.type){case 1:P=!0,se||(se=q.avcSample=pe(!0,a.pts,a.dts,"")),se.frame=!0;var oe=A.data;if(le&&oe.length>4){var ge=new ne.default(oe).readSliceType();2!==ge&&4!==ge&&7!==ge&&9!==ge||(se.key=!0)}break;case 5:P=!0,se||(se=q.avcSample=pe(!0,a.pts,a.dts,"")),se.key=!0,se.frame=!0;break;case 6:P=!0,(j=new ne.default(q.discardEPB(A.data))).readUByte();for(var me=0,ve=0,ye=!1,_e=0;!ye&&j.bytesAvailable>1;){me=0;do{me+=_e=j.readUByte()}while(255===_e);ve=0;do{ve+=_e=j.readUByte()}while(255===_e);if(4===me&&0!==j.bytesAvailable){if(ye=!0,181===j.readUByte())if(49===j.readUShort())if(1195456820===j.readUInt())if(3===j.readUByte()){var we=j.readUByte(),ke=31&we,Oe=[we,j.readUByte()];for(B=0;B<ke;B++)Oe.push(j.readUByte()),Oe.push(j.readUByte()),Oe.push(j.readUByte());q._insertSampleInOrder(q._txtTrack.samples,{type:3,pts:a.pts,bytes:Oe})}}else if(ve<j.bytesAvailable)for(B=0;B<ve;B++)j.readUByte()}break;case 7:if(P=!0,le=!0,!ie.sps){var Se=(j=new ne.default(A.data)).readSPS();ie.width=Se.width,ie.height=Se.height,ie.pixelRatio=Se.pixelRatio,ie.sps=[A.data],ie.duration=q._duration;var Te=A.data.subarray(1,4),Ae="avc1.";for(B=0;B<3;B++){var je=Te[B].toString(16);je.length<2&&(je="0"+je),Ae+=je}ie.codec=Ae}break;case 8:P=!0,ie.pps||(ie.pps=[A.data]);break;case 9:P=!1,ie.audFound=!0,se&&he(se,ie),se=q.avcSample=pe(!1,a.pts,a.dts,"");break;case 12:P=!1;break;default:P=!1,se&&(se.debug+="unknown NAL "+A.type+" ")}se&&P&&se.units.push(A)})),A&&se&&(he(se,ie),this.avcSample=null)},TSDemuxer.prototype._insertSampleInOrder=function(a,A){var j=a.length;if(j>0){if(A.pts>=a[j-1].pts)a.push(A);else for(var P=j-1;P>=0;P--)if(A.pts<a[P].pts){a.splice(P,0,A);break}}else a.push(A)},TSDemuxer.prototype._getLastNalUnit=function(){var a,A=this.avcSample;if(!A||0===A.units.length){var j=this._avcTrack.samples;A=j[j.length-1]}if(A){var P=A.units;a=P[P.length-1]}return a},TSDemuxer.prototype._parseAVCNALu=function(a){var A,j,P,B,q=0,ne=a.byteLength,ie=this._avcTrack,oe=ie.naluState||0,se=oe,le=[],he=-1;for(-1===oe&&(he=0,B=31&a[0],oe=0,q=1);q<ne;)if(A=a[q++],oe)if(1!==oe)if(A)if(1===A){var pe,ge;if(he>=0)P={data:a.subarray(he,q-oe-1),type:B},le.push(P);else if(pe=this._getLastNalUnit())if(se&&q<=4-se&&pe.state&&(pe.data=pe.data.subarray(0,pe.data.byteLength-se)),(j=q-oe-1)>0)(ge=new Uint8Array(pe.data.byteLength+j)).set(pe.data,0),ge.set(a.subarray(0,j),pe.data.byteLength),pe.data=ge;q<ne?(he=q,B=31&a[q],oe=0):oe=-1}else oe=0;else oe=3;else oe=A?0:2;else oe=A?0:1;(he>=0&&oe>=0&&(P={data:a.subarray(he,ne),type:B,state:oe},le.push(P)),0===le.length)&&((pe=this._getLastNalUnit())&&((ge=new Uint8Array(pe.data.byteLength+a.byteLength)).set(pe.data,0),ge.set(a,pe.data.byteLength),pe.data=ge));return ie.naluState=oe,le},TSDemuxer.prototype.discardEPB=function(a){for(var A,j,P=a.byteLength,B=[],q=1;q<P-2;)0===a[q]&&0===a[q+1]&&3===a[q+2]?(B.push(q+2),q+=2):q++;if(0===B.length)return a;A=P-B.length,j=new Uint8Array(A);var ne=0;for(q=0;q<A;ne++,q++)ne===B[0]&&(ne++,B.shift()),j[q]=a[ne];return j},TSDemuxer.prototype._parseAACPES=function(a){var A,j,B,ne,ie,le=this._audioTrack,he=a.data,pe=a.pts,ge=this.aacOverFlow,me=this.aacLastPTS;if(ge){var ve=new Uint8Array(ge.byteLength+he.byteLength);ve.set(ge,0),ve.set(he,ge.byteLength),he=ve}for(B=0,ie=he.length;B<ie-1&&!P.isHeader(he,B);B++);if(B){var ye=void 0,_e=void 0;if(B<ie-1?(ye="AAC PES did not start with ADTS header,offset:"+B,_e=!1):(ye="no ADTS header found in AAC PES",_e=!0),oe.logger.warn("parsing error:"+ye),this.observer.trigger(q.default.ERROR,{type:se.ErrorTypes.MEDIA_ERROR,details:se.ErrorDetails.FRAG_PARSING_ERROR,fatal:_e,reason:ye}),_e)return}if(P.initTrackConfig(le,this.observer,he,B,this.audioCodec),j=0,A=P.getFrameDuration(le.samplerate),ge&&me){var we=me+A;Math.abs(we-pe)>1&&(oe.logger.log("AAC: align PTS for overlapping frames by "+Math.round((we-pe)/90)),pe=we)}for(;B<ie;)if(P.isHeader(he,B)&&B+5<ie){var ke=P.appendFrame(le,he,B,pe,j);if(!ke)break;B+=ke.length,ne=ke.sample.pts,j++}else B++;ge=B<ie?he.subarray(B,ie):null,this.aacOverFlow=ge,this.aacLastPTS=ne},TSDemuxer.prototype._parseMPEGPES=function(a){for(var A=a.data,j=A.length,P=0,q=0,ne=a.pts;q<j;)if(B.default.isHeader(A,q)){var ie=B.default.appendFrame(this._audioTrack,A,q,ne,P);if(!ie)break;q+=ie.length,P++}else q++},TSDemuxer.prototype._parseID3PES=function(a){this._id3Track.samples.push(a)},TSDemuxer}();A.default=he},"./src/errors.js":function srcErrorsJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},A.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/event-handler.js":function srcEventHandlerJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/logger.js"),B=j("./src/errors.js"),q=j("./src/events.js"),ne={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},ie=function(){function EventHandler(a){for(var A=[],j=1;j<arguments.length;j++)A[j-1]=arguments[j];this.hls=a,this.onEvent=this.onEvent.bind(this),this.handledEvents=A,this.useGenericHandler=!0,this.registerListeners()}return EventHandler.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},EventHandler.prototype.onHandlerDestroying=function(){},EventHandler.prototype.onHandlerDestroyed=function(){},EventHandler.prototype.isEventHandler=function(){return"object"===typeof this.handledEvents&&this.handledEvents.length&&"function"===typeof this.onEvent},EventHandler.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(a){if(ne[a])throw new Error("Forbidden event-name: "+a);this.hls.on(a,this.onEvent)}),this)},EventHandler.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(a){this.hls.off(a,this.onEvent)}),this)},EventHandler.prototype.onEvent=function(a,A){this.onEventGeneric(a,A)},EventHandler.prototype.onEventGeneric=function(a,A){try{(function eventToFunction(a,A){var j="on"+a.replace("hls","");if("function"!==typeof this[j])throw new Error("Event "+a+" has no generic handler in this "+this.constructor.name+" class (tried "+j+")");return this[j].bind(this,A)}).call(this,a,A).call()}catch(j){P.logger.error("An internal error happened while handling event "+a+'. Error message: "'+j.message+'". Here is a stacktrace:',j),this.hls.trigger(q.default.ERROR,{type:B.ErrorTypes.OTHER_ERROR,details:B.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:a,err:j})}},EventHandler}();A.default=ie},"./src/events.js":function srcEventsJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},"./src/hls.js":function srcHlsJs(a,A,j){"use strict";var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./node_modules/url-toolkit/src/url-toolkit.js"),q=j("./src/errors.js"),ne=j("./src/loader/playlist-loader.js"),ie=j("./src/loader/fragment-loader.js"),oe=j("./src/loader/key-loader.js"),se=j("./src/controller/fragment-tracker.js"),le=j("./src/controller/stream-controller.js"),he=j("./src/controller/level-controller.js"),pe=j("./src/controller/id3-track-controller.js"),ge=j("./src/is-supported.js"),me=j("./src/utils/logger.js"),ve=j("./src/config.js"),ye=j("./src/events.js"),_e=function(a){function Hls(A){void 0===A&&(A={});var j=a.call(this)||this,P=Hls.DefaultConfig;if((A.liveSyncDurationCount||A.liveMaxLatencyDurationCount)&&(A.liveSyncDuration||A.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var B in P)B in A||(A[B]=P[B]);if(void 0!==A.liveMaxLatencyDurationCount&&A.liveMaxLatencyDurationCount<=A.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==A.liveMaxLatencyDuration&&(A.liveMaxLatencyDuration<=A.liveSyncDuration||void 0===A.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');me.enableLogs(A.debug),j.config=A,j._autoLevelCapping=-1;var q=j.abrController=new A.abrController(j),ge=new A.bufferController(j),ve=new A.capLevelController(j),ye=new A.fpsController(j),_e=new ne.default(j),we=new ie.default(j),ke=new oe.default(j),Oe=new pe.default(j),Se=j.levelController=new he.default(j),Te=new se.FragmentTracker(j),Ae=[Se,j.streamController=new le.default(j,Te)],je=A.audioStreamController;je&&Ae.push(new je(j,Te)),j.networkControllers=Ae;var Fe=[_e,we,ke,q,ge,ve,ye,Oe,Te];if(je=A.audioTrackController){var Re=new je(j);j.audioTrackController=Re,Fe.push(Re)}if(je=A.subtitleTrackController){var Me=new je(j);j.subtitleTrackController=Me,Ae.push(Me)}if(je=A.emeController){var Ne=new je(j);j.emeController=Ne,Fe.push(Ne)}return(je=A.subtitleStreamController)&&Ae.push(new je(j,Te)),(je=A.timelineController)&&Fe.push(new je(j)),j.coreComponents=Fe,j}return P(Hls,a),Object.defineProperty(Hls,"version",{get:function get(){return"0.12.6"},enumerable:!0,configurable:!0}),Hls.isSupported=function(){return ge.isSupported()},Object.defineProperty(Hls,"Events",{get:function get(){return ye.default},enumerable:!0,configurable:!0}),Object.defineProperty(Hls,"ErrorTypes",{get:function get(){return q.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(Hls,"ErrorDetails",{get:function get(){return q.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(Hls,"DefaultConfig",{get:function get(){return Hls.defaultConfig?Hls.defaultConfig:ve.hlsDefaultConfig},set:function set(a){Hls.defaultConfig=a},enumerable:!0,configurable:!0}),Hls.prototype.destroy=function(){me.logger.log("destroy"),this.trigger(ye.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(a){a.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},Hls.prototype.attachMedia=function(a){me.logger.log("attachMedia"),this.media=a,this.trigger(ye.default.MEDIA_ATTACHING,{media:a})},Hls.prototype.detachMedia=function(){me.logger.log("detachMedia"),this.trigger(ye.default.MEDIA_DETACHING),this.media=null},Hls.prototype.loadSource=function(a){a=B.buildAbsoluteURL(window.location.href,a,{alwaysNormalize:!0}),me.logger.log("loadSource:"+a),this.url=a,this.trigger(ye.default.MANIFEST_LOADING,{url:a})},Hls.prototype.startLoad=function(a){void 0===a&&(a=-1),me.logger.log("startLoad("+a+")"),this.networkControllers.forEach((function(A){A.startLoad(a)}))},Hls.prototype.stopLoad=function(){me.logger.log("stopLoad"),this.networkControllers.forEach((function(a){a.stopLoad()}))},Hls.prototype.swapAudioCodec=function(){me.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},Hls.prototype.recoverMediaError=function(){me.logger.log("recoverMediaError");var a=this.media;this.detachMedia(),this.attachMedia(a)},Object.defineProperty(Hls.prototype,"levels",{get:function get(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"currentLevel",{get:function get(){return this.streamController.currentLevel},set:function set(a){me.logger.log("set currentLevel:"+a),this.loadLevel=a,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"nextLevel",{get:function get(){return this.streamController.nextLevel},set:function set(a){me.logger.log("set nextLevel:"+a),this.levelController.manualLevel=a,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"loadLevel",{get:function get(){return this.levelController.level},set:function set(a){me.logger.log("set loadLevel:"+a),this.levelController.manualLevel=a},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"nextLoadLevel",{get:function get(){return this.levelController.nextLoadLevel},set:function set(a){this.levelController.nextLoadLevel=a},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"firstLevel",{get:function get(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function set(a){me.logger.log("set firstLevel:"+a),this.levelController.firstLevel=a},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"startLevel",{get:function get(){return this.levelController.startLevel},set:function set(a){me.logger.log("set startLevel:"+a);-1!==a&&(a=Math.max(a,this.minAutoLevel)),this.levelController.startLevel=a},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"autoLevelCapping",{get:function get(){return this._autoLevelCapping},set:function set(a){me.logger.log("set autoLevelCapping:"+a),this._autoLevelCapping=a},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"autoLevelEnabled",{get:function get(){return-1===this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"manualLevel",{get:function get(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"minAutoLevel",{get:function get(){for(var a=this.levels,A=this.config.minAutoBitrate,j=a?a.length:0,P=0;P<j;P++){if((a[P].realBitrate?Math.max(a[P].realBitrate,a[P].bitrate):a[P].bitrate)>A)return P}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"maxAutoLevel",{get:function get(){var a=this.levels,A=this.autoLevelCapping;return-1===A&&a&&a.length?a.length-1:A},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"nextAutoLevel",{get:function get(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function set(a){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,a)},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"audioTracks",{get:function get(){var a=this.audioTrackController;return a?a.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"audioTrack",{get:function get(){var a=this.audioTrackController;return a?a.audioTrack:-1},set:function set(a){var A=this.audioTrackController;A&&(A.audioTrack=a)},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"liveSyncPosition",{get:function get(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"subtitleTracks",{get:function get(){var a=this.subtitleTrackController;return a?a.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"subtitleTrack",{get:function get(){var a=this.subtitleTrackController;return a?a.subtitleTrack:-1},set:function set(a){var A=this.subtitleTrackController;A&&(A.subtitleTrack=a)},enumerable:!0,configurable:!0}),Object.defineProperty(Hls.prototype,"subtitleDisplay",{get:function get(){var a=this.subtitleTrackController;return!!a&&a.subtitleDisplay},set:function set(a){var A=this.subtitleTrackController;A&&(A.subtitleDisplay=a)},enumerable:!0,configurable:!0}),Hls}(j("./src/observer.js").Observer);A.default=_e},"./src/is-supported.js":function srcIsSupportedJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/mediasource-helper.js");A.isSupported=function isSupported(){var a=P.getMediaSource(),A=window.SourceBuffer||window.WebKitSourceBuffer,j=a&&"function"===typeof a.isTypeSupported&&a.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),B=!A||A.prototype&&"function"===typeof A.prototype.appendBuffer&&"function"===typeof A.prototype.remove;return!!j&&!!B}},"./src/loader/fragment-loader.js":function srcLoaderFragmentLoaderJs(a,A,j){"use strict";(function(a){var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/events.js"),q=j("./src/event-handler.js"),ne=j("./src/errors.js"),ie=j("./src/utils/logger.js"),oe=function(A){function FragmentLoader(a){var j=A.call(this,a,B.default.FRAG_LOADING)||this;return j.loaders={},j}return P(FragmentLoader,A),FragmentLoader.prototype.destroy=function(){var a=this.loaders;for(var j in a){var P=a[j];P&&P.destroy()}this.loaders={},A.prototype.destroy.call(this)},FragmentLoader.prototype.onFragLoading=function(A){var j=A.frag,P=j.type,B=this.loaders,q=this.hls.config,ne=q.fLoader,oe=q.loader;j.loaded=0;var se,le,he,pe=B[P];pe&&(ie.logger.warn("abort previous fragment loader for type: "+P),pe.abort()),pe=B[P]=j.loader=q.fLoader?new ne(q):new oe(q),se={url:j.url,frag:j,responseType:"arraybuffer",progressData:!1};var ge=j.byteRangeStartOffset,me=j.byteRangeEndOffset;a.isFinite(ge)&&a.isFinite(me)&&(se.rangeStart=ge,se.rangeEnd=me),le={timeout:q.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:q.fragLoadingMaxRetryTimeout},he={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},pe.load(se,le,he)},FragmentLoader.prototype.loadsuccess=function(a,A,j,P){void 0===P&&(P=null);var q=a.data,ne=j.frag;ne.loader=void 0,this.loaders[ne.type]=void 0,this.hls.trigger(B.default.FRAG_LOADED,{payload:q,frag:ne,stats:A,networkDetails:P})},FragmentLoader.prototype.loaderror=function(a,A,j){void 0===j&&(j=null);var P=A.frag,q=P.loader;q&&q.abort(),this.loaders[P.type]=void 0,this.hls.trigger(B.default.ERROR,{type:ne.ErrorTypes.NETWORK_ERROR,details:ne.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:A.frag,response:a,networkDetails:j})},FragmentLoader.prototype.loadtimeout=function(a,A,j){void 0===j&&(j=null);var P=A.frag,q=P.loader;q&&q.abort(),this.loaders[P.type]=void 0,this.hls.trigger(B.default.ERROR,{type:ne.ErrorTypes.NETWORK_ERROR,details:ne.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:A.frag,networkDetails:j})},FragmentLoader.prototype.loadprogress=function(a,A,j,P){void 0===P&&(P=null);var q=A.frag;q.loaded=a.loaded,this.hls.trigger(B.default.FRAG_LOAD_PROGRESS,{frag:q,stats:a,networkDetails:P})},FragmentLoader}(q.default);A.default=oe}).call(this,j("./src/polyfills/number.js").Number)},"./src/loader/fragment.js":function srcLoaderFragmentJs(a,A,j){"use strict";(function(a){Object.defineProperty(A,"__esModule",{value:!0});var P=j("./node_modules/url-toolkit/src/url-toolkit.js"),B=j("./src/loader/level-key.js"),q=function(){function Fragment(){var a;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=((a={})[Fragment.ElementaryStreamTypes.AUDIO]=!1,a[Fragment.ElementaryStreamTypes.VIDEO]=!1,a)}return Object.defineProperty(Fragment,"ElementaryStreamTypes",{get:function get(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(Fragment.prototype,"url",{get:function get(){return!this._url&&this.relurl&&(this._url=P.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function set(a){this._url=a},enumerable:!0,configurable:!0}),Object.defineProperty(Fragment.prototype,"byteRange",{get:function get(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var a=[];if(this.rawByteRange){var A=this.rawByteRange.split("@",2);if(1===A.length){var j=this.lastByteRangeEndOffset;a[0]=j||0}else a[0]=parseInt(A[1]);a[1]=parseInt(A[0])+a[0],this._byteRange=a}return a},enumerable:!0,configurable:!0}),Object.defineProperty(Fragment.prototype,"byteRangeStartOffset",{get:function get(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(Fragment.prototype,"byteRangeEndOffset",{get:function get(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(Fragment.prototype,"decryptdata",{get:function get(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(Fragment.prototype,"endProgramDateTime",{get:function get(){if(!a.isFinite(this.programDateTime))return null;var A=a.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*A},enumerable:!0,configurable:!0}),Object.defineProperty(Fragment.prototype,"encrypted",{get:function get(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),Fragment.prototype.addElementaryStream=function(a){this._elementaryStreams[a]=!0},Fragment.prototype.hasElementaryStream=function(a){return!0===this._elementaryStreams[a]},Fragment.prototype.createInitializationVector=function(a){for(var A=new Uint8Array(16),j=12;j<16;j++)A[j]=a>>8*(15-j)&255;return A},Fragment.prototype.fragmentDecryptdataFromLevelkey=function(a,A){var j=a;return a&&a.method&&a.uri&&!a.iv&&((j=new B.default).method=a.method,j.baseuri=a.baseuri,j.reluri=a.reluri,j.iv=this.createInitializationVector(A)),j},Fragment}();A.default=q}).call(this,j("./src/polyfills/number.js").Number)},"./src/loader/key-loader.js":function srcLoaderKeyLoaderJs(a,A,j){"use strict";var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/events.js"),q=j("./src/event-handler.js"),ne=j("./src/errors.js"),ie=j("./src/utils/logger.js"),oe=function(a){function KeyLoader(A){var j=a.call(this,A,B.default.KEY_LOADING)||this;return j.loaders={},j.decryptkey=null,j.decrypturl=null,j}return P(KeyLoader,a),KeyLoader.prototype.destroy=function(){for(var a in this.loaders){var A=this.loaders[a];A&&A.destroy()}this.loaders={},q.default.prototype.destroy.call(this)},KeyLoader.prototype.onKeyLoading=function(a){var A=a.frag,j=A.type,P=this.loaders[j],q=A.decryptdata,ne=q.uri;if(ne!==this.decrypturl||null===this.decryptkey){var oe=this.hls.config;P&&(ie.logger.warn("abort previous key loader for type:"+j),P.abort()),A.loader=this.loaders[j]=new oe.loader(oe),this.decrypturl=ne,this.decryptkey=null;var se,le,he;se={url:ne,frag:A,responseType:"arraybuffer"},le={timeout:oe.fragLoadingTimeOut,maxRetry:0,retryDelay:oe.fragLoadingRetryDelay,maxRetryDelay:oe.fragLoadingMaxRetryTimeout},he={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},A.loader.load(se,le,he)}else this.decryptkey&&(q.key=this.decryptkey,this.hls.trigger(B.default.KEY_LOADED,{frag:A}))},KeyLoader.prototype.loadsuccess=function(a,A,j){var P=j.frag;this.decryptkey=P.decryptdata.key=new Uint8Array(a.data),P.loader=void 0,this.loaders[P.type]=void 0,this.hls.trigger(B.default.KEY_LOADED,{frag:P})},KeyLoader.prototype.loaderror=function(a,A){var j=A.frag,P=j.loader;P&&P.abort(),this.loaders[A.type]=void 0,this.hls.trigger(B.default.ERROR,{type:ne.ErrorTypes.NETWORK_ERROR,details:ne.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:j,response:a})},KeyLoader.prototype.loadtimeout=function(a,A){var j=A.frag,P=j.loader;P&&P.abort(),this.loaders[A.type]=void 0,this.hls.trigger(B.default.ERROR,{type:ne.ErrorTypes.NETWORK_ERROR,details:ne.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:j})},KeyLoader}(q.default);A.default=oe},"./src/loader/level-key.js":function srcLoaderLevelKeyJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./node_modules/url-toolkit/src/url-toolkit.js"),B=function(){function LevelKey(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(LevelKey.prototype,"uri",{get:function get(){return!this._uri&&this.reluri&&(this._uri=P.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),LevelKey}();A.default=B},"./src/loader/level.js":function srcLoaderLevelJs(a,A,j){"use strict";(function(a){Object.defineProperty(A,"__esModule",{value:!0});var j=function(){function Level(a){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=a,this.version=null}return Object.defineProperty(Level.prototype,"hasProgramDateTime",{get:function get(){return!(!this.fragments[0]||!a.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),Level}();A.default=j}).call(this,j("./src/polyfills/number.js").Number)},"./src/loader/m3u8-parser.js":function srcLoaderM3u8ParserJs(a,A,j){"use strict";(function(a){Object.defineProperty(A,"__esModule",{value:!0});var P=j("./node_modules/url-toolkit/src/url-toolkit.js"),B=j("./src/loader/fragment.js"),q=j("./src/loader/level.js"),ne=j("./src/loader/level-key.js"),ie=j("./src/utils/attr-list.js"),oe=j("./src/utils/logger.js"),se=j("./src/utils/codecs.js"),le=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,he=/#EXT-X-MEDIA:(.*)/g,pe=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),ge=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,me=/\.(mp4|m4s|m4v|m4a)$/i,ve=function(){function M3U8Parser(){}return M3U8Parser.findGroup=function(a,A){if(!a)return null;for(var j=null,P=0;P<a.length;P++){var B=a[P];B.id===A&&(j=B)}return j},M3U8Parser.convertAVC1ToAVCOTI=function(a){var A,j=a.split(".");return j.length>2?(A=j.shift()+".",A+=parseInt(j.shift()).toString(16),A+=("000"+parseInt(j.shift()).toString(16)).substr(-4)):A=a,A},M3U8Parser.resolve=function(a,A){return P.buildAbsoluteURL(A,a,{alwaysNormalize:!0})},M3U8Parser.parseMasterPlaylist=function(a,A){var j,P=[];function setCodecs(a,A){["video","audio"].forEach((function(j){var P=a.filter((function(a){return se.isCodecType(a,j)}));if(P.length){var B=P.filter((function(a){return 0===a.lastIndexOf("avc1",0)||0===a.lastIndexOf("mp4a",0)}));A[j+"Codec"]=B.length>0?B[0]:P[0],a=a.filter((function(a){return-1===P.indexOf(a)}))}})),A.unknownCodecs=a}for(le.lastIndex=0;null!=(j=le.exec(a));){var B={},q=B.attrs=new ie.default(j[1]);B.url=M3U8Parser.resolve(j[2],A);var ne=q.decimalResolution("RESOLUTION");ne&&(B.width=ne.width,B.height=ne.height),B.bitrate=q.decimalInteger("AVERAGE-BANDWIDTH")||q.decimalInteger("BANDWIDTH"),B.name=q.NAME,setCodecs([].concat((q.CODECS||"").split(/[ ,]+/)),B),B.videoCodec&&-1!==B.videoCodec.indexOf("avc1")&&(B.videoCodec=M3U8Parser.convertAVC1ToAVCOTI(B.videoCodec)),P.push(B)}return P},M3U8Parser.parseMasterPlaylistMedia=function(a,A,j,P){var B;void 0===P&&(P=[]);var q=[],ne=0;for(he.lastIndex=0;null!==(B=he.exec(a));){var oe={},se=new ie.default(B[1]);if(se.TYPE===j){if(oe.groupId=se["GROUP-ID"],oe.name=se.NAME,oe.type=j,oe.default="YES"===se.DEFAULT,oe.autoselect="YES"===se.AUTOSELECT,oe.forced="YES"===se.FORCED,se.URI&&(oe.url=M3U8Parser.resolve(se.URI,A)),oe.lang=se.LANGUAGE,oe.name||(oe.name=oe.lang),P.length){var le=M3U8Parser.findGroup(P,oe.groupId);oe.audioCodec=le?le.codec:P[0].codec}oe.id=ne++,q.push(oe)}}return q},M3U8Parser.parseLevelPlaylist=function(A,j,P,se,le){var he,ve,ye=0,_e=0,we=new q.default(j),ke=new ne.default,Oe=0,Se=null,Te=new B.default,Ae=null;for(pe.lastIndex=0;null!==(he=pe.exec(A));){var je=he[1];if(je){Te.duration=parseFloat(je);var Fe=(" "+he[2]).slice(1);Te.title=Fe||null,Te.tagList.push(Fe?["INF",je,Fe]:["INF",je])}else if(he[3]){if(a.isFinite(Te.duration)){var Re=ye++;Te.type=se,Te.start=_e,Te.levelkey=ke,Te.sn=Re,Te.level=P,Te.cc=Oe,Te.urlId=le,Te.baseurl=j,Te.relurl=(" "+he[3]).slice(1),assignProgramDateTime(Te,Se),we.fragments.push(Te),Se=Te,_e+=Te.duration,Te=new B.default}}else if(he[4]){if(Te.rawByteRange=(" "+he[4]).slice(1),Se){var Me=Se.byteRangeEndOffset;Me&&(Te.lastByteRangeEndOffset=Me)}}else if(he[5])Te.rawProgramDateTime=(" "+he[5]).slice(1),Te.tagList.push(["PROGRAM-DATE-TIME",Te.rawProgramDateTime]),null===Ae&&(Ae=we.fragments.length);else{for(he=he[0].match(ge),ve=1;ve<he.length&&void 0===he[ve];ve++);var Ne=(" "+he[ve+1]).slice(1),Be=(" "+he[ve+2]).slice(1);switch(he[ve]){case"#":Te.tagList.push(Be?[Ne,Be]:[Ne]);break;case"PLAYLIST-TYPE":we.type=Ne.toUpperCase();break;case"MEDIA-SEQUENCE":ye=we.startSN=parseInt(Ne);break;case"TARGETDURATION":we.targetduration=parseFloat(Ne);break;case"VERSION":we.version=parseInt(Ne);break;case"EXTM3U":break;case"ENDLIST":we.live=!1;break;case"DIS":Oe++,Te.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":Oe=parseInt(Ne);break;case"KEY":var Ue=Ne,We=new ie.default(Ue),Ve=We.enumeratedString("METHOD"),Ye=We.URI,$e=We.hexadecimalInteger("IV");Ve&&(ke=new ne.default,Ye&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(Ve)>=0&&(ke.method=Ve,ke.baseuri=j,ke.reluri=Ye,ke.key=null,ke.iv=$e));break;case"START":var Xe=Ne,et=new ie.default(Xe).decimalFloatingPoint("TIME-OFFSET");a.isFinite(et)&&(we.startTimeOffset=et);break;case"MAP":var tt=new ie.default(Ne);Te.relurl=tt.URI,Te.rawByteRange=tt.BYTERANGE,Te.baseurl=j,Te.level=P,Te.type=se,Te.sn="initSegment",we.initSegment=Te,(Te=new B.default).rawProgramDateTime=we.initSegment.rawProgramDateTime;break;default:oe.logger.warn("line parsed but not handled: "+he)}}}return(Te=Se)&&!Te.relurl&&(we.fragments.pop(),_e-=Te.duration),we.totalduration=_e,we.averagetargetduration=_e/we.fragments.length,we.endSN=ye-1,we.startCC=we.fragments[0]?we.fragments[0].cc:0,we.endCC=Oe,!we.initSegment&&we.fragments.length&&we.fragments.every((function(a){return me.test(a.relurl)}))&&(oe.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(Te=new B.default).relurl=we.fragments[0].relurl,Te.baseurl=j,Te.level=P,Te.type=se,Te.sn="initSegment",we.initSegment=Te,we.needSidxRanges=!0),Ae&&function backfillProgramDateTimes(a,A){for(var j=a[A],P=A-1;P>=0;P--){var B=a[P];B.programDateTime=j.programDateTime-1e3*B.duration,j=B}}(we.fragments,Ae),we},M3U8Parser}();function assignProgramDateTime(A,j){A.rawProgramDateTime?A.programDateTime=Date.parse(A.rawProgramDateTime):j&&j.programDateTime&&(A.programDateTime=j.endProgramDateTime),a.isFinite(A.programDateTime)||(A.programDateTime=null,A.rawProgramDateTime=null)}A.default=ve}).call(this,j("./src/polyfills/number.js").Number)},"./src/loader/playlist-loader.js":function srcLoaderPlaylistLoaderJs(a,A,j){"use strict";(function(a){var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=j("./src/events.js"),q=j("./src/event-handler.js"),ne=j("./src/errors.js"),ie=j("./src/utils/logger.js"),oe=j("./src/demux/mp4demuxer.js"),se=j("./src/loader/m3u8-parser.js"),le=window.performance,he={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},pe={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},ge=function(A){function PlaylistLoader(a){var j=A.call(this,a,B.default.MANIFEST_LOADING,B.default.LEVEL_LOADING,B.default.AUDIO_TRACK_LOADING,B.default.SUBTITLE_TRACK_LOADING)||this;return j.loaders={},j}return P(PlaylistLoader,A),Object.defineProperty(PlaylistLoader,"ContextType",{get:function get(){return he},enumerable:!0,configurable:!0}),Object.defineProperty(PlaylistLoader,"LevelType",{get:function get(){return pe},enumerable:!0,configurable:!0}),PlaylistLoader.canHaveQualityLevels=function(a){return a!==he.AUDIO_TRACK&&a!==he.SUBTITLE_TRACK},PlaylistLoader.mapContextToLevelType=function(a){switch(a.type){case he.AUDIO_TRACK:return pe.AUDIO;case he.SUBTITLE_TRACK:return pe.SUBTITLE;default:return pe.MAIN}},PlaylistLoader.getResponseUrl=function(a,A){var j=a.url;return void 0!==j&&0!==j.indexOf("data:")||(j=A.url),j},PlaylistLoader.prototype.createInternalLoader=function(a){var A=this.hls.config,j=A.pLoader,P=A.loader,B=new(j||P)(A);return a.loader=B,this.loaders[a.type]=B,B},PlaylistLoader.prototype.getInternalLoader=function(a){return this.loaders[a.type]},PlaylistLoader.prototype.resetInternalLoader=function(a){this.loaders[a]&&delete this.loaders[a]},PlaylistLoader.prototype.destroyInternalLoaders=function(){for(var a in this.loaders){var A=this.loaders[a];A&&A.destroy(),this.resetInternalLoader(a)}},PlaylistLoader.prototype.destroy=function(){this.destroyInternalLoaders(),A.prototype.destroy.call(this)},PlaylistLoader.prototype.onManifestLoading=function(a){this.load(a.url,{type:he.MANIFEST,level:0,id:null})},PlaylistLoader.prototype.onLevelLoading=function(a){this.load(a.url,{type:he.LEVEL,level:a.level,id:a.id})},PlaylistLoader.prototype.onAudioTrackLoading=function(a){this.load(a.url,{type:he.AUDIO_TRACK,level:null,id:a.id})},PlaylistLoader.prototype.onSubtitleTrackLoading=function(a){this.load(a.url,{type:he.SUBTITLE_TRACK,level:null,id:a.id})},PlaylistLoader.prototype.load=function(a,A){var j=this.hls.config;ie.logger.debug("Loading playlist of type "+A.type+", level: "+A.level+", id: "+A.id);var P,B,q,ne,oe=this.getInternalLoader(A);if(oe){var se=oe.context;if(se&&se.url===a)return ie.logger.trace("playlist request ongoing"),!1;ie.logger.warn("aborting previous loader for type: "+A.type),oe.abort()}switch(A.type){case he.MANIFEST:P=j.manifestLoadingMaxRetry,B=j.manifestLoadingTimeOut,q=j.manifestLoadingRetryDelay,ne=j.manifestLoadingMaxRetryTimeout;break;case he.LEVEL:P=0,B=j.levelLoadingTimeOut;break;default:P=j.levelLoadingMaxRetry,B=j.levelLoadingTimeOut,q=j.levelLoadingRetryDelay,ne=j.levelLoadingMaxRetryTimeout}oe=this.createInternalLoader(A),A.url=a,A.responseType=A.responseType||"";var le={timeout:B,maxRetry:P,retryDelay:q,maxRetryDelay:ne},pe={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return ie.logger.debug("Calling internal loader delegate for URL: "+a),oe.load(A,le,pe),!0},PlaylistLoader.prototype.loadsuccess=function(a,A,j,P){if(void 0===P&&(P=null),j.isSidxRequest)return this._handleSidxRequest(a,j),void this._handlePlaylistLoaded(a,A,j,P);this.resetInternalLoader(j.type);var B=a.data;A.tload=le.now(),0===B.indexOf("#EXTM3U")?B.indexOf("#EXTINF:")>0||B.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(a,A,j,P):this._handleMasterPlaylist(a,A,j,P):this._handleManifestParsingError(a,j,"no EXTM3U delimiter",P)},PlaylistLoader.prototype.loaderror=function(a,A,j){void 0===j&&(j=null),this._handleNetworkError(A,j,!1,a)},PlaylistLoader.prototype.loadtimeout=function(a,A,j){void 0===j&&(j=null),this._handleNetworkError(A,j,!0)},PlaylistLoader.prototype._handleMasterPlaylist=function(a,A,j,P){var q=this.hls,ne=a.data,oe=PlaylistLoader.getResponseUrl(a,j),le=se.default.parseMasterPlaylist(ne,oe);if(le.length){var he=le.map((function(a){return{id:a.attrs.AUDIO,codec:a.audioCodec}})),pe=se.default.parseMasterPlaylistMedia(ne,oe,"AUDIO",he),ge=se.default.parseMasterPlaylistMedia(ne,oe,"SUBTITLES");if(pe.length){var me=!1;pe.forEach((function(a){a.url||(me=!0)})),!1===me&&le[0].audioCodec&&!le[0].attrs.AUDIO&&(ie.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),pe.unshift({type:"main",name:"main"}))}q.trigger(B.default.MANIFEST_LOADED,{levels:le,audioTracks:pe,subtitles:ge,url:oe,stats:A,networkDetails:P})}else this._handleManifestParsingError(a,j,"no level found in manifest",P)},PlaylistLoader.prototype._handleTrackOrLevelPlaylist=function(A,j,P,q){var ne=this.hls,ie=P.id,oe=P.level,pe=P.type,ge=PlaylistLoader.getResponseUrl(A,P),me=a.isFinite(ie)?ie:0,ve=a.isFinite(oe)?oe:me,ye=PlaylistLoader.mapContextToLevelType(P),_e=se.default.parseLevelPlaylist(A.data,ge,ve,ye,me);if(_e.tload=j.tload,pe===he.MANIFEST){var we={url:ge,details:_e};ne.trigger(B.default.MANIFEST_LOADED,{levels:[we],audioTracks:[],url:ge,stats:j,networkDetails:q})}if(j.tparsed=le.now(),_e.needSidxRanges){var ke=_e.initSegment.url;this.load(ke,{isSidxRequest:!0,type:pe,level:oe,levelDetails:_e,id:ie,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else P.levelDetails=_e,this._handlePlaylistLoaded(A,j,P,q)},PlaylistLoader.prototype._handleSidxRequest=function(a,A){var j=oe.default.parseSegmentIndex(new Uint8Array(a.data));if(j){var P=j.references,B=A.levelDetails;P.forEach((function(a,A){var j=a.info,P=B.fragments[A];0===P.byteRange.length&&(P.rawByteRange=String(1+j.end-j.start)+"@"+String(j.start))})),B.initSegment.rawByteRange=String(j.moovEndOffset)+"@0"}},PlaylistLoader.prototype._handleManifestParsingError=function(a,A,j,P){this.hls.trigger(B.default.ERROR,{type:ne.ErrorTypes.NETWORK_ERROR,details:ne.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a.url,reason:j,networkDetails:P})},PlaylistLoader.prototype._handleNetworkError=function(a,A,j,P){var q,oe;void 0===j&&(j=!1),void 0===P&&(P=null),ie.logger.info("A network error occured while loading a "+a.type+"-type playlist");var se=this.getInternalLoader(a);switch(a.type){case he.MANIFEST:q=j?ne.ErrorDetails.MANIFEST_LOAD_TIMEOUT:ne.ErrorDetails.MANIFEST_LOAD_ERROR,oe=!0;break;case he.LEVEL:q=j?ne.ErrorDetails.LEVEL_LOAD_TIMEOUT:ne.ErrorDetails.LEVEL_LOAD_ERROR,oe=!1;break;case he.AUDIO_TRACK:q=j?ne.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:ne.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,oe=!1;break;default:oe=!1}se&&(se.abort(),this.resetInternalLoader(a.type));var le={type:ne.ErrorTypes.NETWORK_ERROR,details:q,fatal:oe,url:se.url,loader:se,context:a,networkDetails:A};P&&(le.response=P),this.hls.trigger(B.default.ERROR,le)},PlaylistLoader.prototype._handlePlaylistLoaded=function(a,A,j,P){var q=j.type,ne=j.level,ie=j.id,oe=j.levelDetails;if(oe.targetduration)if(PlaylistLoader.canHaveQualityLevels(j.type))this.hls.trigger(B.default.LEVEL_LOADED,{details:oe,level:ne||0,id:ie||0,stats:A,networkDetails:P});else switch(q){case he.AUDIO_TRACK:this.hls.trigger(B.default.AUDIO_TRACK_LOADED,{details:oe,id:ie,stats:A,networkDetails:P});break;case he.SUBTITLE_TRACK:this.hls.trigger(B.default.SUBTITLE_TRACK_LOADED,{details:oe,id:ie,stats:A,networkDetails:P})}else this._handleManifestParsingError(a,j,"invalid target duration",P)},PlaylistLoader}(q.default);A.default=ge}).call(this,j("./src/polyfills/number.js").Number)},"./src/observer.js":function srcObserverJs(a,A,j){"use strict";var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=function(a){function Observer(){return null!==a&&a.apply(this,arguments)||this}return P(Observer,a),Observer.prototype.trigger=function(a){for(var A=[],j=1;j<arguments.length;j++)A[j-1]=arguments[j];this.emit.apply(this,[a,a].concat(A))},Observer}(j("./node_modules/eventemitter3/index.js").EventEmitter);A.Observer=B},"./src/polyfills/number.js":function srcPolyfillsNumberJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/get-self-scope.js").getSelfScope().Number;A.Number=P,P.isFinite=P.isFinite||function(a){return"number"===typeof a&&isFinite(a)}},"./src/remux/aac-helper.js":function srcRemuxAacHelperJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=function(){function AAC(){}return AAC.getSilentFrame=function(a,A){switch(a){case"mp4a.40.2":if(1===A)return new Uint8Array([0,200,0,128,35,128]);if(2===A)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===A)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===A)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===A)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===A)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===A)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===A)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===A)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},AAC}();A.default=P},"./src/remux/mp4-generator.js":function srcRemuxMp4GeneratorJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=Math.pow(2,32)-1,B=function(){function MP4(){}return MP4.init=function(){var a;for(a in MP4.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},MP4.types)MP4.types.hasOwnProperty(a)&&(MP4.types[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);var A=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),j=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);MP4.HDLR_TYPES={video:A,audio:j};var P=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),B=new Uint8Array([0,0,0,0,0,0,0,0]);MP4.STTS=MP4.STSC=MP4.STCO=B,MP4.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),MP4.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),MP4.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),MP4.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var q=new Uint8Array([105,115,111,109]),ne=new Uint8Array([97,118,99,49]),ie=new Uint8Array([0,0,0,1]);MP4.FTYP=MP4.box(MP4.types.ftyp,q,ie,q,ne),MP4.DINF=MP4.box(MP4.types.dinf,MP4.box(MP4.types.dref,P))},MP4.box=function(a){for(var A,j=Array.prototype.slice.call(arguments,1),P=8,B=j.length,q=B;B--;)P+=j[B].byteLength;for((A=new Uint8Array(P))[0]=P>>24&255,A[1]=P>>16&255,A[2]=P>>8&255,A[3]=255&P,A.set(a,4),B=0,P=8;B<q;B++)A.set(j[B],P),P+=j[B].byteLength;return A},MP4.hdlr=function(a){return MP4.box(MP4.types.hdlr,MP4.HDLR_TYPES[a])},MP4.mdat=function(a){return MP4.box(MP4.types.mdat,a)},MP4.mdhd=function(a,A){A*=a;var j=Math.floor(A/(P+1)),B=Math.floor(A%(P+1));return MP4.box(MP4.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,a>>24&255,a>>16&255,a>>8&255,255&a,j>>24,j>>16&255,j>>8&255,255&j,B>>24,B>>16&255,B>>8&255,255&B,85,196,0,0]))},MP4.mdia=function(a){return MP4.box(MP4.types.mdia,MP4.mdhd(a.timescale,a.duration),MP4.hdlr(a.type),MP4.minf(a))},MP4.mfhd=function(a){return MP4.box(MP4.types.mfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a]))},MP4.minf=function(a){return"audio"===a.type?MP4.box(MP4.types.minf,MP4.box(MP4.types.smhd,MP4.SMHD),MP4.DINF,MP4.stbl(a)):MP4.box(MP4.types.minf,MP4.box(MP4.types.vmhd,MP4.VMHD),MP4.DINF,MP4.stbl(a))},MP4.moof=function(a,A,j){return MP4.box(MP4.types.moof,MP4.mfhd(a),MP4.traf(j,A))},MP4.moov=function(a){for(var A=a.length,j=[];A--;)j[A]=MP4.trak(a[A]);return MP4.box.apply(null,[MP4.types.moov,MP4.mvhd(a[0].timescale,a[0].duration)].concat(j).concat(MP4.mvex(a)))},MP4.mvex=function(a){for(var A=a.length,j=[];A--;)j[A]=MP4.trex(a[A]);return MP4.box.apply(null,[MP4.types.mvex].concat(j))},MP4.mvhd=function(a,A){A*=a;var j=Math.floor(A/(P+1)),B=Math.floor(A%(P+1)),q=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,a>>24&255,a>>16&255,a>>8&255,255&a,j>>24,j>>16&255,j>>8&255,255&j,B>>24,B>>16&255,B>>8&255,255&B,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return MP4.box(MP4.types.mvhd,q)},MP4.sdtp=function(a){var A,j,P=a.samples||[],B=new Uint8Array(4+P.length);for(j=0;j<P.length;j++)A=P[j].flags,B[j+4]=A.dependsOn<<4|A.isDependedOn<<2|A.hasRedundancy;return MP4.box(MP4.types.sdtp,B)},MP4.stbl=function(a){return MP4.box(MP4.types.stbl,MP4.stsd(a),MP4.box(MP4.types.stts,MP4.STTS),MP4.box(MP4.types.stsc,MP4.STSC),MP4.box(MP4.types.stsz,MP4.STSZ),MP4.box(MP4.types.stco,MP4.STCO))},MP4.avc1=function(a){var A,j,P,B=[],q=[];for(A=0;A<a.sps.length;A++)P=(j=a.sps[A]).byteLength,B.push(P>>>8&255),B.push(255&P),B=B.concat(Array.prototype.slice.call(j));for(A=0;A<a.pps.length;A++)P=(j=a.pps[A]).byteLength,q.push(P>>>8&255),q.push(255&P),q=q.concat(Array.prototype.slice.call(j));var ne=MP4.box(MP4.types.avcC,new Uint8Array([1,B[3],B[4],B[5],255,224|a.sps.length].concat(B).concat([a.pps.length]).concat(q))),ie=a.width,oe=a.height,se=a.pixelRatio[0],le=a.pixelRatio[1];return MP4.box(MP4.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,ie>>8&255,255&ie,oe>>8&255,255&oe,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),ne,MP4.box(MP4.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),MP4.box(MP4.types.pasp,new Uint8Array([se>>24,se>>16&255,se>>8&255,255&se,le>>24,le>>16&255,le>>8&255,255&le])))},MP4.esds=function(a){var A=a.config.length;return new Uint8Array([0,0,0,0,3,23+A,0,1,0,4,15+A,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([A]).concat(a.config).concat([6,1,2]))},MP4.mp4a=function(a){var A=a.samplerate;return MP4.box(MP4.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,a.channelCount,0,16,0,0,0,0,A>>8&255,255&A,0,0]),MP4.box(MP4.types.esds,MP4.esds(a)))},MP4.mp3=function(a){var A=a.samplerate;return MP4.box(MP4.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,a.channelCount,0,16,0,0,0,0,A>>8&255,255&A,0,0]))},MP4.stsd=function(a){return"audio"===a.type?a.isAAC||"mp3"!==a.codec?MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp4a(a)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp3(a)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.avc1(a))},MP4.tkhd=function(a){var A=a.id,j=a.duration*a.timescale,B=a.width,q=a.height,ne=Math.floor(j/(P+1)),ie=Math.floor(j%(P+1));return MP4.box(MP4.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,A>>24&255,A>>16&255,A>>8&255,255&A,0,0,0,0,ne>>24,ne>>16&255,ne>>8&255,255&ne,ie>>24,ie>>16&255,ie>>8&255,255&ie,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,B>>8&255,255&B,0,0,q>>8&255,255&q,0,0]))},MP4.traf=function(a,A){var j=MP4.sdtp(a),B=a.id,q=Math.floor(A/(P+1)),ne=Math.floor(A%(P+1));return MP4.box(MP4.types.traf,MP4.box(MP4.types.tfhd,new Uint8Array([0,0,0,0,B>>24,B>>16&255,B>>8&255,255&B])),MP4.box(MP4.types.tfdt,new Uint8Array([1,0,0,0,q>>24,q>>16&255,q>>8&255,255&q,ne>>24,ne>>16&255,ne>>8&255,255&ne])),MP4.trun(a,j.length+16+20+8+16+8+8),j)},MP4.trak=function(a){return a.duration=a.duration||4294967295,MP4.box(MP4.types.trak,MP4.tkhd(a),MP4.mdia(a))},MP4.trex=function(a){var A=a.id;return MP4.box(MP4.types.trex,new Uint8Array([0,0,0,0,A>>24,A>>16&255,A>>8&255,255&A,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},MP4.trun=function(a,A){var j,P,B,q,ne,ie,oe=a.samples||[],se=oe.length,le=12+16*se,he=new Uint8Array(le);for(A+=8+le,he.set([0,0,15,1,se>>>24&255,se>>>16&255,se>>>8&255,255&se,A>>>24&255,A>>>16&255,A>>>8&255,255&A],0),j=0;j<se;j++)B=(P=oe[j]).duration,q=P.size,ne=P.flags,ie=P.cts,he.set([B>>>24&255,B>>>16&255,B>>>8&255,255&B,q>>>24&255,q>>>16&255,q>>>8&255,255&q,ne.isLeading<<2|ne.dependsOn,ne.isDependedOn<<6|ne.hasRedundancy<<4|ne.paddingValue<<1|ne.isNonSync,61440&ne.degradPrio,15&ne.degradPrio,ie>>>24&255,ie>>>16&255,ie>>>8&255,255&ie],12+16*j);return MP4.box(MP4.types.trun,he)},MP4.initSegment=function(a){MP4.types||MP4.init();var A,j=MP4.moov(a);return(A=new Uint8Array(MP4.FTYP.byteLength+j.byteLength)).set(MP4.FTYP),A.set(j,MP4.FTYP.byteLength),A},MP4}();A.default=B},"./src/remux/mp4-remuxer.js":function srcRemuxMp4RemuxerJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/remux/aac-helper.js"),B=j("./src/remux/mp4-generator.js"),q=j("./src/events.js"),ne=j("./src/errors.js"),ie=j("./src/utils/logger.js"),oe=function(){function MP4Remuxer(a,A,j,P){this.observer=a,this.config=A,this.typeSupported=j;var B=navigator.userAgent;this.isSafari=P&&P.indexOf("Apple")>-1&&B&&!B.match("CriOS"),this.ISGenerated=!1}return MP4Remuxer.prototype.destroy=function(){},MP4Remuxer.prototype.resetTimeStamp=function(a){this._initPTS=this._initDTS=a},MP4Remuxer.prototype.resetInitSegment=function(){this.ISGenerated=!1},MP4Remuxer.prototype.remux=function(a,A,j,P,B,ne,oe){if(this.ISGenerated||this.generateIS(a,A,B),this.ISGenerated){var se=a.samples.length,le=A.samples.length,he=B,pe=B;if(se&&le){var ge=(a.samples[0].pts-A.samples[0].pts)/A.inputTimeScale;he+=Math.max(0,ge),pe+=Math.max(0,-ge)}if(se){a.timescale||(ie.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(a,A,B));var me=this.remuxAudio(a,he,ne,oe);if(le){var ve=void 0;me&&(ve=me.endPTS-me.startPTS),A.timescale||(ie.logger.warn("regenerate InitSegment as video detected"),this.generateIS(a,A,B)),this.remuxVideo(A,pe,ne,ve,oe)}}else if(le){var ye=this.remuxVideo(A,pe,ne,0,oe);ye&&a.codec&&this.remuxEmptyAudio(a,he,ne,ye)}}j.samples.length&&this.remuxID3(j,B),P.samples.length&&this.remuxText(P,B),this.observer.trigger(q.default.FRAG_PARSED)},MP4Remuxer.prototype.generateIS=function(a,A,j){var P,oe,se=this.observer,le=a.samples,he=A.samples,pe=this.typeSupported,ge="audio/mp4",me={},ve={tracks:me},ye=void 0===this._initPTS;if(ye&&(P=oe=1/0),a.config&&le.length&&(a.timescale=a.samplerate,ie.logger.log("audio sampling rate : "+a.samplerate),a.isAAC||(pe.mpeg?(ge="audio/mpeg",a.codec=""):pe.mp3&&(a.codec="mp3")),me.audio={container:ge,codec:a.codec,initSegment:!a.isAAC&&pe.mpeg?new Uint8Array:B.default.initSegment([a]),metadata:{channelCount:a.channelCount}},ye&&(P=oe=le[0].pts-a.inputTimeScale*j)),A.sps&&A.pps&&he.length){var _e=A.inputTimeScale;A.timescale=_e,me.video={container:"video/mp4",codec:A.codec,initSegment:B.default.initSegment([A]),metadata:{width:A.width,height:A.height}},ye&&(P=Math.min(P,he[0].pts-_e*j),oe=Math.min(oe,he[0].dts-_e*j),this.observer.trigger(q.default.INIT_PTS_FOUND,{initPTS:P}))}Object.keys(me).length?(se.trigger(q.default.FRAG_PARSING_INIT_SEGMENT,ve),this.ISGenerated=!0,ye&&(this.config.disablePtsDtsCorrectionInMp4Remux?(this._initPTS=0,this._initDTS=0):(this._initPTS=P,this._initDTS=oe))):se.trigger(q.default.ERROR,{type:ne.ErrorTypes.MEDIA_ERROR,details:ne.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},MP4Remuxer.prototype.remuxVideo=function(a,A,j,P,oe){var se,le,he,pe,ge,me,ve,ye=8,_e=a.timescale,we=a.samples,ke=[],Oe=we.length,Se=this._PTSNormalize,Te=this._initPTS,Ae=this.nextAvcDts,je=this.isSafari;if(0!==Oe){je&&(j|=we.length&&Ae&&(oe&&Math.abs(A-Ae/_e)<.1||Math.abs(we[0].pts-Ae-Te)<_e/5)),j||(Ae=A*_e),we.forEach((function(a){a.pts=Se(a.pts-Te,Ae),a.dts=Se(a.dts-Te,Ae)})),we.sort((function(a,A){var j=a.dts-A.dts,P=a.pts-A.pts;return j||P||a.id-A.id}));var Fe=we.reduce((function(a,A){return Math.max(Math.min(a,A.pts-A.dts),-18e3)}),0);if(Fe<0){ie.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(Fe/90)+" ms to overcome this issue");for(var Re=0;Re<we.length;Re++)we[Re].dts+=Fe}var Me=we[0];ge=Math.max(Me.dts,0),pe=Math.max(Me.pts,0);var Ne=Math.round((ge-Ae)/90);j&&Ne&&(Ne>1?ie.logger.log("AVC:"+Ne+" ms hole between fragments detected,filling it"):Ne<-1&&ie.logger.log("AVC:"+-Ne+" ms overlapping between fragments detected"),ge=Ae,we[0].dts=ge,pe=Math.max(pe-Ne,Ae),we[0].pts=pe,ie.logger.log("Video/PTS/DTS adjusted: "+Math.round(pe/90)+"/"+Math.round(ge/90)+",delta:"+Ne+" ms")),Me=we[we.length-1],ve=Math.max(Me.dts,0),me=Math.max(Me.pts,0,ve),je&&(se=Math.round((ve-ge)/(we.length-1)));var Be=0,Ue=0;for(Re=0;Re<Oe;Re++){for(var We=we[Re],Ve=We.units,Ye=Ve.length,$e=0,Xe=0;Xe<Ye;Xe++)$e+=Ve[Xe].data.length;Ue+=$e,Be+=Ye,We.length=$e,We.dts=je?ge+Re*se:Math.max(We.dts,ge),We.pts=Math.max(We.pts,We.dts)}var et=Ue+4*Be+8;try{le=new Uint8Array(et)}catch(vt){return void this.observer.trigger(q.default.ERROR,{type:ne.ErrorTypes.MUX_ERROR,details:ne.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:et,reason:"fail allocating video mdat "+et})}var tt=new DataView(le.buffer);tt.setUint32(0,et),le.set(B.default.types.mdat,4);for(Re=0;Re<Oe;Re++){var nt=we[Re],rt=nt.units,it=0,at=void 0;for(Xe=0,Ye=rt.length;Xe<Ye;Xe++){var ot=rt[Xe],st=ot.data,ut=ot.data.byteLength;tt.setUint32(ye,ut),ye+=4,le.set(st,ye),ye+=ut,it+=4+ut}if(je)at=Math.max(0,se*Math.round((nt.pts-nt.dts)/se));else{if(Re<Oe-1)se=we[Re+1].dts-nt.dts;else{var lt=this.config,ct=nt.dts-we[Re>0?Re-1:Re].dts;if(lt.stretchShortVideoTrack){var ft=lt.maxBufferHole,dt=Math.floor(ft*_e),ht=(P?pe+P*_e:this.nextAudioPts)-nt.pts;ht>dt?((se=ht-ct)<0&&(se=ct),ie.logger.log("It is approximately "+ht/90+" ms to the next segment; using duration "+se/90+" ms for the last video frame.")):se=ct}else se=ct}at=Math.round(nt.pts-nt.dts)}ke.push({size:it,duration:se,cts:at,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:nt.key?2:1,isNonSync:nt.key?0:1}})}this.nextAvcDts=ve+se;var pt=a.dropped;if(a.len=0,a.nbNalu=0,a.dropped=0,ke.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var gt=ke[0].flags;gt.dependsOn=2,gt.isNonSync=0}a.samples=ke,he=B.default.moof(a.sequenceNumber++,ge,a),a.samples=[];var mt={data1:he,data2:le,startPTS:pe/_e,endPTS:(me+se)/_e,startDTS:ge/_e,endDTS:this.nextAvcDts/_e,type:"video",hasAudio:!1,hasVideo:!0,nb:ke.length,dropped:pt};return this.observer.trigger(q.default.FRAG_PARSING_DATA,mt),mt}},MP4Remuxer.prototype.remuxAudio=function(a,A,j,oe){var se,le,he,pe,ge,me,ve,ye=a.inputTimeScale,_e=a.timescale,we=ye/_e,ke=(a.isAAC?1024:1152)*we,Oe=this._PTSNormalize,Se=this._initPTS,Te=!a.isAAC&&this.typeSupported.mpeg,Ae=a.samples,je=[],Fe=this.nextAudioPts;if(j|=Ae.length&&Fe&&(oe&&Math.abs(A-Fe/ye)<.1||Math.abs(Ae[0].pts-Fe-Se)<20*ke),Ae.forEach((function(a){a.pts=a.dts=Oe(a.pts-Se,A*ye)})),0!==(Ae=Ae.filter((function(a){return a.pts>=0}))).length){if(j||(Fe=oe?A*ye:Ae[0].pts),a.isAAC)for(var Re=this.config.maxAudioFramesDrift,Me=0,Ne=Fe;Me<Ae.length;){var Be,Ue=Ae[Me];Be=(nt=Ue.pts)-Ne;var We=Math.abs(1e3*Be/ye);if(Be<=-Re*ke)ie.logger.warn("Dropping 1 audio frame @ "+(Ne/ye).toFixed(3)+"s due to "+Math.round(We)+" ms overlap."),Ae.splice(Me,1),a.len-=Ue.unit.length;else if(Be>=Re*ke&&We<1e4&&Ne){var Ve=Math.round(Be/ke);ie.logger.warn("Injecting "+Ve+" audio frame @ "+(Ne/ye).toFixed(3)+"s due to "+Math.round(1e3*Be/ye)+" ms gap.");for(var Ye=0;Ye<Ve;Ye++){var $e=Math.max(Ne,0);(he=P.default.getSilentFrame(a.manifestCodec||a.codec,a.channelCount))||(ie.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),he=Ue.unit.subarray()),Ae.splice(Me,0,{unit:he,pts:$e,dts:$e}),a.len+=he.length,Ne+=ke,Me++}Ue.pts=Ue.dts=Ne,Ne+=ke,Me++}else Math.abs(Be),Ue.pts=Ue.dts=Ne,Ne+=ke,Me++}Ye=0;for(var Xe=Ae.length;Ye<Xe;Ye++){var et=Ae[Ye],tt=et.unit,nt=et.pts;if(void 0!==ve)le.duration=Math.round((nt-ve)/we);else{var rt=Math.round(1e3*(nt-Fe)/ye),it=0;if(j&&a.isAAC&&rt){if(rt>0&&rt<1e4)it=Math.round((nt-Fe)/ke),ie.logger.log(rt+" ms hole between AAC samples detected,filling it"),it>0&&((he=P.default.getSilentFrame(a.manifestCodec||a.codec,a.channelCount))||(he=tt.subarray()),a.len+=it*he.length);else if(rt<-12){ie.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(Fe/ye).toFixed(3)+"s/"+(nt/ye).toFixed(3)+"s/"+-rt+"ms"),a.len-=tt.byteLength;continue}nt=Fe}if(me=nt,!(a.len>0))return;var at=Te?a.len:a.len+8;se=Te?0:8;try{pe=new Uint8Array(at)}catch(dt){return void this.observer.trigger(q.default.ERROR,{type:ne.ErrorTypes.MUX_ERROR,details:ne.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:at,reason:"fail allocating audio mdat "+at})}Te||(new DataView(pe.buffer).setUint32(0,at),pe.set(B.default.types.mdat,4));for(Me=0;Me<it;Me++)(he=P.default.getSilentFrame(a.manifestCodec||a.codec,a.channelCount))||(ie.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),he=tt.subarray()),pe.set(he,se),se+=he.byteLength,le={size:he.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},je.push(le)}pe.set(tt,se);var ot=tt.byteLength;se+=ot,le={size:ot,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},je.push(le),ve=nt}var st=0,ut=je.length;if(ut>=2&&(st=je[ut-2].duration,le.duration=st),ut){this.nextAudioPts=Fe=ve+we*st,a.len=0,a.samples=je,ge=Te?new Uint8Array:B.default.moof(a.sequenceNumber++,me/we,a),a.samples=[];var lt=me/ye,ct=Fe/ye,ft={data1:ge,data2:pe,startPTS:lt,endPTS:ct,startDTS:lt,endDTS:ct,type:"audio",hasAudio:!0,hasVideo:!1,nb:ut};return this.observer.trigger(q.default.FRAG_PARSING_DATA,ft),ft}return null}},MP4Remuxer.prototype.remuxEmptyAudio=function(a,A,j,B){var q=a.inputTimeScale,ne=q/(a.samplerate?a.samplerate:q),oe=this.nextAudioPts,se=(void 0!==oe?oe:B.startDTS*q)+this._initDTS,le=B.endDTS*q+this._initDTS,he=1024*ne,pe=Math.ceil((le-se)/he),ge=P.default.getSilentFrame(a.manifestCodec||a.codec,a.channelCount);if(ie.logger.warn("remux empty Audio"),ge){for(var me=[],ve=0;ve<pe;ve++){var ye=se+ve*he;me.push({unit:ge,pts:ye,dts:ye}),a.len+=ge.length}a.samples=me,this.remuxAudio(a,A,j)}else ie.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},MP4Remuxer.prototype.remuxID3=function(a){var A,j=a.samples.length,P=a.inputTimeScale,B=this._initPTS,ne=this._initDTS;if(j){for(var ie=0;ie<j;ie++)(A=a.samples[ie]).pts=(A.pts-B)/P,A.dts=(A.dts-ne)/P;this.observer.trigger(q.default.FRAG_PARSING_METADATA,{samples:a.samples})}a.samples=[]},MP4Remuxer.prototype.remuxText=function(a){a.samples.sort((function(a,A){return a.pts-A.pts}));var A,j=a.samples.length,P=a.inputTimeScale,B=this._initPTS;if(j){for(var ne=0;ne<j;ne++)(A=a.samples[ne]).pts=(A.pts-B)/P;this.observer.trigger(q.default.FRAG_PARSING_USERDATA,{samples:a.samples})}a.samples=[]},MP4Remuxer.prototype._PTSNormalize=function(a,A){return a},MP4Remuxer}();A.default=oe},"./src/remux/passthrough-remuxer.js":function srcRemuxPassthroughRemuxerJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/events.js"),B=function(){function PassThroughRemuxer(a){this.observer=a}return PassThroughRemuxer.prototype.destroy=function(){},PassThroughRemuxer.prototype.resetTimeStamp=function(){},PassThroughRemuxer.prototype.resetInitSegment=function(){},PassThroughRemuxer.prototype.remux=function(a,A,j,B,q,ne,ie,oe){var se=this.observer,le="";a&&(le+="audio"),A&&(le+="video"),se.trigger(P.default.FRAG_PARSING_DATA,{data1:oe,startPTS:q,startDTS:q,type:le,hasAudio:!!a,hasVideo:!!A,nb:1,dropped:0}),se.trigger(P.default.FRAG_PARSED)},PassThroughRemuxer}();A.default=B},"./src/task-loop.js":function srcTaskLoopJs(a,A,j){"use strict";var P=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}();Object.defineProperty(A,"__esModule",{value:!0});var B=function(a){function TaskLoop(A){for(var j=[],P=1;P<arguments.length;P++)j[P-1]=arguments[P];var B=a.apply(this,[A].concat(j))||this;return B._tickInterval=null,B._tickTimer=null,B._tickCallCount=0,B._boundTick=B.tick.bind(B),B}return P(TaskLoop,a),TaskLoop.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},TaskLoop.prototype.hasInterval=function(){return!!this._tickInterval},TaskLoop.prototype.hasNextTick=function(){return!!this._tickTimer},TaskLoop.prototype.setInterval=function(a){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,a),!0)},TaskLoop.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)},TaskLoop.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},TaskLoop.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},TaskLoop.prototype.doTick=function(){},TaskLoop}(j("./src/event-handler.js").default);A.default=B},"./src/utils/attr-list.js":function srcUtilsAttrListJs(a,A,j){"use strict";(function(a){Object.defineProperty(A,"__esModule",{value:!0});var j=/^(\d+)x(\d+)$/,P=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,B=function(){function AttrList(a){for(var A in"string"===typeof a&&(a=AttrList.parseAttrList(a)),a)a.hasOwnProperty(A)&&(this[A]=a[A])}return AttrList.prototype.decimalInteger=function(A){var j=parseInt(this[A],10);return j>a.MAX_SAFE_INTEGER?1/0:j},AttrList.prototype.hexadecimalInteger=function(a){if(this[a]){var A=(this[a]||"0x").slice(2);A=(1&A.length?"0":"")+A;for(var j=new Uint8Array(A.length/2),P=0;P<A.length/2;P++)j[P]=parseInt(A.slice(2*P,2*P+2),16);return j}return null},AttrList.prototype.hexadecimalIntegerAsNumber=function(A){var j=parseInt(this[A],16);return j>a.MAX_SAFE_INTEGER?1/0:j},AttrList.prototype.decimalFloatingPoint=function(a){return parseFloat(this[a])},AttrList.prototype.enumeratedString=function(a){return this[a]},AttrList.prototype.decimalResolution=function(a){var A=j.exec(this[a]);if(null!==A)return{width:parseInt(A[1],10),height:parseInt(A[2],10)}},AttrList.parseAttrList=function(a){var A,j={};for(P.lastIndex=0;null!==(A=P.exec(a));){var B=A[2];0===B.indexOf('"')&&B.lastIndexOf('"')===B.length-1&&(B=B.slice(1,-1)),j[A[1]]=B}return j},AttrList}();A.default=B}).call(this,j("./src/polyfills/number.js").Number)},"./src/utils/binary-search.js":function srcUtilsBinarySearchJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.default={search:function search(a,A){for(var j=0,P=a.length-1,B=null,q=null;j<=P;){var ne=A(q=a[B=(j+P)/2|0]);if(ne>0)j=B+1;else{if(!(ne<0))return q;P=B-1}}return null}}},"./src/utils/buffer-helper.js":function srcUtilsBufferHelperJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=function(){function BufferHelper(){}return BufferHelper.isBuffered=function(a,A){try{if(a)for(var j=a.buffered,P=0;P<j.length;P++)if(A>=j.start(P)&&A<=j.end(P))return!0}catch(B){}return!1},BufferHelper.bufferInfo=function(a,A,j){try{if(a){var P=a.buffered,B=[],q=void 0;for(q=0;q<P.length;q++)B.push({start:P.start(q),end:P.end(q)});return this.bufferedInfo(B,A,j)}}catch(ne){}return{len:0,start:A,end:A,nextStart:void 0}},BufferHelper.bufferedInfo=function(a,A,j){var P,B,q,ne,ie,oe=[];for(a.sort((function(a,A){var j=a.start-A.start;return j||A.end-a.end})),ie=0;ie<a.length;ie++){var se=oe.length;if(se){var le=oe[se-1].end;a[ie].start-le<j?a[ie].end>le&&(oe[se-1].end=a[ie].end):oe.push(a[ie])}else oe.push(a[ie])}for(ie=0,P=0,B=q=A;ie<oe.length;ie++){var he=oe[ie].start,pe=oe[ie].end;if(A+j>=he&&A<pe)B=he,P=(q=pe)-A;else if(A+j<he){ne=he;break}}return{len:P,start:B,end:q,nextStart:ne}},BufferHelper}();A.BufferHelper=P},"./src/utils/cea-608-parser.js":function srcUtilsCea608ParserJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},B=function getCharForByte(a){var A=a;return P.hasOwnProperty(a)&&(A=P[a]),String.fromCharCode(A)},q={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},ne={17:2,18:4,21:6,22:8,23:10,19:13,20:15},ie={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},oe={25:2,26:4,29:6,30:8,31:10,27:13,28:15},se=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],le={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function setTime(a){this.time=a},log:function log(a,A){this.verboseFilter[a];this.verboseLevel}},he=function numArrayToHexArray(a){for(var A=[],j=0;j<a.length;j++)A.push(a[j].toString(16));return A},pe=function(){function PenState(a,A,j,P,B){this.foreground=a||"white",this.underline=A||!1,this.italics=j||!1,this.background=P||"black",this.flash=B||!1}return PenState.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},PenState.prototype.setStyles=function(a){for(var A=["foreground","underline","italics","background","flash"],j=0;j<A.length;j++){var P=A[j];a.hasOwnProperty(P)&&(this[P]=a[P])}},PenState.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},PenState.prototype.equals=function(a){return this.foreground===a.foreground&&this.underline===a.underline&&this.italics===a.italics&&this.background===a.background&&this.flash===a.flash},PenState.prototype.copy=function(a){this.foreground=a.foreground,this.underline=a.underline,this.italics=a.italics,this.background=a.background,this.flash=a.flash},PenState.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},PenState}(),ge=function(){function StyledUnicodeChar(a,A,j,P,B,q){this.uchar=a||" ",this.penState=new pe(A,j,P,B,q)}return StyledUnicodeChar.prototype.reset=function(){this.uchar=" ",this.penState.reset()},StyledUnicodeChar.prototype.setChar=function(a,A){this.uchar=a,this.penState.copy(A)},StyledUnicodeChar.prototype.setPenState=function(a){this.penState.copy(a)},StyledUnicodeChar.prototype.equals=function(a){return this.uchar===a.uchar&&this.penState.equals(a.penState)},StyledUnicodeChar.prototype.copy=function(a){this.uchar=a.uchar,this.penState.copy(a.penState)},StyledUnicodeChar.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},StyledUnicodeChar}(),me=function(){function Row(){this.chars=[];for(var a=0;a<100;a++)this.chars.push(new ge);this.pos=0,this.currPenState=new pe}return Row.prototype.equals=function(a){for(var A=!0,j=0;j<100;j++)if(!this.chars[j].equals(a.chars[j])){A=!1;break}return A},Row.prototype.copy=function(a){for(var A=0;A<100;A++)this.chars[A].copy(a.chars[A])},Row.prototype.isEmpty=function(){for(var a=!0,A=0;A<100;A++)if(!this.chars[A].isEmpty()){a=!1;break}return a},Row.prototype.setCursor=function(a){this.pos!==a&&(this.pos=a),this.pos<0?(le.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(le.log("ERROR","Too large cursor position "+this.pos),this.pos=100)},Row.prototype.moveCursor=function(a){var A=this.pos+a;if(a>1)for(var j=this.pos+1;j<A+1;j++)this.chars[j].setPenState(this.currPenState);this.setCursor(A)},Row.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},Row.prototype.insertChar=function(a){a>=144&&this.backSpace();var A=B(a);this.pos>=100?le.log("ERROR","Cannot insert "+a.toString(16)+" ("+A+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(A,this.currPenState),this.moveCursor(1))},Row.prototype.clearFromPos=function(a){var A;for(A=a;A<100;A++)this.chars[A].reset()},Row.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},Row.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},Row.prototype.getTextString=function(){for(var a=[],A=!0,j=0;j<100;j++){var P=this.chars[j].uchar;" "!==P&&(A=!1),a.push(P)}return A?"":a.join("")},Row.prototype.setPenStyles=function(a){this.currPenState.setStyles(a),this.chars[this.pos].setPenState(this.currPenState)},Row}(),ve=function(){function CaptionScreen(){this.rows=[];for(var a=0;a<15;a++)this.rows.push(new me);this.currRow=14,this.nrRollUpRows=null,this.reset()}return CaptionScreen.prototype.reset=function(){for(var a=0;a<15;a++)this.rows[a].clear();this.currRow=14},CaptionScreen.prototype.equals=function(a){for(var A=!0,j=0;j<15;j++)if(!this.rows[j].equals(a.rows[j])){A=!1;break}return A},CaptionScreen.prototype.copy=function(a){for(var A=0;A<15;A++)this.rows[A].copy(a.rows[A])},CaptionScreen.prototype.isEmpty=function(){for(var a=!0,A=0;A<15;A++)if(!this.rows[A].isEmpty()){a=!1;break}return a},CaptionScreen.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},CaptionScreen.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},CaptionScreen.prototype.insertChar=function(a){this.rows[this.currRow].insertChar(a)},CaptionScreen.prototype.setPen=function(a){this.rows[this.currRow].setPenStyles(a)},CaptionScreen.prototype.moveCursor=function(a){this.rows[this.currRow].moveCursor(a)},CaptionScreen.prototype.setCursor=function(a){le.log("INFO","setCursor: "+a),this.rows[this.currRow].setCursor(a)},CaptionScreen.prototype.setPAC=function(a){le.log("INFO","pacData = "+JSON.stringify(a));var A=a.row-1;if(this.nrRollUpRows&&A<this.nrRollUpRows-1&&(A=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==A){for(var j=0;j<15;j++)this.rows[j].clear();var P=this.currRow+1-this.nrRollUpRows,B=this.lastOutputScreen;if(B){var q=B.rows[P].cueStartTime;if(q&&q<le.time)for(j=0;j<this.nrRollUpRows;j++)this.rows[A-this.nrRollUpRows+j+1].copy(B.rows[P+j])}}this.currRow=A;var ne=this.rows[this.currRow];if(null!==a.indent){var ie=a.indent,oe=Math.max(ie-1,0);ne.setCursor(a.indent),a.color=ne.chars[oe].penState.foreground}var se={foreground:a.color,underline:a.underline,italics:a.italics,background:"black",flash:!1};this.setPen(se)},CaptionScreen.prototype.setBkgData=function(a){le.log("INFO","bkgData = "+JSON.stringify(a)),this.backSpace(),this.setPen(a),this.insertChar(32)},CaptionScreen.prototype.setRollUpRows=function(a){this.nrRollUpRows=a},CaptionScreen.prototype.rollUp=function(){if(null!==this.nrRollUpRows){le.log("TEXT",this.getDisplayText());var a=this.currRow+1-this.nrRollUpRows,A=this.rows.splice(a,1)[0];A.clear(),this.rows.splice(this.currRow,0,A),le.log("INFO","Rolling up")}else le.log("DEBUG","roll_up but nrRollUpRows not set yet")},CaptionScreen.prototype.getDisplayText=function(a){a=a||!1;for(var A=[],j="",P=-1,B=0;B<15;B++){var q=this.rows[B].getTextString();q&&(P=B+1,a?A.push("Row "+P+": '"+q+"'"):A.push(q.trim()))}return A.length>0&&(j=a?"["+A.join(" | ")+"]":A.join("\n")),j},CaptionScreen.prototype.getTextAndFormat=function(){return this.rows},CaptionScreen}(),ye=function(){function Cea608Channel(a,A){this.chNr=a,this.outputFilter=A,this.mode=null,this.verbose=0,this.displayedMemory=new ve,this.nonDisplayedMemory=new ve,this.lastOutputScreen=new ve,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return Cea608Channel.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},Cea608Channel.prototype.getHandler=function(){return this.outputFilter},Cea608Channel.prototype.setHandler=function(a){this.outputFilter=a},Cea608Channel.prototype.setPAC=function(a){this.writeScreen.setPAC(a)},Cea608Channel.prototype.setBkgData=function(a){this.writeScreen.setBkgData(a)},Cea608Channel.prototype.setMode=function(a){a!==this.mode&&(this.mode=a,le.log("INFO","MODE="+a),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=a)},Cea608Channel.prototype.insertChars=function(a){for(var A=0;A<a.length;A++)this.writeScreen.insertChar(a[A]);var j=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";le.log("INFO",j+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(le.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},Cea608Channel.prototype.ccRCL=function(){le.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},Cea608Channel.prototype.ccBS=function(){le.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},Cea608Channel.prototype.ccAOF=function(){},Cea608Channel.prototype.ccAON=function(){},Cea608Channel.prototype.ccDER=function(){le.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},Cea608Channel.prototype.ccRU=function(a){le.log("INFO","RU("+a+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(a)},Cea608Channel.prototype.ccFON=function(){le.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},Cea608Channel.prototype.ccRDC=function(){le.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},Cea608Channel.prototype.ccTR=function(){le.log("INFO","TR"),this.setMode("MODE_TEXT")},Cea608Channel.prototype.ccRTD=function(){le.log("INFO","RTD"),this.setMode("MODE_TEXT")},Cea608Channel.prototype.ccEDM=function(){le.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},Cea608Channel.prototype.ccCR=function(){le.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},Cea608Channel.prototype.ccENM=function(){le.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},Cea608Channel.prototype.ccEOC=function(){if(le.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var a=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=a,this.writeScreen=this.nonDisplayedMemory,le.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},Cea608Channel.prototype.ccTO=function(a){le.log("INFO","TO("+a+") - Tab Offset"),this.writeScreen.moveCursor(a)},Cea608Channel.prototype.ccMIDROW=function(a){var A={flash:!1};if(A.underline=a%2===1,A.italics=a>=46,A.italics)A.foreground="white";else{var j=Math.floor(a/2)-16;A.foreground=["white","green","blue","cyan","red","yellow","magenta"][j]}le.log("INFO","MIDROW: "+JSON.stringify(A)),this.writeScreen.setPen(A)},Cea608Channel.prototype.outputDataUpdate=function(a){void 0===a&&(a=!1);var A=le.time;null!==A&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,A,this.lastOutputScreen),!0===a&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:A):this.cueStartTime=A,this.lastOutputScreen.copy(this.displayedMemory))},Cea608Channel.prototype.cueSplitAtTime=function(a){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,a,this.displayedMemory),this.cueStartTime=a))},Cea608Channel}(),_e=function(){function Cea608Parser(a,A,j){this.field=a||1,this.outputs=[A,j],this.channels=[new ye(1,A),new ye(2,j)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return Cea608Parser.prototype.getHandler=function(a){return this.channels[a].getHandler()},Cea608Parser.prototype.setHandler=function(a,A){this.channels[a].setHandler(A)},Cea608Parser.prototype.addData=function(a,A){var j,P,B,q=!1;this.lastTime=a,le.setTime(a);for(var ne=0;ne<A.length;ne+=2)if(P=127&A[ne],B=127&A[ne+1],0!==P||0!==B){if(le.log("DATA","["+he([A[ne],A[ne+1]])+"] -> ("+he([P,B])+")"),(j=this.parseCmd(P,B))||(j=this.parseMidrow(P,B)),j||(j=this.parsePAC(P,B)),j||(j=this.parseBackgroundAttributes(P,B)),!j)if(q=this.parseChars(P,B))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(q);else le.log("WARNING","No channel found yet. TEXT-MODE?");j?this.dataCounters.cmd+=2:q?this.dataCounters.char+=2:(this.dataCounters.other+=2,le.log("WARNING","Couldn't parse cleaned data "+he([P,B])+" orig: "+he([A[ne],A[ne+1]])))}else this.dataCounters.padding+=2},Cea608Parser.prototype.parseCmd=function(a,A){var j=null;if(!((20===a||28===a)&&A>=32&&A<=47)&&!((23===a||31===a)&&A>=33&&A<=35))return!1;if(a===this.lastCmdA&&A===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,le.log("DEBUG","Repeated command ("+he([a,A])+") is dropped"),!0;j=20===a||23===a?1:2;var P=this.channels[j-1];return 20===a||28===a?32===A?P.ccRCL():33===A?P.ccBS():34===A?P.ccAOF():35===A?P.ccAON():36===A?P.ccDER():37===A?P.ccRU(2):38===A?P.ccRU(3):39===A?P.ccRU(4):40===A?P.ccFON():41===A?P.ccRDC():42===A?P.ccTR():43===A?P.ccRTD():44===A?P.ccEDM():45===A?P.ccCR():46===A?P.ccENM():47===A&&P.ccEOC():P.ccTO(A-32),this.lastCmdA=a,this.lastCmdB=A,this.currChNr=j,!0},Cea608Parser.prototype.parseMidrow=function(a,A){var j=null;return(17===a||25===a)&&A>=32&&A<=47&&((j=17===a?1:2)!==this.currChNr?(le.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[j-1].ccMIDROW(A),le.log("DEBUG","MIDROW ("+he([a,A])+")"),!0))},Cea608Parser.prototype.parsePAC=function(a,A){var j,P=null;if(!((a>=17&&a<=23||a>=25&&a<=31)&&A>=64&&A<=127)&&!((16===a||24===a)&&A>=64&&A<=95))return!1;if(a===this.lastCmdA&&A===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;j=a<=23?1:2,P=A>=64&&A<=95?1===j?q[a]:ie[a]:1===j?ne[a]:oe[a];var B=this.interpretPAC(P,A);return this.channels[j-1].setPAC(B),this.lastCmdA=a,this.lastCmdB=A,this.currChNr=j,!0},Cea608Parser.prototype.interpretPAC=function(a,A){var j=A,P={color:null,italics:!1,indent:null,underline:!1,row:a};return j=A>95?A-96:A-64,P.underline=1===(1&j),j<=13?P.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(j/2)]:j<=15?(P.italics=!0,P.color="white"):P.indent=4*Math.floor((j-16)/2),P},Cea608Parser.prototype.parseChars=function(a,A){var j=null,P=null,q=null;if(a>=25?(j=2,q=a-8):(j=1,q=a),q>=17&&q<=19){var ne=A;ne=17===q?A+80:18===q?A+112:A+144,le.log("INFO","Special char '"+B(ne)+"' in channel "+j),P=[ne]}else a>=32&&a<=127&&(P=0===A?[a]:[a,A]);if(P){var ie=he(P);le.log("DEBUG","Char codes =  "+ie.join(",")),this.lastCmdA=null,this.lastCmdB=null}return P},Cea608Parser.prototype.parseBackgroundAttributes=function(a,A){var j,P,B;return((16===a||24===a)&&A>=32&&A<=47||(23===a||31===a)&&A>=45&&A<=47)&&(j={},16===a||24===a?(P=Math.floor((A-32)/2),j.background=se[P],A%2===1&&(j.background=j.background+"_semi")):45===A?j.background="transparent":(j.foreground="black",47===A&&(j.underline=!0)),B=a<24?1:2,this.channels[B-1].setBkgData(j),this.lastCmdA=null,this.lastCmdB=null,!0)},Cea608Parser.prototype.reset=function(){for(var a=0;a<this.channels.length;a++)this.channels[a]&&this.channels[a].reset();this.lastCmdA=null,this.lastCmdB=null},Cea608Parser.prototype.cueSplitAtTime=function(a){for(var A=0;A<this.channels.length;A++)this.channels[A]&&this.channels[A].cueSplitAtTime(a)},Cea608Parser}();A.default=_e},"./src/utils/codecs.js":function srcUtilsCodecsJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};A.isCodecType=function isCodecType(a,A){var j=P[A];return!!j&&!0===j[a.slice(0,4)]},A.isCodecSupportedInMp4=function isCodecSupportedInMp4(a,A){return window.MediaSource.isTypeSupported((A||"video")+'/mp4;codecs="'+a+'"')}},"./src/utils/cues.js":function srcUtilsCuesJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/vttparser.js");A.newCue=function newCue(a,A,j,B){for(var q,ne,ie,oe,se,le=window.VTTCue||window.TextTrackCue,he=0;he<B.rows.length;he++)if(ie=!0,oe=0,se="",!(q=B.rows[he]).isEmpty()){for(var pe=0;pe<q.chars.length;pe++)q.chars[pe].uchar.match(/\s/)&&ie?oe++:(se+=q.chars[pe].uchar,ie=!1);q.cueStartTime=A,A===j&&(j+=1e-4),ne=new le(A,j,P.fixLineBreaks(se.trim())),oe>=16?oe--:oe++,navigator.userAgent.match(/Firefox\//)?ne.line=he+1:ne.line=he>7?he-2:he+1,ne.align="left",ne.position=Math.max(0,Math.min(100,oe/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),a.addCue(ne)}}},"./src/utils/discontinuities.js":function srcUtilsDiscontinuitiesJs(a,A,j){"use strict";(function(a){Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/binary-search.js"),B=j("./src/utils/logger.js");function findFirstFragWithCC(a,A){for(var j=null,P=0;P<a.length;P+=1){var B=a[P];if(B&&B.cc===A){j=B;break}}return j}function shouldAlignOnDiscontinuities(a,A,j){var P=!1;return A&&A.details&&j&&(j.endCC>j.startCC||a&&a.cc<j.startCC)&&(P=!0),P}function findDiscontinuousReferenceFrag(a,A){var j=a.fragments,P=A.fragments;if(P.length&&j.length){var q=findFirstFragWithCC(j,P[0].cc);if(q&&(!q||q.startPTS))return q;B.logger.log("No frag in previous level to align on")}else B.logger.log("No fragments to align")}function adjustPts(a,A){A.fragments.forEach((function(A){if(A){var j=A.start+a;A.start=A.startPTS=j,A.endPTS=j+A.duration}})),A.PTSKnown=!0}function alignDiscontinuities(a,A,j){if(shouldAlignOnDiscontinuities(a,j,A)){var P=findDiscontinuousReferenceFrag(j.details,A);P&&(B.logger.log("Adjusting PTS using last level due to CC increase within current level"),adjustPts(P.start,A))}}function alignPDT(A,j){if(j&&j.fragments.length){if(!A.hasProgramDateTime||!j.hasProgramDateTime)return;var P=j.fragments[0].programDateTime,q=(A.fragments[0].programDateTime-P)/1e3+j.fragments[0].start;a.isFinite(q)&&(B.logger.log("adjusting PTS using programDateTime delta, sliding:"+q.toFixed(3)),adjustPts(q,A))}}A.findFirstFragWithCC=findFirstFragWithCC,A.findFragWithCC=function findFragWithCC(a,A){return P.default.search(a,(function(a){return a.cc<A?1:a.cc>A?-1:0}))},A.shouldAlignOnDiscontinuities=shouldAlignOnDiscontinuities,A.findDiscontinuousReferenceFrag=findDiscontinuousReferenceFrag,A.adjustPts=adjustPts,A.alignStream=function alignStream(a,A,j){alignDiscontinuities(a,j,A),!j.PTSKnown&&A&&alignPDT(j,A.details)},A.alignDiscontinuities=alignDiscontinuities,A.alignPDT=alignPDT}).call(this,j("./src/polyfills/number.js").Number)},"./src/utils/ewma-bandwidth-estimator.js":function srcUtilsEwmaBandwidthEstimatorJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/ewma.js"),B=function(){function EwmaBandWidthEstimator(a,A,j,B){this.hls=a,this.defaultEstimate_=B,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new P.default(A),this.fast_=new P.default(j)}return EwmaBandWidthEstimator.prototype.sample=function(a,A){var j=8e3*A/(a=Math.max(a,this.minDelayMs_)),P=a/1e3;this.fast_.sample(P,j),this.slow_.sample(P,j)},EwmaBandWidthEstimator.prototype.canEstimate=function(){var a=this.fast_;return a&&a.getTotalWeight()>=this.minWeight_},EwmaBandWidthEstimator.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},EwmaBandWidthEstimator.prototype.destroy=function(){},EwmaBandWidthEstimator}();A.default=B},"./src/utils/ewma.js":function srcUtilsEwmaJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=function(){function EWMA(a){this.alpha_=a?Math.exp(Math.log(.5)/a):0,this.estimate_=0,this.totalWeight_=0}return EWMA.prototype.sample=function(a,A){var j=Math.pow(this.alpha_,a);this.estimate_=A*(1-j)+j*this.estimate_,this.totalWeight_+=a},EWMA.prototype.getTotalWeight=function(){return this.totalWeight_},EWMA.prototype.getEstimate=function(){if(this.alpha_){var a=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/a}return this.estimate_},EWMA}();A.default=P},"./src/utils/get-self-scope.js":function srcUtilsGetSelfScopeJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getSelfScope=function getSelfScope(){return"undefined"===typeof window?self:window}},"./src/utils/logger.js":function srcUtilsLoggerJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/get-self-scope.js");function noop(){}var B={trace:noop,debug:noop,log:noop,warn:noop,info:noop,error:noop},q=B;function formatMsg(a,A){return A="["+a+"] > "+A}var ne=P.getSelfScope();function consolePrintFn(a){var A=ne.console[a];return A?function(){for(var j=[],P=0;P<arguments.length;P++)j[P]=arguments[P];j[0]&&(j[0]=formatMsg(a,j[0])),A.apply(ne.console,j)}:noop}A.enableLogs=function(a){if(!0===a||"object"===typeof a){!function exportLoggerFunctions(a){for(var A=[],j=1;j<arguments.length;j++)A[j-1]=arguments[j];A.forEach((function(A){q[A]=a[A]?a[A].bind(a):consolePrintFn(A)}))}(a,"debug","log","info","warn","error");try{q.log()}catch(A){q=B}}else q=B},A.logger=q},"./src/utils/mediakeys-helper.js":function srcUtilsMediakeysHelperJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P="undefined"!==typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;A.requestMediaKeySystemAccess=P},"./src/utils/mediasource-helper.js":function srcUtilsMediasourceHelperJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getMediaSource=function getMediaSource(){if("undefined"!==typeof window)return window.MediaSource||window.WebKitMediaSource}},"./src/utils/output-filter.js":function srcUtilsOutputFilterJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=function(){function OutputFilter(a,A){this.timelineController=a,this.trackName=A,this.startTime=null,this.endTime=null,this.screen=null}return OutputFilter.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},OutputFilter.prototype.newCue=function(a,A,j){(null===this.startTime||this.startTime>a)&&(this.startTime=a),this.endTime=A,this.screen=j,this.timelineController.createCaptionsTrack(this.trackName)},OutputFilter}();A.default=P},"./src/utils/texttrack-utils.js":function srcUtilsTexttrackUtilsJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.sendAddTrackEvent=function sendAddTrackEvent(a,A){var j=null;try{j=new window.Event("addtrack")}catch(P){(j=document.createEvent("Event")).initEvent("addtrack",!1,!1)}j.track=a,A.dispatchEvent(j)},A.clearCurrentCues=function clearCurrentCues(a){if(a&&a.cues)for(;a.cues.length>0;)a.removeCue(a.cues[0])}},"./src/utils/time-ranges.js":function srcUtilsTimeRangesJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.default={toString:function toString(a){for(var A="",j=a.length,P=0;P<j;P++)A+="["+a.start(P).toFixed(3)+","+a.end(P).toFixed(3)+"]";return A}}},"./src/utils/vttcue.js":function srcUtilsVttcueJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function(){if("undefined"!==typeof window&&window.VTTCue)return window.VTTCue;var a={"":!0,lr:!0,rl:!0},A={start:!0,middle:!0,end:!0,left:!0,right:!0};function findAlignSetting(a){return"string"===typeof a&&(!!A[a.toLowerCase()]&&a.toLowerCase())}function extend(a){for(var A=1;A<arguments.length;A++){var j=arguments[A];for(var P in j)a[P]=j[P]}return a}function VTTCue(A,j,P){var B=this,q=function(){if("undefined"!==typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),ne={};q?B=document.createElement("custom"):ne.enumerable=!0,B.hasBeenReset=!1;var ie="",oe=!1,se=A,le=j,he=P,pe=null,ge="",me=!0,ve="auto",ye="start",_e=50,we="middle",ke=50,Oe="middle";if(Object.defineProperty(B,"id",extend({},ne,{get:function get(){return ie},set:function set(a){ie=""+a}})),Object.defineProperty(B,"pauseOnExit",extend({},ne,{get:function get(){return oe},set:function set(a){oe=!!a}})),Object.defineProperty(B,"startTime",extend({},ne,{get:function get(){return se},set:function set(a){if("number"!==typeof a)throw new TypeError("Start time must be set to a number.");se=a,this.hasBeenReset=!0}})),Object.defineProperty(B,"endTime",extend({},ne,{get:function get(){return le},set:function set(a){if("number"!==typeof a)throw new TypeError("End time must be set to a number.");le=a,this.hasBeenReset=!0}})),Object.defineProperty(B,"text",extend({},ne,{get:function get(){return he},set:function set(a){he=""+a,this.hasBeenReset=!0}})),Object.defineProperty(B,"region",extend({},ne,{get:function get(){return pe},set:function set(a){pe=a,this.hasBeenReset=!0}})),Object.defineProperty(B,"vertical",extend({},ne,{get:function get(){return ge},set:function set(A){var j=function findDirectionSetting(A){return"string"===typeof A&&(!!a[A.toLowerCase()]&&A.toLowerCase())}(A);if(!1===j)throw new SyntaxError("An invalid or illegal string was specified.");ge=j,this.hasBeenReset=!0}})),Object.defineProperty(B,"snapToLines",extend({},ne,{get:function get(){return me},set:function set(a){me=!!a,this.hasBeenReset=!0}})),Object.defineProperty(B,"line",extend({},ne,{get:function get(){return ve},set:function set(a){if("number"!==typeof a&&"auto"!==a)throw new SyntaxError("An invalid number or illegal string was specified.");ve=a,this.hasBeenReset=!0}})),Object.defineProperty(B,"lineAlign",extend({},ne,{get:function get(){return ye},set:function set(a){var A=findAlignSetting(a);if(!A)throw new SyntaxError("An invalid or illegal string was specified.");ye=A,this.hasBeenReset=!0}})),Object.defineProperty(B,"position",extend({},ne,{get:function get(){return _e},set:function set(a){if(a<0||a>100)throw new Error("Position must be between 0 and 100.");_e=a,this.hasBeenReset=!0}})),Object.defineProperty(B,"positionAlign",extend({},ne,{get:function get(){return we},set:function set(a){var A=findAlignSetting(a);if(!A)throw new SyntaxError("An invalid or illegal string was specified.");we=A,this.hasBeenReset=!0}})),Object.defineProperty(B,"size",extend({},ne,{get:function get(){return ke},set:function set(a){if(a<0||a>100)throw new Error("Size must be between 0 and 100.");ke=a,this.hasBeenReset=!0}})),Object.defineProperty(B,"align",extend({},ne,{get:function get(){return Oe},set:function set(a){var A=findAlignSetting(a);if(!A)throw new SyntaxError("An invalid or illegal string was specified.");Oe=A,this.hasBeenReset=!0}})),B.displayState=void 0,q)return B}return VTTCue.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},VTTCue}()},"./src/utils/vttparser.js":function srcUtilsVttparserJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/vttcue.js"),B=function StringDecoder(){return{decode:function decode(a){if(!a)return"";if("string"!==typeof a)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}};function VTTParser(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new B,this.regionList=[]}function Settings(){this.values=Object.create(null)}function parseOptions(a,A,j,P){var B=P?a.split(P):[a];for(var q in B)if("string"===typeof B[q]){var ne=B[q].split(j);if(2===ne.length)A(ne[0],ne[1])}}Settings.prototype={set:function set(a,A){this.get(a)||""===A||(this.values[a]=A)},get:function get(a,A,j){return j?this.has(a)?this.values[a]:A[j]:this.has(a)?this.values[a]:A},has:function has(a){return a in this.values},alt:function alt(a,A,j){for(var P=0;P<j.length;++P)if(A===j[P]){this.set(a,A);break}},integer:function integer(a,A){/^-?\d+$/.test(A)&&this.set(a,parseInt(A,10))},percent:function percent(a,A){return!!(A.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(A=parseFloat(A))>=0&&A<=100)&&(this.set(a,A),!0)}};var q=new P.default(0,0,0),ne="middle"===q.align?"middle":"center";function parseCue(a,A,j){var P=a;function consumeTimeStamp(){var A=function parseTimeStamp(a){function computeSeconds(a,A,j,P){return 3600*(0|a)+60*(0|A)+(0|j)+(0|P)/1e3}var A=a.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return A?A[3]?computeSeconds(A[1],A[2],A[3].replace(":",""),A[4]):A[1]>59?computeSeconds(A[1],A[2],0,A[4]):computeSeconds(0,A[1],A[2],A[4]):null}(a);if(null===A)throw new Error("Malformed timestamp: "+P);return a=a.replace(/^[^\sa-zA-Z-]+/,""),A}function skipWhitespace(){a=a.replace(/^\s+/,"")}if(skipWhitespace(),A.startTime=consumeTimeStamp(),skipWhitespace(),"--\x3e"!==a.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+P);a=a.substr(3),skipWhitespace(),A.endTime=consumeTimeStamp(),skipWhitespace(),function consumeCueSettings(a,A){var P=new Settings;parseOptions(a,(function(a,A){switch(a){case"region":for(var B=j.length-1;B>=0;B--)if(j[B].id===A){P.set(a,j[B].region);break}break;case"vertical":P.alt(a,A,["rl","lr"]);break;case"line":var q=A.split(","),ie=q[0];P.integer(a,ie),P.percent(a,ie)&&P.set("snapToLines",!1),P.alt(a,ie,["auto"]),2===q.length&&P.alt("lineAlign",q[1],["start",ne,"end"]);break;case"position":q=A.split(","),P.percent(a,q[0]),2===q.length&&P.alt("positionAlign",q[1],["start",ne,"end","line-left","line-right","auto"]);break;case"size":P.percent(a,A);break;case"align":P.alt(a,A,["start",ne,"end","left","right"])}}),/:/,/\s/),A.region=P.get("region",null),A.vertical=P.get("vertical","");var B=P.get("line","auto");"auto"===B&&-1===q.line&&(B=-1),A.line=B,A.lineAlign=P.get("lineAlign","start"),A.snapToLines=P.get("snapToLines",!0),A.size=P.get("size",100),A.align=P.get("align",ne);var ie=P.get("position","auto");"auto"===ie&&50===q.position&&(ie="start"===A.align||"left"===A.align?0:"end"===A.align||"right"===A.align?100:50),A.position=ie}(a,A)}function fixLineBreaks(a){return a.replace(/<br(?: \/)?>/gi,"\n")}A.fixLineBreaks=fixLineBreaks,VTTParser.prototype={parse:function parse(a){var A=this;function collectNextLine(){var a=A.buffer,j=0;for(a=fixLineBreaks(a);j<a.length&&"\r"!==a[j]&&"\n"!==a[j];)++j;var P=a.substr(0,j);return"\r"===a[j]&&++j,"\n"===a[j]&&++j,A.buffer=a.substr(j),P}a&&(A.buffer+=A.decoder.decode(a,{stream:!0}));try{var j=void 0;if("INITIAL"===A.state){if(!/\r\n|\n/.test(A.buffer))return this;var B=(j=collectNextLine()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!B||!B[0])throw new Error("Malformed WebVTT signature.");A.state="HEADER"}for(var q=!1;A.buffer;){if(!/\r\n|\n/.test(A.buffer))return this;switch(q?q=!1:j=collectNextLine(),A.state){case"HEADER":/:/.test(j)?parseOptions(j,(function(a,A){}),/:/):j||(A.state="ID");continue;case"NOTE":j||(A.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(j)){A.state="NOTE";break}if(!j)continue;if(A.cue=new P.default(0,0,""),A.state="CUE",-1===j.indexOf("--\x3e")){A.cue.id=j;continue}case"CUE":try{parseCue(j,A.cue,A.regionList)}catch(ie){A.cue=null,A.state="BADCUE";continue}A.state="CUETEXT";continue;case"CUETEXT":var ne=-1!==j.indexOf("--\x3e");if(!j||ne&&(q=!0)){A.oncue&&A.oncue(A.cue),A.cue=null,A.state="ID";continue}A.cue.text&&(A.cue.text+="\n"),A.cue.text+=j;continue;case"BADCUE":j||(A.state="ID");continue}}}catch(ie){"CUETEXT"===A.state&&A.cue&&A.oncue&&A.oncue(A.cue),A.cue=null,A.state="INITIAL"===A.state?"BADWEBVTT":"BADCUE"}return this},flush:function flush(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(a){throw a}return this.onflush&&this.onflush(),this}},A.default=VTTParser},"./src/utils/webvtt-parser.js":function srcUtilsWebvttParserJs(a,A,j){"use strict";(function(a){Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/vttparser.js"),B=j("./src/demux/id3.js"),q=function startsWith(a,A,j){return a.substr(j||0,A.length)===A},ne=function hash(a){for(var hash=5381,A=a.length;A;)hash=33*hash^a.charCodeAt(--A);return(hash>>>0).toString()},ie={parse:function parse(A,j,ie,oe,se,le){var he,pe=B.utf8ArrayToStr(new Uint8Array(A)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),ge="00:00.000",me=0,ve=0,ye=0,_e=[],we=!0,ke=new P.default;ke.oncue=function(a){var A=ie[oe],j=ie.ccOffset;A&&A.new&&(void 0!==ve?j=ie.ccOffset=A.start:function calculateOffset(a,A,j){var P=a[A],B=a[P.prevCC];if(!B||!B.new&&P.new)return a.ccOffset=a.presentationOffset=P.start,void(P.new=!1);for(;B&&B.new;)a.ccOffset+=P.start-B.start,P.new=!1,B=a[(P=B).prevCC];a.presentationOffset=j}(ie,oe,ye)),ye&&(j=ye-ie.presentationOffset),a.startTime+=j-ve,a.endTime+=j-ve,a.id=ne(a.startTime.toString())+ne(a.endTime.toString())+ne(a.text),a.text=decodeURIComponent(encodeURIComponent(a.text)),a.endTime>0&&_e.push(a)},ke.onparsingerror=function(a){he=a},ke.onflush=function(){he&&le?le(he):se(_e)},pe.forEach((function(A){if(we){if(q(A,"X-TIMESTAMP-MAP=")){we=!1,A.substr(16).split(",").forEach((function(a){q(a,"LOCAL:")?ge=a.substr(6):q(a,"MPEGTS:")&&(me=parseInt(a.substr(7)))}));try{j+(9e4*ie[oe].start||0)<0&&(j+=8589934592),me-=j,ve=function cueString2millis(A){var j=parseInt(A.substr(-3)),P=parseInt(A.substr(-6,2)),B=parseInt(A.substr(-9,2)),q=A.length>9?parseInt(A.substr(0,A.indexOf(":"))):0;return a.isFinite(j)&&a.isFinite(P)&&a.isFinite(B)&&a.isFinite(q)?(j+=1e3*P,j+=6e4*B,j+=36e5*q):-1}(ge)/1e3,ye=me/9e4,-1===ve&&(he=new Error("Malformed X-TIMESTAMP-MAP: "+A))}catch(P){he=new Error("Malformed X-TIMESTAMP-MAP: "+A)}return}""===A&&(we=!1)}ke.parse(A+"\n")})),ke.flush()}};A.default=ie}).call(this,j("./src/polyfills/number.js").Number)},"./src/utils/xhr-loader.js":function srcUtilsXhrLoaderJs(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j("./src/utils/logger.js"),B=window.performance,q=window.XMLHttpRequest,ne=function(){function XhrLoader(a){a&&a.xhrSetup&&(this.xhrSetup=a.xhrSetup)}return XhrLoader.prototype.destroy=function(){this.abort(),this.loader=null},XhrLoader.prototype.abort=function(){var a=this.loader;a&&4!==a.readyState&&(this.stats.aborted=!0,a.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},XhrLoader.prototype.load=function(a,A,j){this.context=a,this.config=A,this.callbacks=j,this.stats={trequest:B.now(),retry:0},this.retryDelay=A.retryDelay,this.loadInternal()},XhrLoader.prototype.loadInternal=function(){var a,A=this.context;a=this.loader=new q;var j=this.stats;j.tfirst=0,j.loaded=0;var P=this.xhrSetup;try{if(P)try{P(a,A.url)}catch(B){a.open("GET",A.url,!0),P(a,A.url)}a.readyState||a.open("GET",A.url,!0)}catch(B){return void this.callbacks.onError({code:a.status,text:B.message},A,a)}A.rangeEnd&&a.setRequestHeader("Range","bytes="+A.rangeStart+"-"+(A.rangeEnd-1)),a.onreadystatechange=this.readystatechange.bind(this),a.onprogress=this.loadprogress.bind(this),a.responseType=A.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),a.send()},XhrLoader.prototype.readystatechange=function(a){var A=a.currentTarget,j=A.readyState,q=this.stats,ne=this.context,ie=this.config;if(!q.aborted&&j>=2)if(window.clearTimeout(this.requestTimeout),0===q.tfirst&&(q.tfirst=Math.max(B.now(),q.trequest)),4===j){var oe=A.status;if(oe>=200&&oe<300){q.tload=Math.max(q.tfirst,B.now());var se=void 0,le=void 0;le="arraybuffer"===ne.responseType?(se=A.response).byteLength:(se=A.responseText).length,q.loaded=q.total=le;var he={url:A.responseURL,data:se};this.callbacks.onSuccess(he,q,ne,A)}else q.retry>=ie.maxRetry||oe>=400&&oe<499?(P.logger.error(oe+" while loading "+ne.url),this.callbacks.onError({code:oe,text:A.statusText},ne,A)):(P.logger.warn(oe+" while loading "+ne.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,ie.maxRetryDelay),q.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),ie.timeout)},XhrLoader.prototype.loadtimeout=function(){P.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},XhrLoader.prototype.loadprogress=function(a){var A=a.currentTarget,j=this.stats;j.loaded=a.loaded,a.lengthComputable&&(j.total=a.total);var P=this.callbacks.onProgress;P&&P(j,this.context,null,A)},XhrLoader}();A.default=ne}}).default}))},,function(a,A){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(a,A){var j=0,P=Math.random();a.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++j+P).toString(36))}},function(a,A,j){var P=j(40).f,B=j(57),q=j(27)("toStringTag");a.exports=function(a,A,j){a&&!B(a=j?a:a.prototype,q)&&P(a,q,{configurable:!0,value:A})}},function(a,A){A.f={}.propertyIsEnumerable},function(a,A,j){"use strict";a.exports=1e-4},function(a,A,j){(function(P){function load(){var a;try{a=A.storage.debug}catch(j){}return!a&&"undefined"!==typeof P&&"env"in P&&(a=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).DEBUG),a}(A=a.exports=j(471)).log=function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},A.formatArgs=function formatArgs(a){var j=this.useColors;if(a[0]=(j?"%c":"")+this.namespace+(j?" %c":" ")+a[0]+(j?"%c ":" ")+"+"+A.humanize(this.diff),!j)return;var P="color: "+this.color;a.splice(1,0,P,"color: inherit");var B=0,q=0;a[0].replace(/%[a-zA-Z%]/g,(function(a){"%%"!==a&&(B++,"%c"===a&&(q=B))})),a.splice(q,0,P)},A.save=function save(a){try{null==a?A.storage.removeItem("debug"):A.storage.debug=a}catch(j){}},A.load=load,A.useColors=function useColors(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},A.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function localstorage(){try{return window.localStorage}catch(a){}}(),A.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],A.formatters.j=function(a){try{return JSON.stringify(a)}catch(A){return"[UnexpectedJSONParseError]: "+A.message}},A.enable(load())}).call(this,j(66))},function(a,A){A.encode=function(a){var A="";for(var j in a)a.hasOwnProperty(j)&&(A.length&&(A+="&"),A+=encodeURIComponent(j)+"="+encodeURIComponent(a[j]));return A},A.decode=function(a){for(var A={},j=a.split("&"),P=0,B=j.length;P<B;P++){var q=j[P].split("=");A[decodeURIComponent(q[0])]=decodeURIComponent(q[1])}return A}},function(a,A){a.exports=function(a,A){var j=function fn(){};j.prototype=A.prototype,a.prototype=new j,a.prototype.constructor=a}},function(a,A,j){(function(P){function load(){var a;try{a=A.storage.debug}catch(j){}return!a&&"undefined"!==typeof P&&"env"in P&&(a=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).DEBUG),a}(A=a.exports=j(488)).log=function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},A.formatArgs=function formatArgs(a){var j=this.useColors;if(a[0]=(j?"%c":"")+this.namespace+(j?" %c":" ")+a[0]+(j?"%c ":" ")+"+"+A.humanize(this.diff),!j)return;var P="color: "+this.color;a.splice(1,0,P,"color: inherit");var B=0,q=0;a[0].replace(/%[a-zA-Z%]/g,(function(a){"%%"!==a&&(B++,"%c"===a&&(q=B))})),a.splice(q,0,P)},A.save=function save(a){try{null==a?A.storage.removeItem("debug"):A.storage.debug=a}catch(j){}},A.load=load,A.useColors=function useColors(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},A.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function localstorage(){try{return window.localStorage}catch(a){}}(),A.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],A.formatters.j=function(a){try{return JSON.stringify(a)}catch(A){return"[UnexpectedJSONParseError]: "+A.message}},A.enable(load())}).call(this,j(66))},function(a,A,j){"use strict";function _iterableToArray(a){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}j.d(A,"a",(function(){return _iterableToArray}))},function(a,A,j){"use strict";function _arrayWithHoles(a){if(Array.isArray(a))return a}j.d(A,"a",(function(){return _arrayWithHoles}))},function(a,A,j){"use strict";function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}j.d(A,"a",(function(){return _nonIterableRest}))},function(a,A,j){"use strict";function _setPrototypeOf(a,A){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(a,A){return a.__proto__=A,a})(a,A)}j.d(A,"a",(function(){return _setPrototypeOf}))},function(a,A,j){"use strict";function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(a){return!1}}j.d(A,"a",(function(){return _isNativeReflectConstruct}))},function(a,A,j){"use strict";(function(a){j.d(A,"a",(function(){return embed})),j.d(A,"b",(function(){return jn}));var P=j(5),B=j(3),q=j(4),ne=j(241),ie=j(102),oe=j.n(ie),se=j(39),le=j(229),he=j(239),pe=j(147),ge=j(232),me=j(233);function _defineProperty(a,A,j){return A in a?Object.defineProperty(a,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):a[A]=j,a}function asyncGeneratorStep(a,A,j,P,B,q,ne){try{var ie=a[q](ne),oe=ie.value}catch(se){return void j(se)}ie.done?A(oe):Promise.resolve(oe).then(P,B)}function _asyncToGenerator(a){return function(){var A=this,j=arguments;return new Promise((function(P,B){var q=a.apply(A,j);function _next(a){asyncGeneratorStep(q,P,B,_next,_throw,"next",a)}function _throw(a){asyncGeneratorStep(q,P,B,_next,_throw,"throw",a)}_next(void 0)}))}}var ve=Object.prototype,ye=ve.hasOwnProperty,_e="function"===typeof Symbol?Symbol:{},we=_e.iterator||"@@iterator",ke=_e.asyncIterator||"@@asyncIterator",Oe=_e.toStringTag||"@@toStringTag";function wrap(a,A,j,P){var B=A&&A.prototype instanceof Generator?A:Generator,q=Object.create(B.prototype),ne=new Context(P||[]);return q._invoke=function makeInvokeMethod(a,A,j){var P="suspendedStart";return function invoke(B,q){if("executing"===P)throw new Error("Generator is already running");if("completed"===P){if("throw"===B)throw q;return doneResult()}for(j.method=B,j.arg=q;;){var ne=j.delegate;if(ne){var ie=maybeInvokeDelegate(ne,j);if(ie){if(ie===Se)continue;return ie}}if("next"===j.method)j.sent=j._sent=j.arg;else if("throw"===j.method){if("suspendedStart"===P)throw P="completed",j.arg;j.dispatchException(j.arg)}else"return"===j.method&&j.abrupt("return",j.arg);P="executing";var oe=tryCatch(a,A,j);if("normal"===oe.type){if(P=j.done?"completed":"suspendedYield",oe.arg===Se)continue;return{value:oe.arg,done:j.done}}"throw"===oe.type&&(P="completed",j.method="throw",j.arg=oe.arg)}}}(a,j,ne),q}function tryCatch(a,A,j){try{return{type:"normal",arg:a.call(A,j)}}catch(P){return{type:"throw",arg:P}}}var Se={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var Te={};Te[we]=function(){return this};var Ae=Object.getPrototypeOf,je=Ae&&Ae(Ae(values([])));je&&je!==ve&&ye.call(je,we)&&(Te=je);var Fe=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(Te);function defineIteratorMethods(a){["next","throw","return"].forEach((function(A){a[A]=function(a){return this._invoke(A,a)}}))}function isGeneratorFunction(a){var A="function"===typeof a&&a.constructor;return!!A&&(A===GeneratorFunction||"GeneratorFunction"===(A.displayName||A.name))}function AsyncIterator(a,A){var j;this._invoke=function enqueue(P,B){function callInvokeWithMethodAndArg(){return new A((function(j,q){!function invoke(j,P,B,q){var ne=tryCatch(a[j],a,P);if("throw"!==ne.type){var ie=ne.arg,oe=ie.value;return oe&&"object"===typeof oe&&ye.call(oe,"__await")?A.resolve(oe.__await).then((function(a){invoke("next",a,B,q)}),(function(a){invoke("throw",a,B,q)})):A.resolve(oe).then((function(a){ie.value=a,B(ie)}),(function(a){return invoke("throw",a,B,q)}))}q(ne.arg)}(P,B,j,q)}))}return j=j?j.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(a,A){var j=a.iterator[A.method];if(void 0===j){if(A.delegate=null,"throw"===A.method){if(a.iterator.return&&(A.method="return",A.arg=void 0,maybeInvokeDelegate(a,A),"throw"===A.method))return Se;A.method="throw",A.arg=new TypeError("The iterator does not provide a 'throw' method")}return Se}var P=tryCatch(j,a.iterator,A.arg);if("throw"===P.type)return A.method="throw",A.arg=P.arg,A.delegate=null,Se;var B=P.arg;return B?B.done?(A[a.resultName]=B.value,A.next=a.nextLoc,"return"!==A.method&&(A.method="next",A.arg=void 0),A.delegate=null,Se):B:(A.method="throw",A.arg=new TypeError("iterator result is not an object"),A.delegate=null,Se)}function pushTryEntry(a){var A={tryLoc:a[0]};1 in a&&(A.catchLoc=a[1]),2 in a&&(A.finallyLoc=a[2],A.afterLoc=a[3]),this.tryEntries.push(A)}function resetTryEntry(a){var A=a.completion||{};A.type="normal",delete A.arg,a.completion=A}function Context(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(pushTryEntry,this),this.reset(!0)}function values(a){if(a){var A=a[we];if(A)return A.call(a);if("function"===typeof a.next)return a;if(!isNaN(a.length)){var j=-1,P=function next(){for(;++j<a.length;)if(ye.call(a,j))return next.value=a[j],next.done=!1,next;return next.value=void 0,next.done=!0,next};return P.next=P}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}GeneratorFunction.prototype=Fe.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[Oe]=GeneratorFunction.displayName="GeneratorFunction",defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[ke]=function(){return this},defineIteratorMethods(Fe),Fe[Oe]="Generator",Fe[we]=function(){return this},Fe.toString=function(){return"[object Generator]"},Context.prototype={constructor:Context,reset:function reset(a){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!a)for(var A in this)"t"===A.charAt(0)&&ye.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=void 0)},stop:function stop(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function dispatchException(a){if(this.done)throw a;var A=this;function handle(j,P){return B.type="throw",B.arg=a,A.next=j,P&&(A.method="next",A.arg=void 0),!!P}for(var j=this.tryEntries.length-1;j>=0;--j){var P=this.tryEntries[j],B=P.completion;if("root"===P.tryLoc)return handle("end");if(P.tryLoc<=this.prev){var q=ye.call(P,"catchLoc"),ne=ye.call(P,"finallyLoc");if(q&&ne){if(this.prev<P.catchLoc)return handle(P.catchLoc,!0);if(this.prev<P.finallyLoc)return handle(P.finallyLoc)}else if(q){if(this.prev<P.catchLoc)return handle(P.catchLoc,!0)}else{if(!ne)throw new Error("try statement without catch or finally");if(this.prev<P.finallyLoc)return handle(P.finallyLoc)}}}},abrupt:function abrupt(a,A){for(var j=this.tryEntries.length-1;j>=0;--j){var P=this.tryEntries[j];if(P.tryLoc<=this.prev&&ye.call(P,"finallyLoc")&&this.prev<P.finallyLoc){var B=P;break}}B&&("break"===a||"continue"===a)&&B.tryLoc<=A&&A<=B.finallyLoc&&(B=null);var q=B?B.completion:{};return q.type=a,q.arg=A,B?(this.method="next",this.next=B.finallyLoc,Se):this.complete(q)},complete:function complete(a,A){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&A&&(this.next=A),Se},finish:function finish(a){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j.finallyLoc===a)return this.complete(j.completion,j.afterLoc),resetTryEntry(j),Se}},catch:function _catch(a){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j.tryLoc===a){var P=j.completion;if("throw"===P.type){var B=P.arg;resetTryEntry(j)}return B}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(a,A,j){return this.delegate={iterator:values(a),resultName:A,nextLoc:j},"next"===this.method&&(this.arg=void 0),Se}};var Re={wrap:wrap,isGeneratorFunction:isGeneratorFunction,AsyncIterator:AsyncIterator,mark:function mark(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,GeneratorFunctionPrototype):(a.__proto__=GeneratorFunctionPrototype,Oe in a||(a[Oe]="GeneratorFunction")),a.prototype=Object.create(Fe),a},awrap:function awrap(a){return{__await:a}},async:function async(a,A,j,P,B){void 0===B&&(B=Promise);var q=new AsyncIterator(wrap(a,A,j,P),B);return isGeneratorFunction(A)?q:q.next().then((function(a){return a.done?a.value:q.next()}))},keys:function keys(a){var A=[];for(var j in a)A.push(j);return A.reverse(),function next(){for(;A.length;){var j=A.pop();if(j in a)return next.value=j,next.done=!1,next}return next.done=!0,next}},values:values},Me=Yallist$1;function Yallist$1(a){var A=this;if(A instanceof Yallist$1||(A=new Yallist$1),A.tail=null,A.head=null,A.length=0,a&&"function"===typeof a.forEach)a.forEach((function(a){A.push(a)}));else if(arguments.length>0)for(var j=0,P=arguments.length;j<P;j++)A.push(arguments[j]);return A}function insert(a,A,j){var P=A===a.head?new Node(j,null,A,a):new Node(j,A,A.next,a);return null===P.next&&(a.tail=P),null===P.prev&&(a.head=P),a.length++,P}function push(a,A){a.tail=new Node(A,a.tail,null,a),a.head||(a.head=a.tail),a.length++}function unshift(a,A){a.head=new Node(A,null,a.head,a),a.tail||(a.tail=a.head),a.length++}function Node(a,A,j,P){if(!(this instanceof Node))return new Node(a,A,j,P);this.list=P,this.value=a,A?(A.next=this,this.prev=A):this.prev=null,j?(j.prev=this,this.next=j):this.next=null}Yallist$1.Node=Node,Yallist$1.create=Yallist$1,Yallist$1.prototype.removeNode=function(a){if(a.list!==this)throw new Error("removing node which does not belong to this list");var A=a.next,j=a.prev;return A&&(A.prev=j),j&&(j.next=A),a===this.head&&(this.head=A),a===this.tail&&(this.tail=j),a.list.length--,a.next=null,a.prev=null,a.list=null,A},Yallist$1.prototype.unshiftNode=function(a){if(a!==this.head){a.list&&a.list.removeNode(a);var A=this.head;a.list=this,a.next=A,A&&(A.prev=a),this.head=a,this.tail||(this.tail=a),this.length++}},Yallist$1.prototype.pushNode=function(a){if(a!==this.tail){a.list&&a.list.removeNode(a);var A=this.tail;a.list=this,a.prev=A,A&&(A.next=a),this.tail=a,this.head||(this.head=a),this.length++}},Yallist$1.prototype.push=function(){for(var a=0,A=arguments.length;a<A;a++)push(this,arguments[a]);return this.length},Yallist$1.prototype.unshift=function(){for(var a=0,A=arguments.length;a<A;a++)unshift(this,arguments[a]);return this.length},Yallist$1.prototype.pop=function(){if(this.tail){var a=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,a}},Yallist$1.prototype.shift=function(){if(this.head){var a=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,a}},Yallist$1.prototype.forEach=function(a,A){A=A||this;for(var j=this.head,P=0;null!==j;P++)a.call(A,j.value,P,this),j=j.next},Yallist$1.prototype.forEachReverse=function(a,A){A=A||this;for(var j=this.tail,P=this.length-1;null!==j;P--)a.call(A,j.value,P,this),j=j.prev},Yallist$1.prototype.get=function(a){for(var A=0,j=this.head;null!==j&&A<a;A++)j=j.next;if(A===a&&null!==j)return j.value},Yallist$1.prototype.getReverse=function(a){for(var A=0,j=this.tail;null!==j&&A<a;A++)j=j.prev;if(A===a&&null!==j)return j.value},Yallist$1.prototype.map=function(a,A){A=A||this;for(var j=new Yallist$1,P=this.head;null!==P;)j.push(a.call(A,P.value,this)),P=P.next;return j},Yallist$1.prototype.mapReverse=function(a,A){A=A||this;for(var j=new Yallist$1,P=this.tail;null!==P;)j.push(a.call(A,P.value,this)),P=P.prev;return j},Yallist$1.prototype.reduce=function(a,A){var j,P=this.head;if(arguments.length>1)j=A;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");P=this.head.next,j=this.head.value}for(var B=0;null!==P;B++)j=a(j,P.value,B),P=P.next;return j},Yallist$1.prototype.reduceReverse=function(a,A){var j,P=this.tail;if(arguments.length>1)j=A;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");P=this.tail.prev,j=this.tail.value}for(var B=this.length-1;null!==P;B--)j=a(j,P.value,B),P=P.prev;return j},Yallist$1.prototype.toArray=function(){for(var a=new Array(this.length),A=0,j=this.head;null!==j;A++)a[A]=j.value,j=j.next;return a},Yallist$1.prototype.toArrayReverse=function(){for(var a=new Array(this.length),A=0,j=this.tail;null!==j;A++)a[A]=j.value,j=j.prev;return a},Yallist$1.prototype.slice=function(a,A){(A=A||this.length)<0&&(A+=this.length),(a=a||0)<0&&(a+=this.length);var j=new Yallist$1;if(A<a||A<0)return j;a<0&&(a=0),A>this.length&&(A=this.length);for(var P=0,B=this.head;null!==B&&P<a;P++)B=B.next;for(;null!==B&&P<A;P++,B=B.next)j.push(B.value);return j},Yallist$1.prototype.sliceReverse=function(a,A){(A=A||this.length)<0&&(A+=this.length),(a=a||0)<0&&(a+=this.length);var j=new Yallist$1;if(A<a||A<0)return j;a<0&&(a=0),A>this.length&&(A=this.length);for(var P=this.length,B=this.tail;null!==B&&P>A;P--)B=B.prev;for(;null!==B&&P>a;P--,B=B.prev)j.push(B.value);return j},Yallist$1.prototype.splice=function(a,A){a>this.length&&(a=this.length-1),a<0&&(a=this.length+a);for(var j=0,P=this.head;null!==P&&j<a;j++)P=P.next;var B=[];for(j=0;P&&j<A;j++)B.push(P.value),P=this.removeNode(P);null===P&&(P=this.tail),P!==this.head&&P!==this.tail&&(P=P.prev);for(j=0;j<(arguments.length<=2?0:arguments.length-2);j++)P=insert(this,P,j+2<2||arguments.length<=j+2?void 0:arguments[j+2]);return B},Yallist$1.prototype.reverse=function(){for(var a=this.head,A=this.tail,j=a;null!==j;j=j.prev){var P=j.prev;j.prev=j.next,j.next=P}return this.head=A,this.tail=a,this};try{Yallist$1.prototype[Symbol.iterator]=Re.mark((function _callee(){var a;return Re.wrap((function _callee$(A){for(;;)switch(A.prev=A.next){case 0:a=this.head;case 1:if(!a){A.next=7;break}return A.next=4,a.value;case 4:a=a.next,A.next=1;break;case 7:case"end":return A.stop()}}),_callee,this)}))}catch(Un){}var Ne=Me,Be=Symbol("max"),Ue=Symbol("length"),We=Symbol("lengthCalculator"),Ve=Symbol("allowStale"),Ye=Symbol("maxAge"),$e=Symbol("dispose"),Xe=Symbol("noDisposeOnSet"),et=Symbol("lruList"),tt=Symbol("cache"),nt=Symbol("updateAgeOnGet"),rt=function naiveLength(){return 1},it=function(){function LRUCache(a){if(Object(B.a)(this,LRUCache),"number"===typeof a&&(a={max:a}),a||(a={}),a.max&&("number"!==typeof a.max||a.max<0))throw new TypeError("max must be a non-negative number");this[Be]=a.max||1/0;var A=a.length||rt;if(this[We]="function"!==typeof A?rt:A,this[Ve]=a.stale||!1,a.maxAge&&"number"!==typeof a.maxAge)throw new TypeError("maxAge must be a number");this[Ye]=a.maxAge||0,this[$e]=a.dispose,this[Xe]=a.noDisposeOnSet||!1,this[nt]=a.updateAgeOnGet||!1,this.reset()}return Object(q.a)(LRUCache,[{key:"max",get:function get(){return this[Be]},set:function set(a){if("number"!==typeof a||a<0)throw new TypeError("max must be a non-negative number");this[Be]=a||1/0,st(this)}},{key:"allowStale",get:function get(){return this[Ve]},set:function set(a){this[Ve]=!!a}},{key:"maxAge",get:function get(){return this[Ye]},set:function set(a){if("number"!==typeof a)throw new TypeError("maxAge must be a non-negative number");this[Ye]=a,st(this)}},{key:"lengthCalculator",get:function get(){return this[We]},set:function set(a){var A=this;"function"!==typeof a&&(a=rt),a!==this[We]&&(this[We]=a,this[Ue]=0,this[et].forEach((function(a){a.length=A[We](a.value,a.key),A[Ue]+=a.length}))),st(this)}},{key:"length",get:function get(){return this[Ue]}},{key:"itemCount",get:function get(){return this[et].length}},{key:"rforEach",value:function rforEach(a,A){A=A||this;for(var j=this[et].tail;null!==j;){var P=j.prev;ct(this,a,j,A),j=P}}},{key:"forEach",value:function forEach(a,A){A=A||this;for(var j=this[et].head;null!==j;){var P=j.next;ct(this,a,j,A),j=P}}},{key:"keys",value:function keys(){return this[et].toArray().map((function(a){return a.key}))}},{key:"values",value:function values(){return this[et].toArray().map((function(a){return a.value}))}},{key:"reset",value:function reset(){var a=this;this[$e]&&this[et]&&this[et].length&&this[et].forEach((function(A){return a[$e](A.key,A.value)})),this[tt]=new Map,this[et]=new Ne,this[Ue]=0}},{key:"dump",value:function dump(){var a=this;return this[et].map((function(A){return!ot(a,A)&&{k:A.key,v:A.value,e:A.now+(A.maxAge||0)}})).toArray().filter((function(a){return a}))}},{key:"dumpLru",value:function dumpLru(){return this[et]}},{key:"set",value:function set(a,A,j){if((j=j||this[Ye])&&"number"!==typeof j)throw new TypeError("maxAge must be a number");var P=j?Date.now():0,B=this[We](A,a);if(this[tt].has(a)){if(B>this[Be])return ut(this,this[tt].get(a)),!1;var q=this[tt].get(a).value;return this[$e]&&(this[Xe]||this[$e](a,q.value)),q.now=P,q.maxAge=j,q.value=A,this[Ue]+=B-q.length,q.length=B,this.get(a),st(this),!0}var ne=new lt(a,A,B,P,j);return ne.length>this[Be]?(this[$e]&&this[$e](a,A),!1):(this[Ue]+=ne.length,this[et].unshift(ne),this[tt].set(a,this[et].head),st(this),!0)}},{key:"has",value:function has(a){if(!this[tt].has(a))return!1;var A=this[tt].get(a).value;return!ot(this,A)}},{key:"get",value:function get(a){return at(this,a,!0)}},{key:"peek",value:function peek(a){return at(this,a,!1)}},{key:"pop",value:function pop(){var a=this[et].tail;return a?(ut(this,a),a.value):null}},{key:"del",value:function del(a){ut(this,this[tt].get(a))}},{key:"load",value:function load(a){this.reset();for(var A=Date.now(),j=a.length-1;j>=0;j--){var P=a[j],B=P.e||0;if(0===B)this.set(P.k,P.v);else{var q=B-A;q>0&&this.set(P.k,P.v,q)}}}},{key:"prune",value:function prune(){var a=this;this[tt].forEach((function(A,j){return at(a,j,!1)}))}}]),LRUCache}(),at=function _get(a,A,j){var P=a[tt].get(A);if(P){var B=P.value;if(ot(a,B)){if(ut(a,P),!a[Ve])return}else j&&(a[nt]&&(P.value.now=Date.now()),a[et].unshiftNode(P));return B.value}},ot=function isStale(a,A){if(!A||!A.maxAge&&!a[Ye])return!1;var j=Date.now()-A.now;return A.maxAge?j>A.maxAge:a[Ye]&&j>a[Ye]},st=function trim(a){if(a[Ue]>a[Be])for(var A=a[et].tail;a[Ue]>a[Be]&&null!==A;){var j=A.prev;ut(a,A),A=j}},ut=function _del(a,A){if(A){var j=A.value;a[$e]&&a[$e](j.key,j.value),a[Ue]-=j.length,a[tt].delete(j.key),a[et].removeNode(A)}},lt=Object(q.a)((function Entry(a,A,j,P,q){Object(B.a)(this,Entry),this.key=a,this.value=A,this.length=j,this.now=P,this.maxAge=q||0})),ct=function forEachStep(a,A,j,P){var B=j.value;ot(a,B)&&(ut(a,j),a[Ve]||(B=void 0)),B&&A.call(P,B.value,B.key,a)},ft=it,dt=["includePrerelease","loose","rtl"],ht=function parseOptions$3(a){return a?"object"!==typeof a?{loose:!0}:dt.filter((function(A){return a[A]})).reduce((function(a,A){return a[A]=!0,a}),{}):{}},pt={exports:{}},gt={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},mt="object"===typeof a&&Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0})&&Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).NODE_DEBUG&&/\bsemver\b/i.test(Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).NODE_DEBUG)?function(){for(var a,A=arguments.length,j=new Array(A),P=0;P<A;P++)j[P]=arguments[P];return(a=console).error.apply(a,["SEMVER"].concat(j))}:function(){};!function(a,A){var j=gt.MAX_SAFE_COMPONENT_LENGTH,P=mt,B=(A=a.exports={}).re=[],q=A.src=[],ne=A.t={},ie=0,oe=function createToken(a,A,j){var oe=ie++;P(oe,A),ne[a]=oe,q[oe]=A,B[oe]=new RegExp(A,j?"g":void 0)};oe("NUMERICIDENTIFIER","0|[1-9]\\d*"),oe("NUMERICIDENTIFIERLOOSE","[0-9]+"),oe("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),oe("MAINVERSION","(".concat(q[ne.NUMERICIDENTIFIER],")\\.")+"(".concat(q[ne.NUMERICIDENTIFIER],")\\.")+"(".concat(q[ne.NUMERICIDENTIFIER],")")),oe("MAINVERSIONLOOSE","(".concat(q[ne.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(q[ne.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(q[ne.NUMERICIDENTIFIERLOOSE],")")),oe("PRERELEASEIDENTIFIER","(?:".concat(q[ne.NUMERICIDENTIFIER],"|").concat(q[ne.NONNUMERICIDENTIFIER],")")),oe("PRERELEASEIDENTIFIERLOOSE","(?:".concat(q[ne.NUMERICIDENTIFIERLOOSE],"|").concat(q[ne.NONNUMERICIDENTIFIER],")")),oe("PRERELEASE","(?:-(".concat(q[ne.PRERELEASEIDENTIFIER],"(?:\\.").concat(q[ne.PRERELEASEIDENTIFIER],")*))")),oe("PRERELEASELOOSE","(?:-?(".concat(q[ne.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(q[ne.PRERELEASEIDENTIFIERLOOSE],")*))")),oe("BUILDIDENTIFIER","[0-9A-Za-z-]+"),oe("BUILD","(?:\\+(".concat(q[ne.BUILDIDENTIFIER],"(?:\\.").concat(q[ne.BUILDIDENTIFIER],")*))")),oe("FULLPLAIN","v?".concat(q[ne.MAINVERSION]).concat(q[ne.PRERELEASE],"?").concat(q[ne.BUILD],"?")),oe("FULL","^".concat(q[ne.FULLPLAIN],"$")),oe("LOOSEPLAIN","[v=\\s]*".concat(q[ne.MAINVERSIONLOOSE]).concat(q[ne.PRERELEASELOOSE],"?").concat(q[ne.BUILD],"?")),oe("LOOSE","^".concat(q[ne.LOOSEPLAIN],"$")),oe("GTLT","((?:<|>)?=?)"),oe("XRANGEIDENTIFIERLOOSE","".concat(q[ne.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),oe("XRANGEIDENTIFIER","".concat(q[ne.NUMERICIDENTIFIER],"|x|X|\\*")),oe("XRANGEPLAIN","[v=\\s]*(".concat(q[ne.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(q[ne.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(q[ne.XRANGEIDENTIFIER],")")+"(?:".concat(q[ne.PRERELEASE],")?").concat(q[ne.BUILD],"?")+")?)?"),oe("XRANGEPLAINLOOSE","[v=\\s]*(".concat(q[ne.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(q[ne.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(q[ne.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(q[ne.PRERELEASELOOSE],")?").concat(q[ne.BUILD],"?")+")?)?"),oe("XRANGE","^".concat(q[ne.GTLT],"\\s*").concat(q[ne.XRANGEPLAIN],"$")),oe("XRANGELOOSE","^".concat(q[ne.GTLT],"\\s*").concat(q[ne.XRANGEPLAINLOOSE],"$")),oe("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(j,"})")+"(?:\\.(\\d{1,".concat(j,"}))?")+"(?:\\.(\\d{1,".concat(j,"}))?")+"(?:$|[^\\d])"),oe("COERCERTL",q[ne.COERCE],!0),oe("LONETILDE","(?:~>?)"),oe("TILDETRIM","(\\s*)".concat(q[ne.LONETILDE],"\\s+"),!0),A.tildeTrimReplace="$1~",oe("TILDE","^".concat(q[ne.LONETILDE]).concat(q[ne.XRANGEPLAIN],"$")),oe("TILDELOOSE","^".concat(q[ne.LONETILDE]).concat(q[ne.XRANGEPLAINLOOSE],"$")),oe("LONECARET","(?:\\^)"),oe("CARETTRIM","(\\s*)".concat(q[ne.LONECARET],"\\s+"),!0),A.caretTrimReplace="$1^",oe("CARET","^".concat(q[ne.LONECARET]).concat(q[ne.XRANGEPLAIN],"$")),oe("CARETLOOSE","^".concat(q[ne.LONECARET]).concat(q[ne.XRANGEPLAINLOOSE],"$")),oe("COMPARATORLOOSE","^".concat(q[ne.GTLT],"\\s*(").concat(q[ne.LOOSEPLAIN],")$|^$")),oe("COMPARATOR","^".concat(q[ne.GTLT],"\\s*(").concat(q[ne.FULLPLAIN],")$|^$")),oe("COMPARATORTRIM","(\\s*)".concat(q[ne.GTLT],"\\s*(").concat(q[ne.LOOSEPLAIN],"|").concat(q[ne.XRANGEPLAIN],")"),!0),A.comparatorTrimReplace="$1$2$3",oe("HYPHENRANGE","^\\s*(".concat(q[ne.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(q[ne.XRANGEPLAIN],")")+"\\s*$"),oe("HYPHENRANGELOOSE","^\\s*(".concat(q[ne.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(q[ne.XRANGEPLAINLOOSE],")")+"\\s*$"),oe("STAR","(<|>)?=?\\s*\\*"),oe("GTE0","^\\s*>=\\s*0.0.0\\s*$"),oe("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}(pt,pt.exports);var vt=/^[0-9]+$/,yt=function compareIdentifiers$1(a,A){var j=vt.test(a),P=vt.test(A);return j&&P&&(a=+a,A=+A),a===A?0:j&&!P?-1:P&&!j?1:a<A?-1:1},bt=yt,_t=mt,xt=gt.MAX_LENGTH,wt=gt.MAX_SAFE_INTEGER,kt=pt.exports.re,Ot=pt.exports.t,St=ht,Et=bt,Ct=function(){function SemVer$3(a,A){if(Object(B.a)(this,SemVer$3),A=St(A),a instanceof SemVer$3){if(a.loose===!!A.loose&&a.includePrerelease===!!A.includePrerelease)return a;a=a.version}else if("string"!==typeof a)throw new TypeError("Invalid Version: ".concat(a));if(a.length>xt)throw new TypeError("version is longer than ".concat(xt," characters"));_t("SemVer",a,A),this.options=A,this.loose=!!A.loose,this.includePrerelease=!!A.includePrerelease;var j=a.trim().match(A.loose?kt[Ot.LOOSE]:kt[Ot.FULL]);if(!j)throw new TypeError("Invalid Version: ".concat(a));if(this.raw=a,this.major=+j[1],this.minor=+j[2],this.patch=+j[3],this.major>wt||this.major<0)throw new TypeError("Invalid major version");if(this.minor>wt||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>wt||this.patch<0)throw new TypeError("Invalid patch version");j[4]?this.prerelease=j[4].split(".").map((function(a){if(/^[0-9]+$/.test(a)){var A=+a;if(A>=0&&A<wt)return A}return a})):this.prerelease=[],this.build=j[5]?j[5].split("."):[],this.format()}return Object(q.a)(SemVer$3,[{key:"format",value:function format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}},{key:"toString",value:function toString(){return this.version}},{key:"compare",value:function compare(a){if(_t("SemVer.compare",this.version,this.options,a),!(a instanceof SemVer$3)){if("string"===typeof a&&a===this.version)return 0;a=new SemVer$3(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)}},{key:"compareMain",value:function compareMain(a){return a instanceof SemVer$3||(a=new SemVer$3(a,this.options)),Et(this.major,a.major)||Et(this.minor,a.minor)||Et(this.patch,a.patch)}},{key:"comparePre",value:function comparePre(a){if(a instanceof SemVer$3||(a=new SemVer$3(a,this.options)),this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;var A=0;do{var j=this.prerelease[A],P=a.prerelease[A];if(_t("prerelease compare",A,j,P),void 0===j&&void 0===P)return 0;if(void 0===P)return 1;if(void 0===j)return-1;if(j!==P)return Et(j,P)}while(++A)}},{key:"compareBuild",value:function compareBuild(a){a instanceof SemVer$3||(a=new SemVer$3(a,this.options));var A=0;do{var j=this.build[A],P=a.build[A];if(_t("prerelease compare",A,j,P),void 0===j&&void 0===P)return 0;if(void 0===P)return 1;if(void 0===j)return-1;if(j!==P)return Et(j,P)}while(++A)}},{key:"inc",value:function inc(a,A){switch(a){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",A);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",A);break;case"prepatch":this.prerelease.length=0,this.inc("patch",A),this.inc("pre",A);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",A),this.inc("pre",A);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var j=this.prerelease.length;--j>=0;)"number"===typeof this.prerelease[j]&&(this.prerelease[j]++,j=-2);-1===j&&this.prerelease.push(0)}A&&(this.prerelease[0]===A?isNaN(this.prerelease[1])&&(this.prerelease=[A,0]):this.prerelease=[A,0]);break;default:throw new Error("invalid increment argument: ".concat(a))}return this.format(),this.raw=this.version,this}}]),SemVer$3}(),Tt=Ct,Dt=function compare$6(a,A,j){return new Tt(a,j).compare(new Tt(A,j))},At=Dt,jt=Dt,Ft=Dt,Pt=Dt,Rt=Dt,Mt=Dt,Lt=function eq$1(a,A,j){return 0===At(a,A,j)},It=function neq$1(a,A,j){return 0!==jt(a,A,j)},Nt=function gt$1(a,A,j){return Ft(a,A,j)>0},Bt=function gte$1(a,A,j){return Pt(a,A,j)>=0},Ut=function lt$1(a,A,j){return Rt(a,A,j)<0},zt=function lte$1(a,A,j){return Mt(a,A,j)<=0},qt=function cmp$1(a,A,j,P){switch(A){case"===":return"object"===typeof a&&(a=a.version),"object"===typeof j&&(j=j.version),a===j;case"!==":return"object"===typeof a&&(a=a.version),"object"===typeof j&&(j=j.version),a!==j;case"":case"=":case"==":return Lt(a,j,P);case"!=":return It(a,j,P);case">":return Nt(a,j,P);case">=":return Bt(a,j,P);case"<":return Ut(a,j,P);case"<=":return zt(a,j,P);default:throw new TypeError("Invalid operator: ".concat(A))}},Wt=Symbol("SemVer ANY"),Ht=function(){function Comparator$1(a,A){if(Object(B.a)(this,Comparator$1),A=Gt(A),a instanceof Comparator$1){if(a.loose===!!A.loose)return a;a=a.value}Kt("comparator",a,A),this.options=A,this.loose=!!A.loose,this.parse(a),this.semver===Wt?this.value="":this.value=this.operator+this.semver.version,Kt("comp",this)}return Object(q.a)(Comparator$1,[{key:"parse",value:function parse(a){var A=this.options.loose?Vt[Yt.COMPARATORLOOSE]:Vt[Yt.COMPARATOR],j=a.match(A);if(!j)throw new TypeError("Invalid comparator: ".concat(a));this.operator=void 0!==j[1]?j[1]:"","="===this.operator&&(this.operator=""),j[2]?this.semver=new Xt(j[2],this.options.loose):this.semver=Wt}},{key:"toString",value:function toString(){return this.value}},{key:"test",value:function test(a){if(Kt("Comparator.test",a,this.options.loose),this.semver===Wt||a===Wt)return!0;if("string"===typeof a)try{a=new Xt(a,this.options)}catch(Un){return!1}return $t(a,this.operator,this.semver,this.options)}},{key:"intersects",value:function intersects(a,A){if(!(a instanceof Comparator$1))throw new TypeError("a Comparator is required");if(A&&"object"===typeof A||(A={loose:!!A,includePrerelease:!1}),""===this.operator)return""===this.value||new Jt(a.value,A).test(this.value);if(""===a.operator)return""===a.value||new Jt(this.value,A).test(a.semver);var j=(">="===this.operator||">"===this.operator)&&(">="===a.operator||">"===a.operator),P=("<="===this.operator||"<"===this.operator)&&("<="===a.operator||"<"===a.operator),B=this.semver.version===a.semver.version,q=(">="===this.operator||"<="===this.operator)&&(">="===a.operator||"<="===a.operator),ne=$t(this.semver,"<",a.semver,A)&&(">="===this.operator||">"===this.operator)&&("<="===a.operator||"<"===a.operator),ie=$t(this.semver,">",a.semver,A)&&("<="===this.operator||"<"===this.operator)&&(">="===a.operator||">"===a.operator);return j||P||B&&q||ne||ie}}],[{key:"ANY",get:function get(){return Wt}}]),Comparator$1}(),Gt=ht,Vt=pt.exports.re,Yt=pt.exports.t,$t=qt,Kt=mt,Xt=Ct,Jt=Qt;function _createForOfIteratorHelper(a,A){var j="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!j){if(Array.isArray(a)||(j=function _unsupportedIterableToArray(a,A){if(!a)return;if("string"===typeof a)return _arrayLikeToArray(a,A);var j=Object.prototype.toString.call(a).slice(8,-1);"Object"===j&&a.constructor&&(j=a.constructor.name);if("Map"===j||"Set"===j)return Array.from(a);if("Arguments"===j||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return _arrayLikeToArray(a,A)}(a))||A&&a&&"number"===typeof a.length){j&&(a=j);var P=0,B=function F(){};return{s:B,n:function n(){return P>=a.length?{done:!0}:{done:!1,value:a[P++]}},e:function e(a){throw a},f:B}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var q,ne=!0,ie=!1;return{s:function s(){j=j.call(a)},n:function n(){var a=j.next();return ne=a.done,a},e:function e(a){ie=!0,q=a},f:function f(){try{ne||null==j.return||j.return()}finally{if(ie)throw q}}}}function _arrayLikeToArray(a,A){(null==A||A>a.length)&&(A=a.length);for(var j=0,P=new Array(A);j<A;j++)P[j]=a[j];return P}var Qt=function(){function Range$1(a,A){var j=this;if(Object(B.a)(this,Range$1),A=en(A),a instanceof Range$1)return a.loose===!!A.loose&&a.includePrerelease===!!A.includePrerelease?a:new Range$1(a.raw,A);if(a instanceof tn)return this.raw=a.value,this.set=[[a]],this.format(),this;if(this.options=A,this.loose=!!A.loose,this.includePrerelease=!!A.includePrerelease,this.raw=a,this.set=a.split(/\s*\|\|\s*/).map((function(a){return j.parseRange(a.trim())})).filter((function(a){return a.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(a));if(this.set.length>1){var P=this.set[0];if(this.set=this.set.filter((function(a){return!dn(a[0])})),0===this.set.length)this.set=[P];else if(this.set.length>1){var q,ne=_createForOfIteratorHelper(this.set);try{for(ne.s();!(q=ne.n()).done;){var ie=q.value;if(1===ie.length&&hn(ie[0])){this.set=[ie];break}}}catch(oe){ne.e(oe)}finally{ne.f()}}}this.format()}return Object(q.a)(Range$1,[{key:"format",value:function format(){return this.range=this.set.map((function(a){return a.join(" ").trim()})).join("||").trim(),this.range}},{key:"toString",value:function toString(){return this.range}},{key:"parseRange",value:function parseRange(a){var A=this;a=a.trim();var j=Object.keys(this.options).join(","),B="parseRange:".concat(j,":").concat(a),q=Zt.get(B);if(q)return q;var ne=this.options.loose,ie=ne?an[sn.HYPHENRANGELOOSE]:an[sn.HYPHENRANGE];a=a.replace(ie,Sn(this.options.includePrerelease)),nn("hyphen replace",a),a=a.replace(an[sn.COMPARATORTRIM],un),nn("comparator trim",a,an[sn.COMPARATORTRIM]),a=(a=(a=a.replace(an[sn.TILDETRIM],ln)).replace(an[sn.CARETTRIM],cn)).split(/\s+/).join(" ");var oe=ne?an[sn.COMPARATORLOOSE]:an[sn.COMPARATOR],se=a.split(" ").map((function(a){return gn(a,A.options)})).join(" ").split(/\s+/).map((function(a){return On(a,A.options)})).filter(this.options.loose?function(a){return!!a.match(oe)}:function(){return!0}).map((function(a){return new tn(a,A.options)}));se.length;var le,he=new Map,pe=_createForOfIteratorHelper(se);try{for(pe.s();!(le=pe.n()).done;){var ge=le.value;if(dn(ge))return[ge];he.set(ge.value,ge)}}catch(ve){pe.e(ve)}finally{pe.f()}he.size>1&&he.has("")&&he.delete("");var me=Object(P.a)(he.values());return Zt.set(B,me),me}},{key:"intersects",value:function intersects(a,A){if(!(a instanceof Range$1))throw new TypeError("a Range is required");return this.set.some((function(j){return pn(j,A)&&a.set.some((function(a){return pn(a,A)&&j.every((function(j){return a.every((function(a){return j.intersects(a,A)}))}))}))}))}},{key:"test",value:function test(a){if(!a)return!1;if("string"===typeof a)try{a=new rn(a,this.options)}catch(Un){return!1}for(var A=0;A<this.set.length;A++)if(En(this.set[A],a,this.options))return!0;return!1}}]),Range$1}(),Zt=new ft({max:1e3}),en=ht,tn=Ht,nn=mt,rn=Ct,an=pt.exports.re,sn=pt.exports.t,un=pt.exports.comparatorTrimReplace,ln=pt.exports.tildeTrimReplace,cn=pt.exports.caretTrimReplace,dn=function isNullSet(a){return"<0.0.0-0"===a.value},hn=function isAny(a){return""===a.value},pn=function isSatisfiable(a,A){for(var j=!0,P=a.slice(),B=P.pop();j&&P.length;)j=P.every((function(a){return B.intersects(a,A)})),B=P.pop();return j},gn=function parseComparator(a,A){return nn("comp",a,A),a=bn(a,A),nn("caret",a),a=vn(a,A),nn("tildes",a),a=xn(a,A),nn("xrange",a),a=kn(a,A),nn("stars",a),a},mn=function isX(a){return!a||"x"===a.toLowerCase()||"*"===a},vn=function replaceTildes(a,A){return a.trim().split(/\s+/).map((function(a){return yn(a,A)})).join(" ")},yn=function replaceTilde(a,A){var j=A.loose?an[sn.TILDELOOSE]:an[sn.TILDE];return a.replace(j,(function(A,j,P,B,q){var ne;return nn("tilde",a,A,j,P,B,q),mn(j)?ne="":mn(P)?ne=">=".concat(j,".0.0 <").concat(+j+1,".0.0-0"):mn(B)?ne=">=".concat(j,".").concat(P,".0 <").concat(j,".").concat(+P+1,".0-0"):q?(nn("replaceTilde pr",q),ne=">=".concat(j,".").concat(P,".").concat(B,"-").concat(q," <").concat(j,".").concat(+P+1,".0-0")):ne=">=".concat(j,".").concat(P,".").concat(B," <").concat(j,".").concat(+P+1,".0-0"),nn("tilde return",ne),ne}))},bn=function replaceCarets(a,A){return a.trim().split(/\s+/).map((function(a){return _n(a,A)})).join(" ")},_n=function replaceCaret(a,A){nn("caret",a,A);var j=A.loose?an[sn.CARETLOOSE]:an[sn.CARET],P=A.includePrerelease?"-0":"";return a.replace(j,(function(A,j,B,q,ne){var ie;return nn("caret",a,A,j,B,q,ne),mn(j)?ie="":mn(B)?ie=">=".concat(j,".0.0").concat(P," <").concat(+j+1,".0.0-0"):mn(q)?ie="0"===j?">=".concat(j,".").concat(B,".0").concat(P," <").concat(j,".").concat(+B+1,".0-0"):">=".concat(j,".").concat(B,".0").concat(P," <").concat(+j+1,".0.0-0"):ne?(nn("replaceCaret pr",ne),ie="0"===j?"0"===B?">=".concat(j,".").concat(B,".").concat(q,"-").concat(ne," <").concat(j,".").concat(B,".").concat(+q+1,"-0"):">=".concat(j,".").concat(B,".").concat(q,"-").concat(ne," <").concat(j,".").concat(+B+1,".0-0"):">=".concat(j,".").concat(B,".").concat(q,"-").concat(ne," <").concat(+j+1,".0.0-0")):(nn("no pr"),ie="0"===j?"0"===B?">=".concat(j,".").concat(B,".").concat(q).concat(P," <").concat(j,".").concat(B,".").concat(+q+1,"-0"):">=".concat(j,".").concat(B,".").concat(q).concat(P," <").concat(j,".").concat(+B+1,".0-0"):">=".concat(j,".").concat(B,".").concat(q," <").concat(+j+1,".0.0-0")),nn("caret return",ie),ie}))},xn=function replaceXRanges(a,A){return nn("replaceXRanges",a,A),a.split(/\s+/).map((function(a){return wn(a,A)})).join(" ")},wn=function replaceXRange(a,A){a=a.trim();var j=A.loose?an[sn.XRANGELOOSE]:an[sn.XRANGE];return a.replace(j,(function(j,P,B,q,ne,ie){nn("xRange",a,j,P,B,q,ne,ie);var oe=mn(B),se=oe||mn(q),le=se||mn(ne),he=le;return"="===P&&he&&(P=""),ie=A.includePrerelease?"-0":"",oe?j=">"===P||"<"===P?"<0.0.0-0":"*":P&&he?(se&&(q=0),ne=0,">"===P?(P=">=",se?(B=+B+1,q=0,ne=0):(q=+q+1,ne=0)):"<="===P&&(P="<",se?B=+B+1:q=+q+1),"<"===P&&(ie="-0"),j="".concat(P+B,".").concat(q,".").concat(ne).concat(ie)):se?j=">=".concat(B,".0.0").concat(ie," <").concat(+B+1,".0.0-0"):le&&(j=">=".concat(B,".").concat(q,".0").concat(ie," <").concat(B,".").concat(+q+1,".0-0")),nn("xRange return",j),j}))},kn=function replaceStars(a,A){return nn("replaceStars",a,A),a.trim().replace(an[sn.STAR],"")},On=function replaceGTE0(a,A){return nn("replaceGTE0",a,A),a.trim().replace(an[A.includePrerelease?sn.GTE0PRE:sn.GTE0],"")},Sn=function hyphenReplace(a){return function(A,j,P,B,q,ne,ie,oe,se,le,he,pe,ge){return j=mn(P)?"":mn(B)?">=".concat(P,".0.0").concat(a?"-0":""):mn(q)?">=".concat(P,".").concat(B,".0").concat(a?"-0":""):ne?">=".concat(j):">=".concat(j).concat(a?"-0":""),oe=mn(se)?"":mn(le)?"<".concat(+se+1,".0.0-0"):mn(he)?"<".concat(se,".").concat(+le+1,".0-0"):pe?"<=".concat(se,".").concat(le,".").concat(he,"-").concat(pe):a?"<".concat(se,".").concat(le,".").concat(+he+1,"-0"):"<=".concat(oe),"".concat(j," ").concat(oe).trim()}},En=function testSet(a,A,j){for(var P=0;P<a.length;P++)if(!a[P].test(A))return!1;if(A.prerelease.length&&!j.includePrerelease){for(var B=0;B<a.length;B++)if(nn(a[B].semver),a[B].semver!==tn.ANY&&a[B].semver.prerelease.length>0){var q=a[B].semver;if(q.major===A.major&&q.minor===A.minor&&q.patch===A.patch)return!0}return!1}return!0},Cn=Qt,Tn=function satisfies(a,A,j){try{A=new Cn(A,j)}catch(Un){return!1}return A.test(a)};function post(a,A,j){var P=a.open(A),B=new URL(A).origin,q=40;a.addEventListener("message",(function listen(A){A.source===P&&(q=0,a.removeEventListener("message",listen,!1))}),!1),setTimeout((function send(){q<=0||(P.postMessage(j,B),setTimeout(send,250),q-=1)}),250)}var Dn='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid #0000;\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid #0000;\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function mergeDeep(a){for(var A=arguments.length,j=new Array(A>1?A-1:0),P=1;P<A;P++)j[P-1]=arguments[P];for(var B=0,q=j;B<q.length;B++){var ne=q[B];deepMerge_(a,ne)}return a}function deepMerge_(a,A){for(var j=0,P=Object.keys(A);j<P.length;j++){var B=P[j];Object(se.writeConfig)(a,B,A[B],!0)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,A){return this.substr(!A||A<0?0:+A,a.length)===a});var An;function ownKeys(a,A){var j=Object.keys(a);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(a);A&&(P=P.filter((function(A){return Object.getOwnPropertyDescriptor(a,A).enumerable}))),j.push.apply(j,P)}return j}function _objectSpread(a){for(var A=1;A<arguments.length;A++){var j=null!=arguments[A]?arguments[A]:{};A%2?ownKeys(Object(j),!0).forEach((function(A){_defineProperty(a,A,j[A])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(j)):ownKeys(Object(j)).forEach((function(A){Object.defineProperty(a,A,Object.getOwnPropertyDescriptor(j,A))}))}return a}var jn=se,Fn=he,Pn="undefined"!==typeof window?window:void 0;void 0===Fn&&null!==Pn&&void 0!==Pn&&null!==(An=Pn.vl)&&void 0!==An&&An.compile&&(Fn=Pn.vl);var Rn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Mn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Ln={vega:"Vega","vega-lite":"Vega-Lite"},In={vega:jn.version,"vega-lite":Fn?Fn.version:"not available"},Nn={vega:function vega(a){return a},"vega-lite":function vegaLite(a,A){return Fn.compile(a,{config:A}).spec}},Bn='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>';function isTooltipHandler(a){return"function"===typeof a}function viewSource(a,A,j,P){var B="<html><head>".concat(A,'</head><body><pre><code class="json">'),q="</code></pre>".concat(j,"</body></html>"),ne=window.open("");ne.document.write(B+a+q),ne.document.title="".concat(Ln[P]," JSON Source")}function guessMode(a,A){if(a.$schema){var j,P=Object(pe.a)(a.$schema);if(A&&A!==P.library)console.warn("The given visualization spec is written in ".concat(Ln[P.library],", but mode argument sets ").concat(null!==(j=Ln[A])&&void 0!==j?j:A,"."));var B=P.library;return Tn(In[B],"^".concat(P.version.slice(1)))||console.warn("The input spec uses ".concat(Ln[B]," ").concat(P.version,", but the current version of ").concat(Ln[B]," is v").concat(In[B],".")),B}return"mark"in a||"encoding"in a||"layer"in a||"hconcat"in a||"vconcat"in a||"facet"in a||"repeat"in a?"vega-lite":"marks"in a||"signals"in a||"scales"in a||"axes"in a?"vega":null!==A&&void 0!==A?A:"vega"}function createLoader(a){return function isLoader(a){return!(!a||!("load"in a))}(a)?a:jn.loader(a)}function embedOptionsFromUsermeta(a){var A,j;return null!==(A=null===(j=a.usermeta)||void 0===j?void 0:j.embedOptions)&&void 0!==A?A:{}}function embed(a,A){return _embed2.apply(this,arguments)}function _embed2(){return(_embed2=_asyncToGenerator(Re.mark((function _callee(a,A){var j,P,B,q,ne,ie,oe,le,he,pe,ge=arguments;return Re.wrap((function _callee$(me){for(;;)switch(me.prev=me.next){case 0:if(B=ge.length>2&&void 0!==ge[2]?ge[2]:{},!Object(se.isString)(A)){me.next=10;break}return ne=createLoader(B.loader),me.t0=JSON,me.next=6,ne.load(A);case 6:me.t1=me.sent,q=me.t0.parse.call(me.t0,me.t1),me.next=11;break;case 10:q=A;case 11:return ie=embedOptionsFromUsermeta(q).loader,ne&&!ie||(ne=createLoader(null!==(oe=B.loader)&&void 0!==oe?oe:ie)),me.next=15,loadOpts(embedOptionsFromUsermeta(q),ne);case 15:return le=me.sent,me.next=18,loadOpts(B,ne);case 18:return he=me.sent,pe=_objectSpread(_objectSpread({},mergeDeep(he,le)),{},{config:Object(se.mergeConfig)(null!==(j=he.config)&&void 0!==j?j:{},null!==(P=le.config)&&void 0!==P?P:{})}),me.next=22,_embed(a,q,pe,ne);case 22:return me.abrupt("return",me.sent);case 23:case"end":return me.stop()}}),_callee)})))).apply(this,arguments)}function loadOpts(a,A){return _loadOpts.apply(this,arguments)}function _loadOpts(){return(_loadOpts=_asyncToGenerator(Re.mark((function _callee2(a,A){var j,P,B;return Re.wrap((function _callee2$(q){for(;;)switch(q.prev=q.next){case 0:if(!Object(se.isString)(a.config)){q.next=8;break}return q.t1=JSON,q.next=4,A.load(a.config);case 4:q.t2=q.sent,q.t0=q.t1.parse.call(q.t1,q.t2),q.next=9;break;case 8:q.t0=null!==(j=a.config)&&void 0!==j?j:{};case 9:if(P=q.t0,!Object(se.isString)(a.patch)){q.next=18;break}return q.t4=JSON,q.next=14,A.load(a.patch);case 14:q.t5=q.sent,q.t3=q.t4.parse.call(q.t4,q.t5),q.next=19;break;case 18:q.t3=a.patch;case 19:return B=q.t3,q.abrupt("return",_objectSpread(_objectSpread(_objectSpread({},a),B?{patch:B}:{}),P?{config:P}:{}));case 21:case"end":return q.stop()}}),_callee2)})))).apply(this,arguments)}function getRoot(a){var A,j=a.getRootNode?a.getRootNode():document;return j instanceof ShadowRoot?{root:j,rootContainer:j}:{root:document,rootContainer:null!==(A=document.head)&&void 0!==A?A:document.body}}function _embed(a,A){return _embed3.apply(this,arguments)}function _embed3(){return(_embed3=_asyncToGenerator(Re.mark((function _callee4(a,A){var j,P,B,q,ie,he,ve,ye,_e,we,ke,Oe,Se,Te,Ae,je,Fe,Me,Ne,Be,Ue,We,Ve,Ye,$e,Xe,et,tt,nt,rt,it,at,ot,st,ut,lt,ct,ft,dt,ht,pt,gt,mt,vt,yt,bt,_t,xt,wt,kt=arguments;return Re.wrap((function _callee4$(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:if(wt=function _finalize(){lt&&document.removeEventListener("click",lt),rt.finalize()},ye=kt.length>2&&void 0!==kt[2]?kt[2]:{},_e=kt.length>3?kt[3]:void 0,we=ye.theme?Object(se.mergeConfig)(ge[ye.theme],null!==(j=ye.config)&&void 0!==j?j:{}):ye.config,ke=Object(se.isBoolean)(ye.actions)?ye.actions:mergeDeep({},Rn,null!==(P=ye.actions)&&void 0!==P?P:{}),Oe=_objectSpread(_objectSpread({},Mn),ye.i18n),Se=null!==(B=ye.renderer)&&void 0!==B?B:"canvas",Te=null!==(q=ye.logLevel)&&void 0!==q?q:jn.Warn,Ae=null!==(ie=ye.downloadFileName)&&void 0!==ie?ie:"visualization",je="string"===typeof a?document.querySelector(a):a){Ot.next=12;break}throw new Error("".concat(a," does not exist"));case 12:return!1!==ye.defaultStyle&&(Fe="vega-embed-style",Me=getRoot(je),Ne=Me.root,Be=Me.rootContainer,Ne.getElementById(Fe)||((Ue=document.createElement("style")).id=Fe,Ue.innerHTML=void 0===ye.defaultStyle||!0===ye.defaultStyle?Dn.toString():ye.defaultStyle,Be.appendChild(Ue))),We=guessMode(A,ye.mode),Ve=Nn[We](A,we),"vega-lite"===We&&Ve.$schema&&(Ye=Object(pe.a)(Ve.$schema),Tn(In.vega,"^".concat(Ye.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(Ye.version,", but current version is v").concat(In.vega,"."))),je.classList.add("vega-embed"),ke&&je.classList.add("has-actions"),je.innerHTML="",$e=je,ke&&((Xe=document.createElement("div")).classList.add("chart-wrapper"),je.appendChild(Xe),$e=Xe),(et=ye.patch)&&(Ve=et instanceof Function?et(Ve):Object(ne.a)(Ve,et,!0,!1).newDocument),ye.formatLocale&&jn.formatLocale(ye.formatLocale),ye.timeFormatLocale&&jn.timeFormatLocale(ye.timeFormatLocale),tt=ye.ast,nt=jn.parse(Ve,"vega-lite"===We?{}:we,{ast:tt}),(rt=new(ye.viewClass||jn.View)(nt,_objectSpread({loader:_e,logLevel:Te,renderer:Se},tt?{expr:null!==(he=null!==(ve=jn.expressionInterpreter)&&void 0!==ve?ve:ye.expr)&&void 0!==he?he:le.a}:{}))).addSignalListener("autosize",(function(a,A){var j=A.type;"fit-x"==j?($e.classList.add("fit-x"),$e.classList.remove("fit-y")):"fit-y"==j?($e.classList.remove("fit-x"),$e.classList.add("fit-y")):"fit"==j?$e.classList.add("fit-x","fit-y"):$e.classList.remove("fit-x","fit-y")})),!1!==ye.tooltip&&(it=isTooltipHandler(ye.tooltip)?ye.tooltip:new me.a(!0===ye.tooltip?{}:ye.tooltip).call,rt.tooltip(it)),void 0===(at=ye.hover)&&(at="vega"===We),at&&(st=(ot="boolean"===typeof at?{}:at).hoverSet,ut=ot.updateSet,rt.hover(st,ut)),ye&&(null!=ye.width&&rt.width(ye.width),null!=ye.height&&rt.height(ye.height),null!=ye.padding&&rt.padding(ye.padding)),Ot.next=36,rt.initialize($e,ye.bind).runAsync();case 36:if(!1!==ke){if(ct=je,!1!==ye.defaultStyle&&((ft=document.createElement("details")).title=Oe.CLICK_TO_VIEW_ACTIONS,je.append(ft),ct=ft,(dt=document.createElement("summary")).innerHTML=Bn,ft.append(dt),lt=function documentClickHandler(a){ft.contains(a.target)||ft.removeAttribute("open")},document.addEventListener("click",lt)),ht=document.createElement("div"),ct.append(ht),ht.classList.add("vega-actions"),!0===ke||!1!==ke.export)for(pt=function _loop(){var a=mt[gt];if(!0===ke||!0===ke.export||ke.export[a]){var A=Oe["".concat(a.toUpperCase(),"_ACTION")],j=document.createElement("a");j.text=A,j.href="#",j.target="_blank",j.download="".concat(Ae,".").concat(a),j.addEventListener("mousedown",function(){var A=_asyncToGenerator(Re.mark((function _callee3(A){var j;return Re.wrap((function _callee3$(P){for(;;)switch(P.prev=P.next){case 0:return A.preventDefault(),P.next=3,rt.toImageURL(a,ye.scaleFactor);case 3:j=P.sent,this.href=j;case 5:case"end":return P.stop()}}),_callee3,this)})));return function(a){return A.apply(this,arguments)}}()),ht.append(j)}},gt=0,mt=["svg","png"];gt<mt.length;gt++)pt();!0!==ke&&!1===ke.source||((vt=document.createElement("a")).text=Oe.SOURCE_ACTION,vt.href="#",vt.addEventListener("click",(function(a){var j,P;viewSource(oe()(A),null!==(j=ye.sourceHeader)&&void 0!==j?j:"",null!==(P=ye.sourceFooter)&&void 0!==P?P:"",We),a.preventDefault()})),ht.append(vt)),"vega-lite"!==We||!0!==ke&&!1===ke.compiled||((yt=document.createElement("a")).text=Oe.COMPILED_ACTION,yt.href="#",yt.addEventListener("click",(function(a){var A,j;viewSource(oe()(Ve),null!==(A=ye.sourceHeader)&&void 0!==A?A:"",null!==(j=ye.sourceFooter)&&void 0!==j?j:"","vega"),a.preventDefault()})),ht.append(yt)),!0!==ke&&!1===ke.editor||(_t=null!==(bt=ye.editorUrl)&&void 0!==bt?bt:"https://vega.github.io/editor/",(xt=document.createElement("a")).text=Oe.EDITOR_ACTION,xt.href="#",xt.addEventListener("click",(function(a){post(window,_t,{config:we,mode:We,renderer:Se,spec:oe()(A)}),a.preventDefault()})),ht.append(xt))}return Ot.abrupt("return",{view:rt,spec:A,vgSpec:Ve,finalize:wt});case 38:case"end":return Ot.stop()}}),_callee4)})))).apply(this,arguments)}}).call(this,j(66))},function(a,A,j){"use strict";a.exports=function equal(a,A){if(a===A)return!0;if(a&&A&&"object"==typeof a&&"object"==typeof A){if(a.constructor!==A.constructor)return!1;var j,P,B;if(Array.isArray(a)){if((j=a.length)!=A.length)return!1;for(P=j;0!==P--;)if(!equal(a[P],A[P]))return!1;return!0}if(a.constructor===RegExp)return a.source===A.source&&a.flags===A.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===A.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===A.toString();if((j=(B=Object.keys(a)).length)!==Object.keys(A).length)return!1;for(P=j;0!==P--;)if(!Object.prototype.hasOwnProperty.call(A,B[P]))return!1;for(P=j;0!==P--;){var q=B[P];if(!equal(a[q],A[q]))return!1}return!0}return a!==a&&A!==A}},function(a,A,j){"use strict";var P=j(433),B=j(110),q=j(178);function encode(a,A){return A.encode?A.strict?P(a):encodeURIComponent(a):a}function extract(a){var A=a.indexOf("?");return-1===A?"":a.slice(A+1)}function parse(a,A){var j=function parserForArrayFormat(a){var A;switch(a.arrayFormat){case"index":return function(a,j,P){A=/\[(\d*)\]$/.exec(a),a=a.replace(/\[\d*\]$/,""),A?(void 0===P[a]&&(P[a]={}),P[a][A[1]]=j):P[a]=j};case"bracket":return function(a,j,P){A=/(\[\])$/.exec(a),a=a.replace(/\[\]$/,""),A?void 0!==P[a]?P[a]=[].concat(P[a],j):P[a]=[j]:P[a]=j};default:return function(a,A,j){void 0!==j[a]?j[a]=[].concat(j[a],A):j[a]=A}}}(A=B({arrayFormat:"none"},A)),P=Object.create(null);return"string"!==typeof a?P:(a=a.trim().replace(/^[?#&]/,""))?(a.split("&").forEach((function(a){var A=a.replace(/\+/g," ").split("="),B=A.shift(),ne=A.length>0?A.join("="):void 0;ne=void 0===ne?null:q(ne),j(q(B),ne,P)})),Object.keys(P).sort().reduce((function(a,A){var j=P[A];return Boolean(j)&&"object"===typeof j&&!Array.isArray(j)?a[A]=function keysSorter(a){return Array.isArray(a)?a.sort():"object"===typeof a?keysSorter(Object.keys(a)).sort((function(a,A){return Number(a)-Number(A)})).map((function(A){return a[A]})):a}(j):a[A]=j,a}),Object.create(null))):P}A.extract=extract,A.parse=parse,A.stringify=function(a,A){!1===(A=B({encode:!0,strict:!0,arrayFormat:"none"},A)).sort&&(A.sort=function(){});var j=function encoderForArrayFormat(a){switch(a.arrayFormat){case"index":return function(A,j,P){return null===j?[encode(A,a),"[",P,"]"].join(""):[encode(A,a),"[",encode(P,a),"]=",encode(j,a)].join("")};case"bracket":return function(A,j){return null===j?encode(A,a):[encode(A,a),"[]=",encode(j,a)].join("")};default:return function(A,j){return null===j?encode(A,a):[encode(A,a),"=",encode(j,a)].join("")}}}(A);return a?Object.keys(a).sort(A.sort).map((function(P){var B=a[P];if(void 0===B)return"";if(null===B)return encode(P,A);if(Array.isArray(B)){var q=[];return B.slice().forEach((function(a){void 0!==a&&q.push(j(P,a,q.length))})),q.join("&")}return encode(P,A)+"="+encode(B,A)})).filter((function(a){return a.length>0})).join("&"):""},A.parseUrl=function(a,A){return{url:a.split("?")[0]||"",query:parse(extract(a),A)}}},function(a,A,j){"use strict";function _extends(){return(_extends=Object.assign||function(a){for(var A=1;A<arguments.length;A++){var j=arguments[A];for(var P in j)Object.prototype.hasOwnProperty.call(j,P)&&(a[P]=j[P])}return a}).apply(this,arguments)}function _setPrototypeOf(a,A){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(a,A){return a.__proto__=A,a})(a,A)}var P=j(1),B=j(25),q=j.n(B),ne=j(228),ie=["client","offset","scroll","bounds","margin"];function getTypes(a){var A=[];return ie.forEach((function(j){a[j]&&A.push(j)})),A}function getContentRect(a,A){var j={};if(A.indexOf("client")>-1&&(j.client={top:a.clientTop,left:a.clientLeft,width:a.clientWidth,height:a.clientHeight}),A.indexOf("offset")>-1&&(j.offset={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}),A.indexOf("scroll")>-1&&(j.scroll={top:a.scrollTop,left:a.scrollLeft,width:a.scrollWidth,height:a.scrollHeight}),A.indexOf("bounds")>-1){var P=a.getBoundingClientRect();j.bounds={top:P.top,right:P.right,bottom:P.bottom,left:P.left,width:P.width,height:P.height}}if(A.indexOf("margin")>-1){var B=getComputedStyle(a);j.margin={top:B?parseInt(B.marginTop):0,right:B?parseInt(B.marginRight):0,bottom:B?parseInt(B.marginBottom):0,left:B?parseInt(B.marginLeft):0}}return j}function getWindowOf(a){return a&&a.ownerDocument&&a.ownerDocument.defaultView||window}var oe=function withContentRect(a){return function(A){var j,B;return B=j=function(j){function WithContentRect(){for(var A,P=arguments.length,B=new Array(P),q=0;q<P;q++)B[q]=arguments[q];return(A=j.call.apply(j,[this].concat(B))||this).state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},A._animationFrameID=null,A._resizeObserver=null,A._node=null,A._window=null,A.measure=function(j){var P=getContentRect(A._node,a||getTypes(A.props));j&&(P.entry=j[0].contentRect),A._animationFrameID=A._window.requestAnimationFrame((function(){null!==A._resizeObserver&&(A.setState({contentRect:P}),"function"===typeof A.props.onResize&&A.props.onResize(P))}))},A._handleRef=function(a){null!==A._resizeObserver&&null!==A._node&&A._resizeObserver.unobserve(A._node),A._node=a,A._window=getWindowOf(A._node);var j=A.props.innerRef;j&&("function"===typeof j?j(A._node):j.current=A._node),null!==A._resizeObserver&&null!==A._node&&A._resizeObserver.observe(A._node)},A}!function _inheritsLoose(a,A){a.prototype=Object.create(A.prototype),a.prototype.constructor=a,_setPrototypeOf(a,A)}(WithContentRect,j);var B=WithContentRect.prototype;return B.componentDidMount=function componentDidMount(){this._resizeObserver=null!==this._window&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new ne.a(this.measure),null!==this._node&&(this._resizeObserver.observe(this._node),"function"===typeof this.props.onResize&&this.props.onResize(getContentRect(this._node,a||getTypes(this.props))))},B.componentWillUnmount=function componentWillUnmount(){null!==this._window&&this._window.cancelAnimationFrame(this._animationFrameID),null!==this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},B.render=function render(){var a=this.props,j=(a.innerRef,a.onResize,function _objectWithoutPropertiesLoose(a,A){if(null==a)return{};var j,P,B={},q=Object.keys(a);for(P=0;P<q.length;P++)j=q[P],A.indexOf(j)>=0||(B[j]=a[j]);return B}(a,["innerRef","onResize"]));return Object(P.createElement)(A,_extends({},j,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},WithContentRect}(P.Component),j.propTypes={client:q.a.bool,offset:q.a.bool,scroll:q.a.bool,bounds:q.a.bool,margin:q.a.bool,innerRef:q.a.oneOfType([q.a.object,q.a.func]),onResize:q.a.func},B}}()((function(a){var A=a.measure,j=a.measureRef,P=a.contentRect;return(0,a.children)({measure:A,measureRef:j,contentRect:P})}));oe.displayName="Measure",oe.propTypes.children=q.a.func;A.a=oe},function(a,A,j){"use strict";var P=/("(?:[^\\"]|\\.)*")|[:,]/g;a.exports=function stringify(a,A){var j,B,q;return A=A||{},j=JSON.stringify([1],void 0,void 0===A.indent?2:A.indent).slice(2,-3),B=""===j?1/0:void 0===A.maxLength?80:A.maxLength,q=A.replacer,function _stringify(a,A,ne){var ie,oe,se,le,he,pe,ge,me,ve,ye,_e,we;if(a&&"function"===typeof a.toJSON&&(a=a.toJSON()),void 0===(_e=JSON.stringify(a,q)))return _e;if(ge=B-A.length-ne,_e.length<=ge&&(ve=_e.replace(P,(function(a,A){return A||a+" "}))).length<=ge)return ve;if(null!=q&&(a=JSON.parse(_e),q=void 0),"object"===typeof a&&null!==a){if(me=A+j,se=[],oe=0,Array.isArray(a))for(ye="[",ie="]",ge=a.length;oe<ge;oe++)se.push(_stringify(a[oe],me,oe===ge-1?0:1)||"null");else for(ye="{",ie="}",ge=(pe=Object.keys(a)).length;oe<ge;oe++)le=pe[oe],he=JSON.stringify(le)+": ",void 0!==(we=_stringify(a[le],me,he.length+(oe===ge-1?0:1)))&&se.push(he+we);if(se.length>0)return[ye,j+se.join(",\n"+me),ie].join("\n"+A)}return _e}(a,"",0)}},function(a,A,j){"use strict";var P=j(16),B=Object(P.a)((function(a){a.setDate(1),a.setHours(0,0,0,0)}),(function(a,A){a.setMonth(a.getMonth()+A)}),(function(a,A){return A.getMonth()-a.getMonth()+12*(A.getFullYear()-a.getFullYear())}),(function(a){return a.getMonth()}));A.a=B;B.range},function(a,A,j){"use strict";var P=j(16),B=Object(P.a)((function(){}),(function(a,A){a.setTime(+a+A)}),(function(a,A){return A-a}));B.every=function(a){return a=Math.floor(a),isFinite(a)&&a>0?a>1?Object(P.a)((function(A){A.setTime(Math.floor(A/a)*a)}),(function(A,j){A.setTime(+A+j*a)}),(function(A,j){return(j-A)/a})):B:null},A.a=B;B.range},function(a,A,j){"use strict";var P=j(16),B=Object(P.a)((function(a){a.setUTCDate(1),a.setUTCHours(0,0,0,0)}),(function(a,A){a.setUTCMonth(a.getUTCMonth()+A)}),(function(a,A){return A.getUTCMonth()-a.getUTCMonth()+12*(A.getUTCFullYear()-a.getUTCFullYear())}),(function(a){return a.getUTCMonth()}));A.a=B;B.range},function(a,A,j){"use strict";var P=j(70);A.a=function(a){var A=a,j=a;function left(a,A,P,B){for(null==P&&(P=0),null==B&&(B=a.length);P<B;){var q=P+B>>>1;j(a[q],A)<0?P=q+1:B=q}return P}return 1===a.length&&(A=function delta(A,j){return a(A)-j},j=function ascendingComparator(a){return function(A,j){return Object(P.a)(a(A),j)}}(a)),{left:left,center:function center(a,j,P,B){null==P&&(P=0),null==B&&(B=a.length);var q=left(a,j,P,B-1);return q>P&&A(a[q-1],j)>-A(a[q],j)?q-1:q},right:function right(a,A,P,B){for(null==P&&(P=0),null==B&&(B=a.length);P<B;){var q=P+B>>>1;j(a[q],A)>0?B=q:P=q+1}return P}}}},function(a,A,j){"use strict";j.d(A,"a",(function(){return B})),j.d(A,"b",(function(){return q})),j.d(A,"c",(function(){return ne})),j.d(A,"d",(function(){return ie}));var P,B,q,ne,ie,oe=j(146);!function defaultLocale(a){return P=Object(oe.a)(a),B=P.format,q=P.parse,ne=P.utcFormat,ie=P.utcParse,P}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},,,function(a,A,j){"use strict";var P=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;function toObject(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}a.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var A={},j=0;j<10;j++)A["_"+String.fromCharCode(j)]=j;if("0123456789"!==Object.getOwnPropertyNames(A).map((function(a){return A[a]})).join(""))return!1;var P={};return"abcdefghijklmnopqrst".split("").forEach((function(a){P[a]=a})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},P)).join("")}catch(B){return!1}}()?Object.assign:function(a,A){for(var j,ne,ie=toObject(a),oe=1;oe<arguments.length;oe++){for(var se in j=Object(arguments[oe]))B.call(j,se)&&(ie[se]=j[se]);if(P){ne=P(j);for(var le=0;le<ne.length;le++)q.call(j,ne[le])&&(ie[ne[le]]=j[ne[le]])}}return ie}},function(a,A){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function get(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function get(){return a.i}}),a.webpackPolyfill=1),a}},function(a,A,j){"use strict";var P=j(256)(!0);j(154)(String,"String",(function(a){this._t=String(a),this._i=0}),(function(){var a,A=this._t,j=this._i;return j>=A.length?{value:void 0,done:!0}:(a=P(A,j),this._i+=a.length,{value:a,done:!1})}))},function(a,A){var j=Math.ceil,P=Math.floor;a.exports=function(a){return isNaN(a=+a)?0:(a>0?P:j)(a)}},function(a,A){a.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},function(a,A,j){var P=j(47),B=j(26).document,q=P(B)&&P(B.createElement);a.exports=function(a){return q?B.createElement(a):{}}},function(a,A,j){var P=j(47);a.exports=function(a,A){if(!P(a))return a;var j,B;if(A&&"function"==typeof(j=a.toString)&&!P(B=j.call(a)))return B;if("function"==typeof(j=a.valueOf)&&!P(B=j.call(a)))return B;if(!A&&"function"==typeof(j=a.toString)&&!P(B=j.call(a)))return B;throw TypeError("Can't convert object to primitive value")}},function(a,A,j){var P=j(41),B=j(258),q=j(121),ne=j(119)("IE_PROTO"),ie=function Empty(){},oe=function createDict(){var a,A=j(115)("iframe"),P=q.length;for(A.style.display="none",j(159).appendChild(A),A.src="javascript:",(a=A.contentWindow.document).open(),a.write("<script>document.F=Object<\/script>"),a.close(),oe=a.F;P--;)delete oe.prototype[q[P]];return oe()};a.exports=Object.create||function create(a,A){var j;return null!==a?(ie.prototype=P(a),j=new ie,ie.prototype=null,j[ne]=a):j=oe(),void 0===A?j:B(j,A)}},function(a,A,j){var P=j(113),B=Math.min;a.exports=function(a){return a>0?B(P(a),9007199254740991):0}},function(a,A,j){var P=j(120)("keys"),B=j(85);a.exports=function(a){return P[a]||(P[a]=B(a))}},function(a,A,j){var P=j(21),B=j(26),q=B["__core-js_shared__"]||(B["__core-js_shared__"]={});(a.exports=function(a,A){return q[a]||(q[a]=void 0!==A?A:{})})("versions",[]).push({version:P.version,mode:j(71)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},function(a,A){a.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(a,A,j){"use strict";var P=j(84);function PromiseCapability(a){var A,j;this.promise=new a((function(a,P){if(void 0!==A||void 0!==j)throw TypeError("Bad Promise constructor");A=a,j=P})),this.resolve=P(A),this.reject=P(j)}a.exports.f=function(a){return new PromiseCapability(a)}},function(a,A){A.f=Object.getOwnPropertySymbols},function(a,A,j){A.f=j(27)},function(a,A,j){var P=j(26),B=j(21),q=j(71),ne=j(124),ie=j(40).f;a.exports=function(a){var A=B.Symbol||(B.Symbol=q?{}:P.Symbol||{});"_"==a.charAt(0)||a in A||ie(A,a,{value:ne.f(a)})}},function(a,A,j){var P=j(177);a.exports=function _unsupportedIterableToArray(a,A){if(a){if("string"===typeof a)return P(a,A);var j=Object.prototype.toString.call(a).slice(8,-1);return"Object"===j&&a.constructor&&(j=a.constructor.name),"Map"===j||"Set"===j?Array.from(j):"Arguments"===j||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?P(a,A):void 0}}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.COMMA_URL_ROOT="https://api.comma.ai/";"undefined"!==typeof window&&window.COMMA_URL_ROOT&&(A.COMMA_URL_ROOT=window.COMMA_URL_ROOT);A.ATHENA_URL_ROOT="https://athena.comma.ai/";"undefined"!==typeof window&&window.ATHENA_URL_ROOT&&(A.ATHENA_URL_ROOT=window.ATHENA_URL_ROOT);A.BILLING_URL_ROOT="https://billing.comma.ai/";"undefined"!==typeof window&&window.BILLING_URL_ROOT&&(A.BILLING_URL_ROOT=window.BILLING_URL_ROOT)},function(a,A,j){"use strict";var P=j(49);a.exports=function sumNthPowerDeviations(a,A){var j,B,q=P(a),ne=0;if(2===A)for(B=0;B<a.length;B++)ne+=(j=a[B]-q)*j;else for(B=0;B<a.length;B++)ne+=Math.pow(a[B]-q,A);return ne}},function(a,A,j){"use strict";var P=j(130),B=j(369);function quantileSelect(a,A,j,P){A%1===0?B(a,A,j,P):(A=Math.floor(A),B(a,A,j,P),B(a,A+1,A+1,P))}function compare(a,A){return a-A}function quantileIndex(a,A){var j=a*A;return 1===A?a-1:0===A?0:j%1!==0?Math.ceil(j)-1:a%2===0?j-.5:j}a.exports=function quantile(a,A){var j=a.slice();if(Array.isArray(A)){!function multiQuantileSelect(a,A){for(var j=[0],P=0;P<A.length;P++)j.push(quantileIndex(a.length,A[P]));j.push(a.length-1),j.sort(compare);var B=[0,j.length-1];for(;B.length;){var q=Math.ceil(B.pop()),ne=Math.floor(B.pop());if(!(q-ne<=1)){var ie=Math.floor((ne+q)/2);quantileSelect(a,j[ie],j[ne],j[q]),B.push(ne,ie,ie,q)}}}(j,A);for(var B=[],q=0;q<A.length;q++)B[q]=P(j,A[q]);return B}return quantileSelect(j,quantileIndex(j.length,A),0,j.length-1),P(j,A)}},function(a,A,j){"use strict";a.exports=function quantileSorted(a,A){var j=a.length*A;if(0===a.length)throw new Error("quantile requires at least one data point.");if(A<0||A>1)throw new Error("quantiles must be between 0 and 1");return 1===A?a[a.length-1]:0===A?a[0]:j%1!==0?a[Math.ceil(j)-1]:a.length%2===0?(a[j-1]+a[j])/2:a[j]}},function(a,A,j){"use strict";var P=j(128);a.exports=function sampleVariance(a){if(a.length<2)throw new Error("sampleVariance requires at least two data points");return P(a,2)/(a.length-1)}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=Object.assign||function(a){for(var A=1;A<arguments.length;A++){var j=arguments[A];for(var P in j)Object.prototype.hasOwnProperty.call(j,P)&&(a[P]=j[P])}return a};function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var B=_interopRequireDefault(j(407)),q=_interopRequireDefault(j(412)),ne=_interopRequireDefault(j(196)),ie=j(133),oe=(0,B.default)(q.default);A.defaultSelectorHandlers=[function pseudoSelectors(a,A,j){return":"!==a[0]?null:j(A+a)},function mediaQueries(a,A,j){return"@"!==a[0]?null:a+"{"+j(A)+"}"}];A.generateCSS=function generateCSS(a,A,j,P,B){for(var q=new ne.default,ie=0;ie<A.length;ie++)q.addStyleType(A[ie]);var oe=new ne.default,se="";return q.forEach((function(A,q){j.some((function(ne){var ie=ne(q,a,(function(a){return generateCSS(a,[A],j,P,B)}));if(null!=ie)return se+=ie,!0}))||oe.set(q,A,!0)})),le(a,oe,P,B,j)+se};var se=function transformRule(a,A,j){return(0,ie.kebabifyStyleName)(a)+":"+j(a,A)+";"},le=function generateCSSRuleset(a,A,j,B,q){!function runStringHandlers(a,A,j){if(A)for(var P=Object.keys(A),B=0;B<P.length;B++){var q=P[B];a.has(q)&&a.set(q,A[q](a.get(q),j),!1)}}(A,j,q);var ne=P({},A.elements),le=oe(A.elements),he=Object.keys(le);if(he.length!==A.keyOrder.length)for(var pe=0;pe<he.length;pe++)if(!ne.hasOwnProperty(he[pe])){var ge=void 0;if((ge="W"===he[pe][0]?he[pe][6].toLowerCase()+he[pe].slice(7):"o"===he[pe][1]?he[pe][3].toLowerCase()+he[pe].slice(4):he[pe][2].toLowerCase()+he[pe].slice(3))&&ne.hasOwnProperty(ge)){var me=A.keyOrder.indexOf(ge);A.keyOrder.splice(me,0,he[pe])}else A.keyOrder.unshift(he[pe])}var ve=!1===B?ie.stringifyValue:ie.stringifyAndImportantifyValue,ye=[];for(pe=0;pe<A.keyOrder.length;pe++){var _e=A.keyOrder[pe],we=le[_e];if(Array.isArray(we))for(var ke=0;ke<we.length;ke++)ye.push(se(_e,we[ke],ve));else ye.push(se(_e,we,ve))}return ye.length?a+"{"+ye.join("")+"}":""};A.generateCSSRuleset=le},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var _slicedToArray=function(a,A){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return function sliceIterator(a,A){var j=[],P=!0,B=!1,q=void 0;try{for(var ne,ie=a[Symbol.iterator]();!(P=(ne=ie.next()).done)&&(j.push(ne.value),!A||j.length!==A);P=!0);}catch(oe){B=!0,q=oe}finally{try{!P&&ie.return&&ie.return()}finally{if(B)throw q}}return j}(a,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")};var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(427));A.mapObj=function mapObj(a,A){for(var j=Object.keys(a),P={},B=0;B<j.length;B+=1){var q=A([j[B],a[j[B]]]),ne=_slicedToArray(q,2),ie=ne[0],oe=ne[1];P[ie]=oe}return P};var B=/([A-Z])/g,q=function UPPERCASE_RE_TO_KEBAB(a){return"-"+a.toLowerCase()};A.kebabifyStyleName=function kebabifyStyleName(a){var A=a.replace(B,q);return"m"===A[0]&&"s"===A[1]&&"-"===A[2]?"-"+A:A};var ne={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var ie=["Webkit","ms","Moz","O"];Object.keys(ne).forEach((function(a){ie.forEach((function(A){ne[function prefixKey(a,A){return a+A.charAt(0).toUpperCase()+A.substring(1)}(A,a)]=ne[a]}))}));var oe=function stringifyValue(a,A){return"number"===typeof A?ne[a]?""+A:A+"px":""+A};A.stringifyValue=oe;A.stringifyAndImportantifyValue=function stringifyAndImportantifyValue(a,A){return le(oe(a,A))};var se=function hashString(a){return(0,P.default)(a).toString(36)};A.hashString=se;A.hashObject=function hashObject(a){return se(JSON.stringify(a))};var le=function importantify(a){return"!"===a[a.length-10]&&" !important"===a.slice(-11)?a:a+" !important"}},function(a,A,j){"use strict";(function(A){var P=j(28),B=j(445),q=j(201),ne={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(a,A){!P.isUndefined(a)&&P.isUndefined(a["Content-Type"])&&(a["Content-Type"]=A)}var ie={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function getDefaultAdapter(){var a;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof A&&"[object process]"===Object.prototype.toString.call(A))&&(a=j(202)),a}(),transformRequest:[function transformRequest(a,A){return B(A,"Accept"),B(A,"Content-Type"),P.isFormData(a)||P.isArrayBuffer(a)||P.isBuffer(a)||P.isStream(a)||P.isFile(a)||P.isBlob(a)?a:P.isArrayBufferView(a)?a.buffer:P.isURLSearchParams(a)?(setContentTypeIfUnset(A,"application/x-www-form-urlencoded;charset=utf-8"),a.toString()):P.isObject(a)||A&&"application/json"===A["Content-Type"]?(setContentTypeIfUnset(A,"application/json"),function stringifySafely(a,A,j){if(P.isString(a))try{return(A||JSON.parse)(a),P.trim(a)}catch(B){if("SyntaxError"!==B.name)throw B}return(j||JSON.stringify)(a)}(a)):a}],transformResponse:[function transformResponse(a){var A=this.transitional,j=A&&A.silentJSONParsing,B=A&&A.forcedJSONParsing,ne=!j&&"json"===this.responseType;if(ne||B&&P.isString(a)&&a.length)try{return JSON.parse(a)}catch(ie){if(ne){if("SyntaxError"===ie.name)throw q(ie,this,"E_JSON_PARSE");throw ie}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function validateStatus(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};P.forEach(["delete","get","head"],(function forEachMethodNoData(a){ie.headers[a]={}})),P.forEach(["post","put","patch"],(function forEachMethodWithData(a){ie.headers[a]=P.merge(ne)})),a.exports=ie}).call(this,j(66))},function(a,A,j){var P=j(473)("socket.io-parser"),B=j(67),q=j(476),ne=j(209),ie=j(210);function Encoder(){}A.protocol=4,A.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],A.CONNECT=0,A.DISCONNECT=1,A.EVENT=2,A.ACK=3,A.ERROR=4,A.BINARY_EVENT=5,A.BINARY_ACK=6,A.Encoder=Encoder,A.Decoder=Decoder;var oe=A.ERROR+'"encode error"';function encodeAsString(a){var j=""+a.type;if(A.BINARY_EVENT!==a.type&&A.BINARY_ACK!==a.type||(j+=a.attachments+"-"),a.nsp&&"/"!==a.nsp&&(j+=a.nsp+","),null!=a.id&&(j+=a.id),null!=a.data){var B=function tryStringify(a){try{return JSON.stringify(a)}catch(A){return!1}}(a.data);if(!1===B)return oe;j+=B}return P("encoded %j as %s",a,j),j}function Decoder(){this.reconstructor=null}function BinaryReconstructor(a){this.reconPack=a,this.buffers=[]}function error(a){return{type:A.ERROR,data:"parser error: "+a}}Encoder.prototype.encode=function(a,j){(P("encoding packet %j",a),A.BINARY_EVENT===a.type||A.BINARY_ACK===a.type)?function encodeAsBinary(a,A){q.removeBlobs(a,(function writeEncoding(a){var j=q.deconstructPacket(a),P=encodeAsString(j.packet),B=j.buffers;B.unshift(P),A(B)}))}(a,j):j([encodeAsString(a)])},B(Decoder.prototype),Decoder.prototype.add=function(a){var j;if("string"===typeof a)j=function decodeString(a){var j=0,B={type:Number(a.charAt(0))};if(null==A.types[B.type])return error("unknown packet type "+B.type);if(A.BINARY_EVENT===B.type||A.BINARY_ACK===B.type){for(var q=j+1;"-"!==a.charAt(++j)&&j!=a.length;);var ie=a.substring(q,j);if(ie!=Number(ie)||"-"!==a.charAt(j))throw new Error("Illegal attachments");B.attachments=Number(ie)}if("/"===a.charAt(j+1)){for(q=j+1;++j;){if(","===(se=a.charAt(j)))break;if(j===a.length)break}B.nsp=a.substring(q,j)}else B.nsp="/";var oe=a.charAt(j+1);if(""!==oe&&Number(oe)==oe){for(q=j+1;++j;){var se;if(null==(se=a.charAt(j))||Number(se)!=se){--j;break}if(j===a.length)break}B.id=Number(a.substring(q,j+1))}if(a.charAt(++j)){var le=function tryParse(a){try{return JSON.parse(a)}catch(A){return!1}}(a.substr(j));if(!(!1!==le&&(B.type===A.ERROR||ne(le))))return error("invalid payload");B.data=le}return P("decoded %s as %j",a,B),B}(a),A.BINARY_EVENT===j.type||A.BINARY_ACK===j.type?(this.reconstructor=new BinaryReconstructor(j),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",j)):this.emit("decoded",j);else{if(!ie(a)&&!a.base64)throw new Error("Unknown type: "+a);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(j=this.reconstructor.takeBinaryData(a))&&(this.reconstructor=null,this.emit("decoded",j))}},Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},BinaryReconstructor.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length===this.reconPack.attachments){var A=q.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),A}return null},BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(a,A,j){var P=j(479),B=j(137);a.exports=function(a){var A=a.xdomain,j=a.xscheme,q=a.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!A||P))return new XMLHttpRequest}catch(ne){}try{if("undefined"!==typeof XDomainRequest&&!j&&q)return new XDomainRequest}catch(ne){}if(!A)try{return new(B[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(ne){}}},function(a,A){a.exports="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")()},function(a,A,j){var P=j(68),B=j(67);function Transport(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.withCredentials=a.withCredentials,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.forceNode=a.forceNode,this.isReactNative=a.isReactNative,this.extraHeaders=a.extraHeaders,this.localAddress=a.localAddress}a.exports=Transport,B(Transport.prototype),Transport.prototype.onError=function(a,A){var j=new Error(a);return j.type="TransportError",j.description=A,this.emit("error",j),this},Transport.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},Transport.prototype.send=function(a){if("open"!==this.readyState)throw new Error("Transport not open");this.write(a)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(a){var A=P.decodePacket(a,this.socket.binaryType);this.onPacket(A)},Transport.prototype.onPacket=function(a){this.emit("packet",a)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(a,A,j){(function(A){var P=j(220),B="undefined"!==typeof window?window:"undefined"!==typeof A?A:"undefined"!==typeof self?self:{};function isUndefined(a){return void 0===a}function isPlainObject(a){return"[object Object]"===Object.prototype.toString.call(a)}function isString(a){return"[object String]"===Object.prototype.toString.call(a)}function isArray(a){return"[object Array]"===Object.prototype.toString.call(a)}function supportsFetch(){if(!("fetch"in B))return!1;try{return new Headers,new Request(""),new Response,!0}catch(a){return!1}}function each(a,A){var j,P;if(isUndefined(a.length))for(j in a)hasKey(a,j)&&A.call(null,j,a[j]);else if(P=a.length)for(j=0;j<P;j++)A.call(null,j,a[j])}function truncate(a,A){if("number"!==typeof A)throw new Error("2nd argument to `truncate` function should be a number");return"string"!==typeof a||0===A||a.length<=A?a:a.substr(0,A)+"\u2026"}function hasKey(a,A){return Object.prototype.hasOwnProperty.call(a,A)}function joinRegExp(a){for(var A,j=[],P=0,B=a.length;P<B;P++)isString(A=a[P])?j.push(A.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):A&&A.source&&j.push(A.source);return new RegExp(j.join("|"),"i")}function htmlElementAsString(a){var A,j,P,B,q,ne=[];if(!a||!a.tagName)return"";if(ne.push(a.tagName.toLowerCase()),a.id&&ne.push("#"+a.id),(A=a.className)&&isString(A))for(j=A.split(/\s+/),q=0;q<j.length;q++)ne.push("."+j[q]);var ie=["type","name","title","alt"];for(q=0;q<ie.length;q++)P=ie[q],(B=a.getAttribute(P))&&ne.push("["+P+'="'+B+'"]');return ne.join("")}function isOnlyOneTruthy(a,A){return!!(!!a^!!A)}function isSameStacktrace(a,A){if(isOnlyOneTruthy(a,A))return!1;var j,P,B=a.frames,q=A.frames;if(void 0===B||void 0===q)return!1;if(B.length!==q.length)return!1;for(var ne=0;ne<B.length;ne++)if(j=B[ne],P=q[ne],j.filename!==P.filename||j.lineno!==P.lineno||j.colno!==P.colno||j.function!==P.function)return!1;return!0}function jsonSize(a){return function utf8Length(a){return~-encodeURI(a).split(/%..|./).length}(JSON.stringify(a))}function serializeValue(a){if("string"===typeof a){return truncate(a,40)}if("number"===typeof a||"boolean"===typeof a||"undefined"===typeof a)return a;var A=Object.prototype.toString.call(a);return"[object Object]"===A?"[Object]":"[object Array]"===A?"[Array]":"[object Function]"===A?a.name?"[Function: "+a.name+"]":"[Function]":a}a.exports={isObject:function isObject(a){return"object"===typeof a&&null!==a},isError:function isError(a){switch(Object.prototype.toString.call(a)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return a instanceof Error}},isErrorEvent:function isErrorEvent(a){return"[object ErrorEvent]"===Object.prototype.toString.call(a)},isDOMError:function isDOMError(a){return"[object DOMError]"===Object.prototype.toString.call(a)},isDOMException:function isDOMException(a){return"[object DOMException]"===Object.prototype.toString.call(a)},isUndefined:isUndefined,isFunction:function isFunction(a){return"function"===typeof a},isPlainObject:isPlainObject,isString:isString,isArray:isArray,isEmptyObject:function isEmptyObject(a){if(!isPlainObject(a))return!1;for(var A in a)if(a.hasOwnProperty(A))return!1;return!0},supportsErrorEvent:function supportsErrorEvent(){try{return new ErrorEvent(""),!0}catch(a){return!1}},supportsDOMError:function supportsDOMError(){try{return new DOMError(""),!0}catch(a){return!1}},supportsDOMException:function supportsDOMException(){try{return new DOMException(""),!0}catch(a){return!1}},supportsFetch:supportsFetch,supportsReferrerPolicy:function supportsReferrerPolicy(){if(!supportsFetch())return!1;try{return new Request("pickleRick",{referrerPolicy:"origin"}),!0}catch(a){return!1}},supportsPromiseRejectionEvent:function supportsPromiseRejectionEvent(){return"function"===typeof PromiseRejectionEvent},wrappedCallback:function wrappedCallback(a){return function dataCallback(A,j){var P=a(A)||A;return j&&j(P)||P}},each:each,objectMerge:function objectMerge(a,A){return A?(each(A,(function(A,j){a[A]=j})),a):a},truncate:truncate,objectFrozen:function objectFrozen(a){return!!Object.isFrozen&&Object.isFrozen(a)},hasKey:hasKey,joinRegExp:joinRegExp,urlencode:function urlencode(a){var A=[];return each(a,(function(a,j){A.push(encodeURIComponent(a)+"="+encodeURIComponent(j))})),A.join("&")},uuid4:function uuid4(){var a=B.crypto||B.msCrypto;if(!isUndefined(a)&&a.getRandomValues){var A=new Uint16Array(8);a.getRandomValues(A),A[3]=4095&A[3]|16384,A[4]=16383&A[4]|32768;var j=function pad(a){for(var A=a.toString(16);A.length<4;)A="0"+A;return A};return j(A[0])+j(A[1])+j(A[2])+j(A[3])+j(A[4])+j(A[5])+j(A[6])+j(A[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(a){var A=16*Math.random()|0;return("x"===a?A:3&A|8).toString(16)}))},htmlTreeAsString:function htmlTreeAsString(a){for(var A,j=[],P=0,B=0,q=" > ".length;a&&P++<5&&!("html"===(A=htmlElementAsString(a))||P>1&&B+j.length*q+A.length>=80);)j.push(A),B+=A.length,a=a.parentNode;return j.reverse().join(" > ")},htmlElementAsString:htmlElementAsString,isSameException:function isSameException(a,A){return!isOnlyOneTruthy(a,A)&&(a=a.values[0],A=A.values[0],a.type===A.type&&a.value===A.value&&(!function isBothUndefined(a,A){return isUndefined(a)&&isUndefined(A)}(a.stacktrace,A.stacktrace)&&isSameStacktrace(a.stacktrace,A.stacktrace)))},isSameStacktrace:isSameStacktrace,parseUrl:function parseUrl(a){if("string"!==typeof a)return{};var A=a.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/),j=A[6]||"",P=A[8]||"";return{protocol:A[2],host:A[4],path:A[5],relative:A[5]+j+P}},fill:function fill(a,A,j,P){if(null!=a){var B=a[A];a[A]=j(B),a[A].__raven__=!0,a[A].__orig__=B,P&&P.push([a,A,B])}},safeJoin:function safeJoin(a,A){if(!isArray(a))return"";for(var j=[],P=0;P<a.length;P++)try{j.push(String(a[P]))}catch(B){j.push("[value cannot be serialized]")}return j.join(A)},serializeException:function serializeException(a,A,j){if(!isPlainObject(a))return a;j="number"!==typeof(A="number"!==typeof A?3:A)?51200:j;var B=function serializeObject(a,A){return 0===A?serializeValue(a):isPlainObject(a)?Object.keys(a).reduce((function(j,P){return j[P]=serializeObject(a[P],A-1),j}),{}):Array.isArray(a)?a.map((function(a){return serializeObject(a,A-1)})):serializeValue(a)}(a,A);return jsonSize(P(B))>j?serializeException(a,A-1):B},serializeKeysForMessage:function serializeKeysForMessage(a,A){if("number"===typeof a||"string"===typeof a)return a.toString();if(!Array.isArray(a))return"";if(0===(a=a.filter((function(a){return"string"===typeof a}))).length)return"[object has no keys]";if(A="number"!==typeof A?40:A,a[0].length>=A)return a[0];for(var j=a.length;j>0;j--){var P=a.slice(0,j).join(", ");if(!(P.length>A))return j===a.length?P:P+"\u2026"}return""},sanitize:function sanitize(a,A){if(!isArray(A)||isArray(A)&&0===A.length)return a;var j,B=joinRegExp(A);try{j=JSON.parse(P(a))}catch(q){return a}return function sanitizeWorker(a){return isArray(a)?a.map((function(a){return sanitizeWorker(a)})):isPlainObject(a)?Object.keys(a).reduce((function(A,j){return B.test(j)?A[j]="********":A[j]=sanitizeWorker(a[j]),A}),{}):a}(j)}}}).call(this,j(35))},function(a,A,j){var P=j(348);function wrap(a,A){return function(j,B){return P(j),function handler(a,A){return function(){return a(A)}}(A,a(j,B))}}a.exports={timeout:wrap(setTimeout,clearTimeout),interval:wrap(setInterval,clearInterval)}},,function(a,A,j){"use strict";var P=j(16),B=j(12),q=Object(P.a)((function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*B.e-a.getMinutes()*B.c)}),(function(a,A){a.setTime(+a+A*B.b)}),(function(a,A){return(A-a)/B.b}),(function(a){return a.getHours()}));A.a=q;q.range},function(a,A,j){"use strict";var P=j(16),B=j(12),q=Object(P.a)((function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*B.e)}),(function(a,A){a.setTime(+a+A*B.c)}),(function(a,A){return(A-a)/B.c}),(function(a){return a.getMinutes()}));A.a=q;q.range},function(a,A,j){"use strict";var P=j(16),B=j(12),q=Object(P.a)((function(a){a.setUTCMinutes(0,0,0)}),(function(a,A){a.setTime(+a+A*B.b)}),(function(a,A){return(A-a)/B.b}),(function(a){return a.getUTCHours()}));A.a=q;q.range},function(a,A,j){"use strict";var P=j(16),B=j(12),q=Object(P.a)((function(a){a.setUTCSeconds(0,0)}),(function(a,A){a.setTime(+a+A*B.c)}),(function(a,A){return(A-a)/B.c}),(function(a){return a.getUTCMinutes()}));A.a=q;q.range},function(a,A,j){"use strict";j.d(A,"a",(function(){return formatLocale}));var P=j(30),B=j(52),q=j(29),ne=j(51),ie=j(53),oe=j(54);function localDate(a){if(0<=a.y&&a.y<100){var A=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return A.setFullYear(a.y),A}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function utcDate(a){if(0<=a.y&&a.y<100){var A=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return A.setUTCFullYear(a.y),A}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function newDate(a,A,j){return{y:a,m:A,d:j,H:0,M:0,S:0,L:0}}function formatLocale(a){var A=a.dateTime,j=a.date,ie=a.time,oe=a.periods,le=a.days,he=a.shortDays,pe=a.months,ge=a.shortMonths,me=formatRe(oe),ve=formatLookup(oe),ye=formatRe(le),_e=formatLookup(le),we=formatRe(he),ke=formatLookup(he),Oe=formatRe(pe),Se=formatLookup(pe),Te=formatRe(ge),Ae=formatLookup(ge),je={a:function formatShortWeekday(a){return he[a.getDay()]},A:function formatWeekday(a){return le[a.getDay()]},b:function formatShortMonth(a){return ge[a.getMonth()]},B:function formatMonth(a){return pe[a.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function formatPeriod(a){return oe[+(a.getHours()>=12)]},q:function formatQuarter(a){return 1+~~(a.getMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},Fe={a:function formatUTCShortWeekday(a){return he[a.getUTCDay()]},A:function formatUTCWeekday(a){return le[a.getUTCDay()]},b:function formatUTCShortMonth(a){return ge[a.getUTCMonth()]},B:function formatUTCMonth(a){return pe[a.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function formatUTCPeriod(a){return oe[+(a.getUTCHours()>=12)]},q:function formatUTCQuarter(a){return 1+~~(a.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},Re={a:function parseShortWeekday(a,A,j){var P=we.exec(A.slice(j));return P?(a.w=ke.get(P[0].toLowerCase()),j+P[0].length):-1},A:function parseWeekday(a,A,j){var P=ye.exec(A.slice(j));return P?(a.w=_e.get(P[0].toLowerCase()),j+P[0].length):-1},b:function parseShortMonth(a,A,j){var P=Te.exec(A.slice(j));return P?(a.m=Ae.get(P[0].toLowerCase()),j+P[0].length):-1},B:function parseMonth(a,A,j){var P=Oe.exec(A.slice(j));return P?(a.m=Se.get(P[0].toLowerCase()),j+P[0].length):-1},c:function parseLocaleDateTime(a,j,P){return parseSpecifier(a,A,j,P)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function parsePeriod(a,A,j){var P=me.exec(A.slice(j));return P?(a.p=ve.get(P[0].toLowerCase()),j+P[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function parseLocaleDate(a,A,P){return parseSpecifier(a,j,A,P)},X:function parseLocaleTime(a,A,j){return parseSpecifier(a,ie,A,j)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(a,A){return function(j){var P,B,q,ne=[],ie=-1,oe=0,le=a.length;for(j instanceof Date||(j=new Date(+j));++ie<le;)37===a.charCodeAt(ie)&&(ne.push(a.slice(oe,ie)),null!=(B=se[P=a.charAt(++ie)])?P=a.charAt(++ie):B="e"===P?" ":"0",(q=A[P])&&(P=q(j,B)),ne.push(P),oe=ie+1);return ne.push(a.slice(oe,ie)),ne.join("")}}function newParse(a,A){return function(j){var ie,oe,se=newDate(1900,void 0,1);if(parseSpecifier(se,a,j+="",0)!=j.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(1e3*se.s+("L"in se?se.L:0));if(A&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+12*se.p),void 0===se.m&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(oe=(ie=utcDate(newDate(se.y,0,1))).getUTCDay(),ie=oe>4||0===oe?P.a.ceil(ie):Object(P.a)(ie),ie=B.a.offset(ie,7*(se.V-1)),se.y=ie.getUTCFullYear(),se.m=ie.getUTCMonth(),se.d=ie.getUTCDate()+(se.w+6)%7):(oe=(ie=localDate(newDate(se.y,0,1))).getDay(),ie=oe>4||0===oe?q.a.ceil(ie):Object(q.a)(ie),ie=ne.a.offset(ie,7*(se.V-1)),se.y=ie.getFullYear(),se.m=ie.getMonth(),se.d=ie.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),oe="Z"in se?utcDate(newDate(se.y,0,1)).getUTCDay():localDate(newDate(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+7*se.W-(oe+5)%7:se.w+7*se.U-(oe+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,utcDate(se)):localDate(se)}}function parseSpecifier(a,A,j,P){for(var B,q,ne=0,ie=A.length,oe=j.length;ne<ie;){if(P>=oe)return-1;if(37===(B=A.charCodeAt(ne++))){if(B=A.charAt(ne++),!(q=Re[B in se?A.charAt(ne++):B])||(P=q(a,j,P))<0)return-1}else if(B!=j.charCodeAt(P++))return-1}return P}return je.x=newFormat(j,je),je.X=newFormat(ie,je),je.c=newFormat(A,je),Fe.x=newFormat(j,Fe),Fe.X=newFormat(ie,Fe),Fe.c=newFormat(A,Fe),{format:function format(a){var A=newFormat(a+="",je);return A.toString=function(){return a},A},parse:function parse(a){var A=newParse(a+="",!1);return A.toString=function(){return a},A},utcFormat:function utcFormat(a){var A=newFormat(a+="",Fe);return A.toString=function(){return a},A},utcParse:function utcParse(a){var A=newParse(a+="",!0);return A.toString=function(){return a},A}}}var se={"-":"",_:" ",0:"0"},le=/^\s*\d+/,he=/^%/,pe=/[\\^$*+?|[\]().{}]/g;function pad(a,A,j){var P=a<0?"-":"",B=(P?-a:a)+"",q=B.length;return P+(q<j?new Array(j-q+1).join(A)+B:B)}function requote(a){return a.replace(pe,"\\$&")}function formatRe(a){return new RegExp("^(?:"+a.map(requote).join("|")+")","i")}function formatLookup(a){return new Map(a.map((function(a,A){return[a.toLowerCase(),A]})))}function parseWeekdayNumberSunday(a,A,j){var P=le.exec(A.slice(j,j+1));return P?(a.w=+P[0],j+P[0].length):-1}function parseWeekdayNumberMonday(a,A,j){var P=le.exec(A.slice(j,j+1));return P?(a.u=+P[0],j+P[0].length):-1}function parseWeekNumberSunday(a,A,j){var P=le.exec(A.slice(j,j+2));return P?(a.U=+P[0],j+P[0].length):-1}function parseWeekNumberISO(a,A,j){var P=le.exec(A.slice(j,j+2));return P?(a.V=+P[0],j+P[0].length):-1}function parseWeekNumberMonday(a,A,j){var P=le.exec(A.slice(j,j+2));return P?(a.W=+P[0],j+P[0].length):-1}function parseFullYear(a,A,j){var P=le.exec(A.slice(j,j+4));return P?(a.y=+P[0],j+P[0].length):-1}function parseYear(a,A,j){var P=le.exec(A.slice(j,j+2));return P?(a.y=+P[0]+(+P[0]>68?1900:2e3),j+P[0].length):-1}function parseZone(a,A,j){var P=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(A.slice(j,j+6));return P?(a.Z=P[1]?0:-(P[2]+(P[3]||"00")),j+P[0].length):-1}function parseQuarter(a,A,j){var P=le.exec(A.slice(j,j+1));return P?(a.q=3*P[0]-3,j+P[0].length):-1}function parseMonthNumber(a,A,j){var P=le.exec(A.slice(j,j+2));return P?(a.m=P[0]-1,j+P[0].length):-1}function parseDayOfMonth(a,A,j){var P=le.exec(A.slice(j,j+2));return P?(a.d=+P[0],j+P[0].length):-1}function parseDayOfYear(a,A,j){var P=le.exec(A.slice(j,j+3));return P?(a.m=0,a.d=+P[0],j+P[0].length):-1}function parseHour24(a,A,j){var P=le.exec(A.slice(j,j+2));return P?(a.H=+P[0],j+P[0].length):-1}function parseMinutes(a,A,j){var P=le.exec(A.slice(j,j+2));return P?(a.M=+P[0],j+P[0].length):-1}function parseSeconds(a,A,j){var P=le.exec(A.slice(j,j+2));return P?(a.S=+P[0],j+P[0].length):-1}function parseMilliseconds(a,A,j){var P=le.exec(A.slice(j,j+3));return P?(a.L=+P[0],j+P[0].length):-1}function parseMicroseconds(a,A,j){var P=le.exec(A.slice(j,j+6));return P?(a.L=Math.floor(P[0]/1e3),j+P[0].length):-1}function parseLiteralPercent(a,A,j){var P=he.exec(A.slice(j,j+1));return P?j+P[0].length:-1}function parseUnixTimestamp(a,A,j){var P=le.exec(A.slice(j));return P?(a.Q=+P[0],j+P[0].length):-1}function parseUnixTimestampSeconds(a,A,j){var P=le.exec(A.slice(j));return P?(a.s=+P[0],j+P[0].length):-1}function formatDayOfMonth(a,A){return pad(a.getDate(),A,2)}function formatHour24(a,A){return pad(a.getHours(),A,2)}function formatHour12(a,A){return pad(a.getHours()%12||12,A,2)}function formatDayOfYear(a,A){return pad(1+ne.a.count(Object(ie.a)(a),a),A,3)}function formatMilliseconds(a,A){return pad(a.getMilliseconds(),A,3)}function formatMicroseconds(a,A){return formatMilliseconds(a,A)+"000"}function formatMonthNumber(a,A){return pad(a.getMonth()+1,A,2)}function formatMinutes(a,A){return pad(a.getMinutes(),A,2)}function formatSeconds(a,A){return pad(a.getSeconds(),A,2)}function formatWeekdayNumberMonday(a){var A=a.getDay();return 0===A?7:A}function formatWeekNumberSunday(a,A){return pad(q.b.count(Object(ie.a)(a)-1,a),A,2)}function dISO(a){var A=a.getDay();return A>=4||0===A?Object(q.c)(a):q.c.ceil(a)}function formatWeekNumberISO(a,A){return a=dISO(a),pad(q.c.count(Object(ie.a)(a),a)+(4===Object(ie.a)(a).getDay()),A,2)}function formatWeekdayNumberSunday(a){return a.getDay()}function formatWeekNumberMonday(a,A){return pad(q.a.count(Object(ie.a)(a)-1,a),A,2)}function formatYear(a,A){return pad(a.getFullYear()%100,A,2)}function formatYearISO(a,A){return pad((a=dISO(a)).getFullYear()%100,A,2)}function formatFullYear(a,A){return pad(a.getFullYear()%1e4,A,4)}function formatFullYearISO(a,A){var j=a.getDay();return pad((a=j>=4||0===j?Object(q.c)(a):q.c.ceil(a)).getFullYear()%1e4,A,4)}function formatZone(a){var A=a.getTimezoneOffset();return(A>0?"-":(A*=-1,"+"))+pad(A/60|0,"0",2)+pad(A%60,"0",2)}function formatUTCDayOfMonth(a,A){return pad(a.getUTCDate(),A,2)}function formatUTCHour24(a,A){return pad(a.getUTCHours(),A,2)}function formatUTCHour12(a,A){return pad(a.getUTCHours()%12||12,A,2)}function formatUTCDayOfYear(a,A){return pad(1+B.a.count(Object(oe.a)(a),a),A,3)}function formatUTCMilliseconds(a,A){return pad(a.getUTCMilliseconds(),A,3)}function formatUTCMicroseconds(a,A){return formatUTCMilliseconds(a,A)+"000"}function formatUTCMonthNumber(a,A){return pad(a.getUTCMonth()+1,A,2)}function formatUTCMinutes(a,A){return pad(a.getUTCMinutes(),A,2)}function formatUTCSeconds(a,A){return pad(a.getUTCSeconds(),A,2)}function formatUTCWeekdayNumberMonday(a){var A=a.getUTCDay();return 0===A?7:A}function formatUTCWeekNumberSunday(a,A){return pad(P.b.count(Object(oe.a)(a)-1,a),A,2)}function UTCdISO(a){var A=a.getUTCDay();return A>=4||0===A?Object(P.c)(a):P.c.ceil(a)}function formatUTCWeekNumberISO(a,A){return a=UTCdISO(a),pad(P.c.count(Object(oe.a)(a),a)+(4===Object(oe.a)(a).getUTCDay()),A,2)}function formatUTCWeekdayNumberSunday(a){return a.getUTCDay()}function formatUTCWeekNumberMonday(a,A){return pad(P.a.count(Object(oe.a)(a)-1,a),A,2)}function formatUTCYear(a,A){return pad(a.getUTCFullYear()%100,A,2)}function formatUTCYearISO(a,A){return pad((a=UTCdISO(a)).getUTCFullYear()%100,A,2)}function formatUTCFullYear(a,A){return pad(a.getUTCFullYear()%1e4,A,4)}function formatUTCFullYearISO(a,A){var j=a.getUTCDay();return pad((a=j>=4||0===j?Object(P.c)(a):P.c.ceil(a)).getUTCFullYear()%1e4,A,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(a){return+a}function formatUnixTimestampSeconds(a){return Math.floor(+a/1e3)}},function(a,A,j){"use strict";var P=j(11);A.a=function e(a){var A=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(a).slice(1,3),j=Object(P.a)(A,2);return{library:j[0],version:j[1]}}},function(a,A,j){"use strict";j.d(A,"a",(function(){return feature})),j.d(A,"b",(function(){return mesh}));var identity=function(a){return a},src_transform=function(a){if(null==a)return identity;var A,j,P=a.scale[0],B=a.scale[1],q=a.translate[0],ne=a.translate[1];return function(a,ie){ie||(A=j=0);var oe=2,se=a.length,le=new Array(se);for(le[0]=(A+=a[0])*P+q,le[1]=(j+=a[1])*B+ne;oe<se;)le[oe]=a[oe],++oe;return le}},feature=function(a,A){return"string"===typeof A&&(A=a.objects[A]),"GeometryCollection"===A.type?{type:"FeatureCollection",features:A.geometries.map((function(A){return feature_feature(a,A)}))}:feature_feature(a,A)};function feature_feature(a,A){var j=A.id,P=A.bbox,B=null==A.properties?{}:A.properties,q=feature_object(a,A);return null==j&&null==P?{type:"Feature",properties:B,geometry:q}:null==P?{type:"Feature",id:j,properties:B,geometry:q}:{type:"Feature",id:j,bbox:P,properties:B,geometry:q}}function feature_object(a,A){var j=src_transform(a.transform),P=a.arcs;function arc(a,A){A.length&&A.pop();for(var B=P[a<0?~a:a],q=0,ne=B.length;q<ne;++q)A.push(j(B[q],q));a<0&&function(a,A){for(var j,P=a.length,B=P-A;B<--P;)j=a[B],a[B++]=a[P],a[P]=j}(A,ne)}function point(a){return j(a)}function line(a){for(var A=[],j=0,P=a.length;j<P;++j)arc(a[j],A);return A.length<2&&A.push(A[0]),A}function ring(a){for(var A=line(a);A.length<4;)A.push(A[0]);return A}function polygon(a){return a.map(ring)}return function geometry(a){var A,j=a.type;switch(j){case"GeometryCollection":return{type:j,geometries:a.geometries.map(geometry)};case"Point":A=point(a.coordinates);break;case"MultiPoint":A=a.coordinates.map(point);break;case"LineString":A=line(a.arcs);break;case"MultiLineString":A=a.arcs.map(line);break;case"Polygon":A=polygon(a.arcs);break;case"MultiPolygon":A=a.arcs.map(polygon);break;default:return null}return{type:j,coordinates:A}}(A)}var stitch=function(a,A){var j={},P={},B={},q=[],ne=-1;function flush(a,A){for(var P in a){var B=a[P];delete A[B.start],delete B.start,delete B.end,B.forEach((function(a){j[a<0?~a:a]=1})),q.push(B)}}return A.forEach((function(j,P){var B,q=a.arcs[j<0?~j:j];q.length<3&&!q[1][0]&&!q[1][1]&&(B=A[++ne],A[ne]=j,A[P]=B)})),A.forEach((function(A){var j,q,ne=function ends(A){var j,P=a.arcs[A<0?~A:A],B=P[0];a.transform?(j=[0,0],P.forEach((function(a){j[0]+=a[0],j[1]+=a[1]}))):j=P[P.length-1];return A<0?[j,B]:[B,j]}(A),ie=ne[0],oe=ne[1];if(j=B[ie])if(delete B[j.end],j.push(A),j.end=oe,q=P[oe]){delete P[q.start];var se=q===j?j:j.concat(q);P[se.start=j.start]=B[se.end=q.end]=se}else P[j.start]=B[j.end]=j;else if(j=P[oe])if(delete P[j.start],j.unshift(A),j.start=ie,q=B[ie]){delete B[q.end];var le=q===j?j:q.concat(j);P[le.start=q.start]=B[le.end=j.end]=le}else P[j.start]=B[j.end]=j;else P[(j=[A]).start=ie]=B[j.end=oe]=j})),flush(B,P),flush(P,B),A.forEach((function(a){j[a<0?~a:a]||q.push([a])})),q},mesh=function(a){return feature_object(a,meshArcs.apply(this,arguments))};function meshArcs(a,A,j){var P,B,q;if(arguments.length>1)P=extractArcs(a,A,j);else for(B=0,P=new Array(q=a.arcs.length);B<q;++B)P[B]=B;return{type:"MultiLineString",arcs:stitch(a,P)}}function extractArcs(a,A,j){var P,B=[],q=[];function extract0(a){var A=a<0?~a:a;(q[A]||(q[A]=[])).push({i:a,g:P})}function extract1(a){a.forEach(extract0)}function extract2(a){a.forEach(extract1)}return function geometry(a){switch(P=a,a.type){case"GeometryCollection":a.geometries.forEach(geometry);break;case"LineString":extract1(a.arcs);break;case"MultiLineString":case"Polygon":extract2(a.arcs);break;case"MultiPolygon":!function extract3(a){a.forEach(extract2)}(a.arcs)}}(A),q.forEach(null==j?function(a){B.push(a[0].i)}:function(a){j(a[0].g,a[a.length-1].g)&&B.push(a[0].i)}),B}},function(a,A,j){"use strict";var P,B=j(37),q=j(81),ne=j(45),formatRounded=function(a,A){var j=Object(ne.b)(a,A);if(!j)return a+"";var P=j[0],B=j[1];return B<0?"0."+new Array(-B).join("0")+P:P.length>B+1?P.slice(0,B+1)+"."+P.slice(B+1):P+new Array(B-P.length+2).join("0")},ie={"%":function _(a,A){return(100*a).toFixed(A)},b:function b(a){return Math.round(a).toString(2)},c:function c(a){return a+""},d:ne.a,e:function e(a,A){return a.toExponential(A)},f:function f(a,A){return a.toFixed(A)},g:function g(a,A){return a.toPrecision(A)},o:function o(a){return Math.round(a).toString(8)},p:function p(a,A){return formatRounded(100*a,A)},r:formatRounded,s:function(a,A){var j=Object(ne.b)(a,A);if(!j)return a+"";var B=j[0],q=j[1],ie=q-(P=3*Math.max(-8,Math.min(8,Math.floor(q/3))))+1,oe=B.length;return ie===oe?B:ie>oe?B+new Array(ie-oe+1).join("0"):ie>0?B.slice(0,ie)+"."+B.slice(ie):"0."+new Array(1-ie).join("0")+Object(ne.b)(a,Math.max(0,A+ie-1))[0]},X:function X(a){return Math.round(a).toString(16).toUpperCase()},x:function x(a){return Math.round(a).toString(16)}},identity=function(a){return a},oe=Array.prototype.map,se=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];A.a=function(a){var A,j,ne=void 0===a.grouping||void 0===a.thousands?identity:(A=oe.call(a.grouping,Number),j=a.thousands+"",function(a,P){for(var B=a.length,q=[],ne=0,ie=A[0],oe=0;B>0&&ie>0&&(oe+ie+1>P&&(ie=Math.max(1,P-oe)),q.push(a.substring(B-=ie,B+ie)),!((oe+=ie+1)>P));)ie=A[ne=(ne+1)%A.length];return q.reverse().join(j)}),le=void 0===a.currency?"":a.currency[0]+"",he=void 0===a.currency?"":a.currency[1]+"",pe=void 0===a.decimal?".":a.decimal+"",ge=void 0===a.numerals?identity:function(a){return function(A){return A.replace(/[0-9]/g,(function(A){return a[+A]}))}}(oe.call(a.numerals,String)),me=void 0===a.percent?"%":a.percent+"",ve=void 0===a.minus?"\u2212":a.minus+"",ye=void 0===a.nan?"NaN":a.nan+"";function newFormat(a){var A=(a=Object(q.a)(a)).fill,j=a.align,B=a.sign,oe=a.symbol,_e=a.zero,we=a.width,ke=a.comma,Oe=a.precision,Se=a.trim,Te=a.type;"n"===Te?(ke=!0,Te="g"):ie[Te]||(void 0===Oe&&(Oe=12),Se=!0,Te="g"),(_e||"0"===A&&"="===j)&&(_e=!0,A="0",j="=");var Ae="$"===oe?le:"#"===oe&&/[boxX]/.test(Te)?"0"+Te.toLowerCase():"",je="$"===oe?he:/[%p]/.test(Te)?me:"",Fe=ie[Te],Re=/[defgprs%]/.test(Te);function format(a){var q,ie,oe,le=Ae,he=je;if("c"===Te)he=Fe(a)+he,a="";else{var me=(a=+a)<0||1/a<0;if(a=isNaN(a)?ye:Fe(Math.abs(a),Oe),Se&&(a=function(a){e:for(var A,j=a.length,P=1,B=-1;P<j;++P)switch(a[P]){case".":B=A=P;break;case"0":0===B&&(B=P),A=P;break;default:if(!+a[P])break e;B>0&&(B=0)}return B>0?a.slice(0,B)+a.slice(A+1):a}(a)),me&&0===+a&&"+"!==B&&(me=!1),le=(me?"("===B?B:ve:"-"===B||"("===B?"":B)+le,he=("s"===Te?se[8+P/3]:"")+he+(me&&"("===B?")":""),Re)for(q=-1,ie=a.length;++q<ie;)if(48>(oe=a.charCodeAt(q))||oe>57){he=(46===oe?pe+a.slice(q+1):a.slice(q))+he,a=a.slice(0,q);break}}ke&&!_e&&(a=ne(a,1/0));var Me=le.length+a.length+he.length,Ne=Me<we?new Array(we-Me+1).join(A):"";switch(ke&&_e&&(a=ne(Ne+a,Ne.length?we-he.length:1/0),Ne=""),j){case"<":a=le+a+he+Ne;break;case"=":a=le+Ne+a+he;break;case"^":a=Ne.slice(0,Me=Ne.length>>1)+le+a+he+Ne.slice(Me);break;default:a=Ne+le+a+he}return ge(a)}return Oe=void 0===Oe?6:/[gprs]/.test(Te)?Math.max(1,Math.min(21,Oe)):Math.max(0,Math.min(20,Oe)),format.toString=function(){return a+""},format}return{format:newFormat,formatPrefix:function formatPrefix(a,A){var j=newFormat(((a=Object(q.a)(a)).type="f",a)),P=3*Math.max(-8,Math.min(8,Math.floor(Object(B.a)(A)/3))),ne=Math.pow(10,-P),ie=se[8+P/3];return function(a){return j(ne*a)+ie}}}}},function(a,A,j){"use strict";j.d(A,"b",(function(){return tickIncrement})),j.d(A,"c",(function(){return tickStep}));var P=Math.sqrt(50),B=Math.sqrt(10),q=Math.sqrt(2);function tickIncrement(a,A,j){var ne=(A-a)/Math.max(0,j),ie=Math.floor(Math.log(ne)/Math.LN10),oe=ne/Math.pow(10,ie);return ie>=0?(oe>=P?10:oe>=B?5:oe>=q?2:1)*Math.pow(10,ie):-Math.pow(10,-ie)/(oe>=P?10:oe>=B?5:oe>=q?2:1)}function tickStep(a,A,j){var ne=Math.abs(A-a)/Math.max(0,j),ie=Math.pow(10,Math.floor(Math.log(ne)/Math.LN10)),oe=ne/ie;return oe>=P?ie*=10:oe>=B?ie*=5:oe>=q&&(ie*=2),A<a?-ie:ie}A.a=function(a,A,j){var P,B,q,ne,ie=-1;if(j=+j,(a=+a)===(A=+A)&&j>0)return[a];if((P=A<a)&&(B=a,a=A,A=B),0===(ne=tickIncrement(a,A,j))||!isFinite(ne))return[];if(ne>0){var oe=Math.round(a/ne),se=Math.round(A/ne);for(oe*ne<a&&++oe,se*ne>A&&--se,q=new Array(B=se-oe+1);++ie<B;)q[ie]=(oe+ie)*ne}else{ne=-ne;var le=Math.round(a*ne),he=Math.round(A*ne);for(le/ne<a&&++le,he/ne>A&&--he,q=new Array(B=he-le+1);++ie<B;)q[ie]=(le+ie)/ne}return P&&q.reverse(),q}},,,function(a,A){},function(a,A,j){"use strict";var P=j(71),B=j(33),q=j(156),ne=j(56),ie=j(73),oe=j(257),se=j(86),le=j(160),he=j(27)("iterator"),pe=!([].keys&&"next"in[].keys()),ge=function returnThis(){return this};a.exports=function(a,A,j,me,ve,ye,_e){oe(j,A,me);var we,ke,Oe,Se=function getMethod(a){if(!pe&&a in Fe)return Fe[a];switch(a){case"keys":return function keys(){return new j(this,a)};case"values":return function values(){return new j(this,a)}}return function entries(){return new j(this,a)}},Te=A+" Iterator",Ae="values"==ve,je=!1,Fe=a.prototype,Re=Fe[he]||Fe["@@iterator"]||ve&&Fe[ve],Me=Re||Se(ve),Ne=ve?Ae?Se("entries"):Me:void 0,Be="Array"==A&&Fe.entries||Re;if(Be&&(Oe=le(Be.call(new a)))!==Object.prototype&&Oe.next&&(se(Oe,Te,!0),P||"function"==typeof Oe[he]||ne(Oe,he,ge)),Ae&&Re&&"values"!==Re.name&&(je=!0,Me=function values(){return Re.call(this)}),P&&!_e||!pe&&!je&&Fe[he]||ne(Fe,he,Me),ie[A]=Me,ie[Te]=ge,ve)if(we={values:Ae?Me:Se("values"),keys:ye?Me:Se("keys"),entries:Ne},_e)for(ke in we)ke in Fe||q(Fe,ke,we[ke]);else B(B.P+B.F*(pe||je),A,we);return we}},function(a,A,j){a.exports=!j(42)&&!j(62)((function(){return 7!=Object.defineProperty(j(115)("div"),"a",{get:function get(){return 7}}).a}))},function(a,A,j){a.exports=j(56)},function(a,A,j){var P=j(57),B=j(63),q=j(259)(!1),ne=j(119)("IE_PROTO");a.exports=function(a,A){var j,ie=B(a),oe=0,se=[];for(j in ie)j!=ne&&P(ie,j)&&se.push(j);for(;A.length>oe;)P(ie,j=A[oe++])&&(~q(se,j)||se.push(j));return se}},function(a,A,j){var P=j(75);a.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==P(a)?a.split(""):Object(a)}},function(a,A,j){var P=j(26).document;a.exports=P&&P.documentElement},function(a,A,j){var P=j(57),B=j(64),q=j(119)("IE_PROTO"),ne=Object.prototype;a.exports=Object.getPrototypeOf||function(a){return a=B(a),P(a,q)?a[q]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?ne:null}},function(a,A,j){j(261);for(var P=j(26),B=j(56),q=j(73),ne=j(27)("toStringTag"),ie="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),oe=0;oe<ie.length;oe++){var se=ie[oe],le=P[se],he=le&&le.prototype;he&&!he[ne]&&B(he,ne,se),q[se]=q.Array}},function(a,A,j){var P=j(75),B=j(27)("toStringTag"),q="Arguments"==P(function(){return arguments}());a.exports=function(a){var A,j,ne;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(j=function tryGet(a,A){try{return a[A]}catch(j){}}(A=Object(a),B))?j:q?P(A):"Object"==(ne=P(A))&&"function"==typeof A.callee?"Arguments":ne}},function(a,A,j){var P=j(41);a.exports=function(a,A,j,B){try{return B?A(P(j)[0],j[1]):A(j)}catch(ne){var q=a.return;throw void 0!==q&&P(q.call(a)),ne}}},function(a,A,j){var P=j(73),B=j(27)("iterator"),q=Array.prototype;a.exports=function(a){return void 0!==a&&(P.Array===a||q[B]===a)}},function(a,A,j){var P=j(162),B=j(27)("iterator"),q=j(73);a.exports=j(21).getIteratorMethod=function(a){if(void 0!=a)return a[B]||a["@@iterator"]||q[P(a)]}},function(a,A,j){var P=j(41),B=j(84),q=j(27)("species");a.exports=function(a,A){var j,ne=P(a).constructor;return void 0===ne||void 0==(j=P(ne)[q])?A:B(j)}},function(a,A,j){var P,B,q,ne=j(61),ie=j(267),oe=j(159),se=j(115),le=j(26),he=le.process,pe=le.setImmediate,ge=le.clearImmediate,me=le.MessageChannel,ve=le.Dispatch,ye=0,_e={},we=function run(){var a=+this;if(_e.hasOwnProperty(a)){var A=_e[a];delete _e[a],A()}},ke=function listener(a){we.call(a.data)};pe&&ge||(pe=function setImmediate(a){for(var A=[],j=1;arguments.length>j;)A.push(arguments[j++]);return _e[++ye]=function(){ie("function"==typeof a?a:Function(a),A)},P(ye),ye},ge=function clearImmediate(a){delete _e[a]},"process"==j(75)(he)?P=function defer(a){he.nextTick(ne(we,a,1))}:ve&&ve.now?P=function defer(a){ve.now(ne(we,a,1))}:me?(q=(B=new me).port2,B.port1.onmessage=ke,P=ne(q.postMessage,q,1)):le.addEventListener&&"function"==typeof postMessage&&!le.importScripts?(P=function defer(a){le.postMessage(a+"","*")},le.addEventListener("message",ke,!1)):P="onreadystatechange"in se("script")?function defer(a){oe.appendChild(se("script")).onreadystatechange=function(){oe.removeChild(this),we.call(a)}}:function defer(a){setTimeout(ne(we,a,1),0)}),a.exports={set:pe,clear:ge}},function(a,A){a.exports=function(a){try{return{e:!1,v:a()}}catch(A){return{e:!0,v:A}}}},function(a,A,j){var P=j(41),B=j(47),q=j(122);a.exports=function(a,A){if(P(a),B(A)&&A.constructor===a)return A;var j=q.f(a);return(0,j.resolve)(A),j.promise}},function(a,A,j){var P=j(27)("iterator"),B=!1;try{var q=[7][P]();q.return=function(){B=!0},Array.from(q,(function(){throw 2}))}catch(ne){}a.exports=function(a,A){if(!A&&!B)return!1;var j=!1;try{var q=[7],ie=q[P]();ie.next=function(){return{done:j=!0}},q[P]=function(){return ie},a(q)}catch(ne){}return j}},function(a,A,j){a.exports={default:j(279),__esModule:!0}},function(a,A,j){var P=j(33),B=j(21),q=j(62);a.exports=function(a,A){var j=(B.Object||{})[a]||Object[a],ne={};ne[a]=A(j),P(P.S+P.F*q((function(){j(1)})),"Object",ne)}},function(a,A,j){"use strict";A.__esModule=!0;var P=_interopRequireDefault(j(297)),B=_interopRequireDefault(j(299)),q="function"===typeof B.default&&"symbol"===typeof P.default?function(a){return typeof a}:function(a){return a&&"function"===typeof B.default&&a.constructor===B.default&&a!==B.default.prototype?"symbol":typeof a};function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}A.default="function"===typeof B.default&&"symbol"===q(P.default)?function(a){return"undefined"===typeof a?"undefined":q(a)}:function(a){return a&&"function"===typeof B.default&&a.constructor===B.default&&a!==B.default.prototype?"symbol":"undefined"===typeof a?"undefined":q(a)}},function(a,A,j){var P=j(157),B=j(121).concat("length","prototype");A.f=Object.getOwnPropertyNames||function getOwnPropertyNames(a){return P(a,B)}},function(a,A,j){var P=j(87),B=j(72),q=j(63),ne=j(116),ie=j(57),oe=j(155),se=Object.getOwnPropertyDescriptor;A.f=j(42)?se:function getOwnPropertyDescriptor(a,A){if(a=q(a),A=ne(A,!0),oe)try{return se(a,A)}catch(j){}if(ie(a,A))return B(!P.f.call(a,A),a[A])}},function(a,A,j){"use strict";var P=j(316),B=j(317),q=j(321),ne=j(322),ie=j(326),oe=j(178),se=j(327),le=j(328),he=Symbol("encodeFragmentIdentifier");function validateArrayFormatSeparator(a){if("string"!==typeof a||1!==a.length)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(a,A){return A.encode?A.strict?ie(a):encodeURIComponent(a):a}function decode(a,A){return A.decode?oe(a):a}function removeHash(a){var A=a.indexOf("#");return-1!==A&&(a=a.slice(0,A)),a}function extract(a){var A=(a=removeHash(a)).indexOf("?");return-1===A?"":a.slice(A+1)}function parseValue(a,A){return A.parseNumbers&&!Number.isNaN(Number(a))&&"string"===typeof a&&""!==a.trim()?a=Number(a):!A.parseBooleans||null===a||"true"!==a.toLowerCase()&&"false"!==a.toLowerCase()||(a="true"===a.toLowerCase()),a}function parse(a,A){validateArrayFormatSeparator((A=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},A)).arrayFormatSeparator);var j=function parserForArrayFormat(a){var A;switch(a.arrayFormat){case"index":return function(a,j,P){A=/\[(\d*)\]$/.exec(a),a=a.replace(/\[\d*\]$/,""),A?(void 0===P[a]&&(P[a]={}),P[a][A[1]]=j):P[a]=j};case"bracket":return function(a,j,P){A=/(\[\])$/.exec(a),a=a.replace(/\[\]$/,""),A?void 0!==P[a]?P[a]=[].concat(P[a],j):P[a]=[j]:P[a]=j};case"colon-list-separator":return function(a,j,P){A=/(:list)$/.exec(a),a=a.replace(/:list$/,""),A?void 0!==P[a]?P[a]=[].concat(P[a],j):P[a]=[j]:P[a]=j};case"comma":case"separator":return function(A,j,P){var B="string"===typeof j&&j.includes(a.arrayFormatSeparator),q="string"===typeof j&&!B&&decode(j,a).includes(a.arrayFormatSeparator);j=q?decode(j,a):j;var ne=B||q?j.split(a.arrayFormatSeparator).map((function(A){return decode(A,a)})):null===j?j:decode(j,a);P[A]=ne};case"bracket-separator":return function(A,j,P){var B=/(\[\])$/.test(A);if(A=A.replace(/\[\]$/,""),B){var q=null===j?[]:j.split(a.arrayFormatSeparator).map((function(A){return decode(A,a)}));void 0!==P[A]?P[A]=[].concat(P[A],q):P[A]=q}else P[A]=j?decode(j,a):j};default:return function(a,A,j){void 0!==j[a]?j[a]=[].concat(j[a],A):j[a]=A}}}(A),P=Object.create(null);if("string"!==typeof a)return P;if(!(a=a.trim().replace(/^[?#&]/,"")))return P;var ne,ie=q(a.split("&"));try{for(ie.s();!(ne=ie.n()).done;){var oe=ne.value;if(""!==oe){var le=se(A.decode?oe.replace(/\+/g," "):oe,"="),he=B(le,2),pe=he[0],ge=he[1];ge=void 0===ge?null:["comma","separator","bracket-separator"].includes(A.arrayFormat)?ge:decode(ge,A),j(decode(pe,A),ge,P)}}}catch(Se){ie.e(Se)}finally{ie.f()}for(var me=0,ve=Object.keys(P);me<ve.length;me++){var ye=ve[me],_e=P[ye];if("object"===typeof _e&&null!==_e)for(var we=0,ke=Object.keys(_e);we<ke.length;we++){var Oe=ke[we];_e[Oe]=parseValue(_e[Oe],A)}else P[ye]=parseValue(_e,A)}return!1===A.sort?P:(!0===A.sort?Object.keys(P).sort():Object.keys(P).sort(A.sort)).reduce((function(a,A){var j=P[A];return Boolean(j)&&"object"===typeof j&&!Array.isArray(j)?a[A]=function keysSorter(a){return Array.isArray(a)?a.sort():"object"===typeof a?keysSorter(Object.keys(a)).sort((function(a,A){return Number(a)-Number(A)})).map((function(A){return a[A]})):a}(j):a[A]=j,a}),Object.create(null))}A.extract=extract,A.parse=parse,A.stringify=function(a,A){if(!a)return"";validateArrayFormatSeparator((A=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},A)).arrayFormatSeparator);for(var j=function shouldFilter(j){return A.skipNull&&function isNullOrUndefined(a){return null===a||void 0===a}(a[j])||A.skipEmptyString&&""===a[j]},P=function encoderForArrayFormat(a){switch(a.arrayFormat){case"index":return function(A){return function(j,P){var B=j.length;return void 0===P||a.skipNull&&null===P||a.skipEmptyString&&""===P?j:[].concat(ne(j),null===P?[[encode(A,a),"[",B,"]"].join("")]:[[encode(A,a),"[",encode(B,a),"]=",encode(P,a)].join("")])}};case"bracket":return function(A){return function(j,P){return void 0===P||a.skipNull&&null===P||a.skipEmptyString&&""===P?j:[].concat(ne(j),null===P?[[encode(A,a),"[]"].join("")]:[[encode(A,a),"[]=",encode(P,a)].join("")])}};case"colon-list-separator":return function(A){return function(j,P){return void 0===P||a.skipNull&&null===P||a.skipEmptyString&&""===P?j:[].concat(ne(j),null===P?[[encode(A,a),":list="].join("")]:[[encode(A,a),":list=",encode(P,a)].join("")])}};case"comma":case"separator":case"bracket-separator":var A="bracket-separator"===a.arrayFormat?"[]=":"=";return function(j){return function(P,B){return void 0===B||a.skipNull&&null===B||a.skipEmptyString&&""===B?P:(B=null===B?"":B,0===P.length?[[encode(j,a),A,encode(B,a)].join("")]:[[P,encode(B,a)].join(a.arrayFormatSeparator)])}};default:return function(A){return function(j,P){return void 0===P||a.skipNull&&null===P||a.skipEmptyString&&""===P?j:[].concat(ne(j),null===P?[encode(A,a)]:[[encode(A,a),"=",encode(P,a)].join("")])}}}}(A),B={},q=0,ie=Object.keys(a);q<ie.length;q++){var oe=ie[q];j(oe)||(B[oe]=a[oe])}var se=Object.keys(B);return!1!==A.sort&&se.sort(A.sort),se.map((function(j){var B=a[j];return void 0===B?"":null===B?encode(j,A):Array.isArray(B)?0===B.length&&"bracket-separator"===A.arrayFormat?encode(j,A)+"[]":B.reduce(P(j),[]).join("&"):encode(j,A)+"="+encode(B,A)})).filter((function(a){return a.length>0})).join("&")},A.parseUrl=function(a,A){A=Object.assign({decode:!0},A);var j=se(a,"#"),P=B(j,2),q=P[0],ne=P[1];return Object.assign({url:q.split("?")[0]||"",query:parse(extract(a),A)},A&&A.parseFragmentIdentifier&&ne?{fragmentIdentifier:decode(ne,A)}:{})},A.stringifyUrl=function(a,j){j=Object.assign(P({encode:!0,strict:!0},he,!0),j);var B=removeHash(a.url).split("?")[0]||"",q=A.extract(a.url),ne=A.parse(q,{sort:!1}),ie=Object.assign(ne,a.query),oe=A.stringify(ie,j);oe&&(oe="?".concat(oe));var se=function getHash(a){var A="",j=a.indexOf("#");return-1!==j&&(A=a.slice(j)),A}(a.url);return a.fragmentIdentifier&&(se="#".concat(j[he]?encode(a.fragmentIdentifier,j):a.fragmentIdentifier)),"".concat(B).concat(oe).concat(se)},A.pick=function(a,j,B){B=Object.assign(P({parseFragmentIdentifier:!0},he,!1),B);var q=A.parseUrl(a,B),ne=q.url,ie=q.query,oe=q.fragmentIdentifier;return A.stringifyUrl({url:ne,query:le(ie,j),fragmentIdentifier:oe},B)},A.exclude=function(a,j,P){var B=Array.isArray(j)?function(a){return!j.includes(a)}:function(a,A){return!j(a,A)};return A.pick(a,B,P)}},function(a,A){a.exports=function _arrayLikeToArray(a,A){(null==A||A>a.length)&&(A=a.length);for(var j=0,P=new Array(A);j<A;j++)P[j]=a[j];return P}},function(a,A,j){"use strict";var P=new RegExp("%[a-f0-9]{2}","gi"),B=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(a,A){try{return decodeURIComponent(a.join(""))}catch(B){}if(1===a.length)return a;A=A||1;var j=a.slice(0,A),P=a.slice(A);return Array.prototype.concat.call([],decodeComponents(j),decodeComponents(P))}function decode(a){try{return decodeURIComponent(a)}catch(B){for(var A=a.match(P),j=1;j<A.length;j++)A=(a=decodeComponents(A,j).join("")).match(P);return a}}a.exports=function(a){if("string"!==typeof a)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof a+"`");try{return a=a.replace(/\+/g," "),decodeURIComponent(a)}catch(A){return function customDecodeURIComponent(a){for(var j={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},P=B.exec(a);P;){try{j[P[0]]=decodeURIComponent(P[0])}catch(A){var q=decode(P[0]);q!==P[0]&&(j[P[0]]=q)}P=B.exec(a)}j["%C2"]="\ufffd";for(var ne=Object.keys(j),ie=0;ie<ne.length;ie++){var oe=ne[ie];a=a.replace(new RegExp(oe,"g"),j[oe])}return a}(a)}}},function(a,A,j){"use strict";var P=j(180);a.exports=function standardDeviation(a){if(1===a.length)return 0;var A=P(a);return Math.sqrt(A)}},function(a,A,j){"use strict";var P=j(128);a.exports=function variance(a){if(0===a.length)throw new Error("variance requires at least one data point");return P(a,2)/a.length}},function(a,A,j){"use strict";a.exports=function sum(a){if(0===a.length)return 0;for(var A,j=a[0],P=0,B=1;B<a.length;B++)A=j+a[B],Math.abs(j)>=Math.abs(a[B])?P+=j-A+a[B]:P+=a[B]-A+j,j=A;return j+P}},function(a,A,j){"use strict";a.exports=function numericSort(a){return a.slice().sort((function(a,A){return a-A}))}},function(a,A,j){"use strict";a.exports=function modeSorted(a){if(0===a.length)throw new Error("mode requires at least one data point");if(1===a.length)return a[0];for(var A=a[0],j=NaN,P=0,B=1,q=1;q<a.length+1;q++)a[q]!==A?(B>P&&(P=B,j=A),B=1,A=a[q]):B++;return j}},function(a,A,j){"use strict";a.exports=function min(a){if(0===a.length)throw new Error("min requires at least one data point");for(var A=a[0],j=1;j<a.length;j++)a[j]<A&&(A=a[j]);return A}},function(a,A,j){"use strict";a.exports=function max(a){if(0===a.length)throw new Error("max requires at least one data point");for(var A=a[0],j=1;j<a.length;j++)a[j]>A&&(A=a[j]);return A}},function(a,A,j){"use strict";var P=j(129);a.exports=function median(a){return+P(a,.5)}},function(a,A,j){"use strict";var P=j(188);a.exports=function shuffle(a,A){var j=a.slice();return P(j.slice(),A)}},function(a,A,j){"use strict";a.exports=function shuffleInPlace(a,A){A=A||Math.random;for(var j,P,B=a.length;B>0;)P=Math.floor(A()*B--),j=a[B],a[B]=a[P],a[P]=j;return a}},function(a,A,j){"use strict";a.exports=function uniqueCountSorted(a){for(var A,j=0,P=0;P<a.length;P++)0!==P&&a[P]===A||(A=a[P],j++);return j}},function(a,A,j){"use strict";var P=j(49);a.exports=function sampleCovariance(a,A){if(a.length!==A.length)throw new Error("sampleCovariance requires samples with equal lengths");if(a.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var j=P(a),B=P(A),q=0,ne=0;ne<a.length;ne++)q+=(a[ne]-j)*(A[ne]-B);return q/(a.length-1)}},function(a,A,j){"use strict";var P=j(131);a.exports=function sampleStandardDeviation(a){var A=P(a);return Math.sqrt(A)}},function(a,A,j){"use strict";a.exports=function combineMeans(a,A,j,P){return(a*A+j*P)/(A+P)}},function(a,A,j){"use strict";var P=Math.sqrt(2*Math.PI);function cumulativeDistribution(a){for(var A=a,j=a,B=1;B<15;B++)A+=j*=a*a/(2*B+1);return Math.round(1e4*(.5+A/P*Math.exp(-a*a/2)))/1e4}for(var B=[],q=0;q<=3.09;q+=.01)B.push(cumulativeDistribution(q));a.exports=B},function(a,A,j){"use strict";a.exports=function inverseErrorFunction(a){var A=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),j=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*A)+Math.log(1-a*a)/2,2)-Math.log(1-a*a)/A)-(2/(Math.PI*A)+Math.log(1-a*a)/2));return a>=0?j:-j}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function capitalizeString(a){return a.charAt(0).toUpperCase()+a.slice(1)},a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}();var B="undefined"!==typeof Map,q=function(){function OrderedElements(){!function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,OrderedElements),this.elements={},this.keyOrder=[]}return P(OrderedElements,[{key:"forEach",value:function forEach(a){for(var A=0;A<this.keyOrder.length;A++)a(this.elements[this.keyOrder[A]],this.keyOrder[A])}},{key:"set",value:function set(a,A,j){var P=this;if(this.elements.hasOwnProperty(a)){if(j){var q=this.keyOrder.indexOf(a);this.keyOrder.splice(q,1),this.keyOrder.push(a)}}else this.keyOrder.push(a);if(null!=A){if(B&&A instanceof Map||A instanceof OrderedElements){var ne=function(){var B=P.elements.hasOwnProperty(a)?P.elements[a]:new OrderedElements;return A.forEach((function(a,A){B.set(A,a,j)})),P.elements[a]=B,{v:void 0}}();if("object"===typeof ne)return ne.v}if(Array.isArray(A)||"object"!==typeof A)this.elements[a]=A;else{for(var ie=this.elements.hasOwnProperty(a)?this.elements[a]:new OrderedElements,oe=Object.keys(A),se=0;se<oe.length;se+=1)ie.set(oe[se],A[oe[se]],j);this.elements[a]=ie}}else this.elements[a]=A}},{key:"get",value:function get(a){return this.elements[a]}},{key:"has",value:function has(a){return this.elements.hasOwnProperty(a)}},{key:"addStyleType",value:function addStyleType(a){var A=this;if(B&&a instanceof Map||a instanceof OrderedElements)a.forEach((function(a,j){A.set(j,a,!0)}));else for(var j=Object.keys(a),P=0;P<j.length;P++)this.set(j[P],a[j[P]],!0)}}]),OrderedElements}();A.default=q,a.exports=A.default},function(a,A,j){"use strict";var _slicedToArray=function(a,A){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return function sliceIterator(a,A){var j=[],P=!0,B=!1,q=void 0;try{for(var ne,ie=a[Symbol.iterator]();!(P=(ne=ie.next()).done)&&(j.push(ne.value),!A||j.length!==A);P=!0);}catch(oe){B=!0,q=oe}finally{try{!P&&ie.return&&ie.return()}finally{if(B)throw q}}return j}(a,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=Object.assign||function(a){for(var A=1;A<arguments.length;A++){var j=arguments[A];for(var P in j)Object.prototype.hasOwnProperty.call(j,P)&&(a[P]=j[P])}return a},B=j(133),q=j(428),ne={create:function create(a){return(0,B.mapObj)(a,(function(a){var A=_slicedToArray(a,2),j=A[0],P=A[1],q=JSON.stringify(P);return[j,{_len:q.length,_name:(0,B.hashString)(q),_definition:P}]}))},rehydrate:function rehydrate(){var a=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];(0,q.addRenderedClassNames)(a)}},ie={renderStatic:function renderStatic(a){return(0,q.reset)(),(0,q.startBuffering)(),{html:a(),css:{content:(0,q.flushToString)(),renderedClassNames:(0,q.getRenderedClassNames)()}}}},oe={suppressStyleInjection:function suppressStyleInjection(){(0,q.reset)(),(0,q.startBuffering)()},clearBufferAndResumeStyleInjection:function clearBufferAndResumeStyleInjection(){(0,q.reset)()}};a.exports=function makeExports(a,A){return{StyleSheet:P({},ne,{extend:function extend(j){var P=j.map((function(a){return a.selectorHandler})).filter((function(a){return a}));return makeExports(a,A.concat(P))}}),StyleSheetServer:ie,StyleSheetTestUtils:oe,css:function css(){for(var j=arguments.length,P=Array(j),B=0;B<j;B++)P[B]=arguments[B];return(0,q.injectAndGetClassName)(a,P,A)}}}},function(a){a.exports=JSON.parse('{"a":"4.17.0"}')},function(a,A,j){"use strict";a.exports=function bind(a,A){return function wrap(){for(var j=new Array(arguments.length),P=0;P<j.length;P++)j[P]=arguments[P];return a.apply(A,j)}}},function(a,A,j){"use strict";var P=j(28);function encode(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}a.exports=function buildURL(a,A,j){if(!A)return a;var B;if(j)B=j(A);else if(P.isURLSearchParams(A))B=A.toString();else{var q=[];P.forEach(A,(function serialize(a,A){null!==a&&"undefined"!==typeof a&&(P.isArray(a)?A+="[]":a=[a],P.forEach(a,(function parseValue(a){P.isDate(a)?a=a.toISOString():P.isObject(a)&&(a=JSON.stringify(a)),q.push(encode(A)+"="+encode(a))})))})),B=q.join("&")}if(B){var ne=a.indexOf("#");-1!==ne&&(a=a.slice(0,ne)),a+=(-1===a.indexOf("?")?"?":"&")+B}return a}},function(a,A,j){"use strict";a.exports=function enhanceError(a,A,j,P,B){return a.config=A,j&&(a.code=j),a.request=P,a.response=B,a.isAxiosError=!0,a.toJSON=function toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},a}},function(a,A,j){"use strict";var P=j(28),B=j(446),q=j(447),ne=j(200),ie=j(448),oe=j(451),se=j(452),le=j(203);a.exports=function xhrAdapter(a){return new Promise((function dispatchXhrRequest(A,j){var he=a.data,pe=a.headers,ge=a.responseType;P.isFormData(he)&&delete pe["Content-Type"];var me=new XMLHttpRequest;if(a.auth){var ve=a.auth.username||"",ye=a.auth.password?unescape(encodeURIComponent(a.auth.password)):"";pe.Authorization="Basic "+btoa(ve+":"+ye)}var _e=ie(a.baseURL,a.url);function onloadend(){if(me){var P="getAllResponseHeaders"in me?oe(me.getAllResponseHeaders()):null,q={data:ge&&"text"!==ge&&"json"!==ge?me.response:me.responseText,status:me.status,statusText:me.statusText,headers:P,config:a,request:me};B(A,j,q),me=null}}if(me.open(a.method.toUpperCase(),ne(_e,a.params,a.paramsSerializer),!0),me.timeout=a.timeout,"onloadend"in me?me.onloadend=onloadend:me.onreadystatechange=function handleLoad(){me&&4===me.readyState&&(0!==me.status||me.responseURL&&0===me.responseURL.indexOf("file:"))&&setTimeout(onloadend)},me.onabort=function handleAbort(){me&&(j(le("Request aborted",a,"ECONNABORTED",me)),me=null)},me.onerror=function handleError(){j(le("Network Error",a,null,me)),me=null},me.ontimeout=function handleTimeout(){var A="timeout of "+a.timeout+"ms exceeded";a.timeoutErrorMessage&&(A=a.timeoutErrorMessage),j(le(A,a,a.transitional&&a.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",me)),me=null},P.isStandardBrowserEnv()){var we=(a.withCredentials||se(_e))&&a.xsrfCookieName?q.read(a.xsrfCookieName):void 0;we&&(pe[a.xsrfHeaderName]=we)}"setRequestHeader"in me&&P.forEach(pe,(function setRequestHeader(a,A){"undefined"===typeof he&&"content-type"===A.toLowerCase()?delete pe[A]:me.setRequestHeader(A,a)})),P.isUndefined(a.withCredentials)||(me.withCredentials=!!a.withCredentials),ge&&"json"!==ge&&(me.responseType=a.responseType),"function"===typeof a.onDownloadProgress&&me.addEventListener("progress",a.onDownloadProgress),"function"===typeof a.onUploadProgress&&me.upload&&me.upload.addEventListener("progress",a.onUploadProgress),a.cancelToken&&a.cancelToken.promise.then((function onCanceled(a){me&&(me.abort(),j(a),me=null)})),he||(he=null),me.send(he)}))}},function(a,A,j){"use strict";var P=j(201);a.exports=function createError(a,A,j,B,q){var ne=new Error(a);return P(ne,A,j,B,q)}},function(a,A,j){"use strict";a.exports=function isCancel(a){return!(!a||!a.__CANCEL__)}},function(a,A,j){"use strict";var P=j(28);a.exports=function mergeConfig(a,A){A=A||{};var j={},B=["url","method","data"],q=["headers","auth","proxy","params"],ne=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],ie=["validateStatus"];function getMergedValue(a,A){return P.isPlainObject(a)&&P.isPlainObject(A)?P.merge(a,A):P.isPlainObject(A)?P.merge({},A):P.isArray(A)?A.slice():A}function mergeDeepProperties(B){P.isUndefined(A[B])?P.isUndefined(a[B])||(j[B]=getMergedValue(void 0,a[B])):j[B]=getMergedValue(a[B],A[B])}P.forEach(B,(function valueFromConfig2(a){P.isUndefined(A[a])||(j[a]=getMergedValue(void 0,A[a]))})),P.forEach(q,mergeDeepProperties),P.forEach(ne,(function defaultToConfig2(B){P.isUndefined(A[B])?P.isUndefined(a[B])||(j[B]=getMergedValue(void 0,a[B])):j[B]=getMergedValue(void 0,A[B])})),P.forEach(ie,(function merge(P){P in A?j[P]=getMergedValue(a[P],A[P]):P in a&&(j[P]=getMergedValue(void 0,a[P]))}));var oe=B.concat(q).concat(ne).concat(ie),se=Object.keys(a).concat(Object.keys(A)).filter((function filterAxiosKeys(a){return-1===oe.indexOf(a)}));return P.forEach(se,mergeDeepProperties),j}},function(a,A,j){"use strict";function Cancel(a){this.message=a}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,a.exports=Cancel},function(a,A,j){(function(j){var P;!function(j,B){a.exports=function(j){"use strict";var B,q=(j=j||{}).Base64,ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ie=function(a){for(var A={},j=0,P=a.length;j<P;j++)A[a.charAt(j)]=j;return A}(ne),oe=String.fromCharCode,se=function cb_utob(a){if(a.length<2)return(A=a.charCodeAt(0))<128?a:A<2048?oe(192|A>>>6)+oe(128|63&A):oe(224|A>>>12&15)+oe(128|A>>>6&63)+oe(128|63&A);var A=65536+1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320);return oe(240|A>>>18&7)+oe(128|A>>>12&63)+oe(128|A>>>6&63)+oe(128|63&A)},le=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,he=function utob(a){return a.replace(le,se)},pe=function cb_encode(a){var A=[0,2,1][a.length%3],j=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0);return[ne.charAt(j>>>18),ne.charAt(j>>>12&63),A>=2?"=":ne.charAt(j>>>6&63),A>=1?"=":ne.charAt(63&j)].join("")},ge=j.btoa&&"function"==typeof j.btoa?function(a){return j.btoa(a)}:function(a){if(a.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return a.replace(/[\s\S]{1,3}/g,pe)},me=function _encode(a){return ge(he(String(a)))},ve=function mkUriSafe(a){return a.replace(/[+\/]/g,(function(a){return"+"==a?"-":"_"})).replace(/=/g,"")},ye=function encode(a,A){return A?ve(me(a)):me(a)};j.Uint8Array&&(B=function fromUint8Array(a,A){for(var j="",P=0,B=a.length;P<B;P+=3){var q=a[P],ie=a[P+1],oe=a[P+2],se=q<<16|ie<<8|oe;j+=ne.charAt(se>>>18)+ne.charAt(se>>>12&63)+("undefined"!=typeof ie?ne.charAt(se>>>6&63):"=")+("undefined"!=typeof oe?ne.charAt(63&se):"=")}return A?ve(j):j});var _e,we=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,ke=function cb_btou(a){switch(a.length){case 4:var A=((7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3))-65536;return oe(55296+(A>>>10))+oe(56320+(1023&A));case 3:return oe((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return oe((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},Oe=function btou(a){return a.replace(we,ke)},Se=function cb_decode(a){var A=a.length,j=A%4,P=(A>0?ie[a.charAt(0)]<<18:0)|(A>1?ie[a.charAt(1)]<<12:0)|(A>2?ie[a.charAt(2)]<<6:0)|(A>3?ie[a.charAt(3)]:0),B=[oe(P>>>16),oe(P>>>8&255),oe(255&P)];return B.length-=[0,0,2,1][j],B.join("")},Te=j.atob&&"function"==typeof j.atob?function(a){return j.atob(a)}:function(a){return a.replace(/\S{1,4}/g,Se)},Ae=function atob(a){return Te(String(a).replace(/[^A-Za-z0-9\+\/]/g,""))},je=function _fromURI(a){return String(a).replace(/[-_]/g,(function(a){return"-"==a?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},Fe=function decode(a){return function _decode(a){return Oe(Te(a))}(je(a))};j.Uint8Array&&(_e=function toUint8Array(a){return Uint8Array.from(Ae(je(a)),(function(a){return a.charCodeAt(0)}))});var Re=function noConflict(){var a=j.Base64;return j.Base64=q,a};if(j.Base64={VERSION:"2.6.4",atob:Ae,btoa:ge,fromBase64:Fe,toBase64:ye,utob:he,encode:ye,encodeURI:function encodeURI(a){return ye(a,!0)},btou:Oe,decode:Fe,noConflict:Re,fromUint8Array:B,toUint8Array:_e},"function"===typeof Object.defineProperty){var Me=function noEnum(a){return{value:a,enumerable:!1,writable:!0,configurable:!0}};j.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",Me((function(){return Fe(this)}))),Object.defineProperty(String.prototype,"toBase64",Me((function(a){return ye(this,a)}))),Object.defineProperty(String.prototype,"toBase64URI",Me((function(){return ye(this,!0)})))}}j.Meteor&&(Base64=j.Base64);a.exports?a.exports.Base64=j.Base64:void 0===(P=function(){return j.Base64}.apply(A,[]))||(a.exports=P);return{Base64:j.Base64}}(j)}("undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof j?j:this)}).call(this,j(35))},function(a,A){var j=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,P=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];a.exports=function parseuri(a){var A=a,B=a.indexOf("["),q=a.indexOf("]");-1!=B&&-1!=q&&(a=a.substring(0,B)+a.substring(B,q).replace(/:/g,";")+a.substring(q,a.length));for(var ne=j.exec(a||""),ie={},oe=14;oe--;)ie[P[oe]]=ne[oe]||"";return-1!=B&&-1!=q&&(ie.source=A,ie.host=ie.host.substring(1,ie.host.length-1).replace(/;/g,":"),ie.authority=ie.authority.replace("[","").replace("]","").replace(/;/g,":"),ie.ipv6uri=!0),ie.pathNames=function pathNames(a,A){var j=A.replace(/\/{2,9}/g,"/").split("/");"/"!=A.substr(0,1)&&0!==A.length||j.splice(0,1);"/"==A.substr(A.length-1,1)&&j.splice(j.length-1,1);return j}(0,ie.path),ie.queryKey=function queryKey(a,A){var j={};return A.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(a,A,P){A&&(j[A]=P)})),j}(0,ie.query),ie}},function(a,A){var j={}.toString;a.exports=Array.isArray||function(a){return"[object Array]"==j.call(a)}},function(a,A,j){(function(A){a.exports=function isBuf(a){return j&&A.isBuffer(a)||P&&(a instanceof ArrayBuffer||function isView(a){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer}(a))};var j="function"===typeof A&&"function"===typeof A.isBuffer,P="function"===typeof ArrayBuffer}).call(this,j(48).Buffer)},function(a,A,j){var P=j(477),B=j(217),q=j(67),ne=j(135),ie=j(218),oe=j(219),se=j(89)("socket.io-client:manager"),le=j(216),he=j(494),pe=Object.prototype.hasOwnProperty;function Manager(a,A){if(!(this instanceof Manager))return new Manager(a,A);a&&"object"===typeof a&&(A=a,a=void 0),(A=A||{}).path=A.path||"/socket.io",this.nsps={},this.subs=[],this.opts=A,this.reconnection(!1!==A.reconnection),this.reconnectionAttempts(A.reconnectionAttempts||1/0),this.reconnectionDelay(A.reconnectionDelay||1e3),this.reconnectionDelayMax(A.reconnectionDelayMax||5e3),this.randomizationFactor(A.randomizationFactor||.5),this.backoff=new he({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==A.timeout?2e4:A.timeout),this.readyState="closed",this.uri=a,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var j=A.parser||ne;this.encoder=new j.Encoder,this.decoder=new j.Decoder,this.autoConnect=!1!==A.autoConnect,this.autoConnect&&this.open()}a.exports=Manager,Manager.prototype.emitAll=function(){for(var a in this.emit.apply(this,arguments),this.nsps)pe.call(this.nsps,a)&&this.nsps[a].emit.apply(this.nsps[a],arguments)},Manager.prototype.updateSocketIds=function(){for(var a in this.nsps)pe.call(this.nsps,a)&&(this.nsps[a].id=this.generateId(a))},Manager.prototype.generateId=function(a){return("/"===a?"":a+"#")+this.engine.id},q(Manager.prototype),Manager.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this.backoff&&this.backoff.setMin(a),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(a){return arguments.length?(this._randomizationFactor=a,this.backoff&&this.backoff.setJitter(a),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this.backoff&&this.backoff.setMax(a),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(a,A){if(se("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;se("opening %s",this.uri),this.engine=P(this.uri,this.opts);var j=this.engine,B=this;this.readyState="opening",this.skipReconnect=!1;var q=ie(j,"open",(function(){B.onopen(),a&&a()})),ne=ie(j,"error",(function(A){if(se("connect_error"),B.cleanup(),B.readyState="closed",B.emitAll("connect_error",A),a){var j=new Error("Connection error");j.data=A,a(j)}else B.maybeReconnectOnOpen()}));if(!1!==this._timeout){var oe=this._timeout;se("connect attempt will timeout after %d",oe),0===oe&&q.destroy();var le=setTimeout((function(){se("connect attempt timed out after %d",oe),q.destroy(),j.close(),j.emit("error","timeout"),B.emitAll("connect_timeout",oe)}),oe);this.subs.push({destroy:function destroy(){clearTimeout(le)}})}return this.subs.push(q),this.subs.push(ne),this},Manager.prototype.onopen=function(){se("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(ie(a,"data",oe(this,"ondata"))),this.subs.push(ie(a,"ping",oe(this,"onping"))),this.subs.push(ie(a,"pong",oe(this,"onpong"))),this.subs.push(ie(a,"error",oe(this,"onerror"))),this.subs.push(ie(a,"close",oe(this,"onclose"))),this.subs.push(ie(this.decoder,"decoded",oe(this,"ondecoded")))},Manager.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},Manager.prototype.ondata=function(a){this.decoder.add(a)},Manager.prototype.ondecoded=function(a){this.emit("packet",a)},Manager.prototype.onerror=function(a){se("error",a),this.emitAll("error",a)},Manager.prototype.socket=function(a,A){var j=this.nsps[a];if(!j){j=new B(this,a,A),this.nsps[a]=j;var P=this;j.on("connecting",onConnecting),j.on("connect",(function(){j.id=P.generateId(a)})),this.autoConnect&&onConnecting()}function onConnecting(){~le(P.connecting,j)||P.connecting.push(j)}return j},Manager.prototype.destroy=function(a){var A=le(this.connecting,a);~A&&this.connecting.splice(A,1),this.connecting.length||this.close()},Manager.prototype.packet=function(a){se("writing packet %j",a);var A=this;a.query&&0===a.type&&(a.nsp+="?"+a.query),A.encoding?A.packetBuffer.push(a):(A.encoding=!0,this.encoder.encode(a,(function(j){for(var P=0;P<j.length;P++)A.engine.write(j[P],a.options);A.encoding=!1,A.processPacketQueue()})))},Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},Manager.prototype.cleanup=function(){se("cleanup");for(var a=this.subs.length,A=0;A<a;A++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){se("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(a){se("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)se("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var A=this.backoff.duration();se("will wait %dms before reconnect attempt",A),this.reconnecting=!0;var j=setTimeout((function(){a.skipReconnect||(se("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open((function(A){A?(se("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",A.data)):(se("reconnect success"),a.onreconnect())})))}),A);this.subs.push({destroy:function destroy(){clearTimeout(j)}})}},Manager.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",a)}},function(a,A,j){var P=j(136),B=j(480),q=j(490),ne=j(491);A.polling=function polling(a){var A=!1,j=!1,ne=!1!==a.jsonp;if("undefined"!==typeof location){var ie="https:"===location.protocol,oe=location.port;oe||(oe=ie?443:80),A=a.hostname!==location.hostname||oe!==a.port,j=a.secure!==ie}if(a.xdomain=A,a.xscheme=j,"open"in new P(a)&&!a.forceJSONP)return new B(a);if(!ne)throw new Error("JSONP disabled");return new q(a)},A.websocket=ne},function(a,A,j){var P=j(138),B=j(90),q=j(68),ne=j(91),ie=j(215),oe=j(92)("engine.io-client:polling");a.exports=Polling;var se=null!=new(j(136))({xdomain:!1}).responseType;function Polling(a){var A=a&&a.forceBase64;se&&!A||(this.supportsBinary=!1),P.call(this,a)}ne(Polling,P),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(a){var A=this;function pause(){oe("paused"),A.readyState="paused",a()}if(this.readyState="pausing",this.polling||!this.writable){var j=0;this.polling&&(oe("we are currently polling - waiting to pause"),j++,this.once("pollComplete",(function(){oe("pre-pause polling complete"),--j||pause()}))),this.writable||(oe("we are currently writing - waiting to pause"),j++,this.once("drain",(function(){oe("pre-pause writing complete"),--j||pause()})))}else pause()},Polling.prototype.poll=function(){oe("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(a){var A=this;oe("polling got data %s",a);q.decodePayload(a,this.socket.binaryType,(function callback(a,j,P){if("opening"===A.readyState&&"open"===a.type&&A.onOpen(),"close"===a.type)return A.onClose(),!1;A.onPacket(a)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():oe('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){var a=this;function close(){oe("writing close packet"),a.write([{type:"close"}])}"open"===this.readyState?(oe("transport open - closing"),close()):(oe("transport not open - deferring close"),this.once("open",close))},Polling.prototype.write=function(a){var A=this;this.writable=!1;var j=function callbackfn(){A.writable=!0,A.emit("drain")};q.encodePayload(a,this.supportsBinary,(function(a){A.doWrite(a,j)}))},Polling.prototype.uri=function(){var a=this.query||{},A=this.secure?"https":"http",j="";return!1!==this.timestampRequests&&(a[this.timestampParam]=ie()),this.supportsBinary||a.sid||(a.b64=1),a=B.encode(a),this.port&&("https"===A&&443!==Number(this.port)||"http"===A&&80!==Number(this.port))&&(j=":"+this.port),a.length&&(a="?"+a),A+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+j+this.path+a}},function(a,A,j){(function(A){var P=j(482),B=Object.prototype.toString,q="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===B.call(Blob),ne="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===B.call(File);a.exports=function hasBinary(a){if(!a||"object"!==typeof a)return!1;if(P(a)){for(var j=0,B=a.length;j<B;j++)if(hasBinary(a[j]))return!0;return!1}if("function"===typeof A&&A.isBuffer&&A.isBuffer(a)||"function"===typeof ArrayBuffer&&a instanceof ArrayBuffer||q&&a instanceof Blob||ne&&a instanceof File)return!0;if(a.toJSON&&"function"===typeof a.toJSON&&1===arguments.length)return hasBinary(a.toJSON(),!0);for(var ie in a)if(Object.prototype.hasOwnProperty.call(a,ie)&&hasBinary(a[ie]))return!0;return!1}}).call(this,j(48).Buffer)},function(a,A,j){"use strict";var P,B="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),q={},ne=0,ie=0;function encode(a){var A="";do{A=B[a%64]+A,a=Math.floor(a/64)}while(a>0);return A}function yeast(){var a=encode(+new Date);return a!==P?(ne=0,P=a):a+"."+encode(ne++)}for(;ie<64;ie++)q[B[ie]]=ie;yeast.encode=encode,yeast.decode=function decode(a){var A=0;for(ie=0;ie<a.length;ie++)A=64*A+q[a.charAt(ie)];return A},a.exports=yeast},function(a,A){var j=[].indexOf;a.exports=function(a,A){if(j)return a.indexOf(A);for(var P=0;P<a.length;++P)if(a[P]===A)return P;return-1}},function(a,A,j){var P=j(135),B=j(67),q=j(493),ne=j(218),ie=j(219),oe=j(89)("socket.io-client:socket"),se=j(90),le=j(214);a.exports=Socket;var he={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},pe=B.prototype.emit;function Socket(a,A,j){this.io=a,this.nsp=A,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},j&&j.query&&(this.query=j.query),this.io.autoConnect&&this.open()}B(Socket.prototype),Socket.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[ne(a,"open",ie(this,"onopen")),ne(a,"packet",ie(this,"onpacket")),ne(a,"close",ie(this,"onclose"))]}},Socket.prototype.open=Socket.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},Socket.prototype.send=function(){var a=q(arguments);return a.unshift("message"),this.emit.apply(this,a),this},Socket.prototype.emit=function(a){if(he.hasOwnProperty(a))return pe.apply(this,arguments),this;var A=q(arguments),j={type:(void 0!==this.flags.binary?this.flags.binary:le(A))?P.BINARY_EVENT:P.EVENT,data:A,options:{}};return j.options.compress=!this.flags||!1!==this.flags.compress,"function"===typeof A[A.length-1]&&(oe("emitting packet with ack id %d",this.ids),this.acks[this.ids]=A.pop(),j.id=this.ids++),this.connected?this.packet(j):this.sendBuffer.push(j),this.flags={},this},Socket.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},Socket.prototype.onopen=function(){if(oe("transport is open - connecting"),"/"!==this.nsp)if(this.query){var a="object"===typeof this.query?se.encode(this.query):this.query;oe("sending connect packet with query %s",a),this.packet({type:P.CONNECT,query:a})}else this.packet({type:P.CONNECT})},Socket.prototype.onclose=function(a){oe("close (%s)",a),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",a)},Socket.prototype.onpacket=function(a){var A=a.nsp===this.nsp,j=a.type===P.ERROR&&"/"===a.nsp;if(A||j)switch(a.type){case P.CONNECT:this.onconnect();break;case P.EVENT:case P.BINARY_EVENT:this.onevent(a);break;case P.ACK:case P.BINARY_ACK:this.onack(a);break;case P.DISCONNECT:this.ondisconnect();break;case P.ERROR:this.emit("error",a.data)}},Socket.prototype.onevent=function(a){var A=a.data||[];oe("emitting event %j",A),null!=a.id&&(oe("attaching ack callback to event"),A.push(this.ack(a.id))),this.connected?pe.apply(this,A):this.receiveBuffer.push(A)},Socket.prototype.ack=function(a){var A=this,j=!1;return function(){if(!j){j=!0;var B=q(arguments);oe("sending ack %j",B),A.packet({type:le(B)?P.BINARY_ACK:P.ACK,id:a,data:B})}}},Socket.prototype.onack=function(a){var A=this.acks[a.id];"function"===typeof A?(oe("calling ack %s with %j",a.id,a.data),A.apply(this,a.data),delete this.acks[a.id]):oe("bad ack %s",a.id)},Socket.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},Socket.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)pe.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},Socket.prototype.ondisconnect=function(){oe("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},Socket.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)},Socket.prototype.close=Socket.prototype.disconnect=function(){return this.connected&&(oe("performing disconnect (%s)",this.nsp),this.packet({type:P.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},Socket.prototype.compress=function(a){return this.flags.compress=a,this},Socket.prototype.binary=function(a){return this.flags.binary=a,this}},function(a,A){a.exports=function on(a,A,j){return a.on(A,j),{destroy:function destroy(){a.removeListener(A,j)}}}},function(a,A){var j=[].slice;a.exports=function(a,A){if("string"==typeof A&&(A=a[A]),"function"!=typeof A)throw new Error("bind() requires a function");var P=j.call(arguments,2);return function(){return A.apply(a,P.concat(j.call(arguments)))}}},function(a,A){function indexOf(a,A){for(var j=0;j<a.length;++j)if(a[j]===A)return j;return-1}function serializer(a,A){var j=[],P=[];return null==A&&(A=function cycleReplacer(a,A){return j[0]===A?"[Circular ~]":"[Circular ~."+P.slice(0,indexOf(j,A)).join(".")+"]"}),function(B,q){if(j.length>0){var ne=indexOf(j,this);~ne?j.splice(ne+1):j.push(this),~ne?P.splice(ne,1/0,B):P.push(B),~indexOf(j,q)&&(q=A.call(this,B,q))}else j.push(q);return null==a?q instanceof Error?function stringifyError(a){var A={stack:a.stack,message:a.message,name:a.name};for(var j in a)Object.prototype.hasOwnProperty.call(a,j)&&(A[j]=a[j]);return A}(q):q:a.call(this,B,q)}}(a.exports=function stringify(a,A,j,P){return JSON.stringify(a,serializer(A,P),j)}).getSerialize=serializer},function(a,A,j){"use strict";!function checkDCE(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(a){console.error(a)}}}(),a.exports=j(248)},function(a,A,j){a.exports=function(){"use strict";var a,A,j="https:"===location.protocol||"chrome-extension:"===location.protocol||"localhost"===location.hostname,P=!1,B={createWriteStream:function createWriteStream(q,ne,ie){if(Number.isFinite(ne)){var oe=[ne,ie];ie=oe[0],ne=oe[1]}var se,le=new MessageChannel,he=function setupChannel(P){return new Promise((function(ne){var oe,he,pe=[{filename:q,size:ie},"*",[le.port2]];P&&(pe[0].readableStream=P,pe[2].push(P)),le.port1.onmessage=function(a){a.data.download&&(ne(),j||se.close(),window.chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window?chrome.tabs.create({url:a.data.download,active:!1}):window.location=a.data.download,P&&(le.port1.close(),le.port2.close()),le.port1.onmessage=null)},j&&!a&&((a=document.createElement("iframe")).src=B.mitm,a.hidden=!0,document.body.appendChild(a)),j&&!A&&a.addEventListener("load",oe=function fn(){var j;A=!0,a.removeEventListener("load",oe),(j=a.contentWindow).postMessage.apply(j,pe)}),j&&A&&(he=a.contentWindow).postMessage.apply(he,pe),j||(se=window.open(B.mitm,Math.random()),window.addEventListener("message",(function onready(a){var A;a.source===se&&((A=se).postMessage.apply(A,pe),window.removeEventListener("message",onready))})))}))};if(P){var pe=new TransformStream({start:function start(){return new Promise((function(a){return setTimeout((function(){return he(pe.readable).then(a)}))}))}},ne);return pe.writable}return new WritableStream({start:function start(){return he()},write:function write(a){le.port1.postMessage(a)},close:function close(){le.port1.postMessage("end")},abort:function abort(){le.port1.postMessage("abort")}},ne)},supported:!1,version:{full:"1.2.0",major:1,minor:2,dot:0}};B.mitm="https://jimmywarting.github.io/StreamSaver.js/mitm.html?version="+B.version.full;try{B.supported="serviceWorker"in navigator&&!!new ReadableStream&&!!new WritableStream}catch(ie){}try{var q=(new TransformStream).readable,ne=new MessageChannel;ne.port1.postMessage(q,[q]),ne.port1.close(),ne.port2.close(),P=!0===q.locked}catch(ie){}return B}()},,function(a,A,j){(function(a){!function(j,P){var B=function(){var a=null,A={};!function loadColorBounds(){defineColor("monochrome",null,[[0,0],[100,0]]),defineColor("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),defineColor("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),defineColor("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),defineColor("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),defineColor("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),defineColor("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),defineColor("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}();var j=[];function pickHue(a){if(j.length>0){var P=randomWithin(ne=function getRealHueRange(a){if(isNaN(a)){if("string"===typeof a)if(A[a]){var j=A[a];if(j.hueRange)return j.hueRange}else if(a.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){return getColorInfo(HexToHSB(a)[0]).hueRange}}else{var P=parseInt(a);if(P<360&&P>0)return getColorInfo(a).hueRange}return[0,360]}(a.hue)),B=(ne[1]-ne[0])/j.length,q=parseInt((P-ne[0])/B);return!0===j[q]?q=(q+2)%j.length:j[q]=!0,(P=randomWithin(ne=[(ne[0]+q*B)%359,(ne[0]+(q+1)*B)%359]))<0&&(P=360+P),P}var ne;return(P=randomWithin(ne=function getHueRange(a){if("number"===typeof parseInt(a)){var j=parseInt(a);if(j<360&&j>0)return[j,j]}if("string"===typeof a)if(A[a]){var P=A[a];if(P.hueRange)return P.hueRange}else if(a.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var B=HexToHSB(a)[0];return[B,B]}return[0,360]}(a.hue)))<0&&(P=360+P),P}function pickSaturation(a,A){if("monochrome"===A.hue)return 0;if("random"===A.luminosity)return randomWithin([0,100]);var j=function getSaturationRange(a){return getColorInfo(a).saturationRange}(a),P=j[0],B=j[1];switch(A.luminosity){case"bright":P=55;break;case"dark":P=B-10;break;case"light":B=55}return randomWithin([P,B])}function pickBrightness(a,A,j){var P=function getMinimumBrightness(a,A){for(var j=getColorInfo(a).lowerBounds,P=0;P<j.length-1;P++){var B=j[P][0],q=j[P][1],ne=j[P+1][0],ie=j[P+1][1];if(A>=B&&A<=ne){var oe=(ie-q)/(ne-B);return oe*A+(q-oe*B)}}return 0}(a,A),B=100;switch(j.luminosity){case"dark":B=P+20;break;case"light":P=(B+P)/2;break;case"random":P=0,B=100}return randomWithin([P,B])}function setFormat(a,A){switch(A.format){case"hsvArray":return a;case"hslArray":return HSVtoHSL(a);case"hsl":var j=HSVtoHSL(a);return"hsl("+j[0]+", "+j[1]+"%, "+j[2]+"%)";case"hsla":var P=HSVtoHSL(a),B=A.alpha||Math.random();return"hsla("+P[0]+", "+P[1]+"%, "+P[2]+"%, "+B+")";case"rgbArray":return HSVtoRGB(a);case"rgb":return"rgb("+HSVtoRGB(a).join(", ")+")";case"rgba":var q=HSVtoRGB(a);B=A.alpha||Math.random();return"rgba("+q.join(", ")+", "+B+")";default:return function HSVtoHex(a){var A=HSVtoRGB(a);function componentToHex(a){var A=a.toString(16);return 1==A.length?"0"+A:A}return"#"+componentToHex(A[0])+componentToHex(A[1])+componentToHex(A[2])}(a)}}function getColorInfo(a){for(var j in a>=334&&a<=360&&(a-=360),A){var P=A[j];if(P.hueRange&&a>=P.hueRange[0]&&a<=P.hueRange[1])return A[j]}return"Color not found"}function randomWithin(A){if(null===a){var j=Math.random();return j+=.618033988749895,j%=1,Math.floor(A[0]+j*(A[1]+1-A[0]))}var P=A[1]||1,B=A[0]||0,q=(a=(9301*a+49297)%233280)/233280;return Math.floor(B+q*(P-B))}function defineColor(a,j,P){var B=P[0][0],q=P[P.length-1][0],ne=P[P.length-1][1],ie=P[0][1];A[a]={hueRange:j,lowerBounds:P,saturationRange:[B,q],brightnessRange:[ne,ie]}}function HSVtoRGB(a){var A=a[0];0===A&&(A=1),360===A&&(A=359),A/=360;var j=a[1]/100,P=a[2]/100,B=Math.floor(6*A),q=6*A-B,ne=P*(1-j),ie=P*(1-q*j),oe=P*(1-(1-q)*j),se=256,le=256,he=256;switch(B){case 0:se=P,le=oe,he=ne;break;case 1:se=ie,le=P,he=ne;break;case 2:se=ne,le=P,he=oe;break;case 3:se=ne,le=ie,he=P;break;case 4:se=oe,le=ne,he=P;break;case 5:se=P,le=ne,he=ie}return[Math.floor(255*se),Math.floor(255*le),Math.floor(255*he)]}function HexToHSB(a){a=3===(a=a.replace(/^#/,"")).length?a.replace(/(.)/g,"$1$1"):a;var A=parseInt(a.substr(0,2),16)/255,j=parseInt(a.substr(2,2),16)/255,P=parseInt(a.substr(4,2),16)/255,B=Math.max(A,j,P),q=B-Math.min(A,j,P),ne=B?q/B:0;switch(B){case A:return[(j-P)/q%6*60||0,ne,B];case j:return[60*((P-A)/q+2)||0,ne,B];case P:return[60*((A-j)/q+4)||0,ne,B]}}function HSVtoHSL(a){var A=a[0],j=a[1]/100,P=a[2]/100,B=(2-j)*P;return[A,Math.round(j*P/(B<1?B:2-B)*1e4)/100,B/2*100]}return function randomColor(A){if(void 0!==(A=A||{}).seed&&null!==A.seed&&A.seed===parseInt(A.seed,10))a=A.seed;else if("string"===typeof A.seed)a=function stringToInteger(a){for(var A=0,j=0;j!==a.length&&!(A>=Number.MAX_SAFE_INTEGER);j++)A+=a.charCodeAt(j);return A}(A.seed);else{if(void 0!==A.seed&&null!==A.seed)throw new TypeError("The seed value must be an integer or string");a=null}var P,B;if(null!==A.count&&void 0!==A.count){for(var q=A.count,ne=[],ie=0;ie<A.count;ie++)j.push(!1);for(A.count=null;q>ne.length;)a&&A.seed&&(A.seed+=1),ne.push(randomColor(A));return A.count=q,ne}return setFormat([P=pickHue(A),B=pickSaturation(P,A),pickBrightness(P,B,A)],A)}}();a&&a.exports&&(A=a.exports=B),A.randomColor=B}()}).call(this,j(111)(a))},function(a,A,j){var P,B,q;B=[a,j(352),j(354),j(355)],void 0===(q="function"===typeof(P=function(a,A,j,P){"use strict";var B=_interopRequireDefault(A),q=_interopRequireDefault(j),ne=_interopRequireDefault(P);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},oe=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}(),se=function(a){function Clipboard(a,A){!function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,Clipboard);var j=function _possibleConstructorReturn(a,A){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!==typeof A&&"function"!==typeof A?a:A}(this,(Clipboard.__proto__||Object.getPrototypeOf(Clipboard)).call(this));return j.resolveOptions(A),j.listenClick(a),j}return function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(a,A):a.__proto__=A)}(Clipboard,a),oe(Clipboard,[{key:"resolveOptions",value:function resolveOptions(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"===typeof a.action?a.action:this.defaultAction,this.target="function"===typeof a.target?a.target:this.defaultTarget,this.text="function"===typeof a.text?a.text:this.defaultText,this.container="object"===ie(a.container)?a.container:document.body}},{key:"listenClick",value:function listenClick(a){var A=this;this.listener=(0,ne.default)(a,"click",(function(a){return A.onClick(a)}))}},{key:"onClick",value:function onClick(a){var A=a.delegateTarget||a.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new B.default({action:this.action(A),target:this.target(A),text:this.text(A),container:this.container,trigger:A,emitter:this})}},{key:"defaultAction",value:function defaultAction(a){return getAttributeValue("action",a)}},{key:"defaultTarget",value:function defaultTarget(a){var A=getAttributeValue("target",a);if(A)return document.querySelector(A)}},{key:"defaultText",value:function defaultText(a){return getAttributeValue("text",a)}},{key:"destroy",value:function destroy(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function isSupported(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],A="string"===typeof a?[a]:a,j=!!document.queryCommandSupported;return A.forEach((function(a){j=j&&!!document.queryCommandSupported(a)})),j}}]),Clipboard}(q.default);function getAttributeValue(a,A){var j="data-clipboard-"+a;if(A.hasAttribute(j))return A.getAttribute(j)}a.exports=se})?P.apply(A,B):P)||(a.exports=q)},,function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j(132),B=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(197));A.default=(0,B.default)(!0,P.defaultSelectorHandlers),a.exports=A.default},function(a,A,j){"use strict";(function(a){var j=function(){if("undefined"!==typeof Map)return Map;function getIndex(a,A){var j=-1;return a.some((function(a,P){return a[0]===A&&(j=P,!0)})),j}return function(){function class_1(){this.__entries__=[]}return Object.defineProperty(class_1.prototype,"size",{get:function get(){return this.__entries__.length},enumerable:!0,configurable:!0}),class_1.prototype.get=function(a){var A=getIndex(this.__entries__,a),j=this.__entries__[A];return j&&j[1]},class_1.prototype.set=function(a,A){var j=getIndex(this.__entries__,a);~j?this.__entries__[j][1]=A:this.__entries__.push([a,A])},class_1.prototype.delete=function(a){var A=this.__entries__,j=getIndex(A,a);~j&&A.splice(j,1)},class_1.prototype.has=function(a){return!!~getIndex(this.__entries__,a)},class_1.prototype.clear=function(){this.__entries__.splice(0)},class_1.prototype.forEach=function(a,A){void 0===A&&(A=null);for(var j=0,P=this.__entries__;j<P.length;j++){var B=P[j];a.call(A,B[1],B[0])}},class_1}()}(),P="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,B="undefined"!==typeof a&&a.Math===Math?a:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),q="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(B):function(a){return setTimeout((function(){return a(Date.now())}),1e3/60)};var ne=["top","right","bottom","left","width","height","size","weight"],ie="undefined"!==typeof MutationObserver,oe=function(){function ResizeObserverController(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function throttle(a,A){var j=!1,P=!1,B=0;function resolvePending(){j&&(j=!1,a()),P&&proxy()}function timeoutCallback(){q(resolvePending)}function proxy(){var a=Date.now();if(j){if(a-B<2)return;P=!0}else j=!0,P=!1,setTimeout(timeoutCallback,A);B=a}return proxy}(this.refresh.bind(this),20)}return ResizeObserverController.prototype.addObserver=function(a){~this.observers_.indexOf(a)||this.observers_.push(a),this.connected_||this.connect_()},ResizeObserverController.prototype.removeObserver=function(a){var A=this.observers_,j=A.indexOf(a);~j&&A.splice(j,1),!A.length&&this.connected_&&this.disconnect_()},ResizeObserverController.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},ResizeObserverController.prototype.updateObservers_=function(){var a=this.observers_.filter((function(a){return a.gatherActive(),a.hasActive()}));return a.forEach((function(a){return a.broadcastActive()})),a.length>0},ResizeObserverController.prototype.connect_=function(){P&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ie?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},ResizeObserverController.prototype.disconnect_=function(){P&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},ResizeObserverController.prototype.onTransitionEnd_=function(a){var A=a.propertyName,j=void 0===A?"":A;ne.some((function(a){return!!~j.indexOf(a)}))&&this.refresh()},ResizeObserverController.getInstance=function(){return this.instance_||(this.instance_=new ResizeObserverController),this.instance_},ResizeObserverController.instance_=null,ResizeObserverController}(),se=function defineConfigurable(a,A){for(var j=0,P=Object.keys(A);j<P.length;j++){var B=P[j];Object.defineProperty(a,B,{value:A[B],enumerable:!1,writable:!1,configurable:!0})}return a},le=function getWindowOf(a){return a&&a.ownerDocument&&a.ownerDocument.defaultView||B},he=createRectInit(0,0,0,0);function toFloat(a){return parseFloat(a)||0}function getBordersSize(a){for(var A=[],j=1;j<arguments.length;j++)A[j-1]=arguments[j];return A.reduce((function(A,j){return A+toFloat(a["border-"+j+"-width"])}),0)}function getHTMLElementContentRect(a){var A=a.clientWidth,j=a.clientHeight;if(!A&&!j)return he;var P=le(a).getComputedStyle(a),B=function getPaddings(a){for(var A={},j=0,P=["top","right","bottom","left"];j<P.length;j++){var B=P[j],q=a["padding-"+B];A[B]=toFloat(q)}return A}(P),q=B.left+B.right,ne=B.top+B.bottom,ie=toFloat(P.width),oe=toFloat(P.height);if("border-box"===P.boxSizing&&(Math.round(ie+q)!==A&&(ie-=getBordersSize(P,"left","right")+q),Math.round(oe+ne)!==j&&(oe-=getBordersSize(P,"top","bottom")+ne)),!function isDocumentElement(a){return a===le(a).document.documentElement}(a)){var se=Math.round(ie+q)-A,pe=Math.round(oe+ne)-j;1!==Math.abs(se)&&(ie-=se),1!==Math.abs(pe)&&(oe-=pe)}return createRectInit(B.left,B.top,ie,oe)}var pe="undefined"!==typeof SVGGraphicsElement?function(a){return a instanceof le(a).SVGGraphicsElement}:function(a){return a instanceof le(a).SVGElement&&"function"===typeof a.getBBox};function getContentRect(a){return P?pe(a)?function getSVGContentRect(a){var A=a.getBBox();return createRectInit(0,0,A.width,A.height)}(a):getHTMLElementContentRect(a):he}function createRectInit(a,A,j,P){return{x:a,y:A,width:j,height:P}}var ge=function(){function ResizeObservation(a){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=a}return ResizeObservation.prototype.isActive=function(){var a=getContentRect(this.target);return this.contentRect_=a,a.width!==this.broadcastWidth||a.height!==this.broadcastHeight},ResizeObservation.prototype.broadcastRect=function(){var a=this.contentRect_;return this.broadcastWidth=a.width,this.broadcastHeight=a.height,a},ResizeObservation}(),me=function me(a,A){var j=function createReadOnlyRect(a){var A=a.x,j=a.y,P=a.width,B=a.height,q="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,ne=Object.create(q.prototype);return se(ne,{x:A,y:j,width:P,height:B,top:j,right:A+P,bottom:B+j,left:A}),ne}(A);se(this,{target:a,contentRect:j})},ve=function(){function ResizeObserverSPI(a,A,P){if(this.activeObservations_=[],this.observations_=new j,"function"!==typeof a)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=a,this.controller_=A,this.callbackCtx_=P}return ResizeObserverSPI.prototype.observe=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(a instanceof le(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var A=this.observations_;A.has(a)||(A.set(a,new ge(a)),this.controller_.addObserver(this),this.controller_.refresh())}},ResizeObserverSPI.prototype.unobserve=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(a instanceof le(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var A=this.observations_;A.has(a)&&(A.delete(a),A.size||this.controller_.removeObserver(this))}},ResizeObserverSPI.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},ResizeObserverSPI.prototype.gatherActive=function(){var a=this;this.clearActive(),this.observations_.forEach((function(A){A.isActive()&&a.activeObservations_.push(A)}))},ResizeObserverSPI.prototype.broadcastActive=function(){if(this.hasActive()){var a=this.callbackCtx_,A=this.activeObservations_.map((function(a){return new me(a.target,a.broadcastRect())}));this.callback_.call(a,A,a),this.clearActive()}},ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)},ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0},ResizeObserverSPI}(),ye="undefined"!==typeof WeakMap?new WeakMap:new j,_e=function ResizeObserver(a){if(!(this instanceof ResizeObserver))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var A=oe.getInstance(),j=new ve(a,A,this);ye.set(this,j)};["observe","unobserve","disconnect"].forEach((function(a){_e.prototype[a]=function(){var A;return(A=ye.get(this))[a].apply(A,arguments)}}));var we="undefined"!==typeof B.ResizeObserver?B.ResizeObserver:_e;A.a=we}).call(this,j(35))},function(a,A,j){"use strict";j.d(A,"a",(function(){return he}));var P={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},B={"*":function _(a,A){return a*A},"+":function _(a,A){return a+A},"-":function _(a,A){return a-A},"/":function _(a,A){return a/A},"%":function _(a,A){return a%A},">":function _(a,A){return a>A},"<":function _(a,A){return a<A},"<=":function _(a,A){return a<=A},">=":function _(a,A){return a>=A},"==":function _(a,A){return a==A},"!=":function _(a,A){return a!=A},"===":function _(a,A){return a===A},"!==":function _(a,A){return a!==A},"&":function _(a,A){return a&A},"|":function _(a,A){return a|A},"^":function _(a,A){return a^A},"<<":function _(a,A){return a<<A},">>":function _(a,A){return a>>A},">>>":function _(a,A){return a>>>A}},q={"+":function _(a){return+a},"-":function _(a){return-a},"~":function _(a){return~a},"!":function _(a){return!a}},ne=Array.prototype.slice,ie=function apply(a,A,j){var P=j?j(A[0]):A[0];return P[a].apply(P,ne.call(A,1))},oe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:function clamp(a,A,j){return Math.max(A,Math.min(j,a))},now:Date.now,utc:Date.UTC,datetime:function datetime(a,A,j,P,B,q,ne){return new Date(a,A||0,null!=j?j:1,P||0,B||0,q||0,ne||0)},date:function date(a){return new Date(a).getDate()},day:function day(a){return new Date(a).getDay()},year:function year(a){return new Date(a).getFullYear()},month:function month(a){return new Date(a).getMonth()},hours:function hours(a){return new Date(a).getHours()},minutes:function minutes(a){return new Date(a).getMinutes()},seconds:function seconds(a){return new Date(a).getSeconds()},milliseconds:function milliseconds(a){return new Date(a).getMilliseconds()},time:function time(a){return new Date(a).getTime()},timezoneoffset:function timezoneoffset(a){return new Date(a).getTimezoneOffset()},utcdate:function utcdate(a){return new Date(a).getUTCDate()},utcday:function utcday(a){return new Date(a).getUTCDay()},utcyear:function utcyear(a){return new Date(a).getUTCFullYear()},utcmonth:function utcmonth(a){return new Date(a).getUTCMonth()},utchours:function utchours(a){return new Date(a).getUTCHours()},utcminutes:function utcminutes(a){return new Date(a).getUTCMinutes()},utcseconds:function utcseconds(a){return new Date(a).getUTCSeconds()},utcmilliseconds:function utcmilliseconds(a){return new Date(a).getUTCMilliseconds()},length:function length(a){return a.length},join:function join(){return ie("join",arguments)},indexof:function indexof(){return ie("indexOf",arguments)},lastindexof:function lastindexof(){return ie("lastIndexOf",arguments)},slice:function slice(){return ie("slice",arguments)},reverse:function reverse(a){return a.slice().reverse()},parseFloat:parseFloat,parseInt:parseInt,upper:function upper(a){return String(a).toUpperCase()},lower:function lower(a){return String(a).toLowerCase()},substring:function substring(){return ie("substring",arguments,String)},split:function split(){return ie("split",arguments,String)},replace:function replace(){return ie("replace",arguments,String)},trim:function trim(a){return String(a).trim()},regexp:RegExp,test:function test(a,A){return RegExp(a).test(A)}},se=["view","item","group","xy","x","y"],le={Literal:function Literal(a,A){return A.value},Identifier:function Identifier(a,A){var j=A.name;return a.memberDepth>0?j:"datum"===j?a.datum:"event"===j?a.event:"item"===j?a.item:P[j]||a.params["$"+j]},MemberExpression:function MemberExpression(a,A){var j=!A.computed,P=a(A.object);j&&(a.memberDepth+=1);var B=a(A.property);return j&&(a.memberDepth-=1),P[B]},CallExpression:function CallExpression(a,A){var j=A.arguments,P=A.callee.name;return P.startsWith("_")&&(P=P.slice(1)),"if"===P?a(j[0])?a(j[1]):a(j[2]):(a.fn[P]||oe[P]).apply(a.fn,j.map(a))},ArrayExpression:function ArrayExpression(a,A){return A.elements.map(a)},BinaryExpression:function BinaryExpression(a,A){return B[A.operator](a(A.left),a(A.right))},UnaryExpression:function UnaryExpression(a,A){return q[A.operator](a(A.argument))},ConditionalExpression:function ConditionalExpression(a,A){return a(A.test)?a(A.consequent):a(A.alternate)},LogicalExpression:function LogicalExpression(a,A){return"&&"===A.operator?a(A.left)&&a(A.right):a(A.left)||a(A.right)},ObjectExpression:function ObjectExpression(a,A){return A.properties.reduce((function(A,j){a.memberDepth+=1;var P=a(j.key);return a.memberDepth-=1,A[P]=a(j.value),A}),{})}};function interpret(a,A,j,P,B,q){var ne=function $(a){return le[a.type]($,a)};return ne.memberDepth=0,ne.fn=Object.create(A),ne.params=j,ne.datum=P,ne.event=B,ne.item=q,se.forEach((function(a){return ne.fn[a]=function(){var A;return(A=B.vega)[a].apply(A,arguments)}})),ne(a)}var he={operator:function operator(a,A){var j=A.ast,P=a.functions;return function(a){return interpret(j,P,a)}},parameter:function parameter(a,A){var j=A.ast,P=a.functions;return function(a,A){return interpret(j,P,A,a)}},event:function event(a,A){var j=A.ast,P=a.functions;return function(a){return interpret(j,P,void 0,void 0,a)}},handler:function handler(a,A){var j=A.ast,P=a.functions;return function(a,A){var B=A.item&&A.item.datum;return interpret(j,P,a,B,A)}},encode:function encode(a,A){var j=A.marktype,P=A.channels,B=a.functions,q="group"===j||"image"===j||"rect"===j;return function(a,A){var ne,ie=a.datum,oe=0;for(var se in P)ne=interpret(P[se].ast,B,A,ie,void 0,a),a[se]!==ne&&(a[se]=ne,oe=1);return"rule"!==j&&function adjustSpatial(a,A,j){var P;A.x2&&(A.x?(j&&a.x>a.x2&&(P=a.x,a.x=a.x2,a.x2=P),a.width=a.x2-a.x):a.x=a.x2-(a.width||0)),A.xc&&(a.x=a.xc-(a.width||0)/2),A.y2&&(A.y?(j&&a.y>a.y2&&(P=a.y,a.y=a.y2,a.y2=P),a.height=a.y2-a.y):a.y=a.y2-(a.height||0)),A.yc&&(a.y=a.yc-(a.height||0)/2)}(a,P,q),oe}}}},function(a,A,j){(function(A){var j=function(){"use strict";function _instanceof(a,A){return null!=A&&a instanceof A}var a,j,P;try{a=Map}catch(B){a=function nativeMap(){}}try{j=Set}catch(B){j=function nativeSet(){}}try{P=Promise}catch(B){P=function nativePromise(){}}function clone(B,q,ne,ie,oe){"object"===typeof q&&(ne=q.depth,ie=q.prototype,oe=q.includeNonEnumerable,q=q.circular);var se=[],le=[],he="undefined"!=typeof A;return"undefined"==typeof q&&(q=!0),"undefined"==typeof ne&&(ne=1/0),function _clone(B,ne){if(null===B)return null;if(0===ne)return B;var pe,ge;if("object"!=typeof B)return B;if(_instanceof(B,a))pe=new a;else if(_instanceof(B,j))pe=new j;else if(_instanceof(B,P))pe=new P((function(a,A){B.then((function(A){a(_clone(A,ne-1))}),(function(a){A(_clone(a,ne-1))}))}));else if(clone.__isArray(B))pe=[];else if(clone.__isRegExp(B))pe=new RegExp(B.source,__getRegExpFlags(B)),B.lastIndex&&(pe.lastIndex=B.lastIndex);else if(clone.__isDate(B))pe=new Date(B.getTime());else{if(he&&A.isBuffer(B))return pe=A.allocUnsafe?A.allocUnsafe(B.length):new A(B.length),B.copy(pe),pe;_instanceof(B,Error)?pe=Object.create(B):"undefined"==typeof ie?(ge=Object.getPrototypeOf(B),pe=Object.create(ge)):(pe=Object.create(ie),ge=ie)}if(q){var me=se.indexOf(B);if(-1!=me)return le[me];se.push(B),le.push(pe)}for(var ve in _instanceof(B,a)&&B.forEach((function(a,A){var j=_clone(A,ne-1),P=_clone(a,ne-1);pe.set(j,P)})),_instanceof(B,j)&&B.forEach((function(a){var A=_clone(a,ne-1);pe.add(A)})),B){var ye;ge&&(ye=Object.getOwnPropertyDescriptor(ge,ve)),ye&&null==ye.set||(pe[ve]=_clone(B[ve],ne-1))}if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(B);for(ve=0;ve<_e.length;ve++){var we=_e[ve];(!(Oe=Object.getOwnPropertyDescriptor(B,we))||Oe.enumerable||oe)&&(pe[we]=_clone(B[we],ne-1),Oe.enumerable||Object.defineProperty(pe,we,{enumerable:!1}))}}if(oe){var ke=Object.getOwnPropertyNames(B);for(ve=0;ve<ke.length;ve++){var Oe,Se=ke[ve];(Oe=Object.getOwnPropertyDescriptor(B,Se))&&Oe.enumerable||(pe[Se]=_clone(B[Se],ne-1),Object.defineProperty(pe,Se,{enumerable:!1}))}}return pe}(B,ne)}function __objToStr(a){return Object.prototype.toString.call(a)}function __getRegExpFlags(a){var A="";return a.global&&(A+="g"),a.ignoreCase&&(A+="i"),a.multiline&&(A+="m"),A}return clone.clonePrototype=function clonePrototype(a){if(null===a)return null;var A=function c(){};return A.prototype=a,new A},clone.__objToStr=__objToStr,clone.__isDate=function __isDate(a){return"object"===typeof a&&"[object Date]"===__objToStr(a)},clone.__isArray=function __isArray(a){return"object"===typeof a&&"[object Array]"===__objToStr(a)},clone.__isRegExp=function __isRegExp(a){return"object"===typeof a&&"[object RegExp]"===__objToStr(a)},clone.__getRegExpFlags=__getRegExpFlags,clone}();a.exports&&(a.exports=j)}).call(this,j(48).Buffer)},function(a,A,j){"use strict";j.d(A,"a",(function(){return _construct}));var P=j(96),B=j(97);function _construct(a,A,j){return(_construct=Object(B.a)()?Reflect.construct:function _construct(a,A,j){var B=[null];B.push.apply(B,A);var q=new(Function.bind.apply(a,B));return j&&Object(P.a)(q,j.prototype),q}).apply(null,arguments)}},function(a,A,j){"use strict";j.r(A),j.d(A,"dark",(function(){return P})),j.d(A,"excel",(function(){return B})),j.d(A,"fivethirtyeight",(function(){return q})),j.d(A,"ggplot2",(function(){return ne})),j.d(A,"googlecharts",(function(){return me})),j.d(A,"latimes",(function(){return se})),j.d(A,"quartz",(function(){return le})),j.d(A,"urbaninstitute",(function(){return ge})),j.d(A,"version",(function(){return ve})),j.d(A,"vox",(function(){return he}));var P={background:"#333",title:{color:"#fff",subtitleColor:"#fff"},style:{"guide-label":{fill:"#fff"},"guide-title":{fill:"#fff"}},axis:{domainColor:"#fff",gridColor:"#888",tickColor:"#fff"}},B={background:"#fff",arc:{fill:"#4572a7"},area:{fill:"#4572a7"},line:{stroke:"#4572a7",strokeWidth:2},path:{stroke:"#4572a7"},rect:{fill:"#4572a7"},shape:{stroke:"#4572a7"},symbol:{fill:"#4572a7",strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},q={arc:{fill:"#30a2da"},area:{fill:"#30a2da"},axis:{domainColor:"#cbcbcb",grid:!0,gridColor:"#cbcbcb",gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:"#cbcbcb",tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:"#30a2da",strokeWidth:2},path:{stroke:"#30a2da",strokeWidth:.5},rect:{fill:"#30a2da"},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:"#30a2da"},bar:{binSpacing:2,fill:"#30a2da",stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ne={group:{fill:"#e5e5e5"},arc:{fill:"#000"},area:{fill:"#000"},line:{stroke:"#000"},path:{stroke:"#000"},rect:{fill:"#000"},shape:{stroke:"#000"},symbol:{fill:"#000",size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},ie="Benton Gothic Bold, sans-serif",oe={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},se={background:"#ffffff",title:{anchor:"start",color:"#000000",font:ie,fontSize:22,fontWeight:"normal"},arc:{fill:"#82c6df"},area:{fill:"#82c6df"},line:{stroke:"#82c6df",strokeWidth:2},path:{stroke:"#82c6df"},rect:{fill:"#82c6df"},shape:{stroke:"#82c6df"},symbol:{fill:"#82c6df",size:30},axis:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,labelFontWeight:"normal",titleFont:ie,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,symbolType:"square",titleFont:ie,titleFontSize:13,titleFontWeight:"normal"},range:{category:oe["category-6"],diverging:oe["fireandice-6"],heatmap:oe["fire-7"],ordinal:oe["fire-7"],ramp:oe["fire-7"]}},le={background:"#f9f9f9",arc:{fill:"#ab5787"},area:{fill:"#ab5787"},line:{stroke:"#ab5787"},path:{stroke:"#ab5787"},rect:{fill:"#ab5787"},shape:{stroke:"#ab5787"},symbol:{fill:"#ab5787",size:30},axis:{domainColor:"#979797",domainWidth:.5,gridWidth:.2,labelColor:"#979797",tickColor:"#979797",tickWidth:.2,titleColor:"#979797"},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},he={background:"#fff",arc:{fill:"#3e5c69"},area:{fill:"#3e5c69"},line:{stroke:"#3e5c69"},path:{stroke:"#3e5c69"},rect:{fill:"#3e5c69"},shape:{stroke:"#3e5c69"},symbol:{fill:"#3e5c69"},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},pe={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},ge={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:"Lato"},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:"Lato",labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:"Lato"},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:"Lato",labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:"Lato",titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:"Lato",symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:"Lato",orient:"right",offset:10},view:{stroke:"transparent"},range:{category:pe["six-groups-cat-1"],diverging:pe["diverging-colors"],heatmap:pe["diverging-colors"],ordinal:pe["six-groups-seq"],ramp:pe["shades-blue"]},area:{fill:"#1696d2"},rect:{fill:"#1696d2"},line:{color:"#1696d2",stroke:"#1696d2",strokeWidth:5},trail:{color:"#1696d2",stroke:"#1696d2",strokeWidth:0,size:1},path:{stroke:"#1696d2",strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:"#1696d2",fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:"#1696d2",stroke:null}},arc:{fill:"#1696d2"},shape:{stroke:"#1696d2"},symbol:{fill:"#1696d2",size:30}},me={arc:{fill:"#3366CC"},area:{fill:"#3366CC"},path:{stroke:"#3366CC"},rect:{fill:"#3366CC"},shape:{stroke:"#3366CC"},symbol:{stroke:"#3366CC"},circle:{fill:"#3366CC"},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:"Arial, sans-serif",fontSize:12},"guide-title":{font:"Arial, sans-serif",fontSize:12},"group-title":{font:"Arial, sans-serif",fontSize:12}},title:{font:"Arial, sans-serif",fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ve="2.10.0"},function(a,A,j){"use strict";j.d(A,"a",(function(){return se}));var P=j(3),B=j(4),q=j(2),ne=j(0);function stringify(a,A){return JSON.stringify(a,function replacer(a){var A=[];return function(j,P){if("object"!==typeof P||null===P)return P;var B=A.indexOf(this)+1;return A.length=B,A.length>a?"[Object]":A.indexOf(P)>=0?"[Circular]":(A.push(P),P)}}(A))}var ie="vg-tooltip-element",oe={offsetX:10,offsetY:10,id:ie,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function escapeHTML(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function formatValue(a,A,j){if(Object(ne.B)(a))return"[".concat(a.map((function(a){return A(Object(ne.J)(a)?a:stringify(a,j))})).join(", "),"]");if(Object(ne.H)(a)){var P="",B=a,ie=B.title,oe=B.image,se=function __rest(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j}(B,["title","image"]);ie&&(P+="<h2>".concat(A(ie),"</h2>")),oe&&(P+='<img src="'.concat(A(oe),'">'));var le=Object.keys(se);if(le.length>0){P+="<table>";var he,pe=Object(q.a)(le);try{for(pe.s();!(he=pe.n()).done;){var ge=he.value,me=se[ge];void 0!==me&&(Object(ne.H)(me)&&(me=stringify(me,j)),P+='<tr><td class="key">'.concat(A(ge),':</td><td class="value">').concat(A(me),"</td></tr>"))}}catch(ve){pe.e(ve)}finally{pe.f()}P+="</table>"}return P||"{}"}return A(a)}};var se=function(){function Handler(a){Object(P.a)(this,Handler),this.options=Object.assign(Object.assign({},oe),a);var A=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var j=document.createElement("style");j.setAttribute("id",this.options.styleId),j.innerHTML=function createDefaultStyle(a){if(!/^[A-Za-z]+[-:.\w]*$/.test(a))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element img {\n  max-width: 200px;\n  max-height: 200px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n".toString().replace(ie,a)}(A);var B=document.head;B.childNodes.length>0?B.insertBefore(j,B.childNodes[0]):B.appendChild(j)}}return Object(B.a)(Handler,[{key:"tooltipHandler",value:function tooltipHandler(a,A,j,P){var B;(this.el=document.getElementById(this.options.id),this.el)||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(null!==(B=document.fullscreenElement)&&void 0!==B?B:document.body).appendChild(this.el));if(null!=P&&""!==P){this.el.innerHTML=this.options.formatTooltip(P,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible","".concat(this.options.theme,"-theme"));var q=function calculatePosition(a,A,j,P){var B=a.clientX+j;B+A.width>window.innerWidth&&(B=+a.clientX-j-A.width);var q=a.clientY+P;return q+A.height>window.innerHeight&&(q=+a.clientY-P-A.height),{x:B,y:q}}(A,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),ne=q.x,ie=q.y;this.el.setAttribute("style","top: ".concat(ie,"px; left: ").concat(ne,"px"))}else this.el.classList.remove("visible","".concat(this.options.theme,"-theme"))}}]),Handler}()},function(a,A,j){var P,B,q;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self&&self,B=[j(25),j(1)],void 0===(q="function"===typeof(P=function(A,j){"use strict";var P,B;function _getRequireWildcardCache(){if("function"!==typeof WeakMap)return null;var a=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return a},a}function _typeof(a){return(_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function _typeof(a){return typeof a}:function _typeof(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function _defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}function _createClass(a,A,j){return A&&_defineProperties(a.prototype,A),j&&_defineProperties(a,j),a}function _setPrototypeOf(a,A){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(a,A){return a.__proto__=A,a})(a,A)}function _createSuper(a){var A=function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(a){return!1}}();return function _createSuperInternal(){var j,P=_getPrototypeOf(a);if(A){var B=_getPrototypeOf(this).constructor;j=Reflect.construct(P,arguments,B)}else j=P.apply(this,arguments);return _possibleConstructorReturn(this,j)}}function _possibleConstructorReturn(a,A){return!A||"object"!==_typeof(A)&&"function"!==typeof A?function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(a):A}function _getPrototypeOf(a){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function ownKeys(a,A){var j=Object.keys(a);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(a);A&&(P=P.filter((function(A){return Object.getOwnPropertyDescriptor(a,A).enumerable}))),j.push.apply(j,P)}return j}function _objectSpread(a){for(var A=1;A<arguments.length;A++){var j=null!=arguments[A]?arguments[A]:{};A%2?ownKeys(Object(j),!0).forEach((function(A){_defineProperty(a,A,j[A])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(j)):ownKeys(Object(j)).forEach((function(A){Object.defineProperty(a,A,Object.getOwnPropertyDescriptor(j,A))}))}return a}function _defineProperty(a,A,j){return A in a?Object.defineProperty(a,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):a[A]=j,a}A=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(A),j=function _interopRequireWildcard(a){if(a&&a.__esModule)return a;if(null===a||"object"!==_typeof(a)&&"function"!==typeof a)return{default:a};var A=_getRequireWildcardCache();if(A&&A.has(a))return A.get(a);var j={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in a)if(Object.prototype.hasOwnProperty.call(a,B)){var q=P?Object.getOwnPropertyDescriptor(a,B):null;q&&(q.get||q.set)?Object.defineProperty(j,B,q):j[B]=a[B]}return j.default=a,A&&A.set(a,j),j}(j);var q={x:"clientWidth",y:"clientHeight"},ne={x:"clientTop",y:"clientLeft"},ie={x:"innerWidth",y:"innerHeight"},oe={x:"offsetWidth",y:"offsetHeight"},se={x:"offsetLeft",y:"offsetTop"},le={x:"overflowX",y:"overflowY"},he={x:"scrollWidth",y:"scrollHeight"},pe={x:"scrollLeft",y:"scrollTop"},ge={x:"width",y:"height"},me=function NOOP(){},ve=!!function(){if("undefined"===typeof window)return!1;var a=!1;try{document.createElement("div").addEventListener("test",me,{get passive(){return a=!0,!1}})}catch(A){}return a}()&&{passive:!0},ye=function constrain(a,A){var j=a.length,P=a.minSize,B=a.type,q=A.from,ne=A.size,ie=A.itemsPerRow,oe=(ne=Math.max(ne,P))%ie;return oe&&(ne+=ie-oe),ne>j&&(ne=j),(oe=(q="simple"!==B&&q?Math.max(Math.min(q,j-ne),0):0)%ie)&&(q-=oe,ne+=oe),q===A.from&&ne==A.size?A:_objectSpread(_objectSpread({},A),{},{from:q,size:ne})};a.exports=(B=P=function(a){!function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),A&&_setPrototypeOf(a,A)}(ReactList,a);var A=_createSuper(ReactList);function ReactList(a){var j;return function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,ReactList),(j=A.call(this,a)).state=ye(a,{itemsPerRow:1,from:a.initialIndex,size:0}),j.cache={},j.cachedScrollPosition=null,j.prevPrevState={},j.unstable=!1,j.updateCounter=0,j}return _createClass(ReactList,null,[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(a,A){var j=ye(a,A);return j===A?null:j}}]),_createClass(ReactList,[{key:"componentDidMount",value:function componentDidMount(){this.updateFrameAndClearCache=this.updateFrameAndClearCache.bind(this),window.addEventListener("resize",this.updateFrameAndClearCache),this.updateFrame(this.scrollTo.bind(this,this.props.initialIndex))}},{key:"componentDidUpdate",value:function componentDidUpdate(a){var A=this;if(this.props.axis!==a.axis&&this.clearSizeCache(),!this.unstable){if(++this.updateCounter>40)return this.unstable=!0,console.error("ReactList failed to reach a stable state.");this.updateCounterTimeoutId||(this.updateCounterTimeoutId=setTimeout((function(){A.updateCounter=0,delete A.updateCounterTimeoutId}),0)),this.updateFrame()}}},{key:"maybeSetState",value:function maybeSetState(a,A){if(function isEqualSubset(a,A){for(var j in A)if(a[j]!==A[j])return!1;return!0}(this.state,a))return A();this.setState(a,A)}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("resize",this.updateFrameAndClearCache),this.scrollParent.removeEventListener("scroll",this.updateFrameAndClearCache,ve),this.scrollParent.removeEventListener("mousewheel",me,ve)}},{key:"getOffset",value:function getOffset(a){var A=this.props.axis,j=a[ne[A]]||0,P=se[A];do{j+=a[P]||0}while(a=a.offsetParent);return j}},{key:"getEl",value:function getEl(){return this.el||this.items}},{key:"getScrollPosition",value:function getScrollPosition(){if("number"===typeof this.cachedScrollPosition)return this.cachedScrollPosition;var a=this.scrollParent,A=this.props.axis,j=pe[A],P=a===window?document.body[j]||document.documentElement[j]:a[j],B=this.getScrollSize()-this.props.scrollParentViewportSizeGetter(this),q=Math.max(0,Math.min(P,B)),ne=this.getEl();return this.cachedScrollPosition=this.getOffset(a)+q-this.getOffset(ne),this.cachedScrollPosition}},{key:"setScroll",value:function setScroll(a){var A=this.scrollParent,j=this.props.axis;if(a+=this.getOffset(this.getEl()),A===window)return window.scrollTo(0,a);a-=this.getOffset(this.scrollParent),A[pe[j]]=a}},{key:"getScrollSize",value:function getScrollSize(){var a=this.scrollParent,A=document,j=A.body,P=A.documentElement,B=he[this.props.axis];return a===window?Math.max(j[B],P[B]):a[B]}},{key:"hasDeterminateSize",value:function hasDeterminateSize(){var a=this.props,A=a.itemSizeGetter;return"uniform"===a.type||A}},{key:"getStartAndEnd",value:function getStartAndEnd(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.threshold,A=this.getScrollPosition(),j=Math.max(0,A-a),P=A+this.props.scrollParentViewportSizeGetter(this)+a;return this.hasDeterminateSize()&&(P=Math.min(P,this.getSpaceBefore(this.props.length))),{start:j,end:P}}},{key:"getItemSizeAndItemsPerRow",value:function getItemSizeAndItemsPerRow(){var a=this.props,A=a.axis,j=a.useStaticSize,P=this.state,B=P.itemSize,q=P.itemsPerRow;if(j&&B&&q)return{itemSize:B,itemsPerRow:q};var ne=this.items.children;if(!ne.length)return{};var ie=ne[0],le=ie[oe[A]],he=Math.abs(le-B);if((isNaN(he)||he>=1)&&(B=le),!B)return{};for(var pe=se[A],ge=ie[pe],me=ne[q=1];me&&me[pe]===ge;me=ne[q])++q;return{itemSize:B,itemsPerRow:q}}},{key:"clearSizeCache",value:function clearSizeCache(){this.cachedScrollPosition=null}},{key:"updateFrameAndClearCache",value:function updateFrameAndClearCache(a){return this.clearSizeCache(),this.updateFrame(a)}},{key:"updateFrame",value:function updateFrame(a){switch(this.updateScrollParent(),"function"!=typeof a&&(a=me),this.props.type){case"simple":return this.updateSimpleFrame(a);case"variable":return this.updateVariableFrame(a);case"uniform":return this.updateUniformFrame(a)}}},{key:"updateScrollParent",value:function updateScrollParent(){var a=this.scrollParent;this.scrollParent=this.props.scrollParentGetter(this),a!==this.scrollParent&&(a&&(a.removeEventListener("scroll",this.updateFrameAndClearCache),a.removeEventListener("mousewheel",me)),this.clearSizeCache(),this.scrollParent.addEventListener("scroll",this.updateFrameAndClearCache,ve),this.scrollParent.addEventListener("mousewheel",me,ve))}},{key:"updateSimpleFrame",value:function updateSimpleFrame(a){var A=this.getStartAndEnd().end,j=this.items.children,P=0;if(j.length){var B=this.props.axis,q=j[0],ne=j[j.length-1];P=this.getOffset(ne)+ne[oe[B]]-this.getOffset(q)}if(P>A)return a();var ie=this.props,se=ie.pageSize,le=ie.length,he=Math.min(this.state.size+se,le);this.maybeSetState({size:he},a)}},{key:"updateVariableFrame",value:function updateVariableFrame(a){this.props.itemSizeGetter||this.cacheSizes();for(var A=this.getStartAndEnd(),j=A.start,P=A.end,B=this.props,q=B.length,ne=B.pageSize,ie=0,oe=0,se=0,le=q-1;oe<le;){var he=this.getSizeOfItem(oe);if(null==he||ie+he>j)break;ie+=he,++oe}for(var pe=q-oe;se<pe&&ie<P;){var ge=this.getSizeOfItem(oe+se);if(null==ge){se=Math.min(se+ne,pe);break}ie+=ge,++se}this.maybeSetState(ye(this.props,{from:oe,itemsPerRow:1,size:se}),a)}},{key:"updateUniformFrame",value:function updateUniformFrame(a){var A=this.getItemSizeAndItemsPerRow(),j=A.itemSize,P=A.itemsPerRow;if(!j||!P)return a();var B=this.getStartAndEnd(),q=B.start,ne=B.end,ie=ye(this.props,{from:Math.floor(q/j)*P,size:(Math.ceil((ne-q)/j)+1)*P,itemsPerRow:P}),oe=ie.from,se=ie.size;return this.maybeSetState({itemsPerRow:P,from:oe,itemSize:j,size:se},a)}},{key:"getSpaceBefore",value:function getSpaceBefore(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=A[a])return A[a];var j=this.state,P=j.itemSize,B=j.itemsPerRow;if(P)return A[a]=Math.floor(a/B)*P;for(var q=a;q>0&&null==A[--q];);for(var ne=A[q]||0,ie=q;ie<a;++ie){A[ie]=ne;var oe=this.getSizeOfItem(ie);if(null==oe)break;ne+=oe}return A[a]=ne}},{key:"cacheSizes",value:function cacheSizes(){for(var a=this.cache,A=this.state.from,j=this.items.children,P=oe[this.props.axis],B=0,q=j.length;B<q;++B)a[A+B]=j[B][P]}},{key:"getSizeOfItem",value:function getSizeOfItem(a){var A=this.cache,j=this.items,P=this.props,B=P.axis,q=P.itemSizeGetter,ne=P.itemSizeEstimator,ie=P.type,se=this.state,le=se.from,he=se.itemSize,pe=se.size;if(he)return he;if(q)return q(a);if(a in A)return A[a];if("simple"===ie&&a>=le&&a<le+pe&&j){var ge=j.children[a-le];if(ge)return ge[oe[B]]}return ne?ne(a,A):void 0}},{key:"scrollTo",value:function scrollTo(a){null!=a&&this.setScroll(this.getSpaceBefore(a))}},{key:"scrollAround",value:function scrollAround(a){var A=this.getScrollPosition(),j=this.getSpaceBefore(a),P=j-this.props.scrollParentViewportSizeGetter(this)+this.getSizeOfItem(a),B=Math.min(P,j),q=Math.max(P,j);return A<=B?this.setScroll(B):A>q?this.setScroll(q):void 0}},{key:"getVisibleRange",value:function getVisibleRange(){for(var a,A,j=this.state,P=j.from,B=j.size,q=this.getStartAndEnd(0),ne=q.start,ie=q.end,oe={},se=P;se<P+B;++se){var le=this.getSpaceBefore(se,oe),he=le+this.getSizeOfItem(se);null==a&&he>ne&&(a=se),null!=a&&le<ie&&(A=se)}return[a,A]}},{key:"renderItems",value:function renderItems(){for(var a=this,A=this.props,j=A.itemRenderer,P=A.itemsRenderer,B=this.state,q=B.from,ne=B.size,ie=[],oe=0;oe<ne;++oe)ie.push(j(q+oe,oe));return P(ie,(function(A){return a.items=A}))}},{key:"render",value:function render(){var a=this,A=this.props,P=A.axis,B=A.length,q=A.type,ne=A.useTranslate3d,ie=this.state,oe=ie.from,se=ie.itemsPerRow,le=this.renderItems();if("simple"===q)return le;var he={position:"relative"},pe={},me=Math.ceil(B/se)*se,ve=this.getSpaceBefore(me,pe);ve&&(he[ge[P]]=ve,"x"===P&&(he.overflowX="hidden"));var ye=this.getSpaceBefore(oe,pe),_e="x"===P?ye:0,we="y"===P?ye:0,ke=ne?"translate3d(".concat(_e,"px, ").concat(we,"px, 0)"):"translate(".concat(_e,"px, ").concat(we,"px)"),Oe={msTransform:ke,WebkitTransform:ke,transform:ke};return j.default.createElement("div",{style:he,ref:function ref(A){return a.el=A}},j.default.createElement("div",{style:Oe},le))}}]),ReactList}(j.Component),_defineProperty(P,"displayName","ReactList"),_defineProperty(P,"propTypes",{axis:A.default.oneOf(["x","y"]),initialIndex:A.default.number,itemRenderer:A.default.func,itemSizeEstimator:A.default.func,itemSizeGetter:A.default.func,itemsRenderer:A.default.func,length:A.default.number,minSize:A.default.number,pageSize:A.default.number,scrollParentGetter:A.default.func,scrollParentViewportSizeGetter:A.default.func,threshold:A.default.number,type:A.default.oneOf(["simple","variable","uniform"]),useStaticSize:A.default.bool,useTranslate3d:A.default.bool}),_defineProperty(P,"defaultProps",{axis:"y",itemRenderer:function itemRenderer(a,A){return j.default.createElement("div",{key:A},a)},itemsRenderer:function itemsRenderer(a,A){return j.default.createElement("div",{ref:A},a)},length:0,minSize:1,pageSize:10,scrollParentGetter:function defaultScrollParentGetter(a){for(var A=a.props.axis,j=a.getEl(),P=le[A];j=j.parentElement;)switch(window.getComputedStyle(j)[P]){case"auto":case"scroll":case"overlay":return j}return window},scrollParentViewportSizeGetter:function defaultScrollParentViewportSizeGetter(a){var A=a.props.axis,j=a.scrollParent;return j===window?window[ie[A]]:j[q[A]]},threshold:100,type:"simple",useStaticSize:!1,useTranslate3d:!1}),B)})?P.apply(A,B):P)||(a.exports=q)},function(a,A,j){var P,B=B||function(a){"use strict";if(!("undefined"===typeof a||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var A=a.document,j=function get_URL(){return a.URL||a.webkitURL||a},P=A.createElementNS("http://www.w3.org/1999/xhtml","a"),B="download"in P,q=/constructor/i.test(a.HTMLElement)||a.safari,ne=/CriOS\/[\d]+/.test(navigator.userAgent),ie=function throw_outside(A){(a.setImmediate||a.setTimeout)((function(){throw A}),0)},oe=function revoke(a){setTimeout((function revoker(){"string"===typeof a?j().revokeObjectURL(a):a.remove()}),4e4)},se=function auto_bom(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},le=function FileSaver(A,le,he){he||(A=se(A));var pe,ge=this,me="application/octet-stream"===A.type,ve=function dispatch_all(){!function dispatch(a,A,j){for(var P=(A=[].concat(A)).length;P--;){var B=a["on"+A[P]];if("function"===typeof B)try{B.call(a,j||a)}catch(q){ie(q)}}}(ge,"writestart progress write writeend".split(" "))};if(ge.readyState=ge.INIT,B)return pe=j().createObjectURL(A),void setTimeout((function(){P.href=pe,P.download=le,function click(a){var A=new MouseEvent("click");a.dispatchEvent(A)}(P),ve(),oe(pe),ge.readyState=ge.DONE}));!function fs_error(){if((ne||me&&q)&&a.FileReader){var P=new FileReader;return P.onloadend=function(){var A=ne?P.result:P.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(A,"_blank")||(a.location.href=A),A=void 0,ge.readyState=ge.DONE,ve()},P.readAsDataURL(A),void(ge.readyState=ge.INIT)}(pe||(pe=j().createObjectURL(A)),me)?a.location.href=pe:a.open(pe,"_blank")||(a.location.href=pe);ge.readyState=ge.DONE,ve(),oe(pe)}()},he=le.prototype;return"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob?function(a,A,j){return A=A||a.name||"download",j||(a=se(a)),navigator.msSaveOrOpenBlob(a,A)}:(he.abort=function(){},he.readyState=he.INIT=0,he.WRITING=1,he.DONE=2,he.error=he.onwritestart=he.onprogress=he.onwrite=he.onabort=he.onerror=he.onwriteend=null,function saveAs(a,A,j){return new le(a,A||a.name||"download",j)})}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);a.exports?a.exports.saveAs=B:null!==j(436)&&null!==j(437)&&(void 0===(P=function(){return B}.call(A,j,A,a))||(a.exports=P))},function(a,A,j){"use strict";var P=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}(),B=_interopRequireDefault(j(438)),q=_interopRequireDefault(j(460)),ne=_interopRequireDefault(j(461)),ie=_interopRequireDefault(j(462)),oe=_interopRequireDefault(j(463)),se=_interopRequireDefault(j(464)),le=_interopRequireDefault(j(466)),he=_interopRequireDefault(j(467)),pe=_interopRequireDefault(j(468)),ge=_interopRequireDefault(j(469));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}var me=function(){function GitHub(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://api.github.com";_classCallCheck(this,GitHub),this.__apiBase=A,this.__auth=a||{}}return P(GitHub,[{key:"getGist",value:function getGist(a){return new B.default(a,this.__auth,this.__apiBase)}},{key:"getUser",value:function getUser(a){return new q.default(a,this.__auth,this.__apiBase)}},{key:"getOrganization",value:function getOrganization(a){return new le.default(a,this.__auth,this.__apiBase)}},{key:"getTeam",value:function getTeam(a){return new he.default(a,this.__auth,this.__apiBase)}},{key:"getRepo",value:function getRepo(a,A){return new se.default(this._getFullName(a,A),this.__auth,this.__apiBase)}},{key:"getIssues",value:function getIssues(a,A){return new ne.default(this._getFullName(a,A),this.__auth,this.__apiBase)}},{key:"search",value:function search(a){return new ie.default(a,this.__auth,this.__apiBase)}},{key:"getRateLimit",value:function getRateLimit(){return new oe.default(this.__auth,this.__apiBase)}},{key:"getMarkdown",value:function getMarkdown(){return new pe.default(this.__auth,this.__apiBase)}},{key:"getProject",value:function getProject(a){return new ge.default(a,this.__auth,this.__apiBase)}},{key:"_getFullName",value:function _getFullName(a,A){var j=a;return A&&(j=a+"/"+A),j}}]),GitHub}();a.exports=me},function(a,A,j){var P=j(470),B=j(135),q=j(211),ne=j(89)("socket.io-client");a.exports=A=lookup;var ie=A.managers={};function lookup(a,A){"object"===typeof a&&(A=a,a=void 0),A=A||{};var j,B=P(a),oe=B.source,se=B.id,le=B.path,he=ie[se]&&le in ie[se].nsps;return A.forceNew||A["force new connection"]||!1===A.multiplex||he?(ne("ignoring socket cache for %s",oe),j=q(oe,A)):(ie[se]||(ne("new io instance for %s",oe),ie[se]=q(oe,A)),j=ie[se]),B.query&&!A.query&&(A.query=B.query),j.socket(B.path,A)}A.protocol=B.protocol,A.connect=lookup,A.Manager=j(211),A.Socket=j(217)},function(a,A,j){(function(A){var P=j(499),B="undefined"!==typeof window?window:"undefined"!==typeof A?A:"undefined"!==typeof self?self:{},q=B.Raven,ne=new P;ne.noConflict=function(){return B.Raven=q,ne},ne.afterLoad(),a.exports=ne,a.exports.Client=P}).call(this,j(35))},function(a,A,j){"use strict";j.r(A),j.d(A,"compile",(function(){return compile})),j.d(A,"deepEqual",(function(){return Oe})),j.d(A,"duplicate",(function(){return Se})),j.d(A,"pick",(function(){return pick})),j.d(A,"omit",(function(){return omit})),j.d(A,"stringify",(function(){return Te})),j.d(A,"hash",(function(){return util_hash})),j.d(A,"isNullOrFalse",(function(){return isNullOrFalse})),j.d(A,"contains",(function(){return util_contains})),j.d(A,"some",(function(){return some})),j.d(A,"every",(function(){return every})),j.d(A,"mergeDeep",(function(){return mergeDeep})),j.d(A,"unique",(function(){return unique})),j.d(A,"isEqual",(function(){return isEqual})),j.d(A,"setEqual",(function(){return setEqual})),j.d(A,"hasIntersection",(function(){return hasIntersection})),j.d(A,"prefixGenerator",(function(){return prefixGenerator})),j.d(A,"fieldIntersection",(function(){return fieldIntersection})),j.d(A,"isEmpty",(function(){return isEmpty})),j.d(A,"keys",(function(){return Ae})),j.d(A,"vals",(function(){return je})),j.d(A,"entries",(function(){return Fe})),j.d(A,"isBoolean",(function(){return util_isBoolean})),j.d(A,"varName",(function(){return varName})),j.d(A,"logicalExpr",(function(){return logicalExpr})),j.d(A,"deleteNestedProperty",(function(){return deleteNestedProperty})),j.d(A,"titleCase",(function(){return titleCase})),j.d(A,"accessPathWithDatum",(function(){return accessPathWithDatum})),j.d(A,"flatAccessWithDatum",(function(){return flatAccessWithDatum})),j.d(A,"replacePathInField",(function(){return replacePathInField})),j.d(A,"replaceAll",(function(){return replaceAll})),j.d(A,"removePathFromField",(function(){return removePathFromField})),j.d(A,"accessPathDepth",(function(){return accessPathDepth})),j.d(A,"getFirstDefined",(function(){return getFirstDefined})),j.d(A,"uniqueId",(function(){return uniqueId})),j.d(A,"resetIdCounter",(function(){return resetIdCounter})),j.d(A,"internalField",(function(){return internalField})),j.d(A,"isInternalField",(function(){return isInternalField})),j.d(A,"normalizeAngle",(function(){return normalizeAngle})),j.d(A,"isNumeric",(function(){return isNumeric})),j.d(A,"normalize",(function(){return normalize_normalize})),j.d(A,"version",(function(){return B.a}));var P={};j.r(P),j.d(P,"invalidSpec",(function(){return invalidSpec})),j.d(P,"FIT_NON_SINGLE",(function(){return Wt})),j.d(P,"containerSizeNonSingle",(function(){return containerSizeNonSingle})),j.d(P,"containerSizeNotCompatibleWithAutosize",(function(){return containerSizeNotCompatibleWithAutosize})),j.d(P,"droppingFit",(function(){return droppingFit})),j.d(P,"unknownField",(function(){return unknownField})),j.d(P,"cannotProjectOnChannelWithoutField",(function(){return cannotProjectOnChannelWithoutField})),j.d(P,"cannotProjectAggregate",(function(){return cannotProjectAggregate})),j.d(P,"nearestNotSupportForContinuous",(function(){return nearestNotSupportForContinuous})),j.d(P,"selectionNotSupported",(function(){return selectionNotSupported})),j.d(P,"selectionNotFound",(function(){return selectionNotFound})),j.d(P,"SCALE_BINDINGS_CONTINUOUS",(function(){return Ht})),j.d(P,"LEGEND_BINDINGS_MUST_HAVE_PROJECTION",(function(){return Gt})),j.d(P,"noSameUnitLookup",(function(){return noSameUnitLookup})),j.d(P,"NEEDS_SAME_SELECTION",(function(){return Vt})),j.d(P,"INTERVAL_INITIALIZED_WITH_X_Y",(function(){return Yt})),j.d(P,"noSuchRepeatedValue",(function(){return noSuchRepeatedValue})),j.d(P,"columnsNotSupportByRowCol",(function(){return columnsNotSupportByRowCol})),j.d(P,"CONCAT_CANNOT_SHARE_AXIS",(function(){return $t})),j.d(P,"unrecognizedParse",(function(){return unrecognizedParse})),j.d(P,"differentParse",(function(){return differentParse})),j.d(P,"ADD_SAME_CHILD_TWICE",(function(){return Kt})),j.d(P,"invalidTransformIgnored",(function(){return invalidTransformIgnored})),j.d(P,"NO_FIELDS_NEEDS_AS",(function(){return Xt})),j.d(P,"customFormatTypeNotAllowed",(function(){return customFormatTypeNotAllowed})),j.d(P,"projectionOverridden",(function(){return projectionOverridden})),j.d(P,"REPLACE_ANGLE_WITH_THETA",(function(){return Jt})),j.d(P,"primitiveChannelDef",(function(){return primitiveChannelDef})),j.d(P,"invalidFieldType",(function(){return invalidFieldType})),j.d(P,"invalidFieldTypeForCountAggregate",(function(){return invalidFieldTypeForCountAggregate})),j.d(P,"invalidAggregate",(function(){return invalidAggregate})),j.d(P,"missingFieldType",(function(){return missingFieldType})),j.d(P,"droppingColor",(function(){return droppingColor})),j.d(P,"emptyFieldDef",(function(){return emptyFieldDef})),j.d(P,"latLongDeprecated",(function(){return latLongDeprecated})),j.d(P,"LINE_WITH_VARYING_SIZE",(function(){return Qt})),j.d(P,"incompatibleChannel",(function(){return incompatibleChannel})),j.d(P,"invalidEncodingChannel",(function(){return invalidEncodingChannel})),j.d(P,"facetChannelShouldBeDiscrete",(function(){return facetChannelShouldBeDiscrete})),j.d(P,"facetChannelDropped",(function(){return facetChannelDropped})),j.d(P,"discreteChannelCannotEncode",(function(){return discreteChannelCannotEncode})),j.d(P,"rangeMarkAlignmentCannotBeExpression",(function(){return rangeMarkAlignmentCannotBeExpression})),j.d(P,"lineWithRange",(function(){return lineWithRange})),j.d(P,"orientOverridden",(function(){return orientOverridden})),j.d(P,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return Zt})),j.d(P,"RANGE_STEP_DEPRECATED",(function(){return en})),j.d(P,"cannotUseScalePropertyWithNonColor",(function(){return cannotUseScalePropertyWithNonColor})),j.d(P,"unaggregateDomainHasNoEffectForRawField",(function(){return unaggregateDomainHasNoEffectForRawField})),j.d(P,"unaggregateDomainWithNonSharedDomainOp",(function(){return unaggregateDomainWithNonSharedDomainOp})),j.d(P,"unaggregatedDomainWithLogScale",(function(){return unaggregatedDomainWithLogScale})),j.d(P,"cannotApplySizeToNonOrientedMark",(function(){return cannotApplySizeToNonOrientedMark})),j.d(P,"scaleTypeNotWorkWithChannel",(function(){return scaleTypeNotWorkWithChannel})),j.d(P,"scaleTypeNotWorkWithFieldDef",(function(){return scaleTypeNotWorkWithFieldDef})),j.d(P,"scalePropertyNotWorkWithScaleType",(function(){return scalePropertyNotWorkWithScaleType})),j.d(P,"scaleTypeNotWorkWithMark",(function(){return scaleTypeNotWorkWithMark})),j.d(P,"stepDropped",(function(){return stepDropped})),j.d(P,"mergeConflictingProperty",(function(){return mergeConflictingProperty})),j.d(P,"mergeConflictingDomainProperty",(function(){return mergeConflictingDomainProperty})),j.d(P,"independentScaleMeansIndependentGuide",(function(){return independentScaleMeansIndependentGuide})),j.d(P,"domainSortDropped",(function(){return domainSortDropped})),j.d(P,"MORE_THAN_ONE_SORT",(function(){return tn})),j.d(P,"FACETED_INDEPENDENT_DIFFERENT_SOURCES",(function(){return nn})),j.d(P,"FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES",(function(){return rn})),j.d(P,"FACETED_INDEPENDENT_SAME_SOURCE",(function(){return an})),j.d(P,"INVALID_CHANNEL_FOR_AXIS",(function(){return sn})),j.d(P,"cannotStackRangedMark",(function(){return cannotStackRangedMark})),j.d(P,"cannotStackNonLinearScale",(function(){return cannotStackNonLinearScale})),j.d(P,"stackNonSummativeAggregate",(function(){return stackNonSummativeAggregate})),j.d(P,"invalidTimeUnit",(function(){return invalidTimeUnit})),j.d(P,"droppedDay",(function(){return droppedDay})),j.d(P,"errorBarCenterAndExtentAreNotNeeded",(function(){return errorBarCenterAndExtentAreNotNeeded})),j.d(P,"errorBarCenterIsUsedWithWrongExtent",(function(){return errorBarCenterIsUsedWithWrongExtent})),j.d(P,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return errorBarContinuousAxisHasCustomizedAggregate})),j.d(P,"errorBand1DNotSupport",(function(){return errorBand1DNotSupport})),j.d(P,"channelRequiredForBinned",(function(){return channelRequiredForBinned})),j.d(P,"channelShouldNotBeUsedForBinned",(function(){return channelShouldNotBeUsedForBinned})),j.d(P,"domainRequiredForThresholdScale",(function(){return domainRequiredForThresholdScale}));var B=j(198);function accessor(a,A,j){return a.fields=A||[],a.fname=j,a}function getter(a){return 1===a.length?q(a[0]):ne(a)}var q=function get1(a){return function(A){return A[a]}},ne=function getN(a){var A=a.length;return function(j){for(var P=0;P<A;++P)j=j[a[P]];return j}};function vega_util_module_error(a){throw Error(a)}function splitAccessPath(a){var A,j,P,B=[],q=a.length,ne=null,ie=0,oe="";function push(){B.push(oe+a.substring(A,j)),oe="",A=j+1}for(a+="",A=j=0;j<q;++j)if("\\"===(P=a[j]))oe+=a.substring(A,j),oe+=a.substring(++j,++j),A=j;else if(P===ne)push(),ne=null,ie=-1;else{if(ne)continue;A===ie&&'"'===P||A===ie&&"'"===P?(A=j+1,ne=P):"."!==P||ie?"["===P?(j>A&&push(),ie=A=j+1):"]"===P&&(ie||vega_util_module_error("Access path missing open bracket: "+a),ie>0&&push(),ie=0,A=j+1):j>A?push():A=j+1}return ie&&vega_util_module_error("Access path missing closing bracket: "+a),ne&&vega_util_module_error("Access path missing closing quote: "+a),j>A&&(j++,push()),B}function vega_util_module_field(a,A,j){var P=splitAccessPath(a);return a=1===P.length?P[0]:a,accessor((j&&j.get||getter)(P),[a],A||a)}vega_util_module_field("id");var ie=accessor((function(a){return a}),[],"identity");accessor((function(){return 0}),[],"zero"),accessor((function(){return 1}),[],"one"),accessor((function(){return!0}),[],"true"),accessor((function(){return!1}),[],"false");function log$1(a,A,j){var P=[A].concat([].slice.call(j));console[a].apply(console,P)}var oe=Array.isArray;function isObject(a){return a===Object(a)}var se=function isLegalKey(a){return"__proto__"!==a};function mergeConfig(){for(var a=arguments.length,A=new Array(a),j=0;j<a;j++)A[j]=arguments[j];return A.reduce((function(a,A){for(var j in A)if("signals"===j)a.signals=mergeNamed(a.signals,A.signals);else{var P="legend"===j?{layout:1}:"style"===j||null;writeConfig(a,j,A[j],P)}return a}),{})}function writeConfig(a,A,j,P){var B,q;if(se(A))if(isObject(j)&&!oe(j))for(B in q=isObject(a[A])?a[A]:a[A]={},j)P&&(!0===P||P[B])?writeConfig(q,B,j[B]):se(B)&&(q[B]=j[B]);else a[A]=j}function mergeNamed(a,A){if(null==a)return A;var j={},P=[];function add(a){j[a.name]||(j[a.name]=1,P.push(a))}return A.forEach(add),a.forEach(add),P}function array(a){return null!=a?oe(a)?a:[a]:[]}function isFunction(a){return"function"===typeof a}var le=Object.prototype.hasOwnProperty;function _has(a,A){return le.call(a,A)}function isBoolean(a){return"boolean"===typeof a}function isNumber(a){return"number"===typeof a}function isString(a){return"string"===typeof a}function $(a){return oe(a)?"["+a.map($)+"]":isObject(a)||isString(a)?JSON.stringify(a).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):a}function toSet(a){for(var A={},j=a.length,P=0;P<j;++P)A[a[P]]=!0;return A}var he=j(5),pe=j(2),ge=j(11);Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function r(){var a=isNaN(arguments[0])?1:Number(arguments[0]);return a?Array.prototype.reduce.call(this,(function(A,j){return Array.isArray(j)?A.push.apply(A,r.call(j,a-1)):A.push(j),A}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function value(a){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var me=j(230),ve=j.n(me),ye=j(99),_e=j.n(ye),we=j(59),ke=j.n(we);function isLogicalOr(a){return!!a.or}function isLogicalAnd(a){return!!a.and}function isLogicalNot(a){return!!a.not}function normalizeLogicalComposition(a,A){return isLogicalNot(a)?{not:normalizeLogicalComposition(a.not,A)}:isLogicalAnd(a)?{and:a.and.map((function(a){return normalizeLogicalComposition(a,A)}))}:isLogicalOr(a)?{or:a.or.map((function(a){return normalizeLogicalComposition(a,A)}))}:A(a)}var Oe=_e.a,Se=ve.a;function pick(a,A){var j,P={},B=Object(pe.a)(A);try{for(B.s();!(j=B.n()).done;){var q=j.value;_has(a,q)&&(P[q]=a[q])}}catch(ne){B.e(ne)}finally{B.f()}return P}function omit(a,A){var j,P=Object.assign({},a),B=Object(pe.a)(A);try{for(B.s();!(j=B.n()).done;){delete P[j.value]}}catch(q){B.e(q)}finally{B.f()}return P}Set.prototype.toJSON=function(){return"Set(".concat(Object(he.a)(this).map((function(a){return ke()(a)})).join(","),")")};var Te=ke.a;function util_hash(a){if(isNumber(a))return a;var A=isString(a)?a:ke()(a);if(A.length<250)return A;for(var j=0,P=0;P<A.length;P++){j=(j<<5)-j+A.charCodeAt(P),j&=j}return j}function isNullOrFalse(a){return!1===a||null===a}function util_contains(a,A){return a.indexOf(A)>-1}function some(a,A){var j,P=0,B=Object(pe.a)(a.entries());try{for(B.s();!(j=B.n()).done;){var q=Object(ge.a)(j.value,2),ne=q[0];if(A(q[1],ne,P++))return!0}}catch(ie){B.e(ie)}finally{B.f()}return!1}function every(a,A){var j,P=0,B=Object(pe.a)(a.entries());try{for(B.s();!(j=B.n()).done;){var q=Object(ge.a)(j.value,2),ne=q[0];if(!A(q[1],ne,P++))return!1}}catch(ie){B.e(ie)}finally{B.f()}return!0}function mergeDeep(a){for(var A=arguments.length,j=new Array(A>1?A-1:0),P=1;P<A;P++)j[P-1]=arguments[P];for(var B=0,q=j;B<q.length;B++){var ne=q[B];deepMerge_(a,null!==ne&&void 0!==ne?ne:{})}return a}function deepMerge_(a,A){var j,P=Object(pe.a)(Ae(A));try{for(P.s();!(j=P.n()).done;){var B=j.value;writeConfig(a,B,A[B],!0)}}catch(q){P.e(q)}finally{P.f()}}function unique(a,A){var j,P,B=[],q={},ne=Object(pe.a)(a);try{for(ne.s();!(P=ne.n()).done;){var ie=P.value;(j=A(ie))in q||(q[j]=1,B.push(ie))}}catch(oe){ne.e(oe)}finally{ne.f()}return B}function isEqual(a,A){var j=Ae(a),P=Ae(A);if(j.length!==P.length)return!1;var B,q=Object(pe.a)(j);try{for(q.s();!(B=q.n()).done;){var ne=B.value;if(a[ne]!==A[ne])return!1}}catch(ie){q.e(ie)}finally{q.f()}return!0}function setEqual(a,A){if(a.size!==A.size)return!1;var j,P=Object(pe.a)(a);try{for(P.s();!(j=P.n()).done;){var B=j.value;if(!A.has(B))return!1}}catch(q){P.e(q)}finally{P.f()}return!0}function hasIntersection(a,A){var j,P=Object(pe.a)(a);try{for(P.s();!(j=P.n()).done;){var B=j.value;if(A.has(B))return!0}}catch(q){P.e(q)}finally{P.f()}return!1}function prefixGenerator(a){var A,j=new Set,P=Object(pe.a)(a);try{var B=function _loop(){var a,P=splitAccessPath(A.value).map((function(a,A){return 0===A?a:"[".concat(a,"]")})),B=P.map((function(a,A){return P.slice(0,A+1).join("")})),q=Object(pe.a)(B);try{for(q.s();!(a=q.n()).done;){var ne=a.value;j.add(ne)}}catch(ie){q.e(ie)}finally{q.f()}};for(P.s();!(A=P.n()).done;)B()}catch(q){P.e(q)}finally{P.f()}return j}function fieldIntersection(a,A){return void 0===a||void 0===A||hasIntersection(prefixGenerator(a),prefixGenerator(A))}function isEmpty(a){return 0===Ae(a).length}var Ae=Object.keys,je=Object.values,Fe=Object.entries;function util_isBoolean(a){return!0===a||!1===a}function varName(a){var A=a.replace(/\W/g,"_");return(a.match(/^\d+/)?"_":"")+A}function logicalExpr(a,A){return isLogicalNot(a)?"!("+logicalExpr(a.not,A)+")":isLogicalAnd(a)?"("+a.and.map((function(a){return logicalExpr(a,A)})).join(") && (")+")":isLogicalOr(a)?"("+a.or.map((function(a){return logicalExpr(a,A)})).join(") || (")+")":A(a)}function deleteNestedProperty(a,A){if(0===A.length)return!0;var j=A.shift();return j in a&&deleteNestedProperty(a[j],A)&&delete a[j],isEmpty(a)}function titleCase(a){return a.charAt(0).toUpperCase()+a.substr(1)}function accessPathWithDatum(a){for(var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum",j=splitAccessPath(a),P=[],B=1;B<=j.length;B++){var q="[".concat(j.slice(0,B).map($).join("]["),"]");P.push("".concat(A).concat(q))}return P.join(" && ")}function flatAccessWithDatum(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum";return"".concat(A,"[").concat($(splitAccessPath(a).join(".")),"]")}function escapePathAccess(a){return a.replace(/(\[|\]|\.|'|")/g,"\\$1")}function replacePathInField(a){return"".concat(splitAccessPath(a).map(escapePathAccess).join("\\."))}function replaceAll(a,A,j){return a.replace(new RegExp(A.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),j)}function removePathFromField(a){return"".concat(splitAccessPath(a).join("."))}function accessPathDepth(a){return a?splitAccessPath(a).length:0}function getFirstDefined(){for(var a=arguments.length,A=new Array(a),j=0;j<a;j++)A[j]=arguments[j];for(var P=0,B=A;P<B.length;P++){var q=B[P];if(void 0!==q)return q}}var Re=42;function uniqueId(a){var A=++Re;return a?String(a)+A:A}function resetIdCounter(){Re=42}function internalField(a){return isInternalField(a)?a:"__".concat(a)}function isInternalField(a){return 0===a.indexOf("__")}function normalizeAngle(a){if(void 0!==a)return(a%360+360)%360}function isNumeric(a){return!!isNumber(a)||!isNaN(a)&&!isNaN(parseFloat(a))}var Me={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function isConditionalAxisValue(a){return a&&a.condition}var Ne=["domain","grid","labels","ticks","title"],Be={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Ue={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},We=Object.assign(Object.assign({},Ue),{style:1,labelExpr:1,encoding:1});function isAxisProperty(a){return!!We[a]}Ae(We);var Ve=Ae({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1}),Ye=j(6),$e={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Xe={count:1,min:1,max:1};function isArgminDef(a){return!!a&&!!a.argmin}function isArgmaxDef(a){return!!a&&!!a.argmax}Ae($e);function isAggregateOp(a){return isString(a)&&!!$e[a]}var et=["count","valid","missing","distinct"];function isCountingAggregateOp(a){return isString(a)&&util_contains(et,a)}var tt=["count","sum","distinct","valid","missing"],nt=toSet(["mean","average","median","q1","q3","min","max"]),__rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},rt="row",it="column",at="x",ot="y",st="x2",ut="y2",lt="radius",ct="theta",ft="theta2",dt="color",ht="fill",pt="stroke",gt="shape",mt="size",vt={theta:1,theta2:1,radius:1,radius2:1};function isPolarPositionChannel(a){return a in vt}var yt={longitude:1,longitude2:1,latitude:1,latitude2:1};var bt=Ae(yt),_t=Object.assign(Object.assign(Object.assign(Object.assign({},{x:1,y:1,x2:1,y2:1}),vt),yt),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function isColorChannel(a){return a===dt||a===ht||a===pt}var xt={row:1,column:1,facet:1},wt=Ae(xt),kt=Object.assign(Object.assign({},_t),xt),Ot=Ae(kt),St=(kt.order,kt.detail,kt.tooltip,__rest(kt,["order","detail","tooltip"])),Et=(St.row,St.column,St.facet,__rest(St,["row","column","facet"]));Ae(St),Ae(Et);function isChannel(a){return!!kt[a]}var Ct=[st,ut,"latitude2","longitude2",ft,"radius2"];function isSecondaryRangeChannel(a){return getMainRangeChannel(a)!==a}function getMainRangeChannel(a){switch(a){case st:return at;case ut:return ot;case"latitude2":return"latitude";case"longitude2":return"longitude";case ft:return ct;case"radius2":return lt}return a}function getVgPositionChannel(a){if(isPolarPositionChannel(a))switch(a){case ct:return"startAngle";case ft:return"endAngle";case lt:return"outerRadius";case"radius2":return"innerRadius"}return a}function getSecondaryRangeChannel(a){switch(a){case at:return st;case ot:return ut;case"latitude":return"latitude2";case"longitude":return"longitude2";case ct:return ft;case lt:return"radius2"}}function getSizeChannel(a){switch(a){case at:case st:return"width";case ot:case ut:return"height"}}Ae(_t),_t.x,_t.y,_t.x2,_t.y2,_t.latitude,_t.longitude,_t.latitude2,_t.longitude2,_t.theta,_t.theta2,_t.radius,_t.radius2;var Tt=__rest(_t,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),Dt=Ae(Tt),At={x:1,y:1},jt=Ae(At);function isXorY(a){return a in At}var Ft={theta:1,radius:1},Pt=Ae(Ft);function getPositionScaleChannel(a){return"width"===a?at:ot}Tt.text,Tt.tooltip,Tt.href,Tt.url,Tt.description,Tt.detail,Tt.key,Tt.order;var Rt=__rest(Tt,["text","tooltip","href","url","description","detail","key","order"]),Mt=Ae(Rt);var Lt=Object.assign(Object.assign(Object.assign({},At),Ft),Rt),It=Ae(Lt);function isScaleChannel(a){return!!Lt[a]}function supportMark(a,A){return function getSupportedMark(a){switch(a){case dt:case ht:case pt:case"description":case"detail":case"key":case"tooltip":case"href":case"order":case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":case"facet":case rt:case it:return Nt;case at:case ot:case"latitude":case"longitude":return Bt;case st:case ut:case"latitude2":case"longitude2":return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case mt:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case"strokeDash":return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case gt:return{point:"always",geoshape:"always"};case"text":return{text:"always"};case"angle":return{point:"always",square:"always",text:"always"};case"url":return{image:"always"};case ct:case lt:return{text:"always",arc:"always"};case ft:case"radius2":return{arc:"always"}}}(a)[A]}var Nt={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},Bt=__rest(Nt,["geoshape"]);function rangeType(a){switch(a){case at:case ot:case ct:case lt:case mt:case"angle":case"strokeWidth":case"opacity":case"fillOpacity":case"strokeOpacity":case st:case ut:case ft:case"radius2":return;case"facet":case rt:case it:case gt:case"strokeDash":case"text":case"tooltip":case"href":case"url":case"description":return"discrete";case dt:case ht:case pt:return"flexible";case"latitude":case"longitude":case"latitude2":case"longitude2":case"detail":case"key":case"order":return}}function binToString(a){return isBoolean(a)&&(a=normalizeBin(a,void 0)),"bin"+Ae(a).map((function(A){return isSelectionExtent(a[A])?varName("_".concat(A,"_").concat(Fe(a[A]))):varName("_".concat(A,"_").concat(a[A]))})).join("")}function isBinning(a){return!0===a||isBinParams(a)&&!a.binned}function isBinned(a){return"binned"===a||isBinParams(a)&&!0===a.binned}function isBinParams(a){return isObject(a)}function isSelectionExtent(a){return null===a||void 0===a?void 0:a.selection}function autoMaxBins(a){switch(a){case rt:case it:case mt:case dt:case ht:case pt:case"strokeWidth":case"opacity":case"fillOpacity":case"strokeOpacity":case gt:return 6;case"strokeDash":return 4;default:return 10}}var Ut=j(231),zt=j(3),qt=j(4);function invalidSpec(a){return"Invalid specification ".concat(JSON.stringify(a),'. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".')}var Wt='Autosize "fit" only works for single views and layered views.';function containerSizeNonSingle(a){return"".concat("width"==a?"Width":"Height",' "container" only works for single views and layered views.')}function containerSizeNotCompatibleWithAutosize(a){var A="width"==a?"x":"y";return"".concat("width"==a?"Width":"Height",' "container" only works well with autosize "fit" or "fit-').concat(A,'".')}function droppingFit(a){return a?'Dropping "fit-'.concat(a,'" because spec has discrete ').concat(getSizeChannel(a),"."):'Dropping "fit" because spec has discrete size.'}function unknownField(a){return"Unknown field for ".concat(a,". Cannot calculate view size.")}function cannotProjectOnChannelWithoutField(a){return'Cannot project a selection on encoding channel "'.concat(a,'", which has no field.')}function cannotProjectAggregate(a,A){return'Cannot project a selection on encoding channel "'.concat(a,'" as it uses an aggregate function ("').concat(A,'").')}function nearestNotSupportForContinuous(a){return'The "nearest" transform is not supported for '.concat(a," marks.")}function selectionNotSupported(a){return"Selection not supported for ".concat(a," yet.")}function selectionNotFound(a){return'Cannot find a selection named "'.concat(a,'".')}var Ht="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Gt="Legend bindings are only supported for selections over an individual field or encoding channel.";function noSameUnitLookup(a){return'Cannot define and lookup the "'.concat(a,'" selection in the same view. ')+"Try moving the lookup into a second, layered view?"}var Vt="The same selection must be used to override scale domains in a layered view.",Yt='Interval selections should be initialized using "x" and/or "y" keys.';function noSuchRepeatedValue(a){return'Unknown repeated value "'.concat(a,'".')}function columnsNotSupportByRowCol(a){return'The "columns" property cannot be used when "'.concat(a,'" has nested row/column.')}var $t="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function unrecognizedParse(a){return'Unrecognized parse "'.concat(a,'".')}function differentParse(a,A,j){return'An ancestor parsed field "'.concat(a,'" as ').concat(j," but a child wants to parse the field as ").concat(A,".")}var Kt="Attempt to add the same child twice.";function invalidTransformIgnored(a){return"Ignoring an invalid transform: ".concat(Te(a),".")}var Xt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function customFormatTypeNotAllowed(a){return"Config.customFormatTypes is not true, thus custom format type and format for channel ".concat(a," are dropped.")}function projectionOverridden(a){var A=a.parentProjection,j=a.projection;return"Layer's shared projection ".concat(Te(A)," is overridden by a child projection ").concat(Te(j),".")}var Jt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function primitiveChannelDef(a,A,j){return"Channel ".concat(a," is a ").concat(A,". Converted to {value: ").concat(Te(j),"}.")}function invalidFieldType(a){return'Invalid field type "'.concat(a,'".')}function invalidFieldTypeForCountAggregate(a,A){return'Invalid field type "'.concat(a,'" for aggregate: "').concat(A,'", using "quantitative" instead.')}function invalidAggregate(a){return'Invalid aggregation operator "'.concat(a,'".')}function missingFieldType(a,A){return'Missing type for channel "'.concat(a,'", using "').concat(A,'" instead.')}function droppingColor(a,A){var j=A.fill,P=A.stroke;return"Dropping color ".concat(a," as the plot also has ").concat(j&&P?"fill and stroke":j?"fill":"stroke",".")}function emptyFieldDef(a,A){return"Dropping ".concat(Te(a),' from channel "').concat(A,'" since it does not contain any data field, datum, value, or signal.')}function latLongDeprecated(a,A,j){return"".concat(a,"-encoding with type ").concat(A," is deprecated. Replacing with ").concat(j,"-encoding.")}var Qt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function incompatibleChannel(a,A,j){return"".concat(a,' dropped as it is incompatible with "').concat(A,'"').concat(j?" when ".concat(j):"",".")}function invalidEncodingChannel(a){return"".concat(a,"-encoding is dropped as ").concat(a," is not a valid encoding channel.")}function facetChannelShouldBeDiscrete(a){return"".concat(a," encoding should be discrete (ordinal / nominal / binned).")}function facetChannelDropped(a){return"Facet encoding dropped as ".concat(a.join(" and ")," ").concat(a.length>1?"are":"is"," also specified.")}function discreteChannelCannotEncode(a,A){return'Using discrete channel "'.concat(a,'" to encode "').concat(A,'" field can be misleading as it does not encode ').concat("ordinal"===A?"order":"magnitude",".")}function rangeMarkAlignmentCannotBeExpression(a){return"The ".concat(a," for range marks cannot be an expression")}function lineWithRange(a,A){return"Line mark is for continuous lines and thus cannot be used with ".concat(a&&A?"x2 and y2":a?"x2":"y2",". We will use the rule mark (line segments) instead.")}function orientOverridden(a,A){return'Specified orient "'.concat(a,'" overridden with "').concat(A,'".')}var Zt="Custom domain scale cannot be unioned with default field-based domain.",en='Scale\'s "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.';function cannotUseScalePropertyWithNonColor(a){return'Cannot use the scale property "'.concat(a,'" with non-color channel.')}function unaggregateDomainHasNoEffectForRawField(a){return"Using unaggregated domain with raw field has no effect (".concat(Te(a),").")}function unaggregateDomainWithNonSharedDomainOp(a){return'Unaggregated domain not applicable for "'.concat(a,'" since it produces values outside the origin domain of the source data.')}function unaggregatedDomainWithLogScale(a){return"Unaggregated domain is currently unsupported for log scale (".concat(Te(a),").")}function cannotApplySizeToNonOrientedMark(a){return'Cannot apply size to non-oriented mark "'.concat(a,'".')}function scaleTypeNotWorkWithChannel(a,A,j){return'Channel "'.concat(a,'" does not work with "').concat(A,'" scale. We are using "').concat(j,'" scale instead.')}function scaleTypeNotWorkWithFieldDef(a,A){return'FieldDef does not work with "'.concat(a,'" scale. We are using "').concat(A,'" scale instead.')}function scalePropertyNotWorkWithScaleType(a,A,j){return"".concat(j,"-scale's \"").concat(A,'" is dropped as it does not work with ').concat(a," scale.")}function scaleTypeNotWorkWithMark(a,A){return'Scale type "'.concat(A,'" does not work with mark "').concat(a,'".')}function stepDropped(a){return'The step for "'.concat(a,'" is dropped because the ').concat("width"===a?"x":"y"," is continuous.")}function mergeConflictingProperty(a,A,j,P){return"Conflicting ".concat(A.toString(),' property "').concat(a.toString(),'" (').concat(Te(j)," and ").concat(Te(P),"). Using ").concat(Te(j),".")}function mergeConflictingDomainProperty(a,A,j,P){return"Conflicting ".concat(A.toString(),' property "').concat(a.toString(),'" (').concat(Te(j)," and ").concat(Te(P),"). Using the union of the two domains.")}function independentScaleMeansIndependentGuide(a){return'Setting the scale to be independent for "'.concat(a,'" means we also have to set the guide (axis or legend) to be independent.')}function domainSortDropped(a){return"Dropping sort property ".concat(Te(a),' as unioned domains only support boolean or op "count", "min", and "max".')}var tn="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",nn="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",rn="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",an="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",sn="Invalid channel for axis.";function cannotStackRangedMark(a){return'Cannot stack "'.concat(a,'" if there is already "').concat(a,'2".')}function cannotStackNonLinearScale(a){return"Cannot stack non-linear scale (".concat(a,").")}function stackNonSummativeAggregate(a){return'Stacking is applied even though the aggregate function is non-summative ("'.concat(a,'").')}function invalidTimeUnit(a,A){return"Invalid ".concat(a,": ").concat(Te(A),".")}function droppedDay(a){return"Dropping day from datetime ".concat(Te(a)," as day cannot be combined with other units.")}function errorBarCenterAndExtentAreNotNeeded(a,A){return"".concat(A?"extent ":"").concat(A&&a?"and ":"").concat(a?"center ":"").concat(A&&a?"are ":"is ","not needed when data are aggregated.")}function errorBarCenterIsUsedWithWrongExtent(a,A,j){return"".concat(a," is not usually used with ").concat(A," for ").concat(j,".")}function errorBarContinuousAxisHasCustomizedAggregate(a,A){return"Continuous axis should not have customized aggregation function ".concat(a,"; ").concat(A," already agregates the axis.")}function errorBand1DNotSupport(a){return"1D error band does not support ".concat(a,".")}function channelRequiredForBinned(a){return"Channel ".concat(a,' is required for "binned" bin.')}function channelShouldNotBeUsedForBinned(a){return"Channel ".concat(a,' should not be used with "binned" bin.')}function domainRequiredForThresholdScale(a){return"Domain for ".concat(a," is required for threshold scale.")}var un=function logger(a,A){var j=a||0;return{level:function level(a){return arguments.length?(j=+a,this):j},error:function error(){return j>=1&&log$1(A||"error","ERROR",arguments),this},warn:function warn(){return j>=2&&log$1(A||"warn","WARN",arguments),this},info:function info(){return j>=3&&log$1(A||"log","INFO",arguments),this},debug:function debug(){return j>=4&&log$1(A||"log","DEBUG",arguments),this}}}(2),ln=un;function set(a){return ln=a}function log_reset(){return ln=un}function log_warn(){var a;(a=ln).warn.apply(a,arguments)}function isDateTime(a){if(a&&isObject(a)){var A,j=Object(pe.a)(mn);try{for(j.s();!(A=j.n()).done;){if(A.value in a)return!0}}catch(P){j.e(P)}finally{j.f()}}return!1}new WeakMap;var cn=["january","february","march","april","may","june","july","august","september","october","november","december"],dn=cn.map((function(a){return a.substr(0,3)})),hn=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],pn=hn.map((function(a){return a.substr(0,3)}));function dateTimeParts(a,A){var j=[];if(A&&void 0!==a.day&&Ae(a).length>1&&(log_warn(P.droppedDay(a)),delete(a=Se(a)).day),void 0!==a.year?j.push(a.year):j.push(2012),void 0!==a.month){var B=A?function normalizeMonth(a){if(isNumeric(a)&&(a=+a),isNumber(a))return a-1;var A=a.toLowerCase(),j=cn.indexOf(A);if(-1!==j)return j;var B=A.substr(0,3),q=dn.indexOf(B);if(-1!==q)return q;throw new Error(P.invalidTimeUnit("month",a))}(a.month):a.month;j.push(B)}else if(void 0!==a.quarter){var q=A?function normalizeQuarter(a){if(isNumeric(a)&&(a=+a),isNumber(a))return a>4&&log_warn(P.invalidTimeUnit("quarter",a)),a-1;throw new Error(P.invalidTimeUnit("quarter",a))}(a.quarter):a.quarter;j.push(isNumber(q)?3*q:q+"*3")}else j.push(0);if(void 0!==a.date)j.push(a.date);else if(void 0!==a.day){var ne=A?function normalizeDay(a){if(isNumeric(a)&&(a=+a),isNumber(a))return a%7;var A=a.toLowerCase(),j=hn.indexOf(A);if(-1!==j)return j;var B=A.substr(0,3),q=pn.indexOf(B);if(-1!==q)return q;throw new Error(P.invalidTimeUnit("day",a))}(a.day):a.day;j.push(isNumber(ne)?ne+1:ne+"+1")}else j.push(1);for(var ie=0,oe=["hours","minutes","seconds","milliseconds"];ie<oe.length;ie++){var se=a[oe[ie]];j.push("undefined"===typeof se?0:se)}return j}function dateTimeToExpr(a){var A=dateTimeParts(a,!0).join(", ");return a.utc?"utc(".concat(A,")"):"datetime(".concat(A,")")}function dateTimeExprToExpr(a){var A=dateTimeParts(a,!1).join(", ");return a.utc?"utc(".concat(A,")"):"datetime(".concat(A,")")}function dateTimeToTimestamp(a){var A=dateTimeParts(a,!0);return a.utc?+new Date(Date.UTC.apply(Date,Object(he.a)(A))):+Object(Ut.a)(Date,Object(he.a)(A))}var timeunit_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},gn={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},mn=Ae(gn);function isUTCTimeUnit(a){return a.startsWith("utc")}var vn={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function getTimeUnitParts(a){var A,j=[],P=Object(pe.a)(mn);try{for(P.s();!(A=P.n()).done;){var B=A.value;containsTimeUnit(a,B)&&j.push(B)}}catch(q){P.e(q)}finally{P.f()}return j}function containsTimeUnit(a,A){var j=a.indexOf(A);return!(j<0)&&(!(j>0&&"seconds"===A&&"i"===a.charAt(j-1))&&(!(a.length>j+3&&"day"===A&&"o"===a.charAt(j+3))&&!(j>0&&"year"===A&&"f"===a.charAt(j-1))))}function timeunit_fieldExpr(a,A){var j,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{end:!1},B=P.end,q=accessPathWithDatum(A),ne=isUTCTimeUnit(a)?"utc":"";function func(a){return"quarter"===a?"(".concat(ne,"quarter(").concat(q,")-1)"):"".concat(ne).concat(a,"(").concat(q,")")}var ie,oe={},se=Object(pe.a)(mn);try{for(se.s();!(ie=se.n()).done;){var le=ie.value;containsTimeUnit(a,le)&&(oe[le]=func(le),j=le)}}catch(he){se.e(he)}finally{se.f()}return B&&(oe[j]+="+1"),dateTimeExprToExpr(oe)}function timeUnitSpecifierExpression(a){if(a){var A=getTimeUnitParts(a);return"timeUnitSpecifier(".concat(ke()(A),", ").concat(ke()(vn),")")}}function normalizeTimeUnit(a){var A;if(a)return isString(a)?A={unit:a}:isObject(a)&&(A=Object.assign(Object.assign({},a),a.unit?{unit:a.unit}:{})),isUTCTimeUnit(A.unit)&&(A.utc=!0,A.unit=function getLocalTimeUnit(a){return a.substr(3)}(A.unit)),A}function timeUnitToString(a){var A=normalizeTimeUnit(a),j=A.utc,P=timeunit_rest(A,["utc"]);return P.unit?(j?"utc":"")+Ae(P).map((function(a){return varName("".concat("unit"===a?"":"_".concat(a,"_")).concat(P[a]))})).join(""):(j?"utc":"")+"timeunit"+Ae(P).map((function(a){return varName("_".concat(a,"_").concat(P[a]))})).join("")}function isSignalRef(a){return a&&!!a.signal}function isVgRangeStep(a){return!!a.step}function isDataRefDomain(a){return!oe(a)&&("field"in a&&"data"in a)}var yn=Ae({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),bn={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},_n=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function isFieldEqualPredicate(a){return a&&!!a.field&&void 0!==a.equal}function isFieldLTPredicate(a){return a&&!!a.field&&void 0!==a.lt}function isFieldLTEPredicate(a){return a&&!!a.field&&void 0!==a.lte}function isFieldGTPredicate(a){return a&&!!a.field&&void 0!==a.gt}function isFieldGTEPredicate(a){return a&&!!a.field&&void 0!==a.gte}function isFieldRangePredicate(a){if(a&&a.field){if(oe(a.range)&&2===a.range.length)return!0;if(isSignalRef(a.range))return!0}return!1}function isFieldOneOfPredicate(a){return a&&!!a.field&&(oe(a.oneOf)||oe(a.in))}function isFieldValidPredicate(a){return a&&!!a.field&&void 0!==a.valid}function isFieldPredicate(a){return isFieldOneOfPredicate(a)||isFieldEqualPredicate(a)||isFieldRangePredicate(a)||isFieldLTPredicate(a)||isFieldGTPredicate(a)||isFieldLTEPredicate(a)||isFieldGTEPredicate(a)}function predicateValueExpr(a,A){return valueExpr(a,{timeUnit:A,wrapTime:!0})}function predicateValuesExpr(a,A){return a.map((function(a){return predicateValueExpr(a,A)}))}function fieldFilterExpression(a){var A,j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],P=a.field,B=null===(A=normalizeTimeUnit(a.timeUnit))||void 0===A?void 0:A.unit,q=B?"time("+timeunit_fieldExpr(B,P)+")":channeldef_vgField(a,{expr:"datum"});if(isFieldEqualPredicate(a))return q+"==="+predicateValueExpr(a.equal,B);if(isFieldLTPredicate(a)){var ne=a.lt;return"".concat(q,"<").concat(predicateValueExpr(ne,B))}if(isFieldGTPredicate(a)){var ie=a.gt;return"".concat(q,">").concat(predicateValueExpr(ie,B))}if(isFieldLTEPredicate(a)){var oe=a.lte;return"".concat(q,"<=").concat(predicateValueExpr(oe,B))}if(isFieldGTEPredicate(a)){var se=a.gte;return"".concat(q,">=").concat(predicateValueExpr(se,B))}if(isFieldOneOfPredicate(a))return"indexof([".concat(predicateValuesExpr(a.oneOf,B).join(","),"], ").concat(q,") !== -1");if(isFieldValidPredicate(a))return fieldValidPredicate(q,a.valid);if(isFieldRangePredicate(a)){var le=a.range,he=isSignalRef(le)?{signal:"".concat(le.signal,"[0]")}:le[0],pe=isSignalRef(le)?{signal:"".concat(le.signal,"[1]")}:le[1];if(null!==he&&null!==pe&&j)return"inrange("+q+", ["+predicateValueExpr(he,B)+", "+predicateValueExpr(pe,B)+"])";var ge=[];return null!==he&&ge.push("".concat(q," >= ").concat(predicateValueExpr(he,B))),null!==pe&&ge.push("".concat(q," <= ").concat(predicateValueExpr(pe,B))),ge.length>0?ge.join(" && "):"true"}throw new Error("Invalid field predicate: ".concat(JSON.stringify(a)))}function fieldValidPredicate(a){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return A?"isValid(".concat(a,") && isFinite(+").concat(a,")"):"!isValid(".concat(a,") || !isFinite(+").concat(a,")")}function normalizePredicate(a){var A;return isFieldPredicate(a)&&a.timeUnit?Object.assign(Object.assign({},a),{timeUnit:null===(A=normalizeTimeUnit(a.timeUnit))||void 0===A?void 0:A.unit}):a}var xn={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};var wn=xn.quantitative,kn=xn.ordinal,On=xn.temporal,Sn=xn.nominal,En=xn.geojson;Ae(xn);function getFullName(a){if(a)switch(a=a.toLowerCase()){case"q":case wn:return"quantitative";case"t":case On:return"temporal";case"o":case kn:return"ordinal";case"n":case Sn:return"nominal";case En:return"geojson"}}var scale_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},Cn="linear",Tn="log",Dn="pow",An="sqrt",jn="symlog",Fn="time",Pn="utc",Rn="quantile",Mn="quantize",Ln="threshold",In="point",Nn="band",Bn={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};Ae(Bn);function scaleCompatible(a,A){var j=Bn[a],P=Bn[A];return j===P||"ordinal-position"===j&&"time"===P||"ordinal-position"===P&&"time"===j}var Un={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function scaleTypePrecedence(a){return Un[a]}var zn=["linear","log","pow","sqrt","symlog","time","utc"],qn=toSet(zn),Wn=toSet(["linear","log","pow","sqrt","symlog"]);var Hn=toSet(["quantile","quantize","threshold"]),Gn=toSet(zn.concat(["quantile","quantize","threshold","sequential","identity"])),Vn=toSet(["ordinal","bin-ordinal","point","band"]);function hasDiscreteDomain(a){return a in Vn}function hasContinuousDomain(a){return a in Gn}function isContinuousToContinuous(a){return a in qn}function isContinuousToDiscrete(a){return a in Hn}function isSelectionDomain(a){return null===a||void 0===a?void 0:a.selection}var Yn={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},$n=(Ae(Yn),scale_rest(Yn,["type","domain","range","rangeMax","rangeMin","scheme"])),Kn=Ae($n);function scaleTypeSupportProperty(a,A){switch(A){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!util_contains(["point","band","identity"],a);case"bins":return!util_contains(["point","band","identity","ordinal"],a);case"round":return isContinuousToContinuous(a)||"band"===a||"point"===a;case"padding":case"rangeMin":case"rangeMax":return isContinuousToContinuous(a)||util_contains(["point","band"],a);case"paddingOuter":case"align":return util_contains(["point","band"],a);case"paddingInner":return"band"===a;case"domainMax":case"domainMid":case"domainMin":case"clamp":return isContinuousToContinuous(a);case"nice":return isContinuousToContinuous(a)||"quantize"===a||"threshold"===a;case"exponent":return"pow"===a;case"base":return"log"===a;case"constant":return"symlog"===a;case"zero":return hasContinuousDomain(a)&&!util_contains(["log","time","utc","threshold","quantile"],a)}}function channelScalePropertyIncompatability(a,A){switch(A){case"interpolate":case"scheme":case"domainMid":return isColorChannel(a)?void 0:P.cannotUseScalePropertyWithNonColor(a);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function isExprRef(a){return a&&!!a.expr}function replaceExprRefInIndex(a){var A,j=Ae(a||{}),P={},B=Object(pe.a)(j);try{for(B.s();!(A=B.n()).done;){var q=A.value;P[q]=signalRefOrValue(a[q])}}catch(ne){B.e(ne)}finally{B.f()}return P}var Xn={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Jn=Xn.arc,Qn=Xn.area,Zn=Xn.bar,er=Xn.image,nr=Xn.line,rr=Xn.point,ar=Xn.rect,sr=Xn.rule,ur=Xn.text,lr=Xn.tick,fr=Xn.trail,dr=Xn.circle,hr=Xn.square,pr=Xn.geoshape;function isPathMark(a){return util_contains(["line","area","trail"],a)}function isRectBasedMark(a){return util_contains(["rect","bar","image","arc"],a)}var gr=Ae(Xn);function isMarkDef(a){return a.type}toSet(gr);var mr=[].concat(["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],["fill","fillOpacity"]),vr=Ae({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1}),yr=Ae({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1}),_r={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},xr={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},wr={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function midPointRefWithPositionInvalidTest(a){var A=a.channel,j=a.channelDef,P=a.markDef,B=a.scale,q=a.config,ne=midPoint(a);return isFieldDef(j)&&!isCountingAggregateOp(j.aggregate)&&B&&isContinuousToContinuous(B.get("type"))&&!1===B.get("zero")?wrapPositionInvalidTest({fieldDef:j,channel:A,markDef:P,ref:ne,config:q}):ne}function wrapPositionInvalidTest(a){var A=a.fieldDef,j=a.channel,P=a.markDef,B=a.ref,q=a.config;return isPathMark(P.type)||null===getMarkPropOrConfig("invalid",P,q)?B:[fieldInvalidTestValueRef(A,j),B]}function fieldInvalidTestValueRef(a,A){var j=fieldInvalidPredicate(a,!0),P="y"===getMainRangeChannel(A)?{field:{group:"height"}}:{value:0};return Object.assign({test:j},P)}function fieldInvalidPredicate(a){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return fieldValidPredicate(isString(a)?a:channeldef_vgField(a,{expr:"datum"}),!A)}function valueRefForFieldOrDatumDef(a,A,j,P){var B={};if(A&&(B.scale=A),isDatumDef(a)){var q=a.datum;isDateTime(q)?B.signal=dateTimeToExpr(q):isSignalRef(q)?B.signal=q.signal:isExprRef(q)?B.signal=q.expr:B.value=q}else B.field=channeldef_vgField(a,j);if(P){var ne=P.offset,ie=P.band;ne&&(B.offset=ne),ie&&(B.band=ie)}return B}function interpolatedSignalRef(a){var A=a.scaleName,j=a.fieldOrDatumDef,P=a.fieldOrDatumDef2,B=a.offset,q=a.startSuffix,ne=a.band,ie=void 0===ne?.5:ne,oe=0<ie&&ie<1?"datum":void 0,se=channeldef_vgField(j,{expr:oe,suffix:q}),le=void 0!==P?channeldef_vgField(P,{expr:oe}):channeldef_vgField(j,{suffix:"end",expr:oe}),he={};if(0===ie||1===ie){he.scale=A;var pe=0===ie?se:le;he.field=pe}else{var ge="".concat(ie," * ").concat(se," + ").concat(1-ie," * ").concat(le);he.signal='scale("'.concat(A,'", ').concat(ge,")")}return B&&(he.offset=B),he}function midPoint(a){var A,j=a.channel,B=a.channelDef,q=a.channel2Def,ne=a.markDef,ie=a.config,oe=a.scaleName,se=a.scale,le=a.stack,he=a.offset,pe=a.defaultRef,ge=a.band;if(B){if(isFieldOrDatumDef(B)){if(isTypedFieldDef(B)){ge=null!==ge&&void 0!==ge?ge:getBand({channel:j,fieldDef:B,fieldDef2:q,markDef:ne,stack:le,config:ie,isMidPoint:!0});var me=B.bin,ve=B.timeUnit,ye=B.type;if(isBinning(me)||ge&&ve&&ye===On)return le&&le.impute?valueRefForFieldOrDatumDef(B,oe,{binSuffix:"mid"},{offset:he}):ge?interpolatedSignalRef({scaleName:oe,fieldOrDatumDef:B,band:ge,offset:he}):valueRefForFieldOrDatumDef(B,oe,binRequiresRange(B,j)?{binSuffix:"range"}:{},{offset:he});if(isBinned(me)){if(isFieldDef(q))return interpolatedSignalRef({scaleName:oe,fieldOrDatumDef:B,fieldOrDatumDef2:q,band:ge,offset:he});var _e=j===at?st:ut;log_warn(P.channelRequiredForBinned(_e))}}var we=null===se||void 0===se?void 0:se.get("type");return valueRefForFieldOrDatumDef(B,oe,hasDiscreteDomain(we)?{binSuffix:"range"}:{},{offset:he,band:"band"===we?null!==(A=null!==ge&&void 0!==ge?ge:B.band)&&void 0!==A?A:.5:void 0})}if(isValueDef(B)){var ke=B.value,Oe=he?{offset:he}:{};return Object.assign(Object.assign({},widthHeightValueOrSignalRef(j,ke)),Oe)}}return isFunction(pe)&&(pe=pe()),pe?Object.assign(Object.assign({},pe),he?{offset:he}:{}):pe}function widthHeightValueOrSignalRef(a,A){return util_contains(["x","x2"],a)&&"width"===A?{field:{group:"width"}}:util_contains(["y","y2"],a)&&"height"===A?{field:{group:"height"}}:signalOrValueRef(A)}function isCustomFormatType(a){return a&&"number"!==a&&"time"!==a}function customFormatExpr(a,A,j){return"".concat(a,"(").concat(A).concat(j?", ".concat(JSON.stringify(j)):"",")")}function formatSignalRef(a){var A,j,P=a.fieldOrDatumDef,B=a.format,q=a.formatType,ne=a.expr,ie=a.normalizeStack,oe=a.config;if(isCustomFormatType(q))return formatCustomType({fieldOrDatumDef:P,format:B,formatType:q,expr:ne,config:oe});var se=fieldToFormat(P,ne,ie);if(isFieldOrDatumDefForTimeFormat(P)){var le=function timeFormatExpression(a,A,j,P,B){return!A||j?(j=isString(j)?j:P,"".concat(B?"utc":"time","Format(").concat(a,", '").concat(j,"')")):function formatExpression(a,A,j){if(a){var P=timeUnitSpecifierExpression(a),B=j||isUTCTimeUnit(a);return"".concat(B?"utc":"time","Format(").concat(A,", ").concat(P,")")}}(A,a,B)}(se,isFieldDef(P)?null===(A=normalizeTimeUnit(P.timeUnit))||void 0===A?void 0:A.unit:void 0,B,oe.timeFormat,isScaleFieldDef(P)&&(null===(j=P.scale)||void 0===j?void 0:j.type)===Pn);return le?{signal:le}:void 0}return B=numberFormat(channelDefType(P),B,oe),isFieldDef(P)&&isBinning(P.bin)?{signal:binFormatExpression(se,channeldef_vgField(P,{expr:ne,binSuffix:"end"}),B,q,oe)}:B||"quantitative"===channelDefType(P)?{signal:"".concat(formatExpr(se,B))}:{signal:"isValid(".concat(se,") ? ").concat(se,' : ""+').concat(se)}}function fieldToFormat(a,A,j){return isFieldDef(a)?j?"".concat(channeldef_vgField(a,{expr:A,suffix:"end"}),"-").concat(channeldef_vgField(a,{expr:A,suffix:"start"})):channeldef_vgField(a,{expr:A}):function datumDefToExpr(a){var A=a.datum;return isDateTime(A)?dateTimeToExpr(A):"".concat(JSON.stringify(A))}(a)}function formatCustomType(a){var A=a.fieldOrDatumDef,j=a.format,P=a.formatType,B=a.expr,q=a.normalizeStack,ne=a.config,ie=a.field;return ie=null!==ie&&void 0!==ie?ie:fieldToFormat(A,B,q),isFieldDef(A)&&isBinning(A.bin)?{signal:binFormatExpression(ie,channeldef_vgField(A,{expr:B,binSuffix:"end"}),j,P,ne)}:{signal:customFormatExpr(P,ie,j)}}function guideFormat(a,A,j,P,B,q){var ne;if(!isCustomFormatType(P))return isFieldOrDatumDefForTimeFormat(a)?function timeFormat(a,A,j,P){if(a)return a;if(A)return{signal:timeUnitSpecifierExpression(A)};return P?void 0:j.timeFormat}(j,isFieldDef(a)?null===(ne=normalizeTimeUnit(a.timeUnit))||void 0===ne?void 0:ne.unit:void 0,B,q):numberFormat(A,j,B)}function guideFormatType(a,A,j){return a&&(isSignalRef(a)||"number"===a||"time"===a)?a:isFieldOrDatumDefForTimeFormat(A)&&"time"!==j&&"utc"!==j?"time":void 0}function numberFormat(a,A,j){return isString(A)?A:a===wn?j.numberFormat:void 0}function formatExpr(a,A){return"format(".concat(a,', "').concat(A||"",'")')}function binNumberFormatExpr(a,A,j,P){var B;return isCustomFormatType(j)?customFormatExpr(j,a,A):formatExpr(a,null!==(B=isString(A)?A:void 0)&&void 0!==B?B:P.numberFormat)}function binFormatExpression(a,A,j,P,B){var q=binNumberFormatExpr(a,j,P,B),ne=binNumberFormatExpr(A,j,P,B);return"".concat(fieldValidPredicate(a,!1),' ? "null" : ').concat(q,' + "').concat(" \u2013 ",'" + ').concat(ne)}var kr={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function isSortByChannel(a){return a in kr}function isSortByEncoding(a){return!!a&&!!a.encoding}function isSortField(a){return!!a&&("count"===a.op||!!a.field)}function isSortArray(a){return!!a&&oe(a)}function isFacetMapping(a){return"row"in a||"column"in a}function isFacetFieldDef(a){return!!a&&"header"in a}function isFacetSpec(a){return"facet"in a}var channeldef_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function toFieldDefBase(a){var A=a.field,j=a.timeUnit,P=a.bin,B=a.aggregate;return Object.assign(Object.assign(Object.assign(Object.assign({},j?{timeUnit:j}:{}),P?{bin:P}:{}),B?{aggregate:B}:{}),{field:A})}function isSortableFieldDef(a){return"sort"in a}function getBand(a){var A=a.channel,j=a.fieldDef,P=a.fieldDef2,B=a.markDef,q=a.stack,ne=a.config,ie=a.isMidPoint;if(isFieldOrDatumDef(j)&&void 0!==j.band)return j.band;if(isFieldDef(j)){var oe=j.timeUnit,se=j.bin;if(oe&&!P)return ie?getMarkConfig("timeUnitBandPosition",B,ne):isRectBasedMark(B.type)?getMarkConfig("timeUnitBand",B,ne):0;if(isBinning(se))return isRectBasedMark(B.type)&&!ie?1:.5}return(null===q||void 0===q?void 0:q.fieldChannel)===A&&ie?.5:void 0}function hasBand(a,A,j,P,B,q){return!!(isBinning(A.bin)||A.timeUnit&&isTypedFieldDef(A)&&"temporal"===A.type)&&!!getBand({channel:a,fieldDef:A,fieldDef2:j,stack:P,markDef:B,config:q})}function isConditionalDef(a){return!!a&&"condition"in a}function hasConditionalFieldDef(a){var A=a&&a.condition;return!!A&&!oe(A)&&isFieldDef(A)}function hasConditionalFieldOrDatumDef(a){var A=a&&a.condition;return!!A&&!oe(A)&&isFieldOrDatumDef(A)}function isFieldDef(a){return!!a&&(!!a.field||"count"===a.aggregate)}function channelDefType(a){return a&&a.type}function isDatumDef(a){return!!a&&"datum"in a}function isContinuousFieldOrDatumDef(a){return isTypedFieldDef(a)&&isContinuous(a)||isNumericDataDef(a)}function isNumericDataDef(a){return isDatumDef(a)&&isNumber(a.datum)}function isFieldOrDatumDef(a){return isFieldDef(a)||isDatumDef(a)}function isTypedFieldDef(a){return!!a&&("field"in a||"count"===a.aggregate)&&"type"in a}function isValueDef(a){return a&&"value"in a&&"value"in a}function isScaleFieldDef(a){return!!a&&("scale"in a||"sort"in a)}function isPositionFieldOrDatumDef(a){return a&&("axis"in a||"stack"in a||"impute"in a)}function isMarkPropFieldOrDatumDef(a){return!!a&&"legend"in a}function isStringFieldOrDatumDef(a){return!!a&&("format"in a||"formatType"in a)}function toStringFieldDef(a){return omit(a,["legend","axis","header","scale"])}function isOpFieldDef(a){return"op"in a}function channeldef_vgField(a){var A,j,P,B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},q=a.field,ne=B.prefix,ie=B.suffix,oe="";if(isCount(a))q=internalField("count");else{var se;if(!B.nofn)if(isOpFieldDef(a))se=a.op;else{var le=a.bin,he=a.aggregate,pe=a.timeUnit;isBinning(le)?(se=binToString(le),ie=(null!==(A=B.binSuffix)&&void 0!==A?A:"")+(null!==(j=B.suffix)&&void 0!==j?j:"")):he?isArgmaxDef(he)?(oe='["'.concat(q,'"]'),q="argmax_".concat(he.argmax)):isArgminDef(he)?(oe='["'.concat(q,'"]'),q="argmin_".concat(he.argmin)):se=String(he):pe&&(se=timeUnitToString(pe),ie=(!util_contains(["range","mid"],B.binSuffix)&&B.binSuffix||"")+(null!==(P=B.suffix)&&void 0!==P?P:""))}se&&(q=q?"".concat(se,"_").concat(q):se)}return ie&&(q="".concat(q,"_").concat(ie)),ne&&(q="".concat(ne,"_").concat(q)),B.forAs?removePathFromField(q):B.expr?flatAccessWithDatum(q,B.expr)+oe:replacePathInField(q)+oe}function isDiscrete(a){switch(a.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return isFieldDef(a)&&!!a.bin;case"temporal":return!1}throw new Error(P.invalidFieldType(a.type))}function isContinuous(a){return!isDiscrete(a)}function isCount(a){return"count"===a.aggregate}var Or=function defaultTitleFormatter(a,A){switch(A.fieldTitle){case"plain":return a.field;case"functional":return function functionalTitleFormatter(a){var A=a.aggregate,j=a.bin,P=a.timeUnit,B=a.field;if(isArgmaxDef(A))return"".concat(B," for argmax(").concat(A.argmax,")");if(isArgminDef(A))return"".concat(B," for argmin(").concat(A.argmin,")");var q=normalizeTimeUnit(P),ne=A||(null===q||void 0===q?void 0:q.unit)||(null===q||void 0===q?void 0:q.maxbins)&&"timeunit"||isBinning(j)&&"bin";return ne?ne.toUpperCase()+"("+B+")":B}(a);default:return function verbalTitleFormatter(a,A){var j,P=a.field,B=a.bin,q=a.timeUnit,ne=a.aggregate;if("count"===ne)return A.countTitle;if(isBinning(B))return"".concat(P," (binned)");if(q){var ie=null===(j=normalizeTimeUnit(q))||void 0===j?void 0:j.unit;if(ie)return"".concat(P," (").concat(getTimeUnitParts(ie).join("-"),")")}else if(ne)return isArgmaxDef(ne)?"".concat(P," for max ").concat(ne.argmax):isArgminDef(ne)?"".concat(P," for min ").concat(ne.argmin):"".concat(titleCase(ne)," of ").concat(P);return P}(a,A)}},Sr=Or;function setTitleFormatter(a){Sr=a}function resetTitleFormatter(){setTitleFormatter(Or)}function channeldef_title(a,A,j){var P,B,q=j.allowDisabling,ne=j.includeDefault,ie=void 0===ne||ne,oe=null===(P=getGuide(a))||void 0===P?void 0:P.title;if(!isFieldDef(a))return oe;var se=a,le=ie?defaultTitle(se,A):void 0;return q?getFirstDefined(oe,se.title,le):null!==(B=null!==oe&&void 0!==oe?oe:se.title)&&void 0!==B?B:le}function getGuide(a){return isPositionFieldOrDatumDef(a)&&a.axis?a.axis:isMarkPropFieldOrDatumDef(a)&&a.legend?a.legend:isFacetFieldDef(a)&&a.header?a.header:void 0}function defaultTitle(a,A){return Sr(a,A)}function getFormatMixins(a){var A;if(isStringFieldOrDatumDef(a))return{format:a.format,formatType:a.formatType};var j=null!==(A=getGuide(a))&&void 0!==A?A:{};return{format:j.format,formatType:j.formatType}}function defaultType(a,A){var j;switch(A){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(isSortableFieldDef(a)&&oe(a.sort))return"ordinal";var P=a.aggregate,B=a.bin;if(a.timeUnit)return"temporal";if(B||P&&!isArgmaxDef(P)&&!isArgminDef(P))return"quantitative";if(isScaleFieldDef(a)&&(null===(j=a.scale)||void 0===j?void 0:j.type))switch(Bn[a.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function getFieldDef(a){return isFieldDef(a)?a:hasConditionalFieldDef(a)?a.condition:void 0}function getFieldOrDatumDef(a){return isFieldOrDatumDef(a)?a:hasConditionalFieldOrDatumDef(a)?a.condition:void 0}function initChannelDef(a,A,j){var B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(isString(a)||isNumber(a)||isBoolean(a)){var q=isString(a)?"string":isNumber(a)?"number":"boolean";return log_warn(P.primitiveChannelDef(A,q,a)),{value:a}}return isFieldOrDatumDef(a)?initFieldOrDatumDef(a,A,j,B):hasConditionalFieldOrDatumDef(a)?Object.assign(Object.assign({},a),{condition:initFieldOrDatumDef(a.condition,A,j,B)}):a}function initFieldOrDatumDef(a,A,j,B){if(isStringFieldOrDatumDef(a)){a.format;var q=a.formatType,ne=channeldef_rest(a,["format","formatType"]);if(isCustomFormatType(q)&&!j.customFormatTypes)return log_warn(P.customFormatTypeNotAllowed(A)),initFieldOrDatumDef(ne,A,j,B)}else{var ie=isPositionFieldOrDatumDef(a)?"axis":isMarkPropFieldOrDatumDef(a)?"legend":isFacetFieldDef(a)?"header":null;if(ie&&a[ie]){var oe=a[ie],se=(oe.format,oe.formatType),le=channeldef_rest(oe,["format","formatType"]);if(isCustomFormatType(se)&&!j.customFormatTypes)return log_warn(P.customFormatTypeNotAllowed(A)),initFieldOrDatumDef(Object.assign(Object.assign({},a),Object(Ye.a)({},ie,le)),A,j,B)}}return isFieldDef(a)?initFieldDef(a,A,B):function initDatumDef(a){var A=a.type;if(A)return a;var j=a.datum;return A=isNumber(j)?"quantitative":isString(j)?"nominal":isDateTime(j)?"temporal":void 0,Object.assign(Object.assign({},a),{type:A})}(a)}function initFieldDef(a,A){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},B=j.compositeMark,q=void 0!==B&&B,ne=a.aggregate,ie=a.timeUnit,oe=a.bin,se=a.field,le=Object.assign({},a);if(q||!ne||isAggregateOp(ne)||isArgmaxDef(ne)||isArgminDef(ne)||(log_warn(P.invalidAggregate(ne)),delete le.aggregate),ie&&(le.timeUnit=normalizeTimeUnit(ie)),se&&(le.field="".concat(se)),isBinning(oe)&&(le.bin=normalizeBin(oe,A)),isBinned(oe)&&!isXorY(A)&&log_warn(P.channelShouldNotBeUsedForBinned(A)),isTypedFieldDef(le)){var he=le.type,pe=getFullName(he);he!==pe&&(le.type=pe),"quantitative"!==he&&isCountingAggregateOp(ne)&&(log_warn(P.invalidFieldTypeForCountAggregate(he,ne)),le.type="quantitative")}else if(!isSecondaryRangeChannel(A)){var ge=defaultType(le,A);le.type=ge}if(isTypedFieldDef(le)){var me=channelCompatibility(le,A)||{},ve=me.compatible,ye=me.warning;!1===ve&&log_warn(ye)}if(isSortableFieldDef(le)&&isString(le.sort)){var _e=le.sort;if(isSortByChannel(_e))return Object.assign(Object.assign({},le),{sort:{encoding:_e}});var we=_e.substr(1);if("-"===_e.charAt(0)&&isSortByChannel(we))return Object.assign(Object.assign({},le),{sort:{encoding:we,order:"descending"}})}if(isFacetFieldDef(le)){var ke=le.header,Oe=ke.orient,Se=channeldef_rest(ke,["orient"]);if(Oe)return Object.assign(Object.assign({},le),{header:Object.assign(Object.assign({},Se),{labelOrient:ke.labelOrient||Oe,titleOrient:ke.titleOrient||Oe})})}return le}function normalizeBin(a,A){return isBoolean(a)?{maxbins:autoMaxBins(A)}:"binned"===a?{binned:!0}:a.maxbins||a.step?a:Object.assign(Object.assign({},a),{maxbins:autoMaxBins(A)})}var Er={compatible:!0};function channelCompatibility(a,A){var j=a.type;if("geojson"===j&&"shape"!==A)return{compatible:!1,warning:"Channel ".concat(A," should not be used with a geojson data.")};switch(A){case rt:case it:case"facet":return isContinuous(a)?{compatible:!1,warning:P.facetChannelShouldBeDiscrete(A)}:Er;case at:case ot:case dt:case ht:case pt:case"text":case"detail":case"key":case"tooltip":case"href":case"url":case"angle":case ct:case lt:case"description":return Er;case"longitude":case"longitude2":case"latitude":case"latitude2":return j!==wn?{compatible:!1,warning:"Channel ".concat(A," should be used with a quantitative field only, not ").concat(a.type," field.")}:Er;case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":case mt:case ft:case"radius2":case st:case ut:return"nominal"!==j||a.sort?Er:{compatible:!1,warning:"Channel ".concat(A," should not be used with an unsorted discrete field.")};case"strokeDash":return util_contains(["ordinal","nominal"],a.type)?Er:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case gt:return util_contains(["ordinal","nominal","geojson"],a.type)?Er:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case"order":return"nominal"!==a.type||"sort"in a?Er:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}function isFieldOrDatumDefForTimeFormat(a){var A=getFormatMixins(a).formatType;return"time"===A||!A&&function isTimeFieldDef(a){return a&&("temporal"===a.type||isFieldDef(a)&&!!a.timeUnit)}(a)}function valueExpr(a,A){var j,P,B=A.timeUnit,q=A.type,ne=A.wrapTime,ie=A.undefinedIfExprNotRequired,oe=B&&(null===(j=normalizeTimeUnit(B))||void 0===j?void 0:j.unit),se=oe||"temporal"===q;return isExprRef(a)?P=a.expr:isSignalRef(a)?P=a.signal:isDateTime(a)?(se=!0,P=dateTimeToExpr(a)):(isString(a)||isNumber(a))&&se&&(P="datetime(".concat(JSON.stringify(a),")"),function isLocalSingleTimeUnit(a){return!!gn[a]}(oe)&&(isNumber(a)&&a<1e4||isString(a)&&isNaN(Date.parse(a)))&&(P=dateTimeToExpr(Object(Ye.a)({},oe,a)))),P?ne&&se?"time(".concat(P,")"):P:ie?void 0:JSON.stringify(a)}function valueArray(a,A){var j=a.type;return A.map((function(A){var P=valueExpr(A,{timeUnit:isFieldDef(a)?a.timeUnit:void 0,type:j,undefinedIfExprNotRequired:!0});return void 0!==P?{signal:P}:A}))}function binRequiresRange(a,A){return isBinning(a.bin)?isScaleChannel(A)&&util_contains(["ordinal","nominal"],a.type):(console.warn("Only call this method for binned field defs."),!1)}var title_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function extractTitleConfig(a){var A=a.anchor,j=a.frame,P=a.offset,B=a.orient,q=a.color,ne=a.subtitleColor,ie=a.subtitleFont,oe=a.subtitleFontSize,se=a.subtitleFontStyle,le=a.subtitleFontWeight,he=a.subtitleLineHeight,pe=a.subtitlePadding,ge=title_rest(a,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),me=Object.assign(Object.assign({},ge),q?{fill:q}:{}),ve=Object.assign(Object.assign(Object.assign(Object.assign({},A?{anchor:A}:{}),j?{frame:j}:{}),P?{offset:P}:{}),B?{orient:B}:{}),ye=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ne?{subtitleColor:ne}:{}),ie?{subtitleFont:ie}:{}),oe?{subtitleFontSize:oe}:{}),se?{subtitleFontStyle:se}:{}),le?{subtitleFontWeight:le}:{}),he?{subtitleLineHeight:he}:{}),pe?{subtitlePadding:pe}:{});return{titleMarkConfig:me,subtitleMarkConfig:pick(me,["align","baseline","dx","dy","limit"]),nonMark:ve,subtitle:ye}}function isText(a){return isString(a)||oe(a)&&isString(a[0])}var common_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function signalOrValueRefWithCondition(a){var A=oe(a.condition)?a.condition.map(conditionalSignalRefOrValue):conditionalSignalRefOrValue(a.condition);return Object.assign(Object.assign({},signalRefOrValue(a)),{condition:A})}function signalRefOrValue(a){if(isExprRef(a)){var A=a.expr,j=common_rest(a,["expr"]);return Object.assign({signal:A},j)}return a}function conditionalSignalRefOrValue(a){if(isExprRef(a)){var A=a.expr,j=common_rest(a,["expr"]);return Object.assign({signal:A},j)}return a}function signalOrValueRef(a){if(isExprRef(a)){var A=a.expr,j=common_rest(a,["expr"]);return Object.assign({signal:A},j)}return isSignalRef(a)?a:void 0!==a?{value:a}:void 0}function exprFromValueOrSignalRef(a){return isSignalRef(a)?a.signal:$(a.value)}function signalOrStringValue(a){return isSignalRef(a)?a.signal:null==a?null:$(a)}function getStyles(a){var A;return[].concat(a.type,null!==(A=a.style)&&void 0!==A?A:[])}function getMarkPropOrConfig(a,A,j){var P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},B=P.vgChannel,q=P.ignoreVgConfig;return B&&void 0!==A[B]?A[B]:void 0!==A[a]?A[a]:!q||B&&B!==a?getMarkConfig(a,A,j,P):void 0}function getMarkConfig(a,A,j){var P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},B=P.vgChannel;return getFirstDefined(B?getMarkStyleConfig(a,A,j.style):void 0,getMarkStyleConfig(a,A,j.style),B?j[A.type][B]:void 0,j[A.type][a],B?j.mark[B]:j.mark[a])}function getMarkStyleConfig(a,A,j){return getStyleConfig(a,getStyles(A),j)}function getStyleConfig(a,A,j){var P;A=array(A);var B,q=Object(pe.a)(A);try{for(q.s();!(B=q.n()).done;){var ne=j[B.value];ne&&void 0!==ne[a]&&(P=ne[a])}}catch(ie){q.e(ie)}finally{q.f()}return P}function sortParams(a,A){return array(a).reduce((function(a,j){var P;return a.field.push(channeldef_vgField(j,A)),a.order.push(null!==(P=j.sort)&&void 0!==P?P:"ascending"),a}),{field:[],order:[]})}function mergeTitleFieldDefs(a,A){var j=Object(he.a)(a);return A.forEach((function(a){var A,P=Object(pe.a)(j);try{for(P.s();!(A=P.n()).done;){var B=A.value;if(Oe(B,a))return}}catch(q){P.e(q)}finally{P.f()}j.push(a)})),j}function mergeTitle(a,A){return Oe(a,A)||!A?a:a?[].concat(Object(he.a)(array(a)),Object(he.a)(array(A))).join(", "):A}function mergeTitleComponent(a,A){var j=a.value,P=A.value;if(null==j||null===P)return{explicit:a.explicit,value:null};if((isText(j)||isSignalRef(j))&&(isText(P)||isSignalRef(P)))return{explicit:a.explicit,value:mergeTitle(j,P)};if(isText(j)||isSignalRef(j))return{explicit:a.explicit,value:j};if(isText(P)||isSignalRef(P))return{explicit:a.explicit,value:P};if(!isText(j)&&!isSignalRef(j)&&!isText(P)&&!isSignalRef(P))return{explicit:a.explicit,value:mergeTitleFieldDefs(j,P)};throw new Error("It should never reach here")}function isUnitSpec(a){return"mark"in a}var Cr=function(){function CompositeMarkNormalizer(a,A){Object(zt.a)(this,CompositeMarkNormalizer),this.name=a,this.run=A}return Object(qt.a)(CompositeMarkNormalizer,[{key:"hasMatchingType",value:function hasMatchingType(a){return!!isUnitSpec(a)&&function getMarkType(a){return isMarkDef(a)?a.type:a}(a.mark)===this.name}}]),CompositeMarkNormalizer}(),encoding_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function encoding_channelHasField(a,A){var j=a&&a[A];return!!j&&(oe(j)?some(j,(function(a){return!!a.field})):isFieldDef(j)||hasConditionalFieldDef(j))}function encoding_isAggregate(a){return some(Ot,(function(A){if(encoding_channelHasField(a,A)){var j=a[A];if(oe(j))return some(j,(function(a){return!!a.aggregate}));var P=getFieldDef(j);return P&&!!P.aggregate}return!1}))}function extractTransformsFromEncoding(a,A){var j=[],P=[],B=[],q=[],ne={};return forEach(a,(function(ie,oe){if(isFieldDef(ie)){var se=ie.field,le=ie.aggregate,he=ie.bin,pe=ie.timeUnit,ge=encoding_rest(ie,["field","aggregate","bin","timeUnit"]);if(le||pe||he){var me,ve=getGuide(ie),ye=ve&&ve.title,_e=channeldef_vgField(ie,{forAs:!0}),we=Object.assign(Object.assign(Object.assign({},ye?[]:{title:channeldef_title(ie,A,{allowDisabling:!0})}),ge),{field:_e});if(le){if(isArgmaxDef(le)?(me="argmax",_e=channeldef_vgField({op:"argmax",field:le.argmax},{forAs:!0}),we.field="".concat(_e,".").concat(se)):isArgminDef(le)?(me="argmin",_e=channeldef_vgField({op:"argmin",field:le.argmin},{forAs:!0}),we.field="".concat(_e,".").concat(se)):"boxplot"!==le&&"errorbar"!==le&&"errorband"!==le&&(me=le),me){var ke={op:me,as:_e};se&&(ke.field=se),q.push(ke)}}else if(j.push(_e),isTypedFieldDef(ie)&&isBinning(he)){if(P.push({bin:he,field:se,as:_e}),j.push(channeldef_vgField(ie,{binSuffix:"end"})),binRequiresRange(ie,oe)&&j.push(channeldef_vgField(ie,{binSuffix:"range"})),isXorY(oe)){var Oe={field:_e+"_end"};ne[oe+"2"]=Oe}we.bin="binned",isSecondaryRangeChannel(oe)||(we.type=wn)}else if(pe){B.push({timeUnit:pe,field:se,as:_e});var Se=isTypedFieldDef(ie)&&ie.type!==On&&"time";Se&&("text"===oe||"tooltip"===oe?we.formatType=Se:!function isNonPositionScaleChannel(a){return!!Tt[a]}(oe)?isXorY(oe)&&(we.axis=Object.assign({formatType:Se},we.axis)):we.legend=Object.assign({formatType:Se},we.legend))}ne[oe]=we}else j.push(se),ne[oe]=a[oe]}else ne[oe]=a[oe]})),{bins:P,timeUnits:B,aggregate:q,groupby:j,encoding:ne}}function initEncoding(a,A,j,B){return Ae(a).reduce((function(q,ne){if(!isChannel(ne))return log_warn(P.invalidEncodingChannel(ne)),q;var ie=a[ne];if("angle"!==ne||"arc"!==A||a.theta||(log_warn(P.REPLACE_ANGLE_WITH_THETA),ne=ct),!function markChannelCompatible(a,A,j){var P=supportMark(A,j);if(!P)return!1;if("binned"===P){var B=a[A===st?at:ot];return!!(isFieldDef(B)&&isFieldDef(a[A])&&isBinned(B.bin))}return!0}(a,ne,A))return log_warn(P.incompatibleChannel(ne,A)),q;if(ne===mt&&"line"===A){var se=getFieldDef(a[ne]);if(null===se||void 0===se?void 0:se.aggregate)return log_warn(P.LINE_WITH_VARYING_SIZE),q}if(ne===dt&&(j?"fill"in a:"stroke"in a))return log_warn(P.droppingColor("encoding",{fill:"fill"in a,stroke:"stroke"in a})),q;if("detail"===ne||"order"===ne&&!oe(ie)&&!isValueDef(ie)||"tooltip"===ne&&oe(ie))ie&&(q[ne]=array(ie).reduce((function(a,A){return isFieldDef(A)?a.push(initFieldDef(A,ne)):log_warn(P.emptyFieldDef(A,ne)),a}),[]));else{if("tooltip"===ne&&null===ie)q[ne]=null;else if(!isFieldDef(ie)&&!isDatumDef(ie)&&!isValueDef(ie)&&!isConditionalDef(ie)&&!isSignalRef(ie))return log_warn(P.emptyFieldDef(ie,ne)),q;q[ne]=initChannelDef(ie,ne,B)}return q}),{})}function normalizeEncoding(a,A){var j,P={},B=Object(pe.a)(Ae(a));try{for(B.s();!(j=B.n()).done;){var q=j.value,ne=initChannelDef(a[q],q,A,{compositeMark:!0});P[q]=ne}}catch(ie){B.e(ie)}finally{B.f()}return P}function fieldDefs(a){var A,j=[],P=Object(pe.a)(Ae(a));try{for(P.s();!(A=P.n()).done;){var B=A.value;if(encoding_channelHasField(a,B)){var q,ne=array(a[B]),ie=Object(pe.a)(ne);try{for(ie.s();!(q=ie.n()).done;){var oe=q.value;isFieldDef(oe)?j.push(oe):hasConditionalFieldDef(oe)&&j.push(oe.condition)}}catch(se){ie.e(se)}finally{ie.f()}}}}catch(se){P.e(se)}finally{P.f()}return j}function forEach(a,A,j){if(a){var P,B=Object(pe.a)(Ae(a));try{for(B.s();!(P=B.n()).done;){var q=P.value,ne=a[q];if(oe(ne)){var ie,se=Object(pe.a)(ne);try{for(se.s();!(ie=se.n()).done;){var le=ie.value;A.call(j,le,q)}}catch(he){se.e(he)}finally{se.f()}}else A.call(j,ne,q)}}catch(he){B.e(he)}finally{B.f()}}}function pathGroupingFields(a,A){return Ae(A).reduce((function(j,P){switch(P){case at:case ot:case"href":case"description":case"url":case st:case ut:case ct:case ft:case lt:case"radius2":case"latitude":case"longitude":case"latitude2":case"longitude2":case"text":case gt:case"angle":case"tooltip":return j;case"order":if("line"===a||"trail"===a)return j;case"detail":case"key":var B=A[P];if(oe(B)||isFieldDef(B)){var q,ne=Object(pe.a)(array(B));try{for(ne.s();!(q=ne.n()).done;){var ie=q.value;ie.aggregate||j.push(channeldef_vgField(ie,{}))}}catch(le){ne.e(le)}finally{ne.f()}}return j;case mt:if("trail"===a)return j;case dt:case ht:case pt:case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeDash":case"strokeWidth":var se=getFieldDef(A[P]);return se&&!se.aggregate&&j.push(channeldef_vgField(se,{})),j}}),[])}var compositemark_common_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function getCompositeMarkTooltip(a,A,j){var P=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("tooltip"in j)return{tooltip:j.tooltip};var B=a.map((function(a){var j=a.fieldPrefix,B=a.titlePrefix,q=P?" of ".concat(getTitle(A)):"";return{field:j+A.field,type:A.type,title:isSignalRef(B)?{signal:B+'"'.concat(escape(q),'"')}:B+q}})),q=fieldDefs(j).map(toStringFieldDef);return{tooltip:[].concat(Object(he.a)(B),Object(he.a)(unique(q,util_hash)))}}function getTitle(a){return getFirstDefined(a.title,a.field)}function makeCompositeAggregatePartFactory(a,A,j,P,B){var q=j.scale,ne=j.axis;return function(ie){var oe=ie.partName,se=ie.mark,le=ie.positionPrefix,he=ie.endPositionPrefix,pe=void 0===he?void 0:he,ge=ie.extraEncoding,me=void 0===ge?{}:ge,ve=getTitle(j);return partLayerMixins(a,oe,B,{mark:se,encoding:Object.assign(Object.assign(Object.assign(Object(Ye.a)({},A,Object.assign(Object.assign(Object.assign({field:le+"_"+j.field,type:j.type},void 0!==ve?{title:ve}:{}),void 0!==q?{scale:q}:{}),void 0!==ne?{axis:ne}:{})),isString(pe)?Object(Ye.a)({},A+"2",{field:pe+"_"+j.field}):{}),P),me)})}}function partLayerMixins(a,A,j,P){var B=a.clip,q=a.color,ne=a.opacity,ie=a.type;return a[A]||void 0===a[A]&&j[A]?[Object.assign(Object.assign({},P),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},j[A]),B?{clip:B}:{}),q?{color:q}:{}),ne?{opacity:ne}:{}),isMarkDef(P.mark)?P.mark:{type:P.mark}),{style:"".concat(ie,"-").concat(A)}),isBoolean(a[A])?{}:a[A])})]:[]}function compositeMarkContinuousAxis(a,A,j){var P=a.encoding,B="vertical"===A?"y":"x",q=P[B],ne=P[B+"2"],ie=P[B+"Error"],oe=P[B+"Error2"];return{continuousAxisChannelDef:filterAggregateFromChannelDef(q,j),continuousAxisChannelDef2:filterAggregateFromChannelDef(ne,j),continuousAxisChannelDefError:filterAggregateFromChannelDef(ie,j),continuousAxisChannelDefError2:filterAggregateFromChannelDef(oe,j),continuousAxis:B}}function filterAggregateFromChannelDef(a,A){if(a&&a.aggregate){var j=a.aggregate,B=compositemark_common_rest(a,["aggregate"]);return j!==A&&log_warn(P.errorBarContinuousAxisHasCustomizedAggregate(j,A)),B}return a}function compositeMarkOrient(a,A){var j=a.mark,P=a.encoding,B=P.x,q=P.y;if(isMarkDef(j)&&j.orient)return j.orient;if(isContinuousFieldOrDatumDef(B)){if(isContinuousFieldOrDatumDef(q)){var ne=isFieldDef(B)&&B.aggregate,ie=isFieldDef(q)&&q.aggregate;if(ne||ie!==A){if(ie||ne!==A){if(ne===A&&ie===A)throw new Error("Both x and y cannot have aggregate");return isFieldOrDatumDefForTimeFormat(q)&&!isFieldOrDatumDefForTimeFormat(B)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(isContinuousFieldOrDatumDef(q))return"vertical";throw new Error("Need a valid continuous axis for ".concat(A,"s"))}var boxplot_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},Tr=new Cr("boxplot",normalizeBoxPlot);function getBoxPlotType(a){return isNumber(a)?"tukey":a}function normalizeBoxPlot(a,A){var j,B,q=A.config,ne=a=Object.assign(Object.assign({},a),{encoding:normalizeEncoding(a.encoding,q)}),ie=ne.mark,se=(ne.encoding,ne.selection),le=(ne.projection,boxplot_rest(a,["mark","encoding","selection","projection"])),ge=isMarkDef(ie)?ie:{type:ie};se&&log_warn(P.selectionNotSupported("boxplot"));var me=null!==(j=ge.extent)&&void 0!==j?j:q.boxplot.extent,ve=getMarkPropOrConfig("size",ge,q),ye=getBoxPlotType(me),_e=function boxParams(a,A,j){var P=compositeMarkOrient(a,"boxplot"),B=compositeMarkContinuousAxis(a,P,"boxplot"),q=B.continuousAxisChannelDef,ne=B.continuousAxis,ie=q.field,se=getBoxPlotType(A),le=[].concat(Object(he.a)(boxParamsQuartiles(ie)),[{op:"median",field:ie,as:"mid_box_"+ie},{op:"min",field:ie,as:("min-max"===se?"lower_whisker_":"min_")+ie},{op:"max",field:ie,as:("min-max"===se?"upper_whisker_":"max_")+ie}]),ge="min-max"===se||"tukey"===se?[]:[{calculate:'datum["upper_box_'.concat(ie,'"] - datum["lower_box_').concat(ie,'"]'),as:"iqr_"+ie},{calculate:'min(datum["upper_box_'.concat(ie,'"] + datum["iqr_').concat(ie,'"] * ').concat(A,', datum["max_').concat(ie,'"])'),as:"upper_whisker_"+ie},{calculate:'max(datum["lower_box_'.concat(ie,'"] - datum["iqr_').concat(ie,'"] * ').concat(A,', datum["min_').concat(ie,'"])'),as:"lower_whisker_"+ie}],me=a.encoding,ve=ne,ye=(me[ve],function filterTooltipWithAggregatedField(a){var A,j,P=a.tooltip,B=compositemark_common_rest(a,["tooltip"]);if(!P)return{filteredEncoding:B};if(oe(P)){var q,ne=Object(pe.a)(P);try{for(ne.s();!(q=ne.n()).done;){var ie=q.value;ie.aggregate?(A||(A=[]),A.push(ie)):(j||(j=[]),j.push(ie))}}catch(se){ne.e(se)}finally{ne.f()}A&&(B.tooltip=A)}else P.aggregate?B.tooltip=P:j=P;return oe(j)&&1===j.length&&(j=j[0]),{customTooltipWithoutAggregatedField:j,filteredEncoding:B}}(boxplot_rest(me,["symbol"===typeof ve?ve:ve+""]))),_e=ye.customTooltipWithoutAggregatedField,we=extractTransformsFromEncoding(ye.filteredEncoding,j),ke=we.bins,Oe=we.timeUnits,Se=we.aggregate,Te=we.groupby,Ae=we.encoding,je="vertical"===P?"horizontal":"vertical",Fe=P,Re=[].concat(Object(he.a)(ke),Object(he.a)(Oe),[{aggregate:[].concat(Object(he.a)(Se),Object(he.a)(le)),groupby:Te}],ge);return{bins:ke,timeUnits:Oe,transform:Re,groupby:Te,aggregate:Se,continuousAxisChannelDef:q,continuousAxis:ne,encodingWithoutContinuousAxis:Ae,ticksOrient:je,boxOrient:Fe,customTooltipWithoutAggregatedField:_e}}(a,me,q),we=_e.bins,ke=_e.timeUnits,Oe=_e.transform,Se=_e.continuousAxisChannelDef,Te=_e.continuousAxis,Ae=_e.groupby,je=_e.aggregate,Fe=_e.encodingWithoutContinuousAxis,Re=_e.ticksOrient,Me=_e.boxOrient,Ne=_e.customTooltipWithoutAggregatedField,Be=Fe.color,Ue=Fe.size,We=boxplot_rest(Fe,["color","size"]),Ve=function makeBoxPlotPart(a){return makeCompositeAggregatePartFactory(ge,Te,Se,a,q.boxplot)},$e=Ve(We),Xe=Ve(Fe),et=Ve(Object.assign(Object.assign({},We),Ue?{size:Ue}:{})),tt=getCompositeMarkTooltip([{fieldPrefix:"min-max"===ye?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===ye?"lower_whisker_":"min_",titlePrefix:"Min"}],Se,Fe),nt={type:"tick",color:"black",opacity:1,orient:Re,invalid:null,aria:!1},rt="min-max"===ye?tt:getCompositeMarkTooltip([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],Se,Fe),it=[].concat(Object(he.a)($e({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:rt})),Object(he.a)($e({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:rt})),Object(he.a)($e({partName:"ticks",mark:nt,positionPrefix:"lower_whisker",extraEncoding:rt})),Object(he.a)($e({partName:"ticks",mark:nt,positionPrefix:"upper_whisker",extraEncoding:rt}))),at=[].concat(Object(he.a)("tukey"!==ye?it:[]),Object(he.a)(Xe({partName:"box",mark:Object.assign(Object.assign({type:"bar"},ve?{size:ve}:{}),{orient:Me,invalid:null,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:tt})),Object(he.a)(et({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},isObject(q.boxplot.median)&&q.boxplot.median.color?{color:q.boxplot.median.color}:{}),ve?{size:ve}:{}),{orient:Re,aria:!1}),positionPrefix:"mid_box",extraEncoding:tt})));if("min-max"===ye)return Object.assign(Object.assign({},le),{transform:(null!==(B=le.transform)&&void 0!==B?B:[]).concat(Oe),layer:at});var ot,st,ut='datum["lower_box_'.concat(Se.field,'"]'),lt='datum["upper_box_'.concat(Se.field,'"]'),ct="(".concat(lt," - ").concat(ut,")"),ft="".concat(ut," - ").concat(me," * ").concat(ct),dt="".concat(lt," + ").concat(me," * ").concat(ct),ht='datum["'.concat(Se.field,'"]'),pt={joinaggregate:boxParamsQuartiles(Se.field),groupby:Ae},gt={transform:[{filter:"(".concat(ft," <= ").concat(ht,") && (").concat(ht," <= ").concat(dt,")")},{aggregate:[{op:"min",field:Se.field,as:"lower_whisker_"+Se.field},{op:"max",field:Se.field,as:"upper_whisker_"+Se.field},{op:"min",field:"lower_box_"+Se.field,as:"lower_box_"+Se.field},{op:"max",field:"upper_box_"+Se.field,as:"upper_box_"+Se.field}].concat(Object(he.a)(je)),groupby:Ae}],layer:it},mt=(We.tooltip,boxplot_rest(We,["tooltip"])),vt=Se.scale,yt=Se.axis,bt=getTitle(Se),_t=omit(yt,["title"]),xt=partLayerMixins(ge,"outliers",q.boxplot,{transform:[{filter:"(".concat(ht," < ").concat(ft,") || (").concat(ht," > ").concat(dt,")")}],mark:"point",encoding:Object.assign(Object.assign(Object.assign(Object(Ye.a)({},Te,Object.assign(Object.assign(Object.assign({field:Se.field,type:Se.type},void 0!==bt?{title:bt}:{}),void 0!==vt?{scale:vt}:{}),isEmpty(_t)?{}:{axis:_t})),mt),Be?{color:Be}:{}),Ne?{tooltip:Ne}:{})})[0],wt=[].concat(Object(he.a)(we),Object(he.a)(ke),[pt]);xt?ot={transform:wt,layer:[xt,gt]}:(st=(ot=gt).transform).unshift.apply(st,Object(he.a)(wt));return Object.assign(Object.assign({},le),{layer:[ot,{transform:Oe,layer:at}]})}function boxParamsQuartiles(a){return[{op:"q1",field:a,as:"lower_box_"+a},{op:"q3",field:a,as:"upper_box_"+a}]}var errorbar_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},Dr=new Cr("errorbar",normalizeErrorBar);function normalizeErrorBar(a,A){var j=A.config,P=errorBarParams(a=Object.assign(Object.assign({},a),{encoding:normalizeEncoding(a.encoding,j)}),"errorbar",j),B=P.transform,q=P.continuousAxisChannelDef,ne=P.continuousAxis,ie=P.encodingWithoutContinuousAxis,oe=P.ticksOrient,se=P.markDef,le=P.outerSpec,pe=P.tooltipEncoding;delete ie.size;var ge=makeCompositeAggregatePartFactory(se,ne,q,ie,j.errorbar),me=se.thickness,ve=se.size,ye=Object.assign(Object.assign({type:"tick",orient:oe,aria:!1},void 0!==me?{thickness:me}:{}),void 0!==ve?{size:ve}:{}),_e=[].concat(Object(he.a)(ge({partName:"ticks",mark:ye,positionPrefix:"lower",extraEncoding:pe})),Object(he.a)(ge({partName:"ticks",mark:ye,positionPrefix:"upper",extraEncoding:pe})),Object(he.a)(ge({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},void 0!==me?{size:me}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:pe})));return Object.assign(Object.assign(Object.assign({},le),{transform:B}),_e.length>1?{layer:_e}:Object.assign({},_e[0]))}function errorBarOrientAndInputType(a,A){var j=a.encoding;if(function errorBarIsInputTypeRaw(a){return(isFieldOrDatumDef(a.x)||isFieldOrDatumDef(a.y))&&!isFieldOrDatumDef(a.x2)&&!isFieldOrDatumDef(a.y2)&&!isFieldOrDatumDef(a.xError)&&!isFieldOrDatumDef(a.xError2)&&!isFieldOrDatumDef(a.yError)&&!isFieldOrDatumDef(a.yError2)}(j))return{orient:compositeMarkOrient(a,A),inputType:"raw"};var P=function errorBarIsInputTypeAggregatedUpperLower(a){return isFieldOrDatumDef(a.x2)||isFieldOrDatumDef(a.y2)}(j),B=function errorBarIsInputTypeAggregatedError(a){return isFieldOrDatumDef(a.xError)||isFieldOrDatumDef(a.xError2)||isFieldOrDatumDef(a.yError)||isFieldOrDatumDef(a.yError2)}(j),q=j.x,ne=j.y;if(P){if(B)throw new Error("".concat(A," cannot be both type aggregated-upper-lower and aggregated-error"));var ie=j.x2,oe=j.y2;if(isFieldOrDatumDef(ie)&&isFieldOrDatumDef(oe))throw new Error("".concat(A," cannot have both x2 and y2"));if(isFieldOrDatumDef(ie)){if(isContinuousFieldOrDatumDef(q))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in ".concat(A))}if(isFieldOrDatumDef(oe)){if(isContinuousFieldOrDatumDef(ne))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in ".concat(A))}throw new Error("No ranged axis")}var se=j.xError,le=j.xError2,he=j.yError,pe=j.yError2;if(isFieldOrDatumDef(le)&&!isFieldOrDatumDef(se))throw new Error("".concat(A," cannot have xError2 without xError"));if(isFieldOrDatumDef(pe)&&!isFieldOrDatumDef(he))throw new Error("".concat(A," cannot have yError2 without yError"));if(isFieldOrDatumDef(se)&&isFieldOrDatumDef(he))throw new Error("".concat(A," cannot have both xError and yError with both are quantiative"));if(isFieldOrDatumDef(se)){if(isContinuousFieldOrDatumDef(q))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(isFieldOrDatumDef(he)){if(isContinuousFieldOrDatumDef(ne))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}function errorBarParams(a,A,j){var B,q=a.mark,ne=a.encoding,ie=a.selection,oe=(a.projection,errorbar_rest(a,["mark","encoding","selection","projection"])),se=isMarkDef(q)?q:{type:q};ie&&log_warn(P.selectionNotSupported(A));var le=errorBarOrientAndInputType(a,A),ge=le.orient,me=le.inputType,ve=compositeMarkContinuousAxis(a,ge,A),ye=ve.continuousAxisChannelDef,_e=ve.continuousAxisChannelDef2,we=ve.continuousAxisChannelDefError,ke=ve.continuousAxisChannelDefError2,Oe=ve.continuousAxis,Se=function errorBarAggregationAndCalculation(a,A,j,B,q,ne,ie,oe){var se,le=[],he=[],ge=A.field,me=!1;if("raw"===ne){var ve,ye,_e,we=a.center?a.center:a.extent?"iqr"===a.extent?"median":"mean":oe.errorbar.center,ke=a.extent?a.extent:"mean"===we?"stderr":"iqr";if("median"===we!==("iqr"===ke)&&log_warn(P.errorBarCenterIsUsedWithWrongExtent(we,ke,ie)),"stderr"===ke||"stdev"===ke)le=[{op:ke,field:ge,as:"extent_"+ge},{op:we,field:ge,as:"center_"+ge}],he=[{calculate:'datum["center_'.concat(ge,'"] + datum["extent_').concat(ge,'"]'),as:"upper_"+ge},{calculate:'datum["center_'.concat(ge,'"] - datum["extent_').concat(ge,'"]'),as:"lower_"+ge}],se=[{fieldPrefix:"center_",titlePrefix:titleCase(we)},{fieldPrefix:"upper_",titlePrefix:getTitlePrefix(we,ke,"+")},{fieldPrefix:"lower_",titlePrefix:getTitlePrefix(we,ke,"-")}],me=!0;else"ci"===ke?(ve="mean",ye="ci0",_e="ci1"):(ve="median",ye="q1",_e="q3"),le=[{op:ye,field:ge,as:"lower_"+ge},{op:_e,field:ge,as:"upper_"+ge},{op:ve,field:ge,as:"center_"+ge}],se=[{fieldPrefix:"upper_",titlePrefix:channeldef_title({field:ge,aggregate:_e,type:"quantitative"},oe,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:channeldef_title({field:ge,aggregate:ye,type:"quantitative"},oe,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:channeldef_title({field:ge,aggregate:ve,type:"quantitative"},oe,{allowDisabling:!1})}]}else{(a.center||a.extent)&&log_warn(P.errorBarCenterAndExtentAreNotNeeded(a.center,a.extent)),"aggregated-upper-lower"===ne?(se=[],he=[{calculate:'datum["'.concat(j.field,'"]'),as:"upper_"+ge},{calculate:'datum["'.concat(ge,'"]'),as:"lower_"+ge}]):"aggregated-error"===ne&&(se=[{fieldPrefix:"",titlePrefix:ge}],he=[{calculate:'datum["'.concat(ge,'"] + datum["').concat(B.field,'"]'),as:"upper_"+ge}],q?he.push({calculate:'datum["'.concat(ge,'"] + datum["').concat(q.field,'"]'),as:"lower_"+ge}):he.push({calculate:'datum["'.concat(ge,'"] - datum["').concat(B.field,'"]'),as:"lower_"+ge}));var Oe,Se=Object(pe.a)(he);try{for(Se.s();!(Oe=Se.n()).done;){var Te=Oe.value;se.push({fieldPrefix:Te.as.substring(0,6),titlePrefix:replaceAll(replaceAll(Te.calculate,'datum["',""),'"]',"")})}}catch(Ae){Se.e(Ae)}finally{Se.f()}}return{postAggregateCalculates:he,errorBarSpecificAggregate:le,tooltipSummary:se,tooltipTitleWithFieldName:me}}(se,ye,_e,we,ke,me,A,j),Te=Se.errorBarSpecificAggregate,Ae=Se.postAggregateCalculates,je=Se.tooltipSummary,Fe=Se.tooltipTitleWithFieldName,Re=ne,Me=Oe,Ne=(Re[Me],"x"===Oe?"x2":"y2"),Be=(Re[Ne],"x"===Oe?"xError":"yError"),Ue=(Re[Be],"x"===Oe?"xError2":"yError2"),We=(Re[Ue],extractTransformsFromEncoding(errorbar_rest(Re,["symbol"===typeof Me?Me:Me+"","symbol"===typeof Ne?Ne:Ne+"","symbol"===typeof Be?Be:Be+"","symbol"===typeof Ue?Ue:Ue+""]),j)),Ve=We.bins,Ye=We.timeUnits,$e=We.aggregate,Xe=We.groupby,et=We.encoding,tt=[].concat(Object(he.a)($e),Object(he.a)(Te)),nt="raw"!==me?[]:Xe,rt=getCompositeMarkTooltip(je,ye,et,Fe);return{transform:[].concat(Object(he.a)(null!==(B=oe.transform)&&void 0!==B?B:[]),Object(he.a)(Ve),Object(he.a)(Ye),Object(he.a)(0===tt.length?[]:[{aggregate:tt,groupby:nt}]),Object(he.a)(Ae)),groupby:nt,continuousAxisChannelDef:ye,continuousAxis:Oe,encodingWithoutContinuousAxis:et,ticksOrient:"vertical"===ge?"horizontal":"vertical",markDef:se,outerSpec:oe,tooltipEncoding:rt}}function getTitlePrefix(a,A,j){return titleCase(a)+" "+j+" "+A}var Ar=new Cr("errorband",normalizeErrorBand);function normalizeErrorBand(a,A){var j=A.config,B=errorBarParams(a=Object.assign(Object.assign({},a),{encoding:normalizeEncoding(a.encoding,j)}),"errorband",j),q=B.transform,ne=B.continuousAxisChannelDef,ie=B.continuousAxis,oe=B.encodingWithoutContinuousAxis,se=B.markDef,le=B.outerSpec,pe=B.tooltipEncoding,ge=se,me=makeCompositeAggregatePartFactory(ge,ie,ne,oe,j.errorband),ve=void 0!==a.encoding.x&&void 0!==a.encoding.y,ye={type:ve?"area":"rect"},_e={type:ve?"line":"rule"},we=Object.assign(Object.assign({},ge.interpolate?{interpolate:ge.interpolate}:{}),ge.tension&&ge.interpolate?{tension:ge.tension}:{});return ve?(ye=Object.assign(Object.assign(Object.assign({},ye),we),{ariaRoleDescription:"errorband"}),_e=Object.assign(Object.assign(Object.assign({},_e),we),{aria:!1})):ge.interpolate?log_warn(P.errorBand1DNotSupport("interpolate")):ge.tension&&log_warn(P.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},le),{transform:q,layer:[].concat(Object(he.a)(me({partName:"band",mark:ye,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:pe})),Object(he.a)(me({partName:"borders",mark:_e,positionPrefix:"lower",extraEncoding:pe})),Object(he.a)(me({partName:"borders",mark:_e,positionPrefix:"upper",extraEncoding:pe})))})}var jr={};function compositemark_add(a,A,j){var P=new Cr(a,A);jr[a]={normalizer:P,parts:j}}compositemark_add("boxplot",normalizeBoxPlot,["box","median","outliers","rule","ticks"]),compositemark_add("errorbar",normalizeErrorBar,["ticks","rule"]),compositemark_add("errorband",normalizeErrorBand,["band","borders"]);var Fr=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Pr={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Rr={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Mr=Ae(Pr),Lr=Ae(Rr),Ir=Ae({header:1,headerRow:1,headerColumn:1,headerFacet:1}),Nr=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Br={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ur=(Ae(Br),function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j});function assembleParameterSignals(a){var A,j=[],P=Object(pe.a)(a||[]);try{for(P.s();!(A=P.n()).done;){var B=A.value,q=B.expr,ne=B.bind,ie=Ur(B,["expr","bind"]);if(ne&&q){var oe=Object.assign(Object.assign({},ie),{bind:ne,init:q});j.push(oe)}else{var se=Object.assign(Object.assign(Object.assign({},ie),q?{update:q}:{}),ne?{bind:ne}:{});j.push(se)}}}catch(le){P.e(le)}finally{P.f()}return j}var zr={single:{on:"click",fields:["_vgsid_"],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:["_vgsid_"],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function isLegendBinding(a){return!!a&&("legend"===a||!!a.legend)}function isLegendStreamBinding(a){return isLegendBinding(a)&&isObject(a)}function isConcatSpec(a){return"concat"in a}function isVConcatSpec(a){return"vconcat"in a}function isHConcatSpec(a){return"hconcat"in a}function isStep(a){return isObject(a)&&void 0!==a.step}function isFrameMixins(a){return a.view||a.width||a.height}var qr=Ae({align:1,bounds:1,center:1,columns:1,spacing:1});var config_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function getViewConfigContinuousSize(a,A){var j;return null!==(j=a[A])&&void 0!==j?j:a["width"===A?"continuousWidth":"continuousHeight"]}function getViewConfigDiscreteStep(a,A){var j=getViewConfigDiscreteSize(a,A);return isStep(j)?j.step:Wr}function getViewConfigDiscreteSize(a,A){var j;return getFirstDefined(null!==(j=a[A])&&void 0!==j?j:a["width"===A?"discreteWidth":"discreteHeight"],{step:a.step})}var Wr=20;var Hr={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:Wr},mark:{color:"#4c78a8",invalid:"filter",timeUnitBand:1},arc:{},area:{},bar:xr,circle:{},geoshape:{},image:{},line:{},point:{},rect:wr,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:zr,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},Gr=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Vr={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Yr={blue:Gr[0],orange:Gr[1],red:Gr[2],teal:Gr[3],green:Gr[4],yellow:Gr[5],purple:Gr[6],pink:Gr[7],brown:Gr[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function colorSignalConfig(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{signals:[{name:"color",value:isObject(a)?Object.assign(Object.assign({},Yr),a):Yr}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function fontSizeSignalConfig(a){return{signals:[{name:"fontSize",value:isObject(a)?Object.assign(Object.assign({},Vr),a):Vr}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function fontConfig(a){return{text:{font:a},style:{"guide-label":{font:a},"guide-title":{font:a},"group-title":{font:a},"group-subtitle":{font:a}}}}function getAxisConfigInternal(a){var A,j=Ae(a||{}),P={},B=Object(pe.a)(j);try{for(B.s();!(A=B.n()).done;){var q=A.value,ne=a[q];P[q]=isConditionalAxisValue(ne)?signalOrValueRefWithCondition(ne):signalRefOrValue(ne)}}catch(ie){B.e(ie)}finally{B.f()}return P}function getStyleConfigInternal(a){var A,j=Ae(a),P={},B=Object(pe.a)(j);try{for(B.s();!(A=B.n()).done;){var q=A.value;P[q]=getAxisConfigInternal(a[q])}}catch(ne){B.e(ne)}finally{B.f()}return P}var $r=[].concat(Object(he.a)(yr),Object(he.a)(Ve),Object(he.a)(Ir),["background","padding","legend","lineBreak","scale","style","title","view"]);function initConfig(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},A=a.color,j=a.font,P=a.fontSize,B=config_rest(a,["color","font","fontSize"]),q=mergeConfig({},Hr,j?fontConfig(j):{},A?colorSignalConfig(A):{},P?fontSizeSignalConfig(P):{},B||{}),ne=omit(q,$r),ie=0,oe=["background","lineBreak","padding"];ie<oe.length;ie++){var se=oe[ie];q[se]&&(ne[se]=signalRefOrValue(q[se]))}var le,he=Object(pe.a)(yr);try{for(he.s();!(le=he.n()).done;){var ge=le.value;q[ge]&&(ne[ge]=replaceExprRefInIndex(q[ge]))}}catch(Oe){he.e(Oe)}finally{he.f()}var me,ve=Object(pe.a)(Ve);try{for(ve.s();!(me=ve.n()).done;){var ye=me.value;q[ye]&&(ne[ye]=getAxisConfigInternal(q[ye]))}}catch(Oe){ve.e(Oe)}finally{ve.f()}var _e,we=Object(pe.a)(Ir);try{for(we.s();!(_e=we.n()).done;){var ke=_e.value;q[ke]&&(ne[ke]=replaceExprRefInIndex(q[ke]))}}catch(Oe){we.e(Oe)}finally{we.f()}return q.legend&&(ne.legend=replaceExprRefInIndex(q.legend)),q.scale&&(ne.scale=replaceExprRefInIndex(q.scale)),q.style&&(ne.style=getStyleConfigInternal(q.style)),q.title&&(ne.title=replaceExprRefInIndex(q.title)),q.view&&(ne.view=replaceExprRefInIndex(q.view)),ne}var Kr=["view"].concat(Object(he.a)(gr)),Xr=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Jr=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});function stripAndRedirectConfig(a){a=Se(a);var A,j=Object(pe.a)(Xr);try{for(j.s();!(A=j.n()).done;){delete a[A.value]}}catch(Re){j.e(Re)}finally{j.f()}if(a.axis)for(var P in a.axis)isConditionalAxisValue(a.axis[P])&&delete a.axis[P];if(a.legend){var B,q=Object(pe.a)(Fr);try{for(q.s();!(B=q.n()).done;){var ne=B.value;delete a.legend[ne]}}catch(Re){q.e(Re)}finally{q.f()}}if(a.mark){var ie,oe=Object(pe.a)(vr);try{for(oe.s();!(ie=oe.n()).done;){var se=ie.value;delete a.mark[se]}}catch(Re){oe.e(Re)}finally{oe.f()}a.mark.tooltip&&isObject(a.mark.tooltip)&&delete a.mark.tooltip}a.params&&(a.signals=(a.signals||[]).concat(assembleParameterSignals(a.params)),delete a.params);var le,he=Object(pe.a)(Kr);try{for(he.s();!(le=he.n()).done;){var ge,me=le.value,ve=Object(pe.a)(vr);try{for(ve.s();!(ge=ve.n()).done;){var ye=ge.value;delete a[me][ye]}}catch(Re){ve.e(Re)}finally{ve.f()}var _e=Jr[me];if(_e){var we,ke=Object(pe.a)(_e);try{for(ke.s();!(we=ke.n()).done;){var Oe=we.value;delete a[me][Oe]}}catch(Re){ke.e(Re)}finally{ke.f()}}redirectConfigToStyleConfig(a,me)}}catch(Re){he.e(Re)}finally{he.f()}var Te,je=Object(pe.a)(function getAllCompositeMarks(){return Ae(jr)}());try{for(je.s();!(Te=je.n()).done;){delete a[Te.value]}}catch(Re){je.e(Re)}finally{je.f()}for(var Fe in function redirectTitleConfig(a){var A=extractTitleConfig(a.title),j=A.titleMarkConfig,P=A.subtitleMarkConfig,B=A.subtitle;isEmpty(j)||(a.style["group-title"]=Object.assign(Object.assign({},a.style["group-title"]),j));isEmpty(P)||(a.style["group-subtitle"]=Object.assign(Object.assign({},a.style["group-subtitle"]),P));isEmpty(B)?delete a.title:a.title=B}(a),a)isObject(a[Fe])&&isEmpty(a[Fe])&&delete a[Fe];return isEmpty(a)?void 0:a}function redirectConfigToStyleConfig(a,A,j,P){var B=P?a[A][P]:a[A];"view"===A&&(j="cell");var q=Object.assign(Object.assign({},B),a.style[null!==j&&void 0!==j?j:A]);isEmpty(q)||(a.style[null!==j&&void 0!==j?j:A]=q),P||delete a[A]}function isLayerSpec(a){return"layer"in a}var Qr=j(24);function get_get(a,A,j){return(get_get="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function _get(a,A,j){var P=function _superPropBase(a,A){for(;!Object.prototype.hasOwnProperty.call(a,A)&&null!==(a=Object(Qr.a)(a)););return a}(a,A);if(P){var B=Object.getOwnPropertyDescriptor(P,A);return B.get?B.get.call(j):B.value}})(a,A,j||a)}var Zr=j(8),ti=j(9),map_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},ii=function(){function SpecMapper(){Object(zt.a)(this,SpecMapper)}return Object(qt.a)(SpecMapper,[{key:"map",value:function map(a,A){return isFacetSpec(a)?this.mapFacet(a,A):function isRepeatSpec(a){return"repeat"in a}(a)?this.mapRepeat(a,A):isHConcatSpec(a)?this.mapHConcat(a,A):isVConcatSpec(a)?this.mapVConcat(a,A):isConcatSpec(a)?this.mapConcat(a,A):this.mapLayerOrUnit(a,A)}},{key:"mapLayerOrUnit",value:function mapLayerOrUnit(a,A){if(isLayerSpec(a))return this.mapLayer(a,A);if(isUnitSpec(a))return this.mapUnit(a,A);throw new Error(P.invalidSpec(a))}},{key:"mapLayer",value:function mapLayer(a,A){var j=this;return Object.assign(Object.assign({},a),{layer:a.layer.map((function(a){return j.mapLayerOrUnit(a,A)}))})}},{key:"mapHConcat",value:function mapHConcat(a,A){var j=this;return Object.assign(Object.assign({},a),{hconcat:a.hconcat.map((function(a){return j.map(a,A)}))})}},{key:"mapVConcat",value:function mapVConcat(a,A){var j=this;return Object.assign(Object.assign({},a),{vconcat:a.vconcat.map((function(a){return j.map(a,A)}))})}},{key:"mapConcat",value:function mapConcat(a,A){var j=this,P=a.concat,B=map_rest(a,["concat"]);return Object.assign(Object.assign({},B),{concat:P.map((function(a){return j.map(a,A)}))})}},{key:"mapFacet",value:function mapFacet(a,A){return Object.assign(Object.assign({},a),{spec:this.map(a.spec,A)})}},{key:"mapRepeat",value:function mapRepeat(a,A){return Object.assign(Object.assign({},a),{spec:this.map(a.spec,A)})}}]),SpecMapper}(),oi={zero:1,center:1,normalize:1};function isStackOffset(a){return a in oi}var ui=new Set([Jn,Zn,Qn,sr,rr,dr,hr,nr,ur,lr]),vi=new Set([Zn,Qn,Jn]);function potentialStackedChannel(a,A){var j,P,B="x"===A?"y":"radius",q=a[A],ne=a[B];if(isFieldDef(q)&&isFieldDef(ne))if("quantitative"===channelDefType(q)&&"quantitative"===channelDefType(ne)){if(q.stack)return A;if(ne.stack)return B;var ie=isFieldDef(q)&&!!q.aggregate;if(ie!==(isFieldDef(ne)&&!!ne.aggregate))return ie?A:B;var oe=null===(j=q.scale)||void 0===j?void 0:j.type,se=null===(P=ne.scale)||void 0===P?void 0:P.type;if(oe&&"linear"!==oe)return B;if(se&&"linear"!==se)return A}else{if("quantitative"===channelDefType(q))return A;if("quantitative"===channelDefType(ne))return B}else{if("quantitative"===channelDefType(q))return A;if("quantitative"===channelDefType(ne))return B}}function getDimensionChannel(a){switch(a){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function stack_stack(a,A){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},B=isMarkDef(a)?a.type:a;if(!ui.has(B))return null;var q=potentialStackedChannel(A,"x")||potentialStackedChannel(A,"theta");if(!q)return null;var ne=A[q],ie=isFieldDef(ne)?channeldef_vgField(ne,{}):void 0,oe=getDimensionChannel(q),se=A[oe],le=isFieldDef(se)?channeldef_vgField(se,{}):void 0;le===ie&&(le=void 0,se=void 0,oe=void 0);var he,ge=Dt.reduce((function(a,j){if("tooltip"!==j&&encoding_channelHasField(A,j)){var P,B=A[j],q=Object(pe.a)(array(B));try{for(q.s();!(P=q.n()).done;){var ne=getFieldDef(P.value);if(!ne.aggregate){var ie=channeldef_vgField(ne,{});ie&&ie===le||a.push({channel:j,fieldDef:ne})}}}catch(oe){q.e(oe)}finally{q.f()}}return a}),[]);if(void 0!==ne.stack?he=isBoolean(ne.stack)?ne.stack?"zero":null:ne.stack:ge.length>0&&vi.has(B)&&(he="zero"),!he||!isStackOffset(he))return null;if(encoding_isAggregate(A)&&0===ge.length)return null;if(ne.scale&&ne.scale.type&&ne.scale.type!==Cn){if(j.disallowNonLinearStack)return null;log_warn(P.cannotStackNonLinearScale(ne.scale.type))}return isFieldOrDatumDef(A[getSecondaryRangeChannel(q)])?(void 0!==ne.stack&&log_warn(P.cannotStackRangedMark(q)),null):(isFieldDef(ne)&&ne.aggregate&&!util_contains(tt,ne.aggregate)&&log_warn(P.stackNonSummativeAggregate(ne.aggregate)),{groupbyChannel:se?oe:void 0,groupbyField:le,fieldChannel:q,impute:null!==ne.impute&&isPathMark(B),stackBy:ge,offset:he})}var pathoverlay_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function dropLineAndPoint(a){a.point,a.line;var A=pathoverlay_rest(a,["point","line"]);return Ae(A).length>1?A:A.type}function dropLineAndPointFromConfig(a){for(var A=0,j=["line","area","rule","trail"];A<j.length;A++){var P=j[A];a[P]&&(a=Object.assign(Object.assign({},a),Object(Ye.a)({},P,omit(a[P],["point","line"]))))}return a}function getPointOverlay(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=arguments.length>2?arguments[2]:void 0;return"transparent"===a.point?{opacity:0}:a.point?isObject(a.point)?a.point:{}:void 0!==a.point?null:A.point||j.shape?isObject(A.point)?A.point:{}:void 0}function getLineOverlay(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.line?!0===a.line?{}:a.line:void 0!==a.line?null:A.line?!0===A.line?{}:A.line:void 0}var _i=function(){function PathOverlayNormalizer(){Object(zt.a)(this,PathOverlayNormalizer),this.name="path-overlay"}return Object(qt.a)(PathOverlayNormalizer,[{key:"hasMatchingType",value:function hasMatchingType(a,A){if(isUnitSpec(a)){var j=a.mark,P=a.encoding,B=isMarkDef(j)?j:{type:j};switch(B.type){case"line":case"rule":case"trail":return!!getPointOverlay(B,A[B.type],P);case"area":return!!getPointOverlay(B,A[B.type],P)||!!getLineOverlay(B,A[B.type])}}return!1}},{key:"run",value:function run(a,A,j){var P=A.config,B=a.selection,q=a.projection,ne=a.mark,ie=a.encoding,oe=pathoverlay_rest(a,["selection","projection","mark","encoding"]),se=normalizeEncoding(ie,P),le=isMarkDef(ne)?ne:{type:ne},he=getPointOverlay(le,P[le.type],se),pe="area"===le.type&&getLineOverlay(le,P[le.type]),ge=[Object.assign(Object.assign({},B?{selection:B}:{}),{mark:dropLineAndPoint(Object.assign(Object.assign({},"area"===le.type&&void 0===le.opacity&&void 0===le.fillOpacity?{opacity:.7}:{}),le)),encoding:omit(se,["shape"])})],me=stack_stack(le,se),ve=se;if(me){var ye=me.fieldChannel,_e=me.offset;ve=Object.assign(Object.assign({},se),Object(Ye.a)({},ye,Object.assign(Object.assign({},se[ye]),_e?{stack:_e}:{})))}return pe&&ge.push(Object.assign(Object.assign({},q?{projection:q}:{}),{mark:Object.assign(Object.assign({type:"line"},pick(le,["clip","interpolate","tension","tooltip"])),pe),encoding:ve})),he&&ge.push(Object.assign(Object.assign({},q?{projection:q}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},pick(le,["clip","tooltip"])),he),encoding:ve})),j(Object.assign(Object.assign({},oe),{layer:ge}),Object.assign(Object.assign({},A),{config:dropLineAndPointFromConfig(P)}))}}]),PathOverlayNormalizer}(),rangestep_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},wi=function(){function RangeStepNormalizer(){Object(zt.a)(this,RangeStepNormalizer),this.name="RangeStep"}return Object(qt.a)(RangeStepNormalizer,[{key:"hasMatchingType",value:function hasMatchingType(a){var A;if(isUnitSpec(a)&&a.encoding){var j,P=Object(pe.a)(jt);try{for(P.s();!(j=P.n()).done;){var B=j.value,q=a.encoding[B];if(q&&isFieldOrDatumDef(q)&&(null===(A=null===q||void 0===q?void 0:q.scale)||void 0===A?void 0:A.rangeStep))return!0}}catch(ne){P.e(ne)}finally{P.f()}}return!1}},{key:"run",value:function run(a){var A,j,B={},q=Object.assign({},a.encoding),ne=Object(pe.a)(jt);try{for(ne.s();!(j=ne.n()).done;){var ie=j.value,oe=getSizeChannel(ie),se=q[ie];if(se&&isFieldOrDatumDef(se)&&(null===(A=null===se||void 0===se?void 0:se.scale)||void 0===A?void 0:A.rangeStep)){var le=se.scale,he=rangestep_rest(se,["scale"]),ge=le,me=(ge.rangeStep,rangestep_rest(ge,["rangeStep"]));B[oe]={step:le.rangeStep},log_warn(P.RANGE_STEP_DEPRECATED),q=Object.assign(Object.assign({},q),Object(Ye.a)({},ie,Object.assign(Object.assign({},he),isEmpty(me)?{}:{scale:me})))}}}catch(ve){ne.e(ve)}finally{ne.f()}return Object.assign(Object.assign(Object.assign({},B),a),{encoding:q})}}]),RangeStepNormalizer}(),repeater_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function replaceRepeaterInFacet(a,A){return A?isFacetMapping(a)?replaceRepeaterInMapping(a,A):replaceRepeaterInFieldDef(a,A):a}function replaceRepeaterInEncoding(a,A){return A?replaceRepeaterInMapping(a,A):a}function replaceRepeatInProp(a,A,j){var B=A[a];return function isRepeatRef(a){return a&&!isString(a)&&"repeat"in a}(B)?B.repeat in j?Object.assign(Object.assign({},A),Object(Ye.a)({},a,j[B.repeat])):void log_warn(P.noSuchRepeatedValue(B.repeat)):A}function replaceRepeaterInFieldDef(a,A){if(void 0!==(a=replaceRepeatInProp("field",a,A))){if(null===a)return null;if(isSortableFieldDef(a)&&isSortField(a.sort)){var j=replaceRepeatInProp("field",a.sort,A);a=Object.assign(Object.assign({},a),j?{sort:j}:{})}return a}}function replaceRepeaterInFieldOrDatumDef(a,A){if(isFieldDef(a))return replaceRepeaterInFieldDef(a,A);var j=replaceRepeatInProp("datum",a,A);return j===a||j.type||(j.type="nominal"),j}function replaceRepeaterInChannelDef(a,A){if(!isFieldOrDatumDef(a)){if(hasConditionalFieldOrDatumDef(a)){var j=replaceRepeaterInFieldOrDatumDef(a.condition,A);if(j)return Object.assign(Object.assign({},a),{condition:j});a.condition;return repeater_rest(a,["condition"])}return a}var P=replaceRepeaterInFieldOrDatumDef(a,A);return P||(isConditionalDef(a)?{condition:a.condition}:void 0)}function replaceRepeaterInMapping(a,A){var j={};for(var P in a)if(_has(a,P)){var B=a[P];if(oe(B))j[P]=B.map((function(a){return replaceRepeaterInChannelDef(a,A)})).filter((function(a){return a}));else{var q=replaceRepeaterInChannelDef(B,A);void 0!==q&&(j[P]=q)}}return j}var Ti=function(){function RuleForRangedLineNormalizer(){Object(zt.a)(this,RuleForRangedLineNormalizer),this.name="RuleForRangedLine"}return Object(qt.a)(RuleForRangedLineNormalizer,[{key:"hasMatchingType",value:function hasMatchingType(a){if(isUnitSpec(a)){var A=a.encoding;if("line"===a.mark){var j,P=Object(pe.a)(Ct);try{for(P.s();!(j=P.n()).done;){var B=j.value,q=A[getMainRangeChannel(B)];if(A[B]&&(isFieldDef(q)&&!isBinned(q.bin)||isDatumDef(q)))return!0}}catch(ne){P.e(ne)}finally{P.f()}}}return!1}},{key:"run",value:function run(a,A,j){var B=a.encoding;return log_warn(P.lineWithRange(!!B.x2,!!B.y2)),j(Object.assign(Object.assign({},a),{mark:"rule"}),A)}}]),RuleForRangedLineNormalizer}(),core_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function mergeEncoding(a){var A=a.parentEncoding,j=a.encoding,P=void 0===j?{}:j,B=a.layer,q={};if(A){var ne,ie=new Set([].concat(Object(he.a)(Ae(A)),Object(he.a)(Ae(P)))),se=Object(pe.a)(ie);try{for(se.s();!(ne=se.n()).done;){var le=ne.value,ge=P[le],me=A[le];if(isFieldOrDatumDef(ge)){var ve=Object.assign(Object.assign({},me),ge);q[le]=ve}else hasConditionalFieldOrDatumDef(ge)?q[le]=Object.assign(Object.assign({},ge),{condition:Object.assign(Object.assign({},me),ge.condition)}):ge||null===ge?q[le]=ge:(B||isValueDef(me)||isSignalRef(me)||isFieldOrDatumDef(me)||oe(me))&&(q[le]=me)}}catch(ye){se.e(ye)}finally{se.f()}}else q=P;return!q||isEmpty(q)?void 0:q}function mergeProjection(a){var A=a.parentProjection,j=a.projection;return A&&j&&log_warn(P.projectionOverridden({parentProjection:A,projection:j})),null!==j&&void 0!==j?j:A}function normalize_normalize(a,A){void 0===A&&(A=initConfig(a.config));var j=function normalizeGenericSpec(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Bi.map(a,{config:A})}(a,A),B=function normalizeAutoSize(a,A,j){var B=A.width,q=A.height,ne=isUnitSpec(a)||isLayerSpec(a),ie={};ne?"container"==B&&"container"==q?(ie.type="fit",ie.contains="padding"):"container"==B?(ie.type="fit-x",ie.contains="padding"):"container"==q&&(ie.type="fit-y",ie.contains="padding"):("container"==B&&(log_warn(P.containerSizeNonSingle("width")),B=void 0),"container"==q&&(log_warn(P.containerSizeNonSingle("height")),q=void 0));var oe=Object.assign(Object.assign(Object.assign({type:"pad"},ie),j?_normalizeAutoSize(j.autosize):{}),_normalizeAutoSize(a.autosize));"fit"!==oe.type||ne||(log_warn(P.FIT_NON_SINGLE),oe.type="pad");"container"==B&&"fit"!=oe.type&&"fit-x"!=oe.type&&log_warn(P.containerSizeNotCompatibleWithAutosize("width"));"container"==q&&"fit"!=oe.type&&"fit-y"!=oe.type&&log_warn(P.containerSizeNotCompatibleWithAutosize("height"));if(Oe(oe,{type:"pad"}))return;return oe}(j,{width:a.width,height:a.height,autosize:a.autosize},A);return Object.assign(Object.assign({},j),B?{autosize:B}:{})}var Bi=new(function(a){Object(Zr.a)(CoreNormalizer,a);var A=Object(ti.a)(CoreNormalizer);function CoreNormalizer(){var a;return Object(zt.a)(this,CoreNormalizer),(a=A.apply(this,arguments)).nonFacetUnitNormalizers=[Tr,Dr,Ar,new _i,new Ti,new wi],a}return Object(qt.a)(CoreNormalizer,[{key:"map",value:function map(a,A){if(isUnitSpec(a)){var j=encoding_channelHasField(a.encoding,rt),P=encoding_channelHasField(a.encoding,it),B=encoding_channelHasField(a.encoding,"facet");if(j||P||B)return this.mapFacetedUnit(a,A)}return get_get(Object(Qr.a)(CoreNormalizer.prototype),"map",this).call(this,a,A)}},{key:"mapUnit",value:function mapUnit(a,A){var j=A.parentEncoding,P=A.parentProjection,B=replaceRepeaterInEncoding(a.encoding,A.repeater),q=Object.assign(Object.assign({},a),B?{encoding:B}:{});if(j||P)return this.mapUnitWithParentEncodingOrProjection(q,A);var ne,ie=this.mapLayerOrUnit.bind(this),oe=Object(pe.a)(this.nonFacetUnitNormalizers);try{for(oe.s();!(ne=oe.n()).done;){var se=ne.value;if(se.hasMatchingType(q,A.config))return se.run(q,A,ie)}}catch(le){oe.e(le)}finally{oe.f()}return q}},{key:"mapRepeat",value:function mapRepeat(a,A){return function isLayerRepeatSpec(a){return!oe(a.repeat)&&a.repeat.layer}(a)?this.mapLayerRepeat(a,A):this.mapNonLayerRepeat(a,A)}},{key:"mapLayerRepeat",value:function mapLayerRepeat(a,A){var j=this,P=a.repeat,B=a.spec,q=core_rest(a,["repeat","spec"]),ne=P.row,ie=P.column,oe=P.layer,se=A.repeater,le=void 0===se?{}:se,he=A.repeaterPrefix,pe=void 0===he?"":he;return ne||ie?this.mapRepeat(Object.assign(Object.assign({},a),{repeat:Object.assign(Object.assign({},ne?{row:ne}:{}),ie?{column:ie}:{}),spec:{repeat:{layer:oe},spec:B}}),A):Object.assign(Object.assign({},q),{layer:oe.map((function(a){var P=Object.assign(Object.assign({},le),{layer:a}),q=(B.name||"")+pe+"child__layer_".concat(varName(a)),ne=j.mapLayerOrUnit(B,Object.assign(Object.assign({},A),{repeater:P,repeaterPrefix:q}));return ne.name=q,ne}))})}},{key:"mapNonLayerRepeat",value:function mapNonLayerRepeat(a,A){var j,B=a,q=B.repeat,ne=B.spec,ie=B.data,se=core_rest(a,["repeat","spec","data"]);!oe(q)&&a.columns&&(a=omit(a,["columns"]),log_warn(P.columnsNotSupportByRowCol("repeat")));var le,he=[],ge=A.repeater,me=void 0===ge?{}:ge,ve=A.repeaterPrefix,ye=void 0===ve?"":ve,_e=!oe(q)&&q.row||[me?me.row:null],we=!oe(q)&&q.column||[me?me.column:null],ke=oe(q)&&q||[me?me.repeat:null],Oe=Object(pe.a)(ke);try{for(Oe.s();!(le=Oe.n()).done;){var Se,Te=le.value,Ae=Object(pe.a)(_e);try{for(Ae.s();!(Se=Ae.n()).done;){var je,Fe=Se.value,Re=Object(pe.a)(we);try{for(Re.s();!(je=Re.n()).done;){var Me=je.value,Ne={repeat:Te,row:Fe,column:Me,layer:me.layer},Be=(ne.name||"")+ye+"child__"+(oe(q)?"".concat(varName(Te)):(q.row?"row_".concat(varName(Fe)):"")+(q.column?"column_".concat(varName(Me)):"")),Ue=this.map(ne,Object.assign(Object.assign({},A),{repeater:Ne,repeaterPrefix:Be}));Ue.name=Be,he.push(omit(Ue,["data"]))}}catch(Ve){Re.e(Ve)}finally{Re.f()}}}catch(Ve){Ae.e(Ve)}finally{Ae.f()}}}catch(Ve){Oe.e(Ve)}finally{Oe.f()}var We=oe(q)?a.columns:q.column?q.column.length:1;return Object.assign(Object.assign({data:null!==(j=ne.data)&&void 0!==j?j:ie,align:"all"},se),{columns:We,concat:he})}},{key:"mapFacet",value:function mapFacet(a,A){return isFacetMapping(a.facet)&&a.columns&&(a=omit(a,["columns"]),log_warn(P.columnsNotSupportByRowCol("facet"))),get_get(Object(Qr.a)(CoreNormalizer.prototype),"mapFacet",this).call(this,a,A)}},{key:"mapUnitWithParentEncodingOrProjection",value:function mapUnitWithParentEncodingOrProjection(a,A){var j=a.encoding,P=a.projection,B=A.parentEncoding,q=A.parentProjection,ne=A.config,ie=mergeProjection({parentProjection:q,projection:P}),oe=mergeEncoding({parentEncoding:B,encoding:replaceRepeaterInEncoding(j,A.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},a),ie?{projection:ie}:{}),oe?{encoding:oe}:{}),{config:ne})}},{key:"mapFacetedUnit",value:function mapFacetedUnit(a,A){var j=a.encoding,P=j.row,B=j.column,q=j.facet,ne=core_rest(j,["row","column","facet"]),ie=a.mark,oe=a.width,se=a.projection,le=a.height,he=a.view,pe=a.selection,ge=(a.encoding,core_rest(a,["mark","width","projection","height","view","selection","encoding"])),me=this.getFacetMappingAndLayout({row:P,column:B,facet:q},A),ve=me.facetMapping,ye=me.layout,_e=replaceRepeaterInEncoding(ne,A.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},ge),ye),{facet:ve,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},oe?{width:oe}:{}),le?{height:le}:{}),he?{view:he}:{}),se?{projection:se}:{}),{mark:ie,encoding:_e}),pe?{selection:pe}:{})}),A)}},{key:"getFacetMappingAndLayout",value:function getFacetMappingAndLayout(a,A){var j,B=a.row,q=a.column,ne=a.facet;if(B||q){ne&&log_warn(P.facetChannelDropped([].concat(Object(he.a)(B?[rt]:[]),Object(he.a)(q?[it]:[]))));for(var ie={},oe={},se=0,le=[rt,it];se<le.length;se++){var pe=le[se],ge=a[pe];if(ge){ge.align,ge.center,ge.spacing,ge.columns;var me=core_rest(ge,["align","center","spacing","columns"]);ie[pe]=me;for(var ve=0,ye=["align","center","spacing"];ve<ye.length;ve++){var _e=ye[ve];void 0!==ge[_e]&&(oe[_e]=null!==(j=oe[_e])&&void 0!==j?j:{},oe[_e][pe]=ge[_e])}}}return{facetMapping:ie,layout:oe}}var we=ne.align,ke=ne.center,Oe=ne.spacing,Se=ne.columns;return{facetMapping:replaceRepeaterInFacet(core_rest(ne,["align","center","spacing","columns"]),A.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},we?{align:we}:{}),ke?{center:ke}:{}),Oe?{spacing:Oe}:{}),Se?{columns:Se}:{})}}},{key:"mapLayer",value:function mapLayer(a,A){var j=A.parentEncoding,P=A.parentProjection,B=core_rest(A,["parentEncoding","parentProjection"]),q=a.encoding,ne=a.projection,ie=core_rest(a,["encoding","projection"]),oe=Object.assign(Object.assign({},B),{parentEncoding:mergeEncoding({parentEncoding:j,encoding:q,layer:!0}),parentProjection:mergeProjection({parentProjection:P,projection:ne})});return get_get(Object(Qr.a)(CoreNormalizer.prototype),"mapLayer",this).call(this,ie,oe)}}]),CoreNormalizer}(ii));function _normalizeAutoSize(a){return isString(a)?{type:a}:null!==a&&void 0!==a?a:{}}var Wi=["background","padding"];function extractTopLevelProperties(a,A){var j,P={},B=Object(pe.a)(Wi);try{for(B.s();!(j=B.n()).done;){var q=j.value;a&&void 0!==a[q]&&(P[q]=signalRefOrValue(a[q]))}}catch(ne){B.e(ne)}finally{B.f()}return A&&(P.params=a.params),P}var Yi=j(7),Zi=function(){function Split(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(zt.a)(this,Split),this.explicit=a,this.implicit=A}return Object(qt.a)(Split,[{key:"clone",value:function clone(){return new Split(Se(this.explicit),Se(this.implicit))}},{key:"combine",value:function combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}},{key:"get",value:function get(a){return getFirstDefined(this.explicit[a],this.implicit[a])}},{key:"getWithExplicit",value:function getWithExplicit(a){return void 0!==this.explicit[a]?{explicit:!0,value:this.explicit[a]}:void 0!==this.implicit[a]?{explicit:!1,value:this.implicit[a]}:{explicit:!1,value:void 0}}},{key:"setWithExplicit",value:function setWithExplicit(a,A){void 0!==A.value&&this.set(a,A.value,A.explicit)}},{key:"set",value:function set(a,A,j){return delete this[j?"implicit":"explicit"][a],this[j?"explicit":"implicit"][a]=A,this}},{key:"copyKeyFromSplit",value:function copyKeyFromSplit(a,A){void 0!==A.explicit[a]?this.set(a,A.explicit[a],!0):void 0!==A.implicit[a]&&this.set(a,A.implicit[a],!1)}},{key:"copyKeyFromObject",value:function copyKeyFromObject(a,A){void 0!==A[a]&&this.set(a,A[a],!0)}},{key:"copyAll",value:function copyAll(a){var A,j=Object(pe.a)(Ae(a.combine()));try{for(j.s();!(A=j.n()).done;){var P=A.value,B=a.getWithExplicit(P);this.setWithExplicit(P,B)}}catch(q){j.e(q)}finally{j.f()}}}]),Split}();function split_makeExplicit(a){return{explicit:!0,value:a}}function makeImplicit(a){return{explicit:!1,value:a}}function tieBreakByComparing(a){return function(A,j,P,B){var q=a(A.value,j.value);return q>0?A:q<0?j:defaultTieBreaker(A,j,P,B)}}function defaultTieBreaker(a,A,j,B){return a.explicit&&A.explicit&&log_warn(P.mergeConflictingProperty(j,B,a.value,A.value)),a}function mergeValuesWithExplicit(a,A,j,P){var B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:defaultTieBreaker;return void 0===a||void 0===a.value?A:a.explicit&&!A.explicit?a:A.explicit&&!a.explicit?A:Oe(a.value,A.value)?a:B(a,A,j,P)}var ta,na=function(a){Object(Zr.a)(AncestorParse,a);var A=Object(ti.a)(AncestorParse);function AncestorParse(){var a,j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},B=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(zt.a)(this,AncestorParse),(a=A.call(this,j,P)).explicit=j,a.implicit=P,a.parseNothing=B,a}return Object(qt.a)(AncestorParse,[{key:"clone",value:function clone(){var clone=get_get(Object(Qr.a)(AncestorParse.prototype),"clone",this).call(this);return clone.parseNothing=this.parseNothing,clone}}]),AncestorParse}(Zi);function isUrlData(a){return"url"in a}function isInlineData(a){return"values"in a}function isNamedData(a){return"name"in a&&!isUrlData(a)&&!isInlineData(a)&&!isGenerator(a)}function isGenerator(a){return a&&(isSequenceGenerator(a)||isSphereGenerator(a)||isGraticuleGenerator(a))}function isSequenceGenerator(a){return"sequence"in a}function isSphereGenerator(a){return"sphere"in a}function isGraticuleGenerator(a){return"graticule"in a}function isFilter(a){return"filter"in a}function isLookup(a){return"lookup"in a}function isPivot(a){return"pivot"in a}function isDensity(a){return"density"in a}function isQuantile(a){return"quantile"in a}function isRegression(a){return"regression"in a}function isLoess(a){return"loess"in a}function isSample(a){return"sample"in a}function isWindow(a){return"window"in a}function isJoinAggregate(a){return"joinaggregate"in a}function isFlatten(a){return"flatten"in a}function isCalculate(a){return"calculate"in a}function isBin(a){return"bin"in a}function isImpute(a){return"impute"in a}function isTimeUnit(a){return"timeUnit"in a}function transform_isAggregate(a){return"aggregate"in a}function isStack(a){return"stack"in a}function isFold(a){return"fold"in a}!function(a){a[a.Raw=0]="Raw",a[a.Main=1]="Main",a[a.Row=2]="Row",a[a.Column=3]="Column",a[a.Lookup=4]="Lookup"}(ta||(ta={}));var ia,la,fa=/[[\]{}]/,da={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function eventSelector(a,A,j){return ia=A||"view",la=j||da,parseMerge(a.trim()).map(parseSelector)}function find(a,A,j,P,B){for(var q,ne=a.length,ie=0;A<ne;++A){if(q=a[A],!ie&&q===j)return A;B&&B.indexOf(q)>=0?--ie:P&&P.indexOf(q)>=0&&++ie}return A}function parseMerge(a){for(var A=[],j=a.length,P=0,B=0;B<j;)B=find(a,B,",","[{","]}"),A.push(a.substring(P,B).trim()),P=++B;if(0===A.length)throw"Empty event selector: "+a;return A}function parseSelector(a){return"["===a[0]?function parseBetween(a){var A,j=a.length,P=1;if((P=find(a,P,"]","[","]"))===j)throw"Empty between selector: "+a;if(2!==(A=parseMerge(a.substring(1,P))).length)throw"Between selector must have two elements: "+a;if(">"!==(a=a.slice(P+1).trim())[0])throw"Expected '>' after between selector: "+a;A=A.map(parseSelector);var B=parseSelector(a.slice(1).trim());if(B.between)return{between:A,stream:B};B.between=A;return B}(a):function parseStream(a){var A,j,P={source:ia},B=[],q=[0,0],ne=0,ie=0,oe=a.length,se=0;if("}"===a[oe-1]){if(!((se=a.lastIndexOf("{"))>=0))throw"Unmatched right brace: "+a;try{q=function parseThrottle(a){var A=a.split(",");if(!a.length||A.length>2)throw a;return A.map((function(A){var j=+A;if(j!==j)throw a;return j}))}(a.substring(se+1,oe-1))}catch(le){throw"Invalid throttle specification: "+a}a=a.slice(0,se).trim(),oe=a.length,se=0}if(!oe)throw a;"@"===a[0]&&(ne=++se);(A=find(a,se,":"))<oe&&(B.push(a.substring(ie,A).trim()),ie=se=++A);if((se=find(a,se,"["))===oe)B.push(a.substring(ie,oe).trim());else if(B.push(a.substring(ie,se).trim()),j=[],(ie=++se)===oe)throw"Unmatched left bracket: "+a;for(;se<oe;){if((se=find(a,se,"]"))===oe)throw"Unmatched left bracket: "+a;if(j.push(a.substring(ie,se).trim()),se<oe-1&&"["!==a[++se])throw"Expected left bracket: "+a;ie=++se}if(!(oe=B.length)||fa.test(B[oe-1]))throw"Invalid event selector: "+a;oe>1?(P.type=B[1],ne?P.markname=B[0].slice(1):!function isMarkType(a){return la[a]}(B[0])?P.source=B[0]:P.marktype=B[0]):P.type=B[0];"!"===P.type.slice(-1)&&(P.consume=!0,P.type=P.type.slice(0,-1));null!=j&&(P.filter=j);q[0]&&(P.throttle=q[0]);q[1]&&(P.debounce=q[1]);return P}(a)}function wrapCondition(a,A,j,P){var B=isConditionalDef(A)&&A.condition,q=P(A);if(B){var ne=array(B).map((function(A){var j=P(A),B=function isConditionalSelection(a){return a.selection}(A)?parseSelectionPredicate(a,A.selection):predicate_expression(a,A.test);return Object.assign({test:B},j)}));return Object(Ye.a)({},j,[].concat(Object(he.a)(ne),Object(he.a)(void 0!==q?[q]:[])))}return void 0!==q?Object(Ye.a)({},j,q):{}}function text_text(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",j=a.encoding[A];return wrapCondition(a,j,A,(function(A){return textRef(A,a.config)}))}function textRef(a,A){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"datum";if(a){if(isValueDef(a))return signalOrValueRef(a.value);if(isFieldOrDatumDef(a)){var P=getFormatMixins(a),B=P.format,q=P.formatType;return formatSignalRef({fieldOrDatumDef:a,format:B,formatType:q,expr:j,config:A})}}}function tooltip_tooltip(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=a.encoding,P=a.markDef,B=a.config,q=a.stack,ne=j.tooltip;if(oe(ne))return{tooltip:tooltipRefForEncoding({tooltip:ne},q,B,A)};var ie=A.reactiveGeom?"datum.datum":"datum";return wrapCondition(a,ne,"tooltip",(function(a){var ne=textRef(a,B,ie);if(ne)return ne;if(null!==a){var oe=getMarkPropOrConfig("tooltip",P,B);return!0===oe&&(oe={content:"encoding"}),isString(oe)?{value:oe}:isObject(oe)?isSignalRef(oe)?oe:"encoding"===oe.content?tooltipRefForEncoding(j,q,B,A):{signal:ie}:void 0}}))}function tooltipData(a,A,j){var P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},B=P.reactiveGeom,q={},ne=B?"datum.datum":"datum",ie=[];function add(P,B){var oe,se=getMainRangeChannel(B),le=isTypedFieldDef(P)?P:Object.assign(Object.assign({},P),{type:a[se].type}),he=array(le.title||defaultTitle(le,j)).join(", ");if(isXorY(B)){var pe="x"===B?"x2":"y2",ge=getFieldDef(a[pe]);if(isBinned(le.bin)&&ge){var me=channeldef_vgField(le,{expr:ne}),ve=channeldef_vgField(ge,{expr:ne}),ye=getFormatMixins(le);oe=binFormatExpression(me,ve,ye.format,ye.formatType,j),q[pe]=!0}else if(A&&A.fieldChannel===B&&"normalize"===A.offset){var _e=getFormatMixins(le);oe=formatSignalRef({fieldOrDatumDef:le,format:_e.format,formatType:_e.formatType,expr:ne,config:j,normalizeStack:!0}).signal}}oe=null!==oe&&void 0!==oe?oe:textRef(le,j,ne).signal,ie.push({channel:B,key:he,value:oe})}forEach(a,(function(a,A){isFieldDef(a)?add(a,A):hasConditionalFieldDef(a)&&add(a.condition,A)}));for(var oe={},se=0,le=ie;se<le.length;se++){var he=le[se],pe=he.channel,ge=he.key,me=he.value;q[pe]||oe[ge]||(oe[ge]=me)}return oe}function tooltipRefForEncoding(a,A,j){var P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},B=P.reactiveGeom,q=tooltipData(a,A,j,{reactiveGeom:B}),ne=Fe(q).map((function(a){var A=Object(ge.a)(a,2),j=A[0],P=A[1];return'"'.concat(j,'": ').concat(P)}));return ne.length>0?{signal:"{".concat(ne.join(", "),"}")}:void 0}function aria_aria(a){var A=getMarkPropOrConfig("aria",a.markDef,a.config);return!1===A?{}:Object.assign(Object.assign(Object.assign({},A?{aria:A}:{}),function ariaRoleDescription(a){var A=a.mark,j=a.markDef,P=a.config;if(!1===P.aria)return{};var B=getMarkPropOrConfig("ariaRoleDescription",j,P);if(null!=B)return{ariaRoleDescription:{value:B}};return A in bn?{}:{ariaRoleDescription:{value:A}}}(a)),function description(a){var A=a.encoding,j=a.markDef,P=a.config,B=a.stack,q=A.description;if(q)return wrapCondition(a,q,"description",(function(A){return textRef(A,a.config)}));var ne=getMarkPropOrConfig("description",j,P);if(null!=ne)return{description:signalOrValueRef(ne)};if(!1===P.aria)return{};var ie=tooltipData(A,B,P);if(isEmpty(ie))return;return{description:{signal:Fe(ie).map((function(a,A){var j=Object(ge.a)(a,2),P=j[0],B=j[1];return'"'.concat(A>0?"; ":"").concat(P,': " + (').concat(B,")")})).join(" + ")}}}(a))}function nonPosition(a,A){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},P=A.markDef,B=A.encoding,q=A.config,ne=j.vgChannel,ie=j.defaultRef,oe=j.defaultValue;void 0===ie&&void 0!==(oe=null!==oe&&void 0!==oe?oe:getMarkPropOrConfig(a,P,q,{vgChannel:ne,ignoreVgConfig:!0}))&&(ie=signalOrValueRef(oe));var se=B[a];return wrapCondition(A,se,null!==ne&&void 0!==ne?ne:a,(function(j){return midPoint({channel:a,channelDef:j,markDef:P,config:q,scaleName:A.scaleName(a),scale:A.getScaleComponent(a),stack:null,defaultRef:ie})}))}function color_color(a){var A,j,B,q,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{filled:void 0},ie=a.markDef,oe=a.encoding,se=a.config,le=ie.type,he=null!==(A=ne.filled)&&void 0!==A?A:getMarkPropOrConfig("filled",ie,se),pe=util_contains(["bar","point","circle","square","geoshape"],le)?"transparent":void 0,ge=null!==(B=null!==(j=getMarkPropOrConfig(!0===he?"color":void 0,ie,se,{vgChannel:"fill"}))&&void 0!==j?j:se.mark[!0===he&&"color"])&&void 0!==B?B:pe,me=null!==(q=getMarkPropOrConfig(!1===he?"color":void 0,ie,se,{vgChannel:"stroke"}))&&void 0!==q?q:se.mark[!1===he&&"color"],ve=he?"fill":"stroke",ye=Object.assign(Object.assign({},ge?{fill:signalOrValueRef(ge)}:{}),me?{stroke:signalOrValueRef(me)}:{});return ie.color&&(he?ie.fill:ie.stroke)&&log_warn(P.droppingColor("property",{fill:"fill"in ie,stroke:"stroke"in ie})),Object.assign(Object.assign(Object.assign(Object.assign({},ye),nonPosition("color",a,{vgChannel:ve,defaultValue:he?ge:me})),nonPosition("fill",a,{defaultValue:oe.fill?ge:void 0})),nonPosition("stroke",a,{defaultValue:oe.stroke?me:void 0}))}function getOffset(a,A){var j=A[function getOffsetChannel(a){switch(a){case at:return"xOffset";case ot:return"yOffset";case st:return"x2Offset";case ut:return"y2Offset";case ct:return"thetaOffset";case lt:return"radiusOffset";case ft:return"theta2Offset";case"radius2":return"radius2Offset"}}(a)];if(j)return j}function pointPosition(a,A,j){var P=j.defaultPos,B=j.vgChannel,q=j.isMidPoint,ne=A.encoding,ie=A.markDef,oe=A.config,se=A.stack,le=ne[a],he=ne[getSecondaryRangeChannel(a)],pe=A.scaleName(a),ge=A.getScaleComponent(a),me=getOffset(a,ie),ve=pointPositionDefaultRef({model:A,defaultPos:P,channel:a,scaleName:pe,scale:ge}),ye=!le&&isXorY(a)&&(ne.latitude||ne.longitude)?{field:A.getName(a)}:function positionRef(a){var A=a.channel,j=a.channelDef,P=a.isMidPoint,B=a.scaleName,q=a.stack,ne=a.offset,ie=a.markDef,oe=a.config;if(isFieldOrDatumDef(j)&&q&&A===q.fieldChannel){if(isFieldDef(j)){var se=getBand({channel:A,fieldDef:j,isMidPoint:P,markDef:ie,stack:q,config:oe});if(void 0!==se)return interpolatedSignalRef({scaleName:B,fieldOrDatumDef:j,startSuffix:"start",band:se,offset:ne})}return valueRefForFieldOrDatumDef(j,B,{suffix:"end"},{offset:ne})}return midPointRefWithPositionInvalidTest(a)}({channel:a,channelDef:le,channel2Def:he,markDef:ie,config:oe,isMidPoint:q,scaleName:pe,scale:ge,stack:se,offset:me,defaultRef:ve});return ye?Object(Ye.a)({},B||a,ye):void 0}function pointPositionDefaultRef(a){var A=a.model,j=a.defaultPos,P=a.channel,B=a.scaleName,q=a.scale,ne=A.markDef,ie=A.config;return function(){var a=getMainRangeChannel(P),oe=getVgPositionChannel(P),se=getMarkPropOrConfig(P,ne,ie,{vgChannel:oe});if(void 0!==se)return widthHeightValueOrSignalRef(P,se);switch(j){case"zeroOrMin":case"zeroOrMax":if(B){var le=q.get("type");if(util_contains([Tn,Fn,Pn],le));else if(q.domainDefinitelyIncludesZero())return{scale:B,value:0}}if("zeroOrMin"===j)return"y"===a?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:"min(".concat(A.width.signal,",").concat(A.height.signal,")/2")};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":var he=A[getSizeChannel(P)];return Object.assign(Object.assign({},he),{mult:.5})}}}var ha={left:"x",center:"xc",right:"x2"},ga={top:"y",middle:"yc",bottom:"y2"};function vgAlignedPositionChannel(a,A,j){var B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle";if("radius"===a||"theta"===a)return getVgPositionChannel(a);var q,ne="x"===a?"align":"baseline",ie=getMarkPropOrConfig(ne,A,j);return isSignalRef(ie)?(log_warn(P.rangeMarkAlignmentCannotBeExpression(ne)),q=void 0):q=ie,"x"===a?ha[q||("top"===B?"left":"center")]:ga[q||B]}function pointOrRangePosition(a,A,j){var P=j.defaultPos,B=j.defaultPos2;return j.range?rangePosition(a,A,{defaultPos:P,defaultPos2:B}):pointPosition(a,A,{defaultPos:P})}function rangePosition(a,A,j){var P=j.defaultPos,B=j.defaultPos2,q=A.markDef,ne=A.config,ie=getSecondaryRangeChannel(a),oe=getSizeChannel(a),se=function pointPosition2OrSize(a,A,j){var P,B=a.encoding,q=a.mark,ne=a.markDef,ie=a.stack,oe=a.config,se=getMainRangeChannel(j),le=getSizeChannel(j),he=getVgPositionChannel(j),pe=B[se],ge=a.scaleName(se),me=a.getScaleComponent(se),ve=getOffset(j in B||j in ne?j:se,a.markDef);if(!pe&&("x2"===j||"y2"===j)&&(B.latitude||B.longitude))return Object(Ye.a)({},he,{field:a.getName(j)});var ye=function position2Ref(a){var A=a.channel,j=a.channelDef,P=a.channel2Def,B=a.markDef,q=a.config,ne=a.scaleName,ie=a.scale,oe=a.stack,se=a.offset,le=a.defaultRef;if(isFieldOrDatumDef(j)&&oe&&A.charAt(0)===oe.fieldChannel.charAt(0))return valueRefForFieldOrDatumDef(j,ne,{suffix:"start"},{offset:se});return midPointRefWithPositionInvalidTest({channel:A,channelDef:P,scaleName:ne,scale:ie,stack:oe,markDef:B,config:q,offset:se,defaultRef:le})}({channel:j,channelDef:pe,channel2Def:B[j],markDef:ne,config:oe,scaleName:ge,scale:me,stack:ie,offset:ve,defaultRef:void 0});if(void 0!==ye)return Object(Ye.a)({},he,ye);return position2orSize(j,ne)||position2orSize(j,(P={},Object(Ye.a)(P,j,getMarkStyleConfig(j,ne,oe.style)),Object(Ye.a)(P,le,getMarkStyleConfig(le,ne,oe.style)),P))||position2orSize(j,oe[q])||position2orSize(j,oe.mark)||Object(Ye.a)({},he,pointPositionDefaultRef({model:a,defaultPos:A,channel:j,scaleName:ge,scale:me})())}(A,B,ie),le=se[oe]?vgAlignedPositionChannel(a,q,ne):getVgPositionChannel(a);return Object.assign(Object.assign({},pointPosition(a,A,{defaultPos:P,vgChannel:le})),se)}function position2orSize(a,A){var j=getSizeChannel(a),P=getVgPositionChannel(a);return void 0!==A[P]?Object(Ye.a)({},P,widthHeightValueOrSignalRef(a,A[P])):void 0!==A[a]?Object(Ye.a)({},P,widthHeightValueOrSignalRef(a,A[a])):A[j]?Object(Ye.a)({},j,widthHeightValueOrSignalRef(a,A[j])):void 0}function rectPosition(a,A,j){var B,q,ne,ie,se=a.config,le=a.encoding,he=a.markDef,pe=a.stack,ge=getSecondaryRangeChannel(A),me=getSizeChannel(A),ve=le[A],ye=le[ge],_e=a.getScaleComponent(A),we=_e?_e.get("type"):void 0,ke=a.scaleName(A),Oe=he.orient,Se=null!==(q=null!==(B=le[me])&&void 0!==B?B:le.size)&&void 0!==q?q:getMarkPropOrConfig("size",he,se,{vgChannel:me}),Te="bar"===j&&("x"===A?"vertical"===Oe:"horizontal"===Oe);if(isFieldDef(ve)&&(isBinning(ve.bin)||isBinned(ve.bin)||ve.timeUnit&&!ye)&&!Se&&!hasDiscreteDomain(we)){var Ae=getBand({channel:A,fieldDef:ve,stack:pe,markDef:he,config:se}),je=null===(ne=a.component.axes[A])||void 0===ne?void 0:ne[0];return function rectBinPosition(a){var A,j=a.fieldDef,B=a.fieldDef2,q=a.channel,ne=a.band,ie=a.scaleName,oe=a.markDef,se=a.spacing,le=void 0===se?0:se,he=a.axisTranslate,pe=a.reverse,ge=a.config,me=getSecondaryRangeChannel(q),ve=getVgPositionChannel(q),ye=getVgPositionChannel(me),_e=getOffset(q,oe);if(isBinning(j.bin)||j.timeUnit)return A={},Object(Ye.a)(A,ye,rectBinRef({channel:q,fieldDef:j,scaleName:ie,markDef:oe,band:(1-ne)/2,offset:getBinSpacing(me,le,pe,he,_e),config:ge})),Object(Ye.a)(A,ve,rectBinRef({channel:q,fieldDef:j,scaleName:ie,markDef:oe,band:1-(1-ne)/2,offset:getBinSpacing(q,le,pe,he,_e),config:ge})),A;if(isBinned(j.bin)){var we,ke,Oe=valueRefForFieldOrDatumDef(j,ie,{},{offset:getBinSpacing(me,le,pe,he,_e)});if(isFieldDef(B))return we={},Object(Ye.a)(we,ye,Oe),Object(Ye.a)(we,ve,valueRefForFieldOrDatumDef(B,ie,{},{offset:getBinSpacing(q,le,pe,he,_e)})),we;if(isBinParams(j.bin)&&j.bin.step)return ke={},Object(Ye.a)(ke,ye,Oe),Object(Ye.a)(ke,ve,{signal:'scale("'.concat(ie,'", ').concat(channeldef_vgField(j,{expr:"datum"})," + ").concat(j.bin.step,")"),offset:getBinSpacing(q,le,pe,he,_e)}),ke}return void log_warn(P.channelRequiredForBinned(me))}({fieldDef:ve,fieldDef2:ye,channel:A,markDef:he,scaleName:ke,band:Ae,axisTranslate:null!==(ie=null===je||void 0===je?void 0:je.get("translate"))&&void 0!==ie?ie:.5,spacing:isXorY(A)?getMarkPropOrConfig("binSpacing",he,se):void 0,reverse:_e.get("reverse"),config:se})}return(isFieldOrDatumDef(ve)&&hasDiscreteDomain(we)||Te)&&!ye?function positionAndSize(a,A,j,B){var q,ne,ie=B.markDef,se=B.encoding,le=B.config,he=B.stack,pe=ie.orient,ge=B.scaleName(j),me=B.getScaleComponent(j),ve=getSizeChannel(j),ye=getSecondaryRangeChannel(j),_e="horizontal"===pe&&"y"===j||"vertical"===pe&&"x"===j,we=getMarkPropOrConfig(_e?"size":ve,ie,le,{vgChannel:ve});(se.size||void 0!==we)&&(_e?ne=nonPosition("size",B,{vgChannel:ve,defaultValue:we}):log_warn(P.cannotApplySizeToNonOrientedMark(ie.type)));var ke=null!==(q=isFieldOrDatumDef(A)?getBand({channel:j,fieldDef:A,markDef:ie,stack:he,config:le}):void 0)&&void 0!==q?q:1;ne=ne||Object(Ye.a)({},ve,function defaultSizeRef(a,A,j,P,B,q){if(P){var ne=P.get("type");if("point"===ne||"band"===ne){if(void 0!==B[a].discreteBandSize)return{value:B[a].discreteBandSize};if(ne===In){var ie=P.get("range");return isVgRangeStep(ie)&&isNumber(ie.step)?{value:ie.step-2}:{value:Wr-2}}return{scale:j,band:q}}return{value:B[a].continuousBandSize}}var oe=getViewConfigDiscreteStep(B.view,A),se=getFirstDefined(B[a].discreteBandSize,oe-2);return void 0!==se?{value:se}:void 0}(a,ve,ge,me,le,ke));var Oe="band"!==(null===me||void 0===me?void 0:me.get("type"))||!("band"in ne[ve]),Se=vgAlignedPositionChannel(j,ie,le,Oe?"middle":"top"),Te=getOffset(j,ie),Ae=midPointRefWithPositionInvalidTest({channel:j,channelDef:A,markDef:ie,config:le,scaleName:ge,scale:me,stack:he,offset:Te,defaultRef:pointPositionDefaultRef({model:B,defaultPos:"mid",channel:j,scaleName:ge,scale:me}),band:Oe?.5:(1-ke)/2});if(ve)return Object.assign(Object(Ye.a)({},Se,Ae),ne);var je,Fe=getVgPositionChannel(ye),Re=ne[ve],Me=Te?Object.assign(Object.assign({},Re),{offset:Te}):Re;return je={},Object(Ye.a)(je,Se,Ae),Object(Ye.a)(je,Fe,oe(Ae)?[Ae[0],Object.assign(Object.assign({},Ae[1]),{offset:Me})]:Object.assign(Object.assign({},Ae),{offset:Me})),je}(j,ve,A,a):rangePosition(A,a,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function getBinSpacing(a,A,j,P,B){if(isPolarPositionChannel(a))return 0;var q="x"===a||"y2"===a?-A/2:A/2;if(isSignalRef(j)||isSignalRef(B)||isSignalRef(P)){var ne=signalOrStringValue(j),ie=signalOrStringValue(B),oe=signalOrStringValue(P);return{signal:(oe?"".concat(oe," + "):"")+(ne?"(".concat(ne," ? -1 : 1) * "):"")+(ie?"(".concat(ie," + ").concat(q,")"):q)}}return B=B||0,P+(j?-B-q:+B+q)}function rectBinRef(a){var A=a.channel,j=a.fieldDef,P=a.scaleName,B=a.markDef,q=a.band,ne=a.offset,ie=a.config;return wrapPositionInvalidTest({fieldDef:j,channel:A,markDef:B,ref:interpolatedSignalRef({scaleName:P,fieldOrDatumDef:j,band:q,offset:ne}),config:ie})}var ma=new Set(["aria"]);function baseEncodeEntry(a,A){var j="include"===A.color?color_color(a):{},P=j.fill,B=void 0===P?void 0:P,q=j.stroke,ne=void 0===q?void 0:q;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function markDefProperties(a,A){return yn.reduce((function(j,P){return ma.has(P)||void 0===a[P]||"ignore"===A[P]||(j[P]=signalOrValueRef(a[P])),j}),{})}(a.markDef,A)),wrapAllFieldsInvalid(a,"fill",B)),wrapAllFieldsInvalid(a,"stroke",ne)),nonPosition("opacity",a)),nonPosition("fillOpacity",a)),nonPosition("strokeOpacity",a)),nonPosition("strokeWidth",a)),nonPosition("strokeDash",a)),function zindex_zindex(a){var A=a.encoding,j=a.mark,P=A.order;return!isPathMark(j)&&isValueDef(P)?wrapCondition(a,P,"zindex",(function(a){return signalOrValueRef(a.value)})):{}}(a)),tooltip_tooltip(a)),text_text(a,"href")),aria_aria(a))}function wrapAllFieldsInvalid(a,A,j){var P=a.config,B=a.mark;if("hide"===getMarkPropOrConfig("invalid",a.markDef,P)&&j&&!isPathMark(B)){var q=function allFieldsInvalidPredicate(a,A){var j=A.invalid,P=void 0!==j&&j,B=A.channels.reduce((function(A,j){var P=a.getScaleComponent(j);if(P){var B=P.get("type"),q=a.vgField(j,{expr:"datum"});q&&hasContinuousDomain(B)&&(A[q]=!0)}return A}),{}),q=Ae(B);if(q.length>0){var ne=P?"||":"&&";return q.map((function(a){return fieldInvalidPredicate(a,P)})).join(" ".concat(ne," "))}return}(a,{invalid:!0,channels:It});if(q)return Object(Ye.a)({},A,[{test:q,value:null}].concat(Object(he.a)(array(j))))}return j?Object(Ye.a)({},A,j):{}}function defined(a){var A=a.config;if(getMarkPropOrConfig("invalid",a.markDef,A)){var j=function defined_allFieldsInvalidPredicate(a,A){var j=A.invalid,P=void 0!==j&&j,B=A.channels.reduce((function(A,j){var P=a.getScaleComponent(j);if(P){var B=P.get("type"),q=a.vgField(j,{expr:"datum"});q&&hasContinuousDomain(B)&&(A[q]=!0)}return A}),{}),q=Ae(B);if(q.length>0){var ne=P?"||":"&&";return q.map((function(a){return fieldInvalidPredicate(a,P)})).join(" ".concat(ne," "))}return}(a,{channels:jt});if(j)return{defined:{signal:j}}}return{}}function valueIfDefined(a,A){if(void 0!==A)return Object(Ye.a)({},a,signalOrValueRef(A))}var va={has:function has(a){return"interval"!==a.type&&a.nearest},parse:function parse(a,A){if(A.events){var j,P=Object(pe.a)(A.events);try{for(P.s();!(j=P.n()).done;){j.value.markname=a.getName("voronoi")}}catch(B){P.e(B)}finally{P.f()}}},marks:function marks(a,A,j){var B=A.project.hasChannel,q=B.x,ne=B.y,ie=a.mark;if(isPathMark(ie))return log_warn(P.nearestNotSupportForContinuous(ie)),j;var oe={name:a.getName("voronoi"),type:"path",interactive:!0,from:{data:a.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},tooltip_tooltip(a,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:q||!ne?"datum.datum.x || 0":"0"},y:{expr:ne||!q?"datum.datum.y || 0":"0"},size:[a.getSizeSignalRef("width"),a.getSizeSignalRef("height")]}]},se=0,le=!1;return j.forEach((function(A,j){var P,B=null!==(P=A.name)&&void 0!==P?P:"";B===a.component.mark[0].name?se=j:B.indexOf("voronoi")>=0&&(le=!0)})),le||j.splice(se+1,0,oe),j}},ya=function(){function DataFlowNode(a,A){Object(zt.a)(this,DataFlowNode),this.debugName=A,this._children=[],this._parent=null,a&&(this.parent=a)}return Object(qt.a)(DataFlowNode,[{key:"clone",value:function clone(){throw new Error("Cannot clone node")}},{key:"parent",get:function get(){return this._parent},set:function set(a){this._parent=a,a&&a.addChild(this)}},{key:"children",get:function get(){return this._children}},{key:"numChildren",value:function numChildren(){return this._children.length}},{key:"addChild",value:function addChild(a,A){this._children.indexOf(a)>-1?log_warn(P.ADD_SAME_CHILD_TWICE):void 0!==A?this._children.splice(A,0,a):this._children.push(a)}},{key:"removeChild",value:function removeChild(a){var A=this._children.indexOf(a);return this._children.splice(A,1),A}},{key:"remove",value:function remove(){var a,A=this._parent.removeChild(this),j=Object(pe.a)(this._children);try{for(j.s();!(a=j.n()).done;){var P=a.value;P._parent=this._parent,this._parent.addChild(P,A++)}}catch(B){j.e(B)}finally{j.f()}}},{key:"insertAsParentOf",value:function insertAsParentOf(a){var A=a.parent;A.removeChild(this),this.parent=A,a.parent=this}},{key:"swapWithParent",value:function swapWithParent(){var a,A=this._parent,j=A.parent,P=Object(pe.a)(this._children);try{for(P.s();!(a=P.n()).done;){a.value.parent=A}}catch(B){P.e(B)}finally{P.f()}this._children=[],A.removeChild(this),A.parent.removeChild(A),this.parent=j,A.parent=this}}]),DataFlowNode}(),_a=function(a){Object(Zr.a)(OutputNode,a);var A=Object(ti.a)(OutputNode);function OutputNode(a,j,P,B){var q;return Object(zt.a)(this,OutputNode),(q=A.call(this,a,j)).type=P,q.refCounts=B,q._source=q._name=j,q.refCounts&&!(q._name in q.refCounts)&&(q.refCounts[q._name]=0),q}return Object(qt.a)(OutputNode,[{key:"clone",value:function clone(){var a=new this.constructor;return a.debugName="clone_"+this.debugName,a._source=this._source,a._name="clone_"+this._name,a.type=this.type,a.refCounts=this.refCounts,a.refCounts[a._name]=0,a}},{key:"dependentFields",value:function dependentFields(){return new Set}},{key:"producedFields",value:function producedFields(){return new Set}},{key:"hash",value:function hash(){return void 0===this._hash&&(this._hash="Output ".concat(uniqueId())),this._hash}},{key:"getSource",value:function getSource(){return this.refCounts[this._name]++,this._source}},{key:"isRequired",value:function isRequired(){return!!this.refCounts[this._name]}},{key:"setSource",value:function setSource(a){this._source=a}}]),OutputNode}(ya),data_timeunit_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},wa=function(a){Object(Zr.a)(TimeUnitNode,a);var A=Object(ti.a)(TimeUnitNode);function TimeUnitNode(a,j){var P;return Object(zt.a)(this,TimeUnitNode),(P=A.call(this,a)).formula=j,P}return Object(qt.a)(TimeUnitNode,[{key:"clone",value:function clone(){return new TimeUnitNode(null,Se(this.formula))}},{key:"merge",value:function merge(a){for(var A in this.formula=Object.assign({},this.formula),a.formula)this.formula[A]&&!a.formula[A].band||(this.formula[A]=a.formula[A]);var j,P=Object(pe.a)(a.children);try{for(P.s();!(j=P.n()).done;){var B=j.value;a.removeChild(B),B.parent=this}}catch(q){P.e(q)}finally{P.f()}a.remove()}},{key:"removeFormulas",value:function removeFormulas(a){var A,j={},P=Object(pe.a)(Fe(this.formula));try{for(P.s();!(A=P.n()).done;){var B=Object(ge.a)(A.value,2),q=B[0],ne=B[1];a.has(ne.as)||(j[q]=ne)}}catch(ie){P.e(ie)}finally{P.f()}this.formula=j}},{key:"producedFields",value:function producedFields(){return new Set(je(this.formula).map((function(a){return a.as})))}},{key:"dependentFields",value:function dependentFields(){return new Set(je(this.formula).map((function(a){return a.field})))}},{key:"hash",value:function hash(){return"TimeUnit ".concat(util_hash(this.formula))}},{key:"assemble",value:function assemble(){var a,A=[],j=Object(pe.a)(je(this.formula));try{for(j.s();!(a=j.n()).done;){var P=a.value,B=P.field,q=P.as,ne=normalizeTimeUnit(P.timeUnit),ie=ne.unit,oe=ne.utc,se=data_timeunit_rest(ne,["unit","utc"]);A.push(Object.assign(Object.assign(Object.assign(Object.assign({field:replacePathInField(B),type:"timeunit"},ie?{units:getTimeUnitParts(ie)}:{}),oe?{timezone:"utc"}:{}),se),{as:[q,"".concat(q,"_end")]}))}}catch(le){j.e(le)}finally{j.f()}return A}}],[{key:"makeFromEncoding",value:function makeFromEncoding(a,A){var j=A.reduceFieldDef((function(a,j,P){var B=j.field,q=j.timeUnit,ne=isUnitModel(A)?A.encoding[getSecondaryRangeChannel(P)]:void 0,ie=isUnitModel(A)&&hasBand(P,j,ne,A.stack,A.markDef,A.config);if(q){var oe=channeldef_vgField(j,{forAs:!0});a[util_hash({as:oe,field:B,timeUnit:q})]=Object.assign({as:oe,field:B,timeUnit:q},ie?{band:!0}:{})}return a}),{});return isEmpty(j)?null:new TimeUnitNode(a,j)}},{key:"makeFromTransform",value:function makeFromTransform(a,A){var j=Object.assign({},A),P=j.timeUnit,B=data_timeunit_rest(j,["timeUnit"]),q=normalizeTimeUnit(P),ne=Object.assign(Object.assign({},B),{timeUnit:q});return new TimeUnitNode(a,Object(Ye.a)({},util_hash(ne),ne))}}]),TimeUnitNode}(ya),project_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},Oa=Object(qt.a)((function SelectionProjectionComponent(){Object(zt.a)(this,SelectionProjectionComponent);for(var a=arguments.length,A=new Array(a),j=0;j<a;j++)A[j]=arguments[j];this.items=A,this.hasChannel={},this.hasField={}})),Aa={has:function has(a){return"single"===a.type&&"global"===a.resolve&&a.bind&&"scales"!==a.bind&&!isLegendBinding(a.bind)},parse:function parse(a,A,j,P){P.on||delete A.events,P.clear||delete A.clear},topLevelSignals:function topLevelSignals(a,A,j){var P=A.name,B=A.project,q=A.bind,ne=A.init&&A.init[0],ie=va.has(A)?"(item().isVoronoi ? datum.datum : datum)":"datum";return B.items.forEach((function(a,B){var oe,se,le=varName("".concat(P,"_").concat(a.field));j.filter((function(a){return a.name===le})).length||j.unshift(Object.assign(Object.assign({name:le},ne?{init:assembleInit(ne[B])}:{value:null}),{on:A.events?[{events:A.events,update:"datum && item().mark.marktype !== 'group' ? ".concat(ie,"[").concat($(a.field),"] : null")}]:[],bind:null!==(se=null!==(oe=q[a.field])&&void 0!==oe?oe:q[a.channel])&&void 0!==se?se:q}))})),j},signals:function signals(a,A,j){var P=A.name,B=A.project,q=j.filter((function(a){return a.name===P+no}))[0],ne=P+"_tuple_fields",ie=B.items.map((function(a){return varName("".concat(P,"_").concat(a.field))})),oe=ie.map((function(a){return"".concat(a," !== null")})).join(" && ");return ie.length&&(q.update="".concat(oe," ? {fields: ").concat(ne,", values: [").concat(ie.join(", "),"]} : null")),delete q.value,delete q.on,j}},Pa={has:function has(a){return"multi"===a.type&&!!a.toggle},signals:function signals(a,A,j){return j.concat({name:A.name+"_toggle",value:!1,on:[{events:A.events,update:A.toggle}]})},modifyExpr:function modifyExpr(a,A){var j=A.name+no,P=A.name+"_toggle";return"".concat(P," ? null : ").concat(j,", ")+("global"===A.resolve?"".concat(P," ? null : true, "):"".concat(P," ? null : {unit: ").concat(selection_unitName(a),"}, "))+"".concat(P," ? ").concat(j," : null")}},Na={has:function has(a){return void 0!==a.clear&&!1!==a.clear},parse:function parse(a,A,j){j.clear&&(A.clear=isString(j.clear)?eventSelector(j.clear,"scope"):j.clear)},topLevelSignals:function topLevelSignals(a,A,j){if(Aa.has(A)){var P,B=Object(pe.a)(A.project.items);try{var q=function _loop(){var a=P.value,B=j.findIndex((function(j){return j.name===varName("".concat(A.name,"_").concat(a.field))}));-1!==B&&j[B].on.push({events:A.clear,update:"null"})};for(B.s();!(P=B.n()).done;)q()}catch(ne){B.e(ne)}finally{B.f()}}return j},signals:function signals(a,A,j){function addClear(a,P){-1!==a&&j[a].on&&j[a].on.push({events:A.clear,update:P})}if("interval"===A.type){var P,B=Object(pe.a)(A.project.items);try{var q=function _loop2(){var a=P.value,A=j.findIndex((function(A){return A.name===a.signals.visual}));(addClear(A,"[0, 0]"),-1===A)&&addClear(j.findIndex((function(A){return A.name===a.signals.data})),"null")};for(B.s();!(P=B.n()).done;)q()}catch(ie){B.e(ie)}finally{B.f()}}else{var ne=j.findIndex((function(a){return a.name===A.name+no}));addClear(ne,"null"),Pa.has(A)&&addClear(ne=j.findIndex((function(a){return a.name===A.name+"_toggle"})),"false")}return j}},Ba={has:function has(a){return"interval"===a.type&&"global"===a.resolve&&a.bind&&"scales"===a.bind},parse:function parse(a,A){var j,B=A.scales=[],q=Object(pe.a)(A.project.items);try{for(q.s();!(j=q.n()).done;){var ne=j.value,ie=ne.channel;if(isScaleChannel(ie)){var oe=a.getScaleComponent(ie),se=oe?oe.get("type"):void 0;if(oe&&hasContinuousDomain(se)){var le={selection:A.name,field:ne.field};oe.set("selectionExtent",le,!0),B.push(ne)}else log_warn(P.SCALE_BINDINGS_CONTINUOUS)}}}catch(he){q.e(he)}finally{q.f()}},topLevelSignals:function topLevelSignals(a,A,j){var P=A.scales.filter((function(a){return 0===j.filter((function(A){return A.name===a.signals.data})).length}));if(!a.parent||isTopLevelLayer(a)||0===P.length)return j;var B=j.filter((function(a){return a.name===A.name}))[0],q=B.update;if(q.indexOf(io)>=0)B.update="{".concat(P.map((function(a){return"".concat($(a.field),": ").concat(a.signals.data)})).join(", "),"}");else{var ne,ie=Object(pe.a)(P);try{for(ie.s();!(ne=ie.n()).done;){var oe=ne.value,se="".concat($(oe.field),": ").concat(oe.signals.data);q.indexOf(se)<0&&(q="".concat(q.substring(0,q.length-1),", ").concat(se,"}"))}}catch(le){ie.e(le)}finally{ie.f()}B.update=q}return j.concat(P.map((function(a){return{name:a.signals.data}})))},signals:function signals(a,A,j){if(a.parent&&!isTopLevelLayer(a)){var P,B=Object(pe.a)(A.scales);try{var q=function _loop(){var a=P.value,A=j.filter((function(A){return A.name===a.signals.data}))[0];A.push="outer",delete A.value,delete A.update};for(B.s();!(P=B.n()).done;)q()}catch(ne){B.e(ne)}finally{B.f()}}return j}};function scales_domain(a,A){var j=$(a.scaleName(A));return"domain(".concat(j,")")}function isTopLevelLayer(a){var A;return a.parent&&isLayerModel(a.parent)&&(null!==(A=!a.parent.parent)&&void 0!==A?A:isTopLevelLayer(a.parent.parent))}var Ua={has:function has(a){var A="global"===a.resolve&&a.bind&&isLegendBinding(a.bind),j=1===a.project.items.length&&"_vgsid_"!==a.project.items[0].field;return A&&!j&&log_warn(P.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),A&&j},parse:function parse(a,A,j,P){var B;if(P.on||delete A.events,P.clear||delete A.clear,P.on||P.clear){var q,ne='event.item && indexof(event.item.mark.role, "legend") < 0',ie=Object(pe.a)(A.events);try{for(ie.s();!(q=ie.n()).done;){var oe=q.value;oe.filter=array(null!==(B=oe.filter)&&void 0!==B?B:[]),oe.filter.indexOf(ne)<0&&oe.filter.push(ne)}}catch(he){ie.e(he)}finally{ie.f()}}var se=isLegendStreamBinding(A.bind)?A.bind.legend:"click",le=isString(se)?eventSelector(se,"view"):array(se);A.bind={legend:{merge:le}}},topLevelSignals:function topLevelSignals(a,A,j){var P,B=A.name,q=isLegendStreamBinding(A.bind)&&A.bind.legend,ne=function markName(a){return function(A){var j=Se(A);return j.markname=a,j}},ie=Object(pe.a)(A.project.items);try{var oe=function _loop(){var a=P.value;if(!a.hasLegend)return"continue";var ie="".concat(varName(a.field),"_legend"),oe="".concat(B,"_").concat(ie);if(0===j.filter((function(a){return a.name===oe})).length){var se=q.merge.map(ne("".concat(ie,"_symbols"))).concat(q.merge.map(ne("".concat(ie,"_labels")))).concat(q.merge.map(ne("".concat(ie,"_entries"))));j.unshift(Object.assign(Object.assign({name:oe},A.init?{}:{value:null}),{on:[{events:se,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:q.merge,update:"!event.item || !datum ? null : ".concat(oe),force:!0}]}))}};for(ie.s();!(P=ie.n()).done;)oe()}catch(se){ie.e(se)}finally{ie.f()}return j},signals:function signals(a,A,j){var P=A.name,B=A.project,q=j.find((function(a){return a.name===P+no})),ne=P+"_tuple_fields",ie=B.items.filter((function(a){return a.hasLegend})).map((function(a){return varName("".concat(P,"_").concat(varName(a.field),"_legend"))})),oe=ie.map((function(a){return"".concat(a," !== null")})).join(" && "),se="".concat(oe," ? {fields: ").concat(ne,", values: [").concat(ie.join(", "),"]} : null");A.events&&ie.length>0?q.on.push({events:ie.map((function(a){return{signal:a}})),update:se}):ie.length>0&&(q.update=se,delete q.value,delete q.on);var le=j.find((function(a){return a.name===P+"_toggle"})),he=isLegendStreamBinding(A.bind)&&A.bind.legend;return le&&(A.events?le.on.push(Object.assign(Object.assign({},le.on[0]),{events:he})):le.on[0].events=he),j}};var qa="_translate_delta",Wa={has:function has(a){return"interval"===a.type&&a.translate},signals:function signals(a,A,j){var P=A.name,B=Ba.has(A),q=P+"_translate_anchor",ne=A.project.hasChannel,ie=ne.x,oe=ne.y,se=eventSelector(A.translate,"scope");return B||(se=se.map((function(a){return a.between[0].markname=P+Ka,a}))),j.push({name:q,value:{},on:[{events:se.map((function(a){return a.between[0]})),update:"{x: x(unit), y: y(unit)"+(void 0!==ie?", extent_x: "+(B?scales_domain(a,at):"slice(".concat(ie.signals.visual,")")):"")+(void 0!==oe?", extent_y: "+(B?scales_domain(a,ot):"slice(".concat(oe.signals.visual,")")):"")+"}"}]},{name:P+qa,value:{},on:[{events:se,update:"{x: ".concat(q,".x - x(unit), y: ").concat(q,".y - y(unit)}")}]}),void 0!==ie&&onDelta(a,A,ie,"width",j),void 0!==oe&&onDelta(a,A,oe,"height",j),j}};function onDelta(a,A,j,P,B){var q,ne=A.name,ie=ne+"_translate_anchor",oe=ne+qa,se=j.channel,le=Ba.has(A),he=B.filter((function(a){return a.name===j.signals[le?"data":"visual"]}))[0],pe=a.getSizeSignalRef(P).signal,ge=a.getScaleComponent(se),me=ge.get("type"),ve=le&&se===at?"-":"",ye="".concat(ie,".extent_").concat(se),_e="".concat(ve).concat(oe,".").concat(se," / ")+(le?"".concat(pe):"span(".concat(ye,")")),we="".concat(le?"log"===me?"panLog":"pow"===me?"panPow":"panLinear":"panLinear","(").concat(ye,", ").concat(_e)+(le&&"pow"===me?", ".concat(null!==(q=ge.get("exponent"))&&void 0!==q?q:1):"")+")";he.on.push({events:{signal:oe},update:le?we:"clampRange(".concat(we,", 0, ").concat(pe,")")})}var Ya={has:function has(a){return"interval"===a.type&&a.zoom},signals:function signals(a,A,j){var P=A.name,B=Ba.has(A),q=P+"_zoom_delta",ne=A.project.hasChannel,ie=ne.x,oe=ne.y,se=$(a.scaleName(at)),le=$(a.scaleName(ot)),he=eventSelector(A.zoom,"scope");return B||(he=he.map((function(a){return a.markname=P+Ka,a}))),j.push({name:P+"_zoom_anchor",on:[{events:he,update:B?"{"+[se?"x: invert(".concat(se,", x(unit))"):"",le?"y: invert(".concat(le,", y(unit))"):""].filter((function(a){return!!a})).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:q,on:[{events:he,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==ie&&zoom_onDelta(a,A,ie,"width",j),void 0!==oe&&zoom_onDelta(a,A,oe,"height",j),j}};function zoom_onDelta(a,A,j,P,B){var q,ne=A.name,ie=j.channel,oe=Ba.has(A),se=B.filter((function(a){return a.name===j.signals[oe?"data":"visual"]}))[0],le=a.getSizeSignalRef(P).signal,he=a.getScaleComponent(ie),pe=he.get("type"),ge=oe?scales_domain(a,ie):se.name,me=ne+"_zoom_delta",ve="".concat(ne).concat("_zoom_anchor",".").concat(ie),ye="".concat(oe?"log"===pe?"zoomLog":"pow"===pe?"zoomPow":"zoomLinear":"zoomLinear","(").concat(ge,", ").concat(ve,", ").concat(me)+(oe&&"pow"===pe?", ".concat(null!==(q=he.get("exponent"))&&void 0!==q?q:1):"")+")";se.on.push({events:{signal:me},update:oe?ye:"clampRange(".concat(ye,", 0, ").concat(le,")")})}var $a=[{has:function has(){return!0},parse:function parse(a,A,j){var B,q,ne,ie=A.name,oe=null!==(B=A.project)&&void 0!==B?B:A.project=new Oa,se={},le={},he=new Set,ge=function signalName(a,A){for(var j="visual"===A?a.channel:a.field,P=varName("".concat(ie,"_").concat(j)),B=1;he.has(P);B++)P=varName("".concat(ie,"_").concat(j,"_").concat(B));return he.add(P),Object(Ye.a)({},A,P)};if(!j.fields&&!j.encodings){var me=a.config.selection[j.type];if(j.init){var ve,ye=Object(pe.a)(array(j.init));try{for(ye.s();!(ve=ye.n()).done;){var _e,we=ve.value,ke=Object(pe.a)(Ae(we));try{for(ke.s();!(_e=ke.n()).done;){var Oe=_e.value;Et[Oe]?(j.encodings||(j.encodings=[])).push(Oe):"interval"===j.type?(log_warn(P.INTERVAL_INITIALIZED_WITH_X_Y),j.encodings=me.encodings):(j.fields||(j.fields=[])).push(Oe)}}catch(tt){ke.e(tt)}finally{ke.f()}}}catch(tt){ye.e(tt)}finally{ye.f()}}else j.encodings=me.encodings,j.fields=me.fields}var Se,Te=Object(pe.a)(null!==(q=j.fields)&&void 0!==q?q:[]);try{for(Te.s();!(Se=Te.n()).done;){var je=Se.value,Fe={type:"E",field:je};Fe.signals=Object.assign({},ge(Fe,"data")),oe.items.push(Fe),oe.hasField[je]=Fe}}catch(tt){Te.e(tt)}finally{Te.f()}var Re,Me=Object(pe.a)(null!==(ne=j.encodings)&&void 0!==ne?ne:[]);try{for(Me.s();!(Re=Me.n()).done;){var Ne=Re.value,Be=a.fieldDef(Ne);if(Be){var Ue=Be.field;if(Be.aggregate){log_warn(P.cannotProjectAggregate(Ne,Be.aggregate));continue}if(!Ue){log_warn(P.cannotProjectOnChannelWithoutField(Ne));continue}if(Be.timeUnit){Ue=a.vgField(Ne);var We={timeUnit:Be.timeUnit,as:Ue,field:Be.field};le[util_hash(We)]=We}if(!se[Ue]){var Ve="E";if("interval"===A.type)hasContinuousDomain(a.getScaleComponent(Ne).get("type"))&&(Ve="R");else Be.bin&&(Ve="R-RE");var $e={field:Ue,channel:Ne,type:Ve};$e.signals=Object.assign(Object.assign({},ge($e,"data")),ge($e,"visual")),oe.items.push(se[Ue]=$e),oe.hasField[Ue]=oe.hasChannel[Ne]=se[Ue]}}else log_warn(P.cannotProjectOnChannelWithoutField(Ne))}}catch(tt){Me.e(tt)}finally{Me.f()}if(j.init){var Xe=function parseInit(a){return oe.items.map((function(A){return void 0!==a[A.channel]?a[A.channel]:a[A.field]}))};if("interval"===j.type)A.init=Xe(j.init);else{var et=array(j.init);A.init=et.map(Xe)}}isEmpty(le)||(oe.timeUnit=new wa(null,le))},signals:function signals(a,A,j){var P=A.name+"_tuple_fields";return j.filter((function(a){return a.name===P})).length>0?j:j.concat({name:P,value:A.project.items.map((function(a){a.signals,a.hasLegend;var A=project_rest(a,["signals","hasLegend"]);return A.field=replacePathInField(A.field),A}))})}},Pa,Ba,Ua,Wa,Ya,Aa,va,Na];function forEachTransform(a,A){var j,P=Object(pe.a)($a);try{for(P.s();!(j=P.n()).done;){var B=j.value;B.has(a)&&A(B)}}catch(q){P.e(q)}finally{P.f()}}var assemble_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function assembleInit(a){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ie;if(oe(a)){var P=a.map((function(a){return assembleInit(a,A,j)}));return A?"[".concat(P.join(", "),"]"):P}return isDateTime(a)?j(A?dateTimeToExpr(a):dateTimeToTimestamp(a)):A?j(JSON.stringify(a)):a}function assembleUnitSelectionMarks(a,A){return forEachSelection(a,(function(j,P){A=P.marks?P.marks(a,j,A):A,forEachTransform(j,(function(P){P.marks&&(A=P.marks(a,j,A))}))})),A}function cleanupEmptyOnArray(a){return a.map((function(a){return a.on&&!a.on.length&&delete a.on,a}))}var interval_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},Ka="_brush",Ja={signals:function signals(a,A){var j=A.name,P=j+"_tuple_fields",B=Ba.has(A),signals=[],q=[],ne=[];if(A.translate&&!B){var ie="!event.item || event.item.mark.name !== ".concat($(j+Ka));interval_events(A,(function(a,A){var j,P=array(null!==(j=A.between[0].filter)&&void 0!==j?j:A.between[0].filter=[]);return P.indexOf(ie)<0&&P.push(ie),a}))}A.project.items.forEach((function(j,P){var B=j.channel;if(B===at||B===ot){var ie=A.init?A.init[P]:null,oe=function channelSignals(a,A,j,P){var B=j.channel,q=j.signals.visual,ne=j.signals.data,ie=Ba.has(A),oe=$(a.scaleName(B)),se=a.getScaleComponent(B),le=se?se.get("type"):void 0,pe=function scaled(a){return"scale(".concat(oe,", ").concat(a,")")},ge=a.getSizeSignalRef(B===at?"width":"height").signal,me="".concat(B,"(unit)"),ve=interval_events(A,(function(a,A){return[].concat(Object(he.a)(a),[{events:A.between[0],update:"[".concat(me,", ").concat(me,"]")},{events:A,update:"[".concat(q,"[0], clamp(").concat(me,", 0, ").concat(ge,")]")}])}));return ve.push({events:{signal:A.name+"_scale_trigger"},update:hasContinuousDomain(le)?"[".concat(pe("".concat(ne,"[0]")),", ").concat(pe("".concat(ne,"[1]")),"]"):"[0, 0]"}),ie?[{name:ne,on:[]}]:[Object.assign(Object.assign({name:q},P?{init:assembleInit(P,!0,pe)}:{value:[]}),{on:ve}),Object.assign(Object.assign({name:ne},P?{init:assembleInit(P)}:{}),{on:[{events:{signal:q},update:"".concat(q,"[0] === ").concat(q,"[1] ? null : invert(").concat(oe,", ").concat(q,")")}]})]}(a,A,j,ie),se=j.signals.data,le=j.signals.visual,pe=$(a.scaleName(B)),ge=hasContinuousDomain(a.getScaleComponent(B).get("type"))?"+":"";signals.push.apply(signals,Object(he.a)(oe)),q.push(se),ne.push({scaleName:a.scaleName(B),expr:"(!isArray(".concat(se,") || ")+"(".concat(ge,"invert(").concat(pe,", ").concat(le,")[0] === ").concat(ge).concat(se,"[0] && ")+"".concat(ge,"invert(").concat(pe,", ").concat(le,")[1] === ").concat(ge).concat(se,"[1]))")})}else log_warn("Interval selections only support x and y encoding channels.")})),B||signals.push({name:j+"_scale_trigger",value:{},on:[{events:ne.map((function(a){return{scale:a.scaleName}})),update:ne.map((function(a){return a.expr})).join(" && ")+" ? ".concat(j+"_scale_trigger"," : {}")}]});var oe=A.init,se="unit: ".concat(selection_unitName(a),", fields: ").concat(P,", values");return signals.concat(Object.assign(Object.assign({name:j+no},oe?{init:"{".concat(se,": ").concat(assembleInit(oe),"}")}:{}),{on:[{events:[{signal:q.join(" || ")}],update:q.join(" && ")+" ? {".concat(se,": [").concat(q,"]} : null")}]}))},modifyExpr:function modifyExpr(a,A){return A.name+no+", "+("global"===A.resolve?"true":"{unit: ".concat(selection_unitName(a),"}"))},marks:function marks(a,A,j){var P=A.name,B=A.project.hasChannel,q=B.x,ne=B.y,ie=q&&q.signals.visual,oe=ne&&ne.signals.visual,se="data(".concat($(A.name+eo),")");if(Ba.has(A))return j;var le={x:void 0!==q?{signal:"".concat(ie,"[0]")}:{value:0},y:void 0!==ne?{signal:"".concat(oe,"[0]")}:{value:0},x2:void 0!==q?{signal:"".concat(ie,"[1]")}:{field:{group:"width"}},y2:void 0!==ne?{signal:"".concat(oe,"[1]")}:{field:{group:"height"}}};if("global"===A.resolve){var ge,me=Object(pe.a)(Ae(le));try{for(me.s();!(ge=me.n()).done;){var ve=ge.value;le[ve]=[Object.assign({test:"".concat(se,".length && ").concat(se,"[0].unit === ").concat(selection_unitName(a))},le[ve]),{value:0}]}}catch(Te){me.e(Te)}finally{me.f()}}var ye=A.mark,_e=ye.fill,we=ye.fillOpacity,ke=ye.cursor,Oe=interval_rest(ye,["fill","fillOpacity","cursor"]),Se=Ae(Oe).reduce((function(a,A){return a[A]=[{test:[void 0!==q&&"".concat(ie,"[0] !== ").concat(ie,"[1]"),void 0!==ne&&"".concat(oe,"[0] !== ").concat(oe,"[1]")].filter((function(a){return a})).join(" && "),value:Oe[A]},{value:null}],a}),{});return[{name:P+Ka+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:_e},fillOpacity:{value:we}},update:le}}].concat(Object(he.a)(j),[{name:P+Ka,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},ke?{cursor:{value:ke}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},le),Se)}}])}};function interval_events(a,A){return a.events.reduce((function(a,j){return j.between?A(a,j):(log_warn("".concat(j," is not an ordered event stream for interval selections.")),a)}),[])}function singleOrMultiSignals(a,A){var j=A.name,P=j+"_tuple_fields",B=A.project,q="(item().isVoronoi ? datum.datum : datum)",ne=B.items.map((function(A){var j=a.fieldDef(A.channel);return j&&j.bin?"[".concat(q,"[").concat($(a.vgField(A.channel,{})),"], ")+"".concat(q,"[").concat($(a.vgField(A.channel,{binSuffix:"end"})),"]]"):"".concat(q,"[").concat($(A.field),"]")})).join(", "),ie="unit: ".concat(selection_unitName(a),", fields: ").concat(P,", values"),oe=A.events;return[{name:j+no,on:oe?[{events:oe,update:"datum && item().mark.marktype !== 'group' ? {".concat(ie,": [").concat(ne,"]} : null"),force:!0}]:[]}]}var Qa={signals:singleOrMultiSignals,modifyExpr:function modifyExpr(a,A){return A.name+no+", "+("global"===A.resolve?"null":"{unit: ".concat(selection_unitName(a),"}"))}},Za={signals:singleOrMultiSignals,modifyExpr:function modifyExpr(a,A){return A.name+no+", "+("global"===A.resolve?"true":"{unit: ".concat(selection_unitName(a),"}"))}},eo="_store",no="_tuple",ro="_modify",io="vlSelectionResolve",ao={single:Za,multi:Qa,interval:Ja};function forEachSelection(a,A){var j=a.component.selection;if(j){var P,B=Object(pe.a)(je(j));try{for(B.s();!(P=B.n()).done;){var q=P.value;if(!0===A(q,ao[q.type]))break}}catch(ne){B.e(ne)}finally{B.f()}}}function getFacetModel(a){for(var A=a.parent;A&&!isFacetModel(A);)A=A.parent;return A}function selection_unitName(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{escape:!0},j=A.escape,P=j?$(a.name):a.name,B=getFacetModel(a);if(B){var q,ne=B.facet,ie=Object(pe.a)(wt);try{for(ie.s();!(q=ie.n()).done;){var oe=q.value;ne[oe]&&(P+=" + '__facet_".concat(oe,"_' + (facet[").concat($(B.vgField(oe)),"])"))}}catch(se){ie.e(se)}finally{ie.f()}}return P}function requiresSelectionId(a){var A=!1;return forEachSelection(a,(function(a){A=A||a.project.items.some((function(a){return"_vgsid_"===a.field}))})),A}function vega_util_module_accessor(a,A,j){return a.fields=A||[],a.fname=j,a}function vega_util_module_getter(a){return 1===a.length?oo(a[0]):so(a)}var oo=function get1(a){return function(A){return A[a]}},so=function getN(a){var A=a.length;return function(j){for(var P=0;P<A;++P)j=j[a[P]];return j}};function build_vega_util_module_error(a){throw Error(a)}function vega_util_module_splitAccessPath(a){var A,j,P,B=[],q=a.length,ne=null,ie=0,oe="";function push(){B.push(oe+a.substring(A,j)),oe="",A=j+1}for(a+="",A=j=0;j<q;++j)if("\\"===(P=a[j]))oe+=a.substring(A,j),oe+=a.substring(++j,++j),A=j;else if(P===ne)push(),ne=null,ie=-1;else{if(ne)continue;A===ie&&'"'===P||A===ie&&"'"===P?(A=j+1,ne=P):"."!==P||ie?"["===P?(j>A&&push(),ie=A=j+1):"]"===P&&(ie||build_vega_util_module_error("Access path missing open bracket: "+a),ie>0&&push(),ie=0,A=j+1):j>A?push():A=j+1}return ie&&build_vega_util_module_error("Access path missing closing bracket: "+a),ne&&build_vega_util_module_error("Access path missing closing quote: "+a),j>A&&(j++,push()),B}function build_vega_util_module_field(a,A,j){var P=vega_util_module_splitAccessPath(a);return a=1===P.length?P[0]:a,vega_util_module_accessor((j&&j.get||vega_util_module_getter)(P),[a],A||a)}build_vega_util_module_field("id"),vega_util_module_accessor((function(a){return a}),[],"identity"),vega_util_module_accessor((function(){return 0}),[],"zero"),vega_util_module_accessor((function(){return 1}),[],"one"),vega_util_module_accessor((function(){return!0}),[],"true"),vega_util_module_accessor((function(){return!1}),[],"false");Array.isArray;Object.prototype.hasOwnProperty;var uo,lo,co,fo,ho;function ASTNode(a){this.type=a}ASTNode.prototype.visit=function(a){var A,j,P;if(a(this))return 1;for(j=0,P=(A=function vega_expression_module_children(a){switch(a.type){case"ArrayExpression":return a.elements;case"BinaryExpression":case"LogicalExpression":return[a.left,a.right];case"CallExpression":return[a.callee].concat(a.arguments);case"ConditionalExpression":return[a.test,a.consequent,a.alternate];case"MemberExpression":return[a.object,a.property];case"ObjectExpression":return a.properties;case"Property":return[a.key,a.value];case"UnaryExpression":return[a.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this)).length;j<P;++j)if(A[j].visit(a))return 1};(uo={})[1]="Boolean",uo[2]="<end>",uo[3]="Identifier",uo[4]="Keyword",uo[5]="Null",uo[6]="Numeric",uo[7]="Punctuator",uo[8]="String",uo[9]="RegularExpression";var po=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),go=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function assert(a,A){if(!a)throw new Error("ASSERT: "+A)}function isDecimalDigit(a){return a>=48&&a<=57}function isHexDigit(a){return"0123456789abcdefABCDEF".indexOf(a)>=0}function isOctalDigit(a){return"01234567".indexOf(a)>=0}function isWhiteSpace(a){return 32===a||9===a||11===a||12===a||160===a||a>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a)>=0}function isLineTerminator(a){return 10===a||13===a||8232===a||8233===a}function isIdentifierStart(a){return 36===a||95===a||a>=65&&a<=90||a>=97&&a<=122||92===a||a>=128&&po.test(String.fromCharCode(a))}function isIdentifierPart(a){return 36===a||95===a||a>=65&&a<=90||a>=97&&a<=122||a>=48&&a<=57||92===a||a>=128&&go.test(String.fromCharCode(a))}var mo={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function skipComment(){for(;co<fo;){var a=lo.charCodeAt(co);if(!isWhiteSpace(a)&&!isLineTerminator(a))break;++co}}function scanHexEscape(a){var A,j,P,B=0;for(j="u"===a?4:2,A=0;A<j;++A)co<fo&&isHexDigit(lo[co])?(P=lo[co++],B=16*B+"0123456789abcdef".indexOf(P.toLowerCase())):throwError({},"Unexpected token %0","ILLEGAL");return String.fromCharCode(B)}function scanUnicodeCodePointEscape(){var a,A,j,P;for(A=0,"}"===(a=lo[co])&&throwError({},"Unexpected token %0","ILLEGAL");co<fo&&isHexDigit(a=lo[co++]);)A=16*A+"0123456789abcdef".indexOf(a.toLowerCase());return(A>1114111||"}"!==a)&&throwError({},"Unexpected token %0","ILLEGAL"),A<=65535?String.fromCharCode(A):(j=55296+(A-65536>>10),P=56320+(A-65536&1023),String.fromCharCode(j,P))}function getEscapedIdentifier(){var a,A;for(a=lo.charCodeAt(co++),A=String.fromCharCode(a),92===a&&(117!==lo.charCodeAt(co)&&throwError({},"Unexpected token %0","ILLEGAL"),++co,(a=scanHexEscape("u"))&&"\\"!==a&&isIdentifierStart(a.charCodeAt(0))||throwError({},"Unexpected token %0","ILLEGAL"),A=a);co<fo&&isIdentifierPart(a=lo.charCodeAt(co));)++co,A+=String.fromCharCode(a),92===a&&(A=A.substr(0,A.length-1),117!==lo.charCodeAt(co)&&throwError({},"Unexpected token %0","ILLEGAL"),++co,(a=scanHexEscape("u"))&&"\\"!==a&&isIdentifierPart(a.charCodeAt(0))||throwError({},"Unexpected token %0","ILLEGAL"),A+=a);return A}function scanIdentifier(){var a,A;return a=co,{type:1===(A=92===lo.charCodeAt(co)?getEscapedIdentifier():function getIdentifier(){var a,A;for(a=co++;co<fo;){if(92===(A=lo.charCodeAt(co)))return co=a,getEscapedIdentifier();if(!isIdentifierPart(A))break;++co}return lo.slice(a,co)}()).length?3:mo.hasOwnProperty(A)?4:"null"===A?5:"true"===A||"false"===A?1:3,value:A,start:a,end:co}}function scanPunctuator(){var a,A,j,P,B=co,q=lo.charCodeAt(co),ne=lo[co];switch(q){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++co,{type:7,value:String.fromCharCode(q),start:B,end:co};default:if(61===(a=lo.charCodeAt(co+1)))switch(q){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return co+=2,{type:7,value:String.fromCharCode(q)+String.fromCharCode(a),start:B,end:co};case 33:case 61:return co+=2,61===lo.charCodeAt(co)&&++co,{type:7,value:lo.slice(B,co),start:B,end:co}}}return">>>="===(P=lo.substr(co,4))?{type:7,value:P,start:B,end:co+=4}:">>>"===(j=P.substr(0,3))||"<<="===j||">>="===j?{type:7,value:j,start:B,end:co+=3}:ne===(A=j.substr(0,2))[1]&&"+-<>&|".indexOf(ne)>=0||"=>"===A?{type:7,value:A,start:B,end:co+=2}:("//"===A&&throwError({},"Unexpected token %0","ILLEGAL"),"<>=!+-*%&|^/".indexOf(ne)>=0?{type:7,value:ne,start:B,end:++co}:void throwError({},"Unexpected token %0","ILLEGAL"))}function scanNumericLiteral(){var a,A,j;if(assert(isDecimalDigit((j=lo[co]).charCodeAt(0))||"."===j,"Numeric literal must start with a decimal digit or a decimal point"),A=co,a="","."!==j){if(a=lo[co++],j=lo[co],"0"===a){if("x"===j||"X"===j)return++co,function scanHexLiteral(a){for(var A="";co<fo&&isHexDigit(lo[co]);)A+=lo[co++];return 0===A.length&&throwError({},"Unexpected token %0","ILLEGAL"),isIdentifierStart(lo.charCodeAt(co))&&throwError({},"Unexpected token %0","ILLEGAL"),{type:6,value:parseInt("0x"+A,16),start:a,end:co}}(A);if(isOctalDigit(j))return function scanOctalLiteral(a){for(var A="0"+lo[co++];co<fo&&isOctalDigit(lo[co]);)A+=lo[co++];return(isIdentifierStart(lo.charCodeAt(co))||isDecimalDigit(lo.charCodeAt(co)))&&throwError({},"Unexpected token %0","ILLEGAL"),{type:6,value:parseInt(A,8),octal:!0,start:a,end:co}}(A);j&&isDecimalDigit(j.charCodeAt(0))&&throwError({},"Unexpected token %0","ILLEGAL")}for(;isDecimalDigit(lo.charCodeAt(co));)a+=lo[co++];j=lo[co]}if("."===j){for(a+=lo[co++];isDecimalDigit(lo.charCodeAt(co));)a+=lo[co++];j=lo[co]}if("e"===j||"E"===j)if(a+=lo[co++],"+"!==(j=lo[co])&&"-"!==j||(a+=lo[co++]),isDecimalDigit(lo.charCodeAt(co)))for(;isDecimalDigit(lo.charCodeAt(co));)a+=lo[co++];else throwError({},"Unexpected token %0","ILLEGAL");return isIdentifierStart(lo.charCodeAt(co))&&throwError({},"Unexpected token %0","ILLEGAL"),{type:6,value:parseFloat(a),start:A,end:co}}function scanRegExp(){var a,A,j,P;return ho=null,skipComment(),a=co,A=function scanRegExpBody(){var a,A,j,P;for(assert("/"===(a=lo[co]),"Regular expression literal must start with a slash"),A=lo[co++],j=!1,P=!1;co<fo;)if(A+=a=lo[co++],"\\"===a)isLineTerminator((a=lo[co++]).charCodeAt(0))&&throwError({},"Invalid regular expression: missing /"),A+=a;else if(isLineTerminator(a.charCodeAt(0)))throwError({},"Invalid regular expression: missing /");else if(j)"]"===a&&(j=!1);else{if("/"===a){P=!0;break}"["===a&&(j=!0)}return P||throwError({},"Invalid regular expression: missing /"),{value:A.substr(1,A.length-2),literal:A}}(),j=function scanRegExpFlags(){var a,A,j;for(A="",j="";co<fo&&isIdentifierPart((a=lo[co]).charCodeAt(0));)++co,"\\"===a&&co<fo?throwError({},"Unexpected token %0","ILLEGAL"):(j+=a,A+=a);return j.search(/[^gimuy]/g)>=0&&throwError({},"Invalid regular expression",j),{value:j,literal:A}}(),P=function testRegExp(a,A){var j=a;A.indexOf("u")>=0&&(j=j.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(a,A){if(parseInt(A,16)<=1114111)return"x";throwError({},"Invalid regular expression")})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(j)}catch(P){throwError({},"Invalid regular expression")}try{return new RegExp(a,A)}catch(B){return null}}(A.value,j.value),{literal:A.literal+j.literal,value:P,regex:{pattern:A.value,flags:j.value},start:a,end:co}}function advance(){if(skipComment(),co>=fo)return{type:2,start:co,end:co};var a=lo.charCodeAt(co);return isIdentifierStart(a)?scanIdentifier():40===a||41===a||59===a?scanPunctuator():39===a||34===a?function scanStringLiteral(){var a,A,j,P,B="",q=!1;for(assert("'"===(a=lo[co])||'"'===a,"String literal must starts with a quote"),A=co,++co;co<fo;){if((j=lo[co++])===a){a="";break}if("\\"===j)if((j=lo[co++])&&isLineTerminator(j.charCodeAt(0)))"\r"===j&&"\n"===lo[co]&&++co;else switch(j){case"u":case"x":"{"===lo[co]?(++co,B+=scanUnicodeCodePointEscape()):B+=scanHexEscape(j);break;case"n":B+="\n";break;case"r":B+="\r";break;case"t":B+="\t";break;case"b":B+="\b";break;case"f":B+="\f";break;case"v":B+="\v";break;default:isOctalDigit(j)?(0!==(P="01234567".indexOf(j))&&(q=!0),co<fo&&isOctalDigit(lo[co])&&(q=!0,P=8*P+"01234567".indexOf(lo[co++]),"0123".indexOf(j)>=0&&co<fo&&isOctalDigit(lo[co])&&(P=8*P+"01234567".indexOf(lo[co++]))),B+=String.fromCharCode(P)):B+=j}else{if(isLineTerminator(j.charCodeAt(0)))break;B+=j}}return""!==a&&throwError({},"Unexpected token %0","ILLEGAL"),{type:8,value:B,octal:q,start:A,end:co}}():46===a?isDecimalDigit(lo.charCodeAt(co+1))?scanNumericLiteral():scanPunctuator():isDecimalDigit(a)?scanNumericLiteral():scanPunctuator()}function lex(){var a=ho;return co=a.end,ho=advance(),co=a.end,a}function vega_expression_module_peek(){var a=co;ho=advance(),co=a}function finishBinaryExpression(a,A,j){var P=new ASTNode("||"===a||"&&"===a?"LogicalExpression":"BinaryExpression");return P.operator=a,P.left=A,P.right=j,P}function finishCallExpression(a,A){var j=new ASTNode("CallExpression");return j.callee=a,j.arguments=A,j}function finishIdentifier(a){var A=new ASTNode("Identifier");return A.name=a,A}function finishLiteral(a){var A=new ASTNode("Literal");return A.value=a.value,A.raw=lo.slice(a.start,a.end),a.regex&&("//"===A.raw&&(A.raw="/(?:)/"),A.regex=a.regex),A}function finishMemberExpression(a,A,j){var P=new ASTNode("MemberExpression");return P.computed="["===a,P.object=A,P.property=j,P.computed||(j.member=!0),P}function finishProperty(a,A,j){var P=new ASTNode("Property");return P.key=A,P.value=j,P.kind=a,P}function throwError(a,A){var j,P=Array.prototype.slice.call(arguments,2),B=A.replace(/%(\d)/g,(function(a,A){return assert(A<P.length,"Message reference must be in range"),P[A]}));throw(j=new Error(B)).index=co,j.description=B,j}function throwUnexpected(a){2===a.type&&throwError(a,"Unexpected end of input"),6===a.type&&throwError(a,"Unexpected number"),8===a.type&&throwError(a,"Unexpected string"),3===a.type&&throwError(a,"Unexpected identifier"),4===a.type&&throwError(a,"Unexpected reserved word"),throwError(a,"Unexpected token %0",a.value)}function expect(a){var A=lex();7===A.type&&A.value===a||throwUnexpected(A)}function match(a){return 7===ho.type&&ho.value===a}function matchKeyword(a){return 4===ho.type&&ho.value===a}function parseArrayInitialiser(){var a=[];for(co=ho.start,expect("[");!match("]");)match(",")?(lex(),a.push(null)):(a.push(parseConditionalExpression()),match("]")||expect(","));return lex(),function finishArrayExpression(a){var A=new ASTNode("ArrayExpression");return A.elements=a,A}(a)}function parseObjectPropertyKey(){co=ho.start;var a=lex();return 8===a.type||6===a.type?(a.octal&&throwError(a,"Octal literals are not allowed in strict mode."),finishLiteral(a)):finishIdentifier(a.value)}function parseObjectProperty(){var a,A,j;return co=ho.start,3===(a=ho).type?(j=parseObjectPropertyKey(),expect(":"),finishProperty("init",j,parseConditionalExpression())):2!==a.type&&7!==a.type?(A=parseObjectPropertyKey(),expect(":"),finishProperty("init",A,parseConditionalExpression())):void throwUnexpected(a)}function parseObjectInitialiser(){var a,A,j=[],P={},B=String;for(co=ho.start,expect("{");!match("}");)A="$"+("Identifier"===(a=parseObjectProperty()).key.type?a.key.name:B(a.key.value)),Object.prototype.hasOwnProperty.call(P,A)?throwError({},"Duplicate data property in object literal not allowed in strict mode"):P[A]=!0,j.push(a),match("}")||expect(",");return expect("}"),function finishObjectExpression(a){var A=new ASTNode("ObjectExpression");return A.properties=a,A}(j)}var vo={if:1};function parsePrimaryExpression(){var a,A,j;if(match("("))return function parseGroupExpression(){expect("(");var a=parseExpression();return expect(")"),a}();if(match("["))return parseArrayInitialiser();if(match("{"))return parseObjectInitialiser();if(a=ho.type,co=ho.start,3===a||vo[ho.value])j=finishIdentifier(lex().value);else if(8===a||6===a)ho.octal&&throwError(ho,"Octal literals are not allowed in strict mode."),j=finishLiteral(lex());else{if(4===a)throw new Error("Disabled.");1===a?((A=lex()).value="true"===A.value,j=finishLiteral(A)):5===a?((A=lex()).value=null,j=finishLiteral(A)):match("/")||match("/=")?(j=finishLiteral(scanRegExp()),vega_expression_module_peek()):throwUnexpected(lex())}return j}function parseArguments(){var a=[];if(expect("("),!match(")"))for(;co<fo&&(a.push(parseConditionalExpression()),!match(")"));)expect(",");return expect(")"),a}function parseNonComputedMember(){return expect("."),function parseNonComputedProperty(){co=ho.start;var a=lex();return function isIdentifierName(a){return 3===a.type||4===a.type||1===a.type||5===a.type}(a)||throwUnexpected(a),finishIdentifier(a.value)}()}function parseComputedMember(){expect("[");var a=parseExpression();return expect("]"),a}function parsePostfixExpression(){var a=function parseLeftHandSideExpressionAllowCall(){var a;for(a=parsePrimaryExpression();;)if(match("."))a=finishMemberExpression(".",a,parseNonComputedMember());else if(match("("))a=finishCallExpression(a,parseArguments());else{if(!match("["))break;a=finishMemberExpression("[",a,parseComputedMember())}return a}();if(7===ho.type&&(match("++")||match("--")))throw new Error("Disabled.");return a}function parseUnaryExpression(){var a,A;if(7!==ho.type&&4!==ho.type)A=parsePostfixExpression();else{if(match("++")||match("--"))throw new Error("Disabled.");if(match("+")||match("-")||match("~")||match("!"))a=lex(),A=parseUnaryExpression(),A=function finishUnaryExpression(a,A){var j=new ASTNode("UnaryExpression");return j.operator=a,j.argument=A,j.prefix=!0,j}(a.value,A);else{if(matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof"))throw new Error("Disabled.");A=parsePostfixExpression()}}return A}function binaryPrecedence(a){var A=0;if(7!==a.type&&4!==a.type)return 0;switch(a.value){case"||":A=1;break;case"&&":A=2;break;case"|":A=3;break;case"^":A=4;break;case"&":A=5;break;case"==":case"!=":case"===":case"!==":A=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":A=7;break;case"<<":case">>":case">>>":A=8;break;case"+":case"-":A=9;break;case"*":case"/":case"%":A=11}return A}function parseConditionalExpression(){var a,A;return a=function parseBinaryExpression(){var a,A,j,P,B,q,ne,ie,oe,se;if(a=ho,oe=parseUnaryExpression(),0===(B=binaryPrecedence(P=ho)))return oe;for(P.prec=B,lex(),A=[a,ho],q=[oe,P,ne=parseUnaryExpression()];(B=binaryPrecedence(ho))>0;){for(;q.length>2&&B<=q[q.length-2].prec;)ne=q.pop(),ie=q.pop().value,oe=q.pop(),A.pop(),j=finishBinaryExpression(ie,oe,ne),q.push(j);(P=lex()).prec=B,q.push(P),A.push(ho),j=parseUnaryExpression(),q.push(j)}for(j=q[se=q.length-1],A.pop();se>1;)A.pop(),j=finishBinaryExpression(q[se-1].value,q[se-2],j),se-=2;return j}(),match("?")&&(lex(),A=parseConditionalExpression(),expect(":"),a=function finishConditionalExpression(a,A,j){var P=new ASTNode("ConditionalExpression");return P.test=a,P.consequent=A,P.alternate=j,P}(a,A,parseConditionalExpression())),a}function parseExpression(){var a=parseConditionalExpression();if(match(","))throw new Error("Disabled.");return a}function getDependentFields(a){var A=function parser(a){co=0,fo=(lo=a).length,ho=null,vega_expression_module_peek();var A=parseExpression();if(2!==ho.type)throw new Error("Unexpect token after expression.");return A}(a),j=new Set;return A.visit((function(a){"MemberExpression"===a.type&&function startsWithDatum(a){return"MemberExpression"===a.object.type?startsWithDatum(a.object):"datum"===a.object.name}(a)&&j.add(function expressions_getName(a){var A=[];return"Identifier"===a.type?[a.name]:"Literal"===a.type?[a.value]:("MemberExpression"===a.type&&(A.push.apply(A,Object(he.a)(expressions_getName(a.object))),A.push.apply(A,Object(he.a)(expressions_getName(a.property)))),A)}(a).slice(1).join("."))})),j}var yo=function(a){Object(Zr.a)(FilterNode,a);var A=Object(ti.a)(FilterNode);function FilterNode(a,j,P){var B;return Object(zt.a)(this,FilterNode),(B=A.call(this,a)).model=j,B.filter=P,B.expr=predicate_expression(B.model,B.filter,Object(Yi.a)(B)),B._dependentFields=getDependentFields(B.expr),B}return Object(qt.a)(FilterNode,[{key:"clone",value:function clone(){return new FilterNode(null,this.model,Se(this.filter))}},{key:"dependentFields",value:function dependentFields(){return this._dependentFields}},{key:"producedFields",value:function producedFields(){return new Set}},{key:"assemble",value:function assemble(){return{type:"filter",expr:this.expr}}},{key:"hash",value:function hash(){return"Filter ".concat(this.expr)}}]),FilterNode}(ya),parse_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function parseSelectionPredicate(a,A,j){var P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"datum",B=[];function expr(A){var q=varName(A),ne=a.getSelectionComponent(q,A),ie=$(q+eo);if(ne.project.timeUnit){var oe=null!==j&&void 0!==j?j:a.component.data.raw,se=ne.project.timeUnit.clone();oe.parent?se.insertAsParentOf(oe):oe.parent=se}return"none"!==ne.empty&&B.push(ie),"vlSelectionTest(".concat(ie,", ").concat(P)+("global"===ne.resolve?")":", ".concat($(ne.resolve),")"))}var q=logicalExpr(A,expr);return(B.length?"!("+B.map((function(a){return"length(data(".concat(a,"))")})).join(" || ")+") || ":"")+"(".concat(q,")")}function parseSelectionBinExtent(a,A){var j=A.encoding,P=A.field;if(j||P){if(j&&!P){var B=a.project.items.filter((function(a){return a.channel===j}));!B.length||B.length>1?(P=a.project.items[0].field,log_warn((B.length?"Multiple ":"No ")+"matching ".concat($(j)," encoding found for selection ").concat($(A.selection),". ")+'Using "field": '.concat($(P),"."))):P=B[0].field}}else P=a.project.items[0].field,a.project.items.length>1&&log_warn('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat($(P),"."));return"".concat(a.name,"[").concat($(P),"]")}function predicate_expression(a,A,j){return logicalExpr(A,(function(A){return isString(A)?A:function isSelectionPredicate(a){return null===a||void 0===a?void 0:a.selection}(A)?parseSelectionPredicate(a,A.selection,j):fieldFilterExpression(A)}))}var axis_assemble_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function assemble_assembleTitle(a,A){if(a)return oe(a)&&!isText(a)?a.map((function(a){return defaultTitle(a,A)})).join(", "):a}function setAxisEncode(a,A,j,P){var B,q,ne;a.encode=null!==(B=a.encode)&&void 0!==B?B:{},a.encode[A]=null!==(q=a.encode[A])&&void 0!==q?q:{},a.encode[A].update=null!==(ne=a.encode[A].update)&&void 0!==ne?ne:{},a.encode[A].update[j]=P}function assembleAxis(a,A,j){var P,B,q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{header:!1},ne=a.combine(),ie=ne.disable,oe=ne.orient,se=ne.scale,le=ne.labelExpr,ge=ne.title,me=ne.zindex,ve=axis_assemble_rest(ne,["disable","orient","scale","labelExpr","title","zindex"]);if(!ie){for(var ye in ve){var _e=Be[ye],we=ve[ye];if(_e&&_e!==A&&"both"!==_e)delete ve[ye];else if(isConditionalAxisValue(we)){var ke=we.condition,Oe=axis_assemble_rest(we,["condition"]),Se=array(ke),Te=Me[ye];if(Te){var Ae=Te.vgProp,je=Te.part,Fe=[].concat(Object(he.a)(Se.map((function(a){var A=a.test,j=axis_assemble_rest(a,["test"]);return Object.assign({test:predicate_expression(null,A)},j)}))),[Oe]);setAxisEncode(ve,je,Ae,Fe),delete ve[ye]}else if(null===Te){var Re={signal:Se.map((function(a){var A=a.test,j=axis_assemble_rest(a,["test"]);return"".concat(predicate_expression(null,A)," ? ").concat(exprFromValueOrSignalRef(j)," : ")})).join("")+exprFromValueOrSignalRef(Oe)};ve[ye]=Re}}else if(isSignalRef(we)){var Ue=Me[ye];if(Ue){var We=Ue.vgProp,Ve=Ue.part;setAxisEncode(ve,Ve,We,we),delete ve[ye]}}}if("grid"===A){if(!ve.grid)return;if(ve.encode){var Ye=ve.encode.grid;ve.encode=Object.assign({},Ye?{grid:Ye}:{}),isEmpty(ve.encode)&&delete ve.encode}return Object.assign(Object.assign({scale:se,orient:oe},ve),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:getFirstDefined(me,0)})}if(q.header||!a.mainExtracted){if(void 0!==le){var $e=le;(null===(B=null===(P=ve.encode)||void 0===P?void 0:P.labels)||void 0===B?void 0:B.update)&&isSignalRef(ve.encode.labels.update.text)&&($e=replaceAll(le,"datum.label",ve.encode.labels.update.text.signal)),setAxisEncode(ve,"labels","text",{signal:$e})}if(null===ve.labelAlign&&delete ve.labelAlign,ve.encode){var Xe,et=Object(pe.a)(Ne);try{for(et.s();!(Xe=et.n()).done;){var tt=Xe.value;a.hasAxisPart(tt)||delete ve.encode[tt]}}catch(rt){et.e(rt)}finally{et.f()}isEmpty(ve.encode)&&delete ve.encode}var nt=assemble_assembleTitle(ge,j);return Object.assign(Object.assign(Object.assign(Object.assign({scale:se,orient:oe,grid:!1},nt?{title:nt}:{}),ve),!1===j.aria?{aria:!1}:{}),{zindex:getFirstDefined(me,0)})}}}function assembleAxisSignals(a){var A,j=a.component.axes,P=[],B=Object(pe.a)(jt);try{for(B.s();!(A=B.n()).done;){var q=A.value;if(j[q]){var ne,ie=Object(pe.a)(j[q]);try{for(ie.s();!(ne=ie.n()).done;){var oe=ne.value;if(!oe.get("disable")&&!oe.get("gridScale")){var se="x"===q?"height":"width",le=a.getSizeSignalRef(se).signal;se!==le&&P.push({name:se,update:le})}}}catch(he){ie.e(he)}finally{ie.f()}}}}catch(he){B.e(he)}finally{B.f()}return P}function getAxisConfigFromConfigTypes(a,A,j,P){return Object.assign.apply(null,[{}].concat(Object(he.a)(a.map((function(a){if("axisOrient"===a){var B,q="x"===j?"bottom":"left",ne=A["x"===j?"axisBottom":"axisLeft"]||{},ie=A["x"===j?"axisTop":"axisRight"]||{},oe=new Set([].concat(Object(he.a)(Ae(ne)),Object(he.a)(Ae(ie)))),se={},le=Object(pe.a)(oe.values());try{for(le.s();!(B=le.n()).done;){var ge=B.value;se[ge]={signal:"".concat(P.signal,' === "').concat(q,'" ? ').concat(signalOrStringValue(ne[ge])," : ").concat(signalOrStringValue(ie[ge]))}}}catch(me){le.e(me)}finally{le.f()}return se}return A[a]})))))}function getAxisConfigs(a,A,j,P){var B="band"===A?["axisDiscrete","axisBand"]:"point"===A?["axisDiscrete","axisPoint"]:function isQuantitative(a){return a in Wn}(A)?["axisQuantitative"]:"time"===A||"utc"===A?["axisTemporal"]:[],q="x"===a?"axisX":"axisY",ne=isSignalRef(j)?"axisOrient":"axis"+titleCase(j),ie=[].concat(B,Object(he.a)(B.map((function(a){return q+a.substr(4)})))),oe=["axis",ne,q];return{vlOnlyAxisConfig:getAxisConfigFromConfigTypes(ie,P,a,j),vgAxisConfig:getAxisConfigFromConfigTypes(oe,P,a,j),axisConfigStyle:getAxisConfigStyle([].concat(oe,Object(he.a)(ie)),P)}}function getAxisConfigStyle(a,A){var j,P,B=[{}],q=Object(pe.a)(a);try{for(q.s();!(P=q.n()).done;){var ne=null===(j=A[P.value])||void 0===j?void 0:j.style;if(ne){ne=array(ne);var ie,oe=Object(pe.a)(ne);try{for(oe.s();!(ie=oe.n()).done;){var se=ie.value;B.push(A.style[se])}}catch(le){oe.e(le)}finally{oe.f()}}}}catch(le){q.e(le)}finally{q.f()}return Object.assign.apply(null,B)}function getAxisConfig(a,A,j){var P,B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},q=getStyleConfig(a,j,A);if(void 0!==q)return{configFrom:"style",configValue:q};for(var ne=0,ie=["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"];ne<ie.length;ne++){var oe=ie[ne];if(void 0!==(null===(P=B[oe])||void 0===P?void 0:P[a]))return{configFrom:oe,configValue:B[oe][a]}}return{}}var bo={scale:function scale(a){var A=a.model,j=a.channel;return A.scaleName(j)},format:function format(a){var A=a.fieldOrDatumDef,j=a.config,P=a.axis,format=P.format,B=P.formatType;return guideFormat(A,A.type,format,B,j,!0)},formatType:function formatType(a){var A=a.axis,j=a.fieldOrDatumDef,P=a.scaleType,formatType=A.formatType;return guideFormatType(formatType,j,P)},grid:function grid(a){var A,j=a.fieldOrDatumDef,P=a.axis,B=a.scaleType;return(!isFieldDef(j)||!isBinned(j.bin))&&(null!==(A=P.grid)&&void 0!==A?A:function defaultGrid(a,A){return!hasDiscreteDomain(a)&&isFieldDef(A)&&!isBinning(null===A||void 0===A?void 0:A.bin)}(B,j))},gridScale:function gridScale(a){return function _gridScale(a,A){var j="x"===A?"y":"x";if(a.getScaleComponent(j))return a.scaleName(j);return}(a.model,a.channel)},labelAlign:function labelAlign(a){var A=a.axis,j=a.labelAngle,P=a.orient,B=a.channel;return A.labelAlign||defaultLabelAlign(j,P,B)},labelAngle:function labelAngle(a){return a.labelAngle},labelBaseline:function labelBaseline(a){var A=a.axis,j=a.labelAngle,P=a.orient,B=a.channel;return A.labelBaseline||defaultLabelBaseline(j,P,B)},labelFlush:function labelFlush(a){var A,j=a.axis,P=a.fieldOrDatumDef,B=a.channel;return null!==(A=j.labelFlush)&&void 0!==A?A:function defaultLabelFlush(a,A){if("x"===A&&util_contains(["quantitative","temporal"],a))return!0;return}(P.type,B)},labelOverlap:function labelOverlap(a){var A,j=a.axis,P=a.fieldOrDatumDef,B=a.scaleType;return null!==(A=j.labelOverlap)&&void 0!==A?A:function defaultLabelOverlap(a,A,j,P){if(j&&!isObject(P)||"nominal"!==a&&"ordinal"!==a)return"log"!==A&&"symlog"!==A||"greedy";return}(P.type,B,isFieldDef(P)&&!!P.timeUnit,isFieldDef(P)?P.sort:void 0)},orient:function orient(a){return a.orient},tickCount:function tickCount(a){var A,j=a.channel,P=a.model,B=a.axis,q=a.fieldOrDatumDef,ne=a.scaleType,ie="x"===j?"width":"y"===j?"height":void 0,oe=ie?P.getSizeSignalRef(ie):void 0;return null!==(A=B.tickCount)&&void 0!==A?A:function defaultTickCount(a){var A,j=a.fieldOrDatumDef,P=a.scaleType,B=a.size;if(!a.values&&!hasDiscreteDomain(P)&&"log"!==P){if(isFieldDef(j)){if(isBinning(j.bin))return{signal:"ceil(".concat(B.signal,"/10)")};if(j.timeUnit&&util_contains(["month","hours","day","quarter"],null===(A=normalizeTimeUnit(j.timeUnit))||void 0===A?void 0:A.unit))return}return{signal:"ceil(".concat(B.signal,"/40)")}}return}({fieldOrDatumDef:q,scaleType:ne,size:oe,values:B.values})},title:function title(a){var A=a.axis,j=a.model,P=a.channel;if(void 0!==A.title)return A.title;var B=getFieldDefTitle(j,P);if(void 0!==B)return B;var q=j.typedFieldDef(P),ne="x"===P?"x2":"y2",ie=j.fieldDef(ne);return mergeTitleFieldDefs(q?[toFieldDefBase(q)]:[],isFieldDef(ie)?[toFieldDefBase(ie)]:[])},values:function values(a){return function _values(a,A){var j=a.values;if(oe(j))return valueArray(A,j);if(isSignalRef(j))return j;return}(a.axis,a.fieldOrDatumDef)},zindex:function zindex(a){var A,j=a.axis,P=a.fieldOrDatumDef,B=a.mark;return null!==(A=j.zindex)&&void 0!==A?A:function defaultZindex(a,A){if("rect"===a&&isDiscrete(A))return 1;return 0}(B,P)}};function normalizeAngleExpr(a){return"(((".concat(a.signal," % 360) + 360) % 360)")}function defaultLabelBaseline(a,A,j,P){if(void 0!==a){if("x"===j){if(isSignalRef(a)){var B=normalizeAngleExpr(a),q=isSignalRef(A)?"(".concat(A.signal,' === "top")'):"top"===A;return{signal:"(45 < ".concat(B," && ").concat(B," < 135) || (225 < ").concat(B," && ").concat(B,' < 315) ? "middle" :')+"(".concat(B," <= 45 || 315 <= ").concat(B,") === ").concat(q,' ? "bottom" : "top"')}}if(45<a&&a<135||225<a&&a<315)return"middle";if(isSignalRef(A)){var ne=a<=45||315<=a?"===":"!==";return{signal:"".concat(A.signal," ").concat(ne,' "top" ? "bottom" : "top"')}}return(a<=45||315<=a)===("top"===A)?"bottom":"top"}if(isSignalRef(a)){var ie=normalizeAngleExpr(a),oe=isSignalRef(A)?"(".concat(A.signal,' === "left")'):"left"===A,se=P?'"middle"':"null";return{signal:"".concat(ie," <= 45 || 315 <= ").concat(ie," || (135 <= ").concat(ie," && ").concat(ie," <= 225) ? ").concat(se," : (45 <= ").concat(ie," && ").concat(ie," <= 135) === ").concat(oe,' ? "top" : "bottom"')}}if(a<=45||315<=a||135<=a&&a<=225)return P?"middle":null;if(isSignalRef(A)){var le=45<=a&&a<=135?"===":"!==";return{signal:"".concat(A.signal," ").concat(le,' "left" ? "top" : "bottom"')}}return(45<=a&&a<=135)===("left"===A)?"top":"bottom"}}function defaultLabelAlign(a,A,j){if(void 0!==a){var P="x"===j,B=P?0:90,q=P?"bottom":"left";if(isSignalRef(a)){var ne=normalizeAngleExpr(a),ie=isSignalRef(A)?"(".concat(A.signal,' === "').concat(q,'")'):A===q;return{signal:"(".concat(B?"("+ne+" + 90)":ne," % 180 === 0) ? ").concat(P?null:'"center"'," :")+"(".concat(B," < ").concat(ne," && ").concat(ne," < ").concat(180+B,") === ").concat(ie,' ? "left" : "right"')}}if((a+B)%180===0)return P?null:"center";if(isSignalRef(A)){var oe=B<a&&a<180+B?"===":"!==",se="".concat(A.signal," ").concat(oe,' "').concat(q,'"');return{signal:"".concat(se,' ? "left" : "right"')}}return(B<a&&a<180+B)===(A===q)?"left":"right"}}function getFieldDefTitle(a,A){var j="x"===A?"x2":"y2",P=a.fieldDef(A),B=a.fieldDef(j),q=P?P.title:void 0,ne=B?B.title:void 0;return q&&ne?mergeTitle(q,ne):q||(ne||(void 0!==q?q:void 0!==ne?ne:void 0))}var _o=function(a){Object(Zr.a)(CalculateNode,a);var A=Object(ti.a)(CalculateNode);function CalculateNode(a,j){var P;return Object(zt.a)(this,CalculateNode),(P=A.call(this,a)).transform=j,P._dependentFields=getDependentFields(P.transform.calculate),P}return Object(qt.a)(CalculateNode,[{key:"clone",value:function clone(){return new CalculateNode(null,Se(this.transform))}},{key:"producedFields",value:function producedFields(){return new Set([this.transform.as])}},{key:"dependentFields",value:function dependentFields(){return this._dependentFields}},{key:"assemble",value:function assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}},{key:"hash",value:function hash(){return"Calculate ".concat(util_hash(this.transform))}}],[{key:"parseAllForSortIndex",value:function parseAllForSortIndex(a,A){return A.forEachFieldDef((function(A,j){if(isScaleFieldDef(A)&&isSortArray(A.sort)){var P=A.field,B=A.timeUnit,q=A.sort,ne=q.map((function(a,A){return"".concat(fieldFilterExpression({field:P,timeUnit:B,equal:a})," ? ").concat(A," : ")})).join("")+q.length;a=new CalculateNode(a,{calculate:ne,as:sortArrayIndexField(A,j,{forAs:!0})})}})),a}}]),CalculateNode}(ya);function sortArrayIndexField(a,A,j){return channeldef_vgField(a,Object.assign({prefix:A,suffix:"sort_index"},null!==j&&void 0!==j?j:{}))}function getHeaderChannel(a,A){return util_contains(["top","bottom"],A)?"column":util_contains(["left","right"],A)||"row"===a?"row":"column"}function getHeaderProperty(a,A,j,P){var B="row"===P?j.headerRow:"column"===P?j.headerColumn:j.headerFacet;return getFirstDefined((A||{})[a],B[a],j.header[a])}function getHeaderProperties(a,A,j,P){var B,q={},ne=Object(pe.a)(a);try{for(ne.s();!(B=ne.n()).done;){var ie=B.value,oe=getHeaderProperty(ie,A||{},j,P);void 0!==oe&&(q[ie]=oe)}}catch(se){ne.e(se)}finally{ne.f()}return q}var xo=["row","column"],wo=["header","footer"];function assembleTitleGroup(a,A){var j=a.component.layoutHeaders[A].title,P=a.config?a.config:void 0,B=a.component.layoutHeaders[A].facetFieldDef?a.component.layoutHeaders[A].facetFieldDef:void 0,q=getHeaderProperties(["titleAnchor","titleAngle","titleOrient"],B.header,P,A),ne=q.titleAnchor,ie=q.titleAngle,oe=getHeaderChannel(A,q.titleOrient),se=normalizeAngle(ie);return{name:"".concat(A,"-title"),type:"group",role:"".concat(oe,"-title"),title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:j},"row"===A?{orient:"left"}:{}),{style:"guide-title"}),defaultHeaderGuideBaseline(se,oe)),defaultHeaderGuideAlign(oe,se,ne)),assembleHeaderProperties(P,B,A,Mr,Pr))}}function defaultHeaderGuideAlign(a,A){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"middle";switch(j){case"start":return{align:"left"};case"end":return{align:"right"}}var P=defaultLabelAlign(A,"row"===a?"left":"top","row"===a?"y":"x");return P?{align:P}:{}}function defaultHeaderGuideBaseline(a,A){var j=defaultLabelBaseline(a,"row"===A?"left":"top","row"===A?"y":"x",!0);return j?{baseline:j}:{}}function assembleHeaderGroups(a,A){var j,P=a.component.layoutHeaders[A],B=[],q=Object(pe.a)(wo);try{for(q.s();!(j=q.n()).done;){var ne=j.value;if(P[ne]){var ie,oe=Object(pe.a)(P[ne]);try{for(oe.s();!(ie=oe.n()).done;){var se=assembleHeaderGroup(a,A,ne,P,ie.value);null!=se&&B.push(se)}}catch(le){oe.e(le)}finally{oe.f()}}}}catch(le){q.e(le)}finally{q.f()}return B}function getSort(a,A){var j,P=a.sort;return isSortField(P)?{field:channeldef_vgField(P,{expr:"datum"}),order:null!==(j=P.order)&&void 0!==j?j:"ascending"}:oe(P)?{field:sortArrayIndexField(a,A,{expr:"datum"}),order:"ascending"}:{field:channeldef_vgField(a,{expr:"datum"}),order:null!==P&&void 0!==P?P:"ascending"}}function assemble_assembleLabelTitle(a,A,j){var P=getHeaderProperties(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],a.header,j,A),B=P.format,q=P.formatType,ne=P.labelAngle,ie=P.labelAnchor,oe=P.labelOrient,se=P.labelExpr,le=formatSignalRef({fieldOrDatumDef:a,format:B,formatType:q,expr:"parent",config:j}).signal,he=getHeaderChannel(A,oe);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:se?replaceAll(replaceAll(se,"datum.label",le),"datum.value",channeldef_vgField(a,{expr:"parent"})):le}},"row"===A?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),defaultHeaderGuideBaseline(ne,he)),defaultHeaderGuideAlign(he,ne,ie)),assembleHeaderProperties(j,a,A,Lr,Rr))}function assembleHeaderGroup(a,A,j,P,B){if(B){var q=null,ne=P.facetFieldDef,ie=a.config?a.config:void 0;if(ne&&B.labels){var oe=getHeaderProperties(["labelOrient"],ne.header,ie,A).labelOrient;("row"===A&&!util_contains(["top","bottom"],oe)||"column"===A&&!util_contains(["left","right"],oe))&&(q=assemble_assembleLabelTitle(ne,A,ie))}var se=isFacetModel(a)&&!isFacetMapping(a.facet),le=B.axes,he=(null===le||void 0===le?void 0:le.length)>0;if(q||he){var pe="row"===A?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:a.getName("".concat(A,"_").concat(j)),type:"group",role:"".concat(A,"-").concat(j)},P.facetFieldDef?{from:{data:a.getName(A+"_domain")},sort:getSort(ne,A)}:{}),he&&se?{from:{data:a.getName("facet_domain_".concat(A))}}:{}),q?{title:q}:{}),B.sizeSignal?{encode:{update:Object(Ye.a)({},pe,B.sizeSignal)}}:{}),he?{axes:le}:{})}}return null}var ko={column:{start:0,end:1},row:{start:1,end:0}};function getLayoutTitleBand(a,A){return ko[A][a]}function assembleHeaderProperties(a,A,j,P,B){var q,ne={},ie=Object(pe.a)(P);try{for(ie.s();!(q=ie.n()).done;){var oe=q.value;if(B[oe]){var se=getHeaderProperty(oe,null===A||void 0===A?void 0:A.header,a,j);void 0!==se&&(ne[B[oe]]=se)}}}catch(le){ie.e(le)}finally{ie.f()}return ne}function assemble_assembleLayoutSignals(a){return[].concat(Object(he.a)(sizeSignals(a,"width")),Object(he.a)(sizeSignals(a,"height")),Object(he.a)(sizeSignals(a,"childWidth")),Object(he.a)(sizeSignals(a,"childHeight")))}function sizeSignals(a,A){var j="width"===A?"x":"y",P=a.component.layoutSize.get(A);if(!P||"merged"===P)return[];var B=a.getSizeSignalRef(A).signal;if("step"===P){var q=a.getScaleComponent(j);if(q){var ne=q.get("type"),ie=q.get("range");if(hasDiscreteDomain(ne)&&isVgRangeStep(ie)){var oe=a.scaleName(j);if(isFacetModel(a.parent))if("independent"===a.parent.component.resolve.scale[j])return[stepSignal(oe,ie)];return[stepSignal(oe,ie),{name:B,update:sizeExpr(oe,q,"domain('".concat(oe,"').length"))}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==P){var se=B.endsWith("width"),le=se?"containerSize()[0]":"containerSize()[1]",he=getViewConfigContinuousSize(a.config.view,se?"width":"height"),pe="isFinite(".concat(le,") ? ").concat(le," : ").concat(he);return[{name:B,init:pe,on:[{update:pe,events:"window:resize"}]}]}return[{name:B,value:P}]}function stepSignal(a,A){return{name:a+"_step",value:A.step}}function sizeExpr(a,A,j){var P=A.get("type"),B=A.get("padding"),q=getFirstDefined(A.get("paddingOuter"),B),ne=A.get("paddingInner");return ne="band"===P?void 0!==ne?ne:B:1,"bandspace(".concat(j,", ").concat(signalOrStringValue(ne),", ").concat(signalOrStringValue(q),") * ").concat(a,"_step")}function getSizeTypeFromLayoutSizeType(a){return"childWidth"===a?"width":"childHeight"===a?"height":a}function guideEncodeEntry(a,A){return Ae(a).reduce((function(j,P){var B=a[P];return Object.assign(Object.assign({},j),wrapCondition(A,B,P,(function(a){return signalOrValueRef(a.value)})))}),{})}function defaultScaleResolve(a,A){if(isLayerModel(A)||isFacetModel(A))return"shared";if(isConcatModel(A))return isXorY(a)?"independent":"shared";throw new Error("invalid model type for resolve")}function parseGuideResolve(a,A){var j=a.scale[A],B=isXorY(A)?"axis":"legend";return"independent"===j?("shared"===a[B][A]&&log_warn(P.independentScaleMeansIndependentGuide(A)),"independent"):a[B][A]||"shared"}var Oo=Object.assign(Object.assign({},Br),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),So=Ae(Oo),Eo=function(a){Object(Zr.a)(LegendComponent,a);var A=Object(ti.a)(LegendComponent);function LegendComponent(){return Object(zt.a)(this,LegendComponent),A.apply(this,arguments)}return Object(qt.a)(LegendComponent)}(Zi),Co={symbols:function symbols(a,A){var j,P,B,q,ne,ie,se,le,he=A.fieldOrDatumDef,ge=A.model,me=A.channel,ve=A.legendCmpt;if("symbol"!==A.legendType)return;var ye=ge.markDef,_e=ge.encoding,we=ge.config,ke=ge.mark,Oe=ye.filled&&"trail"!==ke,Se=Object.assign(Object.assign({},function applyMarkConfig(a,A,j){var P,B=Object(pe.a)(j);try{for(B.s();!(P=B.n()).done;){var q=P.value,ne=getMarkConfig(q,A.markDef,A.config);void 0!==ne&&(a[q]=signalOrValueRef(ne))}}catch(ie){B.e(ie)}finally{B.f()}return a}({},ge,mr)),color_color(ge,{filled:Oe})),Te=null!==(j=ve.get("symbolOpacity"))&&void 0!==j?j:we.legend.symbolOpacity,Ae=null!==(P=ve.get("symbolFillColor"))&&void 0!==P?P:we.legend.symbolFillColor,je=null!==(B=ve.get("symbolStrokeColor"))&&void 0!==B?B:we.legend.symbolStrokeColor,Fe=void 0===Te?null!==(q=getMaxValue(_e.opacity))&&void 0!==q?q:ye.opacity:void 0;if(Se.fill)if("fill"===me||Oe&&me===dt)delete Se.fill;else if(Se.fill.field)Ae?delete Se.fill:(Se.fill=signalOrValueRef(null!==(ne=we.legend.symbolBaseFillColor)&&void 0!==ne?ne:"black"),Se.fillOpacity=signalOrValueRef(null!==Fe&&void 0!==Fe?Fe:1));else if(oe(Se.fill)){var Re=null!==(le=null!==(se=getFirstConditionValue(null!==(ie=_e.fill)&&void 0!==ie?ie:_e.color))&&void 0!==se?se:ye.fill)&&void 0!==le?le:Oe&&ye.color;Re&&(Se.fill=signalOrValueRef(Re))}if(Se.stroke)if("stroke"===me||!Oe&&me===dt)delete Se.stroke;else if(Se.stroke.field||je)delete Se.stroke;else if(oe(Se.stroke)){var Me=getFirstDefined(getFirstConditionValue(_e.stroke||_e.color),ye.stroke,Oe?ye.color:void 0);Me&&(Se.stroke={value:Me})}if("opacity"!==me){var Ne=isFieldDef(he)&&selectedCondition(ge,ve,he);Ne?Se.opacity=[Object.assign({test:Ne},signalOrValueRef(null!==Fe&&void 0!==Fe?Fe:1)),signalOrValueRef(we.legend.unselectedOpacity)]:Fe&&(Se.opacity=signalOrValueRef(Fe))}return isEmpty(Se=Object.assign(Object.assign({},Se),a))?void 0:Se},gradient:function gradient(a,A){var j,P=A.model,B=A.legendType,q=A.legendCmpt;if("gradient"!==B)return;var ne=P.config,ie=P.markDef,oe=P.encoding,se={},le=void 0===(null!==(j=q.get("gradientOpacity"))&&void 0!==j?j:ne.legend.gradientOpacity)?getMaxValue(oe.opacity)||ie.opacity:void 0;le&&(se.opacity=signalOrValueRef(le));return isEmpty(se=Object.assign(Object.assign({},se),a))?void 0:se},labels:function encode_labels(a,A){var j=A.fieldOrDatumDef,P=A.model,B=A.channel,q=A.legendCmpt,ne=P.legend(B)||{},ie=P.config,oe=isFieldDef(j)?selectedCondition(P,q,j):void 0,se=oe?[{test:oe,value:1},{value:ie.legend.unselectedOpacity}]:void 0,le=ne.format,he=ne.formatType,pe=isCustomFormatType(he)?formatCustomType({fieldOrDatumDef:j,field:"datum.value",format:le,formatType:he,config:ie}):void 0,ge=Object.assign(Object.assign(Object.assign({},se?{opacity:se}:{}),pe?{text:pe}:{}),a);return isEmpty(ge)?void 0:ge},entries:function encode_entries(a,A){var j=A.legendCmpt.get("selections");return(null===j||void 0===j?void 0:j.length)?Object.assign(Object.assign({},a),{fill:{value:"transparent"}}):a}};function getMaxValue(a){return getConditionValue(a,(function(a,A){return Math.max(a,A.value)}))}function getFirstConditionValue(a){return getConditionValue(a,(function(a,A){return getFirstDefined(a,A.value)}))}function getConditionValue(a,A){return function hasConditionalValueDef(a){var A=a&&a.condition;return!!A&&(oe(A)||isValueDef(A))}(a)?array(a.condition).reduce(A,a.value):isValueDef(a)?a.value:void 0}function selectedCondition(a,A,j){var P=A.get("selections");if(null===P||void 0===P?void 0:P.length){var B=$(j.field);return P.map((function(a){var A=$(varName(a)+eo);return"(!length(data(".concat(A,")) || (").concat(a,"[").concat(B,"] && indexof(").concat(a,"[").concat(B,"], datum.value) >= 0))")})).join(" || ")}}var To={direction:function direction(a){return a.direction},format:function format(a){var A=a.fieldOrDatumDef,j=a.legend,P=a.config,format=j.format,B=j.formatType;return guideFormat(A,A.type,format,B,P,!1)},formatType:function formatType(a){var A=a.legend,j=a.fieldOrDatumDef,P=a.scaleType,formatType=A.formatType;return guideFormatType(formatType,j,P)},gradientLength:function gradientLength(a){var A,j,P=a.legend,B=a.legendConfig;return null!==(j=null!==(A=P.gradientLength)&&void 0!==A?A:B.gradientLength)&&void 0!==j?j:function defaultGradientLength(a){var A=a.legendConfig,j=a.model,P=a.direction,B=a.orient,q=a.scaleType,ne=A.gradientHorizontalMaxLength,ie=A.gradientHorizontalMinLength,oe=A.gradientVerticalMaxLength,se=A.gradientVerticalMinLength;if(isContinuousToContinuous(q))return"horizontal"===P?"top"===B||"bottom"===B?gradientLengthSignal(j,"width",ie,ne):ie:gradientLengthSignal(j,"height",se,oe);return}(a)},labelOverlap:function labelOverlap(a){var A,j,P=a.legend,B=a.legendConfig,q=a.scaleType;return null!==(j=null!==(A=P.labelOverlap)&&void 0!==A?A:B.labelOverlap)&&void 0!==j?j:function properties_defaultLabelOverlap(a){if(util_contains(["quantile","threshold","log","symlog"],a))return"greedy";return}(q)},symbolType:function symbolType(a){var A,j=a.legend,P=a.markDef,B=a.channel,q=a.encoding;return null!==(A=j.symbolType)&&void 0!==A?A:function defaultSymbolType(a,A,j,P){var B;if("shape"!==A){var q=null!==(B=getFirstConditionValue(j))&&void 0!==B?B:P;if(q)return q}switch(a){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(P.type,B,q.shape,P.shape)},title:function title(a){return channeldef_title(a.fieldOrDatumDef,a.config,{allowDisabling:!0})},type:function type(a){var A=a.legendType,j=a.scaleType;if(isColorChannel(a.channel)&&isContinuousToContinuous(j)){if("gradient"===A)return}else if("symbol"===A)return;return A},values:function values(a){var A=a.fieldOrDatumDef;return function properties_values(a,A){var j=a.values;if(oe(j))return valueArray(A,j);if(isSignalRef(j))return j;return}(a.legend,A)}};function getLegendType(a){return getFirstDefined(a.legend.type,function properties_defaultType(a){var A=a.channel,j=a.timeUnit,P=a.scaleType;if(isColorChannel(A)){if(util_contains(["quarter","month","day"],j))return"symbol";if(isContinuousToContinuous(P))return"gradient"}return"symbol"}(a))}function getDirection(a){var A,j,P=a.legendConfig,B=a.legendType,q=a.orient;return null!==(j=null!==(A=a.legend.direction)&&void 0!==A?A:P[B?"gradientDirection":"symbolDirection"])&&void 0!==j?j:function defaultDirection(a,A){switch(a){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===A?"horizontal":void 0}}(q,B)}function gradientLengthSignal(a,A,j,P){var B=a.getSizeSignalRef(A).signal;return{signal:"clamp(".concat(B,", ").concat(j,", ").concat(P,")")}}function parseLegend(a){var A=isUnitModel(a)?function parseUnitLegend(a){for(var A=a.encoding,j={},P=0,B=[dt].concat(Object(he.a)(Nr));P<B.length;P++){var q=B[P],ne=getFieldOrDatumDef(A[q]);ne&&a.getScaleComponent(q)&&(q===gt&&isFieldDef(ne)&&ne.type===En||(j[q]=parseLegendForChannel(a,q)))}return j}(a):function parseNonUnitLegend(a){var A,j=a.component,P=j.legends,B=j.resolve,q=Object(pe.a)(a.children);try{for(q.s();!(A=q.n()).done;){var ne=A.value;parseLegend(ne);var ie,oe=Object(pe.a)(Ae(ne.component.legends));try{for(oe.s();!(ie=oe.n()).done;){var se=ie.value;B.legend[se]=parseGuideResolve(a.component.resolve,se),"shared"===B.legend[se]&&(P[se]=mergeLegendComponent(P[se],ne.component.legends[se]),P[se]||(B.legend[se]="independent",delete P[se]))}}catch(_e){oe.e(_e)}finally{oe.f()}}}catch(_e){q.e(_e)}finally{q.f()}var le,he=Object(pe.a)(Ae(P));try{for(he.s();!(le=he.n()).done;){var ge,me=le.value,ve=Object(pe.a)(a.children);try{for(ve.s();!(ge=ve.n()).done;){var ye=ge.value;ye.component.legends[me]&&("shared"===B.legend[me]&&delete ye.component.legends[me])}}catch(_e){ve.e(_e)}finally{ve.f()}}}catch(_e){he.e(_e)}finally{he.f()}return P}(a);return a.component.legends=A,A}function isExplicit(a,A,j,P){switch(A){case"disable":return void 0!==j;case"values":return!!(null===j||void 0===j?void 0:j.values);case"title":if("title"===A&&a===(null===P||void 0===P?void 0:P.title))return!0}return a===(j||{})[A]}function parseLegendForChannel(a,A){var j,P,B,q=a.legend(A),ne=a.markDef,ie=a.encoding,oe=a.config,se=oe.legend,le=new Eo({},function getLegendDefWithScale(a,A){var j=a.scaleName(A);if("trail"===a.mark){if("color"===A)return{stroke:j};if("size"===A)return{strokeWidth:j}}return"color"===A?a.markDef.filled?{fill:j}:{stroke:j}:Object(Ye.a)({},A,j)}(a,A));!function parseInteractiveLegend(a,A,j){var P,B=null===(P=a.fieldDef(A))||void 0===P?void 0:P.field;forEachSelection(a,(function(a){var P,q,ne=null!==(P=a.project.hasField[B])&&void 0!==P?P:a.project.hasChannel[A];if(ne&&Ua.has(a)){var ie=null!==(q=j.get("selections"))&&void 0!==q?q:[];ie.push(a.name),j.set("selections",ie,!1),ne.hasLegend=!0}}))}(a,A,le);var he=void 0!==q?!q:se.disable;if(le.set("disable",he,void 0!==q),he)return le;q=q||{};var ge,me=a.getScaleComponent(A).get("type"),ve=getFieldOrDatumDef(ie[A]),ye=isFieldDef(ve)?null===(j=normalizeTimeUnit(ve.timeUnit))||void 0===j?void 0:j.unit:void 0,_e=q.orient||oe.legend.orient||"right",we=getLegendType({legend:q,channel:A,timeUnit:ye,scaleType:me}),ke={legend:q,channel:A,model:a,markDef:ne,encoding:ie,fieldOrDatumDef:ve,legendConfig:se,config:oe,scaleType:me,orient:_e,legendType:we,direction:getDirection({legend:q,legendType:we,orient:_e,legendConfig:se})},Oe=Object(pe.a)(So);try{for(Oe.s();!(ge=Oe.n()).done;){var Se=ge.value;if(!("gradient"===we&&Se.startsWith("symbol")||"symbol"===we&&Se.startsWith("gradient"))){var Te=Se in To?To[Se](ke):q[Se];if(void 0!==Te){var Ae=isExplicit(Te,Se,q,a.fieldDef(A));(Ae||void 0===oe.legend[Se])&&le.set(Se,Te,Ae)}}}}catch($e){Oe.e($e)}finally{Oe.f()}for(var je=null!==(P=null===q||void 0===q?void 0:q.encoding)&&void 0!==P?P:{},Fe=le.get("selections"),Re={},Me={fieldOrDatumDef:ve,model:a,channel:A,legendCmpt:le,legendType:we},Ne=0,Be=["labels","legend","title","symbols","gradient","entries"];Ne<Be.length;Ne++){var Ue=Be[Ne],We=guideEncodeEntry(null!==(B=je[Ue])&&void 0!==B?B:{},a),Ve=Ue in Co?Co[Ue](We,Me):We;void 0===Ve||isEmpty(Ve)||(Re[Ue]=Object.assign(Object.assign(Object.assign({},(null===Fe||void 0===Fe?void 0:Fe.length)&&isFieldDef(ve)?{name:"".concat(varName(ve.field),"_legend_").concat(Ue)}:{}),(null===Fe||void 0===Fe?void 0:Fe.length)?{interactive:!!Fe}:{}),{update:Ve}))}return isEmpty(Re)||le.set("encode",Re,!!(null===q||void 0===q?void 0:q.encoding)),le}function mergeLegendComponent(a,A){var j,P,B,q;if(!a)return A.clone();var ne=a.getWithExplicit("orient"),ie=A.getWithExplicit("orient");if(!ne.explicit||!ie.explicit||ne.value===ie.value){var oe,se=!1,le=Object(pe.a)(So);try{var he=function _loop(){var j=oe.value,P=mergeValuesWithExplicit(a.getWithExplicit(j),A.getWithExplicit(j),j,"legend",(function(a,A){switch(j){case"symbolType":return function mergeSymbolType(a,A){if("circle"===A.value)return A;return a}(a,A);case"title":return mergeTitleComponent(a,A);case"type":return se=!0,makeImplicit("symbol")}return defaultTieBreaker(a,A,j,"legend")}));a.setWithExplicit(j,P)};for(le.s();!(oe=le.n()).done;)he()}catch(ge){le.e(ge)}finally{le.f()}return se&&((null===(P=null===(j=a.implicit)||void 0===j?void 0:j.encode)||void 0===P?void 0:P.gradient)&&deleteNestedProperty(a.implicit,["encode","gradient"]),(null===(q=null===(B=a.explicit)||void 0===B?void 0:B.encode)||void 0===q?void 0:q.gradient)&&deleteNestedProperty(a.explicit,["encode","gradient"])),a}}var legend_assemble_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function assemble_assembleLegends(a){var A,j=a.component.legends,P={},B=Object(pe.a)(Ae(j));try{for(B.s();!(A=B.n()).done;){var q=A.value,ne=a.getScaleComponent(q),ie=Te(ne.get("domains"));if(P[ie]){var oe,se=Object(pe.a)(P[ie]);try{for(se.s();!(oe=se.n()).done;){mergeLegendComponent(oe.value,j[q])||P[ie].push(j[q])}}catch(le){se.e(le)}finally{se.f()}}else P[ie]=[j[q].clone()]}}catch(le){B.e(le)}finally{B.f()}return je(P).flat().map((function(A){return function assembleLegend(a,A){var j,P,B,q=a.combine(),ne=q.disable,ie=q.labelExpr,oe=(q.selections,legend_assemble_rest(q,["disable","labelExpr","selections"]));if(ne)return;!1===A.aria&&void 0==oe.aria&&(oe.aria=!1);if(null===(j=oe.encode)||void 0===j?void 0:j.symbols){var se=oe.encode.symbols.update;!se.fill||"transparent"===se.fill.value||se.stroke||oe.stroke||(se.stroke={value:"transparent"});var he,ge=Object(pe.a)(Nr);try{for(ge.s();!(he=ge.n()).done;){var me=he.value;oe[me]&&delete se[me]}}catch(le){ge.e(le)}finally{ge.f()}}oe.title||delete oe.title;if(void 0!==ie){var ve=ie;(null===(B=null===(P=oe.encode)||void 0===P?void 0:P.labels)||void 0===B?void 0:B.update)&&isSignalRef(oe.encode.labels.update.text)&&(ve=replaceAll(ie,"datum.label",oe.encode.labels.update.text.signal)),function setLegendEncode(a,A,j,P){var B,q,ne;a.encode=null!==(B=a.encode)&&void 0!==B?B:{},a.encode[A]=null!==(q=a.encode[A])&&void 0!==q?q:{},a.encode[A].update=null!==(ne=a.encode[A].update)&&void 0!==ne?ne:{},a.encode[A].update[j]=P}(oe,"labels","text",{signal:ve})}return oe}(A,a.config)})).filter((function(a){return void 0!==a}))}function assemble_assembleProjections(a){return isLayerModel(a)||isConcatModel(a)?function assembleProjectionsForModelAndChildren(a){return a.children.reduce((function(a,A){return a.concat(A.assembleProjections())}),assembleProjectionForModel(a))}(a):assembleProjectionForModel(a)}function assembleProjectionForModel(a){var A=a.component.projection;if(!A||A.merged)return[];var j=A.combine(),P=j.name;if(A.data){var B={signal:"[".concat(A.size.map((function(a){return a.signal})).join(", "),"]")},q=A.data.reduce((function(A,j){var P=isSignalRef(j)?j.signal:"data('".concat(a.lookupDataSource(j),"')");return util_contains(A,P)||A.push(P),A}),[]);if(q.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:P,size:B,fit:{signal:q.length>1?"[".concat(q.join(", "),"]"):q[0]}},j)]}return[Object.assign(Object.assign({name:P},{translate:{signal:"[width / 2, height / 2]"}}),j)]}var Do=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],Ao=function(a){Object(Zr.a)(ProjectionComponent,a);var A=Object(ti.a)(ProjectionComponent);function ProjectionComponent(a,j,P,B){var q;return Object(zt.a)(this,ProjectionComponent),(q=A.call(this,Object.assign({},j),{name:a})).specifiedProjection=j,q.size=P,q.data=B,q.merged=!1,q}return Object(qt.a)(ProjectionComponent,[{key:"isFit",get:function get(){return!!this.data}}]),ProjectionComponent}(Zi);function parse_parseProjection(a){a.component.projection=isUnitModel(a)?function parseUnitProjection(a){var A;if(a.hasProjection){var j=a.specifiedProjection,P=!(j&&(null!=j.scale||null!=j.translate)),B=P?[a.getSizeSignalRef("width"),a.getSizeSignalRef("height")]:void 0,q=P?function gatherFitData(a){for(var A=[],j=a.encoding,P=0,B=[["longitude","latitude"],["longitude2","latitude2"]];P<B.length;P++){var q=B[P];(getFieldOrDatumDef(j[q[0]])||getFieldOrDatumDef(j[q[1]]))&&A.push({signal:a.getName("geojson_".concat(A.length))})}a.channelHasField(gt)&&a.typedFieldDef(gt).type===En&&A.push({signal:a.getName("geojson_".concat(A.length))});0===A.length&&A.push(a.requestDataName(ta.Main));return A}(a):void 0;return new Ao(a.projectionName(!0),Object.assign(Object.assign({},null!==(A=a.config.projection)&&void 0!==A?A:{}),null!==j&&void 0!==j?j:{}),B,q)}return}(a):function parseNonUnitProjections(a){if(0===a.children.length)return;var A,j,P=Object(pe.a)(a.children);try{for(P.s();!(j=P.n()).done;){parse_parseProjection(j.value)}}catch(me){P.e(me)}finally{P.f()}var B=every(a.children,(function(a){var j=a.component.projection;if(j){if(A){var P=function mergeIfNoConflict(a,A){var j=every(Do,(function(j){return!_has(a.explicit,j)&&!_has(A.explicit,j)||!(!_has(a.explicit,j)||!_has(A.explicit,j)||Te(a.get(j))!==Te(A.get(j)))}));if(Te(a.size)===Te(A.size)){if(j)return a;if(Te(a.explicit)===Te({}))return A;if(Te(A.explicit)===Te({}))return a}return null}(A,j);return P&&(A=P),!!P}return A=j,!0}return!0}));if(A&&B){var q,ne=a.projectionName(!0),ie=new Ao(ne,A.specifiedProjection,A.size,Se(A.data)),oe=Object(pe.a)(a.children);try{for(oe.s();!(q=oe.n()).done;){var se=q.value,le=se.component.projection;if(le){var ge;if(le.isFit)(ge=ie.data).push.apply(ge,Object(he.a)(se.component.projection.data));se.renameProjection(le.get("name"),ne),le.merged=!0}}}catch(me){oe.e(me)}finally{oe.f()}return ie}return}(a)}var jo=j(94),Fo=j(93),Po=j(50),Ro=j(95);var bin_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function binKey(a,A){return"".concat(binToString(a),"_").concat(A)}function getBinSignalName(a,A,j){var P,B=binKey(null!==(P=normalizeBin(j,void 0))&&void 0!==P?P:{},A);return a.getName("".concat(B,"_bins"))}function createBinComponent(a,A,j){var P,B;P=function isBinTransform(a){return"as"in a}(a)?isString(a.as)?[a.as,"".concat(a.as,"_end")]:[a.as[0],a.as[1]]:[channeldef_vgField(a,{forAs:!0}),channeldef_vgField(a,{binSuffix:"end",forAs:!0})];var q=Object.assign({},normalizeBin(A,void 0)),ne=binKey(q,a.field),ie=function getSignalsFromModel(a,A){return{signal:a.getName("".concat(A,"_bins")),extentSignal:a.getName("".concat(A,"_extent"))}}(j,ne),oe=ie.signal,se=ie.extentSignal;if(isSelectionExtent(q.extent)){var le=q.extent,he=le.selection;B=parseSelectionBinExtent(j.getSelectionComponent(varName(he),he),le),delete q.extent}return{key:ne,binComponent:Object.assign(Object.assign(Object.assign({bin:q,field:a.field,as:[P]},oe?{signal:oe}:{}),se?{extentSignal:se}:{}),B?{span:B}:{})}}var Mo=function(a){Object(Zr.a)(BinNode,a);var A=Object(ti.a)(BinNode);function BinNode(a,j){var P;return Object(zt.a)(this,BinNode),(P=A.call(this,a)).bins=j,P}return Object(qt.a)(BinNode,[{key:"clone",value:function clone(){return new BinNode(null,Se(this.bins))}},{key:"merge",value:function merge(a,A){var j,P=Object(pe.a)(Ae(a.bins));try{for(P.s();!(j=P.n()).done;){var B=j.value;B in this.bins?(A(a.bins[B].signal,this.bins[B].signal),this.bins[B].as=unique([].concat(Object(he.a)(this.bins[B].as),Object(he.a)(a.bins[B].as)),util_hash)):this.bins[B]=a.bins[B]}}catch(oe){P.e(oe)}finally{P.f()}var q,ne=Object(pe.a)(a.children);try{for(ne.s();!(q=ne.n()).done;){var ie=q.value;a.removeChild(ie),ie.parent=this}}catch(oe){ne.e(oe)}finally{ne.f()}a.remove()}},{key:"producedFields",value:function producedFields(){return new Set(je(this.bins).map((function(a){return a.as})).flat(2))}},{key:"dependentFields",value:function dependentFields(){return new Set(je(this.bins).map((function(a){return a.field})))}},{key:"hash",value:function hash(){return"Bin ".concat(util_hash(this.bins))}},{key:"assemble",value:function assemble(){return je(this.bins).flatMap((function(a){var A=[],j=function _toArray(a){return Object(jo.a)(a)||Object(Fo.a)(a)||Object(Po.a)(a)||Object(Ro.a)()}(a.as),P=j[0],B=j.slice(1),q=a.bin,ne=q.extent,ie=bin_rest(q,["extent"]),oe=Object.assign(Object.assign(Object.assign({type:"bin",field:replacePathInField(a.field),as:P,signal:a.signal},isSelectionExtent(ne)?{extent:null}:{extent:ne}),a.span?{span:{signal:"span(".concat(a.span,")")}}:{}),ie);!ne&&a.extentSignal&&(A.push({type:"extent",field:replacePathInField(a.field),signal:a.extentSignal}),oe.extent={signal:a.extentSignal}),A.push(oe);var se,le=Object(pe.a)(B);try{for(le.s();!(se=le.n()).done;)for(var he=se.value,ge=0;ge<2;ge++)A.push({type:"formula",expr:channeldef_vgField({field:P[ge]},{expr:"datum"}),as:he[ge]})}catch(me){le.e(me)}finally{le.f()}return a.formula&&A.push({type:"formula",expr:a.formula,as:a.formulaAs}),A}))}}],[{key:"makeFromEncoding",value:function makeFromEncoding(a,A){var j=A.reduceFieldDef((function(a,j,P){if(isTypedFieldDef(j)&&isBinning(j.bin)){var B=createBinComponent(j,j.bin,A),q=B.key,ne=B.binComponent;a[q]=Object.assign(Object.assign(Object.assign({},ne),a[q]),function rangeFormula(a,A,j,P){var B,q;if(binRequiresRange(A,j)){var ne=isUnitModel(a)&&null!==(q=null!==(B=a.axis(j))&&void 0!==B?B:a.legend(j))&&void 0!==q?q:{},ie=channeldef_vgField(A,{expr:"datum"}),oe=channeldef_vgField(A,{expr:"datum",binSuffix:"end"});return{formulaAs:channeldef_vgField(A,{binSuffix:"range",forAs:!0}),formula:binFormatExpression(ie,oe,ne.format,ne.formatType,P)}}return{}}(A,j,P,A.config))}return a}),{});return isEmpty(j)?null:new BinNode(a,j)}},{key:"makeFromTransform",value:function makeFromTransform(a,A,j){var P=createBinComponent(A,A.bin,j),B=P.key,q=P.binComponent;return new BinNode(a,Object(Ye.a)({},B,q))}}]),BinNode}(ya);function addDimension(a,A,j,P){var B=isUnitModel(P)?P.encoding[getSecondaryRangeChannel(A)]:void 0;if(isTypedFieldDef(j)&&isUnitModel(P)&&hasBand(A,j,B,P.stack,P.markDef,P.config))a.add(channeldef_vgField(j,{})),a.add(channeldef_vgField(j,{suffix:"end"})),j.bin&&binRequiresRange(j,A)&&a.add(channeldef_vgField(j,{binSuffix:"range"}));else if(function isGeoPositionChannel(a){return a in yt}(A)){var q=function getPositionChannelFromLatLong(a){switch(a){case"latitude":return"y";case"latitude2":return"y2";case"longitude":return"x";case"longitude2":return"x2"}}(A);a.add(P.getName(q))}else a.add(channeldef_vgField(j));return a}var Lo=function(a){Object(Zr.a)(AggregateNode,a);var A=Object(ti.a)(AggregateNode);function AggregateNode(a,j,P){var B;return Object(zt.a)(this,AggregateNode),(B=A.call(this,a)).dimensions=j,B.measures=P,B}return Object(qt.a)(AggregateNode,[{key:"clone",value:function clone(){return new AggregateNode(null,new Set(this.dimensions),Se(this.measures))}},{key:"groupBy",get:function get(){return this.dimensions}},{key:"merge",value:function merge(a){return setEqual(this.dimensions,a.dimensions)?(function mergeMeasures(a,A){var j,P,B=Object(pe.a)(Ae(A));try{for(B.s();!(P=B.n()).done;){var q,ne=P.value,ie=A[ne],oe=Object(pe.a)(Ae(ie));try{for(oe.s();!(q=oe.n()).done;){var se=q.value;ne in a?a[ne][se]=new Set([].concat(Object(he.a)(null!==(j=a[ne][se])&&void 0!==j?j:[]),Object(he.a)(ie[se]))):a[ne]=Object(Ye.a)({},se,ie[se])}}catch(le){oe.e(le)}finally{oe.f()}}}catch(le){B.e(le)}finally{B.f()}}(this.measures,a.measures),!0):(function log_debug(){var a;(a=ln).debug.apply(a,arguments)}("different dimensions, cannot merge"),!1)}},{key:"addDimensions",value:function addDimensions(a){a.forEach(this.dimensions.add,this.dimensions)}},{key:"dependentFields",value:function dependentFields(){return new Set([].concat(Object(he.a)(this.dimensions),Object(he.a)(Ae(this.measures))))}},{key:"producedFields",value:function producedFields(){var a,A=new Set,j=Object(pe.a)(Ae(this.measures));try{for(j.s();!(a=j.n()).done;){var P,B=a.value,q=Object(pe.a)(Ae(this.measures[B]));try{for(q.s();!(P=q.n()).done;){var ne=P.value,ie=this.measures[B][ne];0===ie.size?A.add("".concat(ne,"_").concat(B)):ie.forEach(A.add,A)}}catch(oe){q.e(oe)}finally{q.f()}}}catch(oe){j.e(oe)}finally{j.f()}return A}},{key:"hash",value:function hash(){return"Aggregate ".concat(util_hash({dimensions:this.dimensions,measures:this.measures}))}},{key:"assemble",value:function assemble(){var a,A=[],j=[],P=[],B=Object(pe.a)(Ae(this.measures));try{for(B.s();!(a=B.n()).done;){var q,ne=a.value,ie=Object(pe.a)(Ae(this.measures[ne]));try{for(ie.s();!(q=ie.n()).done;){var oe,se=q.value,le=Object(pe.a)(this.measures[ne][se]);try{for(le.s();!(oe=le.n()).done;){var ge=oe.value;P.push(ge),A.push(se),j.push("*"===ne?null:replacePathInField(ne))}}catch(me){le.e(me)}finally{le.f()}}}catch(me){ie.e(me)}finally{ie.f()}}}catch(me){B.e(me)}finally{B.f()}return{type:"aggregate",groupby:Object(he.a)(this.dimensions).map(replacePathInField),ops:A,fields:j,as:P}}}],[{key:"makeFromEncoding",value:function makeFromEncoding(a,A){var j=!1;A.forEachFieldDef((function(a){a.aggregate&&(j=!0)}));var P={},B=new Set;return j?(A.forEachFieldDef((function(a,j){var q,ne,ie,oe,se=a.aggregate,le=a.field;if(se)if("count"===se)P["*"]=null!==(q=P["*"])&&void 0!==q?q:{},P["*"].count=new Set([channeldef_vgField(a,{forAs:!0})]);else{if(isArgminDef(se)||isArgmaxDef(se)){var he=isArgminDef(se)?"argmin":"argmax",pe=se[he];P[pe]=null!==(ne=P[pe])&&void 0!==ne?ne:{},P[pe][he]=new Set([channeldef_vgField({op:he,field:pe},{forAs:!0})])}else P[le]=null!==(ie=P[le])&&void 0!==ie?ie:{},P[le][se]=new Set([channeldef_vgField(a,{forAs:!0})]);isScaleChannel(j)&&"unaggregated"===A.scaleDomain(j)&&(P[le]=null!==(oe=P[le])&&void 0!==oe?oe:{},P[le].min=new Set([channeldef_vgField({field:le,aggregate:"min"},{forAs:!0})]),P[le].max=new Set([channeldef_vgField({field:le,aggregate:"max"},{forAs:!0})]))}else addDimension(B,j,a,A)})),B.size+Ae(P).length===0?null:new AggregateNode(a,B,P)):null}},{key:"makeFromTransform",value:function makeFromTransform(a,A){var j,P,B,q,ne=new Set,ie={},oe=Object(pe.a)(A.aggregate);try{for(oe.s();!(q=oe.n()).done;){var se=q.value,le=se.op,he=se.field,ge=se.as;le&&("count"===le?(ie["*"]=null!==(j=ie["*"])&&void 0!==j?j:{},ie["*"].count=new Set([ge||channeldef_vgField(se,{forAs:!0})])):(ie[he]=null!==(P=ie[he])&&void 0!==P?P:{},ie[he][le]=new Set([ge||channeldef_vgField(se,{forAs:!0})])))}}catch(_e){oe.e(_e)}finally{oe.f()}var me,ve=Object(pe.a)(null!==(B=A.groupby)&&void 0!==B?B:[]);try{for(ve.s();!(me=ve.n()).done;){var ye=me.value;ne.add(ye)}}catch(_e){ve.e(_e)}finally{ve.f()}return ne.size+Ae(ie).length===0?null:new AggregateNode(a,ne,ie)}}]),AggregateNode}(ya),Io=function(a){Object(Zr.a)(FacetNode,a);var A=Object(ti.a)(FacetNode);function FacetNode(a,j,P,B){var q;Object(zt.a)(this,FacetNode),(q=A.call(this,a)).model=j,q.name=P,q.data=B;var ne,ie=Object(pe.a)(wt);try{for(ie.s();!(ne=ie.n()).done;){var se=ne.value,le=j.facet[se];if(le){var ge=le.bin,me=le.sort;q[se]=Object.assign({name:j.getName("".concat(se,"_domain")),fields:[channeldef_vgField(le)].concat(Object(he.a)(isBinning(ge)?[channeldef_vgField(le,{binSuffix:"end"})]:[]))},isSortField(me)?{sortField:me}:oe(me)?{sortIndexField:sortArrayIndexField(le,se)}:{})}}}catch(ve){ie.e(ve)}finally{ie.f()}return q.childModel=j.child,q}return Object(qt.a)(FacetNode,[{key:"hash",value:function hash(){var a,A="Facet",j=Object(pe.a)(wt);try{for(j.s();!(a=j.n()).done;){var P=a.value;this[P]&&(A+=" ".concat(P.charAt(0),":").concat(util_hash(this[P])))}}catch(B){j.e(B)}finally{j.f()}return A}},{key:"fields",get:function get(){var a,A,j=[],P=Object(pe.a)(wt);try{for(P.s();!(A=P.n()).done;){var B=A.value;(null===(a=this[B])||void 0===a?void 0:a.fields)&&j.push.apply(j,Object(he.a)(this[B].fields))}}catch(q){P.e(q)}finally{P.f()}return j}},{key:"dependentFields",value:function dependentFields(){var a,A=new Set(this.fields),j=Object(pe.a)(wt);try{for(j.s();!(a=j.n()).done;){var P=a.value;this[P]&&(this[P].sortField&&A.add(this[P].sortField.field),this[P].sortIndexField&&A.add(this[P].sortIndexField))}}catch(B){j.e(B)}finally{j.f()}return A}},{key:"producedFields",value:function producedFields(){return new Set}},{key:"getSource",value:function getSource(){return this.name}},{key:"getChildIndependentFieldsWithStep",value:function getChildIndependentFieldsWithStep(){var a,A={},j=Object(pe.a)(jt);try{for(j.s();!(a=j.n()).done;){var B=a.value,q=this.childModel.component.scales[B];if(q&&!q.merged){var ne=q.get("type"),ie=q.get("range");if(hasDiscreteDomain(ne)&&isVgRangeStep(ie)){var oe=getFieldFromDomain(assembleDomain(this.childModel,B));oe?A[B]=oe:log_warn(P.unknownField(B))}}}}catch(se){j.e(se)}finally{j.f()}return A}},{key:"assembleRowColumnHeaderData",value:function assembleRowColumnHeaderData(a,A,j){var P={row:"y",column:"x"}[a],B=[],q=[],ne=[];j&&j[P]&&(A?(B.push("distinct_".concat(j[P])),q.push("max")):(B.push(j[P]),q.push("distinct")),ne.push("distinct_".concat(j[P])));var ie=this[a],oe=ie.sortField,se=ie.sortIndexField;if(oe){var le=oe.op,he=void 0===le?"min":le,pe=oe.field;B.push(pe),q.push(he),ne.push(channeldef_vgField(oe,{forAs:!0}))}else se&&(B.push(se),q.push("max"),ne.push(se));return{name:this[a].name,source:null!==A&&void 0!==A?A:this.data,transform:[Object.assign({type:"aggregate",groupby:this[a].fields},B.length?{fields:B,ops:q,as:ne}:{})]}}},{key:"assembleFacetHeaderData",value:function assembleFacetHeaderData(a){var A,j,P,B=this.model.layout.columns,q=this.model.component.layoutHeaders,ne=[],ie={},oe=Object(pe.a)(xo);try{for(oe.s();!(P=oe.n()).done;){var se,le=P.value,he=Object(pe.a)(wo);try{for(he.s();!(se=he.n()).done;){var ge,me=se.value,ve=null!==(A=q[le]&&q[le][me])&&void 0!==A?A:[],ye=Object(pe.a)(ve);try{for(ye.s();!(ge=ye.n()).done;){if((null===(j=ge.value.axes)||void 0===j?void 0:j.length)>0){ie[le]=!0;break}}}catch(Se){ye.e(Se)}finally{ye.f()}}}catch(Se){he.e(Se)}finally{he.f()}if(ie[le]){var _e='length(data("'.concat(this.facet.name,'"))'),we="row"===le?B?{signal:"ceil(".concat(_e," / ").concat(B,")")}:1:B?{signal:"min(".concat(_e,", ").concat(B,")")}:{signal:_e};ne.push({name:"".concat(this.facet.name,"_").concat(le),transform:[{type:"sequence",start:0,stop:we}]})}}}catch(Se){oe.e(Se)}finally{oe.f()}var ke=ie.row,Oe=ie.column;return(ke||Oe)&&ne.unshift(this.assembleRowColumnHeaderData("facet",null,a)),ne}},{key:"assemble",value:function assemble(){var a,A,j=[],P=null,B=this.getChildIndependentFieldsWithStep(),q=this.column,ne=this.row,ie=this.facet;if(q&&ne&&(B.x||B.y)){P="cross_".concat(this.column.name,"_").concat(this.row.name);var oe=[].concat(null!==(a=B.x)&&void 0!==a?a:[],null!==(A=B.y)&&void 0!==A?A:[]),se=oe.map((function(){return"distinct"}));j.push({name:P,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:oe,ops:se}]})}for(var le=0,pe=[it,rt];le<pe.length;le++){var ge=pe[le];this[ge]&&j.push(this.assembleRowColumnHeaderData(ge,P,B))}if(ie){var me=this.assembleFacetHeaderData(B);me&&j.push.apply(j,Object(he.a)(me))}return j}}]),FacetNode}(ya);function unquote(a){return"'"===a[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1]?a.slice(1,-1):a}function formatparse_parseExpression(a,A){var j=accessPathWithDatum(a);if("number"===A)return"toNumber(".concat(j,")");if("boolean"===A)return"toBoolean(".concat(j,")");if("string"===A)return"toString(".concat(j,")");if("date"===A)return"toDate(".concat(j,")");if("flatten"===A)return j;if(0===A.indexOf("date:")){var B=unquote(A.slice(5,A.length));return"timeParse(".concat(j,",'").concat(B,"')")}if(0===A.indexOf("utc:")){var q=unquote(A.slice(4,A.length));return"utcParse(".concat(j,",'").concat(q,"')")}return log_warn(P.unrecognizedParse(A)),null}function getImplicitFromFilterTransform(a){var A={};return function forEachLeaf(a,A){if(isLogicalNot(a))forEachLeaf(a.not,A);else if(isLogicalAnd(a)){var j,P=Object(pe.a)(a.and);try{for(P.s();!(j=P.n()).done;){forEachLeaf(j.value,A)}}catch(ne){P.e(ne)}finally{P.f()}}else if(isLogicalOr(a)){var B,q=Object(pe.a)(a.or);try{for(q.s();!(B=q.n()).done;){forEachLeaf(B.value,A)}}catch(ne){q.e(ne)}finally{q.f()}}else A(a)}(a.filter,(function(a){var j;if(isFieldPredicate(a)){var P=null;isFieldEqualPredicate(a)?P=signalRefOrValue(a.equal):isFieldLTEPredicate(a)?P=signalRefOrValue(a.lte):isFieldLTPredicate(a)?P=signalRefOrValue(a.lt):isFieldGTPredicate(a)?P=signalRefOrValue(a.gt):isFieldGTEPredicate(a)?P=signalRefOrValue(a.gte):isFieldRangePredicate(a)?P=a.range[0]:isFieldOneOfPredicate(a)&&(P=(null!==(j=a.oneOf)&&void 0!==j?j:a.in)[0]),P&&(isDateTime(P)?A[a.field]="date":isNumber(P)?A[a.field]="number":isString(P)&&(A[a.field]="string")),a.timeUnit&&(A[a.field]="date")}})),A}function getImplicitFromEncoding(a){var A={};function add(a){isFieldOrDatumDefForTimeFormat(a)?A[a.field]="date":"quantitative"===a.type&&function isMinMaxOp(a){return isString(a)&&util_contains(["min","max"],a)}(a.aggregate)?A[a.field]="number":accessPathDepth(a.field)>1?a.field in A||(A[a.field]="flatten"):isScaleFieldDef(a)&&isSortField(a.sort)&&accessPathDepth(a.sort.field)>1&&(a.sort.field in A||(A[a.sort.field]="flatten"))}if((isUnitModel(a)||isFacetModel(a))&&a.forEachFieldDef((function(A,j){if(isTypedFieldDef(A))add(A);else{var P=getMainRangeChannel(j),B=a.fieldDef(P);add(Object.assign(Object.assign({},A),{type:B.type}))}})),isUnitModel(a)){var j=a.mark,P=a.markDef,B=a.encoding;if(isPathMark(j)&&!a.encoding.order){var q=B["horizontal"===P.orient?"y":"x"];isFieldDef(q)&&"quantitative"===q.type&&!(q.field in A)&&(A[q.field]="number")}}return A}var No,Bo=function(a){Object(Zr.a)(ParseNode,a);var A=Object(ti.a)(ParseNode);function ParseNode(a,j){var P;return Object(zt.a)(this,ParseNode),(P=A.call(this,a))._parse=j,P}return Object(qt.a)(ParseNode,[{key:"clone",value:function clone(){return new ParseNode(null,Se(this._parse))}},{key:"hash",value:function hash(){return"Parse ".concat(util_hash(this._parse))}},{key:"parse",get:function get(){return this._parse}},{key:"merge",value:function merge(a){this._parse=Object.assign(Object.assign({},this._parse),a.parse),a.remove()}},{key:"assembleFormatParse",value:function assembleFormatParse(){var a,A={},j=Object(pe.a)(Ae(this._parse));try{for(j.s();!(a=j.n()).done;){var P=a.value,B=this._parse[P];1===accessPathDepth(P)&&(A[P]=B)}}catch(q){j.e(q)}finally{j.f()}return A}},{key:"producedFields",value:function producedFields(){return new Set(Ae(this._parse))}},{key:"dependentFields",value:function dependentFields(){return new Set(Ae(this._parse))}},{key:"assembleTransforms",value:function assembleTransforms(){var a=this,A=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ae(this._parse).filter((function(a){return!A||accessPathDepth(a)>1})).map((function(A){var j=formatparse_parseExpression(A,a._parse[A]);return j?{type:"formula",expr:j,as:removePathFromField(A)}:null})).filter((function(a){return null!==a}))}}],[{key:"makeExplicit",value:function makeExplicit(a,A,j){var P={},B=A.data;return!isGenerator(B)&&B&&B.format&&B.format.parse&&(P=B.format.parse),this.makeWithAncestors(a,P,{},j)}},{key:"makeWithAncestors",value:function makeWithAncestors(a,A,j,B){var q,ne=Object(pe.a)(Ae(j));try{for(ne.s();!(q=ne.n()).done;){var ie=q.value,oe=B.getWithExplicit(ie);void 0!==oe.value&&(oe.explicit||oe.value===j[ie]||"derived"===oe.value||"flatten"===j[ie]?delete j[ie]:log_warn(P.differentParse(ie,j[ie],oe.value)))}}catch(Oe){ne.e(Oe)}finally{ne.f()}var se,le=Object(pe.a)(Ae(A));try{for(le.s();!(se=le.n()).done;){var he=se.value,ge=B.get(he);void 0!==ge&&(ge===A[he]?delete A[he]:log_warn(P.differentParse(he,A[he],ge)))}}catch(Oe){le.e(Oe)}finally{le.f()}var me=new Zi(A,j);B.copyAll(me);var ve,ye={},_e=Object(pe.a)(Ae(me.combine()));try{for(_e.s();!(ve=_e.n()).done;){var we=ve.value,ke=me.get(we);null!==ke&&(ye[we]=ke)}}catch(Oe){_e.e(Oe)}finally{_e.f()}return 0===Ae(ye).length||B.parseNothing?null:new ParseNode(a,ye)}}]),ParseNode}(ya),Uo=function(a){Object(Zr.a)(IdentifierNode,a);var A=Object(ti.a)(IdentifierNode);function IdentifierNode(a){return Object(zt.a)(this,IdentifierNode),A.call(this,a)}return Object(qt.a)(IdentifierNode,[{key:"clone",value:function clone(){return new IdentifierNode(null)}},{key:"dependentFields",value:function dependentFields(){return new Set}},{key:"producedFields",value:function producedFields(){return new Set(["_vgsid_"])}},{key:"hash",value:function hash(){return"Identifier"}},{key:"assemble",value:function assemble(){return{type:"identifier",as:"_vgsid_"}}}]),IdentifierNode}(ya),zo=function(a){Object(Zr.a)(GraticuleNode,a);var A=Object(ti.a)(GraticuleNode);function GraticuleNode(a,j){var P;return Object(zt.a)(this,GraticuleNode),(P=A.call(this,a)).params=j,P}return Object(qt.a)(GraticuleNode,[{key:"clone",value:function clone(){return new GraticuleNode(null,this.params)}},{key:"dependentFields",value:function dependentFields(){return new Set}},{key:"producedFields",value:function producedFields(){}},{key:"hash",value:function hash(){return"Graticule ".concat(util_hash(this.params))}},{key:"assemble",value:function assemble(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}]),GraticuleNode}(ya),qo=function(a){Object(Zr.a)(SequenceNode,a);var A=Object(ti.a)(SequenceNode);function SequenceNode(a,j){var P;return Object(zt.a)(this,SequenceNode),(P=A.call(this,a)).params=j,P}return Object(qt.a)(SequenceNode,[{key:"clone",value:function clone(){return new SequenceNode(null,this.params)}},{key:"dependentFields",value:function dependentFields(){return new Set}},{key:"producedFields",value:function producedFields(){var a;return new Set([null!==(a=this.params.as)&&void 0!==a?a:"data"])}},{key:"hash",value:function hash(){return"Hash ".concat(util_hash(this.params))}},{key:"assemble",value:function assemble(){return Object.assign({type:"sequence"},this.params)}}]),SequenceNode}(ya),Wo=function(a){Object(Zr.a)(SourceNode,a);var A=Object(ti.a)(SourceNode);function SourceNode(a){var j,P;if(Object(zt.a)(this,SourceNode),j=A.call(this,null),isGenerator(a=null!==a&&void 0!==a?a:{name:"source"})||(P=a.format?Object.assign({},omit(a.format,["parse"])):{}),isInlineData(a))j._data={values:a.values};else if(isUrlData(a)){if(j._data={url:a.url},!P.type){var B=/(?:\.([^.]+))?$/.exec(a.url)[1];util_contains(["json","csv","tsv","dsv","topojson"],B)||(B="json"),P.type=B}}else isSphereGenerator(a)?j._data={values:[{type:"Sphere"}]}:(isNamedData(a)||isGenerator(a))&&(j._data={});return j._generator=isGenerator(a),a.name&&(j._name=a.name),P&&!isEmpty(P)&&(j._data.format=P),j}return Object(qt.a)(SourceNode,[{key:"dependentFields",value:function dependentFields(){return new Set}},{key:"producedFields",value:function producedFields(){}},{key:"data",get:function get(){return this._data}},{key:"hasName",value:function hasName(){return!!this._name}},{key:"isGenerator",get:function get(){return this._generator}},{key:"dataName",get:function get(){return this._name},set:function set(a){this._name=a}},{key:"parent",set:function set(a){throw new Error("Source nodes have to be roots.")}},{key:"remove",value:function remove(){throw new Error("Source nodes are roots and cannot be removed.")}},{key:"hash",value:function hash(){throw new Error("Cannot hash sources")}},{key:"assemble",value:function assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}]),SourceNode}(ya),optimizer_classPrivateFieldSet=function(a,A,j){if(!A.has(a))throw new TypeError("attempted to set private field on non-instance");return A.set(a,j),j},optimizer_classPrivateFieldGet=function(a,A){if(!A.has(a))throw new TypeError("attempted to get private field on non-instance");return A.get(a)};function isDataSourceNode(a){return a instanceof Wo||a instanceof zo||a instanceof qo}var Ho=function(){function Optimizer(){Object(zt.a)(this,Optimizer),No.set(this,void 0),optimizer_classPrivateFieldSet(this,No,!1)}return Object(qt.a)(Optimizer,[{key:"setModified",value:function setModified(){optimizer_classPrivateFieldSet(this,No,!0)}},{key:"modifiedFlag",get:function get(){return optimizer_classPrivateFieldGet(this,No)}}]),Optimizer}();No=new WeakMap;var Go=function(a){Object(Zr.a)(BottomUpOptimizer,a);var A=Object(ti.a)(BottomUpOptimizer);function BottomUpOptimizer(){return Object(zt.a)(this,BottomUpOptimizer),A.apply(this,arguments)}return Object(qt.a)(BottomUpOptimizer,[{key:"getNodeDepths",value:function getNodeDepths(a,A,j){j.set(a,A);var P,B=Object(pe.a)(a.children);try{for(B.s();!(P=B.n()).done;){var q=P.value;this.getNodeDepths(q,A+1,j)}}catch(ne){B.e(ne)}finally{B.f()}return j}},{key:"optimize",value:function optimize(a){var A,j=this.getNodeDepths(a,0,new Map),P=Object(he.a)(j.entries()).sort((function(a,A){return A[1]-a[1]})),B=Object(pe.a)(P);try{for(B.s();!(A=B.n()).done;){var q=A.value;this.run(q[0])}}catch(ne){B.e(ne)}finally{B.f()}return this.modifiedFlag}}]),BottomUpOptimizer}(Ho),Vo=function(a){Object(Zr.a)(TopDownOptimizer,a);var A=Object(ti.a)(TopDownOptimizer);function TopDownOptimizer(){return Object(zt.a)(this,TopDownOptimizer),A.apply(this,arguments)}return Object(qt.a)(TopDownOptimizer,[{key:"optimize",value:function optimize(a){this.run(a);var A,j=Object(pe.a)(a.children);try{for(j.s();!(A=j.n()).done;){var P=A.value;this.optimize(P)}}catch(B){j.e(B)}finally{j.f()}return this.modifiedFlag}}]),TopDownOptimizer}(Ho),Yo=function(a){Object(Zr.a)(MergeIdenticalNodes,a);var A=Object(ti.a)(MergeIdenticalNodes);function MergeIdenticalNodes(){return Object(zt.a)(this,MergeIdenticalNodes),A.apply(this,arguments)}return Object(qt.a)(MergeIdenticalNodes,[{key:"mergeNodes",value:function mergeNodes(a,A){var j,P=A.shift(),B=Object(pe.a)(A);try{for(B.s();!(j=B.n()).done;){var q=j.value;a.removeChild(q),q.parent=P,q.remove()}}catch(ne){B.e(ne)}finally{B.f()}}},{key:"run",value:function run(a){for(var A=a.children.map((function(a){return a.hash()})),j={},P=0;P<A.length;P++)void 0===j[A[P]]?j[A[P]]=[a.children[P]]:j[A[P]].push(a.children[P]);var B,q=Object(pe.a)(Ae(j));try{for(q.s();!(B=q.n()).done;){var ne=B.value;j[ne].length>1&&(this.setModified(),this.mergeNodes(a,j[ne]))}}catch(ie){q.e(ie)}finally{q.f()}}}]),MergeIdenticalNodes}(Vo),$o=function(a){Object(Zr.a)(RemoveUnnecessaryIdentifierNodes,a);var A=Object(ti.a)(RemoveUnnecessaryIdentifierNodes);function RemoveUnnecessaryIdentifierNodes(a){var j;return Object(zt.a)(this,RemoveUnnecessaryIdentifierNodes),(j=A.call(this)).requiresSelectionId=a&&requiresSelectionId(a),j}return Object(qt.a)(RemoveUnnecessaryIdentifierNodes,[{key:"run",value:function run(a){a instanceof Uo&&(this.requiresSelectionId&&(isDataSourceNode(a.parent)||a.parent instanceof Lo||a.parent instanceof Bo)||(this.setModified(),a.remove()))}}]),RemoveUnnecessaryIdentifierNodes}(Vo),Ko=function(a){Object(Zr.a)(RemoveDuplicateTimeUnits,a);var A=Object(ti.a)(RemoveDuplicateTimeUnits);function RemoveDuplicateTimeUnits(){return Object(zt.a)(this,RemoveDuplicateTimeUnits),A.apply(this,arguments)}return Object(qt.a)(RemoveDuplicateTimeUnits,[{key:"optimize",value:function optimize(a){return this.run(a,new Set),this.modifiedFlag}},{key:"run",value:function run(a,A){var j=new Set;a instanceof wa&&hasIntersection(j=a.producedFields(),A)&&(this.setModified(),a.removeFormulas(A),0===a.producedFields.length&&a.remove());var P,B=Object(pe.a)(a.children);try{for(B.s();!(P=B.n()).done;){var q=P.value;this.run(q,new Set([].concat(Object(he.a)(A),Object(he.a)(j))))}}catch(ne){B.e(ne)}finally{B.f()}}}]),RemoveDuplicateTimeUnits}(Ho),Xo=function(a){Object(Zr.a)(RemoveUnnecessaryOutputNodes,a);var A=Object(ti.a)(RemoveUnnecessaryOutputNodes);function RemoveUnnecessaryOutputNodes(){return Object(zt.a)(this,RemoveUnnecessaryOutputNodes),A.call(this)}return Object(qt.a)(RemoveUnnecessaryOutputNodes,[{key:"run",value:function run(a){a instanceof _a&&!a.isRequired()&&(this.setModified(),a.remove())}}]),RemoveUnnecessaryOutputNodes}(Vo),Jo=function(a){Object(Zr.a)(MoveParseUp,a);var A=Object(ti.a)(MoveParseUp);function MoveParseUp(){return Object(zt.a)(this,MoveParseUp),A.apply(this,arguments)}return Object(qt.a)(MoveParseUp,[{key:"run",value:function run(a){if(!isDataSourceNode(a)&&!(a.numChildren()>1)){var A,j=Object(pe.a)(a.children);try{for(j.s();!(A=j.n()).done;){var P=A.value;if(P instanceof Bo)if(a instanceof Bo)this.setModified(),a.merge(P);else{if(fieldIntersection(a.producedFields(),P.dependentFields()))continue;this.setModified(),P.swapWithParent()}}}catch(B){j.e(B)}finally{j.f()}}}}]),MoveParseUp}(Go),Qo=function(a){Object(Zr.a)(MergeParse,a);var A=Object(ti.a)(MergeParse);function MergeParse(){return Object(zt.a)(this,MergeParse),A.apply(this,arguments)}return Object(qt.a)(MergeParse,[{key:"run",value:function run(a){var A=Object(he.a)(a.children),j=a.children.filter((function(a){return a instanceof Bo}));if(a.numChildren()>1&&j.length>=1){var P,B={},q=new Set,ne=Object(pe.a)(j);try{for(ne.s();!(P=ne.n()).done;){var ie,oe=P.value.parse,se=Object(pe.a)(Ae(oe));try{for(se.s();!(ie=se.n()).done;){var le=ie.value;le in B?B[le]!==oe[le]&&q.add(le):B[le]=oe[le]}}catch(Te){se.e(Te)}finally{se.f()}}}catch(Te){ne.e(Te)}finally{ne.f()}var ge,me=Object(pe.a)(q);try{for(me.s();!(ge=me.n()).done;){delete B[ge.value]}}catch(Te){me.e(Te)}finally{me.f()}if(!isEmpty(B)){this.setModified();var ve,ye=new Bo(a,B),_e=Object(pe.a)(A);try{for(_e.s();!(ve=_e.n()).done;){var we=ve.value;if(we instanceof Bo){var ke,Oe=Object(pe.a)(Ae(B));try{for(Oe.s();!(ke=Oe.n()).done;){var Se=ke.value;delete we.parse[Se]}}catch(Te){Oe.e(Te)}finally{Oe.f()}}a.removeChild(we),we.parent=ye,we instanceof Bo&&0===Ae(we.parse).length&&we.remove()}}catch(Te){_e.e(Te)}finally{_e.f()}}}}}]),MergeParse}(Go),Zo=function(a){Object(Zr.a)(RemoveUnusedSubtrees,a);var A=Object(ti.a)(RemoveUnusedSubtrees);function RemoveUnusedSubtrees(){return Object(zt.a)(this,RemoveUnusedSubtrees),A.apply(this,arguments)}return Object(qt.a)(RemoveUnusedSubtrees,[{key:"run",value:function run(a){a instanceof _a||a.numChildren()>0||a instanceof Io||a instanceof Wo||(this.setModified(),a.remove())}}]),RemoveUnusedSubtrees}(Go),es=function(a){Object(Zr.a)(MergeTimeUnits,a);var A=Object(ti.a)(MergeTimeUnits);function MergeTimeUnits(){return Object(zt.a)(this,MergeTimeUnits),A.apply(this,arguments)}return Object(qt.a)(MergeTimeUnits,[{key:"run",value:function run(a){var A,j=a.children.filter((function(a){return a instanceof wa})),P=j.pop(),B=Object(pe.a)(j);try{for(B.s();!(A=B.n()).done;){var q=A.value;this.setModified(),P.merge(q)}}catch(ne){B.e(ne)}finally{B.f()}}}]),MergeTimeUnits}(Go),ns=function(a){Object(Zr.a)(MergeAggregates,a);var A=Object(ti.a)(MergeAggregates);function MergeAggregates(){return Object(zt.a)(this,MergeAggregates),A.apply(this,arguments)}return Object(qt.a)(MergeAggregates,[{key:"run",value:function run(a){var A,j=a.children.filter((function(a){return a instanceof Lo})),P={},B=Object(pe.a)(j);try{for(B.s();!(A=B.n()).done;){var q=A.value,ne=util_hash(q.groupBy);ne in P||(P[ne]=[]),P[ne].push(q)}}catch(ve){B.e(ve)}finally{B.f()}var ie,oe=Object(pe.a)(Ae(P));try{for(oe.s();!(ie=oe.n()).done;){var se=P[ie.value];if(se.length>1){var le,he=se.pop(),ge=Object(pe.a)(se);try{for(ge.s();!(le=ge.n()).done;){var me=le.value;he.merge(me)&&(a.removeChild(me),me.parent=he,me.remove(),this.setModified())}}catch(ve){ge.e(ve)}finally{ge.f()}}}}catch(ve){oe.e(ve)}finally{oe.f()}}}]),MergeAggregates}(Go),rs=function(a){Object(Zr.a)(MergeBins,a);var A=Object(ti.a)(MergeBins);function MergeBins(a){var j;return Object(zt.a)(this,MergeBins),(j=A.call(this)).model=a,j}return Object(qt.a)(MergeBins,[{key:"run",value:function run(a){var A,j=!(isDataSourceNode(a)||a instanceof yo||a instanceof Bo||a instanceof Uo),P=[],B=[],q=Object(pe.a)(a.children);try{for(q.s();!(A=q.n()).done;){var ne=A.value;ne instanceof Mo&&(j&&!fieldIntersection(a.producedFields(),ne.dependentFields())?P.push(ne):B.push(ne))}}catch(ye){q.e(ye)}finally{q.f()}if(P.length>0){var ie,oe=P.pop(),se=Object(pe.a)(P);try{for(se.s();!(ie=se.n()).done;){var le=ie.value;oe.merge(le,this.model.renameSignal.bind(this.model))}}catch(ye){se.e(ye)}finally{se.f()}this.setModified(),a instanceof Mo?a.merge(oe,this.model.renameSignal.bind(this.model)):oe.swapWithParent()}if(B.length>1){var he,ge=B.pop(),me=Object(pe.a)(B);try{for(me.s();!(he=me.n()).done;){var ve=he.value;ge.merge(ve,this.model.renameSignal.bind(this.model))}}catch(ye){me.e(ye)}finally{me.f()}this.setModified()}}}]),MergeBins}(Go),is=function(a){Object(Zr.a)(MergeOutputs,a);var A=Object(ti.a)(MergeOutputs);function MergeOutputs(){return Object(zt.a)(this,MergeOutputs),A.apply(this,arguments)}return Object(qt.a)(MergeOutputs,[{key:"run",value:function run(a){var A=Object(he.a)(a.children);if(some(A,(function(a){return a instanceof _a}))&&!(a.numChildren()<=1)){var j,P,B=[],q=Object(pe.a)(A);try{for(q.s();!(P=q.n()).done;){var ne=P.value;if(ne instanceof _a){for(var ie=ne;1===ie.numChildren();){var oe=Object(ge.a)(ie.children,1)[0];if(!(oe instanceof _a))break;ie=oe}B.push.apply(B,Object(he.a)(ie.children)),j?(a.removeChild(ne),ne.parent=j.parent,j.parent.removeChild(j),j.parent=ie,this.setModified()):j=ie}else B.push(ne)}}catch(ve){q.e(ve)}finally{q.f()}if(B.length){this.setModified();var se,le=Object(pe.a)(B);try{for(le.s();!(se=le.n()).done;){var me=se.value;me.parent.removeChild(me),me.parent=j}}catch(ve){le.e(ve)}finally{le.f()}}}}}]),MergeOutputs}(Go),os=function(a){Object(Zr.a)(JoinAggregateTransformNode,a);var A=Object(ti.a)(JoinAggregateTransformNode);function JoinAggregateTransformNode(a,j){var P;return Object(zt.a)(this,JoinAggregateTransformNode),(P=A.call(this,a)).transform=j,P}return Object(qt.a)(JoinAggregateTransformNode,[{key:"clone",value:function clone(){return new JoinAggregateTransformNode(null,Se(this.transform))}},{key:"addDimensions",value:function addDimensions(a){this.transform.groupby=unique(this.transform.groupby.concat(a),(function(a){return a}))}},{key:"dependentFields",value:function dependentFields(){var a=new Set;return this.transform.groupby&&this.transform.groupby.forEach(a.add,a),this.transform.joinaggregate.map((function(a){return a.field})).filter((function(a){return void 0!==a})).forEach(a.add,a),a}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}},{key:"getDefaultName",value:function getDefaultName(a){var A;return null!==(A=a.as)&&void 0!==A?A:channeldef_vgField(a)}},{key:"hash",value:function hash(){return"JoinAggregateTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var a,A=[],j=[],P=[],B=Object(pe.a)(this.transform.joinaggregate);try{for(B.s();!(a=B.n()).done;){var q=a.value;j.push(q.op),P.push(this.getDefaultName(q)),A.push(void 0===q.field?null:q.field)}}catch(ie){B.e(ie)}finally{B.f()}var ne=this.transform.groupby;return Object.assign({type:"joinaggregate",as:P,ops:j,fields:A},void 0!==ne?{groupby:ne}:{})}}]),JoinAggregateTransformNode}(ya);var ss=function(a){Object(Zr.a)(StackNode,a);var A=Object(ti.a)(StackNode);function StackNode(a,j){var P;return Object(zt.a)(this,StackNode),(P=A.call(this,a))._stack=j,P}return Object(qt.a)(StackNode,[{key:"clone",value:function clone(){return new StackNode(null,Se(this._stack))}},{key:"stack",get:function get(){return this._stack}},{key:"addDimensions",value:function addDimensions(a){var A;(A=this._stack.facetby).push.apply(A,Object(he.a)(a))}},{key:"dependentFields",value:function dependentFields(){var a=new Set;return a.add(this._stack.stackField),this.getGroupbyFields().forEach(a.add,a),this._stack.facetby.forEach(a.add,a),this._stack.sort.field.forEach(a.add,a),a}},{key:"producedFields",value:function producedFields(){return new Set(this._stack.as)}},{key:"hash",value:function hash(){return"Stack ".concat(util_hash(this._stack))}},{key:"getGroupbyFields",value:function getGroupbyFields(){var a=this._stack,A=a.dimensionFieldDef,j=a.impute,P=a.groupby;return A?A.bin?j?[channeldef_vgField(A,{binSuffix:"mid"})]:[channeldef_vgField(A,{}),channeldef_vgField(A,{binSuffix:"end"})]:[channeldef_vgField(A)]:null!==P&&void 0!==P?P:[]}},{key:"assemble",value:function assemble(){var a=[],A=this._stack,j=A.facetby,P=A.dimensionFieldDef,B=A.stackField,q=A.stackby,ne=A.sort,ie=A.offset,oe=A.impute,se=A.as;if(oe&&P){var le=P.band,pe=void 0===le?.5:le;P.bin&&a.push({type:"formula",expr:"".concat(pe,"*")+channeldef_vgField(P,{expr:"datum"})+"+".concat(1-pe,"*")+channeldef_vgField(P,{expr:"datum",binSuffix:"end"}),as:channeldef_vgField(P,{binSuffix:"mid",forAs:!0})}),a.push({type:"impute",field:B,groupby:[].concat(Object(he.a)(q),Object(he.a)(j)),key:channeldef_vgField(P,{binSuffix:"mid"}),method:"value",value:0})}return a.push({type:"stack",groupby:[].concat(Object(he.a)(this.getGroupbyFields()),Object(he.a)(j)),field:B,sort:ne,as:se,offset:ie}),a}}],[{key:"makeFromTransform",value:function makeFromTransform(a,A){var j=A.stack,P=A.groupby,B=A.as,q=A.offset,ne=void 0===q?"zero":q,ie=[],se=[];if(void 0!==A.sort){var le,he=Object(pe.a)(A.sort);try{for(he.s();!(le=he.n()).done;){var ge=le.value;ie.push(ge.field),se.push(getFirstDefined(ge.order,"ascending"))}}catch(me){he.e(me)}finally{he.f()}}return new StackNode(a,{stackField:j,groupby:P,offset:ne,sort:{field:ie,order:se},facetby:[],as:function isValidAsArray(a){return oe(a)&&a.every((function(a){return isString(a)}))&&a.length>1}(B)?B:isString(B)?[B,B+"_end"]:[A.stack+"_start",A.stack+"_end"]})}},{key:"makeFromEncoding",value:function makeFromEncoding(a,A){var j=A.stack,P=A.encoding;if(!j)return null;var B,q=j.groupbyChannel,ne=j.fieldChannel,ie=j.offset,se=j.impute;q&&(B=getFieldDef(P[q]));var le,he=function getStackByFields(a){return a.stack.stackBy.reduce((function(a,A){var j=channeldef_vgField(A.fieldDef);return j&&a.push(j),a}),[])}(A),pe=A.encoding.order;return le=oe(pe)||isFieldDef(pe)?sortParams(pe):he.reduce((function(a,A){return a.field.push(A),a.order.push("y"===ne?"descending":"ascending"),a}),{field:[],order:[]}),new StackNode(a,{dimensionFieldDef:B,stackField:A.vgField(ne),facetby:[],stackby:he,sort:le,offset:ie,impute:se,as:[A.vgField(ne,{suffix:"start",forAs:!0}),A.vgField(ne,{suffix:"end",forAs:!0})]})}}]),StackNode}(ya),us=function(a){Object(Zr.a)(WindowTransformNode,a);var A=Object(ti.a)(WindowTransformNode);function WindowTransformNode(a,j){var P;return Object(zt.a)(this,WindowTransformNode),(P=A.call(this,a)).transform=j,P}return Object(qt.a)(WindowTransformNode,[{key:"clone",value:function clone(){return new WindowTransformNode(null,Se(this.transform))}},{key:"addDimensions",value:function addDimensions(a){this.transform.groupby=unique(this.transform.groupby.concat(a),(function(a){return a}))}},{key:"dependentFields",value:function dependentFields(){var a,A,j=new Set;return(null!==(a=this.transform.groupby)&&void 0!==a?a:[]).forEach(j.add,j),(null!==(A=this.transform.sort)&&void 0!==A?A:[]).forEach((function(a){return j.add(a.field)})),this.transform.window.map((function(a){return a.field})).filter((function(a){return void 0!==a})).forEach(j.add,j),j}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}},{key:"getDefaultName",value:function getDefaultName(a){var A;return null!==(A=a.as)&&void 0!==A?A:channeldef_vgField(a)}},{key:"hash",value:function hash(){return"WindowTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var a,A,j=[],P=[],B=[],q=[],ne=Object(pe.a)(this.transform.window);try{for(ne.s();!(A=ne.n()).done;){var ie=A.value;P.push(ie.op),B.push(this.getDefaultName(ie)),q.push(void 0===ie.param?null:ie.param),j.push(void 0===ie.field?null:ie.field)}}catch(we){ne.e(we)}finally{ne.f()}var oe=this.transform.frame,se=this.transform.groupby;if(oe&&null===oe[0]&&null===oe[1]&&P.every((function(a){return isAggregateOp(a)})))return Object.assign({type:"joinaggregate",as:B,ops:P,fields:j},void 0!==se?{groupby:se}:{});var le=[],he=[];if(void 0!==this.transform.sort){var ge,me=Object(pe.a)(this.transform.sort);try{for(me.s();!(ge=me.n()).done;){var ve=ge.value;le.push(ve.field),he.push(null!==(a=ve.order)&&void 0!==a?a:"ascending")}}catch(we){me.e(we)}finally{me.f()}}var ye={field:le,order:he},_e=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:q,as:B,ops:P,fields:j,sort:ye},void 0!==_e?{ignorePeers:_e}:{}),void 0!==se?{groupby:se}:{}),void 0!==oe?{frame:oe}:{})}}]),WindowTransformNode}(ya);function moveFacetDown(a){if(a instanceof Io)if(1!==a.numChildren()||a.children[0]instanceof _a){var A=a.model.component.data.main;!function moveMainDownToFacet(a){if(a instanceof _a&&a.type===ta.Main&&1===a.numChildren()){var A=a.children[0];A instanceof Io||(A.swapWithParent(),moveMainDownToFacet(a))}}(A);var j,P=function cloneSubtree(a){return function clone(A){if(!(A instanceof Io)){var j=A.clone();if(j instanceof _a){var P=ls+j.getSource();j.setSource(P),a.model.component.data.outputNodes[P]=j}else(j instanceof Lo||j instanceof ss||j instanceof us||j instanceof os)&&j.addDimensions(a.fields);var B,q=Object(pe.a)(A.children.flatMap(clone));try{for(q.s();!(B=q.n()).done;){B.value.parent=j}}catch(ne){q.e(ne)}finally{q.f()}return[j]}return A.children.flatMap(clone)}}(a),B=a.children.map(P).flat(),q=Object(pe.a)(B);try{for(q.s();!(j=q.n()).done;){j.value.parent=A}}catch(ie){q.e(ie)}finally{q.f()}}else{var ne=a.children[0];(ne instanceof Lo||ne instanceof ss||ne instanceof us||ne instanceof os)&&ne.addDimensions(a.fields),ne.swapWithParent(),moveFacetDown(a)}else a.children.map(moveFacetDown)}var ls="scale_";function checkLinks(a){var A,j=Object(pe.a)(a);try{for(j.s();!(A=j.n()).done;){var P,B=A.value,q=Object(pe.a)(B.children);try{for(q.s();!(P=q.n()).done;){if(P.value.parent!==B)return!1}}catch(ne){q.e(ne)}finally{q.f()}if(!checkLinks(B.children))return!1}}catch(ne){j.e(ne)}finally{j.f()}return!0}function runOptimizer(a,A){var j,P=!1,B=Object(pe.a)(A);try{for(B.s();!(j=B.n()).done;){var q=j.value;P=a.optimize(q)||P}}catch(ne){B.e(ne)}finally{B.f()}return P}function optimizationDataflowHelper(a,A,j){var P=a.sources,B=!1;return B=runOptimizer(new Xo,P)||B,B=runOptimizer(new $o(A),P)||B,P=P.filter((function(a){return a.numChildren()>0})),B=runOptimizer(new Zo,P)||B,P=P.filter((function(a){return a.numChildren()>0})),j||(B=runOptimizer(new Jo,P)||B,B=runOptimizer(new rs(A),P)||B,B=runOptimizer(new Ko,P)||B,B=runOptimizer(new Qo,P)||B,B=runOptimizer(new ns,P)||B,B=runOptimizer(new es,P)||B,B=runOptimizer(new Yo,P)||B,B=runOptimizer(new is,P)||B),a.sources=P,B}function optimizeDataflow(a,A){checkLinks(a.sources);for(var j=0,P=0,B=0;B<5&&optimizationDataflowHelper(a,A,!0);B++)j++;a.sources.map(moveFacetDown);for(var q=0;q<5&&optimizationDataflowHelper(a,A,!1);q++)P++;checkLinks(a.sources),5===Math.max(j,P)&&log_warn("Maximum optimization runs(".concat(5,") reached."))}var cs=function(){function SignalRefWrapper(a){Object(zt.a)(this,SignalRefWrapper),Object.defineProperty(this,"signal",{enumerable:!0,get:a})}return Object(qt.a)(SignalRefWrapper,null,[{key:"fromName",value:function fromName(a,A){return new SignalRefWrapper((function(){return a(A)}))}}]),SignalRefWrapper}(),domain_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function parseScaleDomain(a){isUnitModel(a)?function parseUnitScaleDomain(a){var A,j=a.component.scales,P=Object(pe.a)(Ae(j));try{for(P.s();!(A=P.n()).done;){var B=A.value,q=parseDomainForChannel(a,B);if(j[B].setWithExplicit("domains",q),parseSelectionDomain(a,B),a.component.data.isFaceted){for(var ne=a;!isFacetModel(ne)&&ne.parent;)ne=ne.parent;if("shared"===ne.component.resolve.scale[B]){var ie,oe=Object(pe.a)(q.value);try{for(oe.s();!(ie=oe.n()).done;){var se=ie.value;isDataRefDomain(se)&&(se.data=ls+se.data.replace(ls,""))}}catch(le){oe.e(le)}finally{oe.f()}}}}}catch(le){P.e(le)}finally{P.f()}}(a):function parseNonUnitScaleDomain(a){var A,j=Object(pe.a)(a.children);try{for(j.s();!(A=j.n()).done;){parseScaleDomain(A.value)}}catch(ve){j.e(ve)}finally{j.f()}var B,q=a.component.scales,ne=Object(pe.a)(Ae(q));try{for(ne.s();!(B=ne.n()).done;){var ie,oe=B.value,se=void 0,le=null,he=Object(pe.a)(a.children);try{for(he.s();!(ie=he.n()).done;){var ge=ie.value.component.scales[oe];if(ge){se=void 0===se?ge.getWithExplicit("domains"):mergeValuesWithExplicit(se,ge.getWithExplicit("domains"),"domains","scale",domainsTieBreaker);var me=ge.get("selectionExtent");le&&me&&le.selection!==me.selection&&log_warn(P.NEEDS_SAME_SELECTION),le=me}}}catch(ve){he.e(ve)}finally{he.f()}q[oe].setWithExplicit("domains",se),le&&q[oe].set("selectionExtent",le,!0)}}catch(ve){ne.e(ve)}finally{ne.f()}}(a)}function parseDomainForChannel(a,A){var j=a.getScaleComponent(A).get("type"),P=a.encoding,B=function normalizeUnaggregatedDomain(a,A,j,P){if("unaggregated"===a){var B=canUseUnaggregatedDomain(A,j),q=B.valid,ne=B.reason;if(!q)return void log_warn(ne)}else if(void 0===a&&P.useUnaggregatedDomain){if(canUseUnaggregatedDomain(A,j).valid)return"unaggregated"}return a}(a.scaleDomain(A),a.typedFieldDef(A),j,a.config.scale);return B!==a.scaleDomain(A)&&(a.specifiedScales[A]=Object.assign(Object.assign({},a.specifiedScales[A]),{domain:B})),"x"===A&&getFieldOrDatumDef(P.x2)?getFieldOrDatumDef(P.x)?mergeValuesWithExplicit(parseSingleChannelDomain(j,B,a,"x"),parseSingleChannelDomain(j,B,a,"x2"),"domain","scale",domainsTieBreaker):parseSingleChannelDomain(j,B,a,"x2"):"y"===A&&getFieldOrDatumDef(P.y2)?getFieldOrDatumDef(P.y)?mergeValuesWithExplicit(parseSingleChannelDomain(j,B,a,"y"),parseSingleChannelDomain(j,B,a,"y2"),"domain","scale",domainsTieBreaker):parseSingleChannelDomain(j,B,a,"y2"):parseSingleChannelDomain(j,B,a,A)}function convertDomainIfItIsDateTime(a,A,j){var P,B=null===(P=normalizeTimeUnit(j))||void 0===P?void 0:P.unit;return"temporal"===A||B?function mapDomainToDataSignal(a,A,j){return a.map((function(a){var P=valueExpr(a,{timeUnit:j,type:A});return{signal:"{data: ".concat(P,"}")}}))}(a,A,B):[a]}function parseSingleChannelDomain(a,A,j,P){var B=getFieldOrDatumDef(j.encoding[P]),q=B.type,ne=B.timeUnit;if(function isDomainUnionWith(a){return a&&a.unionWith}(A)){var ie=parseSingleChannelDomain(a,void 0,j,P),oe=convertDomainIfItIsDateTime(A.unionWith,q,ne);return split_makeExplicit([].concat(Object(he.a)(ie.value),Object(he.a)(oe)))}if(isSignalRef(A))return split_makeExplicit([A]);if(A&&"unaggregated"!==A&&!isSelectionDomain(A))return split_makeExplicit(convertDomainIfItIsDateTime(A,q,ne));var se=j.stack;if(se&&P===se.fieldChannel){if("normalize"===se.offset)return makeImplicit([[0,1]]);var le=j.requestDataName(ta.Main);return makeImplicit([{data:le,field:j.vgField(P,{suffix:"start"})},{data:le,field:j.vgField(P,{suffix:"end"})}])}var pe=isScaleChannel(P)&&isFieldDef(B)?function domainSort(a,A,j){if(!hasDiscreteDomain(j))return;var P=a.fieldDef(A),B=P.sort;if(isSortArray(B))return{op:"min",field:sortArrayIndexField(P,A),order:"ascending"};var q=a.stack,ne=q?[].concat(Object(he.a)(q.groupbyField?[q.groupbyField]:[]),Object(he.a)(q.stackBy.map((function(a){return a.fieldDef.field})))):void 0;if(isSortField(B)){var ie=q&&!util_contains(ne,B.field);return normalizeSortField(B,ie)}if(isSortByEncoding(B)){var oe=B.encoding,se=B.order,le=a.fieldDef(oe),pe=le.aggregate,ge=le.field,me=q&&!util_contains(ne,ge);if(isArgminDef(pe)||isArgmaxDef(pe))return normalizeSortField({field:channeldef_vgField(le),order:se},me);if(isAggregateOp(pe)||!pe)return normalizeSortField({op:pe,field:ge,order:se},me)}else{if("descending"===B)return{op:"min",field:a.vgField(A),order:"descending"};if(util_contains(["ascending",void 0],B))return!0}return}(j,P,a):void 0;if(isDatumDef(B))return makeImplicit(convertDomainIfItIsDateTime([B.datum],q,ne));var ge=B;if("unaggregated"===A){var me=j.requestDataName(ta.Main),ve=B.field;return makeImplicit([{data:me,field:channeldef_vgField({field:ve,aggregate:"min"})},{data:me,field:channeldef_vgField({field:ve,aggregate:"max"})}])}if(isBinning(ge.bin)){if(hasDiscreteDomain(a))return makeImplicit("bin-ordinal"===a?[]:[{data:util_isBoolean(pe)?j.requestDataName(ta.Main):j.requestDataName(ta.Raw),field:j.vgField(P,binRequiresRange(ge,P)?{binSuffix:"range"}:{}),sort:!0!==pe&&isObject(pe)?pe:{field:j.vgField(P,{}),op:"min"}}]);var ye=ge.bin;if(isBinning(ye)){var _e=getBinSignalName(j,ge.field,ye);return makeImplicit([new cs((function(){var a=j.getSignalName(_e);return"[".concat(a,".start, ").concat(a,".stop]")}))])}return makeImplicit([{data:j.requestDataName(ta.Main),field:j.vgField(P,{})}])}if(ge.timeUnit&&util_contains(["time","utc"],a)&&hasBand(P,ge,isUnitModel(j)?j.encoding[getSecondaryRangeChannel(P)]:void 0,j.stack,j.markDef,j.config)){var we=j.requestDataName(ta.Main);return makeImplicit([{data:we,field:j.vgField(P)},{data:we,field:j.vgField(P,{suffix:"end"})}])}return makeImplicit(pe?[{data:util_isBoolean(pe)?j.requestDataName(ta.Main):j.requestDataName(ta.Raw),field:j.vgField(P),sort:pe}]:[{data:j.requestDataName(ta.Main),field:j.vgField(P)}])}function normalizeSortField(a,A){var j=a.op,P=a.field,B=a.order;return Object.assign(Object.assign({op:null!==j&&void 0!==j?j:A?"sum":"min"},P?{field:replacePathInField(P)}:{}),B?{order:B}:{})}function parseSelectionDomain(a,A){var j,P=a.component.scales[A],B=a.specifiedScales[A].domain,q=null===(j=a.fieldDef(A))||void 0===j?void 0:j.bin,ne=isSelectionDomain(B)&&B,ie=isBinParams(q)&&isSelectionExtent(q.extent)&&q.extent;(ne||ie)&&P.set("selectionExtent",null!==ne&&void 0!==ne?ne:ie,!0)}function canUseUnaggregatedDomain(a,A){var j=a.aggregate,B=a.type;return j?isString(j)&&!nt[j]?{valid:!1,reason:P.unaggregateDomainWithNonSharedDomainOp(j)}:"quantitative"===B&&"log"===A?{valid:!1,reason:P.unaggregatedDomainWithLogScale(a)}:{valid:!0}:{valid:!1,reason:P.unaggregateDomainHasNoEffectForRawField(a)}}function domainsTieBreaker(a,A,j,B){return a.explicit&&A.explicit&&log_warn(P.mergeConflictingDomainProperty(j,B,a.value,A.value)),{explicit:a.explicit,value:[].concat(Object(he.a)(a.value),Object(he.a)(A.value))}}function getFieldFromDomain(a){if(isDataRefDomain(a)&&isString(a.field))return a.field;if(function isDataRefUnionedDomain(a){return!oe(a)&&("fields"in a&&!("data"in a))}(a)){var A,j,B=Object(pe.a)(a.fields);try{for(B.s();!(j=B.n()).done;){var q=j.value;if(isDataRefDomain(q)&&isString(q.field))if(A){if(A!==q.field)return log_warn(P.FACETED_INDEPENDENT_DIFFERENT_SOURCES),A}else A=q.field}}catch(ie){B.e(ie)}finally{B.f()}return log_warn(P.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),A}if(function isFieldRefUnionDomain(a){return!oe(a)&&("fields"in a&&"data"in a)}(a)){log_warn(P.FACETED_INDEPENDENT_SAME_SOURCE);var ne=a.fields[0];return isString(ne)?ne:void 0}}function assembleDomain(a,A){return function mergeDomains(a){var A=unique(a.map((function(a){if(isDataRefDomain(a)){a.sort;return domain_rest(a,["sort"])}return a})),util_hash),j=unique(a.map((function(a){if(isDataRefDomain(a)){var A=a.sort;return void 0===A||util_isBoolean(A)||("op"in A&&"count"===A.op&&delete A.field,"ascending"===A.order&&delete A.order),A}})).filter((function(a){return void 0!==a})),util_hash);if(0!==A.length){if(1===A.length){var B=a[0];if(isDataRefDomain(B)&&j.length>0){var q=j[0];if(j.length>1)log_warn(P.MORE_THAN_ONE_SORT),q=!0;else if(isObject(q)&&"field"in q){var ne=q.field;B.field===ne&&(q=!q.order||{order:q.order})}return Object.assign(Object.assign({},B),{sort:q})}return B}var ie,oe=unique(j.map((function(a){return util_isBoolean(a)||!("op"in a)||isString(a.op)&&a.op in Xe?a:(log_warn(P.domainSortDropped(a)),!0)})),util_hash);1===oe.length?ie=oe[0]:oe.length>1&&(log_warn(P.MORE_THAN_ONE_SORT),ie=!0);var se=unique(a.map((function(a){return isDataRefDomain(a)?a.data:null})),(function(a){return a}));return 1===se.length&&null!==se[0]?Object.assign({data:se[0],fields:A.map((function(a){return a.field}))},ie?{sort:ie}:{}):Object.assign({fields:A},ie?{sort:ie}:{})}}(a.component.scales[A].get("domains").map((function(A){return isDataRefDomain(A)&&(A.data=a.lookupDataSource(A.data)),A})))}var scale_assemble_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function assembleScales(a){return isLayerModel(a)||isConcatModel(a)?a.children.reduce((function(a,A){return a.concat(assembleScales(A))}),assembleScalesForModel(a)):assembleScalesForModel(a)}function assembleScalesForModel(a){return Ae(a.component.scales).reduce((function(A,j){var P=a.component.scales[j];if(P.merged)return A;var B,q=P.combine(),ne=q.name,ie=q.type,oe=q.selectionExtent,se=(q.domains,q.range,q.reverse),le=scale_assemble_rest(q,["name","type","selectionExtent","domains","range","reverse"]),he=function assembleScaleRange(a,A,j,P){if(isXorY(j)){if(isVgRangeStep(a))return{step:{signal:A+"_step"}}}else if(isObject(a)&&isDataRefDomain(a))return Object.assign(Object.assign({},a),{data:P.lookupDataSource(a.data)});return a}(q.range,ne,j,a);oe&&(B=function assembleSelectionScaleDomain(a,A){var j=A.selection;return{signal:parseSelectionBinExtent(a.getSelectionComponent(j,varName(j)),A)}}(a,oe));var pe=assembleDomain(a,j);return A.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:ne,type:ie},pe?{domain:pe}:{}),B?{domainRaw:B}:{}),{range:he}),void 0!==se?{reverse:se}:{}),le)),A}),[])}var fs=function(a){Object(Zr.a)(ScaleComponent,a);var A=Object(ti.a)(ScaleComponent);function ScaleComponent(a,j){var P;return Object(zt.a)(this,ScaleComponent),(P=A.call(this,{},{name:a})).merged=!1,P.setWithExplicit("type",j),P}return Object(qt.a)(ScaleComponent,[{key:"domainDefinitelyIncludesZero",value:function domainDefinitelyIncludesZero(){return!1!==this.get("zero")||some(this.get("domains"),(function(a){return oe(a)&&2===a.length&&a[0]<=0&&a[1]>=0}))}}]),ScaleComponent}(Zi),ds=["range","scheme"];function range_getSizeChannel(a){return"x"===a?"width":"y"===a?"height":void 0}function getBinStepSignal(a,A){var j=a.fieldDef(A);if(j&&j.bin&&isBinning(j.bin)){var P=getBinSignalName(a,j.field,j.bin),B=range_getSizeChannel(A),q=a.getName(B);return new cs((function(){var A=a.getSignalName(P),j="(".concat(A,".stop - ").concat(A,".start) / ").concat(A,".step");return"".concat(a.getSignalName(q)," / (").concat(j,")")}))}}function parseRangeForChannel(a,A){var j,B=A.specifiedScales[a],q=A.size,ne=A.getScaleComponent(a).get("type"),ie=Object(pe.a)(ds);try{for(ie.s();!(j=ie.n()).done;){var se=j.value;if(void 0!==B[se]){var le=scaleTypeSupportProperty(ne,se),he=channelScalePropertyIncompatability(a,se);if(le)if(he)log_warn(he);else switch(se){case"range":var ge=B.range;if(oe(ge)){if(isXorY(a))return split_makeExplicit(ge.map((function(a){if("width"===a||"height"===a){var j=A.getName(a),P=A.getSignalName.bind(A);return cs.fromName(P,j)}return a})))}else if(isObject(ge))return split_makeExplicit({data:A.requestDataName(ta.Main),field:ge.field,sort:{op:"min",field:A.vgField(a)}});return split_makeExplicit(ge);case"scheme":return split_makeExplicit(parseScheme(B[se]))}else log_warn(P.scalePropertyNotWorkWithScaleType(ne,se,a))}}}catch(ke){ie.e(ke)}finally{ie.f()}if(a===at||a===ot){var me=a===at?"width":"height",ve=q[me];if(isStep(ve)){if(hasDiscreteDomain(ne))return split_makeExplicit({step:ve.step});log_warn(P.stepDropped(me))}}var ye=B.rangeMin,_e=B.rangeMax,we=function defaultRange(a,A){var j=A.size,B=A.config,q=A.mark,ne=A.encoding,ie=A.getSignalName.bind(A),se=getFieldOrDatumDef(ne[a]).type,le=A.getScaleComponent(a).get("type"),he=A.specifiedScales[a],pe=he.domain,ge=he.domainMid;switch(a){case at:case ot:if(util_contains(["point","band"],le))if(a!==at||j.width){if(a===ot&&!j.height){var me=getViewConfigDiscreteSize(B.view,"height");if(isStep(me))return me}}else{var ve=getViewConfigDiscreteSize(B.view,"width");if(isStep(ve))return ve}var ye=range_getSizeChannel(a),_e=A.getName(ye);return a===ot&&hasContinuousDomain(le)?[cs.fromName(ie,_e),0]:[0,cs.fromName(ie,_e)];case mt:var we=A.component.scales[a].get("zero"),ke=function sizeRangeMin(a,A,j){if(A)return isSignalRef(A)?{signal:"".concat(A.signal," ? 0 : ").concat(sizeRangeMin(a,!1,j))}:0;switch(a){case"bar":case"tick":return j.scale.minBandSize;case"line":case"trail":case"rule":return j.scale.minStrokeWidth;case"text":return j.scale.minFontSize;case"point":case"square":case"circle":return j.scale.minSize}throw new Error(P.incompatibleChannel("size",a))}(q,we,B),Oe=function sizeRangeMax(a,A,j,B){var q={x:getBinStepSignal(j,"x"),y:getBinStepSignal(j,"y")};switch(a){case"bar":case"tick":if(void 0!==B.scale.maxBandSize)return B.scale.maxBandSize;var ne=minXYStep(A,q,B.view);return isNumber(ne)?ne-1:new cs((function(){return"".concat(ne.signal," - 1")}));case"line":case"trail":case"rule":return B.scale.maxStrokeWidth;case"text":return B.scale.maxFontSize;case"point":case"square":case"circle":if(B.scale.maxSize)return B.scale.maxSize;var ie=minXYStep(A,q,B.view);return isNumber(ie)?Math.pow(.95*ie,2):new cs((function(){return"pow(".concat(.95," * ").concat(ie.signal,", 2)")}))}throw new Error(P.incompatibleChannel("size",a))}(q,j,A,B);return isContinuousToDiscrete(le)?function interpolateRange(a,A,j){var P=function f(){var P=signalOrStringValue(A),B=signalOrStringValue(a),q="(".concat(P," - ").concat(B,") / (").concat(j," - 1)");return"sequence(".concat(B,", ").concat(P," + ").concat(q,", ").concat(q,")")};return isSignalRef(A)?new cs(P):{signal:P()}}(ke,Oe,function defaultContinuousToDiscreteCount(a,A,j,B){switch(a){case"quantile":return A.scale.quantileCount;case"quantize":return A.scale.quantizeCount;case"threshold":return void 0!==j&&oe(j)?j.length+1:(log_warn(P.domainRequiredForThresholdScale(B)),3)}}(le,B,pe,a)):[ke,Oe];case ct:return[0,2*Math.PI];case"angle":return[0,360];case lt:return[0,new cs((function(){var a=A.getSignalName("width"),j=A.getSignalName("height");return"min(".concat(a,",").concat(j,")/2")}))];case"strokeWidth":return[B.scale.minStrokeWidth,B.scale.maxStrokeWidth];case"strokeDash":return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case gt:return"symbol";case dt:case ht:case pt:return"ordinal"===le?"nominal"===se?"category":"ordinal":void 0!==ge?"diverging":"rect"===q||"geoshape"===q?"heatmap":"ramp";case"opacity":case"fillOpacity":case"strokeOpacity":return[B.scale.minOpacity,B.scale.maxOpacity]}throw new Error("Scale range undefined for channel ".concat(a))}(a,A);return(void 0!==ye||void 0!==_e)&&scaleTypeSupportProperty(ne,"rangeMin")&&oe(we)&&2===we.length?split_makeExplicit([null!==ye&&void 0!==ye?ye:we[0],null!==_e&&void 0!==_e?_e:we[1]]):makeImplicit(we)}function parseScheme(a){return function isExtendedScheme(a){return!isString(a)&&!!a.name}(a)?Object.assign({scheme:a.name},omit(a,["name"])):{scheme:a}}function minXYStep(a,A,j){var P=isStep(a.width)?a.width.step:getViewConfigDiscreteStep(j,"width"),B=isStep(a.height)?a.height.step:getViewConfigDiscreteStep(j,"height");return A.x||A.y?new cs((function(){var a=[A.x?A.x.signal:P,A.y?A.y.signal:B];return"min(".concat(a.join(", "),")")})):Math.min(P,B)}function parseScaleProperty(a,A){isUnitModel(a)?function parseUnitScaleProperty(a,A){var j,B=a.component.scales,q=a.config,ne=a.encoding,ie=a.markDef,oe=a.specifiedScales,se=Object(pe.a)(Ae(B));try{for(se.s();!(j=se.n()).done;){var le=j.value,he=oe[le],ge=B[le],me=a.getScaleComponent(le),ve=getFieldOrDatumDef(ne[le]),ye=he[A],_e=me.get("type"),we=me.get("padding"),ke=me.get("paddingInner"),Oe=scaleTypeSupportProperty(_e,A),Se=channelScalePropertyIncompatability(le,A);if(void 0!==ye&&(Oe?Se&&log_warn(Se):log_warn(P.scalePropertyNotWorkWithScaleType(_e,A,le))),Oe&&void 0===Se)if(void 0!==ye){var Te=ve.timeUnit,je=ve.type;switch(A){case"domainMax":case"domainMin":isDateTime(he[A])||"temporal"===je||Te?ge.set(A,{signal:valueExpr(he[A],{type:je,timeUnit:Te})},!0):ge.set(A,he[A],!0);break;default:ge.copyKeyFromObject(A,he)}}else{var Fe=A in hs?hs[A]({model:a,channel:le,fieldOrDatumDef:ve,scaleType:_e,scalePadding:we,scalePaddingInner:ke,domain:he.domain,markDef:ie,config:q}):q.scale[A];void 0!==Fe&&ge.set(A,Fe,!1)}}}catch(Re){se.e(Re)}finally{se.f()}}(a,A):parseNonUnitScaleProperty(a,A)}var hs={bins:function bins(a){var A=a.model,j=a.fieldOrDatumDef;return isFieldDef(j)?function _bins(a,A){var j=A.bin;if(isBinning(j)){var P=getBinSignalName(a,A.field,j);return new cs((function(){return a.getSignalName(P)}))}if(isBinned(j)&&isBinParams(j)&&void 0!==j.step)return{step:j.step};return}(A,j):void 0},interpolate:function interpolate(a){return function _interpolate(a,A){if(util_contains([dt,ht,pt],a)&&"nominal"!==A)return"hcl";return}(a.channel,a.fieldOrDatumDef.type)},nice:function nice(a){return function _nice(a,A,j){var P;if((null===(P=getFieldDef(j))||void 0===P?void 0:P.bin)||util_contains([Fn,Pn],a))return;return A in At||void 0}(a.scaleType,a.channel,a.fieldOrDatumDef)},padding:function padding(a){var A=a.channel,j=a.scaleType,P=a.fieldOrDatumDef,B=a.markDef,q=a.config;return function _padding(a,A,j,P,B,q){if(a in At){if(isContinuousToContinuous(A)){if(void 0!==j.continuousPadding)return j.continuousPadding;var ne=B.type,ie=B.orient;if("bar"===ne&&(!isFieldDef(P)||!P.bin&&!P.timeUnit)&&("vertical"===ie&&"x"===a||"horizontal"===ie&&"y"===a))return q.continuousBandSize}if(A===In)return j.pointPadding}return}(A,j,q.scale,P,B,q.bar)},paddingInner:function paddingInner(a){var A=a.scalePadding,j=a.channel,P=a.markDef,B=a.config;return function _paddingInner(a,A,j,P){if(void 0!==a)return;if(A in At){var B=P.bandPaddingInner,q=P.barBandPaddingInner,ne=P.rectBandPaddingInner;return getFirstDefined(B,"bar"===j?q:ne)}return}(A,j,P.type,B.scale)},paddingOuter:function paddingOuter(a){var A=a.scalePadding,j=a.channel,P=a.scaleType,B=a.markDef,q=a.scalePaddingInner,ne=a.config;return function _paddingOuter(a,A,j,P,B,q){if(void 0!==a)return;if(A in At){if(j===Nn)return getFirstDefined(q.bandPaddingOuter,isSignalRef(B)?{signal:"".concat(B.signal,"/2")}:B/2)}return}(A,j,P,B.type,q,ne.scale)},reverse:function reverse(a){var A=a.fieldOrDatumDef,j=a.scaleType,P=a.channel,B=a.config;return function _reverse(a,A,j,P){if("x"===j&&void 0!==P.xReverse)return hasContinuousDomain(a)&&"descending"===A?isSignalRef(P.xReverse)?{signal:"!".concat(P.xReverse.signal)}:!P.xReverse:P.xReverse;if(hasContinuousDomain(a)&&"descending"===A)return!0;return}(j,isFieldDef(A)?A.sort:void 0,P,B.scale)},zero:function zero(a){return function _zero(a,A,j,P,B){if(j&&"unaggregated"!==j&&hasContinuousDomain(B)){if(oe(j)){var q=j[0],ne=j[j.length-1];if(q<=0&&ne>=0)return!0}return!1}if("size"===a&&"quantitative"===A.type&&!isContinuousToDiscrete(B))return!0;if((!isFieldDef(A)||!A.bin)&&util_contains([].concat(Object(he.a)(jt),Object(he.a)(Pt)),a)){var ie=P.orient;return!util_contains(["bar","area","line","trail"],P.type)||!("horizontal"===ie&&"y"===a||"vertical"===ie&&"x"===a)}return!1}(a.channel,a.fieldOrDatumDef,a.domain,a.markDef,a.scaleType)}};function parseScaleRange(a){isUnitModel(a)?function parseUnitScaleRange(a){var A,j=a.component.scales,P=Object(pe.a)(It);try{for(P.s();!(A=P.n()).done;){var B=A.value,q=j[B];if(q){var ne=parseRangeForChannel(B,a);q.setWithExplicit("range",ne)}}}catch(ie){P.e(ie)}finally{P.f()}}(a):parseNonUnitScaleProperty(a,"range")}function parseNonUnitScaleProperty(a,A){var j,P=a.component.scales,B=Object(pe.a)(a.children);try{for(B.s();!(j=B.n()).done;){var q=j.value;"range"===A?parseScaleRange(q):parseScaleProperty(q,A)}}catch(me){B.e(me)}finally{B.f()}var ne,ie=Object(pe.a)(Ae(P));try{for(ie.s();!(ne=ie.n()).done;){var oe,se=ne.value,le=void 0,he=Object(pe.a)(a.children);try{for(he.s();!(oe=he.n()).done;){var ge=oe.value.component.scales[se];if(ge)le=mergeValuesWithExplicit(le,ge.getWithExplicit(A),A,"scale",tieBreakByComparing((function(a,j){switch(A){case"range":return a.step&&j.step?a.step-j.step:0}return 0})))}}catch(me){he.e(me)}finally{he.f()}P[se].setWithExplicit(A,le)}}catch(me){ie.e(me)}finally{ie.f()}}function type_scaleType(a,A,j,B){var q=function type_defaultType(a,A,j){var B;switch(A.type){case"nominal":case"ordinal":if(isColorChannel(a)||"discrete"===rangeType(a))return"shape"===a&&"ordinal"===A.type&&log_warn(P.discreteChannelCannotEncode(a,"ordinal")),"ordinal";if(a in At){if(util_contains(["rect","bar","image","rule"],j))return"band"}else if("arc"===j&&a in Ft)return"band";return void 0!==A.band||isPositionFieldOrDatumDef(A)&&(null===(B=A.axis)||void 0===B?void 0:B.tickBand)?"band":"point";case"temporal":return isColorChannel(a)?"time":"discrete"===rangeType(a)?(log_warn(P.discreteChannelCannotEncode(a,"temporal")),"ordinal"):isFieldDef(A)&&A.timeUnit&&normalizeTimeUnit(A.timeUnit).utc?"utc":"time";case"quantitative":return isColorChannel(a)?isFieldDef(A)&&isBinning(A.bin)?"bin-ordinal":"linear":"discrete"===rangeType(a)?(log_warn(P.discreteChannelCannotEncode(a,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(P.invalidFieldType(A.type))}(A,j,B),ne=a.type;return isScaleChannel(A)?void 0!==ne?function channelSupportScaleType(a,A){if(!isScaleChannel(a))return!1;switch(a){case at:case ot:case ct:case lt:return isContinuousToContinuous(A)||util_contains(["band","point"],A);case mt:case"strokeWidth":case"opacity":case"fillOpacity":case"strokeOpacity":case"angle":return isContinuousToContinuous(A)||isContinuousToDiscrete(A)||util_contains(["band","point","ordinal"],A);case dt:case ht:case pt:return"band"!==A;case"strokeDash":return"ordinal"===A||isContinuousToDiscrete(A);case gt:return"ordinal"===A}}(A,ne)?isFieldDef(j)&&!function scaleTypeSupportDataType(a,A){return util_contains([kn,Sn],A)?void 0===a||hasDiscreteDomain(a):A===On?util_contains([Fn,Pn,void 0],a):A!==wn||util_contains([Tn,Dn,An,jn,Rn,Mn,Ln,Cn,void 0],a)}(ne,j.type)?(log_warn(P.scaleTypeNotWorkWithFieldDef(ne,q)),q):ne:(log_warn(P.scaleTypeNotWorkWithChannel(A,ne,q)),q):q:null}function parseScaleCore(a){isUnitModel(a)?a.component.scales=function parseUnitScaleCore(a){var A=a.encoding,j=a.mark;return It.reduce((function(P,B){var q=getFieldOrDatumDef(A[B]);if(q&&j===pr&&B===gt&&q.type===En)return P;var ne=q&&q.scale;if(q&&null!==ne&&!1!==ne){var ie=type_scaleType(ne=null!==ne&&void 0!==ne?ne:{},B,q,j);P[B]=new fs(a.scaleName(B+"",!0),{value:ie,explicit:ne.type===ie})}return P}),{})}(a):a.component.scales=function parseNonUnitScaleCore(a){var A,j,P=a.component.scales={},B={},q=a.component.resolve,ne=Object(pe.a)(a.children);try{for(ne.s();!(j=ne.n()).done;){var ie=j.value;parseScaleCore(ie);var oe,se=Object(pe.a)(Ae(ie.component.scales));try{for(se.s();!(oe=se.n()).done;){var le=oe.value;if(q.scale[le]=null!==(A=q.scale[le])&&void 0!==A?A:defaultScaleResolve(le,a),"shared"===q.scale[le]){var he=B[le],ge=ie.component.scales[le].getWithExplicit("type");he?scaleCompatible(he.value,ge.value)?B[le]=mergeValuesWithExplicit(he,ge,"type","scale",ps):(q.scale[le]="independent",delete B[le]):B[le]=ge}}}catch(je){se.e(je)}finally{se.f()}}}catch(je){ne.e(je)}finally{ne.f()}var me,ve=Object(pe.a)(Ae(B));try{for(ve.s();!(me=ve.n()).done;){var ye=me.value,_e=a.scaleName(ye,!0),we=B[ye];P[ye]=new fs(_e,we);var ke,Oe=Object(pe.a)(a.children);try{for(Oe.s();!(ke=Oe.n()).done;){var Se=ke.value,Te=Se.component.scales[ye];Te&&(Se.renameScale(Te.get("name"),_e),Te.merged=!0)}}catch(je){Oe.e(je)}finally{Oe.f()}}}catch(je){ve.e(je)}finally{ve.f()}return P}(a)}var ps=tieBreakByComparing((function(a,A){return scaleTypePrecedence(a)-scaleTypePrecedence(A)}));var model_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},gs=function(){function NameMap(){Object(zt.a)(this,NameMap),this.nameMap={}}return Object(qt.a)(NameMap,[{key:"rename",value:function rename(a,A){this.nameMap[a]=A}},{key:"has",value:function has(a){return void 0!==this.nameMap[a]}},{key:"get",value:function get(a){for(;this.nameMap[a]&&a!==this.nameMap[a];)a=this.nameMap[a];return a}}]),NameMap}();function isUnitModel(a){return"unit"===(null===a||void 0===a?void 0:a.type)}function isFacetModel(a){return"facet"===(null===a||void 0===a?void 0:a.type)}function isConcatModel(a){return"concat"===(null===a||void 0===a?void 0:a.type)}function isLayerModel(a){return"layer"===(null===a||void 0===a?void 0:a.type)}var ms=function(){function Model(a,A,j,P,B,q,ne){var ie,oe,se=this;Object(zt.a)(this,Model),this.type=A,this.parent=j,this.config=B,this.children=[],this.correctDataNames=function(a){return a.from&&a.from.data&&(a.from.data=se.lookupDataSource(a.from.data)),a.from&&a.from.facet&&a.from.facet.data&&(a.from.facet.data=se.lookupDataSource(a.from.facet.data)),a},this.parent=j,this.config=B,this.view=replaceExprRefInIndex(ne),this.name=null!==(ie=a.name)&&void 0!==ie?ie:P,this.title=isText(a.title)?{text:a.title}:a.title?this.initTitle(a.title):void 0,this.scaleNameMap=j?j.scaleNameMap:new gs,this.projectionNameMap=j?j.projectionNameMap:new gs,this.signalNameMap=j?j.signalNameMap:new gs,this.data=a.data,this.description=a.description,this.transforms=function normalizeTransform(a){return a.map((function(a){return isFilter(a)?{filter:normalizeLogicalComposition(a.filter,normalizePredicate)}:a}))}(null!==(oe=a.transform)&&void 0!==oe?oe:[]),this.layout="layer"===A||"unit"===A?{}:function extractCompositionLayout(a,A,j){var P,B,q=j[A],ne={},ie=q.spacing,oe=q.columns;void 0!==ie&&(ne.spacing=ie),void 0!==oe&&(isFacetSpec(a)&&!isFacetMapping(a.facet)||isConcatSpec(a))&&(ne.columns=oe),isVConcatSpec(a)&&(ne.columns=1);var se,le=Object(pe.a)(qr);try{for(le.s();!(se=le.n()).done;){var he=se.value;if(void 0!==a[he])if("spacing"===he){var ge=a[he];ne[he]=isNumber(ge)?ge:{row:null!==(P=ge.row)&&void 0!==P?P:ie,column:null!==(B=ge.column)&&void 0!==B?B:ie}}else ne[he]=a[he]}}catch(me){le.e(me)}finally{le.f()}return ne}(a,A,B),this.component={data:{sources:j?j.component.data.sources:[],outputNodes:j?j.component.data.outputNodes:{},outputNodeRefCounts:j?j.component.data.outputNodeRefCounts:{},isFaceted:isFacetSpec(a)||j&&j.component.data.isFaceted&&void 0===a.data},layoutSize:new Zi,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},q?Se(q):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return Object(qt.a)(Model,[{key:"initTitle",value:function initTitle(a){var A,j=Ae(a),P={text:signalRefOrValue(a.text)},B=Object(pe.a)(j);try{for(B.s();!(A=B.n()).done;){var q=A.value;P[q]=signalRefOrValue(a[q])}}catch(ne){B.e(ne)}finally{B.f()}return P}},{key:"width",get:function get(){return this.getSizeSignalRef("width")}},{key:"height",get:function get(){return this.getSizeSignalRef("height")}},{key:"parse",value:function parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}},{key:"parseScale",value:function parseScale(){!function parseScales(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=A.ignoreRange;parseScaleCore(a),parseScaleDomain(a);var P,B=Object(pe.a)(Kn);try{for(B.s();!(P=B.n()).done;){var q=P.value;parseScaleProperty(a,q)}}catch(ne){B.e(ne)}finally{B.f()}j||parseScaleRange(a)}(this)}},{key:"parseProjection",value:function parseProjection(){parse_parseProjection(this)}},{key:"renameTopLevelLayoutSizeSignal",value:function renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}},{key:"parseLegends",value:function parseLegends(){parseLegend(this)}},{key:"assembleGroupStyle",value:function assembleGroupStyle(){var a,A;if("unit"===this.type||"layer"===this.type)return null!==(A=null===(a=this.view)||void 0===a?void 0:a.style)&&void 0!==A?A:"cell"}},{key:"assembleEncodeFromView",value:function assembleEncodeFromView(a){a.style;var A,j=model_rest(a,["style"]),P={},B=Object(pe.a)(Ae(j));try{for(B.s();!(A=B.n()).done;){var q=A.value,ne=j[q];void 0!==ne&&(P[q]=signalOrValueRef(ne))}}catch(ie){B.e(ie)}finally{B.f()}return P}},{key:"assembleGroupEncodeEntry",value:function assembleGroupEncodeEntry(a){var A={};return this.view&&(A=this.assembleEncodeFromView(this.view)),a||(this.description&&(A.description=signalOrValueRef(this.description)),"unit"!==this.type&&"layer"!==this.type)?isEmpty(A)?void 0:A:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!==A&&void 0!==A?A:{})}},{key:"assembleLayout",value:function assembleLayout(){if(this.layout){var a=this.layout,A=a.spacing,j=model_rest(a,["spacing"]),P=this.component,B=this.config,q=function assembleLayoutTitleBand(a,A){var j,P={},B=Object(pe.a)(wt);try{for(B.s();!(j=B.n()).done;){var q=j.value,ne=a[q];if(null===ne||void 0===ne?void 0:ne.facetFieldDef){var ie=getHeaderProperties(["titleAnchor","titleOrient"],ne.facetFieldDef.header,A,q),oe=ie.titleAnchor,se=getHeaderChannel(q,ie.titleOrient),le=getLayoutTitleBand(oe,se);void 0!==le&&(P[se]=le)}}}catch(he){B.e(he)}finally{B.f()}return isEmpty(P)?void 0:P}(P.layoutHeaders,B);return Object.assign(Object.assign(Object.assign({padding:A},this.assembleDefaultLayout()),j),q?{titleBand:q}:{})}}},{key:"assembleDefaultLayout",value:function assembleDefaultLayout(){return{}}},{key:"assembleHeaderMarks",value:function assembleHeaderMarks(){var a,A=this.component.layoutHeaders,j=[],P=Object(pe.a)(wt);try{for(P.s();!(a=P.n()).done;){var B=a.value;A[B].title&&j.push(assembleTitleGroup(this,B))}}catch(oe){P.e(oe)}finally{P.f()}var q,ne=Object(pe.a)(xo);try{for(ne.s();!(q=ne.n()).done;){var ie=q.value;j=j.concat(assembleHeaderGroups(this,ie))}}catch(oe){ne.e(oe)}finally{ne.f()}return j}},{key:"assembleAxes",value:function assembleAxes(){return function assemble_assembleAxes(a,A){var j=a.x,P=void 0===j?[]:j,B=a.y,q=void 0===B?[]:B;return[].concat(Object(he.a)(P.map((function(a){return assembleAxis(a,"grid",A)}))),Object(he.a)(q.map((function(a){return assembleAxis(a,"grid",A)}))),Object(he.a)(P.map((function(a){return assembleAxis(a,"main",A)}))),Object(he.a)(q.map((function(a){return assembleAxis(a,"main",A)})))).filter((function(a){return a}))}(this.component.axes,this.config)}},{key:"assembleLegends",value:function assembleLegends(){return assemble_assembleLegends(this)}},{key:"assembleProjections",value:function assembleProjections(){return assemble_assembleProjections(this)}},{key:"assembleTitle",value:function assembleTitle(){var a,A,j,P=null!==(a=this.title)&&void 0!==a?a:{},B=P.encoding,q=model_rest(P,["encoding"]),ne=Object.assign(Object.assign(Object.assign({},extractTitleConfig(this.config.title).nonMark),q),B?{encode:{update:B}}:{});if(ne.text)return util_contains(["unit","layer"],this.type)?util_contains(["middle",void 0],ne.anchor)&&(ne.frame=null!==(A=ne.frame)&&void 0!==A?A:"group"):ne.anchor=null!==(j=ne.anchor)&&void 0!==j?j:"start",isEmpty(ne)?void 0:ne}},{key:"assembleGroup",value:function assembleGroup(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],A={};(a=a.concat(this.assembleSignals())).length>0&&(A.signals=a);var j=this.assembleLayout();j&&(A.layout=j),A.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var P=!this.parent||isFacetModel(this.parent)?assembleScales(this):[];P.length>0&&(A.scales=P);var B=this.assembleAxes();B.length>0&&(A.axes=B);var q=this.assembleLegends();return q.length>0&&(A.legends=q),A}},{key:"getName",value:function getName(a){return varName((this.name?this.name+"_":"")+a)}},{key:"getDataName",value:function getDataName(a){return this.getName(ta[a].toLowerCase())}},{key:"requestDataName",value:function requestDataName(a){var A=this.getDataName(a),j=this.component.data.outputNodeRefCounts;return j[A]=(j[A]||0)+1,A}},{key:"getSizeSignalRef",value:function getSizeSignalRef(a){if(isFacetModel(this.parent)){var A=getPositionScaleChannel(getSizeTypeFromLayoutSizeType(a)),j=this.component.scales[A];if(j&&!j.merged){var B=j.get("type"),q=j.get("range");if(hasDiscreteDomain(B)&&isVgRangeStep(q)){var ne=j.get("name"),ie=getFieldFromDomain(assembleDomain(this,A));return ie?{signal:sizeExpr(ne,j,channeldef_vgField({aggregate:"distinct",field:ie},{expr:"datum"}))}:(log_warn(P.unknownField(A)),null)}}}return{signal:this.signalNameMap.get(this.getName(a))}}},{key:"lookupDataSource",value:function lookupDataSource(a){var A=this.component.data.outputNodes[a];return A?A.getSource():a}},{key:"getSignalName",value:function getSignalName(a){return this.signalNameMap.get(a)}},{key:"renameSignal",value:function renameSignal(a,A){this.signalNameMap.rename(a,A)}},{key:"renameScale",value:function renameScale(a,A){this.scaleNameMap.rename(a,A)}},{key:"renameProjection",value:function renameProjection(a,A){this.projectionNameMap.rename(a,A)}},{key:"scaleName",value:function scaleName(a,A){return A?this.getName(a):isChannel(a)&&isScaleChannel(a)&&this.component.scales[a]||this.scaleNameMap.has(this.getName(a))?this.scaleNameMap.get(this.getName(a)):void 0}},{key:"projectionName",value:function projectionName(a){return a?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}},{key:"getScaleComponent",value:function getScaleComponent(a){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");var A=this.component.scales[a];return A&&!A.merged?A:this.parent?this.parent.getScaleComponent(a):void 0}},{key:"getSelectionComponent",value:function getSelectionComponent(a,A){var j=this.component.selection[a];if(!j&&this.parent&&(j=this.parent.getSelectionComponent(a,A)),!j)throw new Error(P.selectionNotFound(A));return j}},{key:"hasAxisOrientSignalRef",value:function hasAxisOrientSignalRef(){var a,A;return(null===(a=this.component.axes.x)||void 0===a?void 0:a.some((function(a){return a.hasOrientSignalRef()})))||(null===(A=this.component.axes.y)||void 0===A?void 0:A.some((function(a){return a.hasOrientSignalRef()})))}}]),Model}(),vs=function(a){Object(Zr.a)(ModelWithField,a);var A=Object(ti.a)(ModelWithField);function ModelWithField(){return Object(zt.a)(this,ModelWithField),A.apply(this,arguments)}return Object(qt.a)(ModelWithField,[{key:"vgField",value:function vgField(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=this.fieldDef(a);if(j)return channeldef_vgField(j,A)}},{key:"reduceFieldDef",value:function reduceFieldDef(a,A){return function reduce(a,A,j,P){return a?Ae(a).reduce((function(j,B){var q=a[B];return oe(q)?q.reduce((function(a,j){return A.call(P,a,j,B)}),j):A.call(P,j,q,B)}),j):j}(this.getMapping(),(function(A,j,P){var B=getFieldDef(j);return B?a(A,B,P):A}),A)}},{key:"forEachFieldDef",value:function forEachFieldDef(a,A){forEach(this.getMapping(),(function(A,j){var P=getFieldDef(A);P&&a(P,j)}),A)}}]),ModelWithField}(ms),density_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},ys=function(a){Object(Zr.a)(DensityTransformNode,a);var A=Object(ti.a)(DensityTransformNode);function DensityTransformNode(a,j){var P,B,q,ne;Object(zt.a)(this,DensityTransformNode),(P=A.call(this,a)).transform=j,P.transform=Se(j);var ie=null!==(B=P.transform.as)&&void 0!==B?B:[void 0,void 0];return P.transform.as=[null!==(q=ie[0])&&void 0!==q?q:"value",null!==(ne=ie[1])&&void 0!==ne?ne:"density"],P}return Object(qt.a)(DensityTransformNode,[{key:"clone",value:function clone(){return new DensityTransformNode(null,Se(this.transform))}},{key:"dependentFields",value:function dependentFields(){var a;return new Set([this.transform.density].concat(Object(he.a)(null!==(a=this.transform.groupby)&&void 0!==a?a:[])))}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.as)}},{key:"hash",value:function hash(){return"DensityTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var a=this.transform,A=a.density,j=density_rest(a,["density"]);return Object.assign({type:"kde",field:A},j)}}]),DensityTransformNode}(ya),bs=function(a){Object(Zr.a)(FilterInvalidNode,a);var A=Object(ti.a)(FilterInvalidNode);function FilterInvalidNode(a,j){var P;return Object(zt.a)(this,FilterInvalidNode),(P=A.call(this,a)).filter=j,P}return Object(qt.a)(FilterInvalidNode,[{key:"clone",value:function clone(){return new FilterInvalidNode(null,Object.assign({},this.filter))}},{key:"dependentFields",value:function dependentFields(){return new Set(Ae(this.filter))}},{key:"producedFields",value:function producedFields(){return new Set}},{key:"hash",value:function hash(){return"FilterInvalid ".concat(util_hash(this.filter))}},{key:"assemble",value:function assemble(){var a=this,A=Ae(this.filter).reduce((function(A,j){var P=a.filter[j],B=channeldef_vgField(P,{expr:"datum"});return null!==P&&("temporal"===P.type?A.push("(isDate(".concat(B,") || (isValid(").concat(B,") && isFinite(+").concat(B,")))")):"quantitative"===P.type&&(A.push("isValid(".concat(B,")")),A.push("isFinite(+".concat(B,")")))),A}),[]);return A.length>0?{type:"filter",expr:A.join(" && ")}:null}}],[{key:"make",value:function make(a,A){var j=A.config,P=A.mark;if("filter"!==getMarkPropOrConfig("invalid",A.markDef,j))return null;var B=A.reduceFieldDef((function(a,j,B){var q=isScaleChannel(B)&&A.getScaleComponent(B);q&&(hasContinuousDomain(q.get("type"))&&"count"!==j.aggregate&&!isPathMark(P)&&(a[j.field]=j));return a}),{});return Ae(B).length?new FilterInvalidNode(a,B):null}}]),FilterInvalidNode}(ya),_s=function(a){Object(Zr.a)(FlattenTransformNode,a);var A=Object(ti.a)(FlattenTransformNode);function FlattenTransformNode(a,j){var P;Object(zt.a)(this,FlattenTransformNode),(P=A.call(this,a)).transform=j,P.transform=Se(j);var B=P.transform,q=B.flatten,ne=B.as,ie=void 0===ne?[]:ne;return P.transform.as=q.map((function(a,A){var j;return null!==(j=ie[A])&&void 0!==j?j:a})),P}return Object(qt.a)(FlattenTransformNode,[{key:"clone",value:function clone(){return new FlattenTransformNode(this.parent,Se(this.transform))}},{key:"dependentFields",value:function dependentFields(){return new Set(this.transform.flatten)}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.as)}},{key:"hash",value:function hash(){return"FlattenTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var a=this.transform;return{type:"flatten",fields:a.flatten,as:a.as}}}]),FlattenTransformNode}(ya),xs=function(a){Object(Zr.a)(FoldTransformNode,a);var A=Object(ti.a)(FoldTransformNode);function FoldTransformNode(a,j){var P,B,q,ne;Object(zt.a)(this,FoldTransformNode),(P=A.call(this,a)).transform=j,P.transform=Se(j);var ie=null!==(B=P.transform.as)&&void 0!==B?B:[void 0,void 0];return P.transform.as=[null!==(q=ie[0])&&void 0!==q?q:"key",null!==(ne=ie[1])&&void 0!==ne?ne:"value"],P}return Object(qt.a)(FoldTransformNode,[{key:"clone",value:function clone(){return new FoldTransformNode(null,Se(this.transform))}},{key:"dependentFields",value:function dependentFields(){return new Set(this.transform.fold)}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.as)}},{key:"hash",value:function hash(){return"FoldTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var a=this.transform;return{type:"fold",fields:a.fold,as:a.as}}}]),FoldTransformNode}(ya),ws=function(a){Object(Zr.a)(GeoJSONNode,a);var A=Object(ti.a)(GeoJSONNode);function GeoJSONNode(a,j,P,B){var q;return Object(zt.a)(this,GeoJSONNode),(q=A.call(this,a)).fields=j,q.geojson=P,q.signal=B,q}return Object(qt.a)(GeoJSONNode,[{key:"clone",value:function clone(){return new GeoJSONNode(null,Se(this.fields),this.geojson,this.signal)}},{key:"dependentFields",value:function dependentFields(){var a,A=(null!==(a=this.fields)&&void 0!==a?a:[]).filter(isString);return new Set([].concat(Object(he.a)(this.geojson?[this.geojson]:[]),Object(he.a)(A)))}},{key:"producedFields",value:function producedFields(){return new Set}},{key:"hash",value:function hash(){return"GeoJSON ".concat(this.geojson," ").concat(this.signal," ").concat(util_hash(this.fields))}},{key:"assemble",value:function assemble(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}],[{key:"parseAll",value:function parseAll(a,A){if(A.component.projection&&!A.component.projection.isFit)return a;for(var j=0,P=0,B=[["longitude","latitude"],["longitude2","latitude2"]];P<B.length;P++){var q=B[P].map((function(a){var j=getFieldOrDatumDef(A.encoding[a]);return isFieldDef(j)?j.field:isDatumDef(j)?{expr:"".concat(j.datum)}:isValueDef(j)?{expr:"".concat(j.value)}:void 0}));(q[0]||q[1])&&(a=new GeoJSONNode(a,q,null,A.getName("geojson_".concat(j++))))}if(A.channelHasField(gt)){var ne=A.typedFieldDef(gt);ne.type===En&&(a=new GeoJSONNode(a,null,ne.field,A.getName("geojson_".concat(j++))))}return a}}]),GeoJSONNode}(ya),ks=function(a){Object(Zr.a)(GeoPointNode,a);var A=Object(ti.a)(GeoPointNode);function GeoPointNode(a,j,P,B){var q;return Object(zt.a)(this,GeoPointNode),(q=A.call(this,a)).projection=j,q.fields=P,q.as=B,q}return Object(qt.a)(GeoPointNode,[{key:"clone",value:function clone(){return new GeoPointNode(null,this.projection,Se(this.fields),Se(this.as))}},{key:"dependentFields",value:function dependentFields(){return new Set(this.fields.filter(isString))}},{key:"producedFields",value:function producedFields(){return new Set(this.as)}},{key:"hash",value:function hash(){return"Geopoint ".concat(this.projection," ").concat(util_hash(this.fields)," ").concat(util_hash(this.as))}},{key:"assemble",value:function assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}],[{key:"parseAll",value:function parseAll(a,A){if(!A.projectionName())return a;for(var j=0,P=[["longitude","latitude"],["longitude2","latitude2"]];j<P.length;j++){var B=P[j],q=B.map((function(a){var j=getFieldOrDatumDef(A.encoding[a]);return isFieldDef(j)?j.field:isDatumDef(j)?{expr:"".concat(j.datum)}:isValueDef(j)?{expr:"".concat(j.value)}:void 0})),ne="longitude2"===B[0]?"2":"";(q[0]||q[1])&&(a=new GeoPointNode(a,A.projectionName(),q,[A.getName("x"+ne),A.getName("y"+ne)]))}return a}}]),GeoPointNode}(ya),Os=function(a){Object(Zr.a)(ImputeNode,a);var A=Object(ti.a)(ImputeNode);function ImputeNode(a,j){var P;return Object(zt.a)(this,ImputeNode),(P=A.call(this,a)).transform=j,P}return Object(qt.a)(ImputeNode,[{key:"clone",value:function clone(){return new ImputeNode(null,Se(this.transform))}},{key:"dependentFields",value:function dependentFields(){var a;return new Set([this.transform.impute,this.transform.key].concat(Object(he.a)(null!==(a=this.transform.groupby)&&void 0!==a?a:[])))}},{key:"producedFields",value:function producedFields(){return new Set([this.transform.impute])}},{key:"processSequence",value:function processSequence(a){var A=a.start,j=void 0===A?0:A,P=a.stop,B=a.step,q=[j,P].concat(Object(he.a)(B?[B]:[])).join(",");return{signal:"sequence(".concat(q,")")}}},{key:"hash",value:function hash(){return"Impute ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var a,A=this.transform,j=A.impute,P=A.key,B=A.keyvals,q=A.method,ne=A.groupby,ie=A.value,oe=A.frame,se=void 0===oe?[null,null]:oe,le=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:j,key:P},B?{keyvals:(a=B,void 0!==(null===a||void 0===a?void 0:a.stop)?this.processSequence(B):B)}:{}),{method:"value"}),ne?{groupby:ne}:{}),{value:q&&"value"!==q?null:ie});return q&&"value"!==q?[le,Object.assign({type:"window",as:["imputed_".concat(j,"_value")],ops:[q],fields:[j],frame:se,ignorePeers:!1},ne?{groupby:ne}:{}),{type:"formula",expr:"datum.".concat(j," === null ? datum.imputed_").concat(j,"_value : datum.").concat(j),as:j}]:[le]}}],[{key:"makeFromTransform",value:function makeFromTransform(a,A){return new ImputeNode(a,A)}},{key:"makeFromEncoding",value:function makeFromEncoding(a,A){var j=A.encoding,P=j.x,B=j.y;if(isFieldDef(P)&&isFieldDef(B)){var q=P.impute?P:B.impute?B:void 0;if(void 0===q)return;var ne=P.impute?B:B.impute?P:void 0,ie=q.impute,oe=ie.method,se=ie.value,le=ie.frame,he=ie.keyvals,pe=pathGroupingFields(A.mark,j);return new ImputeNode(a,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:q.field,key:ne.field},oe?{method:oe}:{}),void 0!==se?{value:se}:{}),le?{frame:le}:{}),void 0!==he?{keyvals:he}:{}),pe.length?{groupby:pe}:{}))}return null}}]),ImputeNode}(ya),loess_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},Ss=function(a){Object(Zr.a)(LoessTransformNode,a);var A=Object(ti.a)(LoessTransformNode);function LoessTransformNode(a,j){var P,B,q,ne;Object(zt.a)(this,LoessTransformNode),(P=A.call(this,a)).transform=j,P.transform=Se(j);var ie=null!==(B=P.transform.as)&&void 0!==B?B:[void 0,void 0];return P.transform.as=[null!==(q=ie[0])&&void 0!==q?q:j.on,null!==(ne=ie[1])&&void 0!==ne?ne:j.loess],P}return Object(qt.a)(LoessTransformNode,[{key:"clone",value:function clone(){return new LoessTransformNode(null,Se(this.transform))}},{key:"dependentFields",value:function dependentFields(){var a;return new Set([this.transform.loess,this.transform.on].concat(Object(he.a)(null!==(a=this.transform.groupby)&&void 0!==a?a:[])))}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.as)}},{key:"hash",value:function hash(){return"LoessTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var a=this.transform,A=a.loess,j=a.on,P=loess_rest(a,["loess","on"]);return Object.assign({type:"loess",x:j,y:A},P)}}]),LoessTransformNode}(ya),Es=function(a){Object(Zr.a)(LookupNode,a);var A=Object(ti.a)(LookupNode);function LookupNode(a,j,P){var B;return Object(zt.a)(this,LookupNode),(B=A.call(this,a)).transform=j,B.secondary=P,B}return Object(qt.a)(LookupNode,[{key:"clone",value:function clone(){return new LookupNode(null,Se(this.transform),this.secondary)}},{key:"dependentFields",value:function dependentFields(){return new Set([this.transform.lookup])}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.as?array(this.transform.as):this.transform.from.fields)}},{key:"hash",value:function hash(){return"Lookup ".concat(util_hash({transform:this.transform,secondary:this.secondary}))}},{key:"assemble",value:function assemble(){var a;if(this.transform.from.fields)a=Object.assign({values:this.transform.from.fields},this.transform.as?{as:array(this.transform.as)}:{});else{var A=this.transform.as;isString(A)||(log_warn(P.NO_FIELDS_NEEDS_AS),A="_lookup"),a={as:[A]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},a),this.transform.default?{default:this.transform.default}:{})}}],[{key:"make",value:function make(a,A,j,B){var q=A.component.data.sources,ne=j.from,ie=null;if(function isLookupData(a){return"data"in a}(ne)){var oe=findSource(ne.data,q);oe||(oe=new Wo(ne.data),q.push(oe));var se=A.getName("lookup_".concat(B));ie=new _a(oe,se,ta.Lookup,A.component.data.outputNodeRefCounts),A.component.data.outputNodes[se]=ie}else if(function isLookupSelection(a){return"selection"in a}(ne)){var le=ne.selection;if(j=Object.assign({as:le},j),!(ie=A.getSelectionComponent(varName(le),le).materialized))throw new Error(P.noSameUnitLookup(le))}return new LookupNode(a,j,ie.getSource())}}]),LookupNode}(ya),quantile_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},Cs=function(a){Object(Zr.a)(QuantileTransformNode,a);var A=Object(ti.a)(QuantileTransformNode);function QuantileTransformNode(a,j){var P,B,q,ne;Object(zt.a)(this,QuantileTransformNode),(P=A.call(this,a)).transform=j,P.transform=Se(j);var ie=null!==(B=P.transform.as)&&void 0!==B?B:[void 0,void 0];return P.transform.as=[null!==(q=ie[0])&&void 0!==q?q:"prob",null!==(ne=ie[1])&&void 0!==ne?ne:"value"],P}return Object(qt.a)(QuantileTransformNode,[{key:"clone",value:function clone(){return new QuantileTransformNode(null,Se(this.transform))}},{key:"dependentFields",value:function dependentFields(){var a;return new Set([this.transform.quantile].concat(Object(he.a)(null!==(a=this.transform.groupby)&&void 0!==a?a:[])))}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.as)}},{key:"hash",value:function hash(){return"QuantileTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var a=this.transform,A=a.quantile,j=quantile_rest(a,["quantile"]);return Object.assign({type:"quantile",field:A},j)}}]),QuantileTransformNode}(ya),regression_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j},Ts=function(a){Object(Zr.a)(RegressionTransformNode,a);var A=Object(ti.a)(RegressionTransformNode);function RegressionTransformNode(a,j){var P,B,q,ne;Object(zt.a)(this,RegressionTransformNode),(P=A.call(this,a)).transform=j,P.transform=Se(j);var ie=null!==(B=P.transform.as)&&void 0!==B?B:[void 0,void 0];return P.transform.as=[null!==(q=ie[0])&&void 0!==q?q:j.on,null!==(ne=ie[1])&&void 0!==ne?ne:j.regression],P}return Object(qt.a)(RegressionTransformNode,[{key:"clone",value:function clone(){return new RegressionTransformNode(null,Se(this.transform))}},{key:"dependentFields",value:function dependentFields(){var a;return new Set([this.transform.regression,this.transform.on].concat(Object(he.a)(null!==(a=this.transform.groupby)&&void 0!==a?a:[])))}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.as)}},{key:"hash",value:function hash(){return"RegressionTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var a=this.transform,A=a.regression,j=a.on,P=regression_rest(a,["regression","on"]);return Object.assign({type:"regression",x:j,y:A},P)}}]),RegressionTransformNode}(ya),Ds=function(a){Object(Zr.a)(PivotTransformNode,a);var A=Object(ti.a)(PivotTransformNode);function PivotTransformNode(a,j){var P;return Object(zt.a)(this,PivotTransformNode),(P=A.call(this,a)).transform=j,P}return Object(qt.a)(PivotTransformNode,[{key:"clone",value:function clone(){return new PivotTransformNode(null,Se(this.transform))}},{key:"addDimensions",value:function addDimensions(a){var A;this.transform.groupby=unique((null!==(A=this.transform.groupby)&&void 0!==A?A:[]).concat(a),(function(a){return a}))}},{key:"producedFields",value:function producedFields(){}},{key:"dependentFields",value:function dependentFields(){var a;return new Set([this.transform.pivot,this.transform.value].concat(Object(he.a)(null!==(a=this.transform.groupby)&&void 0!==a?a:[])))}},{key:"hash",value:function hash(){return"PivotTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var a=this.transform,A=a.pivot,j=a.value,P=a.groupby,B=a.limit,q=a.op;return Object.assign(Object.assign(Object.assign({type:"pivot",field:A,value:j},void 0!==B?{limit:B}:{}),void 0!==q?{op:q}:{}),void 0!==P?{groupby:P}:{})}}]),PivotTransformNode}(ya),As=function(a){Object(Zr.a)(SampleTransformNode,a);var A=Object(ti.a)(SampleTransformNode);function SampleTransformNode(a,j){var P;return Object(zt.a)(this,SampleTransformNode),(P=A.call(this,a)).transform=j,P}return Object(qt.a)(SampleTransformNode,[{key:"clone",value:function clone(){return new SampleTransformNode(null,Se(this.transform))}},{key:"dependentFields",value:function dependentFields(){return new Set}},{key:"producedFields",value:function producedFields(){return new Set}},{key:"hash",value:function hash(){return"SampleTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){return{type:"sample",size:this.transform.sample}}}]),SampleTransformNode}(ya);function makeWalkTree(a){var A=0;return function walkTree(j,P){var B,q,ne;if(j instanceof Wo&&(j.isGenerator||isUrlData(j.data)||(a.push(P),P={name:null,source:P.name,transform:[]})),j instanceof Bo&&(j.parent instanceof Wo&&!P.source?(P.format=Object.assign(Object.assign({},null!==(B=P.format)&&void 0!==B?B:{}),{parse:j.assembleFormatParse()}),(q=P.transform).push.apply(q,Object(he.a)(j.assembleTransforms(!0)))):(ne=P.transform).push.apply(ne,Object(he.a)(j.assembleTransforms()))),j instanceof Io){P.name||(P.name="data_".concat(A++)),!P.source||P.transform.length>0?(a.push(P),j.data=P.name):j.data=P.source;var ie,oe=Object(pe.a)(j.assemble());try{for(oe.s();!(ie=oe.n()).done;){var se=ie.value;a.push(se)}}catch(ye){oe.e(ye)}finally{oe.f()}}else{var le;if((j instanceof zo||j instanceof qo||j instanceof bs||j instanceof yo||j instanceof _o||j instanceof ks||j instanceof ws||j instanceof Lo||j instanceof Es||j instanceof us||j instanceof os||j instanceof xs||j instanceof _s||j instanceof ys||j instanceof Ss||j instanceof Cs||j instanceof Ts||j instanceof Uo||j instanceof As||j instanceof Ds)&&P.transform.push(j.assemble()),j instanceof Mo||j instanceof wa||j instanceof Os||j instanceof ss)(le=P.transform).push.apply(le,Object(he.a)(j.assemble()));if(j instanceof _a)if(P.source&&0===P.transform.length)j.setSource(P.source);else if(j.parent instanceof _a)j.setSource(P.name);else{if(P.name||(P.name="data_".concat(A++)),j.setSource(P.name),1===j.numChildren())a.push(P),P={name:null,source:P.name,transform:[]}}switch(j.numChildren()){case 0:j instanceof _a&&(!P.source||P.transform.length>0)&&a.push(P);break;case 1:walkTree(j.children[0],P);break;default:P.name||(P.name="data_".concat(A++));var ge=P.name;!P.source||P.transform.length>0?a.push(P):ge=P.source;var me,ve=Object(pe.a)(j.children);try{for(ve.s();!(me=ve.n()).done;){walkTree(me.value,{name:null,source:ge,transform:[]})}}catch(ye){ve.e(ye)}finally{ve.f()}}}}}function assembleRootData(a,A){var j,P,B,q=[],ne=makeWalkTree(q),ie=0,oe=Object(pe.a)(a.sources);try{for(oe.s();!(B=oe.n()).done;){var se=B.value;se.hasName()||(se.dataName="source_".concat(ie++));var le=se.assemble();ne(se,le)}}catch(We){oe.e(We)}finally{oe.f()}for(var he=0,me=q;he<me.length;he++){var ve=me[he];0===ve.transform.length&&delete ve.transform}var ye,_e=0,we=Object(pe.a)(q.entries());try{for(we.s();!(ye=we.n()).done;){var ke=Object(ge.a)(ye.value,2),Oe=ke[0],Se=ke[1];0!==(null!==(j=Se.transform)&&void 0!==j?j:[]).length||Se.source||q.splice(_e++,0,q.splice(Oe,1)[0])}}catch(We){we.e(We)}finally{we.f()}for(var Te=0,Ae=q;Te<Ae.length;Te++){var je,Fe=Ae[Te],Re=Object(pe.a)(null!==(P=Fe.transform)&&void 0!==P?P:[]);try{for(Re.s();!(je=Re.n()).done;){var Me=je.value;"lookup"===Me.type&&(Me.from=a.outputNodes[Me.from].getSource())}}catch(We){Re.e(We)}finally{Re.f()}}for(var Ne=0,Be=q;Ne<Be.length;Ne++){var Ue=Be[Ne];Ue.name in A&&(Ue.values=A[Ue.name])}return q}function parseFacetHeader(a,A){var j,P=a.facet,B=a.config,q=a.child,ne=a.component;if(a.channelHasField(A)){var ie=P[A],se=getHeaderProperty("title",null,B,A),le=channeldef_title(ie,B,{allowDisabling:!0,includeDefault:void 0===se||!!se});q.component.layoutHeaders[A].title&&(le=oe(le)?le.join(", "):le,le+=" / "+q.component.layoutHeaders[A].title,q.component.layoutHeaders[A].title=null);var he=getHeaderProperty("labelOrient",ie,B,A),pe=getFirstDefined((null!==(j=ie.header)&&void 0!==j?j:{}).labels,B.header.labels,!0),ge=util_contains(["bottom","right"],he)?"footer":"header";ne.layoutHeaders[A]=Object(Ye.a)({title:le,facetFieldDef:ie},ge,"facet"===A?[]:[makeHeaderComponent(a,A,pe)])}}function makeHeaderComponent(a,A,j){var P="row"===A?"height":"width";return{labels:j,sizeSignal:a.child.component.layoutSize.get(P)?a.child.getSizeSignalRef(P):void 0,axes:[]}}function mergeChildAxis(a,A){var j,P,B=a.child;if(B.component.axes[A]){var q=a.component,ne=q.layoutHeaders,ie=q.resolve;if(ie.axis[A]=parseGuideResolve(ie,A),"shared"===ie.axis[A]){var oe,se="x"===A?"column":"row",le=ne[se],he=Object(pe.a)(B.component.axes[A]);try{for(he.s();!(oe=he.n()).done;){var ge=oe.value,me="top"===(P=ge.get("orient"))||"left"===P||isSignalRef(P)?"header":"footer";le[me]=null!==(j=le[me])&&void 0!==j?j:[makeHeaderComponent(a,se,!1)];var ve=assembleAxis(ge,"main",a.config,{header:!0});ve&&le[me][0].axes.push(ve),ge.mainExtracted=!0}}catch(ye){he.e(ye)}finally{he.f()}}}}function parseConcatLayoutSize(a){parseChildrenLayoutSize(a);var A=1===a.layout.columns?"width":"childWidth",j=void 0===a.layout.columns?"height":"childHeight";parseNonUnitLayoutSizeForChannel(a,A),parseNonUnitLayoutSizeForChannel(a,j)}function parseChildrenLayoutSize(a){var A,j=Object(pe.a)(a.children);try{for(j.s();!(A=j.n()).done;){A.value.parseLayoutSize()}}catch(P){j.e(P)}finally{j.f()}}function parseNonUnitLayoutSizeForChannel(a,A){var j,P,B=getSizeTypeFromLayoutSizeType(A),q=getPositionScaleChannel(B),ne=a.component.resolve,ie=a.component.layoutSize,oe=Object(pe.a)(a.children);try{for(oe.s();!(P=oe.n()).done;){var se=P.value.component.layoutSize.getWithExplicit(B),le=ne.scale[q];if("independent"===le&&"step"===se.value){j=void 0;break}if(j){if("independent"===le&&j.value!==se.value){j=void 0;break}j=mergeValuesWithExplicit(j,se,B,"")}else j=se}}catch(ve){oe.e(ve)}finally{oe.f()}if(j){var he,ge=Object(pe.a)(a.children);try{for(ge.s();!(he=ge.n()).done;){var me=he.value;a.renameSignal(me.getName(B),a.getName(A)),me.component.layoutSize.set(B,"merged",!1)}}catch(ve){ge.e(ve)}finally{ge.f()}ie.setWithExplicit(A,j)}else ie.setWithExplicit(A,{explicit:!1,value:void 0})}function defaultUnitSize(a,A){var j="width"===A?"x":"y",P=a.config,B=a.getScaleComponent(j);if(B){var q=B.get("type"),ne=B.get("range");if(hasDiscreteDomain(q)){var ie=getViewConfigDiscreteSize(P.view,A);return isVgRangeStep(ne)||isStep(ie)?"step":ie}return getViewConfigContinuousSize(P.view,A)}if(a.hasProjection||"arc"===a.mark)return getViewConfigContinuousSize(P.view,A);var oe=getViewConfigDiscreteSize(P.view,A);return isStep(oe)?oe.step:oe}var facet_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function facetSortFieldName(a,A,j){return channeldef_vgField(A,Object.assign({suffix:"by_".concat(channeldef_vgField(a))},null!==j&&void 0!==j?j:{}))}var js=function(a){Object(Zr.a)(FacetModel,a);var A=Object(ti.a)(FacetModel);function FacetModel(a,j,P,B){var q;return Object(zt.a)(this,FacetModel),(q=A.call(this,a,"facet",j,P,B,a.resolve)).child=buildModel(a.spec,Object(Yi.a)(q),q.getName("child"),void 0,B),q.children=[q.child],q.facet=q.initFacet(a.facet),q}return Object(qt.a)(FacetModel,[{key:"initFacet",value:function initFacet(a){if(!isFacetMapping(a))return{facet:this.initFacetFieldDef(a,"facet")};var A,j=Ae(a),B={},q=Object(pe.a)(j);try{for(q.s();!(A=q.n()).done;){var ne=A.value;if(!util_contains([rt,it],ne)){log_warn(P.incompatibleChannel(ne,"facet"));break}var ie=a[ne];if(void 0===ie.field){log_warn(P.emptyFieldDef(ie,ne));break}B[ne]=this.initFacetFieldDef(ie,ne)}}catch(oe){q.e(oe)}finally{q.f()}return B}},{key:"initFacetFieldDef",value:function initFacetFieldDef(a,A){var j=a.header,P=initFieldDef(facet_rest(a,["header"]),A);return j&&(P.header=replaceExprRefInIndex(j)),P}},{key:"channelHasField",value:function channelHasField(a){return!!this.facet[a]}},{key:"fieldDef",value:function fieldDef(a){return this.facet[a]}},{key:"parseData",value:function parseData(){this.component.data=parse_parseData(this),this.child.parseData()}},{key:"parseLayoutSize",value:function parseLayoutSize(){parseChildrenLayoutSize(this)}},{key:"parseSelections",value:function parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}},{key:"parseMarkGroup",value:function parseMarkGroup(){this.child.parseMarkGroup()}},{key:"parseAxesAndHeaders",value:function parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function parseFacetHeaders(a){var A,j=Object(pe.a)(wt);try{for(j.s();!(A=j.n()).done;){parseFacetHeader(a,A.value)}}catch(P){j.e(P)}finally{j.f()}mergeChildAxis(a,"x"),mergeChildAxis(a,"y")}(this)}},{key:"assembleSelectionTopLevelSignals",value:function assembleSelectionTopLevelSignals(a){return this.child.assembleSelectionTopLevelSignals(a)}},{key:"assembleSignals",value:function assembleSignals(){return this.child.assembleSignals(),[]}},{key:"assembleSelectionData",value:function assembleSelectionData(a){return this.child.assembleSelectionData(a)}},{key:"getHeaderLayoutMixins",value:function getHeaderLayoutMixins(){var a,A,j,P,B={},q=Object(pe.a)(wt);try{for(q.s();!(P=q.n()).done;){var ne,ie=P.value,oe=Object(pe.a)(wo);try{for(oe.s();!(ne=oe.n()).done;){var se=ne.value,le=this.component.layoutHeaders[ie],he=le[se],ge=le.facetFieldDef;if(ge){var me=getHeaderProperty("titleOrient",ge.header,this.config,ie);if(util_contains(["right","bottom"],me)){var ve=getHeaderChannel(ie,me);B.titleAnchor=null!==(a=B.titleAnchor)&&void 0!==a?a:{},B.titleAnchor[ve]="end"}}if(null===he||void 0===he?void 0:he[0]){var ye="row"===ie?"height":"width",_e="header"===se?"headerBand":"footerBand";"facet"===ie||this.child.component.layoutSize.get(ye)||(B[_e]=null!==(A=B[_e])&&void 0!==A?A:{},B[_e][ie]=.5),le.title&&(B.offset=null!==(j=B.offset)&&void 0!==j?j:{},B.offset["row"===ie?"rowTitle":"columnTitle"]=10)}}}catch(we){oe.e(we)}finally{oe.f()}}}catch(we){q.e(we)}finally{q.f()}return B}},{key:"assembleDefaultLayout",value:function assembleDefaultLayout(){var a=this.facet,A=a.column,j=a.row,P=A?this.columnDistinctSignal():j?1:void 0,B="all";return(j||"independent"!==this.component.resolve.scale.x)&&(A||"independent"!==this.component.resolve.scale.y)||(B="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),P?{columns:P}:{}),{bounds:"full",align:B})}},{key:"assembleLayoutSignals",value:function assembleLayoutSignals(){return this.child.assembleLayoutSignals()}},{key:"columnDistinctSignal",value:function columnDistinctSignal(){if(!(this.parent&&this.parent instanceof FacetModel)){var a=this.getName("column_domain");return{signal:"length(data('".concat(a,"'))")}}}},{key:"assembleGroup",value:function assembleGroup(a){return this.parent&&this.parent instanceof FacetModel?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:channeldef_vgField(this.facet.column,{prefix:"distinct"})}}}}:{}),get_get(Object(Qr.a)(FacetModel.prototype),"assembleGroup",this).call(this,a)):get_get(Object(Qr.a)(FacetModel.prototype),"assembleGroup",this).call(this,a)}},{key:"getCardinalityAggregateForChild",value:function getCardinalityAggregateForChild(){var a=[],A=[],j=[];if(this.child instanceof FacetModel){if(this.child.channelHasField("column")){var B=channeldef_vgField(this.child.facet.column);a.push(B),A.push("distinct"),j.push("distinct_".concat(B))}}else{var q,ne=Object(pe.a)(jt);try{for(ne.s();!(q=ne.n()).done;){var ie=q.value,oe=this.child.component.scales[ie];if(oe&&!oe.merged){var se=oe.get("type"),le=oe.get("range");if(hasDiscreteDomain(se)&&isVgRangeStep(le)){var he=getFieldFromDomain(assembleDomain(this.child,ie));he?(a.push(he),A.push("distinct"),j.push("distinct_".concat(he))):log_warn(P.unknownField(ie))}}}}catch(ge){ne.e(ge)}finally{ne.f()}}return{fields:a,ops:A,as:j}}},{key:"assembleFacet",value:function assembleFacet(){var a,A=this.component.data.facetRoot,j=A.name,P=A.data,B=this.facet,q=B.row,ne=B.column,ie=this.getCardinalityAggregateForChild(),se=ie.fields,le=ie.ops,he=ie.as,ge=[],me=Object(pe.a)(wt);try{for(me.s();!(a=me.n()).done;){var ve=a.value,ye=this.facet[ve];if(ye){ge.push(channeldef_vgField(ye));var _e=ye.bin,we=ye.sort;if(isBinning(_e)&&ge.push(channeldef_vgField(ye,{binSuffix:"end"})),isSortField(we)){var ke=we.field,Oe=we.op,Se=void 0===Oe?"min":Oe,Te=facetSortFieldName(ye,we);q&&ne?(se.push(Te),le.push("max"),he.push(Te)):(se.push(ke),le.push(Se),he.push(Te))}else if(oe(we)){var Ae=sortArrayIndexField(ye,ve);se.push(Ae),le.push("max"),he.push(Ae)}}}}catch(Fe){me.e(Fe)}finally{me.f()}var je=!!q&&!!ne;return Object.assign({name:j,data:P,groupby:ge},je||se.length>0?{aggregate:Object.assign(Object.assign({},je?{cross:je}:{}),se.length?{fields:se,ops:le,as:he}:{})}:{})}},{key:"facetSortFields",value:function facetSortFields(a){var A=this.facet[a];return A?isSortField(A.sort)?[facetSortFieldName(A,A.sort,{expr:"datum"})]:oe(A.sort)?[sortArrayIndexField(A,a,{expr:"datum"})]:[channeldef_vgField(A,{expr:"datum"})]:[]}},{key:"facetSortOrder",value:function facetSortOrder(a){var A=this.facet[a];if(A){var j=A.sort;return[(isSortField(j)?j.order:!oe(j)&&j)||"ascending"]}return[]}},{key:"assembleLabelTitle",value:function assembleLabelTitle(){var a,A=this.facet,j=this.config;if(A.facet)return assemble_assembleLabelTitle(A.facet,"facet",j);var P,B={row:["top","bottom"],column:["left","right"]},q=Object(pe.a)(xo);try{for(q.s();!(P=q.n()).done;){var ne=P.value;if(A[ne]){var ie=getHeaderProperty("labelOrient",null===(a=A[ne])||void 0===a?void 0:a.header,j,ne);if(util_contains(B[ne],ie))return assemble_assembleLabelTitle(A[ne],ne,j)}}}catch(oe){q.e(oe)}finally{q.f()}}},{key:"assembleMarks",value:function assembleMarks(){var a=this,A=this.child,j=function assembleFacetData(a){var A,j=[],P=makeWalkTree(j),B=Object(pe.a)(a.children);try{for(B.s();!(A=B.n()).done;){P(A.value,{source:a.name,name:null,transform:[]})}}catch(q){B.e(q)}finally{B.f()}return j}(this.component.data.facetRoot),P=A.assembleGroupEncodeEntry(!1),B=this.assembleLabelTitle()||A.assembleTitle(),q=A.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},B?{title:B}:{}),q?{style:q}:{}),{from:{facet:this.assembleFacet()},sort:{field:wt.map((function(A){return a.facetSortFields(A)})).flat(),order:wt.map((function(A){return a.facetSortOrder(A)})).flat()}}),j.length>0?{data:j}:{}),P?{encode:{update:P}}:{}),A.assembleGroup(function assembleFacetSignals(a,A){if(a.component.selection&&Ae(a.component.selection).length){var j=$(a.getName("cell"));A.unshift({name:"facet",value:{},on:[{events:eventSelector("mousemove","scope"),update:"isTuple(facet) ? facet : group(".concat(j,").datum")}]})}return cleanupEmptyOnArray(A)}(this,[])))]}},{key:"getMapping",value:function getMapping(){return this.facet}}]),FacetModel}(vs);function findSource(a,A){var j,P,B,q,ne,ie=Object(pe.a)(A);try{for(ie.s();!(ne=ie.n()).done;){var oe=ne.value,se=oe.data;if(!a.name||!oe.hasName()||a.name===oe.dataName){var le=null===(j=a.format)||void 0===j?void 0:j.mesh,he=null===(P=se.format)||void 0===P?void 0:P.feature;if(!le||!he){var ge=null===(B=a.format)||void 0===B?void 0:B.feature;if(!ge&&!he||ge===he){var me=null===(q=se.format)||void 0===q?void 0:q.mesh;if(!le&&!me||le===me)if(isInlineData(a)&&isInlineData(se)){if(Oe(a.values,se.values))return oe}else if(isUrlData(a)&&isUrlData(se)){if(a.url===se.url)return oe}else if(isNamedData(a)&&a.name===oe.dataName)return oe}}}}}catch(ve){ie.e(ve)}finally{ie.f()}return null}function parse_parseData(a){var A,j,B,q,ne,ie,oe,se,le,he,ge=function parseRoot(a,A){if(a.data||!a.parent){if(null===a.data){var j=new Wo({values:[]});return A.push(j),j}var P=findSource(a.data,A);if(P)return isGenerator(a.data)||(P.data.format=mergeDeep({},a.data.format,P.data.format)),!P.hasName()&&a.data.name&&(P.dataName=a.data.name),P;var B=new Wo(a.data);return A.push(B),B}return a.parent.component.data.facetRoot?a.parent.component.data.facetRoot:a.parent.component.data.main}(a,a.component.data.sources),me=a.component.data,ve=me.outputNodes,ye=me.outputNodeRefCounts,_e=a.parent?a.parent.component.data.ancestorParse.clone():new na,we=a.data;isGenerator(we)?(isSequenceGenerator(we)?ge=new qo(ge,we.sequence):isGraticuleGenerator(we)&&(ge=new zo(ge,we.graticule)),_e.parseNothing=!0):null===(null===(A=null===we||void 0===we?void 0:we.format)||void 0===A?void 0:A.parse)&&(_e.parseNothing=!0),ge=null!==(j=Bo.makeExplicit(ge,a,_e))&&void 0!==j?j:ge,ge=new Uo(ge);var ke=a.parent&&isLayerModel(a.parent);(isUnitModel(a)||isFacetModel(a))&&ke&&(ge=null!==(B=Mo.makeFromEncoding(ge,a))&&void 0!==B?B:ge),a.transforms.length>0&&(ge=function parseTransformArray(a,A,j){var B,q,ne,ie=0,oe=Object(pe.a)(A.transforms);try{for(oe.s();!(ne=oe.n()).done;){var se=ne.value,le=void 0,he=void 0;if(isCalculate(se))he=a=new _o(a,se),le="derived";else if(isFilter(se)){var ge=getImplicitFromFilterTransform(se);he=a=null!==(B=Bo.makeWithAncestors(a,{},ge,j))&&void 0!==B?B:a,a=new yo(a,A,se.filter)}else if(isBin(se))he=a=Mo.makeFromTransform(a,se,A),le="number";else if(isTimeUnit(se)){le="date",void 0===j.getWithExplicit(se.field).value&&(a=new Bo(a,Object(Ye.a)({},se.field,le)),j.set(se.field,le,!1)),he=a=wa.makeFromTransform(a,se)}else if(transform_isAggregate(se))he=a=Lo.makeFromTransform(a,se),le="number",requiresSelectionId(A)&&(a=new Uo(a));else if(isLookup(se))he=a=Es.make(a,A,se,ie++),le="derived";else if(isWindow(se))he=a=new us(a,se),le="number";else if(isJoinAggregate(se))he=a=new os(a,se),le="number";else if(isStack(se))he=a=ss.makeFromTransform(a,se),le="derived";else if(isFold(se))he=a=new xs(a,se),le="derived";else if(isFlatten(se))he=a=new _s(a,se),le="derived";else if(isPivot(se))he=a=new Ds(a,se),le="derived";else if(isSample(se))a=new As(a,se);else if(isImpute(se))he=a=Os.makeFromTransform(a,se),le="derived";else if(isDensity(se))he=a=new ys(a,se),le="derived";else if(isQuantile(se))he=a=new Cs(a,se),le="derived";else if(isRegression(se))he=a=new Ts(a,se),le="derived";else{if(!isLoess(se)){log_warn(P.invalidTransformIgnored(se));continue}he=a=new Ss(a,se),le="derived"}if(he&&void 0!==le){var me,ve=Object(pe.a)(null!==(q=he.producedFields())&&void 0!==q?q:[]);try{for(ve.s();!(me=ve.n()).done;){var ye=me.value;j.set(ye,le,!1)}}catch(_e){ve.e(_e)}finally{ve.f()}}}}catch(_e){oe.e(_e)}finally{oe.f()}return a}(ge,a,_e));var Oe=function getImplicitFromSelection(a){var A={};if(isUnitModel(a)&&a.component.selection){var j,P=Object(pe.a)(Ae(a.component.selection));try{for(P.s();!(j=P.n()).done;){var B,q=j.value,ne=a.component.selection[q],ie=Object(pe.a)(ne.project.items);try{for(ie.s();!(B=ie.n()).done;){var oe=B.value;!oe.channel&&accessPathDepth(oe.field)>1&&(A[oe.field]="flatten")}}catch(se){ie.e(se)}finally{ie.f()}}}catch(se){P.e(se)}finally{P.f()}}return A}(a),Se=getImplicitFromEncoding(a);ge=null!==(q=Bo.makeWithAncestors(ge,{},Object.assign(Object.assign({},Oe),Se),_e))&&void 0!==q?q:ge,isUnitModel(a)&&(ge=ws.parseAll(ge,a),ge=ks.parseAll(ge,a)),(isUnitModel(a)||isFacetModel(a))&&(ke||(ge=null!==(ne=Mo.makeFromEncoding(ge,a))&&void 0!==ne?ne:ge),ge=null!==(ie=wa.makeFromEncoding(ge,a))&&void 0!==ie?ie:ge,ge=_o.parseAllForSortIndex(ge,a));var Te=a.getDataName(ta.Raw),je=new _a(ge,Te,ta.Raw,ye);if(ve[Te]=je,ge=je,isUnitModel(a)){var Fe=Lo.makeFromEncoding(ge,a);Fe&&(ge=Fe,requiresSelectionId(a)&&(ge=new Uo(ge))),ge=null!==(oe=Os.makeFromEncoding(ge,a))&&void 0!==oe?oe:ge,ge=null!==(se=ss.makeFromEncoding(ge,a))&&void 0!==se?se:ge}isUnitModel(a)&&(ge=null!==(le=bs.make(ge,a))&&void 0!==le?le:ge);var Re=a.getDataName(ta.Main),Me=new _a(ge,Re,ta.Main,ye);ve[Re]=Me,ge=Me,isUnitModel(a)&&function materializeSelections(a,A){forEachSelection(a,(function(j){var P=j.name,B=a.getName("lookup_".concat(P));a.component.data.outputNodes[B]=j.materialized=new _a(new yo(A,a,{selection:P}),B,ta.Lookup,a.component.data.outputNodeRefCounts)}))}(a,Me);var Ne=null;if(isFacetModel(a)){var Be=a.getName("facet");ge=null!==(he=function makeJoinAggregateFromFacet(a,A){var j=A.row,P=A.column;if(j&&P){for(var B=null,q=0,ne=[j,P];q<ne.length;q++){var ie=ne[q];if(isSortField(ie.sort)){var oe=ie.sort,se=oe.field,le=oe.op;a=B=new os(a,{joinaggregate:[{op:void 0===le?"min":le,field:se,as:facetSortFieldName(ie,ie.sort,{forAs:!0})}],groupby:[channeldef_vgField(ie)]})}}return B}return null}(ge,a.facet))&&void 0!==he?he:ge,Ne=new Io(ge,a,Be,Me.getSource()),ve[Be]=Ne}return Object.assign(Object.assign({},a.component.data),{outputNodes:ve,outputNodeRefCounts:ye,raw:je,main:Me,facetRoot:Ne,ancestorParse:_e})}var Fs=function(a){Object(Zr.a)(ConcatModel,a);var A=Object(ti.a)(ConcatModel);function ConcatModel(a,j,B,q){var ne,ie,oe,se,le;return Object(zt.a)(this,ConcatModel),ne=A.call(this,a,"concat",j,B,q,a.resolve),"shared"!==(null===(oe=null===(ie=a.resolve)||void 0===ie?void 0:ie.axis)||void 0===oe?void 0:oe.x)&&"shared"!==(null===(le=null===(se=a.resolve)||void 0===se?void 0:se.axis)||void 0===le?void 0:le.y)||log_warn(P.CONCAT_CANNOT_SHARE_AXIS),ne.children=ne.getChildren(a).map((function(a,A){return buildModel(a,Object(Yi.a)(ne),ne.getName("concat_"+A),void 0,q)})),ne}return Object(qt.a)(ConcatModel,[{key:"parseData",value:function parseData(){this.component.data=parse_parseData(this);var a,A=Object(pe.a)(this.children);try{for(A.s();!(a=A.n()).done;){a.value.parseData()}}catch(j){A.e(j)}finally{A.f()}}},{key:"parseSelections",value:function parseSelections(){this.component.selection={};var a,A=Object(pe.a)(this.children);try{for(A.s();!(a=A.n()).done;){var j=a.value;j.parseSelections();var P,B=Object(pe.a)(Ae(j.component.selection));try{for(B.s();!(P=B.n()).done;){var q=P.value;this.component.selection[q]=j.component.selection[q]}}catch(ne){B.e(ne)}finally{B.f()}}}catch(ne){A.e(ne)}finally{A.f()}}},{key:"parseMarkGroup",value:function parseMarkGroup(){var a,A=Object(pe.a)(this.children);try{for(A.s();!(a=A.n()).done;){a.value.parseMarkGroup()}}catch(j){A.e(j)}finally{A.f()}}},{key:"parseAxesAndHeaders",value:function parseAxesAndHeaders(){var a,A=Object(pe.a)(this.children);try{for(A.s();!(a=A.n()).done;){a.value.parseAxesAndHeaders()}}catch(j){A.e(j)}finally{A.f()}}},{key:"getChildren",value:function getChildren(a){return isVConcatSpec(a)?a.vconcat:isHConcatSpec(a)?a.hconcat:a.concat}},{key:"parseLayoutSize",value:function parseLayoutSize(){parseConcatLayoutSize(this)}},{key:"parseAxisGroup",value:function parseAxisGroup(){return null}},{key:"assembleSelectionTopLevelSignals",value:function assembleSelectionTopLevelSignals(a){return this.children.reduce((function(a,A){return A.assembleSelectionTopLevelSignals(a)}),a)}},{key:"assembleSignals",value:function assembleSignals(){return this.children.forEach((function(a){return a.assembleSignals()})),[]}},{key:"assembleLayoutSignals",value:function assembleLayoutSignals(){var a,A=assemble_assembleLayoutSignals(this),j=Object(pe.a)(this.children);try{for(j.s();!(a=j.n()).done;){var P=a.value;A.push.apply(A,Object(he.a)(P.assembleLayoutSignals()))}}catch(B){j.e(B)}finally{j.f()}return A}},{key:"assembleSelectionData",value:function assembleSelectionData(a){return this.children.reduce((function(a,A){return A.assembleSelectionData(a)}),a)}},{key:"assembleMarks",value:function assembleMarks(){return this.children.map((function(a){var A=a.assembleTitle(),j=a.assembleGroupStyle(),P=a.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:a.getName("group")},A?{title:A}:{}),j?{style:j}:{}),P?{encode:{update:P}}:{}),a.assembleGroup())}))}},{key:"assembleDefaultLayout",value:function assembleDefaultLayout(){var a=this.layout.columns;return Object.assign(Object.assign({},null!=a?{columns:a}:{}),{bounds:"full",align:"each"})}}]),ConcatModel}(ms);var Ps=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},Ue),{labelExpr:1,encode:1}),Rs=Ae(Ps),Ms=function(a){Object(Zr.a)(AxisComponent,a);var A=Object(ti.a)(AxisComponent);function AxisComponent(){var a,j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},B=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(zt.a)(this,AxisComponent),(a=A.call(this)).explicit=j,a.implicit=P,a.mainExtracted=B,a}return Object(qt.a)(AxisComponent,[{key:"clone",value:function clone(){return new AxisComponent(Se(this.explicit),Se(this.implicit),this.mainExtracted)}},{key:"hasAxisPart",value:function hasAxisPart(a){return"axis"===a||("grid"===a||"title"===a?!!this.get(a):!function isFalseOrNull(a){return!1===a||null===a}(this.get(a)))}},{key:"hasOrientSignalRef",value:function hasOrientSignalRef(){return isSignalRef(this.explicit.orient)}}]),AxisComponent}(Zi);var Ls={bottom:"top",top:"bottom",left:"right",right:"left"};function mergeAxisComponents(a,A){if(!a)return A.map((function(a){return a.clone()}));if(a.length===A.length){for(var j=a.length,P=0;P<j;P++){var B=a[P],q=A[P];if(!!B!==!!q)return;if(B&&q){var ne=B.getWithExplicit("orient"),ie=q.getWithExplicit("orient");if(ne.explicit&&ie.explicit&&ne.value!==ie.value)return;a[P]=mergeAxisComponent(B,q)}}return a}}function mergeAxisComponent(a,A){var j,P=Object(pe.a)(Rs);try{var B=function _loop(){var P=j.value,B=mergeValuesWithExplicit(a.getWithExplicit(P),A.getWithExplicit(P),P,"axis",(function(a,A){switch(P){case"title":return mergeTitleComponent(a,A);case"gridScale":return{explicit:a.explicit,value:getFirstDefined(a.value,A.value)}}return defaultTieBreaker(a,A,P,"axis")}));a.setWithExplicit(P,B)};for(P.s();!(j=P.n()).done;)B()}catch(q){P.e(q)}finally{P.f()}return a}function parse_isExplicit(a,A,j,P,B){if("disable"===A)return void 0!==j;switch(j=j||{},A){case"titleAngle":case"labelAngle":return a===(isSignalRef(j.labelAngle)?j.labelAngle:normalizeAngle(j.labelAngle));case"values":return!!j.values;case"encode":return!!j.encoding||!!j.labelAngle;case"title":if(a===getFieldDefTitle(P,B))return!0}return a===j[A]}var Is=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function parseAxis(a,A){var j,P,B,q=A.axis(a),ne=new Ms,ie=getFieldOrDatumDef(A.encoding[a]),oe=A.mark,se=A.config,le=(null===q||void 0===q?void 0:q.orient)||(null===(j=se["x"===a?"axisX":"axisY"])||void 0===j?void 0:j.orient)||(null===(P=se.axis)||void 0===P?void 0:P.orient)||function defaultOrient(a){return"x"===a?"bottom":"left"}(a),he=A.getScaleComponent(a).get("type"),ge=getAxisConfigs(a,he,le,A.config),me=void 0!==q?!q:getAxisConfig("disable",se.style,null===q||void 0===q?void 0:q.style,ge).configValue;if(ne.set("disable",me,void 0!==q),me)return ne;var ve,ye=function getLabelAngle(a,A,j,P,B){var q=null===A||void 0===A?void 0:A.labelAngle;if(void 0!==q)return isSignalRef(q)?q:normalizeAngle(q);var ne=getAxisConfig("labelAngle",P,null===A||void 0===A?void 0:A.style,B).configValue;return void 0!==ne?normalizeAngle(ne):j!==at||!util_contains([Sn,kn],a.type)||isFieldDef(a)&&a.timeUnit?void 0:270}(ie,q=q||{},a,se.style,ge),_e={fieldOrDatumDef:ie,axis:q,channel:a,model:A,scaleType:he,orient:le,labelAngle:ye,mark:oe,config:se},we=Object(pe.a)(Rs);try{for(we.s();!(ve=we.n()).done;){var ke=ve.value,Oe=ke in bo?bo[ke](_e):isAxisProperty(ke)?q[ke]:void 0,Se=void 0!==Oe,Te=parse_isExplicit(Oe,ke,q,A,a);if(Se&&Te)ne.set(ke,Oe,Te);else{var Ae=isAxisProperty(ke)&&"values"!==ke?getAxisConfig(ke,se.style,q.style,ge):{},je=Ae.configValue,Fe=void 0===je?void 0:je,Re=Ae.configFrom,Me=void 0===Re?void 0:Re,Be=void 0!==Fe;Se&&!Be?ne.set(ke,Oe,Te):("vgAxisConfig"!==Me||Is.has(ke)&&Be||isConditionalAxisValue(Fe)||isSignalRef(Fe))&&ne.set(ke,Fe,!1)}}}catch(Ve){we.e(Ve)}finally{we.f()}var Ue=null!==(B=q.encoding)&&void 0!==B?B:{},We=Ne.reduce((function(j,P){var B;if(!ne.hasAxisPart(P))return j;var q=guideEncodeEntry(null!==(B=Ue[P])&&void 0!==B?B:{},A),ie="labels"===P?function axis_encode_labels(a,A,j){var P,B=a.encoding,q=a.config,ne=null!==(P=getFieldOrDatumDef(B[A]))&&void 0!==P?P:getFieldOrDatumDef(B[getSecondaryRangeChannel(A)]),ie=a.axis(A)||{},oe=ie.format,se=ie.formatType;return isCustomFormatType(se)?Object.assign({text:formatCustomType({fieldOrDatumDef:ne,field:"datum.value",format:oe,formatType:se,config:q})},j):j}(A,a,q):q;return void 0===ie||isEmpty(ie)||(j[P]={update:ie}),j}),{});return isEmpty(We)||ne.set("encode",We,!!q.encoding||void 0!==q.labelAngle),ne}function initLayoutSize(a){var A,j=a.encoding,B=a.size,q=Object(pe.a)(jt);try{for(q.s();!(A=q.n()).done;){var ne=A.value,ie=getSizeChannel(ne);isStep(B[ie])&&isContinuousFieldOrDatumDef(j[ne])&&(delete B[ie],log_warn(P.stepDropped(ie)))}}catch(oe){q.e(oe)}finally{q.f()}return B}function initMarkdef(a,A,j){var B=replaceExprRefInIndex(a),q=getMarkPropOrConfig("orient",B,j);if(B.orient=function init_orient(a,A,j){switch(a){case rr:case dr:case hr:case ur:case ar:case er:return}var P=A.x,B=A.y,q=A.x2,ne=A.y2;switch(a){case Zn:if(isFieldDef(P)&&(isBinned(P.bin)||isFieldDef(B)&&B.aggregate&&!P.aggregate))return"vertical";if(isFieldDef(B)&&(isBinned(B.bin)||isFieldDef(P)&&P.aggregate&&!B.aggregate))return"horizontal";if(ne||q){if(j)return j;if(!q&&(isFieldDef(P)&&P.type===wn&&!isBinning(P.bin)||isNumericDataDef(P)))return"horizontal";if(!ne&&(isFieldDef(B)&&B.type===wn&&!isBinning(B.bin)||isNumericDataDef(B)))return"vertical"}case sr:if(q&&(!isFieldDef(P)||!isBinned(P.bin))&&ne&&(!isFieldDef(B)||!isBinned(B.bin)))return;case Qn:if(ne)return isFieldDef(B)&&isBinned(B.bin)?"horizontal":"vertical";if(q)return isFieldDef(P)&&isBinned(P.bin)?"vertical":"horizontal";if(a===sr){if(P&&!B)return"vertical";if(B&&!P)return"horizontal"}case nr:case lr:var ie=isContinuousFieldOrDatumDef(P),oe=isContinuousFieldOrDatumDef(B);if(ie&&!oe)return"tick"!==a?"horizontal":"vertical";if(!ie&&oe)return"tick"!==a?"vertical":"horizontal";if(ie&&oe){var se=P,le=B,he=se.type===On,pe=le.type===On;return he&&!pe?"tick"!==a?"vertical":"horizontal":!he&&pe?"tick"!==a?"horizontal":"vertical":!se.aggregate&&le.aggregate?"tick"!==a?"vertical":"horizontal":se.aggregate&&!le.aggregate?"tick"!==a?"horizontal":"vertical":j||"vertical"}return j||void 0}return"vertical"}(B.type,A,q),void 0!==q&&q!==B.orient&&log_warn(P.orientOverridden(B.orient,q)),"bar"===B.type&&B.orient){var ne=getMarkPropOrConfig("cornerRadiusEnd",B,j);if(void 0!==ne){var ie,oe="horizontal"===B.orient&&A.x2||"vertical"===B.orient&&A.y2?["cornerRadius"]:_r[B.orient],se=Object(pe.a)(oe);try{for(se.s();!(ie=se.n()).done;){B[ie.value]=ne}}catch(le){se.e(le)}finally{se.f()}void 0!==B.cornerRadiusEnd&&delete B.cornerRadiusEnd}}return void 0===getMarkPropOrConfig("opacity",B,j)&&(B.opacity=function init_opacity(a,A){if(util_contains([rr,lr,dr,hr],a)&&!encoding_isAggregate(A))return.7;return}(B.type,A)),void 0===getMarkPropOrConfig("cursor",B,j)&&(B.cursor=function init_cursor(a,A,j){if(A.href||a.href||getMarkPropOrConfig("href",a,j))return"pointer";return a.cursor}(B,A,j)),B}function defaultFilled(a,A,j){if(j.graticule)return!1;var P=getMarkConfig("filled",a,A),B=a.type;return getFirstDefined(P,B!==rr&&B!==nr&&B!==sr)}function _encodeEntry(a,A){a.config;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(a,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),pointPosition("x",a,{defaultPos:"mid"})),pointPosition("y",a,{defaultPos:"mid"})),nonPosition("size",a)),nonPosition("angle",a)),function shapeMixins(a,A,j){if(j)return{shape:{value:j}};return nonPosition("shape",a)}(a,0,A))}function tick_defaultSize(a){var A,j=a.config,P=a.markDef,B=P.orient,q="horizontal"===B?"width":"height",ne=a.getScaleComponent("horizontal"===B?"x":"y"),ie=null!==(A=getMarkPropOrConfig("size",P,j,{vgChannel:q}))&&void 0!==A?A:j.tick.bandSize;if(void 0!==ie)return ie;var oe=ne?ne.get("range"):void 0;return oe&&isVgRangeStep(oe)&&isNumber(oe.step)?3*oe.step/4:3*getViewConfigDiscreteStep(j.view,q)/4}var Ns={arc:{vgMark:"arc",encodeEntry:function encodeEntry(a){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(a,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),pointPosition("x",a,{defaultPos:"mid"})),pointPosition("y",a,{defaultPos:"mid"})),rectPosition(a,"radius","arc")),rectPosition(a,"theta","arc"))}},area:{vgMark:"area",encodeEntry:function encodeEntry(a){return Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(a,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),pointOrRangePosition("x",a,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===a.markDef.orient})),pointOrRangePosition("y",a,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===a.markDef.orient})),defined(a))}},bar:{vgMark:"rect",encodeEntry:function encodeEntry(a){return Object.assign(Object.assign(Object.assign({},baseEncodeEntry(a,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),rectPosition(a,"x","bar")),rectPosition(a,"y","bar"))}},circle:{vgMark:"symbol",encodeEntry:function encodeEntry(a){return _encodeEntry(a,"circle")}},geoshape:{vgMark:"shape",encodeEntry:function encodeEntry(a){return Object.assign({},baseEncodeEntry(a,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}))},postEncodingTransform:function postEncodingTransform(a){var A=a.encoding.shape;return[Object.assign({type:"geoshape",projection:a.projectionName()},A&&isFieldDef(A)&&A.type===En?{field:channeldef_vgField(A,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:function encodeEntry(a){return Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(a,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),rectPosition(a,"x","image")),rectPosition(a,"y","image")),text_text(a,"url"))}},line:{vgMark:"line",encodeEntry:function encodeEntry(a){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(a,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),pointPosition("x",a,{defaultPos:"mid"})),pointPosition("y",a,{defaultPos:"mid"})),nonPosition("size",a,{vgChannel:"strokeWidth"})),defined(a))}},point:{vgMark:"symbol",encodeEntry:function encodeEntry(a){return _encodeEntry(a)}},rect:{vgMark:"rect",encodeEntry:function encodeEntry(a){return Object.assign(Object.assign(Object.assign({},baseEncodeEntry(a,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),rectPosition(a,"x","rect")),rectPosition(a,"y","rect"))}},rule:{vgMark:"rule",encodeEntry:function encodeEntry(a){var A=a.markDef.orient;return a.encoding.x||a.encoding.y||a.encoding.latitude||a.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(a,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),pointOrRangePosition("x",a,{defaultPos:"horizontal"===A?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==A})),pointOrRangePosition("y",a,{defaultPos:"vertical"===A?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==A})),nonPosition("size",a,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:function encodeEntry(a){return _encodeEntry(a,"square")}},text:{vgMark:"text",encodeEntry:function encodeEntry(a){var A=a.config;a.encoding;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(a,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),pointPosition("x",a,{defaultPos:"mid"})),pointPosition("y",a,{defaultPos:"mid"})),text_text(a)),nonPosition("size",a,{vgChannel:"fontSize"})),nonPosition("angle",a)),valueIfDefined("align",function text_align(a,A,j){if(void 0===getMarkPropOrConfig("align",a,j))return"center";return}(a.markDef,0,A))),valueIfDefined("baseline",function text_baseline(a,A,j){if(void 0===getMarkPropOrConfig("baseline",a,j))return"middle";return}(a.markDef,0,A))),pointPosition("radius",a,{defaultPos:null,isMidPoint:!0})),pointPosition("theta",a,{defaultPos:null,isMidPoint:!0}))}},tick:{vgMark:"rect",encodeEntry:function encodeEntry(a){var A=a.config,j=a.markDef,P=j.orient,B="horizontal"===P?"width":"height",q="horizontal"===P?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(a,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),pointPosition("x",a,{defaultPos:"mid",vgChannel:"xc"})),pointPosition("y",a,{defaultPos:"mid",vgChannel:"yc"})),nonPosition("size",a,{defaultValue:tick_defaultSize(a),vgChannel:B})),Object(Ye.a)({},q,signalOrValueRef(getMarkPropOrConfig("thickness",j,A))))}},trail:{vgMark:"trail",encodeEntry:function encodeEntry(a){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(a,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),pointPosition("x",a,{defaultPos:"mid"})),pointPosition("y",a,{defaultPos:"mid"})),nonPosition("size",a)),defined(a))}}};function parseMarkGroups(a){if(util_contains([nr,Qn,fr],a.mark)){var A=pathGroupingFields(a.mark,a.encoding);if(A.length>0)return function getPathGroups(a,A){return[{name:a.getName("pathgroup"),type:"group",from:{facet:{name:"faceted_path_"+a.requestDataName(ta.Main),data:a.requestDataName(ta.Main),groupby:A}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:getMarkGroup(a,{fromPrefix:"faceted_path_"})}]}(a,A)}else if(util_contains([Zn],a.mark)){var j=_n.some((function(A){return getMarkPropOrConfig(A,a.markDef,a.config)}));if(a.stack&&!a.fieldDef("size")&&j)return function getGroupsForStackedBarWithCornerRadius(a){var A,j,P=getMarkGroup(a,{fromPrefix:"stack_group_"}),B=Object(ge.a)(P,1)[0],q=a.scaleName(a.stack.fieldChannel),ne=function stackField(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.vgField(a.stack.fieldChannel,A)},ie=function stackFieldGroup(a,A){var j=[ne({prefix:"min",suffix:"start",expr:A}),ne({prefix:"max",suffix:"start",expr:A}),ne({prefix:"min",suffix:"end",expr:A}),ne({prefix:"max",suffix:"end",expr:A})];return"".concat(a,"(").concat(j.map((function(a){return"scale('".concat(q,"',").concat(a,")")})).join(","),")")};"x"===a.stack.fieldChannel?(A=Object.assign(Object.assign({},pick(B.encode.update,["y","yc","y2","height"].concat(Object(he.a)(_n)))),{x:{signal:ie("min","datum")},x2:{signal:ie("max","datum")},clip:{value:!0}}),j={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},B.encode.update=Object.assign(Object.assign({},omit(B.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(A=Object.assign(Object.assign({},pick(B.encode.update,["x","xc","x2","width"])),{y:{signal:ie("min","datum")},y2:{signal:ie("max","datum")},clip:{value:!0}}),j={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},B.encode.update=Object.assign(Object.assign({},omit(B.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));var oe,se=Object(pe.a)(_n);try{for(se.s();!(oe=se.n()).done;){var le=oe.value,me=getMarkConfig(le,a.markDef,a.config);B.encode.update[le]?(A[le]=B.encode.update[le],delete B.encode.update[le]):me&&(A[le]=signalOrValueRef(me)),me&&(B.encode.update[le]={value:0})}}catch(_e){se.e(_e)}finally{se.f()}var ve=a.fieldDef(a.stack.groupbyChannel),ye=channeldef_vgField(ve)?[channeldef_vgField(ve)]:[];((null===ve||void 0===ve?void 0:ve.bin)||(null===ve||void 0===ve?void 0:ve.timeUnit))&&ye.push(channeldef_vgField(ve,{binSuffix:"end"}));(A=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((function(A,j){if(B.encode.update[j])return Object.assign(Object.assign({},A),Object(Ye.a)({},j,B.encode.update[j]));var P=getMarkConfig(j,a.markDef,a.config);return void 0!==P?Object.assign(Object.assign({},A),Object(Ye.a)({},j,signalOrValueRef(P))):A}),A)).stroke&&(A.strokeForeground={value:!0},A.strokeOffset={value:0});return[{type:"group",from:{facet:{data:a.requestDataName(ta.Main),name:"stack_group_"+a.requestDataName(ta.Main),groupby:ye,aggregate:{fields:[ne({suffix:"start"}),ne({suffix:"start"}),ne({suffix:"end"}),ne({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:A},marks:[{type:"group",encode:{update:j},marks:[B]}]}]}(a)}return getMarkGroup(a)}function mark_getSort(a){var A=a.encoding,j=a.stack,P=a.mark,B=a.markDef,q=a.config,ne=A.order;if(!(!oe(ne)&&isValueDef(ne)&&isNullOrFalse(ne.value)||!ne&&isNullOrFalse(getMarkPropOrConfig("order",B,q)))){if((oe(ne)||isFieldDef(ne))&&!j)return sortParams(ne,{expr:"datum"});if(isPathMark(P)){var ie="horizontal"===B.orient?"y":"x",se=A[ie];if(isFieldDef(se)){var le=se.sort;return oe(le)?{field:channeldef_vgField(se,{prefix:ie,suffix:"sort_index",expr:"datum"})}:isSortField(le)?{field:channeldef_vgField({aggregate:encoding_isAggregate(a.encoding)?le.op:void 0,field:le.field},{expr:"datum"})}:isSortByEncoding(le)?{field:channeldef_vgField(a.fieldDef(le.encoding),{expr:"datum"}),order:le.order}:null===le?void 0:{field:channeldef_vgField(se,{binSuffix:a.stack&&a.stack.impute?"mid":void 0,expr:"datum"})}}}else;}}function getMarkGroup(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrefix:""},j=a.mark,P=a.markDef,B=a.encoding,q=a.config,ne=getFirstDefined(P.clip,scaleClip(a),projectionClip(a)),ie=getStyles(P),oe=B.key,se=mark_getSort(a),le=interactiveFlag(a),he=getMarkPropOrConfig("aria",P,q),pe=Ns[j].postEncodingTransform?Ns[j].postEncodingTransform(a):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:a.getName("marks"),type:Ns[j].vgMark},ne?{clip:!0}:{}),ie?{style:ie}:{}),oe?{key:oe.field}:{}),se?{sort:se}:{}),le||{}),!1===he?{aria:he}:{}),{from:{data:A.fromPrefix+a.requestDataName(ta.Main)},encode:{update:Ns[j].encodeEntry(a)}}),pe?{transform:pe}:{})]}function scaleClip(a){var A=a.getScaleComponent("x"),j=a.getScaleComponent("y");return!!(A&&A.get("selectionExtent")||j&&j.get("selectionExtent"))||void 0}function projectionClip(a){var A=a.component.projection;return!(!A||A.isFit)||void 0}function interactiveFlag(a){if(!a.component.selection)return null;for(var A=Ae(a.component.selection).length,j=A,P=a.parent;P&&0===j;)j=Ae(P.component.selection).length,P=P.parent;return j?{interactive:A>0||!!a.encoding.tooltip}:null}var Bs=function(a){Object(Zr.a)(UnitModel,a);var A=Object(ti.a)(UnitModel);function UnitModel(a,j,P){var B,q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},ne=arguments.length>4?arguments[4]:void 0;Object(zt.a)(this,UnitModel),(B=A.call(this,a,"unit",j,P,ne,void 0,isFrameMixins(a)?a.view:void 0)).specifiedScales={},B.specifiedAxes={},B.specifiedLegends={},B.specifiedProjection={},B.selection={},B.children=[];var ie=isMarkDef(a.mark)?Object.assign({},a.mark):{type:a.mark},oe=ie.type;void 0===ie.filled&&(ie.filled=defaultFilled(ie,ne,{graticule:a.data&&isGraticuleGenerator(a.data)}));var se=B.encoding=initEncoding(a.encoding||{},oe,ie.filled,ne);return B.markDef=initMarkdef(ie,se,ne),B.size=initLayoutSize({encoding:se,size:isFrameMixins(a)?Object.assign(Object.assign(Object.assign({},q),a.width?{width:a.width}:{}),a.height?{height:a.height}:{}):q}),B.stack=stack_stack(oe,se),B.specifiedScales=B.initScales(oe,se),B.specifiedAxes=B.initAxes(se),B.specifiedLegends=B.initLegends(se),B.specifiedProjection=a.projection,B.selection=a.selection,B}return Object(qt.a)(UnitModel,[{key:"hasProjection",get:function get(){var a=this.encoding,A=this.mark===pr,j=a&&bt.some((function(A){return isFieldOrDatumDef(a[A])}));return A||j}},{key:"scaleDomain",value:function scaleDomain(a){var A=this.specifiedScales[a];return A?A.domain:void 0}},{key:"axis",value:function axis(a){return this.specifiedAxes[a]}},{key:"legend",value:function legend(a){return this.specifiedLegends[a]}},{key:"initScales",value:function initScales(a,A){var j=this;return It.reduce((function(a,P){var B,q=getFieldOrDatumDef(A[P]);return q&&(a[P]=j.initScale(null!==(B=q.scale)&&void 0!==B?B:{})),a}),{})}},{key:"initScale",value:function initScale(a){var A=a.domain,j=a.range,P=replaceExprRefInIndex(a);return oe(A)&&(P.domain=A.map(signalRefOrValue)),oe(j)&&(P.range=j.map(signalRefOrValue)),P}},{key:"initAxes",value:function initAxes(a){var A=this;return jt.reduce((function(j,P){var B=a[P];if(isFieldOrDatumDef(B)||P===at&&isFieldOrDatumDef(a.x2)||P===ot&&isFieldOrDatumDef(a.y2)){var q=isFieldOrDatumDef(B)?B.axis:void 0;j[P]=q?A.initAxis(Object.assign({},q)):q}return j}),{})}},{key:"initAxis",value:function initAxis(a){var A,j=Ae(a),P={},B=Object(pe.a)(j);try{for(B.s();!(A=B.n()).done;){var q=A.value,ne=a[q];P[q]=isConditionalAxisValue(ne)?signalOrValueRefWithCondition(ne):signalRefOrValue(ne)}}catch(ie){B.e(ie)}finally{B.f()}return P}},{key:"initLegends",value:function initLegends(a){return Mt.reduce((function(A,j){var P=getFieldOrDatumDef(a[j]);if(P&&function supportLegend(a){switch(a){case dt:case ht:case pt:case mt:case gt:case"opacity":case"strokeWidth":case"strokeDash":return!0;case"fillOpacity":case"strokeOpacity":case"angle":return!1}}(j)){var B=P.legend;A[j]=B?replaceExprRefInIndex(B):B}return A}),{})}},{key:"parseData",value:function parseData(){this.component.data=parse_parseData(this)}},{key:"parseLayoutSize",value:function parseLayoutSize(){!function parseUnitLayoutSize(a){var A,j=a.size,P=a.component,B=Object(pe.a)(jt);try{for(B.s();!(A=B.n()).done;){var q=getSizeChannel(A.value);if(j[q]){var ne=j[q];P.layoutSize.set(q,isStep(ne)?"step":ne,!0)}else{var ie=defaultUnitSize(a,q);P.layoutSize.set(q,ie,!1)}}}catch(oe){B.e(oe)}finally{B.f()}}(this)}},{key:"parseSelections",value:function parseSelections(){this.component.selection=function parseUnitSelection(a,A){var j,P,B={},q=a.config.selection,ne=Object(pe.a)(Ae(null!==A&&void 0!==A?A:{}));try{var ie=function _loop(){var ne=P.value,ie=Se(A[ne]),oe=q[ie.type],se=(oe.fields,oe.encodings,parse_rest(oe,["fields","encodings"]));for(var le in se)"encodings"===le&&ie.fields||"fields"===le&&ie.encodings||("mark"===le&&(ie[le]=Object.assign(Object.assign({},se[le]),ie[le])),void 0!==ie[le]&&!0!==ie[le]||(ie[le]=null!==(j=se[le])&&void 0!==j?j:ie[le]));var he=varName(ne),pe=B[he]=Object.assign(Object.assign({},ie),{name:he,events:isString(ie.on)?eventSelector(ie.on,"scope"):Se(ie.on)});forEachTransform(pe,(function(j){j.has(pe)&&j.parse&&j.parse(a,pe,ie,A[ne])}))};for(ne.s();!(P=ne.n()).done;)ie()}catch(oe){ne.e(oe)}finally{ne.f()}return B}(this,this.selection)}},{key:"parseMarkGroup",value:function parseMarkGroup(){this.component.mark=parseMarkGroups(this)}},{key:"parseAxesAndHeaders",value:function parseAxesAndHeaders(){this.component.axes=function parseUnitAxes(a){return jt.reduce((function(A,j){return a.component.scales[j]&&(A[j]=[parseAxis(j,a)]),A}),{})}(this)}},{key:"assembleSelectionTopLevelSignals",value:function assembleSelectionTopLevelSignals(a){return function assembleTopLevelSignals(a,A){var j=!1;return forEachSelection(a,(function(P,B){var q=P.name,ne=$(q+eo);if(0===A.filter((function(a){return a.name===q})).length){var ie="global"===P.resolve?"union":P.resolve,oe="multi"===P.type?", true)":")";A.push({name:P.name,update:"".concat(io,"(").concat(ne,", ").concat($(ie)).concat(oe)})}j=!0,B.topLevelSignals&&(A=B.topLevelSignals(a,P,A)),forEachTransform(P,(function(j){j.topLevelSignals&&(A=j.topLevelSignals(a,P,A))}))})),j&&0===A.filter((function(a){return"unit"===a.name})).length&&A.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),cleanupEmptyOnArray(A)}(this,a)}},{key:"assembleSignals",value:function assembleSignals(){return[].concat(Object(he.a)(assembleAxisSignals(this)),Object(he.a)(function assembleUnitSelectionSignals(a,A){return forEachSelection(a,(function(j,P){var B,q=j.name,ne=P.modifyExpr(a,j);(B=A).push.apply(B,Object(he.a)(P.signals(a,j))),forEachTransform(j,(function(P){P.signals&&(A=P.signals(a,j,A)),P.modifyExpr&&(ne=P.modifyExpr(a,j,ne))})),A.push({name:q+ro,on:[{events:{signal:j.name+no},update:"modify(".concat($(j.name+eo),", ").concat(ne,")")}]})})),cleanupEmptyOnArray(A)}(this,[])))}},{key:"assembleSelectionData",value:function assembleSelectionData(a){return function assembleUnitSelectionData(a,A){var j=Object(he.a)(A);return forEachSelection(a,(function(A){var P={name:A.name+eo};if(A.init){var B=A.project.items.map((function(a){a.signals;return assemble_rest(a,["signals"])})),q=A.init.map((function(a){return assembleInit(a,!1)}));P.values="interval"===A.type?[{unit:selection_unitName(a,{escape:!1}),fields:B,values:q}]:q.map((function(A){return{unit:selection_unitName(a,{escape:!1}),fields:B,values:A}}))}j.filter((function(a){return a.name===A.name+eo})).length||j.push(P)})),j}(this,a)}},{key:"assembleLayout",value:function assembleLayout(){return null}},{key:"assembleLayoutSignals",value:function assembleLayoutSignals(){return assemble_assembleLayoutSignals(this)}},{key:"assembleMarks",value:function assembleMarks(){var a,A=null!==(a=this.component.mark)&&void 0!==a?a:[];return this.parent&&isLayerModel(this.parent)||(A=assembleUnitSelectionMarks(this,A)),A.map(this.correctDataNames)}},{key:"getMapping",value:function getMapping(){return this.encoding}},{key:"mark",get:function get(){return this.markDef.type}},{key:"channelHasField",value:function channelHasField(a){return encoding_channelHasField(this.encoding,a)}},{key:"fieldDef",value:function fieldDef(a){return getFieldDef(this.encoding[a])}},{key:"typedFieldDef",value:function typedFieldDef(a){var A=this.fieldDef(a);return isTypedFieldDef(A)?A:null}}]),UnitModel}(vs),Us=function(a){Object(Zr.a)(LayerModel,a);var A=Object(ti.a)(LayerModel);function LayerModel(a,j,B,q,ne){var ie;Object(zt.a)(this,LayerModel),ie=A.call(this,a,"layer",j,B,ne,a.resolve,a.view);var oe=Object.assign(Object.assign(Object.assign({},q),a.width?{width:a.width}:{}),a.height?{height:a.height}:{});return ie.children=a.layer.map((function(a,A){if(isLayerSpec(a))return new LayerModel(a,Object(Yi.a)(ie),ie.getName("layer_"+A),oe,ne);if(isUnitSpec(a))return new Bs(a,Object(Yi.a)(ie),ie.getName("layer_"+A),oe,ne);throw new Error(P.invalidSpec(a))})),ie}return Object(qt.a)(LayerModel,[{key:"parseData",value:function parseData(){this.component.data=parse_parseData(this);var a,A=Object(pe.a)(this.children);try{for(A.s();!(a=A.n()).done;){a.value.parseData()}}catch(j){A.e(j)}finally{A.f()}}},{key:"parseLayoutSize",value:function parseLayoutSize(){!function parseLayerLayoutSize(a){parseChildrenLayoutSize(a),parseNonUnitLayoutSizeForChannel(a,"width"),parseNonUnitLayoutSizeForChannel(a,"height")}(this)}},{key:"parseSelections",value:function parseSelections(){this.component.selection={};var a,A=Object(pe.a)(this.children);try{for(A.s();!(a=A.n()).done;){var j=a.value;j.parseSelections();var P,B=Object(pe.a)(Ae(j.component.selection));try{for(B.s();!(P=B.n()).done;){var q=P.value;this.component.selection[q]=j.component.selection[q]}}catch(ne){B.e(ne)}finally{B.f()}}}catch(ne){A.e(ne)}finally{A.f()}}},{key:"parseMarkGroup",value:function parseMarkGroup(){var a,A=Object(pe.a)(this.children);try{for(A.s();!(a=A.n()).done;){a.value.parseMarkGroup()}}catch(j){A.e(j)}finally{A.f()}}},{key:"parseAxesAndHeaders",value:function parseAxesAndHeaders(){!function parseLayerAxes(a){var A,j,P=a.component,B=P.axes,q=P.resolve,ne={top:0,bottom:0,right:0,left:0},ie=Object(pe.a)(a.children);try{for(ie.s();!(j=ie.n()).done;){var oe=j.value;oe.parseAxesAndHeaders();var se,le=Object(pe.a)(Ae(oe.component.axes));try{for(le.s();!(se=le.n()).done;){var he=se.value;q.axis[he]=parseGuideResolve(a.component.resolve,he),"shared"===q.axis[he]&&(B[he]=mergeAxisComponents(B[he],oe.component.axes[he]),B[he]||(q.axis[he]="independent",delete B[he]))}}catch(Ue){le.e(Ue)}finally{le.f()}}}catch(Ue){ie.e(Ue)}finally{ie.f()}var ge,me=Object(pe.a)(jt);try{for(me.s();!(ge=me.n()).done;){var ve,ye=ge.value,_e=Object(pe.a)(a.children);try{for(_e.s();!(ve=_e.n()).done;){var we=ve.value;if(we.component.axes[ye]){if("independent"===q.axis[ye]){B[ye]=(null!==(A=B[ye])&&void 0!==A?A:[]).concat(we.component.axes[ye]);var ke,Oe=Object(pe.a)(we.component.axes[ye]);try{for(Oe.s();!(ke=Oe.n()).done;){var Se=ke.value,Te=Se.getWithExplicit("orient"),je=Te.value,Fe=Te.explicit;if(!isSignalRef(je)){if(ne[je]>0&&!Fe){var Re=Ls[je];ne[je]>ne[Re]&&Se.set("orient",Re,!1)}ne[je]++}}}catch(Ue){Oe.e(Ue)}finally{Oe.f()}}delete we.component.axes[ye]}}}catch(Ue){_e.e(Ue)}finally{_e.f()}if("independent"===q.axis[ye]&&B[ye]&&B[ye].length>1){var Me,Ne=Object(pe.a)(B[ye]);try{for(Ne.s();!(Me=Ne.n()).done;){var Be=Me.value;Be.get("grid")&&!Be.explicit.grid&&(Be.implicit.grid=!1)}}catch(Ue){Ne.e(Ue)}finally{Ne.f()}}}}catch(Ue){me.e(Ue)}finally{me.f()}}(this)}},{key:"assembleSelectionTopLevelSignals",value:function assembleSelectionTopLevelSignals(a){return this.children.reduce((function(a,A){return A.assembleSelectionTopLevelSignals(a)}),a)}},{key:"assembleSignals",value:function assembleSignals(){return this.children.reduce((function(a,A){return a.concat(A.assembleSignals())}),assembleAxisSignals(this))}},{key:"assembleLayoutSignals",value:function assembleLayoutSignals(){return this.children.reduce((function(a,A){return a.concat(A.assembleLayoutSignals())}),assemble_assembleLayoutSignals(this))}},{key:"assembleSelectionData",value:function assembleSelectionData(a){return this.children.reduce((function(a,A){return A.assembleSelectionData(a)}),a)}},{key:"assembleTitle",value:function assembleTitle(){var a=get_get(Object(Qr.a)(LayerModel.prototype),"assembleTitle",this).call(this);if(a)return a;var A,j=Object(pe.a)(this.children);try{for(j.s();!(A=j.n()).done;){if(a=A.value.assembleTitle())return a}}catch(P){j.e(P)}finally{j.f()}}},{key:"assembleLayout",value:function assembleLayout(){return null}},{key:"assembleMarks",value:function assembleMarks(){return function assembleLayerSelectionMarks(a,A){var j,P=Object(pe.a)(a.children);try{for(P.s();!(j=P.n()).done;){var B=j.value;isUnitModel(B)&&(A=assembleUnitSelectionMarks(B,A))}}catch(q){P.e(q)}finally{P.f()}return A}(this,this.children.flatMap((function(a){return a.assembleMarks()})))}},{key:"assembleLegends",value:function assembleLegends(){return this.children.reduce((function(a,A){return a.concat(A.assembleLegends())}),assemble_assembleLegends(this))}}]),LayerModel}(ms);function buildModel(a,A,j,B,q){if(isFacetSpec(a))return new js(a,A,j,q);if(isLayerSpec(a))return new Us(a,A,j,B,q);if(isUnitSpec(a))return new Bs(a,A,j,B,q);if(function isAnyConcatSpec(a){return isVConcatSpec(a)||isHConcatSpec(a)||isConcatSpec(a)}(a))return new Fs(a,A,j,q);throw new Error(P.invalidSpec(a))}var compile_rest=function(a,A){var j={};for(var P in a)Object.prototype.hasOwnProperty.call(a,P)&&A.indexOf(P)<0&&(j[P]=a[P]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var B=0;for(P=Object.getOwnPropertySymbols(a);B<P.length;B++)A.indexOf(P[B])<0&&Object.prototype.propertyIsEnumerable.call(a,P[B])&&(j[P[B]]=a[P[B]])}return j};function compile(a){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A.logger&&set(A.logger),A.fieldTitle&&setTitleFormatter(A.fieldTitle);try{var j=initConfig(mergeConfig(A.config,a.config)),P=normalize_normalize(a,j),B=buildModel(P,null,"",void 0,j);B.parse(),optimizeDataflow(B.component.data,B);var q=assembleTopLevelModel(B,getTopLevelProperties(a,P.autosize,j,B),a.datasets,a.usermeta);return{spec:q,normalized:P}}finally{A.logger&&log_reset(),A.fieldTitle&&resetTitleFormatter()}}function getTopLevelProperties(a,A,j,B){var q=B.component.layoutSize.get("width"),ne=B.component.layoutSize.get("height");if(void 0===A?(A={type:"pad"},B.hasAxisOrientSignalRef()&&(A.resize=!0)):isString(A)&&(A={type:A}),q&&ne&&function isFitType(a){return"fit"===a||"fit-x"===a||"fit-y"===a}(A.type))if("step"===q&&"step"===ne)log_warn(P.droppingFit()),A.type="pad";else if("step"===q||"step"===ne){var ie="step"===q?"width":"height";log_warn(P.droppingFit(getPositionScaleChannel(ie)));var oe="width"===ie?"height":"width";A.type=function getFitType(a){return a?"fit-".concat(getPositionScaleChannel(a)):"fit"}(oe)}return Object.assign(Object.assign(Object.assign({},1===Ae(A).length&&A.type?"pad"===A.type?{}:{autosize:A.type}:{autosize:A}),extractTopLevelProperties(j,!1)),extractTopLevelProperties(a,!0))}function assembleTopLevelModel(a,A){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},P=arguments.length>3?arguments[3]:void 0,B=a.config?stripAndRedirectConfig(a.config):void 0,q=[].concat(a.assembleSelectionData([]),assembleRootData(a.component.data,j)),ne=a.assembleProjections(),ie=a.assembleTitle(),oe=a.assembleGroupStyle(),se=a.assembleGroupEncodeEntry(!0),le=a.assembleLayoutSignals();le=le.filter((function(a){return"width"!==a.name&&"height"!==a.name||void 0===a.value||(A[a.name]=+a.value,!1)}));var pe=A.params,ge=compile_rest(A,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},a.description?{description:a.description}:{}),ge),ie?{title:ie}:{}),oe?{style:oe}:{}),se?{encode:{update:se}}:{}),{data:q}),ne.length>0?{projections:ne}:{}),a.assembleGroup([].concat(Object(he.a)(le),Object(he.a)(a.assembleSelectionTopLevelSignals([])),Object(he.a)(assembleParameterSignals(pe))))),B?{config:B}:{}),P?{usermeta:P}:{})}},,function(a,A,j){"use strict";j.d(A,"a",(function(){return applyPatch}));var P={};j.r(P),j.d(P,"JsonPatchError",(function(){return oe})),j.d(P,"deepClone",(function(){return se})),j.d(P,"getValueByPointer",(function(){return getValueByPointer})),j.d(P,"applyOperation",(function(){return applyOperation})),j.d(P,"applyPatch",(function(){return applyPatch})),j.d(P,"applyReducer",(function(){return applyReducer})),j.d(P,"validator",(function(){return validator})),j.d(P,"validate",(function(){return validate})),j.d(P,"_areEquals",(function(){return _areEquals}));var B={};j.r(B),j.d(B,"unobserve",(function(){return unobserve})),j.d(B,"observe",(function(){return observe})),j.d(B,"generate",(function(){return generate})),j.d(B,"compare",(function(){return compare}));var q=function(){var a=function extendStatics(A,j){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,A){a.__proto__=A}||function(a,A){for(var j in A)A.hasOwnProperty(j)&&(a[j]=A[j])})(A,j)};return function(A,j){function __(){this.constructor=A}a(A,j),A.prototype=null===j?Object.create(j):(__.prototype=j.prototype,new __)}}(),ne=Object.prototype.hasOwnProperty;function helpers_hasOwnProperty(a,A){return ne.call(a,A)}function _objectKeys(a){if(Array.isArray(a)){for(var A=new Array(a.length),j=0;j<A.length;j++)A[j]=""+j;return A}if(Object.keys)return Object.keys(a);A=[];for(var P in a)helpers_hasOwnProperty(a,P)&&A.push(P);return A}function _deepClone(a){switch(typeof a){case"object":return JSON.parse(JSON.stringify(a));case"undefined":return null;default:return a}}function isInteger(a){for(var A,j=0,P=a.length;j<P;){if(!((A=a.charCodeAt(j))>=48&&A<=57))return!1;j++}return!0}function escapePathComponent(a){return-1===a.indexOf("/")&&-1===a.indexOf("~")?a:a.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapePathComponent(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}function patchErrorMessageFormatter(a,A){var j=[a];for(var P in A){var B="object"===typeof A[P]?JSON.stringify(A[P],null,2):A[P];"undefined"!==typeof B&&j.push(P+": "+B)}return j.join("\n")}var ie=function(a){function PatchError(A,j,P,B,q){var ne=this.constructor,ie=a.call(this,patchErrorMessageFormatter(A,{name:j,index:P,operation:B,tree:q}))||this;return ie.name=j,ie.index=P,ie.operation=B,ie.tree=q,Object.setPrototypeOf(ie,ne.prototype),ie.message=patchErrorMessageFormatter(A,{name:j,index:P,operation:B,tree:q}),ie}return q(PatchError,a),PatchError}(Error),oe=ie,se=_deepClone,le={add:function add(a,A,j){return a[A]=this.value,{newDocument:j}},remove:function remove(a,A,j){var P=a[A];return delete a[A],{newDocument:j,removed:P}},replace:function replace(a,A,j){var P=a[A];return a[A]=this.value,{newDocument:j,removed:P}},move:function move(a,A,j){var P=getValueByPointer(j,this.path);P&&(P=_deepClone(P));var B=applyOperation(j,{op:"remove",path:this.from}).removed;return applyOperation(j,{op:"add",path:this.path,value:B}),{newDocument:j,removed:P}},copy:function copy(a,A,j){var P=getValueByPointer(j,this.from);return applyOperation(j,{op:"add",path:this.path,value:_deepClone(P)}),{newDocument:j}},test:function test(a,A,j){return{newDocument:j,test:_areEquals(a[A],this.value)}},_get:function _get(a,A,j){return this.value=a[A],{newDocument:j}}},he={add:function add(a,A,j){return isInteger(A)?a.splice(A,0,this.value):a[A]=this.value,{newDocument:j,index:A}},remove:function remove(a,A,j){return{newDocument:j,removed:a.splice(A,1)[0]}},replace:function replace(a,A,j){var P=a[A];return a[A]=this.value,{newDocument:j,removed:P}},move:le.move,copy:le.copy,test:le.test,_get:le._get};function getValueByPointer(a,A){if(""==A)return a;var j={op:"_get",path:A};return applyOperation(a,j),j.value}function applyOperation(a,A,j,P,B,q){if(void 0===j&&(j=!1),void 0===P&&(P=!0),void 0===B&&(B=!0),void 0===q&&(q=0),j&&("function"==typeof j?j(A,0,a,A.path):validator(A,0)),""===A.path){var ne={newDocument:a};if("add"===A.op)return ne.newDocument=A.value,ne;if("replace"===A.op)return ne.newDocument=A.value,ne.removed=a,ne;if("move"===A.op||"copy"===A.op)return ne.newDocument=getValueByPointer(a,A.from),"move"===A.op&&(ne.removed=a),ne;if("test"===A.op){if(ne.test=_areEquals(a,A.value),!1===ne.test)throw new oe("Test operation failed","TEST_OPERATION_FAILED",q,A,a);return ne.newDocument=a,ne}if("remove"===A.op)return ne.removed=a,ne.newDocument=null,ne;if("_get"===A.op)return A.value=a,ne;if(j)throw new oe("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",q,A,a);return ne}P||(a=_deepClone(a));var ie=(A.path||"").split("/"),se=a,pe=1,ge=ie.length,me=void 0,ve=void 0,ye=void 0;for(ye="function"==typeof j?j:validator;;){if((ve=ie[pe])&&-1!=ve.indexOf("~")&&(ve=unescapePathComponent(ve)),B&&"__proto__"==ve)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(j&&void 0===me&&(void 0===se[ve]?me=ie.slice(0,pe).join("/"):pe==ge-1&&(me=A.path),void 0!==me&&ye(A,0,a,me)),pe++,Array.isArray(se)){if("-"===ve)ve=se.length;else{if(j&&!isInteger(ve))throw new oe("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",q,A,a);isInteger(ve)&&(ve=~~ve)}if(pe>=ge){if(j&&"add"===A.op&&ve>se.length)throw new oe("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",q,A,a);if(!1===(ne=he[A.op].call(A,se,ve,a)).test)throw new oe("Test operation failed","TEST_OPERATION_FAILED",q,A,a);return ne}}else if(pe>=ge){if(!1===(ne=le[A.op].call(A,se,ve,a)).test)throw new oe("Test operation failed","TEST_OPERATION_FAILED",q,A,a);return ne}if(se=se[ve],j&&pe<ge&&(!se||"object"!==typeof se))throw new oe("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",q,A,a)}}function applyPatch(a,A,j,P,B){if(void 0===P&&(P=!0),void 0===B&&(B=!0),j&&!Array.isArray(A))throw new oe("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");P||(a=_deepClone(a));for(var q=new Array(A.length),ne=0,ie=A.length;ne<ie;ne++)q[ne]=applyOperation(a,A[ne],j,!0,B,ne),a=q[ne].newDocument;return q.newDocument=a,q}function applyReducer(a,A,j){var P=applyOperation(a,A);if(!1===P.test)throw new oe("Test operation failed","TEST_OPERATION_FAILED",j,A,a);return P.newDocument}function validator(a,A,j,P){if("object"!==typeof a||null===a||Array.isArray(a))throw new oe("Operation is not an object","OPERATION_NOT_AN_OBJECT",A,a,j);if(!le[a.op])throw new oe("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",A,a,j);if("string"!==typeof a.path)throw new oe("Operation `path` property is not a string","OPERATION_PATH_INVALID",A,a,j);if(0!==a.path.indexOf("/")&&a.path.length>0)throw new oe('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",A,a,j);if(("move"===a.op||"copy"===a.op)&&"string"!==typeof a.from)throw new oe("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",A,a,j);if(("add"===a.op||"replace"===a.op||"test"===a.op)&&void 0===a.value)throw new oe("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",A,a,j);if(("add"===a.op||"replace"===a.op||"test"===a.op)&&function hasUndefined(a){if(void 0===a)return!0;if(a)if(Array.isArray(a)){for(var A=0,j=a.length;A<j;A++)if(hasUndefined(a[A]))return!0}else if("object"===typeof a){var P=_objectKeys(a),B=P.length;for(A=0;A<B;A++)if(hasUndefined(a[P[A]]))return!0}return!1}(a.value))throw new oe("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",A,a,j);if(j)if("add"==a.op){var B=a.path.split("/").length,q=P.split("/").length;if(B!==q+1&&B!==q)throw new oe("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",A,a,j)}else if("replace"===a.op||"remove"===a.op||"_get"===a.op){if(a.path!==P)throw new oe("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",A,a,j)}else if("move"===a.op||"copy"===a.op){var ne=validate([{op:"_get",path:a.from,value:void 0}],j);if(ne&&"OPERATION_PATH_UNRESOLVABLE"===ne.name)throw new oe("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",A,a,j)}}function validate(a,A,j){try{if(!Array.isArray(a))throw new oe("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(A)applyPatch(_deepClone(A),_deepClone(a),j||!0);else{j=j||validator;for(var P=0;P<a.length;P++)j(a[P],P,A,void 0)}}catch(B){if(B instanceof oe)return B;throw B}}function _areEquals(a,A){if(a===A)return!0;if(a&&A&&"object"==typeof a&&"object"==typeof A){var j,P,B,q=Array.isArray(a),ne=Array.isArray(A);if(q&&ne){if((P=a.length)!=A.length)return!1;for(j=P;0!==j--;)if(!_areEquals(a[j],A[j]))return!1;return!0}if(q!=ne)return!1;var ie=Object.keys(a);if((P=ie.length)!==Object.keys(A).length)return!1;for(j=P;0!==j--;)if(!A.hasOwnProperty(ie[j]))return!1;for(j=P;0!==j--;)if(!_areEquals(a[B=ie[j]],A[B]))return!1;return!0}return a!==a&&A!==A}var pe=new WeakMap,ge=function ge(a){this.observers=new Map,this.obj=a},me=function me(a,A){this.callback=a,this.observer=A};function unobserve(a,A){A.unobserve()}function observe(a,A){var j,P=function getMirror(a){return pe.get(a)}(a);if(P){var B=function getObserverFromMirror(a,A){return a.observers.get(A)}(P,A);j=B&&B.observer}else P=new ge(a),pe.set(a,P);if(j)return j;if(j={},P.value=_deepClone(a),A){j.callback=A,j.next=null;var q=function dirtyCheck(){generate(j)},ne=function fastCheck(){clearTimeout(j.next),j.next=setTimeout(q)};"undefined"!==typeof window&&(window.addEventListener("mouseup",ne),window.addEventListener("keyup",ne),window.addEventListener("mousedown",ne),window.addEventListener("keydown",ne),window.addEventListener("change",ne))}return j.patches=[],j.object=a,j.unobserve=function(){generate(j),clearTimeout(j.next),function removeObserverFromMirror(a,A){a.observers.delete(A.callback)}(P,j),"undefined"!==typeof window&&(window.removeEventListener("mouseup",ne),window.removeEventListener("keyup",ne),window.removeEventListener("mousedown",ne),window.removeEventListener("keydown",ne),window.removeEventListener("change",ne))},P.observers.set(A,new me(A,j)),j}function generate(a,A){void 0===A&&(A=!1);var j=pe.get(a.object);_generate(j.value,a.object,a.patches,"",A),a.patches.length&&applyPatch(j.value,a.patches);var P=a.patches;return P.length>0&&(a.patches=[],a.callback&&a.callback(P)),P}function _generate(a,A,j,P,B){if(A!==a){"function"===typeof A.toJSON&&(A=A.toJSON());for(var q=_objectKeys(A),ne=_objectKeys(a),ie=!1,oe=ne.length-1;oe>=0;oe--){var se=a[he=ne[oe]];if(!helpers_hasOwnProperty(A,he)||void 0===A[he]&&void 0!==se&&!1===Array.isArray(A))Array.isArray(a)===Array.isArray(A)?(B&&j.push({op:"test",path:P+"/"+escapePathComponent(he),value:_deepClone(se)}),j.push({op:"remove",path:P+"/"+escapePathComponent(he)}),ie=!0):(B&&j.push({op:"test",path:P,value:a}),j.push({op:"replace",path:P,value:A}),!0);else{var le=A[he];"object"==typeof se&&null!=se&&"object"==typeof le&&null!=le&&Array.isArray(se)===Array.isArray(le)?_generate(se,le,j,P+"/"+escapePathComponent(he),B):se!==le&&(!0,B&&j.push({op:"test",path:P+"/"+escapePathComponent(he),value:_deepClone(se)}),j.push({op:"replace",path:P+"/"+escapePathComponent(he),value:_deepClone(le)}))}}if(ie||q.length!=ne.length)for(oe=0;oe<q.length;oe++){var he;helpers_hasOwnProperty(a,he=q[oe])||void 0===A[he]||j.push({op:"add",path:P+"/"+escapePathComponent(he),value:_deepClone(A[he])})}}}function compare(a,A,j){void 0===j&&(j=!1);var P=[];return _generate(a,A,P,"",j),P}Object.assign({},P,B,{JsonPatchError:ie,deepClone:_deepClone,escapePathComponent:escapePathComponent,unescapePathComponent:unescapePathComponent})},function(a,A,j){"use strict";j.d(A,"a",(function(){return B})),j.d(A,"b",(function(){return q}));var P,B,q,ne=j(149);!function defaultLocale(a){return P=Object(ne.a)(a),B=P.format,q=P.formatPrefix,P}({thousands:",",grouping:[3],currency:["$",""]})},,,,,function(a,A,j){"use strict";var P=j(110),B="function"===typeof Symbol&&Symbol.for,q=B?Symbol.for("react.element"):60103,ne=B?Symbol.for("react.portal"):60106,ie=B?Symbol.for("react.fragment"):60107,oe=B?Symbol.for("react.strict_mode"):60108,se=B?Symbol.for("react.profiler"):60114,le=B?Symbol.for("react.provider"):60109,he=B?Symbol.for("react.context"):60110,pe=B?Symbol.for("react.forward_ref"):60112,ge=B?Symbol.for("react.suspense"):60113,me=B?Symbol.for("react.memo"):60115,ve=B?Symbol.for("react.lazy"):60116,ye="function"===typeof Symbol&&Symbol.iterator;function C(a){for(var A="https://reactjs.org/docs/error-decoder.html?invariant="+a,j=1;j<arguments.length;j++)A+="&args[]="+encodeURIComponent(arguments[j]);return"Minified React error #"+a+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _e={isMounted:function isMounted(){return!1},enqueueForceUpdate:function enqueueForceUpdate(){},enqueueReplaceState:function enqueueReplaceState(){},enqueueSetState:function enqueueSetState(){}},we={};function F(a,A,j){this.props=a,this.context=A,this.refs=we,this.updater=j||_e}function G(){}function H(a,A,j){this.props=a,this.context=A,this.refs=we,this.updater=j||_e}F.prototype.isReactComponent={},F.prototype.setState=function(a,A){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error(C(85));this.updater.enqueueSetState(this,a,A,"setState")},F.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")},G.prototype=F.prototype;var ke=H.prototype=new G;ke.constructor=H,P(ke,F.prototype),ke.isPureReactComponent=!0;var Oe={current:null},Se=Object.prototype.hasOwnProperty,Te={key:!0,ref:!0,__self:!0,__source:!0};function M(a,A,j){var P,B={},ne=null,ie=null;if(null!=A)for(P in void 0!==A.ref&&(ie=A.ref),void 0!==A.key&&(ne=""+A.key),A)Se.call(A,P)&&!Te.hasOwnProperty(P)&&(B[P]=A[P]);var oe=arguments.length-2;if(1===oe)B.children=j;else if(1<oe){for(var se=Array(oe),le=0;le<oe;le++)se[le]=arguments[le+2];B.children=se}if(a&&a.defaultProps)for(P in oe=a.defaultProps)void 0===B[P]&&(B[P]=oe[P]);return{$$typeof:q,type:a,key:ne,ref:ie,props:B,_owner:Oe.current}}function O(a){return"object"===typeof a&&null!==a&&a.$$typeof===q}var Ae=/\/+/g,je=[];function R(a,A,j,P){if(je.length){var B=je.pop();return B.result=a,B.keyPrefix=A,B.func=j,B.context=P,B.count=0,B}return{result:a,keyPrefix:A,func:j,context:P,count:0}}function S(a){a.result=null,a.keyPrefix=null,a.func=null,a.context=null,a.count=0,10>je.length&&je.push(a)}function V(a,A,j){return null==a?0:function T(a,A,j,P){var B=typeof a;"undefined"!==B&&"boolean"!==B||(a=null);var ie=!1;if(null===a)ie=!0;else switch(B){case"string":case"number":ie=!0;break;case"object":switch(a.$$typeof){case q:case ne:ie=!0}}if(ie)return j(P,a,""===A?"."+U(a,0):A),1;if(ie=0,A=""===A?".":A+":",Array.isArray(a))for(var oe=0;oe<a.length;oe++){var se=A+U(B=a[oe],oe);ie+=T(B,se,j,P)}else if(null===a||"object"!==typeof a?se=null:se="function"===typeof(se=ye&&a[ye]||a["@@iterator"])?se:null,"function"===typeof se)for(a=se.call(a),oe=0;!(B=a.next()).done;)ie+=T(B=B.value,se=A+U(B,oe++),j,P);else if("object"===B)throw j=""+a,Error(C(31,"[object Object]"===j?"object with keys {"+Object.keys(a).join(", ")+"}":j,""));return ie}(a,"",A,j)}function U(a,A){return"object"===typeof a&&null!==a&&null!=a.key?function escape(a){var A={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,(function(a){return A[a]}))}(a.key):A.toString(36)}function W(a,A){a.func.call(a.context,A,a.count++)}function aa(a,A,j){var P=a.result,B=a.keyPrefix;a=a.func.call(a.context,A,a.count++),Array.isArray(a)?X(a,P,j,(function(a){return a})):null!=a&&(O(a)&&(a=function N(a,A){return{$$typeof:q,type:a.type,key:A,ref:a.ref,props:a.props,_owner:a._owner}}(a,B+(!a.key||A&&A.key===a.key?"":(""+a.key).replace(Ae,"$&/")+"/")+j)),P.push(a))}function X(a,A,j,P,B){var q="";null!=j&&(q=(""+j).replace(Ae,"$&/")+"/"),V(a,aa,A=R(A,q,P,B)),S(A)}var Fe={current:null};function Z(){var a=Fe.current;if(null===a)throw Error(C(321));return a}var Re={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:Oe,IsSomeRendererActing:{current:!1},assign:P};A.Children={map:function map(a,A,j){if(null==a)return a;var P=[];return X(a,P,null,A,j),P},forEach:function forEach(a,A,j){if(null==a)return a;V(a,W,A=R(null,null,A,j)),S(A)},count:function count(a){return V(a,(function(){return null}),null)},toArray:function toArray(a){var A=[];return X(a,A,null,(function(a){return a})),A},only:function only(a){if(!O(a))throw Error(C(143));return a}},A.Component=F,A.Fragment=ie,A.Profiler=se,A.PureComponent=H,A.StrictMode=oe,A.Suspense=ge,A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Re,A.cloneElement=function(a,A,j){if(null===a||void 0===a)throw Error(C(267,a));var B=P({},a.props),ne=a.key,ie=a.ref,oe=a._owner;if(null!=A){if(void 0!==A.ref&&(ie=A.ref,oe=Oe.current),void 0!==A.key&&(ne=""+A.key),a.type&&a.type.defaultProps)var se=a.type.defaultProps;for(le in A)Se.call(A,le)&&!Te.hasOwnProperty(le)&&(B[le]=void 0===A[le]&&void 0!==se?se[le]:A[le])}var le=arguments.length-2;if(1===le)B.children=j;else if(1<le){se=Array(le);for(var he=0;he<le;he++)se[he]=arguments[he+2];B.children=se}return{$$typeof:q,type:a.type,key:ne,ref:ie,props:B,_owner:oe}},A.createContext=function(a,A){return void 0===A&&(A=null),(a={$$typeof:he,_calculateChangedBits:A,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:le,_context:a},a.Consumer=a},A.createElement=M,A.createFactory=function(a){var A=M.bind(null,a);return A.type=a,A},A.createRef=function(){return{current:null}},A.forwardRef=function(a){return{$$typeof:pe,render:a}},A.isValidElement=O,A.lazy=function(a){return{$$typeof:ve,_ctor:a,_status:-1,_result:null}},A.memo=function(a,A){return{$$typeof:me,type:a,compare:void 0===A?null:A}},A.useCallback=function(a,A){return Z().useCallback(a,A)},A.useContext=function(a,A){return Z().useContext(a,A)},A.useDebugValue=function(){},A.useEffect=function(a,A){return Z().useEffect(a,A)},A.useImperativeHandle=function(a,A,j){return Z().useImperativeHandle(a,A,j)},A.useLayoutEffect=function(a,A){return Z().useLayoutEffect(a,A)},A.useMemo=function(a,A){return Z().useMemo(a,A)},A.useReducer=function(a,A,j){return Z().useReducer(a,A,j)},A.useRef=function(a){return Z().useRef(a)},A.useState=function(a){return Z().useState(a)},A.version="16.14.0"},function(a,A,j){"use strict";var P=j(1),B=j(110),q=j(249);function u(a){for(var A="https://reactjs.org/docs/error-decoder.html?invariant="+a,j=1;j<arguments.length;j++)A+="&args[]="+encodeURIComponent(arguments[j]);return"Minified React error #"+a+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!P)throw Error(u(227));function ba(a,A,j,P,B,q,ne,ie,oe){var se=Array.prototype.slice.call(arguments,3);try{A.apply(j,se)}catch(le){this.onError(le)}}var ne=!1,ie=null,oe=!1,se=null,le={onError:function onError(a){ne=!0,ie=a}};function ja(a,A,j,P,B,q,oe,se,he){ne=!1,ie=null,ba.apply(le,arguments)}var he=null,pe=null,ge=null;function oa(a,A,j){var P=a.type||"unknown-event";a.currentTarget=ge(j),function ka(a,A,j,P,B,q,le,he,pe){if(ja.apply(this,arguments),ne){if(!ne)throw Error(u(198));var ge=ie;ne=!1,ie=null,oe||(oe=!0,se=ge)}}(P,A,void 0,a),a.currentTarget=null}var me=null,ve={};function ra(){if(me)for(var a in ve){var A=ve[a],j=me.indexOf(a);if(!(-1<j))throw Error(u(96,a));if(!ye[j]){if(!A.extractEvents)throw Error(u(97,a));for(var P in ye[j]=A,j=A.eventTypes){var B=void 0,q=j[P],ne=A,ie=P;if(_e.hasOwnProperty(ie))throw Error(u(99,ie));_e[ie]=q;var oe=q.phasedRegistrationNames;if(oe){for(B in oe)oe.hasOwnProperty(B)&&ua(oe[B],ne,ie);B=!0}else q.registrationName?(ua(q.registrationName,ne,ie),B=!0):B=!1;if(!B)throw Error(u(98,P,a))}}}}function ua(a,A,j){if(we[a])throw Error(u(100,a));we[a]=A,ke[a]=A.eventTypes[j].dependencies}var ye=[],_e={},we={},ke={};function xa(a){var A,j=!1;for(A in a)if(a.hasOwnProperty(A)){var P=a[A];if(!ve.hasOwnProperty(A)||ve[A]!==P){if(ve[A])throw Error(u(102,A));ve[A]=P,j=!0}}j&&ra()}var Oe=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Se=null,Te=null,Ae=null;function Ca(a){if(a=pe(a)){if("function"!==typeof Se)throw Error(u(280));var A=a.stateNode;A&&(A=he(A),Se(a.stateNode,a.type,A))}}function Da(a){Te?Ae?Ae.push(a):Ae=[a]:Te=a}function Ea(){if(Te){var a=Te,A=Ae;if(Ae=Te=null,Ca(a),A)for(a=0;a<A.length;a++)Ca(A[a])}}function Fa(a,A){return a(A)}function Ga(a,A,j,P,B){return a(A,j,P,B)}function Ha(){}var je=Fa,Fe=!1,Re=!1;function La(){null===Te&&null===Ae||(Ha(),Ea())}function Ma(a,A,j){if(Re)return a(A,j);Re=!0;try{return je(a,A,j)}finally{Re=!1,La()}}var Me=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ne=Object.prototype.hasOwnProperty,Be={},Ue={};function v(a,A,j,P,B,q){this.acceptsBooleans=2===A||3===A||4===A,this.attributeName=P,this.attributeNamespace=B,this.mustUseProperty=j,this.propertyName=a,this.type=A,this.sanitizeURL=q}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(a){We[a]=new v(a,0,!1,a,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(a){var A=a[0];We[A]=new v(A,1,!1,a[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(a){We[a]=new v(a,2,!1,a.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(a){We[a]=new v(a,2,!1,a,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(a){We[a]=new v(a,3,!1,a.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(a){We[a]=new v(a,3,!0,a,null,!1)})),["capture","download"].forEach((function(a){We[a]=new v(a,4,!1,a,null,!1)})),["cols","rows","size","span"].forEach((function(a){We[a]=new v(a,6,!1,a,null,!1)})),["rowSpan","start"].forEach((function(a){We[a]=new v(a,5,!1,a.toLowerCase(),null,!1)}));var Ve=/[\-:]([a-z])/g;function Va(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(a){var A=a.replace(Ve,Va);We[A]=new v(A,1,!1,a,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(a){var A=a.replace(Ve,Va);We[A]=new v(A,1,!1,a,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(a){var A=a.replace(Ve,Va);We[A]=new v(A,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(a){We[a]=new v(a,1,!1,a.toLowerCase(),null,!1)})),We.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(a){We[a]=new v(a,1,!1,a.toLowerCase(),null,!0)}));var Ye=P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Xa(a,A,j,P){var B=We.hasOwnProperty(A)?We[A]:null;(null!==B?0===B.type:!P&&(2<A.length&&("o"===A[0]||"O"===A[0])&&("n"===A[1]||"N"===A[1])))||(function Ta(a,A,j,P){if(null===A||"undefined"===typeof A||function Sa(a,A,j,P){if(null!==j&&0===j.type)return!1;switch(typeof A){case"function":case"symbol":return!0;case"boolean":return!P&&(null!==j?!j.acceptsBooleans:"data-"!==(a=a.toLowerCase().slice(0,5))&&"aria-"!==a);default:return!1}}(a,A,j,P))return!0;if(P)return!1;if(null!==j)switch(j.type){case 3:return!A;case 4:return!1===A;case 5:return isNaN(A);case 6:return isNaN(A)||1>A}return!1}(A,j,B,P)&&(j=null),P||null===B?function Ra(a){return!!Ne.call(Ue,a)||!Ne.call(Be,a)&&(Me.test(a)?Ue[a]=!0:(Be[a]=!0,!1))}(A)&&(null===j?a.removeAttribute(A):a.setAttribute(A,""+j)):B.mustUseProperty?a[B.propertyName]=null===j?3!==B.type&&"":j:(A=B.attributeName,P=B.attributeNamespace,null===j?a.removeAttribute(A):(j=3===(B=B.type)||4===B&&!0===j?"":""+j,P?a.setAttributeNS(P,A,j):a.setAttribute(A,j))))}Ye.hasOwnProperty("ReactCurrentDispatcher")||(Ye.ReactCurrentDispatcher={current:null}),Ye.hasOwnProperty("ReactCurrentBatchConfig")||(Ye.ReactCurrentBatchConfig={suspense:null});var $e=/^(.*)[\\\/]/,Xe="function"===typeof Symbol&&Symbol.for,et=Xe?Symbol.for("react.element"):60103,tt=Xe?Symbol.for("react.portal"):60106,nt=Xe?Symbol.for("react.fragment"):60107,rt=Xe?Symbol.for("react.strict_mode"):60108,it=Xe?Symbol.for("react.profiler"):60114,at=Xe?Symbol.for("react.provider"):60109,ot=Xe?Symbol.for("react.context"):60110,st=Xe?Symbol.for("react.concurrent_mode"):60111,ut=Xe?Symbol.for("react.forward_ref"):60112,lt=Xe?Symbol.for("react.suspense"):60113,ct=Xe?Symbol.for("react.suspense_list"):60120,ft=Xe?Symbol.for("react.memo"):60115,dt=Xe?Symbol.for("react.lazy"):60116,ht=Xe?Symbol.for("react.block"):60121,pt="function"===typeof Symbol&&Symbol.iterator;function nb(a){return null===a||"object"!==typeof a?null:"function"===typeof(a=pt&&a[pt]||a["@@iterator"])?a:null}function pb(a){if(null==a)return null;if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case nt:return"Fragment";case tt:return"Portal";case it:return"Profiler";case rt:return"StrictMode";case lt:return"Suspense";case ct:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case ot:return"Context.Consumer";case at:return"Context.Provider";case ut:var A=a.render;return A=A.displayName||A.name||"",a.displayName||(""!==A?"ForwardRef("+A+")":"ForwardRef");case ft:return pb(a.type);case ht:return pb(a.render);case dt:if(a=1===a._status?a._result:null)return pb(a)}return null}function qb(a){var A="";do{e:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var j="";break e;default:var P=a._debugOwner,B=a._debugSource,q=pb(a.type);j=null,P&&(j=pb(P.type)),P=q,q="",B?q=" (at "+B.fileName.replace($e,"")+":"+B.lineNumber+")":j&&(q=" (created by "+j+")"),j="\n    in "+(P||"Unknown")+q}A+=j,a=a.return}while(a);return A}function rb(a){switch(typeof a){case"boolean":case"number":case"object":case"string":case"undefined":return a;default:return""}}function sb(a){var A=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===A||"radio"===A)}function xb(a){a._valueTracker||(a._valueTracker=function tb(a){var A=sb(a)?"checked":"value",j=Object.getOwnPropertyDescriptor(a.constructor.prototype,A),P=""+a[A];if(!a.hasOwnProperty(A)&&"undefined"!==typeof j&&"function"===typeof j.get&&"function"===typeof j.set){var B=j.get,q=j.set;return Object.defineProperty(a,A,{configurable:!0,get:function get(){return B.call(this)},set:function set(a){P=""+a,q.call(this,a)}}),Object.defineProperty(a,A,{enumerable:j.enumerable}),{getValue:function getValue(){return P},setValue:function setValue(a){P=""+a},stopTracking:function stopTracking(){a._valueTracker=null,delete a[A]}}}}(a))}function yb(a){if(!a)return!1;var A=a._valueTracker;if(!A)return!0;var j=A.getValue(),P="";return a&&(P=sb(a)?a.checked?"true":"false":a.value),(a=P)!==j&&(A.setValue(a),!0)}function zb(a,A){var j=A.checked;return B({},A,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=j?j:a._wrapperState.initialChecked})}function Ab(a,A){var j=null==A.defaultValue?"":A.defaultValue,P=null!=A.checked?A.checked:A.defaultChecked;j=rb(null!=A.value?A.value:j),a._wrapperState={initialChecked:P,initialValue:j,controlled:"checkbox"===A.type||"radio"===A.type?null!=A.checked:null!=A.value}}function Bb(a,A){null!=(A=A.checked)&&Xa(a,"checked",A,!1)}function Cb(a,A){Bb(a,A);var j=rb(A.value),P=A.type;if(null!=j)"number"===P?(0===j&&""===a.value||a.value!=j)&&(a.value=""+j):a.value!==""+j&&(a.value=""+j);else if("submit"===P||"reset"===P)return void a.removeAttribute("value");A.hasOwnProperty("value")?Db(a,A.type,j):A.hasOwnProperty("defaultValue")&&Db(a,A.type,rb(A.defaultValue)),null==A.checked&&null!=A.defaultChecked&&(a.defaultChecked=!!A.defaultChecked)}function Eb(a,A,j){if(A.hasOwnProperty("value")||A.hasOwnProperty("defaultValue")){var P=A.type;if(!("submit"!==P&&"reset"!==P||void 0!==A.value&&null!==A.value))return;A=""+a._wrapperState.initialValue,j||A===a.value||(a.value=A),a.defaultValue=A}""!==(j=a.name)&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,""!==j&&(a.name=j)}function Db(a,A,j){"number"===A&&a.ownerDocument.activeElement===a||(null==j?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+j&&(a.defaultValue=""+j))}function Gb(a,A){return a=B({children:void 0},A),(A=function Fb(a){var A="";return P.Children.forEach(a,(function(a){null!=a&&(A+=a)})),A}(A.children))&&(a.children=A),a}function Hb(a,A,j,P){if(a=a.options,A){A={};for(var B=0;B<j.length;B++)A["$"+j[B]]=!0;for(j=0;j<a.length;j++)B=A.hasOwnProperty("$"+a[j].value),a[j].selected!==B&&(a[j].selected=B),B&&P&&(a[j].defaultSelected=!0)}else{for(j=""+rb(j),A=null,B=0;B<a.length;B++){if(a[B].value===j)return a[B].selected=!0,void(P&&(a[B].defaultSelected=!0));null!==A||a[B].disabled||(A=a[B])}null!==A&&(A.selected=!0)}}function Ib(a,A){if(null!=A.dangerouslySetInnerHTML)throw Error(u(91));return B({},A,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Jb(a,A){var j=A.value;if(null==j){if(j=A.children,A=A.defaultValue,null!=j){if(null!=A)throw Error(u(92));if(Array.isArray(j)){if(!(1>=j.length))throw Error(u(93));j=j[0]}A=j}null==A&&(A=""),j=A}a._wrapperState={initialValue:rb(j)}}function Kb(a,A){var j=rb(A.value),P=rb(A.defaultValue);null!=j&&((j=""+j)!==a.value&&(a.value=j),null==A.defaultValue&&a.defaultValue!==j&&(a.defaultValue=j)),null!=P&&(a.defaultValue=""+P)}function Lb(a){var A=a.textContent;A===a._wrapperState.initialValue&&""!==A&&null!==A&&(a.value=A)}var gt="http://www.w3.org/1999/xhtml",mt="http://www.w3.org/2000/svg";function Nb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob(a,A){return null==a||"http://www.w3.org/1999/xhtml"===a?Nb(A):"http://www.w3.org/2000/svg"===a&&"foreignObject"===A?"http://www.w3.org/1999/xhtml":a}var vt,yt=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(A,j,P,B){MSApp.execUnsafeLocalFunction((function(){return a(A,j)}))}:a}((function(a,A){if(a.namespaceURI!==mt||"innerHTML"in a)a.innerHTML=A;else{for((vt=vt||document.createElement("div")).innerHTML="<svg>"+A.valueOf().toString()+"</svg>",A=vt.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;A.firstChild;)a.appendChild(A.firstChild)}}));function Rb(a,A){if(A){var j=a.firstChild;if(j&&j===a.lastChild&&3===j.nodeType)return void(j.nodeValue=A)}a.textContent=A}function Sb(a,A){var j={};return j[a.toLowerCase()]=A.toLowerCase(),j["Webkit"+a]="webkit"+A,j["Moz"+a]="moz"+A,j}var bt={animationend:Sb("Animation","AnimationEnd"),animationiteration:Sb("Animation","AnimationIteration"),animationstart:Sb("Animation","AnimationStart"),transitionend:Sb("Transition","TransitionEnd")},_t={},xt={};function Wb(a){if(_t[a])return _t[a];if(!bt[a])return a;var A,j=bt[a];for(A in j)if(j.hasOwnProperty(A)&&A in xt)return _t[a]=j[A];return a}Oe&&(xt=document.createElement("div").style,"AnimationEvent"in window||(delete bt.animationend.animation,delete bt.animationiteration.animation,delete bt.animationstart.animation),"TransitionEvent"in window||delete bt.transitionend.transition);var wt=Wb("animationend"),kt=Wb("animationiteration"),Ot=Wb("animationstart"),St=Wb("transitionend"),Et="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ct=new("function"===typeof WeakMap?WeakMap:Map);function cc(a){var A=Ct.get(a);return void 0===A&&(A=new Map,Ct.set(a,A)),A}function dc(a){var A=a,j=a;if(a.alternate)for(;A.return;)A=A.return;else{a=A;do{0!==(1026&(A=a).effectTag)&&(j=A.return),a=A.return}while(a)}return 3===A.tag?j:null}function ec(a){if(13===a.tag){var A=a.memoizedState;if(null===A&&(null!==(a=a.alternate)&&(A=a.memoizedState)),null!==A)return A.dehydrated}return null}function fc(a){if(dc(a)!==a)throw Error(u(188))}function hc(a){if(!(a=function gc(a){var A=a.alternate;if(!A){if(null===(A=dc(a)))throw Error(u(188));return A!==a?null:a}for(var j=a,P=A;;){var B=j.return;if(null===B)break;var q=B.alternate;if(null===q){if(null!==(P=B.return)){j=P;continue}break}if(B.child===q.child){for(q=B.child;q;){if(q===j)return fc(B),a;if(q===P)return fc(B),A;q=q.sibling}throw Error(u(188))}if(j.return!==P.return)j=B,P=q;else{for(var ne=!1,ie=B.child;ie;){if(ie===j){ne=!0,j=B,P=q;break}if(ie===P){ne=!0,P=B,j=q;break}ie=ie.sibling}if(!ne){for(ie=q.child;ie;){if(ie===j){ne=!0,j=q,P=B;break}if(ie===P){ne=!0,P=q,j=B;break}ie=ie.sibling}if(!ne)throw Error(u(189))}}if(j.alternate!==P)throw Error(u(190))}if(3!==j.tag)throw Error(u(188));return j.stateNode.current===j?a:A}(a)))return null;for(var A=a;;){if(5===A.tag||6===A.tag)return A;if(A.child)A.child.return=A,A=A.child;else{if(A===a)break;for(;!A.sibling;){if(!A.return||A.return===a)return null;A=A.return}A.sibling.return=A.return,A=A.sibling}}return null}function ic(a,A){if(null==A)throw Error(u(30));return null==a?A:Array.isArray(a)?Array.isArray(A)?(a.push.apply(a,A),a):(a.push(A),a):Array.isArray(A)?[a].concat(A):[a,A]}function jc(a,A,j){Array.isArray(a)?a.forEach(A,j):a&&A.call(j,a)}var Tt=null;function lc(a){if(a){var A=a._dispatchListeners,j=a._dispatchInstances;if(Array.isArray(A))for(var P=0;P<A.length&&!a.isPropagationStopped();P++)oa(a,A[P],j[P]);else A&&oa(a,A,j);a._dispatchListeners=null,a._dispatchInstances=null,a.isPersistent()||a.constructor.release(a)}}function mc(a){if(null!==a&&(Tt=ic(Tt,a)),a=Tt,Tt=null,a){if(jc(a,lc),Tt)throw Error(u(95));if(oe)throw a=se,oe=!1,se=null,a}}function nc(a){return(a=a.target||a.srcElement||window).correspondingUseElement&&(a=a.correspondingUseElement),3===a.nodeType?a.parentNode:a}function oc(a){if(!Oe)return!1;var A=(a="on"+a)in document;return A||((A=document.createElement("div")).setAttribute(a,"return;"),A="function"===typeof A[a]),A}var Dt=[];function qc(a){a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>Dt.length&&Dt.push(a)}function rc(a,A,j,P){if(Dt.length){var B=Dt.pop();return B.topLevelType=a,B.eventSystemFlags=P,B.nativeEvent=A,B.targetInst=j,B}return{topLevelType:a,eventSystemFlags:P,nativeEvent:A,targetInst:j,ancestors:[]}}function sc(a){var A=a.targetInst,j=A;do{if(!j){a.ancestors.push(j);break}var P=j;if(3===P.tag)P=P.stateNode.containerInfo;else{for(;P.return;)P=P.return;P=3!==P.tag?null:P.stateNode.containerInfo}if(!P)break;5!==(A=j.tag)&&6!==A||a.ancestors.push(j),j=tc(P)}while(j);for(j=0;j<a.ancestors.length;j++){A=a.ancestors[j];var B=nc(a.nativeEvent);P=a.topLevelType;var q=a.nativeEvent,ne=a.eventSystemFlags;0===j&&(ne|=64);for(var ie=null,oe=0;oe<ye.length;oe++){var se=ye[oe];se&&(se=se.extractEvents(P,A,q,B,ne))&&(ie=ic(ie,se))}mc(ie)}}function uc(a,A,j){if(!j.has(a)){switch(a){case"scroll":vc(A,"scroll",!0);break;case"focus":case"blur":vc(A,"focus",!0),vc(A,"blur",!0),j.set("blur",null),j.set("focus",null);break;case"cancel":case"close":oc(a)&&vc(A,a,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Et.indexOf(a)&&F(a,A)}j.set(a,null)}}var At,jt,Ft,Pt=!1,Rt=[],Mt=null,Lt=null,It=null,Nt=new Map,Bt=new Map,Ut=[],zt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),qt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Kc(a,A,j,P,B){return{blockedOn:a,topLevelType:A,eventSystemFlags:32|j,nativeEvent:B,container:P}}function Lc(a,A){switch(a){case"focus":case"blur":Mt=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Nt.delete(A.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bt.delete(A.pointerId)}}function Mc(a,A,j,P,B,q){return null===a||a.nativeEvent!==q?(a=Kc(A,j,P,B,q),null!==A&&(null!==(A=Nc(A))&&jt(A)),a):(a.eventSystemFlags|=P,a)}function Pc(a){var A=tc(a.target);if(null!==A){var j=dc(A);if(null!==j)if(13===(A=j.tag)){if(null!==(A=ec(j)))return a.blockedOn=A,void q.unstable_runWithPriority(a.priority,(function(){Ft(j)}))}else if(3===A&&j.stateNode.hydrate)return void(a.blockedOn=3===j.tag?j.stateNode.containerInfo:null)}a.blockedOn=null}function Qc(a){if(null!==a.blockedOn)return!1;var A=Rc(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==A){var j=Nc(A);return null!==j&&jt(j),a.blockedOn=A,!1}return!0}function Sc(a,A,j){Qc(a)&&j.delete(A)}function Tc(){for(Pt=!1;0<Rt.length;){var a=Rt[0];if(null!==a.blockedOn){null!==(a=Nc(a.blockedOn))&&At(a);break}var A=Rc(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==A?a.blockedOn=A:Rt.shift()}null!==Mt&&Qc(Mt)&&(Mt=null),null!==Lt&&Qc(Lt)&&(Lt=null),null!==It&&Qc(It)&&(It=null),Nt.forEach(Sc),Bt.forEach(Sc)}function Uc(a,A){a.blockedOn===A&&(a.blockedOn=null,Pt||(Pt=!0,q.unstable_scheduleCallback(q.unstable_NormalPriority,Tc)))}function Vc(a){function b(A){return Uc(A,a)}if(0<Rt.length){Uc(Rt[0],a);for(var A=1;A<Rt.length;A++){var j=Rt[A];j.blockedOn===a&&(j.blockedOn=null)}}for(null!==Mt&&Uc(Mt,a),null!==Lt&&Uc(Lt,a),null!==It&&Uc(It,a),Nt.forEach(b),Bt.forEach(b),A=0;A<Ut.length;A++)(j=Ut[A]).blockedOn===a&&(j.blockedOn=null);for(;0<Ut.length&&null===(A=Ut[0]).blockedOn;)Pc(A),null===A.blockedOn&&Ut.shift()}var Wt={},Ht=new Map,Gt=new Map,Vt=["abort","abort",wt,"animationEnd",kt,"animationIteration",Ot,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",St,"transitionEnd","waiting","waiting"];function ad(a,A){for(var j=0;j<a.length;j+=2){var P=a[j],B=a[j+1],q="on"+(B[0].toUpperCase()+B.slice(1));q={phasedRegistrationNames:{bubbled:q,captured:q+"Capture"},dependencies:[P],eventPriority:A},Gt.set(P,A),Ht.set(P,q),Wt[B]=q}}ad("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),ad("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),ad(Vt,2);for(var Yt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),$t=0;$t<Yt.length;$t++)Gt.set(Yt[$t],0);var Kt=q.unstable_UserBlockingPriority,Xt=q.unstable_runWithPriority,Jt=!0;function F(a,A){vc(A,a,!1)}function vc(a,A,j){var P=Gt.get(A);switch(void 0===P?2:P){case 0:P=gd.bind(null,A,1,a);break;case 1:P=hd.bind(null,A,1,a);break;default:P=id.bind(null,A,1,a)}j?a.addEventListener(A,P,!0):a.addEventListener(A,P,!1)}function gd(a,A,j,P){Fe||Ha();var B=id,q=Fe;Fe=!0;try{Ga(B,a,A,j,P)}finally{(Fe=q)||La()}}function hd(a,A,j,P){Xt(Kt,id.bind(null,a,A,j,P))}function id(a,A,j,P){if(Jt)if(0<Rt.length&&-1<zt.indexOf(a))a=Kc(null,a,A,j,P),Rt.push(a);else{var B=Rc(a,A,j,P);if(null===B)Lc(a,P);else if(-1<zt.indexOf(a))a=Kc(B,a,A,j,P),Rt.push(a);else if(!function Oc(a,A,j,P,B){switch(A){case"focus":return Mt=Mc(Mt,a,A,j,P,B),!0;case"dragenter":return Lt=Mc(Lt,a,A,j,P,B),!0;case"mouseover":return It=Mc(It,a,A,j,P,B),!0;case"pointerover":var q=B.pointerId;return Nt.set(q,Mc(Nt.get(q)||null,a,A,j,P,B)),!0;case"gotpointercapture":return q=B.pointerId,Bt.set(q,Mc(Bt.get(q)||null,a,A,j,P,B)),!0}return!1}(B,a,A,j,P)){Lc(a,P),a=rc(a,P,null,A);try{Ma(sc,a)}finally{qc(a)}}}}function Rc(a,A,j,P){if(null!==(j=tc(j=nc(P)))){var B=dc(j);if(null===B)j=null;else{var q=B.tag;if(13===q){if(null!==(j=ec(B)))return j;j=null}else if(3===q){if(B.stateNode.hydrate)return 3===B.tag?B.stateNode.containerInfo:null;j=null}else B!==j&&(j=null)}}a=rc(a,P,j,A);try{Ma(sc,a)}finally{qc(a)}return null}var Qt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zt=["Webkit","ms","Moz","O"];function ld(a,A,j){return null==A||"boolean"===typeof A||""===A?"":j||"number"!==typeof A||0===A||Qt.hasOwnProperty(a)&&Qt[a]?(""+A).trim():A+"px"}function md(a,A){for(var j in a=a.style,A)if(A.hasOwnProperty(j)){var P=0===j.indexOf("--"),B=ld(j,A[j],P);"float"===j&&(j="cssFloat"),P?a.setProperty(j,B):a[j]=B}}Object.keys(Qt).forEach((function(a){Zt.forEach((function(A){A=A+a.charAt(0).toUpperCase()+a.substring(1),Qt[A]=Qt[a]}))}));var en=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(a,A){if(A){if(en[a]&&(null!=A.children||null!=A.dangerouslySetInnerHTML))throw Error(u(137,a,""));if(null!=A.dangerouslySetInnerHTML){if(null!=A.children)throw Error(u(60));if("object"!==typeof A.dangerouslySetInnerHTML||!("__html"in A.dangerouslySetInnerHTML))throw Error(u(61))}if(null!=A.style&&"object"!==typeof A.style)throw Error(u(62,""))}}function pd(a,A){if(-1===a.indexOf("-"))return"string"===typeof A.is;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tn=gt;function rd(a,A){var j=cc(a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument);A=ke[A];for(var P=0;P<A.length;P++)uc(A[P],a,j)}function sd(){}function td(a){if("undefined"===typeof(a=a||("undefined"!==typeof document?document:void 0)))return null;try{return a.activeElement||a.body}catch(A){return a.body}}function ud(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function vd(a,A){var j,P=ud(a);for(a=0;P;){if(3===P.nodeType){if(j=a+P.textContent.length,a<=A&&j>=A)return{node:P,offset:A-a};a=j}e:{for(;P;){if(P.nextSibling){P=P.nextSibling;break e}P=P.parentNode}P=void 0}P=ud(P)}}function xd(){for(var a=window,A=td();A instanceof a.HTMLIFrameElement;){try{var j="string"===typeof A.contentWindow.location.href}catch(P){j=!1}if(!j)break;A=td((a=A.contentWindow).document)}return A}function yd(a){var A=a&&a.nodeName&&a.nodeName.toLowerCase();return A&&("input"===A&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===A||"true"===a.contentEditable)}var nn=null,rn=null;function Fd(a,A){switch(a){case"button":case"input":case"select":case"textarea":return!!A.autoFocus}return!1}function Gd(a,A){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof A.children||"number"===typeof A.children||"object"===typeof A.dangerouslySetInnerHTML&&null!==A.dangerouslySetInnerHTML&&null!=A.dangerouslySetInnerHTML.__html}var an="function"===typeof setTimeout?setTimeout:void 0,sn="function"===typeof clearTimeout?clearTimeout:void 0;function Jd(a){for(;null!=a;a=a.nextSibling){var A=a.nodeType;if(1===A||3===A)break}return a}function Kd(a){a=a.previousSibling;for(var A=0;a;){if(8===a.nodeType){var j=a.data;if("$"===j||"$!"===j||"$?"===j){if(0===A)return a;A--}else"/$"===j&&A++}a=a.previousSibling}return null}var un=Math.random().toString(36).slice(2),ln="__reactInternalInstance$"+un,cn="__reactEventHandlers$"+un,dn="__reactContainere$"+un;function tc(a){var A=a[ln];if(A)return A;for(var j=a.parentNode;j;){if(A=j[dn]||j[ln]){if(j=A.alternate,null!==A.child||null!==j&&null!==j.child)for(a=Kd(a);null!==a;){if(j=a[ln])return j;a=Kd(a)}return A}j=(a=j).parentNode}return null}function Nc(a){return!(a=a[ln]||a[dn])||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pd(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(u(33))}function Qd(a){return a[cn]||null}function Rd(a){do{a=a.return}while(a&&5!==a.tag);return a||null}function Sd(a,A){var j=a.stateNode;if(!j)return null;var P=he(j);if(!P)return null;j=P[A];e:switch(A){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(P=!("button"===(a=a.type)||"input"===a||"select"===a||"textarea"===a)),a=!P;break e;default:a=!1}if(a)return null;if(j&&"function"!==typeof j)throw Error(u(231,A,typeof j));return j}function Td(a,A,j){(A=Sd(a,j.dispatchConfig.phasedRegistrationNames[A]))&&(j._dispatchListeners=ic(j._dispatchListeners,A),j._dispatchInstances=ic(j._dispatchInstances,a))}function Ud(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var A=a._targetInst,j=[];A;)j.push(A),A=Rd(A);for(A=j.length;0<A--;)Td(j[A],"captured",a);for(A=0;A<j.length;A++)Td(j[A],"bubbled",a)}}function Vd(a,A,j){a&&j&&j.dispatchConfig.registrationName&&(A=Sd(a,j.dispatchConfig.registrationName))&&(j._dispatchListeners=ic(j._dispatchListeners,A),j._dispatchInstances=ic(j._dispatchInstances,a))}function Wd(a){a&&a.dispatchConfig.registrationName&&Vd(a._targetInst,null,a)}function Xd(a){jc(a,Ud)}var hn=null,pn=null,gn=null;function ae(){if(gn)return gn;var a,A,j=pn,P=j.length,B="value"in hn?hn.value:hn.textContent,q=B.length;for(a=0;a<P&&j[a]===B[a];a++);var ne=P-a;for(A=1;A<=ne&&j[P-A]===B[q-A];A++);return gn=B.slice(a,1<A?1-A:void 0)}function be(){return!0}function ce(){return!1}function G(a,A,j,P){for(var B in this.dispatchConfig=a,this._targetInst=A,this.nativeEvent=j,a=this.constructor.Interface)a.hasOwnProperty(B)&&((A=a[B])?this[B]=A(j):"target"===B?this.target=P:this[B]=j[B]);return this.isDefaultPrevented=(null!=j.defaultPrevented?j.defaultPrevented:!1===j.returnValue)?be:ce,this.isPropagationStopped=ce,this}function ee(a,A,j,P){if(this.eventPool.length){var B=this.eventPool.pop();return this.call(B,a,A,j,P),B}return new this(a,A,j,P)}function fe(a){if(!(a instanceof this))throw Error(u(279));a.destructor(),10>this.eventPool.length&&this.eventPool.push(a)}function de(a){a.eventPool=[],a.getPooled=ee,a.release=fe}B(G.prototype,{preventDefault:function preventDefault(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=be)},stopPropagation:function stopPropagation(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=be)},persist:function persist(){this.isPersistent=be},isPersistent:ce,destructor:function destructor(){var a,A=this.constructor.Interface;for(a in A)this[a]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce,this._dispatchInstances=this._dispatchListeners=null}}),G.Interface={type:null,target:null,currentTarget:function currentTarget(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function timeStamp(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},G.extend=function(a){function b(){}function c(){return A.apply(this,arguments)}var A=this;b.prototype=A.prototype;var j=new b;return B(j,c.prototype),c.prototype=j,c.prototype.constructor=c,c.Interface=B({},A.Interface,a),c.extend=A.extend,de(c),c},de(G);var mn=G.extend({data:null}),vn=G.extend({data:null}),yn=[9,13,27,32],bn=Oe&&"CompositionEvent"in window,_n=null;Oe&&"documentMode"in document&&(_n=document.documentMode);var xn=Oe&&"TextEvent"in window&&!_n,wn=Oe&&(!bn||_n&&8<_n&&11>=_n),kn=String.fromCharCode(32),On={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Sn=!1;function qe(a,A){switch(a){case"keyup":return-1!==yn.indexOf(A.keyCode);case"keydown":return 229!==A.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function re(a){return"object"===typeof(a=a.detail)&&"data"in a?a.data:null}var En=!1;var Cn={eventTypes:On,extractEvents:function extractEvents(a,A,j,P){var B;if(bn)e:{switch(a){case"compositionstart":var q=On.compositionStart;break e;case"compositionend":q=On.compositionEnd;break e;case"compositionupdate":q=On.compositionUpdate;break e}q=void 0}else En?qe(a,j)&&(q=On.compositionEnd):"keydown"===a&&229===j.keyCode&&(q=On.compositionStart);return q?(wn&&"ko"!==j.locale&&(En||q!==On.compositionStart?q===On.compositionEnd&&En&&(B=ae()):(pn="value"in(hn=P)?hn.value:hn.textContent,En=!0)),q=mn.getPooled(q,A,j,P),B?q.data=B:null!==(B=re(j))&&(q.data=B),Xd(q),B=q):B=null,(a=xn?function te(a,A){switch(a){case"compositionend":return re(A);case"keypress":return 32!==A.which?null:(Sn=!0,kn);case"textInput":return(a=A.data)===kn&&Sn?null:a;default:return null}}(a,j):function ue(a,A){if(En)return"compositionend"===a||!bn&&qe(a,A)?(a=ae(),gn=pn=hn=null,En=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(A.ctrlKey||A.altKey||A.metaKey)||A.ctrlKey&&A.altKey){if(A.char&&1<A.char.length)return A.char;if(A.which)return String.fromCharCode(A.which)}return null;case"compositionend":return wn&&"ko"!==A.locale?null:A.data;default:return null}}(a,j))?((A=vn.getPooled(On.beforeInput,A,j,P)).data=a,Xd(A)):A=null,null===B?A:null===A?B:[B,A]}},Tn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe(a){var A=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===A?!!Tn[a.type]:"textarea"===A}var Dn={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ze(a,A,j){return(a=G.getPooled(Dn.change,a,A,j)).type="change",Da(j),Xd(a),a}var An=null,jn=null;function Ce(a){mc(a)}function De(a){if(yb(Pd(a)))return a}function Ee(a,A){if("change"===a)return A}var Fn=!1;function Ge(){An&&(An.detachEvent("onpropertychange",He),jn=An=null)}function He(a){if("value"===a.propertyName&&De(jn))if(a=ze(jn,a,nc(a)),Fe)mc(a);else{Fe=!0;try{Fa(Ce,a)}finally{Fe=!1,La()}}}function Ie(a,A,j){"focus"===a?(Ge(),jn=j,(An=A).attachEvent("onpropertychange",He)):"blur"===a&&Ge()}function Je(a){if("selectionchange"===a||"keyup"===a||"keydown"===a)return De(jn)}function Ke(a,A){if("click"===a)return De(A)}function Le(a,A){if("input"===a||"change"===a)return De(A)}Oe&&(Fn=oc("input")&&(!document.documentMode||9<document.documentMode));var Pn={eventTypes:Dn,_isInputEventSupported:Fn,extractEvents:function extractEvents(a,A,j,P){var B=A?Pd(A):window,q=B.nodeName&&B.nodeName.toLowerCase();if("select"===q||"input"===q&&"file"===B.type)var ne=Ee;else if(xe(B))if(Fn)ne=Le;else{ne=Je;var ie=Ie}else(q=B.nodeName)&&"input"===q.toLowerCase()&&("checkbox"===B.type||"radio"===B.type)&&(ne=Ke);if(ne&&(ne=ne(a,A)))return ze(ne,j,P);ie&&ie(a,B,A),"blur"===a&&(a=B._wrapperState)&&a.controlled&&"number"===B.type&&Db(B,"number",B.value)}},Rn=G.extend({view:null,detail:null}),Mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pe(a){var A=this.nativeEvent;return A.getModifierState?A.getModifierState(a):!!(a=Mn[a])&&!!A[a]}function Qe(){return Pe}var Ln=0,In=0,Nn=!1,Bn=!1,Un=Rn.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe,button:null,buttons:null,relatedTarget:function relatedTarget(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function movementX(a){if("movementX"in a)return a.movementX;var A=Ln;return Ln=a.screenX,Nn?"mousemove"===a.type?a.screenX-A:0:(Nn=!0,0)},movementY:function movementY(a){if("movementY"in a)return a.movementY;var A=In;return In=a.screenY,Bn?"mousemove"===a.type?a.screenY-A:0:(Bn=!0,0)}}),zn=Un.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),qn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Wn={eventTypes:qn,extractEvents:function extractEvents(a,A,j,P,B){var q="mouseover"===a||"pointerover"===a,ne="mouseout"===a||"pointerout"===a;if(q&&0===(32&B)&&(j.relatedTarget||j.fromElement)||!ne&&!q)return null;(q=P.window===P?P:(q=P.ownerDocument)?q.defaultView||q.parentWindow:window,ne)?(ne=A,null!==(A=(A=j.relatedTarget||j.toElement)?tc(A):null)&&(A!==dc(A)||5!==A.tag&&6!==A.tag)&&(A=null)):ne=null;if(ne===A)return null;if("mouseout"===a||"mouseover"===a)var ie=Un,oe=qn.mouseLeave,se=qn.mouseEnter,le="mouse";else"pointerout"!==a&&"pointerover"!==a||(ie=zn,oe=qn.pointerLeave,se=qn.pointerEnter,le="pointer");if(a=null==ne?q:Pd(ne),q=null==A?q:Pd(A),(oe=ie.getPooled(oe,ne,j,P)).type=le+"leave",oe.target=a,oe.relatedTarget=q,(j=ie.getPooled(se,A,j,P)).type=le+"enter",j.target=q,j.relatedTarget=a,le=A,(P=ne)&&le)e:{for(se=le,ne=0,a=ie=P;a;a=Rd(a))ne++;for(a=0,A=se;A;A=Rd(A))a++;for(;0<ne-a;)ie=Rd(ie),ne--;for(;0<a-ne;)se=Rd(se),a--;for(;ne--;){if(ie===se||ie===se.alternate)break e;ie=Rd(ie),se=Rd(se)}ie=null}else ie=null;for(se=ie,ie=[];P&&P!==se&&(null===(ne=P.alternate)||ne!==se);)ie.push(P),P=Rd(P);for(P=[];le&&le!==se&&(null===(ne=le.alternate)||ne!==se);)P.push(le),le=Rd(le);for(le=0;le<ie.length;le++)Vd(ie[le],"bubbled",oe);for(le=P.length;0<le--;)Vd(P[le],"captured",j);return 0===(64&B)?[oe]:[oe,j]}};var Hn="function"===typeof Object.is?Object.is:function Ze(a,A){return a===A&&(0!==a||1/a===1/A)||a!==a&&A!==A},Gn=Object.prototype.hasOwnProperty;function bf(a,A){if(Hn(a,A))return!0;if("object"!==typeof a||null===a||"object"!==typeof A||null===A)return!1;var j=Object.keys(a),P=Object.keys(A);if(j.length!==P.length)return!1;for(P=0;P<j.length;P++)if(!Gn.call(A,j[P])||!Hn(a[j[P]],A[j[P]]))return!1;return!0}var Vn=Oe&&"documentMode"in document&&11>=document.documentMode,Yn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},$n=null,Kn=null,Xn=null,Jn=!1;function jf(a,A){var j=A.window===A?A.document:9===A.nodeType?A:A.ownerDocument;return Jn||null==$n||$n!==td(j)?null:("selectionStart"in(j=$n)&&yd(j)?j={start:j.selectionStart,end:j.selectionEnd}:j={anchorNode:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset},Xn&&bf(Xn,j)?null:(Xn=j,(a=G.getPooled(Yn.select,Kn,a,A)).type="select",a.target=$n,Xd(a),a))}var Qn={eventTypes:Yn,extractEvents:function extractEvents(a,A,j,P,B,q){if(!(q=!(B=q||(P.window===P?P.document:9===P.nodeType?P:P.ownerDocument)))){e:{B=cc(B),q=ke.onSelect;for(var ne=0;ne<q.length;ne++)if(!B.has(q[ne])){B=!1;break e}B=!0}q=!B}if(q)return null;switch(B=A?Pd(A):window,a){case"focus":(xe(B)||"true"===B.contentEditable)&&($n=B,Kn=A,Xn=null);break;case"blur":Xn=Kn=$n=null;break;case"mousedown":Jn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Jn=!1,jf(j,P);case"selectionchange":if(Vn)break;case"keydown":case"keyup":return jf(j,P)}return null}},Zn=G.extend({animationName:null,elapsedTime:null,pseudoElement:null}),er=G.extend({clipboardData:function clipboardData(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),nr=Rn.extend({relatedTarget:null});function of(a){var A=a.keyCode;return"charCode"in a?0===(a=a.charCode)&&13===A&&(a=13):a=A,10===a&&(a=13),32<=a||13===a?a:0}var rr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ar={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sr=Rn.extend({key:function key(a){if(a.key){var A=rr[a.key]||a.key;if("Unidentified"!==A)return A}return"keypress"===a.type?13===(a=of(a))?"Enter":String.fromCharCode(a):"keydown"===a.type||"keyup"===a.type?ar[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe,charCode:function charCode(a){return"keypress"===a.type?of(a):0},keyCode:function keyCode(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function which(a){return"keypress"===a.type?of(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),ur=Un.extend({dataTransfer:null}),lr=Rn.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe}),fr=G.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),dr=Un.extend({deltaX:function deltaX(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function deltaY(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),hr={eventTypes:Wt,extractEvents:function extractEvents(a,A,j,P){var B=Ht.get(a);if(!B)return null;switch(a){case"keypress":if(0===of(j))return null;case"keydown":case"keyup":a=sr;break;case"blur":case"focus":a=nr;break;case"click":if(2===j.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=Un;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=ur;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=lr;break;case wt:case kt:case Ot:a=Zn;break;case St:a=fr;break;case"scroll":a=Rn;break;case"wheel":a=dr;break;case"copy":case"cut":case"paste":a=er;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=zn;break;default:a=G}return Xd(A=a.getPooled(B,A,j,P)),A}};if(me)throw Error(u(101));me=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),ra(),he=Qd,pe=Nc,ge=Pd,xa({SimpleEventPlugin:hr,EnterLeaveEventPlugin:Wn,ChangeEventPlugin:Pn,SelectEventPlugin:Qn,BeforeInputEventPlugin:Cn});var pr=[],gr=-1;function H(a){0>gr||(a.current=pr[gr],pr[gr]=null,gr--)}function I(a,A){gr++,pr[gr]=a.current,a.current=A}var mr={},vr={current:mr},yr={current:!1},_r=mr;function Cf(a,A){var j=a.type.contextTypes;if(!j)return mr;var P=a.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===A)return P.__reactInternalMemoizedMaskedChildContext;var B,q={};for(B in j)q[B]=A[B];return P&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=A,a.__reactInternalMemoizedMaskedChildContext=q),q}function L(a){return null!==(a=a.childContextTypes)&&void 0!==a}function Df(){H(yr),H(vr)}function Ef(a,A,j){if(vr.current!==mr)throw Error(u(168));I(vr,A),I(yr,j)}function Ff(a,A,j){var P=a.stateNode;if(a=A.childContextTypes,"function"!==typeof P.getChildContext)return j;for(var q in P=P.getChildContext())if(!(q in a))throw Error(u(108,pb(A)||"Unknown",q));return B({},j,{},P)}function Gf(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||mr,_r=vr.current,I(vr,a),I(yr,yr.current),!0}function Hf(a,A,j){var P=a.stateNode;if(!P)throw Error(u(169));j?(a=Ff(a,A,_r),P.__reactInternalMemoizedMergedChildContext=a,H(yr),H(vr),I(vr,a)):H(yr),I(yr,j)}var xr=q.unstable_runWithPriority,wr=q.unstable_scheduleCallback,kr=q.unstable_cancelCallback,Or=q.unstable_requestPaint,Sr=q.unstable_now,Er=q.unstable_getCurrentPriorityLevel,Cr=q.unstable_ImmediatePriority,Tr=q.unstable_UserBlockingPriority,Dr=q.unstable_NormalPriority,Ar=q.unstable_LowPriority,jr=q.unstable_IdlePriority,Fr={},Pr=q.unstable_shouldYield,Rr=void 0!==Or?Or:function(){},Mr=null,Lr=null,Ir=!1,Nr=Sr(),Br=1e4>Nr?Sr:function(){return Sr()-Nr};function ag(){switch(Er()){case Cr:return 99;case Tr:return 98;case Dr:return 97;case Ar:return 96;case jr:return 95;default:throw Error(u(332))}}function bg(a){switch(a){case 99:return Cr;case 98:return Tr;case 97:return Dr;case 96:return Ar;case 95:return jr;default:throw Error(u(332))}}function cg(a,A){return a=bg(a),xr(a,A)}function dg(a,A,j){return a=bg(a),wr(a,A,j)}function eg(a){return null===Mr?(Mr=[a],Lr=wr(Cr,fg)):Mr.push(a),Fr}function gg(){if(null!==Lr){var a=Lr;Lr=null,kr(a)}fg()}function fg(){if(!Ir&&null!==Mr){Ir=!0;var a=0;try{var A=Mr;cg(99,(function(){for(;a<A.length;a++){var j=A[a];do{j=j(!0)}while(null!==j)}})),Mr=null}catch(j){throw null!==Mr&&(Mr=Mr.slice(a+1)),wr(Cr,gg),j}finally{Ir=!1}}}function hg(a,A,j){return 1073741821-(1+((1073741821-a+A/10)/(j/=10)|0))*j}function ig(a,A){if(a&&a.defaultProps)for(var j in A=B({},A),a=a.defaultProps)void 0===A[j]&&(A[j]=a[j]);return A}var Ur={current:null},zr=null,qr=null,Wr=null;function ng(){Wr=qr=zr=null}function og(a){var A=Ur.current;H(Ur),a.type._context._currentValue=A}function pg(a,A){for(;null!==a;){var j=a.alternate;if(a.childExpirationTime<A)a.childExpirationTime=A,null!==j&&j.childExpirationTime<A&&(j.childExpirationTime=A);else{if(!(null!==j&&j.childExpirationTime<A))break;j.childExpirationTime=A}a=a.return}}function qg(a,A){zr=a,Wr=qr=null,null!==(a=a.dependencies)&&null!==a.firstContext&&(a.expirationTime>=A&&(da=!0),a.firstContext=null)}function sg(a,A){if(Wr!==a&&!1!==A&&0!==A)if("number"===typeof A&&1073741823!==A||(Wr=a,A=1073741823),A={context:a,observedBits:A,next:null},null===qr){if(null===zr)throw Error(u(308));qr=A,zr.dependencies={expirationTime:0,firstContext:A,responders:null}}else qr=qr.next=A;return a._currentValue}var Hr=!1;function ug(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function vg(a,A){a=a.updateQueue,A.updateQueue===a&&(A.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function wg(a,A){return(a={expirationTime:a,suspenseConfig:A,tag:0,payload:null,callback:null,next:null}).next=a}function xg(a,A){if(null!==(a=a.updateQueue)){var j=(a=a.shared).pending;null===j?A.next=A:(A.next=j.next,j.next=A),a.pending=A}}function yg(a,A){var j=a.alternate;null!==j&&vg(j,a),null===(j=(a=a.updateQueue).baseQueue)?(a.baseQueue=A.next=A,A.next=A):(A.next=j.next,j.next=A)}function zg(a,A,j,P){var q=a.updateQueue;Hr=!1;var ne=q.baseQueue,ie=q.shared.pending;if(null!==ie){if(null!==ne){var oe=ne.next;ne.next=ie.next,ie.next=oe}ne=ie,q.shared.pending=null,null!==(oe=a.alternate)&&(null!==(oe=oe.updateQueue)&&(oe.baseQueue=ie))}if(null!==ne){oe=ne.next;var se=q.baseState,le=0,he=null,pe=null,ge=null;if(null!==oe)for(var me=oe;;){if((ie=me.expirationTime)<P){var ve={expirationTime:me.expirationTime,suspenseConfig:me.suspenseConfig,tag:me.tag,payload:me.payload,callback:me.callback,next:null};null===ge?(pe=ge=ve,he=se):ge=ge.next=ve,ie>le&&(le=ie)}else{null!==ge&&(ge=ge.next={expirationTime:1073741823,suspenseConfig:me.suspenseConfig,tag:me.tag,payload:me.payload,callback:me.callback,next:null}),Ag(ie,me.suspenseConfig);e:{var ye=a,_e=me;switch(ie=A,ve=j,_e.tag){case 1:if("function"===typeof(ye=_e.payload)){se=ye.call(ve,se,ie);break e}se=ye;break e;case 3:ye.effectTag=-4097&ye.effectTag|64;case 0:if(null===(ie="function"===typeof(ye=_e.payload)?ye.call(ve,se,ie):ye)||void 0===ie)break e;se=B({},se,ie);break e;case 2:Hr=!0}}null!==me.callback&&(a.effectTag|=32,null===(ie=q.effects)?q.effects=[me]:ie.push(me))}if(null===(me=me.next)||me===oe){if(null===(ie=q.shared.pending))break;me=ne.next=ie.next,ie.next=oe,q.baseQueue=ne=ie,q.shared.pending=null}}null===ge?he=se:ge.next=pe,q.baseState=he,q.baseQueue=ge,Bg(le),a.expirationTime=le,a.memoizedState=se}}function Cg(a,A,j){if(a=A.effects,A.effects=null,null!==a)for(A=0;A<a.length;A++){var P=a[A],B=P.callback;if(null!==B){if(P.callback=null,P=B,B=j,"function"!==typeof P)throw Error(u(191,P));P.call(B)}}}var Gr=Ye.ReactCurrentBatchConfig,Vr=(new P.Component).refs;function Fg(a,A,j,P){j=null===(j=j(P,A=a.memoizedState))||void 0===j?A:B({},A,j),a.memoizedState=j,0===a.expirationTime&&(a.updateQueue.baseState=j)}var Yr={isMounted:function isMounted(a){return!!(a=a._reactInternalFiber)&&dc(a)===a},enqueueSetState:function enqueueSetState(a,A,j){a=a._reactInternalFiber;var P=Gg(),B=Gr.suspense;(B=wg(P=Hg(P,a,B),B)).payload=A,void 0!==j&&null!==j&&(B.callback=j),xg(a,B),Ig(a,P)},enqueueReplaceState:function enqueueReplaceState(a,A,j){a=a._reactInternalFiber;var P=Gg(),B=Gr.suspense;(B=wg(P=Hg(P,a,B),B)).tag=1,B.payload=A,void 0!==j&&null!==j&&(B.callback=j),xg(a,B),Ig(a,P)},enqueueForceUpdate:function enqueueForceUpdate(a,A){a=a._reactInternalFiber;var j=Gg(),P=Gr.suspense;(P=wg(j=Hg(j,a,P),P)).tag=2,void 0!==A&&null!==A&&(P.callback=A),xg(a,P),Ig(a,j)}};function Kg(a,A,j,P,B,q,ne){return"function"===typeof(a=a.stateNode).shouldComponentUpdate?a.shouldComponentUpdate(P,q,ne):!A.prototype||!A.prototype.isPureReactComponent||(!bf(j,P)||!bf(B,q))}function Lg(a,A,j){var P=!1,B=mr,q=A.contextType;return"object"===typeof q&&null!==q?q=sg(q):(B=L(A)?_r:vr.current,q=(P=null!==(P=A.contextTypes)&&void 0!==P)?Cf(a,B):mr),A=new A(j,q),a.memoizedState=null!==A.state&&void 0!==A.state?A.state:null,A.updater=Yr,a.stateNode=A,A._reactInternalFiber=a,P&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=B,a.__reactInternalMemoizedMaskedChildContext=q),A}function Mg(a,A,j,P){a=A.state,"function"===typeof A.componentWillReceiveProps&&A.componentWillReceiveProps(j,P),"function"===typeof A.UNSAFE_componentWillReceiveProps&&A.UNSAFE_componentWillReceiveProps(j,P),A.state!==a&&Yr.enqueueReplaceState(A,A.state,null)}function Ng(a,A,j,P){var B=a.stateNode;B.props=j,B.state=a.memoizedState,B.refs=Vr,ug(a);var q=A.contextType;"object"===typeof q&&null!==q?B.context=sg(q):(q=L(A)?_r:vr.current,B.context=Cf(a,q)),zg(a,j,B,P),B.state=a.memoizedState,"function"===typeof(q=A.getDerivedStateFromProps)&&(Fg(a,A,q,j),B.state=a.memoizedState),"function"===typeof A.getDerivedStateFromProps||"function"===typeof B.getSnapshotBeforeUpdate||"function"!==typeof B.UNSAFE_componentWillMount&&"function"!==typeof B.componentWillMount||(A=B.state,"function"===typeof B.componentWillMount&&B.componentWillMount(),"function"===typeof B.UNSAFE_componentWillMount&&B.UNSAFE_componentWillMount(),A!==B.state&&Yr.enqueueReplaceState(B,B.state,null),zg(a,j,B,P),B.state=a.memoizedState),"function"===typeof B.componentDidMount&&(a.effectTag|=4)}var $r=Array.isArray;function Pg(a,A,j){if(null!==(a=j.ref)&&"function"!==typeof a&&"object"!==typeof a){if(j._owner){if(j=j._owner){if(1!==j.tag)throw Error(u(309));var P=j.stateNode}if(!P)throw Error(u(147,a));var B=""+a;return null!==A&&null!==A.ref&&"function"===typeof A.ref&&A.ref._stringRef===B?A.ref:((A=function b(a){var b=P.refs;b===Vr&&(b=P.refs={}),null===a?delete b[B]:b[B]=a})._stringRef=B,A)}if("string"!==typeof a)throw Error(u(284));if(!j._owner)throw Error(u(290,a))}return a}function Qg(a,A){if("textarea"!==a.type)throw Error(u(31,"[object Object]"===Object.prototype.toString.call(A)?"object with keys {"+Object.keys(A).join(", ")+"}":A,""))}function Rg(a){function b(A,j){if(a){var P=A.lastEffect;null!==P?(P.nextEffect=j,A.lastEffect=j):A.firstEffect=A.lastEffect=j,j.nextEffect=null,j.effectTag=8}}function c(A,j){if(!a)return null;for(;null!==j;)b(A,j),j=j.sibling;return null}function d(a,A){for(a=new Map;null!==A;)null!==A.key?a.set(A.key,A):a.set(A.index,A),A=A.sibling;return a}function e(a,A){return(a=Sg(a,A)).index=0,a.sibling=null,a}function f(A,j,P){return A.index=P,a?null!==(P=A.alternate)?(P=P.index)<j?(A.effectTag=2,j):P:(A.effectTag=2,j):j}function g(A){return a&&null===A.alternate&&(A.effectTag=2),A}function h(a,A,j,P){return null===A||6!==A.tag?((A=Tg(j,a.mode,P)).return=a,A):((A=e(A,j)).return=a,A)}function k(a,A,j,P){return null!==A&&A.elementType===j.type?((P=e(A,j.props)).ref=Pg(a,A,j),P.return=a,P):((P=Ug(j.type,j.key,j.props,null,a.mode,P)).ref=Pg(a,A,j),P.return=a,P)}function l(a,A,j,P){return null===A||4!==A.tag||A.stateNode.containerInfo!==j.containerInfo||A.stateNode.implementation!==j.implementation?((A=Vg(j,a.mode,P)).return=a,A):((A=e(A,j.children||[])).return=a,A)}function m(a,A,j,P,B){return null===A||7!==A.tag?((A=Wg(j,a.mode,P,B)).return=a,A):((A=e(A,j)).return=a,A)}function p(a,A,j){if("string"===typeof A||"number"===typeof A)return(A=Tg(""+A,a.mode,j)).return=a,A;if("object"===typeof A&&null!==A){switch(A.$$typeof){case et:return(j=Ug(A.type,A.key,A.props,null,a.mode,j)).ref=Pg(a,null,A),j.return=a,j;case tt:return(A=Vg(A,a.mode,j)).return=a,A}if($r(A)||nb(A))return(A=Wg(A,a.mode,j,null)).return=a,A;Qg(a,A)}return null}function x(a,A,j,P){var B=null!==A?A.key:null;if("string"===typeof j||"number"===typeof j)return null!==B?null:h(a,A,""+j,P);if("object"===typeof j&&null!==j){switch(j.$$typeof){case et:return j.key===B?j.type===nt?m(a,A,j.props.children,P,B):k(a,A,j,P):null;case tt:return j.key===B?l(a,A,j,P):null}if($r(j)||nb(j))return null!==B?null:m(a,A,j,P,null);Qg(a,j)}return null}function z(a,A,j,P,B){if("string"===typeof P||"number"===typeof P)return h(A,a=a.get(j)||null,""+P,B);if("object"===typeof P&&null!==P){switch(P.$$typeof){case et:return a=a.get(null===P.key?j:P.key)||null,P.type===nt?m(A,a,P.props.children,B,P.key):k(A,a,P,B);case tt:return l(A,a=a.get(null===P.key?j:P.key)||null,P,B)}if($r(P)||nb(P))return m(A,a=a.get(j)||null,P,B,null);Qg(A,P)}return null}function ca(A,j,P,B){for(var q=null,ne=null,ie=j,oe=j=0,se=null;null!==ie&&oe<P.length;oe++){ie.index>oe?(se=ie,ie=null):se=ie.sibling;var le=x(A,ie,P[oe],B);if(null===le){null===ie&&(ie=se);break}a&&ie&&null===le.alternate&&b(A,ie),j=f(le,j,oe),null===ne?q=le:ne.sibling=le,ne=le,ie=se}if(oe===P.length)return c(A,ie),q;if(null===ie){for(;oe<P.length;oe++)null!==(ie=p(A,P[oe],B))&&(j=f(ie,j,oe),null===ne?q=ie:ne.sibling=ie,ne=ie);return q}for(ie=d(A,ie);oe<P.length;oe++)null!==(se=z(ie,A,oe,P[oe],B))&&(a&&null!==se.alternate&&ie.delete(null===se.key?oe:se.key),j=f(se,j,oe),null===ne?q=se:ne.sibling=se,ne=se);return a&&ie.forEach((function(a){return b(A,a)})),q}function D(A,j,P,B){var q=nb(P);if("function"!==typeof q)throw Error(u(150));if(null==(P=q.call(P)))throw Error(u(151));for(var ne=q=null,ie=j,oe=j=0,se=null,le=P.next();null!==ie&&!le.done;oe++,le=P.next()){ie.index>oe?(se=ie,ie=null):se=ie.sibling;var he=x(A,ie,le.value,B);if(null===he){null===ie&&(ie=se);break}a&&ie&&null===he.alternate&&b(A,ie),j=f(he,j,oe),null===ne?q=he:ne.sibling=he,ne=he,ie=se}if(le.done)return c(A,ie),q;if(null===ie){for(;!le.done;oe++,le=P.next())null!==(le=p(A,le.value,B))&&(j=f(le,j,oe),null===ne?q=le:ne.sibling=le,ne=le);return q}for(ie=d(A,ie);!le.done;oe++,le=P.next())null!==(le=z(ie,A,oe,le.value,B))&&(a&&null!==le.alternate&&ie.delete(null===le.key?oe:le.key),j=f(le,j,oe),null===ne?q=le:ne.sibling=le,ne=le);return a&&ie.forEach((function(a){return b(A,a)})),q}return function(a,A,j,P){var B="object"===typeof j&&null!==j&&j.type===nt&&null===j.key;B&&(j=j.props.children);var q="object"===typeof j&&null!==j;if(q)switch(j.$$typeof){case et:e:{for(q=j.key,B=A;null!==B;){if(B.key===q){switch(B.tag){case 7:if(j.type===nt){c(a,B.sibling),(A=e(B,j.props.children)).return=a,a=A;break e}break;default:if(B.elementType===j.type){c(a,B.sibling),(A=e(B,j.props)).ref=Pg(a,B,j),A.return=a,a=A;break e}}c(a,B);break}b(a,B),B=B.sibling}j.type===nt?((A=Wg(j.props.children,a.mode,P,j.key)).return=a,a=A):((P=Ug(j.type,j.key,j.props,null,a.mode,P)).ref=Pg(a,A,j),P.return=a,a=P)}return g(a);case tt:e:{for(B=j.key;null!==A;){if(A.key===B){if(4===A.tag&&A.stateNode.containerInfo===j.containerInfo&&A.stateNode.implementation===j.implementation){c(a,A.sibling),(A=e(A,j.children||[])).return=a,a=A;break e}c(a,A);break}b(a,A),A=A.sibling}(A=Vg(j,a.mode,P)).return=a,a=A}return g(a)}if("string"===typeof j||"number"===typeof j)return j=""+j,null!==A&&6===A.tag?(c(a,A.sibling),(A=e(A,j)).return=a,a=A):(c(a,A),(A=Tg(j,a.mode,P)).return=a,a=A),g(a);if($r(j))return ca(a,A,j,P);if(nb(j))return D(a,A,j,P);if(q&&Qg(a,j),"undefined"===typeof j&&!B)switch(a.tag){case 1:case 0:throw a=a.type,Error(u(152,a.displayName||a.name||"Component"))}return c(a,A)}}var Kr=Rg(!0),Xr=Rg(!1),Jr={},Qr={current:Jr},Zr={current:Jr},ti={current:Jr};function ch(a){if(a===Jr)throw Error(u(174));return a}function dh(a,A){switch(I(ti,A),I(Zr,a),I(Qr,Jr),a=A.nodeType){case 9:case 11:A=(A=A.documentElement)?A.namespaceURI:Ob(null,"");break;default:A=Ob(A=(a=8===a?A.parentNode:A).namespaceURI||null,a=a.tagName)}H(Qr),I(Qr,A)}function eh(){H(Qr),H(Zr),H(ti)}function fh(a){ch(ti.current);var A=ch(Qr.current),j=Ob(A,a.type);A!==j&&(I(Zr,a),I(Qr,j))}function gh(a){Zr.current===a&&(H(Qr),H(Zr))}var ii={current:0};function hh(a){for(var A=a;null!==A;){if(13===A.tag){var j=A.memoizedState;if(null!==j&&(null===(j=j.dehydrated)||"$?"===j.data||"$!"===j.data))return A}else if(19===A.tag&&void 0!==A.memoizedProps.revealOrder){if(0!==(64&A.effectTag))return A}else if(null!==A.child){A.child.return=A,A=A.child;continue}if(A===a)break;for(;null===A.sibling;){if(null===A.return||A.return===a)return null;A=A.return}A.sibling.return=A.return,A=A.sibling}return null}function ih(a,A){return{responder:a,props:A}}var oi=Ye.ReactCurrentDispatcher,ui=Ye.ReactCurrentBatchConfig,vi=0,_i=null,wi=null,Ti=null,Bi=!1;function Q(){throw Error(u(321))}function nh(a,A){if(null===A)return!1;for(var j=0;j<A.length&&j<a.length;j++)if(!Hn(a[j],A[j]))return!1;return!0}function oh(a,A,j,P,B,q){if(vi=q,_i=A,A.memoizedState=null,A.updateQueue=null,A.expirationTime=0,oi.current=null===a||null===a.memoizedState?Yi:Zi,a=j(P,B),A.expirationTime===vi){q=0;do{if(A.expirationTime=0,!(25>q))throw Error(u(301));q+=1,Ti=wi=null,A.updateQueue=null,oi.current=ta,a=j(P,B)}while(A.expirationTime===vi)}if(oi.current=Wi,A=null!==wi&&null!==wi.next,vi=0,Ti=wi=_i=null,Bi=!1,A)throw Error(u(300));return a}function th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ti?_i.memoizedState=Ti=a:Ti=Ti.next=a,Ti}function uh(){if(null===wi){var a=_i.alternate;a=null!==a?a.memoizedState:null}else a=wi.next;var A=null===Ti?_i.memoizedState:Ti.next;if(null!==A)Ti=A,wi=a;else{if(null===a)throw Error(u(310));a={memoizedState:(wi=a).memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},null===Ti?_i.memoizedState=Ti=a:Ti=Ti.next=a}return Ti}function vh(a,A){return"function"===typeof A?A(a):A}function wh(a){var A=uh(),j=A.queue;if(null===j)throw Error(u(311));j.lastRenderedReducer=a;var P=wi,B=P.baseQueue,q=j.pending;if(null!==q){if(null!==B){var ne=B.next;B.next=q.next,q.next=ne}P.baseQueue=B=q,j.pending=null}if(null!==B){B=B.next,P=P.baseState;var ie=ne=q=null,oe=B;do{var se=oe.expirationTime;if(se<vi){var le={expirationTime:oe.expirationTime,suspenseConfig:oe.suspenseConfig,action:oe.action,eagerReducer:oe.eagerReducer,eagerState:oe.eagerState,next:null};null===ie?(ne=ie=le,q=P):ie=ie.next=le,se>_i.expirationTime&&(_i.expirationTime=se,Bg(se))}else null!==ie&&(ie=ie.next={expirationTime:1073741823,suspenseConfig:oe.suspenseConfig,action:oe.action,eagerReducer:oe.eagerReducer,eagerState:oe.eagerState,next:null}),Ag(se,oe.suspenseConfig),P=oe.eagerReducer===a?oe.eagerState:a(P,oe.action);oe=oe.next}while(null!==oe&&oe!==B);null===ie?q=P:ie.next=ne,Hn(P,A.memoizedState)||(da=!0),A.memoizedState=P,A.baseState=q,A.baseQueue=ie,j.lastRenderedState=P}return[A.memoizedState,j.dispatch]}function xh(a){var A=uh(),j=A.queue;if(null===j)throw Error(u(311));j.lastRenderedReducer=a;var P=j.dispatch,B=j.pending,q=A.memoizedState;if(null!==B){j.pending=null;var ne=B=B.next;do{q=a(q,ne.action),ne=ne.next}while(ne!==B);Hn(q,A.memoizedState)||(da=!0),A.memoizedState=q,null===A.baseQueue&&(A.baseState=q),j.lastRenderedState=q}return[q,P]}function yh(a){var A=th();return"function"===typeof a&&(a=a()),A.memoizedState=A.baseState=a,a=(a=A.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:a}).dispatch=zh.bind(null,_i,a),[A.memoizedState,a]}function Ah(a,A,j,P){return a={tag:a,create:A,destroy:j,deps:P,next:null},null===(A=_i.updateQueue)?(A={lastEffect:null},_i.updateQueue=A,A.lastEffect=a.next=a):null===(j=A.lastEffect)?A.lastEffect=a.next=a:(P=j.next,j.next=a,a.next=P,A.lastEffect=a),a}function Bh(){return uh().memoizedState}function Ch(a,A,j,P){var B=th();_i.effectTag|=a,B.memoizedState=Ah(1|A,j,void 0,void 0===P?null:P)}function Dh(a,A,j,P){var B=uh();P=void 0===P?null:P;var q=void 0;if(null!==wi){var ne=wi.memoizedState;if(q=ne.destroy,null!==P&&nh(P,ne.deps))return void Ah(A,j,q,P)}_i.effectTag|=a,B.memoizedState=Ah(1|A,j,q,P)}function Eh(a,A){return Ch(516,4,a,A)}function Fh(a,A){return Dh(516,4,a,A)}function Gh(a,A){return Dh(4,2,a,A)}function Hh(a,A){return"function"===typeof A?(a=a(),A(a),function(){A(null)}):null!==A&&void 0!==A?(a=a(),A.current=a,function(){A.current=null}):void 0}function Ih(a,A,j){return j=null!==j&&void 0!==j?j.concat([a]):null,Dh(4,2,Hh.bind(null,A,a),j)}function Jh(){}function Kh(a,A){return th().memoizedState=[a,void 0===A?null:A],a}function Lh(a,A){var j=uh();A=void 0===A?null:A;var P=j.memoizedState;return null!==P&&null!==A&&nh(A,P[1])?P[0]:(j.memoizedState=[a,A],a)}function Mh(a,A){var j=uh();A=void 0===A?null:A;var P=j.memoizedState;return null!==P&&null!==A&&nh(A,P[1])?P[0]:(a=a(),j.memoizedState=[a,A],a)}function Nh(a,A,j){var P=ag();cg(98>P?98:P,(function(){a(!0)})),cg(97<P?97:P,(function(){var P=ui.suspense;ui.suspense=void 0===A?null:A;try{a(!1),j()}finally{ui.suspense=P}}))}function zh(a,A,j){var P=Gg(),B=Gr.suspense;B={expirationTime:P=Hg(P,a,B),suspenseConfig:B,action:j,eagerReducer:null,eagerState:null,next:null};var q=A.pending;if(null===q?B.next=B:(B.next=q.next,q.next=B),A.pending=B,q=a.alternate,a===_i||null!==q&&q===_i)Bi=!0,B.expirationTime=vi,_i.expirationTime=vi;else{if(0===a.expirationTime&&(null===q||0===q.expirationTime)&&null!==(q=A.lastRenderedReducer))try{var ne=A.lastRenderedState,ie=q(ne,j);if(B.eagerReducer=q,B.eagerState=ie,Hn(ie,ne))return}catch(oe){}Ig(a,P)}}var Wi={readContext:sg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useResponder:Q,useDeferredValue:Q,useTransition:Q},Yi={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function useImperativeHandle(a,A,j){return j=null!==j&&void 0!==j?j.concat([a]):null,Ch(4,2,Hh.bind(null,A,a),j)},useLayoutEffect:function useLayoutEffect(a,A){return Ch(4,2,a,A)},useMemo:function useMemo(a,A){var j=th();return A=void 0===A?null:A,a=a(),j.memoizedState=[a,A],a},useReducer:function useReducer(a,A,j){var P=th();return A=void 0!==j?j(A):A,P.memoizedState=P.baseState=A,a=(a=P.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:A}).dispatch=zh.bind(null,_i,a),[P.memoizedState,a]},useRef:function useRef(a){return a={current:a},th().memoizedState=a},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function useDeferredValue(a,A){var j=yh(a),P=j[0],B=j[1];return Eh((function(){var j=ui.suspense;ui.suspense=void 0===A?null:A;try{B(a)}finally{ui.suspense=j}}),[a,A]),P},useTransition:function useTransition(a){var A=yh(!1),j=A[0];return A=A[1],[Kh(Nh.bind(null,A,a),[A,a]),j]}},Zi={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function useState(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function useDeferredValue(a,A){var j=wh(vh),P=j[0],B=j[1];return Fh((function(){var j=ui.suspense;ui.suspense=void 0===A?null:A;try{B(a)}finally{ui.suspense=j}}),[a,A]),P},useTransition:function useTransition(a){var A=wh(vh),j=A[0];return A=A[1],[Lh(Nh.bind(null,A,a),[A,a]),j]}},ta={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function useState(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function useDeferredValue(a,A){var j=xh(vh),P=j[0],B=j[1];return Fh((function(){var j=ui.suspense;ui.suspense=void 0===A?null:A;try{B(a)}finally{ui.suspense=j}}),[a,A]),P},useTransition:function useTransition(a){var A=xh(vh),j=A[0];return A=A[1],[Lh(Nh.bind(null,A,a),[A,a]),j]}},na=null,ia=null,la=!1;function Rh(a,A){var j=Sh(5,null,null,0);j.elementType="DELETED",j.type="DELETED",j.stateNode=A,j.return=a,j.effectTag=8,null!==a.lastEffect?(a.lastEffect.nextEffect=j,a.lastEffect=j):a.firstEffect=a.lastEffect=j}function Th(a,A){switch(a.tag){case 5:var j=a.type;return null!==(A=1!==A.nodeType||j.toLowerCase()!==A.nodeName.toLowerCase()?null:A)&&(a.stateNode=A,!0);case 6:return null!==(A=""===a.pendingProps||3!==A.nodeType?null:A)&&(a.stateNode=A,!0);case 13:default:return!1}}function Uh(a){if(la){var A=ia;if(A){var j=A;if(!Th(a,A)){if(!(A=Jd(j.nextSibling))||!Th(a,A))return a.effectTag=-1025&a.effectTag|2,la=!1,void(na=a);Rh(na,j)}na=a,ia=Jd(A.firstChild)}else a.effectTag=-1025&a.effectTag|2,la=!1,na=a}}function Vh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;na=a}function Wh(a){if(a!==na)return!1;if(!la)return Vh(a),la=!0,!1;var A=a.type;if(5!==a.tag||"head"!==A&&"body"!==A&&!Gd(A,a.memoizedProps))for(A=ia;A;)Rh(a,A),A=Jd(A.nextSibling);if(Vh(a),13===a.tag){if(!(a=null!==(a=a.memoizedState)?a.dehydrated:null))throw Error(u(317));e:{for(a=a.nextSibling,A=0;a;){if(8===a.nodeType){var j=a.data;if("/$"===j){if(0===A){ia=Jd(a.nextSibling);break e}A--}else"$"!==j&&"$!"!==j&&"$?"!==j||A++}a=a.nextSibling}ia=null}}else ia=na?Jd(a.stateNode.nextSibling):null;return!0}function Xh(){ia=na=null,la=!1}var fa=Ye.ReactCurrentOwner,da=!1;function R(a,A,j,P){A.child=null===a?Xr(A,null,j,P):Kr(A,a.child,j,P)}function Zh(a,A,j,P,B){j=j.render;var q=A.ref;return qg(A,B),P=oh(a,A,j,P,q,B),null===a||da?(A.effectTag|=1,R(a,A,P,B),A.child):(A.updateQueue=a.updateQueue,A.effectTag&=-517,a.expirationTime<=B&&(a.expirationTime=0),$h(a,A,B))}function ai(a,A,j,P,B,q){if(null===a){var ne=j.type;return"function"!==typeof ne||bi(ne)||void 0!==ne.defaultProps||null!==j.compare||void 0!==j.defaultProps?((a=Ug(j.type,null,P,null,A.mode,q)).ref=A.ref,a.return=A,A.child=a):(A.tag=15,A.type=ne,ci(a,A,ne,P,B,q))}return ne=a.child,B<q&&(B=ne.memoizedProps,(j=null!==(j=j.compare)?j:bf)(B,P)&&a.ref===A.ref)?$h(a,A,q):(A.effectTag|=1,(a=Sg(ne,P)).ref=A.ref,a.return=A,A.child=a)}function ci(a,A,j,P,B,q){return null!==a&&bf(a.memoizedProps,P)&&a.ref===A.ref&&(da=!1,B<q)?(A.expirationTime=a.expirationTime,$h(a,A,q)):di(a,A,j,P,q)}function ei(a,A){var j=A.ref;(null===a&&null!==j||null!==a&&a.ref!==j)&&(A.effectTag|=128)}function di(a,A,j,P,B){var q=L(j)?_r:vr.current;return q=Cf(A,q),qg(A,B),j=oh(a,A,j,P,q,B),null===a||da?(A.effectTag|=1,R(a,A,j,B),A.child):(A.updateQueue=a.updateQueue,A.effectTag&=-517,a.expirationTime<=B&&(a.expirationTime=0),$h(a,A,B))}function fi(a,A,j,P,B){if(L(j)){var q=!0;Gf(A)}else q=!1;if(qg(A,B),null===A.stateNode)null!==a&&(a.alternate=null,A.alternate=null,A.effectTag|=2),Lg(A,j,P),Ng(A,j,P,B),P=!0;else if(null===a){var ne=A.stateNode,ie=A.memoizedProps;ne.props=ie;var oe=ne.context,se=j.contextType;"object"===typeof se&&null!==se?se=sg(se):se=Cf(A,se=L(j)?_r:vr.current);var le=j.getDerivedStateFromProps,he="function"===typeof le||"function"===typeof ne.getSnapshotBeforeUpdate;he||"function"!==typeof ne.UNSAFE_componentWillReceiveProps&&"function"!==typeof ne.componentWillReceiveProps||(ie!==P||oe!==se)&&Mg(A,ne,P,se),Hr=!1;var pe=A.memoizedState;ne.state=pe,zg(A,P,ne,B),oe=A.memoizedState,ie!==P||pe!==oe||yr.current||Hr?("function"===typeof le&&(Fg(A,j,le,P),oe=A.memoizedState),(ie=Hr||Kg(A,j,ie,P,pe,oe,se))?(he||"function"!==typeof ne.UNSAFE_componentWillMount&&"function"!==typeof ne.componentWillMount||("function"===typeof ne.componentWillMount&&ne.componentWillMount(),"function"===typeof ne.UNSAFE_componentWillMount&&ne.UNSAFE_componentWillMount()),"function"===typeof ne.componentDidMount&&(A.effectTag|=4)):("function"===typeof ne.componentDidMount&&(A.effectTag|=4),A.memoizedProps=P,A.memoizedState=oe),ne.props=P,ne.state=oe,ne.context=se,P=ie):("function"===typeof ne.componentDidMount&&(A.effectTag|=4),P=!1)}else ne=A.stateNode,vg(a,A),ie=A.memoizedProps,ne.props=A.type===A.elementType?ie:ig(A.type,ie),oe=ne.context,"object"===typeof(se=j.contextType)&&null!==se?se=sg(se):se=Cf(A,se=L(j)?_r:vr.current),(he="function"===typeof(le=j.getDerivedStateFromProps)||"function"===typeof ne.getSnapshotBeforeUpdate)||"function"!==typeof ne.UNSAFE_componentWillReceiveProps&&"function"!==typeof ne.componentWillReceiveProps||(ie!==P||oe!==se)&&Mg(A,ne,P,se),Hr=!1,oe=A.memoizedState,ne.state=oe,zg(A,P,ne,B),pe=A.memoizedState,ie!==P||oe!==pe||yr.current||Hr?("function"===typeof le&&(Fg(A,j,le,P),pe=A.memoizedState),(le=Hr||Kg(A,j,ie,P,oe,pe,se))?(he||"function"!==typeof ne.UNSAFE_componentWillUpdate&&"function"!==typeof ne.componentWillUpdate||("function"===typeof ne.componentWillUpdate&&ne.componentWillUpdate(P,pe,se),"function"===typeof ne.UNSAFE_componentWillUpdate&&ne.UNSAFE_componentWillUpdate(P,pe,se)),"function"===typeof ne.componentDidUpdate&&(A.effectTag|=4),"function"===typeof ne.getSnapshotBeforeUpdate&&(A.effectTag|=256)):("function"!==typeof ne.componentDidUpdate||ie===a.memoizedProps&&oe===a.memoizedState||(A.effectTag|=4),"function"!==typeof ne.getSnapshotBeforeUpdate||ie===a.memoizedProps&&oe===a.memoizedState||(A.effectTag|=256),A.memoizedProps=P,A.memoizedState=pe),ne.props=P,ne.state=pe,ne.context=se,P=le):("function"!==typeof ne.componentDidUpdate||ie===a.memoizedProps&&oe===a.memoizedState||(A.effectTag|=4),"function"!==typeof ne.getSnapshotBeforeUpdate||ie===a.memoizedProps&&oe===a.memoizedState||(A.effectTag|=256),P=!1);return gi(a,A,j,P,q,B)}function gi(a,A,j,P,B,q){ei(a,A);var ne=0!==(64&A.effectTag);if(!P&&!ne)return B&&Hf(A,j,!1),$h(a,A,q);P=A.stateNode,fa.current=A;var ie=ne&&"function"!==typeof j.getDerivedStateFromError?null:P.render();return A.effectTag|=1,null!==a&&ne?(A.child=Kr(A,a.child,null,q),A.child=Kr(A,null,ie,q)):R(a,A,ie,q),A.memoizedState=P.state,B&&Hf(A,j,!0),A.child}function hi(a){var A=a.stateNode;A.pendingContext?Ef(0,A.pendingContext,A.pendingContext!==A.context):A.context&&Ef(0,A.context,!1),dh(a,A.containerInfo)}var ha,ga,ma,va={dehydrated:null,retryTime:0};function ji(a,A,j){var P,B=A.mode,q=A.pendingProps,ne=ii.current,ie=!1;if((P=0!==(64&A.effectTag))||(P=0!==(2&ne)&&(null===a||null!==a.memoizedState)),P?(ie=!0,A.effectTag&=-65):null!==a&&null===a.memoizedState||void 0===q.fallback||!0===q.unstable_avoidThisFallback||(ne|=1),I(ii,1&ne),null===a){if(void 0!==q.fallback&&Uh(A),ie){if(ie=q.fallback,(q=Wg(null,B,0,null)).return=A,0===(2&A.mode))for(a=null!==A.memoizedState?A.child.child:A.child,q.child=a;null!==a;)a.return=q,a=a.sibling;return(j=Wg(ie,B,j,null)).return=A,q.sibling=j,A.memoizedState=va,A.child=q,j}return B=q.children,A.memoizedState=null,A.child=Xr(A,null,B,j)}if(null!==a.memoizedState){if(B=(a=a.child).sibling,ie){if(q=q.fallback,(j=Sg(a,a.pendingProps)).return=A,0===(2&A.mode)&&(ie=null!==A.memoizedState?A.child.child:A.child)!==a.child)for(j.child=ie;null!==ie;)ie.return=j,ie=ie.sibling;return(B=Sg(B,q)).return=A,j.sibling=B,j.childExpirationTime=0,A.memoizedState=va,A.child=j,B}return j=Kr(A,a.child,q.children,j),A.memoizedState=null,A.child=j}if(a=a.child,ie){if(ie=q.fallback,(q=Wg(null,B,0,null)).return=A,q.child=a,null!==a&&(a.return=q),0===(2&A.mode))for(a=null!==A.memoizedState?A.child.child:A.child,q.child=a;null!==a;)a.return=q,a=a.sibling;return(j=Wg(ie,B,j,null)).return=A,q.sibling=j,j.effectTag|=2,q.childExpirationTime=0,A.memoizedState=va,A.child=q,j}return A.memoizedState=null,A.child=Kr(A,a,q.children,j)}function ki(a,A){a.expirationTime<A&&(a.expirationTime=A);var j=a.alternate;null!==j&&j.expirationTime<A&&(j.expirationTime=A),pg(a.return,A)}function li(a,A,j,P,B,q){var ne=a.memoizedState;null===ne?a.memoizedState={isBackwards:A,rendering:null,renderingStartTime:0,last:P,tail:j,tailExpiration:0,tailMode:B,lastEffect:q}:(ne.isBackwards=A,ne.rendering=null,ne.renderingStartTime=0,ne.last=P,ne.tail=j,ne.tailExpiration=0,ne.tailMode=B,ne.lastEffect=q)}function mi(a,A,j){var P=A.pendingProps,B=P.revealOrder,q=P.tail;if(R(a,A,P.children,j),0!==(2&(P=ii.current)))P=1&P|2,A.effectTag|=64;else{if(null!==a&&0!==(64&a.effectTag))e:for(a=A.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&ki(a,j);else if(19===a.tag)ki(a,j);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===A)break e;for(;null===a.sibling;){if(null===a.return||a.return===A)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}P&=1}if(I(ii,P),0===(2&A.mode))A.memoizedState=null;else switch(B){case"forwards":for(j=A.child,B=null;null!==j;)null!==(a=j.alternate)&&null===hh(a)&&(B=j),j=j.sibling;null===(j=B)?(B=A.child,A.child=null):(B=j.sibling,j.sibling=null),li(A,!1,B,j,q,A.lastEffect);break;case"backwards":for(j=null,B=A.child,A.child=null;null!==B;){if(null!==(a=B.alternate)&&null===hh(a)){A.child=B;break}a=B.sibling,B.sibling=j,j=B,B=a}li(A,!0,j,null,q,A.lastEffect);break;case"together":li(A,!1,null,null,void 0,A.lastEffect);break;default:A.memoizedState=null}return A.child}function $h(a,A,j){null!==a&&(A.dependencies=a.dependencies);var P=A.expirationTime;if(0!==P&&Bg(P),A.childExpirationTime<j)return null;if(null!==a&&A.child!==a.child)throw Error(u(153));if(null!==A.child){for(j=Sg(a=A.child,a.pendingProps),A.child=j,j.return=A;null!==a.sibling;)a=a.sibling,(j=j.sibling=Sg(a,a.pendingProps)).return=A;j.sibling=null}return A.child}function ri(a,A){switch(a.tailMode){case"hidden":A=a.tail;for(var j=null;null!==A;)null!==A.alternate&&(j=A),A=A.sibling;null===j?a.tail=null:j.sibling=null;break;case"collapsed":j=a.tail;for(var P=null;null!==j;)null!==j.alternate&&(P=j),j=j.sibling;null===P?A||null===a.tail?a.tail=null:a.tail.sibling=null:P.sibling=null}}function si(a,A,j){var P=A.pendingProps;switch(A.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L(A.type)&&Df(),null;case 3:return eh(),H(yr),H(vr),(j=A.stateNode).pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),null!==a&&null!==a.child||!Wh(A)||(A.effectTag|=4),null;case 5:gh(A),j=ch(ti.current);var q=A.type;if(null!==a&&null!=A.stateNode)ga(a,A,q,P,j),a.ref!==A.ref&&(A.effectTag|=128);else{if(!P){if(null===A.stateNode)throw Error(u(166));return null}if(a=ch(Qr.current),Wh(A)){P=A.stateNode,q=A.type;var ne=A.memoizedProps;switch(P[ln]=A,P[cn]=ne,q){case"iframe":case"object":case"embed":F("load",P);break;case"video":case"audio":for(a=0;a<Et.length;a++)F(Et[a],P);break;case"source":F("error",P);break;case"img":case"image":case"link":F("error",P),F("load",P);break;case"form":F("reset",P),F("submit",P);break;case"details":F("toggle",P);break;case"input":Ab(P,ne),F("invalid",P),rd(j,"onChange");break;case"select":P._wrapperState={wasMultiple:!!ne.multiple},F("invalid",P),rd(j,"onChange");break;case"textarea":Jb(P,ne),F("invalid",P),rd(j,"onChange")}for(var ie in od(q,ne),a=null,ne)if(ne.hasOwnProperty(ie)){var oe=ne[ie];"children"===ie?"string"===typeof oe?P.textContent!==oe&&(a=["children",oe]):"number"===typeof oe&&P.textContent!==""+oe&&(a=["children",""+oe]):we.hasOwnProperty(ie)&&null!=oe&&rd(j,ie)}switch(q){case"input":xb(P),Eb(P,ne,!0);break;case"textarea":xb(P),Lb(P);break;case"select":case"option":break;default:"function"===typeof ne.onClick&&(P.onclick=sd)}j=a,A.updateQueue=j,null!==j&&(A.effectTag|=4)}else{switch(ie=9===j.nodeType?j:j.ownerDocument,a===tn&&(a=Nb(q)),a===tn?"script"===q?((a=ie.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):"string"===typeof P.is?a=ie.createElement(q,{is:P.is}):(a=ie.createElement(q),"select"===q&&(ie=a,P.multiple?ie.multiple=!0:P.size&&(ie.size=P.size))):a=ie.createElementNS(a,q),a[ln]=A,a[cn]=P,ha(a,A),A.stateNode=a,ie=pd(q,P),q){case"iframe":case"object":case"embed":F("load",a),oe=P;break;case"video":case"audio":for(oe=0;oe<Et.length;oe++)F(Et[oe],a);oe=P;break;case"source":F("error",a),oe=P;break;case"img":case"image":case"link":F("error",a),F("load",a),oe=P;break;case"form":F("reset",a),F("submit",a),oe=P;break;case"details":F("toggle",a),oe=P;break;case"input":Ab(a,P),oe=zb(a,P),F("invalid",a),rd(j,"onChange");break;case"option":oe=Gb(a,P);break;case"select":a._wrapperState={wasMultiple:!!P.multiple},oe=B({},P,{value:void 0}),F("invalid",a),rd(j,"onChange");break;case"textarea":Jb(a,P),oe=Ib(a,P),F("invalid",a),rd(j,"onChange");break;default:oe=P}od(q,oe);var se=oe;for(ne in se)if(se.hasOwnProperty(ne)){var le=se[ne];"style"===ne?md(a,le):"dangerouslySetInnerHTML"===ne?null!=(le=le?le.__html:void 0)&&yt(a,le):"children"===ne?"string"===typeof le?("textarea"!==q||""!==le)&&Rb(a,le):"number"===typeof le&&Rb(a,""+le):"suppressContentEditableWarning"!==ne&&"suppressHydrationWarning"!==ne&&"autoFocus"!==ne&&(we.hasOwnProperty(ne)?null!=le&&rd(j,ne):null!=le&&Xa(a,ne,le,ie))}switch(q){case"input":xb(a),Eb(a,P,!1);break;case"textarea":xb(a),Lb(a);break;case"option":null!=P.value&&a.setAttribute("value",""+rb(P.value));break;case"select":a.multiple=!!P.multiple,null!=(j=P.value)?Hb(a,!!P.multiple,j,!1):null!=P.defaultValue&&Hb(a,!!P.multiple,P.defaultValue,!0);break;default:"function"===typeof oe.onClick&&(a.onclick=sd)}Fd(q,P)&&(A.effectTag|=4)}null!==A.ref&&(A.effectTag|=128)}return null;case 6:if(a&&null!=A.stateNode)ma(0,A,a.memoizedProps,P);else{if("string"!==typeof P&&null===A.stateNode)throw Error(u(166));j=ch(ti.current),ch(Qr.current),Wh(A)?(j=A.stateNode,P=A.memoizedProps,j[ln]=A,j.nodeValue!==P&&(A.effectTag|=4)):((j=(9===j.nodeType?j:j.ownerDocument).createTextNode(P))[ln]=A,A.stateNode=j)}return null;case 13:return H(ii),P=A.memoizedState,0!==(64&A.effectTag)?(A.expirationTime=j,A):(j=null!==P,P=!1,null===a?void 0!==A.memoizedProps.fallback&&Wh(A):(P=null!==(q=a.memoizedState),j||null===q||null!==(q=a.child.sibling)&&(null!==(ne=A.firstEffect)?(A.firstEffect=q,q.nextEffect=ne):(A.firstEffect=A.lastEffect=q,q.nextEffect=null),q.effectTag=8)),j&&!P&&0!==(2&A.mode)&&(null===a&&!0!==A.memoizedProps.unstable_avoidThisFallback||0!==(1&ii.current)?Ka===Na&&(Ka=Ba):(Ka!==Na&&Ka!==Ba||(Ka=Ua),0!==no&&null!==Wa&&(xi(Wa,$a),yi(Wa,no)))),(j||P)&&(A.effectTag|=4),null);case 4:return eh(),null;case 10:return og(A),null;case 17:return L(A.type)&&Df(),null;case 19:if(H(ii),null===(P=A.memoizedState))return null;if(q=0!==(64&A.effectTag),null===(ne=P.rendering)){if(q)ri(P,!1);else if(Ka!==Na||null!==a&&0!==(64&a.effectTag))for(ne=A.child;null!==ne;){if(null!==(a=hh(ne))){for(A.effectTag|=64,ri(P,!1),null!==(q=a.updateQueue)&&(A.updateQueue=q,A.effectTag|=4),null===P.lastEffect&&(A.firstEffect=null),A.lastEffect=P.lastEffect,P=A.child;null!==P;)ne=j,(q=P).effectTag&=2,q.nextEffect=null,q.firstEffect=null,q.lastEffect=null,null===(a=q.alternate)?(q.childExpirationTime=0,q.expirationTime=ne,q.child=null,q.memoizedProps=null,q.memoizedState=null,q.updateQueue=null,q.dependencies=null):(q.childExpirationTime=a.childExpirationTime,q.expirationTime=a.expirationTime,q.child=a.child,q.memoizedProps=a.memoizedProps,q.memoizedState=a.memoizedState,q.updateQueue=a.updateQueue,ne=a.dependencies,q.dependencies=null===ne?null:{expirationTime:ne.expirationTime,firstContext:ne.firstContext,responders:ne.responders}),P=P.sibling;return I(ii,1&ii.current|2),A.child}ne=ne.sibling}}else{if(!q)if(null!==(a=hh(ne))){if(A.effectTag|=64,q=!0,null!==(j=a.updateQueue)&&(A.updateQueue=j,A.effectTag|=4),ri(P,!0),null===P.tail&&"hidden"===P.tailMode&&!ne.alternate)return null!==(A=A.lastEffect=P.lastEffect)&&(A.nextEffect=null),null}else 2*Br()-P.renderingStartTime>P.tailExpiration&&1<j&&(A.effectTag|=64,q=!0,ri(P,!1),A.expirationTime=A.childExpirationTime=j-1);P.isBackwards?(ne.sibling=A.child,A.child=ne):(null!==(j=P.last)?j.sibling=ne:A.child=ne,P.last=ne)}return null!==P.tail?(0===P.tailExpiration&&(P.tailExpiration=Br()+500),j=P.tail,P.rendering=j,P.tail=j.sibling,P.lastEffect=A.lastEffect,P.renderingStartTime=Br(),j.sibling=null,A=ii.current,I(ii,q?1&A|2:1&A),j):null}throw Error(u(156,A.tag))}function zi(a){switch(a.tag){case 1:L(a.type)&&Df();var A=a.effectTag;return 4096&A?(a.effectTag=-4097&A|64,a):null;case 3:if(eh(),H(yr),H(vr),0!==(64&(A=a.effectTag)))throw Error(u(285));return a.effectTag=-4097&A|64,a;case 5:return gh(a),null;case 13:return H(ii),4096&(A=a.effectTag)?(a.effectTag=-4097&A|64,a):null;case 19:return H(ii),null;case 4:return eh(),null;case 10:return og(a),null;default:return null}}function Ai(a,A){return{value:a,source:A,stack:qb(A)}}ha=function ni(a,A){for(var j=A.child;null!==j;){if(5===j.tag||6===j.tag)a.appendChild(j.stateNode);else if(4!==j.tag&&null!==j.child){j.child.return=j,j=j.child;continue}if(j===A)break;for(;null===j.sibling;){if(null===j.return||j.return===A)return;j=j.return}j.sibling.return=j.return,j=j.sibling}},ga=function pi(a,A,j,P,q){var ne=a.memoizedProps;if(ne!==P){var ie,oe,se=A.stateNode;switch(ch(Qr.current),a=null,j){case"input":ne=zb(se,ne),P=zb(se,P),a=[];break;case"option":ne=Gb(se,ne),P=Gb(se,P),a=[];break;case"select":ne=B({},ne,{value:void 0}),P=B({},P,{value:void 0}),a=[];break;case"textarea":ne=Ib(se,ne),P=Ib(se,P),a=[];break;default:"function"!==typeof ne.onClick&&"function"===typeof P.onClick&&(se.onclick=sd)}for(ie in od(j,P),j=null,ne)if(!P.hasOwnProperty(ie)&&ne.hasOwnProperty(ie)&&null!=ne[ie])if("style"===ie)for(oe in se=ne[ie])se.hasOwnProperty(oe)&&(j||(j={}),j[oe]="");else"dangerouslySetInnerHTML"!==ie&&"children"!==ie&&"suppressContentEditableWarning"!==ie&&"suppressHydrationWarning"!==ie&&"autoFocus"!==ie&&(we.hasOwnProperty(ie)?a||(a=[]):(a=a||[]).push(ie,null));for(ie in P){var le=P[ie];if(se=null!=ne?ne[ie]:void 0,P.hasOwnProperty(ie)&&le!==se&&(null!=le||null!=se))if("style"===ie)if(se){for(oe in se)!se.hasOwnProperty(oe)||le&&le.hasOwnProperty(oe)||(j||(j={}),j[oe]="");for(oe in le)le.hasOwnProperty(oe)&&se[oe]!==le[oe]&&(j||(j={}),j[oe]=le[oe])}else j||(a||(a=[]),a.push(ie,j)),j=le;else"dangerouslySetInnerHTML"===ie?(le=le?le.__html:void 0,se=se?se.__html:void 0,null!=le&&se!==le&&(a=a||[]).push(ie,le)):"children"===ie?se===le||"string"!==typeof le&&"number"!==typeof le||(a=a||[]).push(ie,""+le):"suppressContentEditableWarning"!==ie&&"suppressHydrationWarning"!==ie&&(we.hasOwnProperty(ie)?(null!=le&&rd(q,ie),a||se===le||(a=[])):(a=a||[]).push(ie,le))}j&&(a=a||[]).push("style",j),q=a,(A.updateQueue=q)&&(A.effectTag|=4)}},ma=function qi(a,A,j,P){j!==P&&(A.effectTag|=4)};var ya="function"===typeof WeakSet?WeakSet:Set;function Ci(a,A){var j=A.source,P=A.stack;null===P&&null!==j&&(P=qb(j)),null!==j&&pb(j.type),A=A.value,null!==a&&1===a.tag&&pb(a.type);try{console.error(A)}catch(B){setTimeout((function(){throw B}))}}function Fi(a){var A=a.ref;if(null!==A)if("function"===typeof A)try{A(null)}catch(j){Ei(a,j)}else A.current=null}function Gi(a,A){switch(A.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&A.effectTag&&null!==a){var j=a.memoizedProps,P=a.memoizedState;A=(a=A.stateNode).getSnapshotBeforeUpdate(A.elementType===A.type?j:ig(A.type,j),P),a.__reactInternalSnapshotBeforeUpdate=A}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u(163))}function Hi(a,A){if(null!==(A=null!==(A=A.updateQueue)?A.lastEffect:null)){var j=A=A.next;do{if((j.tag&a)===a){var P=j.destroy;j.destroy=void 0,void 0!==P&&P()}j=j.next}while(j!==A)}}function Ii(a,A){if(null!==(A=null!==(A=A.updateQueue)?A.lastEffect:null)){var j=A=A.next;do{if((j.tag&a)===a){var P=j.create;j.destroy=P()}j=j.next}while(j!==A)}}function Ji(a,A,j){switch(j.tag){case 0:case 11:case 15:case 22:return void Ii(3,j);case 1:if(a=j.stateNode,4&j.effectTag)if(null===A)a.componentDidMount();else{var P=j.elementType===j.type?A.memoizedProps:ig(j.type,A.memoizedProps);a.componentDidUpdate(P,A.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}return void(null!==(A=j.updateQueue)&&Cg(j,A,a));case 3:if(null!==(A=j.updateQueue)){if(a=null,null!==j.child)switch(j.child.tag){case 5:a=j.child.stateNode;break;case 1:a=j.child.stateNode}Cg(j,A,a)}return;case 5:return a=j.stateNode,void(null===A&&4&j.effectTag&&Fd(j.type,j.memoizedProps)&&a.focus());case 6:case 4:case 12:return;case 13:return void(null===j.memoizedState&&(j=j.alternate,null!==j&&(j=j.memoizedState,null!==j&&(j=j.dehydrated,null!==j&&Vc(j)))));case 19:case 17:case 20:case 21:return}throw Error(u(163))}function Ki(a,A,j){switch("function"===typeof yo&&yo(A),A.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(a=A.updateQueue)&&null!==(a=a.lastEffect)){var P=a.next;cg(97<j?97:j,(function(){var a=P;do{var j=a.destroy;if(void 0!==j){var B=A;try{j()}catch(q){Ei(B,q)}}a=a.next}while(a!==P)}))}break;case 1:Fi(A),"function"===typeof(j=A.stateNode).componentWillUnmount&&function Di(a,A){try{A.props=a.memoizedProps,A.state=a.memoizedState,A.componentWillUnmount()}catch(j){Ei(a,j)}}(A,j);break;case 5:Fi(A);break;case 4:Mi(a,A,j)}}function Ni(a){var A=a.alternate;a.return=null,a.child=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.alternate=null,a.firstEffect=null,a.lastEffect=null,a.pendingProps=null,a.memoizedProps=null,a.stateNode=null,null!==A&&Ni(A)}function Oi(a){return 5===a.tag||3===a.tag||4===a.tag}function Pi(a){e:{for(var A=a.return;null!==A;){if(Oi(A)){var j=A;break e}A=A.return}throw Error(u(160))}switch(A=j.stateNode,j.tag){case 5:var P=!1;break;case 3:case 4:A=A.containerInfo,P=!0;break;default:throw Error(u(161))}16&j.effectTag&&(Rb(A,""),j.effectTag&=-17);e:t:for(j=a;;){for(;null===j.sibling;){if(null===j.return||Oi(j.return)){j=null;break e}j=j.return}for(j.sibling.return=j.return,j=j.sibling;5!==j.tag&&6!==j.tag&&18!==j.tag;){if(2&j.effectTag)continue t;if(null===j.child||4===j.tag)continue t;j.child.return=j,j=j.child}if(!(2&j.effectTag)){j=j.stateNode;break e}}P?function Qi(a,A,j){var P=a.tag,B=5===P||6===P;if(B)a=B?a.stateNode:a.stateNode.instance,A?8===j.nodeType?j.parentNode.insertBefore(a,A):j.insertBefore(a,A):(8===j.nodeType?(A=j.parentNode).insertBefore(a,j):(A=j).appendChild(a),null!==(j=j._reactRootContainer)&&void 0!==j||null!==A.onclick||(A.onclick=sd));else if(4!==P&&null!==(a=a.child))for(Qi(a,A,j),a=a.sibling;null!==a;)Qi(a,A,j),a=a.sibling}(a,j,A):function Ri(a,A,j){var P=a.tag,B=5===P||6===P;if(B)a=B?a.stateNode:a.stateNode.instance,A?j.insertBefore(a,A):j.appendChild(a);else if(4!==P&&null!==(a=a.child))for(Ri(a,A,j),a=a.sibling;null!==a;)Ri(a,A,j),a=a.sibling}(a,j,A)}function Mi(a,A,j){for(var P,B,q=A,ne=!1;;){if(!ne){ne=q.return;e:for(;;){if(null===ne)throw Error(u(160));switch(P=ne.stateNode,ne.tag){case 5:B=!1;break e;case 3:case 4:P=P.containerInfo,B=!0;break e}ne=ne.return}ne=!0}if(5===q.tag||6===q.tag){e:for(var ie=a,oe=q,se=j,le=oe;;)if(Ki(ie,le,se),null!==le.child&&4!==le.tag)le.child.return=le,le=le.child;else{if(le===oe)break e;for(;null===le.sibling;){if(null===le.return||le.return===oe)break e;le=le.return}le.sibling.return=le.return,le=le.sibling}B?(ie=P,oe=q.stateNode,8===ie.nodeType?ie.parentNode.removeChild(oe):ie.removeChild(oe)):P.removeChild(q.stateNode)}else if(4===q.tag){if(null!==q.child){P=q.stateNode.containerInfo,B=!0,q.child.return=q,q=q.child;continue}}else if(Ki(a,q,j),null!==q.child){q.child.return=q,q=q.child;continue}if(q===A)break;for(;null===q.sibling;){if(null===q.return||q.return===A)return;4===(q=q.return).tag&&(ne=!1)}q.sibling.return=q.return,q=q.sibling}}function Si(a,A){switch(A.tag){case 0:case 11:case 14:case 15:case 22:return void Hi(3,A);case 1:return;case 5:var j=A.stateNode;if(null!=j){var P=A.memoizedProps,B=null!==a?a.memoizedProps:P;a=A.type;var q=A.updateQueue;if(A.updateQueue=null,null!==q){for(j[cn]=P,"input"===a&&"radio"===P.type&&null!=P.name&&Bb(j,P),pd(a,B),A=pd(a,P),B=0;B<q.length;B+=2){var ne=q[B],ie=q[B+1];"style"===ne?md(j,ie):"dangerouslySetInnerHTML"===ne?yt(j,ie):"children"===ne?Rb(j,ie):Xa(j,ne,ie,A)}switch(a){case"input":Cb(j,P);break;case"textarea":Kb(j,P);break;case"select":A=j._wrapperState.wasMultiple,j._wrapperState.wasMultiple=!!P.multiple,null!=(a=P.value)?Hb(j,!!P.multiple,a,!1):A!==!!P.multiple&&(null!=P.defaultValue?Hb(j,!!P.multiple,P.defaultValue,!0):Hb(j,!!P.multiple,P.multiple?[]:"",!1))}}}return;case 6:if(null===A.stateNode)throw Error(u(162));return void(A.stateNode.nodeValue=A.memoizedProps);case 3:return void((A=A.stateNode).hydrate&&(A.hydrate=!1,Vc(A.containerInfo)));case 12:return;case 13:if(j=A,null===A.memoizedState?P=!1:(P=!0,j=A.child,io=Br()),null!==j)e:for(a=j;;){if(5===a.tag)q=a.stateNode,P?"function"===typeof(q=q.style).setProperty?q.setProperty("display","none","important"):q.display="none":(q=a.stateNode,B=void 0!==(B=a.memoizedProps.style)&&null!==B&&B.hasOwnProperty("display")?B.display:null,q.style.display=ld("display",B));else if(6===a.tag)a.stateNode.nodeValue=P?"":a.memoizedProps;else{if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){(q=a.child.sibling).return=a,a=q;continue}if(null!==a.child){a.child.return=a,a=a.child;continue}}if(a===j)break;for(;null===a.sibling;){if(null===a.return||a.return===j)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}return void Ui(A);case 19:return void Ui(A);case 17:return}throw Error(u(163))}function Ui(a){var A=a.updateQueue;if(null!==A){a.updateQueue=null;var j=a.stateNode;null===j&&(j=a.stateNode=new ya),A.forEach((function(A){var P=Vi.bind(null,a,A);j.has(A)||(j.add(A),A.then(P,P))}))}}var _a="function"===typeof WeakMap?WeakMap:Map;function Xi(a,A,j){(j=wg(j,null)).tag=3,j.payload={element:null};var P=A.value;return j.callback=function(){oo||(oo=!0,so=P),Ci(a,A)},j}function $i(a,A,j){(j=wg(j,null)).tag=3;var P=a.type.getDerivedStateFromError;if("function"===typeof P){var B=A.value;j.payload=function(){return Ci(a,A),P(B)}}var q=a.stateNode;return null!==q&&"function"===typeof q.componentDidCatch&&(j.callback=function(){"function"!==typeof P&&(null===uo?uo=new Set([this]):uo.add(this),Ci(a,A));var j=A.stack;this.componentDidCatch(A.value,{componentStack:null!==j?j:""})}),j}var wa,Oa=Math.ceil,Aa=Ye.ReactCurrentDispatcher,Pa=Ye.ReactCurrentOwner,Na=0,Ba=3,Ua=4,qa=0,Wa=null,Ya=null,$a=0,Ka=Na,Ja=null,Qa=1073741823,Za=1073741823,eo=null,no=0,ro=!1,io=0,ao=null,oo=!1,so=null,uo=null,lo=!1,co=null,fo=90,ho=null,po=0,go=null,mo=0;function Gg(){return 0!==(48&qa)?1073741821-(Br()/10|0):0!==mo?mo:mo=1073741821-(Br()/10|0)}function Hg(a,A,j){if(0===(2&(A=A.mode)))return 1073741823;var P=ag();if(0===(4&A))return 99===P?1073741823:1073741822;if(0!==(16&qa))return $a;if(null!==j)a=hg(a,0|j.timeoutMs||5e3,250);else switch(P){case 99:a=1073741823;break;case 98:a=hg(a,150,100);break;case 97:case 96:a=hg(a,5e3,250);break;case 95:a=2;break;default:throw Error(u(326))}return null!==Wa&&a===$a&&--a,a}function Ig(a,A){if(50<po)throw po=0,go=null,Error(u(185));if(null!==(a=xj(a,A))){var j=ag();1073741823===A?0!==(8&qa)&&0===(48&qa)?yj(a):(Z(a),0===qa&&gg()):Z(a),0===(4&qa)||98!==j&&99!==j||(null===ho?ho=new Map([[a,A]]):(void 0===(j=ho.get(a))||j>A)&&ho.set(a,A))}}function xj(a,A){a.expirationTime<A&&(a.expirationTime=A);var j=a.alternate;null!==j&&j.expirationTime<A&&(j.expirationTime=A);var P=a.return,B=null;if(null===P&&3===a.tag)B=a.stateNode;else for(;null!==P;){if(j=P.alternate,P.childExpirationTime<A&&(P.childExpirationTime=A),null!==j&&j.childExpirationTime<A&&(j.childExpirationTime=A),null===P.return&&3===P.tag){B=P.stateNode;break}P=P.return}return null!==B&&(Wa===B&&(Bg(A),Ka===Ua&&xi(B,$a)),yi(B,A)),B}function zj(a){var A=a.lastExpiredTime;if(0!==A)return A;if(!Aj(a,A=a.firstPendingTime))return A;var j=a.lastPingedTime;return 2>=(a=j>(a=a.nextKnownPendingLevel)?j:a)&&A!==a?0:a}function Z(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=eg(yj.bind(null,a));else{var A=zj(a),j=a.callbackNode;if(0===A)null!==j&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var P=Gg();if(1073741823===A?P=99:1===A||2===A?P=95:P=0>=(P=10*(1073741821-A)-10*(1073741821-P))?99:250>=P?98:5250>=P?97:95,null!==j){var B=a.callbackPriority;if(a.callbackExpirationTime===A&&B>=P)return;j!==Fr&&kr(j)}a.callbackExpirationTime=A,a.callbackPriority=P,A=1073741823===A?eg(yj.bind(null,a)):dg(P,Bj.bind(null,a),{timeout:10*(1073741821-A)-Br()}),a.callbackNode=A}}}function Bj(a,A){if(mo=0,A)return Cj(a,A=Gg()),Z(a),null;var j=zj(a);if(0!==j){if(A=a.callbackNode,0!==(48&qa))throw Error(u(327));if(Dj(),a===Wa&&j===$a||Ej(a,j),null!==Ya){var P=qa;qa|=16;for(var B=Fj();;)try{Gj();break}catch(ie){Hj(a,ie)}if(ng(),qa=P,Aa.current=B,1===Ka)throw A=Ja,Ej(a,j),xi(a,j),Z(a),A;if(null===Ya)switch(B=a.finishedWork=a.current.alternate,a.finishedExpirationTime=j,P=Ka,Wa=null,P){case Na:case 1:throw Error(u(345));case 2:Cj(a,2<j?2:j);break;case Ba:if(xi(a,j),j===(P=a.lastSuspendedTime)&&(a.nextKnownPendingLevel=Ij(B)),1073741823===Qa&&10<(B=io+500-Br())){if(ro){var q=a.lastPingedTime;if(0===q||q>=j){a.lastPingedTime=j,Ej(a,j);break}}if(0!==(q=zj(a))&&q!==j)break;if(0!==P&&P!==j){a.lastPingedTime=P;break}a.timeoutHandle=an(Jj.bind(null,a),B);break}Jj(a);break;case Ua:if(xi(a,j),j===(P=a.lastSuspendedTime)&&(a.nextKnownPendingLevel=Ij(B)),ro&&(0===(B=a.lastPingedTime)||B>=j)){a.lastPingedTime=j,Ej(a,j);break}if(0!==(B=zj(a))&&B!==j)break;if(0!==P&&P!==j){a.lastPingedTime=P;break}if(1073741823!==Za?P=10*(1073741821-Za)-Br():1073741823===Qa?P=0:(P=10*(1073741821-Qa)-5e3,0>(P=(B=Br())-P)&&(P=0),(j=10*(1073741821-j)-B)<(P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*Oa(P/1960))-P)&&(P=j)),10<P){a.timeoutHandle=an(Jj.bind(null,a),P);break}Jj(a);break;case 5:if(1073741823!==Qa&&null!==eo){q=Qa;var ne=eo;if(0>=(P=0|ne.busyMinDurationMs)?P=0:(B=0|ne.busyDelayMs,P=(q=Br()-(10*(1073741821-q)-(0|ne.timeoutMs||5e3)))<=B?0:B+P-q),10<P){xi(a,j),a.timeoutHandle=an(Jj.bind(null,a),P);break}}Jj(a);break;default:throw Error(u(329))}if(Z(a),a.callbackNode===A)return Bj.bind(null,a)}}return null}function yj(a){var A=a.lastExpiredTime;if(A=0!==A?A:1073741823,0!==(48&qa))throw Error(u(327));if(Dj(),a===Wa&&A===$a||Ej(a,A),null!==Ya){var j=qa;qa|=16;for(var P=Fj();;)try{Kj();break}catch(B){Hj(a,B)}if(ng(),qa=j,Aa.current=P,1===Ka)throw j=Ja,Ej(a,A),xi(a,A),Z(a),j;if(null!==Ya)throw Error(u(261));a.finishedWork=a.current.alternate,a.finishedExpirationTime=A,Wa=null,Jj(a),Z(a)}return null}function Mj(a,A){var j=qa;qa|=1;try{return a(A)}finally{0===(qa=j)&&gg()}}function Nj(a,A){var j=qa;qa&=-2,qa|=8;try{return a(A)}finally{0===(qa=j)&&gg()}}function Ej(a,A){a.finishedWork=null,a.finishedExpirationTime=0;var j=a.timeoutHandle;if(-1!==j&&(a.timeoutHandle=-1,sn(j)),null!==Ya)for(j=Ya.return;null!==j;){var P=j;switch(P.tag){case 1:null!==(P=P.type.childContextTypes)&&void 0!==P&&Df();break;case 3:eh(),H(yr),H(vr);break;case 5:gh(P);break;case 4:eh();break;case 13:case 19:H(ii);break;case 10:og(P)}j=j.return}Wa=a,Ya=Sg(a.current,null),$a=A,Ka=Na,Ja=null,Za=Qa=1073741823,eo=null,no=0,ro=!1}function Hj(a,A){for(;;){try{if(ng(),oi.current=Wi,Bi)for(var j=_i.memoizedState;null!==j;){var P=j.queue;null!==P&&(P.pending=null),j=j.next}if(vi=0,Ti=wi=_i=null,Bi=!1,null===Ya||null===Ya.return)return Ka=1,Ja=A,Ya=null;e:{var B=a,q=Ya.return,ne=Ya,ie=A;if(A=$a,ne.effectTag|=2048,ne.firstEffect=ne.lastEffect=null,null!==ie&&"object"===typeof ie&&"function"===typeof ie.then){var oe=ie;if(0===(2&ne.mode)){var se=ne.alternate;se?(ne.updateQueue=se.updateQueue,ne.memoizedState=se.memoizedState,ne.expirationTime=se.expirationTime):(ne.updateQueue=null,ne.memoizedState=null)}var le=0!==(1&ii.current),he=q;do{var pe;if(pe=13===he.tag){var ge=he.memoizedState;if(null!==ge)pe=null!==ge.dehydrated;else{var me=he.memoizedProps;pe=void 0!==me.fallback&&(!0!==me.unstable_avoidThisFallback||!le)}}if(pe){var ve=he.updateQueue;if(null===ve){var ye=new Set;ye.add(oe),he.updateQueue=ye}else ve.add(oe);if(0===(2&he.mode)){if(he.effectTag|=64,ne.effectTag&=-2981,1===ne.tag)if(null===ne.alternate)ne.tag=17;else{var _e=wg(1073741823,null);_e.tag=2,xg(ne,_e)}ne.expirationTime=1073741823;break e}ie=void 0,ne=A;var we=B.pingCache;if(null===we?(we=B.pingCache=new _a,ie=new Set,we.set(oe,ie)):void 0===(ie=we.get(oe))&&(ie=new Set,we.set(oe,ie)),!ie.has(ne)){ie.add(ne);var ke=Oj.bind(null,B,oe,ne);oe.then(ke,ke)}he.effectTag|=4096,he.expirationTime=A;break e}he=he.return}while(null!==he);ie=Error((pb(ne.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+qb(ne))}5!==Ka&&(Ka=2),ie=Ai(ie,ne),he=q;do{switch(he.tag){case 3:oe=ie,he.effectTag|=4096,he.expirationTime=A,yg(he,Xi(he,oe,A));break e;case 1:oe=ie;var Oe=he.type,Se=he.stateNode;if(0===(64&he.effectTag)&&("function"===typeof Oe.getDerivedStateFromError||null!==Se&&"function"===typeof Se.componentDidCatch&&(null===uo||!uo.has(Se)))){he.effectTag|=4096,he.expirationTime=A,yg(he,$i(he,oe,A));break e}}he=he.return}while(null!==he)}Ya=Pj(Ya)}catch(Te){A=Te;continue}break}}function Fj(){var a=Aa.current;return Aa.current=Wi,null===a?Wi:a}function Ag(a,A){a<Qa&&2<a&&(Qa=a),null!==A&&a<Za&&2<a&&(Za=a,eo=A)}function Bg(a){a>no&&(no=a)}function Kj(){for(;null!==Ya;)Ya=Qj(Ya)}function Gj(){for(;null!==Ya&&!Pr();)Ya=Qj(Ya)}function Qj(a){var A=wa(a.alternate,a,$a);return a.memoizedProps=a.pendingProps,null===A&&(A=Pj(a)),Pa.current=null,A}function Pj(a){Ya=a;do{var A=Ya.alternate;if(a=Ya.return,0===(2048&Ya.effectTag)){if(A=si(A,Ya,$a),1===$a||1!==Ya.childExpirationTime){for(var j=0,P=Ya.child;null!==P;){var B=P.expirationTime,q=P.childExpirationTime;B>j&&(j=B),q>j&&(j=q),P=P.sibling}Ya.childExpirationTime=j}if(null!==A)return A;null!==a&&0===(2048&a.effectTag)&&(null===a.firstEffect&&(a.firstEffect=Ya.firstEffect),null!==Ya.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=Ya.firstEffect),a.lastEffect=Ya.lastEffect),1<Ya.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=Ya:a.firstEffect=Ya,a.lastEffect=Ya))}else{if(null!==(A=zi(Ya)))return A.effectTag&=2047,A;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=2048)}if(null!==(A=Ya.sibling))return A;Ya=a}while(null!==Ya);return Ka===Na&&(Ka=5),null}function Ij(a){var A=a.expirationTime;return A>(a=a.childExpirationTime)?A:a}function Jj(a){var A=ag();return cg(99,Sj.bind(null,a,A)),null}function Sj(a,A){do{Dj()}while(null!==co);if(0!==(48&qa))throw Error(u(327));var j=a.finishedWork,P=a.finishedExpirationTime;if(null===j)return null;if(a.finishedWork=null,a.finishedExpirationTime=0,j===a.current)throw Error(u(177));a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90,a.nextKnownPendingLevel=0;var B=Ij(j);if(a.firstPendingTime=B,P<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:P<=a.firstSuspendedTime&&(a.firstSuspendedTime=P-1),P<=a.lastPingedTime&&(a.lastPingedTime=0),P<=a.lastExpiredTime&&(a.lastExpiredTime=0),a===Wa&&(Ya=Wa=null,$a=0),1<j.effectTag?null!==j.lastEffect?(j.lastEffect.nextEffect=j,B=j.firstEffect):B=j:B=j.firstEffect,null!==B){var q=qa;qa|=32,Pa.current=null,nn=Jt;var ne=xd();if(yd(ne)){if("selectionStart"in ne)var ie={start:ne.selectionStart,end:ne.selectionEnd};else e:{var oe=(ie=(ie=ne.ownerDocument)&&ie.defaultView||window).getSelection&&ie.getSelection();if(oe&&0!==oe.rangeCount){ie=oe.anchorNode;var se=oe.anchorOffset,le=oe.focusNode;oe=oe.focusOffset;try{ie.nodeType,le.nodeType}catch(Fe){ie=null;break e}var he=0,pe=-1,ge=-1,me=0,ve=0,ye=ne,_e=null;t:for(;;){for(var we;ye!==ie||0!==se&&3!==ye.nodeType||(pe=he+se),ye!==le||0!==oe&&3!==ye.nodeType||(ge=he+oe),3===ye.nodeType&&(he+=ye.nodeValue.length),null!==(we=ye.firstChild);)_e=ye,ye=we;for(;;){if(ye===ne)break t;if(_e===ie&&++me===se&&(pe=he),_e===le&&++ve===oe&&(ge=he),null!==(we=ye.nextSibling))break;_e=(ye=_e).parentNode}ye=we}ie=-1===pe||-1===ge?null:{start:pe,end:ge}}else ie=null}ie=ie||{start:0,end:0}}else ie=null;rn={activeElementDetached:null,focusedElem:ne,selectionRange:ie},Jt=!1,ao=B;do{try{Tj()}catch(Fe){if(null===ao)throw Error(u(330));Ei(ao,Fe),ao=ao.nextEffect}}while(null!==ao);ao=B;do{try{for(ne=a,ie=A;null!==ao;){var ke=ao.effectTag;if(16&ke&&Rb(ao.stateNode,""),128&ke){var Oe=ao.alternate;if(null!==Oe){var Se=Oe.ref;null!==Se&&("function"===typeof Se?Se(null):Se.current=null)}}switch(1038&ke){case 2:Pi(ao),ao.effectTag&=-3;break;case 6:Pi(ao),ao.effectTag&=-3,Si(ao.alternate,ao);break;case 1024:ao.effectTag&=-1025;break;case 1028:ao.effectTag&=-1025,Si(ao.alternate,ao);break;case 4:Si(ao.alternate,ao);break;case 8:Mi(ne,se=ao,ie),Ni(se)}ao=ao.nextEffect}}catch(Fe){if(null===ao)throw Error(u(330));Ei(ao,Fe),ao=ao.nextEffect}}while(null!==ao);if(Se=rn,Oe=xd(),ke=Se.focusedElem,ie=Se.selectionRange,Oe!==ke&&ke&&ke.ownerDocument&&function wd(a,A){return!(!a||!A)&&(a===A||(!a||3!==a.nodeType)&&(A&&3===A.nodeType?wd(a,A.parentNode):"contains"in a?a.contains(A):!!a.compareDocumentPosition&&!!(16&a.compareDocumentPosition(A))))}(ke.ownerDocument.documentElement,ke)){null!==ie&&yd(ke)&&(Oe=ie.start,void 0===(Se=ie.end)&&(Se=Oe),"selectionStart"in ke?(ke.selectionStart=Oe,ke.selectionEnd=Math.min(Se,ke.value.length)):(Se=(Oe=ke.ownerDocument||document)&&Oe.defaultView||window).getSelection&&(Se=Se.getSelection(),se=ke.textContent.length,ne=Math.min(ie.start,se),ie=void 0===ie.end?ne:Math.min(ie.end,se),!Se.extend&&ne>ie&&(se=ie,ie=ne,ne=se),se=vd(ke,ne),le=vd(ke,ie),se&&le&&(1!==Se.rangeCount||Se.anchorNode!==se.node||Se.anchorOffset!==se.offset||Se.focusNode!==le.node||Se.focusOffset!==le.offset)&&((Oe=Oe.createRange()).setStart(se.node,se.offset),Se.removeAllRanges(),ne>ie?(Se.addRange(Oe),Se.extend(le.node,le.offset)):(Oe.setEnd(le.node,le.offset),Se.addRange(Oe))))),Oe=[];for(Se=ke;Se=Se.parentNode;)1===Se.nodeType&&Oe.push({element:Se,left:Se.scrollLeft,top:Se.scrollTop});for("function"===typeof ke.focus&&ke.focus(),ke=0;ke<Oe.length;ke++)(Se=Oe[ke]).element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}Jt=!!nn,rn=nn=null,a.current=j,ao=B;do{try{for(ke=a;null!==ao;){var Te=ao.effectTag;if(36&Te&&Ji(ke,ao.alternate,ao),128&Te){Oe=void 0;var Ae=ao.ref;if(null!==Ae){var je=ao.stateNode;switch(ao.tag){case 5:Oe=je;break;default:Oe=je}"function"===typeof Ae?Ae(Oe):Ae.current=Oe}}ao=ao.nextEffect}}catch(Fe){if(null===ao)throw Error(u(330));Ei(ao,Fe),ao=ao.nextEffect}}while(null!==ao);ao=null,Rr(),qa=q}else a.current=j;if(lo)lo=!1,co=a,fo=A;else for(ao=B;null!==ao;)A=ao.nextEffect,ao.nextEffect=null,ao=A;if(0===(A=a.firstPendingTime)&&(uo=null),1073741823===A?a===go?po++:(po=0,go=a):po=0,"function"===typeof vo&&vo(j.stateNode,P),Z(a),oo)throw oo=!1,a=so,so=null,a;return 0!==(8&qa)||gg(),null}function Tj(){for(;null!==ao;){var a=ao.effectTag;0!==(256&a)&&Gi(ao.alternate,ao),0===(512&a)||lo||(lo=!0,dg(97,(function(){return Dj(),null}))),ao=ao.nextEffect}}function Dj(){if(90!==fo){var a=97<fo?97:fo;return fo=90,cg(a,Vj)}}function Vj(){if(null===co)return!1;var a=co;if(co=null,0!==(48&qa))throw Error(u(331));var A=qa;for(qa|=32,a=a.current.firstEffect;null!==a;){try{var j=a;if(0!==(512&j.effectTag))switch(j.tag){case 0:case 11:case 15:case 22:Hi(5,j),Ii(5,j)}}catch(P){if(null===a)throw Error(u(330));Ei(a,P)}j=a.nextEffect,a.nextEffect=null,a=j}return qa=A,gg(),!0}function Wj(a,A,j){xg(a,A=Xi(a,A=Ai(j,A),1073741823)),null!==(a=xj(a,1073741823))&&Z(a)}function Ei(a,A){if(3===a.tag)Wj(a,a,A);else for(var j=a.return;null!==j;){if(3===j.tag){Wj(j,a,A);break}if(1===j.tag){var P=j.stateNode;if("function"===typeof j.type.getDerivedStateFromError||"function"===typeof P.componentDidCatch&&(null===uo||!uo.has(P))){xg(j,a=$i(j,a=Ai(A,a),1073741823)),null!==(j=xj(j,1073741823))&&Z(j);break}}j=j.return}}function Oj(a,A,j){var P=a.pingCache;null!==P&&P.delete(A),Wa===a&&$a===j?Ka===Ua||Ka===Ba&&1073741823===Qa&&Br()-io<500?Ej(a,$a):ro=!0:Aj(a,j)&&(0!==(A=a.lastPingedTime)&&A<j||(a.lastPingedTime=j,Z(a)))}function Vi(a,A){var j=a.stateNode;null!==j&&j.delete(A),0===(A=0)&&(A=Hg(A=Gg(),a,null)),null!==(a=xj(a,A))&&Z(a)}wa=function Rj(a,A,j){var P=A.expirationTime;if(null!==a){var B=A.pendingProps;if(a.memoizedProps!==B||yr.current)da=!0;else{if(P<j){switch(da=!1,A.tag){case 3:hi(A),Xh();break;case 5:if(fh(A),4&A.mode&&1!==j&&B.hidden)return A.expirationTime=A.childExpirationTime=1,null;break;case 1:L(A.type)&&Gf(A);break;case 4:dh(A,A.stateNode.containerInfo);break;case 10:P=A.memoizedProps.value,B=A.type._context,I(Ur,B._currentValue),B._currentValue=P;break;case 13:if(null!==A.memoizedState)return 0!==(P=A.child.childExpirationTime)&&P>=j?ji(a,A,j):(I(ii,1&ii.current),null!==(A=$h(a,A,j))?A.sibling:null);I(ii,1&ii.current);break;case 19:if(P=A.childExpirationTime>=j,0!==(64&a.effectTag)){if(P)return mi(a,A,j);A.effectTag|=64}if(null!==(B=A.memoizedState)&&(B.rendering=null,B.tail=null),I(ii,ii.current),!P)return null}return $h(a,A,j)}da=!1}}else da=!1;switch(A.expirationTime=0,A.tag){case 2:if(P=A.type,null!==a&&(a.alternate=null,A.alternate=null,A.effectTag|=2),a=A.pendingProps,B=Cf(A,vr.current),qg(A,j),B=oh(null,A,P,a,B,j),A.effectTag|=1,"object"===typeof B&&null!==B&&"function"===typeof B.render&&void 0===B.$$typeof){if(A.tag=1,A.memoizedState=null,A.updateQueue=null,L(P)){var q=!0;Gf(A)}else q=!1;A.memoizedState=null!==B.state&&void 0!==B.state?B.state:null,ug(A);var ne=P.getDerivedStateFromProps;"function"===typeof ne&&Fg(A,P,ne,a),B.updater=Yr,A.stateNode=B,B._reactInternalFiber=A,Ng(A,P,a,j),A=gi(null,A,P,!0,q,j)}else A.tag=0,R(null,A,B,j),A=A.child;return A;case 16:e:{if(B=A.elementType,null!==a&&(a.alternate=null,A.alternate=null,A.effectTag|=2),a=A.pendingProps,function ob(a){if(-1===a._status){a._status=0;var A=a._ctor;A=A(),a._result=A,A.then((function(A){0===a._status&&(A=A.default,a._status=1,a._result=A)}),(function(A){0===a._status&&(a._status=2,a._result=A)}))}}(B),1!==B._status)throw B._result;switch(B=B._result,A.type=B,q=A.tag=function Xj(a){if("function"===typeof a)return bi(a)?1:0;if(void 0!==a&&null!==a){if((a=a.$$typeof)===ut)return 11;if(a===ft)return 14}return 2}(B),a=ig(B,a),q){case 0:A=di(null,A,B,a,j);break e;case 1:A=fi(null,A,B,a,j);break e;case 11:A=Zh(null,A,B,a,j);break e;case 14:A=ai(null,A,B,ig(B.type,a),P,j);break e}throw Error(u(306,B,""))}return A;case 0:return P=A.type,B=A.pendingProps,di(a,A,P,B=A.elementType===P?B:ig(P,B),j);case 1:return P=A.type,B=A.pendingProps,fi(a,A,P,B=A.elementType===P?B:ig(P,B),j);case 3:if(hi(A),P=A.updateQueue,null===a||null===P)throw Error(u(282));if(P=A.pendingProps,B=null!==(B=A.memoizedState)?B.element:null,vg(a,A),zg(A,P,null,j),(P=A.memoizedState.element)===B)Xh(),A=$h(a,A,j);else{if((B=A.stateNode.hydrate)&&(ia=Jd(A.stateNode.containerInfo.firstChild),na=A,B=la=!0),B)for(j=Xr(A,null,P,j),A.child=j;j;)j.effectTag=-3&j.effectTag|1024,j=j.sibling;else R(a,A,P,j),Xh();A=A.child}return A;case 5:return fh(A),null===a&&Uh(A),P=A.type,B=A.pendingProps,q=null!==a?a.memoizedProps:null,ne=B.children,Gd(P,B)?ne=null:null!==q&&Gd(P,q)&&(A.effectTag|=16),ei(a,A),4&A.mode&&1!==j&&B.hidden?(A.expirationTime=A.childExpirationTime=1,A=null):(R(a,A,ne,j),A=A.child),A;case 6:return null===a&&Uh(A),null;case 13:return ji(a,A,j);case 4:return dh(A,A.stateNode.containerInfo),P=A.pendingProps,null===a?A.child=Kr(A,null,P,j):R(a,A,P,j),A.child;case 11:return P=A.type,B=A.pendingProps,Zh(a,A,P,B=A.elementType===P?B:ig(P,B),j);case 7:return R(a,A,A.pendingProps,j),A.child;case 8:case 12:return R(a,A,A.pendingProps.children,j),A.child;case 10:e:{P=A.type._context,B=A.pendingProps,ne=A.memoizedProps,q=B.value;var ie=A.type._context;if(I(Ur,ie._currentValue),ie._currentValue=q,null!==ne)if(ie=ne.value,0===(q=Hn(ie,q)?0:0|("function"===typeof P._calculateChangedBits?P._calculateChangedBits(ie,q):1073741823))){if(ne.children===B.children&&!yr.current){A=$h(a,A,j);break e}}else for(null!==(ie=A.child)&&(ie.return=A);null!==ie;){var oe=ie.dependencies;if(null!==oe){ne=ie.child;for(var se=oe.firstContext;null!==se;){if(se.context===P&&0!==(se.observedBits&q)){1===ie.tag&&((se=wg(j,null)).tag=2,xg(ie,se)),ie.expirationTime<j&&(ie.expirationTime=j),null!==(se=ie.alternate)&&se.expirationTime<j&&(se.expirationTime=j),pg(ie.return,j),oe.expirationTime<j&&(oe.expirationTime=j);break}se=se.next}}else ne=10===ie.tag&&ie.type===A.type?null:ie.child;if(null!==ne)ne.return=ie;else for(ne=ie;null!==ne;){if(ne===A){ne=null;break}if(null!==(ie=ne.sibling)){ie.return=ne.return,ne=ie;break}ne=ne.return}ie=ne}R(a,A,B.children,j),A=A.child}return A;case 9:return B=A.type,P=(q=A.pendingProps).children,qg(A,j),P=P(B=sg(B,q.unstable_observedBits)),A.effectTag|=1,R(a,A,P,j),A.child;case 14:return q=ig(B=A.type,A.pendingProps),ai(a,A,B,q=ig(B.type,q),P,j);case 15:return ci(a,A,A.type,A.pendingProps,P,j);case 17:return P=A.type,B=A.pendingProps,B=A.elementType===P?B:ig(P,B),null!==a&&(a.alternate=null,A.alternate=null,A.effectTag|=2),A.tag=1,L(P)?(a=!0,Gf(A)):a=!1,qg(A,j),Lg(A,P,B),Ng(A,P,B,j),gi(null,A,P,!0,a,j);case 19:return mi(a,A,j)}throw Error(u(156,A.tag))};var vo=null,yo=null;function Zj(a,A,j,P){this.tag=a,this.key=j,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=A,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sh(a,A,j,P){return new Zj(a,A,j,P)}function bi(a){return!(!(a=a.prototype)||!a.isReactComponent)}function Sg(a,A){var j=a.alternate;return null===j?((j=Sh(a.tag,A,a.key,a.mode)).elementType=a.elementType,j.type=a.type,j.stateNode=a.stateNode,j.alternate=a,a.alternate=j):(j.pendingProps=A,j.effectTag=0,j.nextEffect=null,j.firstEffect=null,j.lastEffect=null),j.childExpirationTime=a.childExpirationTime,j.expirationTime=a.expirationTime,j.child=a.child,j.memoizedProps=a.memoizedProps,j.memoizedState=a.memoizedState,j.updateQueue=a.updateQueue,A=a.dependencies,j.dependencies=null===A?null:{expirationTime:A.expirationTime,firstContext:A.firstContext,responders:A.responders},j.sibling=a.sibling,j.index=a.index,j.ref=a.ref,j}function Ug(a,A,j,P,B,q){var ne=2;if(P=a,"function"===typeof a)bi(a)&&(ne=1);else if("string"===typeof a)ne=5;else e:switch(a){case nt:return Wg(j.children,B,q,A);case st:ne=8,B|=7;break;case rt:ne=8,B|=1;break;case it:return(a=Sh(12,j,A,8|B)).elementType=it,a.type=it,a.expirationTime=q,a;case lt:return(a=Sh(13,j,A,B)).type=lt,a.elementType=lt,a.expirationTime=q,a;case ct:return(a=Sh(19,j,A,B)).elementType=ct,a.expirationTime=q,a;default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case at:ne=10;break e;case ot:ne=9;break e;case ut:ne=11;break e;case ft:ne=14;break e;case dt:ne=16,P=null;break e;case ht:ne=22;break e}throw Error(u(130,null==a?a:typeof a,""))}return(A=Sh(ne,j,A,B)).elementType=a,A.type=P,A.expirationTime=q,A}function Wg(a,A,j,P){return(a=Sh(7,a,P,A)).expirationTime=j,a}function Tg(a,A,j){return(a=Sh(6,a,null,A)).expirationTime=j,a}function Vg(a,A,j){return(A=Sh(4,null!==a.children?a.children:[],a.key,A)).expirationTime=j,A.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},A}function ak(a,A,j){this.tag=A,this.current=null,this.containerInfo=a,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=j,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Aj(a,A){var j=a.firstSuspendedTime;return a=a.lastSuspendedTime,0!==j&&j>=A&&a<=A}function xi(a,A){var j=a.firstSuspendedTime,P=a.lastSuspendedTime;j<A&&(a.firstSuspendedTime=A),(P>A||0===j)&&(a.lastSuspendedTime=A),A<=a.lastPingedTime&&(a.lastPingedTime=0),A<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yi(a,A){A>a.firstPendingTime&&(a.firstPendingTime=A);var j=a.firstSuspendedTime;0!==j&&(A>=j?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:A>=a.lastSuspendedTime&&(a.lastSuspendedTime=A+1),A>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=A))}function Cj(a,A){var j=a.lastExpiredTime;(0===j||j>A)&&(a.lastExpiredTime=A)}function bk(a,A,j,P){var B=A.current,q=Gg(),ne=Gr.suspense;q=Hg(q,B,ne);e:if(j){t:{if(dc(j=j._reactInternalFiber)!==j||1!==j.tag)throw Error(u(170));var ie=j;do{switch(ie.tag){case 3:ie=ie.stateNode.context;break t;case 1:if(L(ie.type)){ie=ie.stateNode.__reactInternalMemoizedMergedChildContext;break t}}ie=ie.return}while(null!==ie);throw Error(u(171))}if(1===j.tag){var oe=j.type;if(L(oe)){j=Ff(j,oe,ie);break e}}j=ie}else j=mr;return null===A.context?A.context=j:A.pendingContext=j,(A=wg(q,ne)).payload={element:a},null!==(P=void 0===P?null:P)&&(A.callback=P),xg(B,A),Ig(B,q),q}function ck(a){if(!(a=a.current).child)return null;switch(a.child.tag){case 5:default:return a.child.stateNode}}function dk(a,A){null!==(a=a.memoizedState)&&null!==a.dehydrated&&a.retryTime<A&&(a.retryTime=A)}function ek(a,A){dk(a,A),(a=a.alternate)&&dk(a,A)}function fk(a,A,j){var P=new ak(a,A,j=null!=j&&!0===j.hydrate),B=Sh(3,null,null,2===A?7:1===A?3:0);P.current=B,B.stateNode=P,ug(B),a[dn]=P.current,j&&0!==A&&function Jc(a,A){var j=cc(A);zt.forEach((function(a){uc(a,A,j)})),qt.forEach((function(a){uc(a,A,j)}))}(0,9===a.nodeType?a:a.ownerDocument),this._internalRoot=P}function gk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function ik(a,A,j,P,B){var q=j._reactRootContainer;if(q){var ne=q._internalRoot;if("function"===typeof B){var ie=B;B=function e(){var a=ck(ne);ie.call(a)}}bk(A,ne,a,B)}else{if(q=j._reactRootContainer=function hk(a,A){if(A||(A=!(!(A=a?9===a.nodeType?a.documentElement:a.firstChild:null)||1!==A.nodeType||!A.hasAttribute("data-reactroot"))),!A)for(var j;j=a.lastChild;)a.removeChild(j);return new fk(a,0,A?{hydrate:!0}:void 0)}(j,P),ne=q._internalRoot,"function"===typeof B){var oe=B;B=function e(){var a=ck(ne);oe.call(a)}}Nj((function(){bk(A,ne,a,B)}))}return ck(ne)}function jk(a,A,j){var P=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:tt,key:null==P?null:""+P,children:a,containerInfo:A,implementation:j}}function kk(a,A){var j=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!gk(A))throw Error(u(200));return jk(a,A,null,j)}fk.prototype.render=function(a){bk(a,this._internalRoot,null,null)},fk.prototype.unmount=function(){var a=this._internalRoot,A=a.containerInfo;bk(null,a,null,(function(){A[dn]=null}))},At=function wc(a){if(13===a.tag){var A=hg(Gg(),150,100);Ig(a,A),ek(a,A)}},jt=function xc(a){13===a.tag&&(Ig(a,3),ek(a,3))},Ft=function yc(a){if(13===a.tag){var A=Gg();Ig(a,A=Hg(A,a,null)),ek(a,A)}},Se=function za(a,A,j){switch(A){case"input":if(Cb(a,j),A=j.name,"radio"===j.type&&null!=A){for(j=a;j.parentNode;)j=j.parentNode;for(j=j.querySelectorAll("input[name="+JSON.stringify(""+A)+'][type="radio"]'),A=0;A<j.length;A++){var P=j[A];if(P!==a&&P.form===a.form){var B=Qd(P);if(!B)throw Error(u(90));yb(P),Cb(P,B)}}}break;case"textarea":Kb(a,j);break;case"select":null!=(A=j.value)&&Hb(a,!!j.multiple,A,!1)}},Fa=Mj,Ga=function Ga(a,A,j,P,B){var q=qa;qa|=4;try{return cg(98,a.bind(null,A,j,P,B))}finally{0===(qa=q)&&gg()}},Ha=function Ha(){0===(49&qa)&&(function Lj(){if(null!==ho){var a=ho;ho=null,a.forEach((function(a,A){Cj(A,a),Z(A)})),gg()}}(),Dj())},je=function Ia(a,A){var j=qa;qa|=2;try{return a(A)}finally{0===(qa=j)&&gg()}};var bo={Events:[Nc,Pd,Qd,xa,_e,Xd,function(a){jc(a,Wd)},Da,Ea,id,mc,Dj,{current:!1}]};!function(a){var A=a.findFiberByHostInstance;(function Yj(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var A=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(A.isDisabled||!A.supportsFiber)return!0;try{var j=A.inject(a);vo=function Uj(a){try{A.onCommitFiberRoot(j,a,void 0,64===(64&a.current.effectTag))}catch(P){}},yo=function Li(a){try{A.onCommitFiberUnmount(j,a)}catch(P){}}}catch(P){}return!0})(B({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ye.ReactCurrentDispatcher,findHostInstanceByFiber:function findHostInstanceByFiber(a){return null===(a=hc(a))?null:a.stateNode},findFiberByHostInstance:function findFiberByHostInstance(a){return A?A(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:tc,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bo,A.createPortal=kk,A.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var A=a._reactInternalFiber;if(void 0===A){if("function"===typeof a.render)throw Error(u(188));throw Error(u(268,Object.keys(a)))}return a=null===(a=hc(A))?null:a.stateNode},A.flushSync=function(a,A){if(0!==(48&qa))throw Error(u(187));var j=qa;qa|=1;try{return cg(99,a.bind(null,A))}finally{qa=j,gg()}},A.hydrate=function(a,A,j){if(!gk(A))throw Error(u(200));return ik(null,a,A,!0,j)},A.render=function(a,A,j){if(!gk(A))throw Error(u(200));return ik(null,a,A,!1,j)},A.unmountComponentAtNode=function(a){if(!gk(a))throw Error(u(40));return!!a._reactRootContainer&&(Nj((function(){ik(null,null,a,!1,(function(){a._reactRootContainer=null,a[dn]=null}))})),!0)},A.unstable_batchedUpdates=Mj,A.unstable_createPortal=function(a,A){return kk(a,A,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},A.unstable_renderSubtreeIntoContainer=function(a,A,j,P){if(!gk(j))throw Error(u(200));if(null==a||void 0===a._reactInternalFiber)throw Error(u(38));return ik(a,A,j,!1,P)},A.version="16.14.0"},function(a,A,j){"use strict";a.exports=j(250)},function(a,A,j){"use strict";var P,B,q,ne,ie;if("undefined"===typeof window||"function"!==typeof MessageChannel){var oe=null,se=null,le=function t(){if(null!==oe)try{var a=A.unstable_now();oe(!0,a),oe=null}catch(j){throw setTimeout(t,0),j}},he=Date.now();A.unstable_now=function(){return Date.now()-he},P=function f(a){null!==oe?setTimeout(P,0,a):(oe=a,setTimeout(le,0))},B=function g(a,A){se=setTimeout(a,A)},q=function h(){clearTimeout(se)},ne=function k(){return!1},ie=A.unstable_forceFrameRate=function(){}}else{var pe=window.performance,ge=window.Date,me=window.setTimeout,ve=window.clearTimeout;if("undefined"!==typeof console){var ye=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof ye&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof pe&&"function"===typeof pe.now)A.unstable_now=function(){return pe.now()};else{var _e=ge.now();A.unstable_now=function(){return ge.now()-_e}}var we=!1,ke=null,Oe=-1,Se=5,Te=0;ne=function k(){return A.unstable_now()>=Te},ie=function l(){},A.unstable_forceFrameRate=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):Se=0<a?Math.floor(1e3/a):5};var Ae=new MessageChannel,je=Ae.port2;Ae.port1.onmessage=function(){if(null!==ke){var a=A.unstable_now();Te=a+Se;try{ke(!0,a)?je.postMessage(null):(we=!1,ke=null)}catch(j){throw je.postMessage(null),j}}else we=!1},P=function _f(a){ke=a,we||(we=!0,je.postMessage(null))},B=function g(a,j){Oe=me((function(){a(A.unstable_now())}),j)},q=function h(){ve(Oe),Oe=-1}}function J(a,A){var j=a.length;a.push(A);e:for(;;){var P=j-1>>>1,B=a[P];if(!(void 0!==B&&0<K(B,A)))break e;a[P]=A,a[j]=B,j=P}}function L(a){return void 0===(a=a[0])?null:a}function M(a){var A=a[0];if(void 0!==A){var j=a.pop();if(j!==A){a[0]=j;e:for(var P=0,B=a.length;P<B;){var q=2*(P+1)-1,ne=a[q],ie=q+1,oe=a[ie];if(void 0!==ne&&0>K(ne,j))void 0!==oe&&0>K(oe,ne)?(a[P]=oe,a[ie]=j,P=ie):(a[P]=ne,a[q]=j,P=q);else{if(!(void 0!==oe&&0>K(oe,j)))break e;a[P]=oe,a[ie]=j,P=ie}}}return A}return null}function K(a,A){var j=a.sortIndex-A.sortIndex;return 0!==j?j:a.id-A.id}var Fe=[],Re=[],Me=1,Ne=null,Be=3,Ue=!1,We=!1,Ve=!1;function V(a){for(var A=L(Re);null!==A;){if(null===A.callback)M(Re);else{if(!(A.startTime<=a))break;M(Re),A.sortIndex=A.expirationTime,J(Fe,A)}A=L(Re)}}function W(a){if(Ve=!1,V(a),!We)if(null!==L(Fe))We=!0,P(X);else{var A=L(Re);null!==A&&B(W,A.startTime-a)}}function X(a,j){We=!1,Ve&&(Ve=!1,q()),Ue=!0;var P=Be;try{for(V(j),Ne=L(Fe);null!==Ne&&(!(Ne.expirationTime>j)||a&&!ne());){var ie=Ne.callback;if(null!==ie){Ne.callback=null,Be=Ne.priorityLevel;var oe=ie(Ne.expirationTime<=j);j=A.unstable_now(),"function"===typeof oe?Ne.callback=oe:Ne===L(Fe)&&M(Fe),V(j)}else M(Fe);Ne=L(Fe)}if(null!==Ne)var se=!0;else{var le=L(Re);null!==le&&B(W,le.startTime-j),se=!1}return se}finally{Ne=null,Be=P,Ue=!1}}function Y(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Ye=ie;A.unstable_IdlePriority=5,A.unstable_ImmediatePriority=1,A.unstable_LowPriority=4,A.unstable_NormalPriority=3,A.unstable_Profiling=null,A.unstable_UserBlockingPriority=2,A.unstable_cancelCallback=function(a){a.callback=null},A.unstable_continueExecution=function(){We||Ue||(We=!0,P(X))},A.unstable_getCurrentPriorityLevel=function(){return Be},A.unstable_getFirstCallbackNode=function(){return L(Fe)},A.unstable_next=function(a){switch(Be){case 1:case 2:case 3:var A=3;break;default:A=Be}var j=Be;Be=A;try{return a()}finally{Be=j}},A.unstable_pauseExecution=function(){},A.unstable_requestPaint=Ye,A.unstable_runWithPriority=function(a,A){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var j=Be;Be=a;try{return A()}finally{Be=j}},A.unstable_scheduleCallback=function(a,j,ne){var ie=A.unstable_now();if("object"===typeof ne&&null!==ne){var oe=ne.delay;oe="number"===typeof oe&&0<oe?ie+oe:ie,ne="number"===typeof ne.timeout?ne.timeout:Y(a)}else ne=Y(a),oe=ie;return a={id:Me++,callback:j,priorityLevel:a,startTime:oe,expirationTime:ne=oe+ne,sortIndex:-1},oe>ie?(a.sortIndex=oe,J(Re,a),null===L(Fe)&&a===L(Re)&&(Ve?q():Ve=!0,B(W,oe-ie))):(a.sortIndex=ne,J(Fe,a),We||Ue||(We=!0,P(X))),a},A.unstable_shouldYield=function(){var a=A.unstable_now();V(a);var j=L(Fe);return j!==Ne&&null!==Ne&&null!==j&&null!==j.callback&&j.startTime<=a&&j.expirationTime<Ne.expirationTime||ne()},A.unstable_wrapCallback=function(a){var A=Be;return function(){var j=Be;Be=A;try{return a.apply(this,arguments)}finally{Be=j}}}},function(a,A,j){var P=function(a){"use strict";var A=Object.prototype,j=A.hasOwnProperty,P="function"===typeof Symbol?Symbol:{},B=P.iterator||"@@iterator",q=P.asyncIterator||"@@asyncIterator",ne=P.toStringTag||"@@toStringTag";function define(a,A,j){return Object.defineProperty(a,A,{value:j,enumerable:!0,configurable:!0,writable:!0}),a[A]}try{define({},"")}catch(pe){define=function define(a,A,j){return a[A]=j}}function wrap(a,A,j,P){var B=A&&A.prototype instanceof Generator?A:Generator,q=Object.create(B.prototype),ne=new Context(P||[]);return q._invoke=function makeInvokeMethod(a,A,j){var P="suspendedStart";return function invoke(B,q){if("executing"===P)throw new Error("Generator is already running");if("completed"===P){if("throw"===B)throw q;return doneResult()}for(j.method=B,j.arg=q;;){var ne=j.delegate;if(ne){var oe=maybeInvokeDelegate(ne,j);if(oe){if(oe===ie)continue;return oe}}if("next"===j.method)j.sent=j._sent=j.arg;else if("throw"===j.method){if("suspendedStart"===P)throw P="completed",j.arg;j.dispatchException(j.arg)}else"return"===j.method&&j.abrupt("return",j.arg);P="executing";var se=tryCatch(a,A,j);if("normal"===se.type){if(P=j.done?"completed":"suspendedYield",se.arg===ie)continue;return{value:se.arg,done:j.done}}"throw"===se.type&&(P="completed",j.method="throw",j.arg=se.arg)}}}(a,j,ne),q}function tryCatch(a,A,j){try{return{type:"normal",arg:a.call(A,j)}}catch(pe){return{type:"throw",arg:pe}}}a.wrap=wrap;var ie={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var oe={};define(oe,B,(function(){return this}));var se=Object.getPrototypeOf,le=se&&se(se(values([])));le&&le!==A&&j.call(le,B)&&(oe=le);var he=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(oe);function defineIteratorMethods(a){["next","throw","return"].forEach((function(A){define(a,A,(function(a){return this._invoke(A,a)}))}))}function AsyncIterator(a,A){var P;this._invoke=function enqueue(B,q){function callInvokeWithMethodAndArg(){return new A((function(P,ne){!function invoke(P,B,q,ne){var ie=tryCatch(a[P],a,B);if("throw"!==ie.type){var oe=ie.arg,se=oe.value;return se&&"object"===typeof se&&j.call(se,"__await")?A.resolve(se.__await).then((function(a){invoke("next",a,q,ne)}),(function(a){invoke("throw",a,q,ne)})):A.resolve(se).then((function(a){oe.value=a,q(oe)}),(function(a){return invoke("throw",a,q,ne)}))}ne(ie.arg)}(B,q,P,ne)}))}return P=P?P.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(a,A){var j=a.iterator[A.method];if(void 0===j){if(A.delegate=null,"throw"===A.method){if(a.iterator.return&&(A.method="return",A.arg=void 0,maybeInvokeDelegate(a,A),"throw"===A.method))return ie;A.method="throw",A.arg=new TypeError("The iterator does not provide a 'throw' method")}return ie}var P=tryCatch(j,a.iterator,A.arg);if("throw"===P.type)return A.method="throw",A.arg=P.arg,A.delegate=null,ie;var B=P.arg;return B?B.done?(A[a.resultName]=B.value,A.next=a.nextLoc,"return"!==A.method&&(A.method="next",A.arg=void 0),A.delegate=null,ie):B:(A.method="throw",A.arg=new TypeError("iterator result is not an object"),A.delegate=null,ie)}function pushTryEntry(a){var A={tryLoc:a[0]};1 in a&&(A.catchLoc=a[1]),2 in a&&(A.finallyLoc=a[2],A.afterLoc=a[3]),this.tryEntries.push(A)}function resetTryEntry(a){var A=a.completion||{};A.type="normal",delete A.arg,a.completion=A}function Context(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(pushTryEntry,this),this.reset(!0)}function values(a){if(a){var A=a[B];if(A)return A.call(a);if("function"===typeof a.next)return a;if(!isNaN(a.length)){var P=-1,q=function next(){for(;++P<a.length;)if(j.call(a,P))return next.value=a[P],next.done=!1,next;return next.value=void 0,next.done=!0,next};return q.next=q}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(he,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,ne,"GeneratorFunction"),a.isGeneratorFunction=function(a){var A="function"===typeof a&&a.constructor;return!!A&&(A===GeneratorFunction||"GeneratorFunction"===(A.displayName||A.name))},a.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,GeneratorFunctionPrototype):(a.__proto__=GeneratorFunctionPrototype,define(a,ne,"GeneratorFunction")),a.prototype=Object.create(he),a},a.awrap=function(a){return{__await:a}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,q,(function(){return this})),a.AsyncIterator=AsyncIterator,a.async=function(A,j,P,B,q){void 0===q&&(q=Promise);var ne=new AsyncIterator(wrap(A,j,P,B),q);return a.isGeneratorFunction(j)?ne:ne.next().then((function(a){return a.done?a.value:ne.next()}))},defineIteratorMethods(he),define(he,ne,"Generator"),define(he,B,(function(){return this})),define(he,"toString",(function(){return"[object Generator]"})),a.keys=function(a){var A=[];for(var j in a)A.push(j);return A.reverse(),function next(){for(;A.length;){var j=A.pop();if(j in a)return next.value=j,next.done=!1,next}return next.done=!0,next}},a.values=values,Context.prototype={constructor:Context,reset:function reset(a){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!a)for(var A in this)"t"===A.charAt(0)&&j.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=void 0)},stop:function stop(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function dispatchException(a){if(this.done)throw a;var A=this;function handle(j,P){return q.type="throw",q.arg=a,A.next=j,P&&(A.method="next",A.arg=void 0),!!P}for(var P=this.tryEntries.length-1;P>=0;--P){var B=this.tryEntries[P],q=B.completion;if("root"===B.tryLoc)return handle("end");if(B.tryLoc<=this.prev){var ne=j.call(B,"catchLoc"),ie=j.call(B,"finallyLoc");if(ne&&ie){if(this.prev<B.catchLoc)return handle(B.catchLoc,!0);if(this.prev<B.finallyLoc)return handle(B.finallyLoc)}else if(ne){if(this.prev<B.catchLoc)return handle(B.catchLoc,!0)}else{if(!ie)throw new Error("try statement without catch or finally");if(this.prev<B.finallyLoc)return handle(B.finallyLoc)}}}},abrupt:function abrupt(a,A){for(var P=this.tryEntries.length-1;P>=0;--P){var B=this.tryEntries[P];if(B.tryLoc<=this.prev&&j.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var q=B;break}}q&&("break"===a||"continue"===a)&&q.tryLoc<=A&&A<=q.finallyLoc&&(q=null);var ne=q?q.completion:{};return ne.type=a,ne.arg=A,q?(this.method="next",this.next=q.finallyLoc,ie):this.complete(ne)},complete:function complete(a,A){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&A&&(this.next=A),ie},finish:function finish(a){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j.finallyLoc===a)return this.complete(j.completion,j.afterLoc),resetTryEntry(j),ie}},catch:function _catch(a){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j.tryLoc===a){var P=j.completion;if("throw"===P.type){var B=P.arg;resetTryEntry(j)}return B}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(a,A,j){return this.delegate={iterator:values(a),resultName:A,nextLoc:j},"next"===this.method&&(this.arg=void 0),ie}},a}(a.exports);try{regeneratorRuntime=P}catch(B){"object"===typeof globalThis?globalThis.regeneratorRuntime=P:Function("r","regeneratorRuntime = r")(P)}},function(a,A,j){var P=function(){return this}()||Function("return this")(),B=P.regeneratorRuntime&&Object.getOwnPropertyNames(P).indexOf("regeneratorRuntime")>=0,q=B&&P.regeneratorRuntime;if(P.regeneratorRuntime=void 0,a.exports=j(253),B)P.regeneratorRuntime=q;else try{delete P.regeneratorRuntime}catch(ne){P.regeneratorRuntime=void 0}},function(a,A){!function(A){"use strict";var j=Object.prototype,P=j.hasOwnProperty,B="function"===typeof Symbol?Symbol:{},q=B.iterator||"@@iterator",ne=B.asyncIterator||"@@asyncIterator",ie=B.toStringTag||"@@toStringTag",oe="object"===typeof a,se=A.regeneratorRuntime;if(se)oe&&(a.exports=se);else{(se=A.regeneratorRuntime=oe?a.exports:{}).wrap=wrap;var le={},he={};he[q]=function(){return this};var pe=Object.getPrototypeOf,ge=pe&&pe(pe(values([])));ge&&ge!==j&&P.call(ge,q)&&(he=ge);var me=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(he);GeneratorFunction.prototype=me.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[ie]=GeneratorFunction.displayName="GeneratorFunction",se.isGeneratorFunction=function(a){var A="function"===typeof a&&a.constructor;return!!A&&(A===GeneratorFunction||"GeneratorFunction"===(A.displayName||A.name))},se.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,GeneratorFunctionPrototype):(a.__proto__=GeneratorFunctionPrototype,ie in a||(a[ie]="GeneratorFunction")),a.prototype=Object.create(me),a},se.awrap=function(a){return{__await:a}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[ne]=function(){return this},se.AsyncIterator=AsyncIterator,se.async=function(a,A,j,P){var B=new AsyncIterator(wrap(a,A,j,P));return se.isGeneratorFunction(A)?B:B.next().then((function(a){return a.done?a.value:B.next()}))},defineIteratorMethods(me),me[ie]="Generator",me[q]=function(){return this},me.toString=function(){return"[object Generator]"},se.keys=function(a){var A=[];for(var j in a)A.push(j);return A.reverse(),function next(){for(;A.length;){var j=A.pop();if(j in a)return next.value=j,next.done=!1,next}return next.done=!0,next}},se.values=values,Context.prototype={constructor:Context,reset:function reset(a){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!a)for(var A in this)"t"===A.charAt(0)&&P.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=void 0)},stop:function stop(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function dispatchException(a){if(this.done)throw a;var A=this;function handle(j,P){return q.type="throw",q.arg=a,A.next=j,P&&(A.method="next",A.arg=void 0),!!P}for(var j=this.tryEntries.length-1;j>=0;--j){var B=this.tryEntries[j],q=B.completion;if("root"===B.tryLoc)return handle("end");if(B.tryLoc<=this.prev){var ne=P.call(B,"catchLoc"),ie=P.call(B,"finallyLoc");if(ne&&ie){if(this.prev<B.catchLoc)return handle(B.catchLoc,!0);if(this.prev<B.finallyLoc)return handle(B.finallyLoc)}else if(ne){if(this.prev<B.catchLoc)return handle(B.catchLoc,!0)}else{if(!ie)throw new Error("try statement without catch or finally");if(this.prev<B.finallyLoc)return handle(B.finallyLoc)}}}},abrupt:function abrupt(a,A){for(var j=this.tryEntries.length-1;j>=0;--j){var B=this.tryEntries[j];if(B.tryLoc<=this.prev&&P.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var q=B;break}}q&&("break"===a||"continue"===a)&&q.tryLoc<=A&&A<=q.finallyLoc&&(q=null);var ne=q?q.completion:{};return ne.type=a,ne.arg=A,q?(this.method="next",this.next=q.finallyLoc,le):this.complete(ne)},complete:function complete(a,A){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&A&&(this.next=A),le},finish:function finish(a){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j.finallyLoc===a)return this.complete(j.completion,j.afterLoc),resetTryEntry(j),le}},catch:function _catch(a){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j.tryLoc===a){var P=j.completion;if("throw"===P.type){var B=P.arg;resetTryEntry(j)}return B}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(a,A,j){return this.delegate={iterator:values(a),resultName:A,nextLoc:j},"next"===this.method&&(this.arg=void 0),le}}}function wrap(a,A,j,P){var B=A&&A.prototype instanceof Generator?A:Generator,q=Object.create(B.prototype),ne=new Context(P||[]);return q._invoke=function makeInvokeMethod(a,A,j){var P="suspendedStart";return function invoke(B,q){if("executing"===P)throw new Error("Generator is already running");if("completed"===P){if("throw"===B)throw q;return doneResult()}for(j.method=B,j.arg=q;;){var ne=j.delegate;if(ne){var ie=maybeInvokeDelegate(ne,j);if(ie){if(ie===le)continue;return ie}}if("next"===j.method)j.sent=j._sent=j.arg;else if("throw"===j.method){if("suspendedStart"===P)throw P="completed",j.arg;j.dispatchException(j.arg)}else"return"===j.method&&j.abrupt("return",j.arg);P="executing";var oe=tryCatch(a,A,j);if("normal"===oe.type){if(P=j.done?"completed":"suspendedYield",oe.arg===le)continue;return{value:oe.arg,done:j.done}}"throw"===oe.type&&(P="completed",j.method="throw",j.arg=oe.arg)}}}(a,j,ne),q}function tryCatch(a,A,j){try{return{type:"normal",arg:a.call(A,j)}}catch(P){return{type:"throw",arg:P}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(a){["next","throw","return"].forEach((function(A){a[A]=function(a){return this._invoke(A,a)}}))}function AsyncIterator(a){var A;this._invoke=function enqueue(j,B){function callInvokeWithMethodAndArg(){return new Promise((function(A,q){!function invoke(A,j,B,q){var ne=tryCatch(a[A],a,j);if("throw"!==ne.type){var ie=ne.arg,oe=ie.value;return oe&&"object"===typeof oe&&P.call(oe,"__await")?Promise.resolve(oe.__await).then((function(a){invoke("next",a,B,q)}),(function(a){invoke("throw",a,B,q)})):Promise.resolve(oe).then((function(a){ie.value=a,B(ie)}),q)}q(ne.arg)}(j,B,A,q)}))}return A=A?A.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(a,A){var j=a.iterator[A.method];if(void 0===j){if(A.delegate=null,"throw"===A.method){if(a.iterator.return&&(A.method="return",A.arg=void 0,maybeInvokeDelegate(a,A),"throw"===A.method))return le;A.method="throw",A.arg=new TypeError("The iterator does not provide a 'throw' method")}return le}var P=tryCatch(j,a.iterator,A.arg);if("throw"===P.type)return A.method="throw",A.arg=P.arg,A.delegate=null,le;var B=P.arg;return B?B.done?(A[a.resultName]=B.value,A.next=a.nextLoc,"return"!==A.method&&(A.method="next",A.arg=void 0),A.delegate=null,le):B:(A.method="throw",A.arg=new TypeError("iterator result is not an object"),A.delegate=null,le)}function pushTryEntry(a){var A={tryLoc:a[0]};1 in a&&(A.catchLoc=a[1]),2 in a&&(A.finallyLoc=a[2],A.afterLoc=a[3]),this.tryEntries.push(A)}function resetTryEntry(a){var A=a.completion||{};A.type="normal",delete A.arg,a.completion=A}function Context(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(pushTryEntry,this),this.reset(!0)}function values(a){if(a){var A=a[q];if(A)return A.call(a);if("function"===typeof a.next)return a;if(!isNaN(a.length)){var j=-1,B=function next(){for(;++j<a.length;)if(P.call(a,j))return next.value=a[j],next.done=!1,next;return next.value=void 0,next.done=!0,next};return B.next=B}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},function(a,A,j){a.exports={default:j(255),__esModule:!0}},function(a,A,j){j(153),j(112),j(161),j(264),j(272),j(273),a.exports=j(21).Promise},function(a,A,j){var P=j(113),B=j(114);a.exports=function(a){return function(A,j){var q,ne,ie=String(B(A)),oe=P(j),se=ie.length;return oe<0||oe>=se?a?"":void 0:(q=ie.charCodeAt(oe))<55296||q>56319||oe+1===se||(ne=ie.charCodeAt(oe+1))<56320||ne>57343?a?ie.charAt(oe):q:a?ie.slice(oe,oe+2):ne-56320+(q-55296<<10)+65536}}},function(a,A,j){"use strict";var P=j(117),B=j(72),q=j(86),ne={};j(56)(ne,j(27)("iterator"),(function(){return this})),a.exports=function(a,A,j){a.prototype=P(ne,{next:B(1,j)}),q(a,A+" Iterator")}},function(a,A,j){var P=j(40),B=j(41),q=j(74);a.exports=j(42)?Object.defineProperties:function defineProperties(a,A){B(a);for(var j,ne=q(A),ie=ne.length,oe=0;ie>oe;)P.f(a,j=ne[oe++],A[j]);return a}},function(a,A,j){var P=j(63),B=j(118),q=j(260);a.exports=function(a){return function(A,j,ne){var ie,oe=P(A),se=B(oe.length),le=q(ne,se);if(a&&j!=j){for(;se>le;)if((ie=oe[le++])!=ie)return!0}else for(;se>le;le++)if((a||le in oe)&&oe[le]===j)return a||le||0;return!a&&-1}}},function(a,A,j){var P=j(113),B=Math.max,q=Math.min;a.exports=function(a,A){return(a=P(a))<0?B(a+A,0):q(a,A)}},function(a,A,j){"use strict";var P=j(262),B=j(263),q=j(73),ne=j(63);a.exports=j(154)(Array,"Array",(function(a,A){this._t=ne(a),this._i=0,this._k=A}),(function(){var a=this._t,A=this._k,j=this._i++;return!a||j>=a.length?(this._t=void 0,B(1)):B(0,"keys"==A?j:"values"==A?a[j]:[j,a[j]])}),"values"),q.Arguments=q.Array,P("keys"),P("values"),P("entries")},function(a,A){a.exports=function(){}},function(a,A){a.exports=function(a,A){return{value:A,done:!!a}}},function(a,A,j){"use strict";var P,B,q,ne,ie=j(71),oe=j(26),se=j(61),le=j(162),he=j(33),pe=j(47),ge=j(84),me=j(265),ve=j(266),ye=j(166),_e=j(167).set,we=j(268)(),ke=j(122),Oe=j(168),Se=j(269),Te=j(169),Ae=oe.TypeError,je=oe.process,Fe=je&&je.versions,Re=Fe&&Fe.v8||"",Me=oe.Promise,Ne="process"==le(je),Be=function empty(){},Ue=B=ke.f,We=!!function(){try{var a=Me.resolve(1),A=(a.constructor={})[j(27)("species")]=function(a){a(Be,Be)};return(Ne||"function"==typeof PromiseRejectionEvent)&&a.then(Be)instanceof A&&0!==Re.indexOf("6.6")&&-1===Se.indexOf("Chrome/66")}catch(P){}}(),Ve=function isThenable(a){var A;return!(!pe(a)||"function"!=typeof(A=a.then))&&A},Ye=function notify(a,A){if(!a._n){a._n=!0;var j=a._c;we((function(){for(var P=a._v,B=1==a._s,q=0,ne=function run(A){var j,q,ne,ie=B?A.ok:A.fail,oe=A.resolve,se=A.reject,le=A.domain;try{ie?(B||(2==a._h&&et(a),a._h=1),!0===ie?j=P:(le&&le.enter(),j=ie(P),le&&(le.exit(),ne=!0)),j===A.promise?se(Ae("Promise-chain cycle")):(q=Ve(j))?q.call(j,oe,se):oe(j)):se(P)}catch(he){le&&!ne&&le.exit(),se(he)}};j.length>q;)ne(j[q++]);a._c=[],a._n=!1,A&&!a._h&&$e(a)}))}},$e=function onUnhandled(a){_e.call(oe,(function(){var A,j,P,B=a._v,q=Xe(a);if(q&&(A=Oe((function(){Ne?je.emit("unhandledRejection",B,a):(j=oe.onunhandledrejection)?j({promise:a,reason:B}):(P=oe.console)&&P.error&&P.error("Unhandled promise rejection",B)})),a._h=Ne||Xe(a)?2:1),a._a=void 0,q&&A.e)throw A.v}))},Xe=function isUnhandled(a){return 1!==a._h&&0===(a._a||a._c).length},et=function onHandleUnhandled(a){_e.call(oe,(function(){var A;Ne?je.emit("rejectionHandled",a):(A=oe.onrejectionhandled)&&A({promise:a,reason:a._v})}))},tt=function $reject(a){var A=this;A._d||(A._d=!0,(A=A._w||A)._v=a,A._s=2,A._a||(A._a=A._c.slice()),Ye(A,!0))},nt=function $resolve(a){var A,j=this;if(!j._d){j._d=!0,j=j._w||j;try{if(j===a)throw Ae("Promise can't be resolved itself");(A=Ve(a))?we((function(){var P={_w:j,_d:!1};try{A.call(a,se($resolve,P,1),se(tt,P,1))}catch(B){tt.call(P,B)}})):(j._v=a,j._s=1,Ye(j,!1))}catch(P){tt.call({_w:j,_d:!1},P)}}};We||(Me=function Promise(a){me(this,Me,"Promise","_h"),ge(a),P.call(this);try{a(se(nt,this,1),se(tt,this,1))}catch(A){tt.call(this,A)}},(P=function Promise(a){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=j(270)(Me.prototype,{then:function then(a,A){var j=Ue(ye(this,Me));return j.ok="function"!=typeof a||a,j.fail="function"==typeof A&&A,j.domain=Ne?je.domain:void 0,this._c.push(j),this._a&&this._a.push(j),this._s&&Ye(this,!1),j.promise},catch:function _catch(a){return this.then(void 0,a)}}),q=function OwnPromiseCapability(){var a=new P;this.promise=a,this.resolve=se(nt,a,1),this.reject=se(tt,a,1)},ke.f=Ue=function newPromiseCapability(a){return a===Me||a===ne?new q(a):B(a)}),he(he.G+he.W+he.F*!We,{Promise:Me}),j(86)(Me,"Promise"),j(271)("Promise"),ne=j(21).Promise,he(he.S+he.F*!We,"Promise",{reject:function reject(a){var A=Ue(this);return(0,A.reject)(a),A.promise}}),he(he.S+he.F*(ie||!We),"Promise",{resolve:function resolve(a){return Te(ie&&this===ne?Me:this,a)}}),he(he.S+he.F*!(We&&j(170)((function(a){Me.all(a).catch(Be)}))),"Promise",{all:function all(a){var A=this,j=Ue(A),P=j.resolve,B=j.reject,q=Oe((function(){var j=[],q=0,ne=1;ve(a,!1,(function(a){var ie=q++,oe=!1;j.push(void 0),ne++,A.resolve(a).then((function(a){oe||(oe=!0,j[ie]=a,--ne||P(j))}),B)})),--ne||P(j)}));return q.e&&B(q.v),j.promise},race:function race(a){var A=this,j=Ue(A),P=j.reject,B=Oe((function(){ve(a,!1,(function(a){A.resolve(a).then(j.resolve,P)}))}));return B.e&&P(B.v),j.promise}})},function(a,A){a.exports=function(a,A,j,P){if(!(a instanceof A)||void 0!==P&&P in a)throw TypeError(j+": incorrect invocation!");return a}},function(a,A,j){var P=j(61),B=j(163),q=j(164),ne=j(41),ie=j(118),oe=j(165),se={},le={};(A=a.exports=function(a,A,j,he,pe){var ge,me,ve,ye,_e=pe?function(){return a}:oe(a),we=P(j,he,A?2:1),ke=0;if("function"!=typeof _e)throw TypeError(a+" is not iterable!");if(q(_e)){for(ge=ie(a.length);ge>ke;ke++)if((ye=A?we(ne(me=a[ke])[0],me[1]):we(a[ke]))===se||ye===le)return ye}else for(ve=_e.call(a);!(me=ve.next()).done;)if((ye=B(ve,we,me.value,A))===se||ye===le)return ye}).BREAK=se,A.RETURN=le},function(a,A){a.exports=function(a,A,j){var P=void 0===j;switch(A.length){case 0:return P?a():a.call(j);case 1:return P?a(A[0]):a.call(j,A[0]);case 2:return P?a(A[0],A[1]):a.call(j,A[0],A[1]);case 3:return P?a(A[0],A[1],A[2]):a.call(j,A[0],A[1],A[2]);case 4:return P?a(A[0],A[1],A[2],A[3]):a.call(j,A[0],A[1],A[2],A[3])}return a.apply(j,A)}},function(a,A,j){var P=j(26),B=j(167).set,q=P.MutationObserver||P.WebKitMutationObserver,ne=P.process,ie=P.Promise,oe="process"==j(75)(ne);a.exports=function(){var a,A,j,se=function flush(){var P,B;for(oe&&(P=ne.domain)&&P.exit();a;){B=a.fn,a=a.next;try{B()}catch(q){throw a?j():A=void 0,q}}A=void 0,P&&P.enter()};if(oe)j=function notify(){ne.nextTick(se)};else if(!q||P.navigator&&P.navigator.standalone)if(ie&&ie.resolve){var le=ie.resolve(void 0);j=function notify(){le.then(se)}}else j=function notify(){B.call(P,se)};else{var he=!0,pe=document.createTextNode("");new q(se).observe(pe,{characterData:!0}),j=function notify(){pe.data=he=!he}}return function(P){var B={fn:P,next:void 0};A&&(A.next=B),a||(a=B,j()),A=B}}},function(a,A,j){var P=j(26).navigator;a.exports=P&&P.userAgent||""},function(a,A,j){var P=j(56);a.exports=function(a,A,j){for(var B in A)j&&a[B]?a[B]=A[B]:P(a,B,A[B]);return a}},function(a,A,j){"use strict";var P=j(26),B=j(21),q=j(40),ne=j(42),ie=j(27)("species");a.exports=function(a){var A="function"==typeof B[a]?B[a]:P[a];ne&&A&&!A[ie]&&q.f(A,ie,{configurable:!0,get:function get(){return this}})}},function(a,A,j){"use strict";var P=j(33),B=j(21),q=j(26),ne=j(166),ie=j(169);P(P.P+P.R,"Promise",{finally:function _finally(a){var A=ne(this,B.Promise||q.Promise),j="function"==typeof a;return this.then(j?function(j){return ie(A,a()).then((function(){return j}))}:a,j?function(j){return ie(A,a()).then((function(){throw j}))}:a)}})},function(a,A,j){"use strict";var P=j(33),B=j(122),q=j(168);P(P.S,"Promise",{try:function _try(a){var A=B.f(this),j=q(a);return(j.e?A.reject:A.resolve)(j.v),A.promise}})},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getCommaAccessToken=A.logOut=A.isAuthed=void 0;var P=_interopRequireDefault(j(31)),B=_interopRequireDefault(j(32)),q=(A.logOut=function(){var a=(0,B.default)(P.default.mark((function _callee(){return P.default.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(localStorage.removeItem("authorization"),!ie){a.next=4;break}return a.next=4,ne.default.removeItem("authorization");case 4:case"end":return a.stop()}}),_callee,this)})));return function logOut(){return a.apply(this,arguments)}}(),A.getCommaAccessToken=function(){var a=(0,B.default)(P.default.mark((function _callee2(){var a;return P.default.wrap((function _callee2$(j){for(;;)switch(j.prev=j.next){case 0:if(a=getTokenInternal()){j.next=11;break}return j.prev=2,j.next=5,ne.default.getItem("authorization");case 5:a=j.sent,j.next=11;break;case 8:j.prev=8,j.t0=j.catch(2),ie=!1;case 11:if(!a){j.next=16;break}if(A.isAuthed=!0,!ie){j.next=16;break}return j.next=16,ne.default.setItem("authorization",a);case 16:return j.abrupt("return",a);case 17:case"end":return j.stop()}}),_callee2,this,[[2,8]])})));return function getCommaAccessToken(){return a.apply(this,arguments)}}());A.getTokenInternal=getTokenInternal,A.setCommaAccessToken=function setCommaAccessToken(a){return localStorage.setItem("authorization",a),q()};var ne=_interopRequireDefault(j(275));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}A.isAuthed=!1;var ie=!0;function getTokenInternal(){return"undefined"!==typeof localStorage&&localStorage.authorization?localStorage.authorization:null}},function(a,A,j){(function(A){a.exports=function e(a,A,j){function s(B,q){if(!A[B]){if(!a[B]){if(P)return P(B,!0);var ne=new Error("Cannot find module '"+B+"'");throw ne.code="MODULE_NOT_FOUND",ne}var ie=A[B]={exports:{}};a[B][0].call(ie.exports,(function(A){var j=a[B][1][A];return s(j||A)}),ie,ie.exports,e,a,A,j)}return A[B].exports}for(var P=!1,B=0;B<j.length;B++)s(j[B]);return s}({1:[function(a,j,P){(function(a){"use strict";var A,P,B=a.MutationObserver||a.WebKitMutationObserver;if(B){var q=0,ne=new B(nextTick),ie=a.document.createTextNode("");ne.observe(ie,{characterData:!0}),A=function scheduleDrain(){ie.data=q=++q%2}}else if(a.setImmediate||"undefined"===typeof a.MessageChannel)A="document"in a&&"onreadystatechange"in a.document.createElement("script")?function scheduleDrain(){var A=a.document.createElement("script");A.onreadystatechange=function(){nextTick(),A.onreadystatechange=null,A.parentNode.removeChild(A),A=null},a.document.documentElement.appendChild(A)}:function scheduleDrain(){setTimeout(nextTick,0)};else{var oe=new a.MessageChannel;oe.port1.onmessage=nextTick,A=function scheduleDrain(){oe.port2.postMessage(0)}}var se=[];function nextTick(){var a,A;P=!0;for(var j=se.length;j;){for(A=se,se=[],a=-1;++a<j;)A[a]();j=se.length}P=!1}j.exports=function immediate(a){1!==se.push(a)||P||A()}}).call(this,"undefined"!==typeof A?A:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(a,A,j){"use strict";var P=a(1);function INTERNAL(){}var B={},q=["REJECTED"],ne=["FULFILLED"],ie=["PENDING"];function Promise(a){if("function"!==typeof a)throw new TypeError("resolver must be a function");this.state=ie,this.queue=[],this.outcome=void 0,a!==INTERNAL&&safelyResolveThenable(this,a)}function QueueItem(a,A,j){this.promise=a,"function"===typeof A&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),"function"===typeof j&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function unwrap(a,A,j){P((function(){var P;try{P=A(j)}catch(q){return B.reject(a,q)}P===a?B.reject(a,new TypeError("Cannot resolve promise with itself")):B.resolve(a,P)}))}function getThen(a){var A=a&&a.then;if(a&&("object"===typeof a||"function"===typeof a)&&"function"===typeof A)return function appyThen(){A.apply(a,arguments)}}function safelyResolveThenable(a,A){var j=!1;function onError(A){j||(j=!0,B.reject(a,A))}function onSuccess(A){j||(j=!0,B.resolve(a,A))}var P=tryCatch((function tryToUnwrap(){A(onSuccess,onError)}));"error"===P.status&&onError(P.value)}function tryCatch(a,A){var j={};try{j.value=a(A),j.status="success"}catch(P){j.status="error",j.value=P}return j}A.exports=Promise,Promise.prototype.catch=function(a){return this.then(null,a)},Promise.prototype.then=function(a,A){if("function"!==typeof a&&this.state===ne||"function"!==typeof A&&this.state===q)return this;var j=new this.constructor(INTERNAL);return this.state!==ie?unwrap(j,this.state===ne?a:A,this.outcome):this.queue.push(new QueueItem(j,a,A)),j},QueueItem.prototype.callFulfilled=function(a){B.resolve(this.promise,a)},QueueItem.prototype.otherCallFulfilled=function(a){unwrap(this.promise,this.onFulfilled,a)},QueueItem.prototype.callRejected=function(a){B.reject(this.promise,a)},QueueItem.prototype.otherCallRejected=function(a){unwrap(this.promise,this.onRejected,a)},B.resolve=function(a,A){var j=tryCatch(getThen,A);if("error"===j.status)return B.reject(a,j.value);var P=j.value;if(P)safelyResolveThenable(a,P);else{a.state=ne,a.outcome=A;for(var q=-1,ie=a.queue.length;++q<ie;)a.queue[q].callFulfilled(A)}return a},B.reject=function(a,A){a.state=q,a.outcome=A;for(var j=-1,P=a.queue.length;++j<P;)a.queue[j].callRejected(A);return a},Promise.resolve=function resolve(a){return a instanceof this?a:B.resolve(new this(INTERNAL),a)},Promise.reject=function reject(a){var A=new this(INTERNAL);return B.reject(A,a)},Promise.all=function all(a){var A=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var j=a.length,P=!1;if(!j)return this.resolve([]);for(var q=new Array(j),ne=0,ie=-1,oe=new this(INTERNAL);++ie<j;)allResolver(a[ie],ie);return oe;function allResolver(a,ie){A.resolve(a).then((function resolveFromAll(a){q[ie]=a,++ne!==j||P||(P=!0,B.resolve(oe,q))}),(function(a){P||(P=!0,B.reject(oe,a))}))}},Promise.race=function race(a){var A=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var j=a.length,P=!1;if(!j)return this.resolve([]);for(var q,ne=-1,ie=new this(INTERNAL);++ne<j;)q=a[ne],A.resolve(q).then((function(a){P||(P=!0,B.resolve(ie,a))}),(function(a){P||(P=!0,B.reject(ie,a))}));return ie}},{1:1}],3:[function(a,j,P){(function(A){"use strict";"function"!==typeof A.Promise&&(A.Promise=a(2))}).call(this,"undefined"!==typeof A?A:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{2:2}],4:[function(a,A,j){"use strict";var P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},B=function getIDB(){try{if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!==typeof mozIndexedDB)return mozIndexedDB;if("undefined"!==typeof OIndexedDB)return OIndexedDB;if("undefined"!==typeof msIndexedDB)return msIndexedDB}catch(a){return}}();function createBlob(a,A){a=a||[],A=A||{};try{return new Blob(a,A)}catch(B){if("TypeError"!==B.name)throw B;for(var j=new("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),P=0;P<a.length;P+=1)j.append(a[P]);return j.getBlob(A.type)}}"undefined"===typeof Promise&&a(3);var q=Promise;function executeCallback(a,A){A&&a.then((function(a){A(null,a)}),(function(a){A(a)}))}function executeTwoCallbacks(a,A,j){"function"===typeof A&&a.then(A),"function"===typeof j&&a.catch(j)}function normalizeKey(a){return"string"!==typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a)),a}function getCallback(){if(arguments.length&&"function"===typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var ne=void 0,ie={},oe=Object.prototype.toString;function _checkBlobSupport(a){return"boolean"===typeof ne?q.resolve(ne):function _checkBlobSupportWithoutCaching(a){return new q((function(A){var j=a.transaction("local-forage-detect-blob-support","readwrite"),P=createBlob([""]);j.objectStore("local-forage-detect-blob-support").put(P,"key"),j.onabort=function(a){a.preventDefault(),a.stopPropagation(),A(!1)},j.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),j=navigator.userAgent.match(/Edge\//);A(j||!a||parseInt(a[1],10)>=43)}})).catch((function(){return!1}))}(a).then((function(a){return ne=a}))}function _deferReadiness(a){var A=ie[a.name],j={};j.promise=new q((function(a,A){j.resolve=a,j.reject=A})),A.deferredOperations.push(j),A.dbReady?A.dbReady=A.dbReady.then((function(){return j.promise})):A.dbReady=j.promise}function _advanceReadiness(a){var A=ie[a.name].deferredOperations.pop();if(A)return A.resolve(),A.promise}function _rejectReadiness(a,A){var j=ie[a.name].deferredOperations.pop();if(j)return j.reject(A),j.promise}function _getConnection(a,A){return new q((function(j,P){if(ie[a.name]=ie[a.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},a.db){if(!A)return j(a.db);_deferReadiness(a),a.db.close()}var q=[a.name];A&&q.push(a.version);var ne=B.open.apply(B,q);A&&(ne.onupgradeneeded=function(A){var j=ne.result;try{j.createObjectStore(a.storeName),A.oldVersion<=1&&j.createObjectStore("local-forage-detect-blob-support")}catch(P){if("ConstraintError"!==P.name)throw P;console.warn('The database "'+a.name+'" has been upgraded from version '+A.oldVersion+" to version "+A.newVersion+', but the storage "'+a.storeName+'" already exists.')}}),ne.onerror=function(a){a.preventDefault(),P(ne.error)},ne.onsuccess=function(){var A=ne.result;A.onversionchange=function(a){a.target.close()},j(A),_advanceReadiness(a)}}))}function _getOriginalConnection(a){return _getConnection(a,!1)}function _getUpgradedConnection(a){return _getConnection(a,!0)}function _isUpgradeNeeded(a,A){if(!a.db)return!0;var j=!a.db.objectStoreNames.contains(a.storeName),P=a.version<a.db.version,B=a.version>a.db.version;if(P&&(a.version!==A&&console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),B||j){if(j){var q=a.db.version+1;q>a.version&&(a.version=q)}return!0}return!1}function _decodeBlob(a){return createBlob([function _binStringToArrayBuffer(a){for(var A=a.length,j=new ArrayBuffer(A),P=new Uint8Array(j),B=0;B<A;B++)P[B]=a.charCodeAt(B);return j}(atob(a.data))],{type:a.type})}function _isEncodedBlob(a){return a&&a.__local_forage_encoded_blob}function _fullyReady(a){var A=this,j=A._initReady().then((function(){var a=ie[A._dbInfo.name];if(a&&a.dbReady)return a.dbReady}));return executeTwoCallbacks(j,a,a),j}function createTransaction(a,A,j,P){void 0===P&&(P=1);try{var B=a.db.transaction(a.storeName,A);j(null,B)}catch(ne){if(P>0&&(!a.db||"InvalidStateError"===ne.name||"NotFoundError"===ne.name))return q.resolve().then((function(){if(!a.db||"NotFoundError"===ne.name&&!a.db.objectStoreNames.contains(a.storeName)&&a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),_getUpgradedConnection(a)})).then((function(){return function _tryReconnect(a){_deferReadiness(a);for(var A=ie[a.name],j=A.forages,P=0;P<j.length;P++){var B=j[P];B._dbInfo.db&&(B._dbInfo.db.close(),B._dbInfo.db=null)}return a.db=null,_getOriginalConnection(a).then((function(A){return a.db=A,_isUpgradeNeeded(a)?_getUpgradedConnection(a):A})).then((function(P){a.db=A.db=P;for(var B=0;B<j.length;B++)j[B]._dbInfo.db=P})).catch((function(A){throw _rejectReadiness(a,A),A}))}(a).then((function(){createTransaction(a,A,j,P-1)}))})).catch(j);j(ne)}}var se={_driver:"asyncStorage",_initStorage:function _initStorage(a){var A=this,j={db:null};if(a)for(var P in a)j[P]=a[P];var B=ie[j.name];B||(B={forages:[],db:null,dbReady:null,deferredOperations:[]},ie[j.name]=B),B.forages.push(A),A._initReady||(A._initReady=A.ready,A.ready=_fullyReady);var ne=[];function ignoreErrors(){return q.resolve()}for(var oe=0;oe<B.forages.length;oe++){var se=B.forages[oe];se!==A&&ne.push(se._initReady().catch(ignoreErrors))}var le=B.forages.slice(0);return q.all(ne).then((function(){return j.db=B.db,_getOriginalConnection(j)})).then((function(a){return j.db=a,_isUpgradeNeeded(j,A._defaultConfig.version)?_getUpgradedConnection(j):a})).then((function(a){j.db=B.db=a,A._dbInfo=j;for(var P=0;P<le.length;P++){var q=le[P];q!==A&&(q._dbInfo.db=j.db,q._dbInfo.version=j.version)}}))},_support:function isIndexedDBValid(){try{if(!B||!B.open)return!1;var a="undefined"!==typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),A="function"===typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!a||A)&&"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange}catch(j){return!1}}(),iterate:function iterate(a,A){var j=this,P=new q((function(A,P){j.ready().then((function(){createTransaction(j._dbInfo,"readonly",(function(B,q){if(B)return P(B);try{var ne=q.objectStore(j._dbInfo.storeName).openCursor(),ie=1;ne.onsuccess=function(){var j=ne.result;if(j){var P=j.value;_isEncodedBlob(P)&&(P=_decodeBlob(P));var B=a(P,j.key,ie++);void 0!==B?A(B):j.continue()}else A()},ne.onerror=function(){P(ne.error)}}catch(oe){P(oe)}}))})).catch(P)}));return executeCallback(P,A),P},getItem:function getItem(a,A){var j=this;a=normalizeKey(a);var P=new q((function(A,P){j.ready().then((function(){createTransaction(j._dbInfo,"readonly",(function(B,q){if(B)return P(B);try{var ne=q.objectStore(j._dbInfo.storeName).get(a);ne.onsuccess=function(){var a=ne.result;void 0===a&&(a=null),_isEncodedBlob(a)&&(a=_decodeBlob(a)),A(a)},ne.onerror=function(){P(ne.error)}}catch(ie){P(ie)}}))})).catch(P)}));return executeCallback(P,A),P},setItem:function setItem(a,A,j){var P=this;a=normalizeKey(a);var B=new q((function(j,B){var ne;P.ready().then((function(){return ne=P._dbInfo,"[object Blob]"===oe.call(A)?_checkBlobSupport(ne.db).then((function(a){return a?A:function _encodeBlob(a){return new q((function(A,j){var P=new FileReader;P.onerror=j,P.onloadend=function(j){var P=btoa(j.target.result||"");A({__local_forage_encoded_blob:!0,data:P,type:a.type})},P.readAsBinaryString(a)}))}(A)})):A})).then((function(A){createTransaction(P._dbInfo,"readwrite",(function(q,ne){if(q)return B(q);try{var ie=ne.objectStore(P._dbInfo.storeName);null===A&&(A=void 0);var oe=ie.put(A,a);ne.oncomplete=function(){void 0===A&&(A=null),j(A)},ne.onabort=ne.onerror=function(){var a=oe.error?oe.error:oe.transaction.error;B(a)}}catch(se){B(se)}}))})).catch(B)}));return executeCallback(B,j),B},removeItem:function removeItem(a,A){var j=this;a=normalizeKey(a);var P=new q((function(A,P){j.ready().then((function(){createTransaction(j._dbInfo,"readwrite",(function(B,q){if(B)return P(B);try{var ne=q.objectStore(j._dbInfo.storeName).delete(a);q.oncomplete=function(){A()},q.onerror=function(){P(ne.error)},q.onabort=function(){var a=ne.error?ne.error:ne.transaction.error;P(a)}}catch(ie){P(ie)}}))})).catch(P)}));return executeCallback(P,A),P},clear:function clear(a){var A=this,j=new q((function(a,j){A.ready().then((function(){createTransaction(A._dbInfo,"readwrite",(function(P,B){if(P)return j(P);try{var q=B.objectStore(A._dbInfo.storeName).clear();B.oncomplete=function(){a()},B.onabort=B.onerror=function(){var a=q.error?q.error:q.transaction.error;j(a)}}catch(ne){j(ne)}}))})).catch(j)}));return executeCallback(j,a),j},length:function length(a){var A=this,j=new q((function(a,j){A.ready().then((function(){createTransaction(A._dbInfo,"readonly",(function(P,B){if(P)return j(P);try{var q=B.objectStore(A._dbInfo.storeName).count();q.onsuccess=function(){a(q.result)},q.onerror=function(){j(q.error)}}catch(ne){j(ne)}}))})).catch(j)}));return executeCallback(j,a),j},key:function key(a,A){var j=this,P=new q((function(A,P){a<0?A(null):j.ready().then((function(){createTransaction(j._dbInfo,"readonly",(function(B,q){if(B)return P(B);try{var ne=q.objectStore(j._dbInfo.storeName),ie=!1,oe=ne.openKeyCursor();oe.onsuccess=function(){var j=oe.result;j?0===a||ie?A(j.key):(ie=!0,j.advance(a)):A(null)},oe.onerror=function(){P(oe.error)}}catch(se){P(se)}}))})).catch(P)}));return executeCallback(P,A),P},keys:function keys(a){var A=this,j=new q((function(a,j){A.ready().then((function(){createTransaction(A._dbInfo,"readonly",(function(P,B){if(P)return j(P);try{var q=B.objectStore(A._dbInfo.storeName).openKeyCursor(),ne=[];q.onsuccess=function(){var A=q.result;A?(ne.push(A.key),A.continue()):a(ne)},q.onerror=function(){j(q.error)}}catch(ie){j(ie)}}))})).catch(j)}));return executeCallback(j,a),j},dropInstance:function dropInstance(a,A){A=getCallback.apply(this,arguments);var j=this.config();(a="function"!==typeof a&&a||{}).name||(a.name=a.name||j.name,a.storeName=a.storeName||j.storeName);var P,ne=this;if(a.name){var oe=a.name===j.name&&ne._dbInfo.db,se=oe?q.resolve(ne._dbInfo.db):_getOriginalConnection(a).then((function(A){var j=ie[a.name],P=j.forages;j.db=A;for(var B=0;B<P.length;B++)P[B]._dbInfo.db=A;return A}));P=a.storeName?se.then((function(A){if(A.objectStoreNames.contains(a.storeName)){var j=A.version+1;_deferReadiness(a);var P=ie[a.name],ne=P.forages;A.close();for(var oe=0;oe<ne.length;oe++){var se=ne[oe];se._dbInfo.db=null,se._dbInfo.version=j}return new q((function(A,P){var q=B.open(a.name,j);q.onerror=function(a){q.result.close(),P(a)},q.onupgradeneeded=function(){q.result.deleteObjectStore(a.storeName)},q.onsuccess=function(){var a=q.result;a.close(),A(a)}})).then((function(a){P.db=a;for(var A=0;A<ne.length;A++){var j=ne[A];j._dbInfo.db=a,_advanceReadiness(j._dbInfo)}})).catch((function(A){throw(_rejectReadiness(a,A)||q.resolve()).catch((function(){})),A}))}})):se.then((function(A){_deferReadiness(a);var j=ie[a.name],P=j.forages;A.close();for(var ne=0;ne<P.length;ne++)P[ne]._dbInfo.db=null;return new q((function(A,j){var P=B.deleteDatabase(a.name);P.onerror=function(){var a=P.result;a&&a.close(),j(P.error)},P.onblocked=function(){console.warn('dropInstance blocked for database "'+a.name+'" until all open connections are closed')},P.onsuccess=function(){var a=P.result;a&&a.close(),A(a)}})).then((function(a){j.db=a;for(var A=0;A<P.length;A++)_advanceReadiness(P[A]._dbInfo)})).catch((function(A){throw(_rejectReadiness(a,A)||q.resolve()).catch((function(){})),A}))}))}else P=q.reject("Invalid arguments");return executeCallback(P,A),P}},le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",he=/^~~local_forage_type~([^~]+)~/,pe="__lfsc__:".length,ge=pe+"arbf".length,me=Object.prototype.toString;function stringToBuffer(a){var A,j,P,B,q,ne=.75*a.length,ie=a.length,oe=0;"="===a[a.length-1]&&(ne--,"="===a[a.length-2]&&ne--);var se=new ArrayBuffer(ne),he=new Uint8Array(se);for(A=0;A<ie;A+=4)j=le.indexOf(a[A]),P=le.indexOf(a[A+1]),B=le.indexOf(a[A+2]),q=le.indexOf(a[A+3]),he[oe++]=j<<2|P>>4,he[oe++]=(15&P)<<4|B>>2,he[oe++]=(3&B)<<6|63&q;return se}function bufferToString(a){var A,j=new Uint8Array(a),P="";for(A=0;A<j.length;A+=3)P+=le[j[A]>>2],P+=le[(3&j[A])<<4|j[A+1]>>4],P+=le[(15&j[A+1])<<2|j[A+2]>>6],P+=le[63&j[A+2]];return j.length%3===2?P=P.substring(0,P.length-1)+"=":j.length%3===1&&(P=P.substring(0,P.length-2)+"=="),P}var ve={serialize:function serialize(a,A){var j="";if(a&&(j=me.call(a)),a&&("[object ArrayBuffer]"===j||a.buffer&&"[object ArrayBuffer]"===me.call(a.buffer))){var P,B="__lfsc__:";a instanceof ArrayBuffer?(P=a,B+="arbf"):(P=a.buffer,"[object Int8Array]"===j?B+="si08":"[object Uint8Array]"===j?B+="ui08":"[object Uint8ClampedArray]"===j?B+="uic8":"[object Int16Array]"===j?B+="si16":"[object Uint16Array]"===j?B+="ur16":"[object Int32Array]"===j?B+="si32":"[object Uint32Array]"===j?B+="ui32":"[object Float32Array]"===j?B+="fl32":"[object Float64Array]"===j?B+="fl64":A(new Error("Failed to get type for BinaryArray"))),A(B+bufferToString(P))}else if("[object Blob]"===j){var q=new FileReader;q.onload=function(){var j="~~local_forage_type~"+a.type+"~"+bufferToString(this.result);A("__lfsc__:blob"+j)},q.readAsArrayBuffer(a)}else try{A(JSON.stringify(a))}catch(ne){console.error("Couldn't convert value into a JSON string: ",a),A(null,ne)}},deserialize:function deserialize(a){if("__lfsc__:"!==a.substring(0,pe))return JSON.parse(a);var A,j=a.substring(ge),P=a.substring(pe,ge);if("blob"===P&&he.test(j)){var B=j.match(he);A=B[1],j=j.substring(B[0].length)}var q=stringToBuffer(j);switch(P){case"arbf":return q;case"blob":return createBlob([q],{type:A});case"si08":return new Int8Array(q);case"ui08":return new Uint8Array(q);case"uic8":return new Uint8ClampedArray(q);case"si16":return new Int16Array(q);case"ur16":return new Uint16Array(q);case"si32":return new Int32Array(q);case"ui32":return new Uint32Array(q);case"fl32":return new Float32Array(q);case"fl64":return new Float64Array(q);default:throw new Error("Unkown type: "+P)}},stringToBuffer:stringToBuffer,bufferToString:bufferToString};function createDbTable(a,A,j,P){a.executeSql("CREATE TABLE IF NOT EXISTS "+A.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],j,P)}function tryExecuteSql(a,A,j,P,B,q){a.executeSql(j,P,B,(function(a,ne){ne.code===ne.SYNTAX_ERR?a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[A.storeName],(function(a,ie){ie.rows.length?q(a,ne):createDbTable(a,A,(function(){a.executeSql(j,P,B,q)}),q)}),q):q(a,ne)}),q)}function _setItem(a,A,j,P){var B=this;a=normalizeKey(a);var ne=new q((function(q,ne){B.ready().then((function(){void 0===A&&(A=null);var ie=A,oe=B._dbInfo;oe.serializer.serialize(A,(function(A,se){se?ne(se):oe.db.transaction((function(j){tryExecuteSql(j,oe,"INSERT OR REPLACE INTO "+oe.storeName+" (key, value) VALUES (?, ?)",[a,A],(function(){q(ie)}),(function(a,A){ne(A)}))}),(function(A){if(A.code===A.QUOTA_ERR){if(P>0)return void q(_setItem.apply(B,[a,ie,j,P-1]));ne(A)}}))}))})).catch(ne)}));return executeCallback(ne,j),ne}function getAllStoreNames(a){return new q((function(A,j){a.transaction((function(P){P.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(j,P){for(var B=[],q=0;q<P.rows.length;q++)B.push(P.rows.item(q).name);A({db:a,storeNames:B})}),(function(a,A){j(A)}))}),(function(a){j(a)}))}))}var ye={_driver:"webSQLStorage",_initStorage:function _initStorage$1(a){var A=this,j={db:null};if(a)for(var P in a)j[P]="string"!==typeof a[P]?a[P].toString():a[P];var B=new q((function(a,P){try{j.db=openDatabase(j.name,String(j.version),j.description,j.size)}catch(B){return P(B)}j.db.transaction((function(B){createDbTable(B,j,(function(){A._dbInfo=j,a()}),(function(a,A){P(A)}))}),P)}));return j.serializer=ve,B},_support:function isWebSQLValid(){return"function"===typeof openDatabase}(),iterate:function iterate$1(a,A){var j=this,P=new q((function(A,P){j.ready().then((function(){var B=j._dbInfo;B.db.transaction((function(j){tryExecuteSql(j,B,"SELECT * FROM "+B.storeName,[],(function(j,P){for(var q=P.rows,ne=q.length,ie=0;ie<ne;ie++){var oe=q.item(ie),se=oe.value;if(se&&(se=B.serializer.deserialize(se)),void 0!==(se=a(se,oe.key,ie+1)))return void A(se)}A()}),(function(a,A){P(A)}))}))})).catch(P)}));return executeCallback(P,A),P},getItem:function getItem$1(a,A){var j=this;a=normalizeKey(a);var P=new q((function(A,P){j.ready().then((function(){var B=j._dbInfo;B.db.transaction((function(j){tryExecuteSql(j,B,"SELECT * FROM "+B.storeName+" WHERE key = ? LIMIT 1",[a],(function(a,j){var P=j.rows.length?j.rows.item(0).value:null;P&&(P=B.serializer.deserialize(P)),A(P)}),(function(a,A){P(A)}))}))})).catch(P)}));return executeCallback(P,A),P},setItem:function setItem$1(a,A,j){return _setItem.apply(this,[a,A,j,1])},removeItem:function removeItem$1(a,A){var j=this;a=normalizeKey(a);var P=new q((function(A,P){j.ready().then((function(){var B=j._dbInfo;B.db.transaction((function(j){tryExecuteSql(j,B,"DELETE FROM "+B.storeName+" WHERE key = ?",[a],(function(){A()}),(function(a,A){P(A)}))}))})).catch(P)}));return executeCallback(P,A),P},clear:function clear$1(a){var A=this,j=new q((function(a,j){A.ready().then((function(){var P=A._dbInfo;P.db.transaction((function(A){tryExecuteSql(A,P,"DELETE FROM "+P.storeName,[],(function(){a()}),(function(a,A){j(A)}))}))})).catch(j)}));return executeCallback(j,a),j},length:function length$1(a){var A=this,j=new q((function(a,j){A.ready().then((function(){var P=A._dbInfo;P.db.transaction((function(A){tryExecuteSql(A,P,"SELECT COUNT(key) as c FROM "+P.storeName,[],(function(A,j){var P=j.rows.item(0).c;a(P)}),(function(a,A){j(A)}))}))})).catch(j)}));return executeCallback(j,a),j},key:function key$1(a,A){var j=this,P=new q((function(A,P){j.ready().then((function(){var B=j._dbInfo;B.db.transaction((function(j){tryExecuteSql(j,B,"SELECT key FROM "+B.storeName+" WHERE id = ? LIMIT 1",[a+1],(function(a,j){var P=j.rows.length?j.rows.item(0).key:null;A(P)}),(function(a,A){P(A)}))}))})).catch(P)}));return executeCallback(P,A),P},keys:function keys$1(a){var A=this,j=new q((function(a,j){A.ready().then((function(){var P=A._dbInfo;P.db.transaction((function(A){tryExecuteSql(A,P,"SELECT key FROM "+P.storeName,[],(function(A,j){for(var P=[],B=0;B<j.rows.length;B++)P.push(j.rows.item(B).key);a(P)}),(function(a,A){j(A)}))}))})).catch(j)}));return executeCallback(j,a),j},dropInstance:function dropInstance$1(a,A){A=getCallback.apply(this,arguments);var j=this.config();(a="function"!==typeof a&&a||{}).name||(a.name=a.name||j.name,a.storeName=a.storeName||j.storeName);var P,B=this;return executeCallback(P=a.name?new q((function(A){var P;P=a.name===j.name?B._dbInfo.db:openDatabase(a.name,"","",0),a.storeName?A({db:P,storeNames:[a.storeName]}):A(getAllStoreNames(P))})).then((function(a){return new q((function(A,j){a.db.transaction((function(P){function dropTable(a){return new q((function(A,j){P.executeSql("DROP TABLE IF EXISTS "+a,[],(function(){A()}),(function(a,A){j(A)}))}))}for(var B=[],ne=0,ie=a.storeNames.length;ne<ie;ne++)B.push(dropTable(a.storeNames[ne]));q.all(B).then((function(){A()})).catch((function(a){j(a)}))}),(function(a){j(a)}))}))})):q.reject("Invalid arguments"),A),P}};function _getKeyPrefix(a,A){var j=a.name+"/";return a.storeName!==A.storeName&&(j+=a.storeName+"/"),j}function _isLocalStorageUsable(){return!function checkIfLocalStorageThrows(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(a){return!0}}()||localStorage.length>0}var _e={_driver:"localStorageWrapper",_initStorage:function _initStorage$2(a){var A={};if(a)for(var j in a)A[j]=a[j];return A.keyPrefix=_getKeyPrefix(a,this._defaultConfig),_isLocalStorageUsable()?(this._dbInfo=A,A.serializer=ve,q.resolve()):q.reject()},_support:function isLocalStorageValid(){try{return"undefined"!==typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(a){return!1}}(),iterate:function iterate$2(a,A){var j=this,P=j.ready().then((function(){for(var A=j._dbInfo,P=A.keyPrefix,B=P.length,q=localStorage.length,ne=1,ie=0;ie<q;ie++){var oe=localStorage.key(ie);if(0===oe.indexOf(P)){var se=localStorage.getItem(oe);if(se&&(se=A.serializer.deserialize(se)),void 0!==(se=a(se,oe.substring(B),ne++)))return se}}}));return executeCallback(P,A),P},getItem:function getItem$2(a,A){var j=this;a=normalizeKey(a);var P=j.ready().then((function(){var A=j._dbInfo,P=localStorage.getItem(A.keyPrefix+a);return P&&(P=A.serializer.deserialize(P)),P}));return executeCallback(P,A),P},setItem:function setItem$2(a,A,j){var P=this;a=normalizeKey(a);var B=P.ready().then((function(){void 0===A&&(A=null);var j=A;return new q((function(B,q){var ne=P._dbInfo;ne.serializer.serialize(A,(function(A,P){if(P)q(P);else try{localStorage.setItem(ne.keyPrefix+a,A),B(j)}catch(ie){"QuotaExceededError"!==ie.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==ie.name||q(ie),q(ie)}}))}))}));return executeCallback(B,j),B},removeItem:function removeItem$2(a,A){var j=this;a=normalizeKey(a);var P=j.ready().then((function(){var A=j._dbInfo;localStorage.removeItem(A.keyPrefix+a)}));return executeCallback(P,A),P},clear:function clear$2(a){var A=this,j=A.ready().then((function(){for(var a=A._dbInfo.keyPrefix,j=localStorage.length-1;j>=0;j--){var P=localStorage.key(j);0===P.indexOf(a)&&localStorage.removeItem(P)}}));return executeCallback(j,a),j},length:function length$2(a){var A=this.keys().then((function(a){return a.length}));return executeCallback(A,a),A},key:function key$2(a,A){var j=this,P=j.ready().then((function(){var A,P=j._dbInfo;try{A=localStorage.key(a)}catch(B){A=null}return A&&(A=A.substring(P.keyPrefix.length)),A}));return executeCallback(P,A),P},keys:function keys$2(a){var A=this,j=A.ready().then((function(){for(var a=A._dbInfo,j=localStorage.length,P=[],B=0;B<j;B++){var q=localStorage.key(B);0===q.indexOf(a.keyPrefix)&&P.push(q.substring(a.keyPrefix.length))}return P}));return executeCallback(j,a),j},dropInstance:function dropInstance$2(a,A){if(A=getCallback.apply(this,arguments),!(a="function"!==typeof a&&a||{}).name){var j=this.config();a.name=a.name||j.name,a.storeName=a.storeName||j.storeName}var P,B=this;return executeCallback(P=a.name?new q((function(A){a.storeName?A(_getKeyPrefix(a,B._defaultConfig)):A(a.name+"/")})).then((function(a){for(var A=localStorage.length-1;A>=0;A--){var j=localStorage.key(A);0===j.indexOf(a)&&localStorage.removeItem(j)}})):q.reject("Invalid arguments"),A),P}},we=function sameValue(a,A){return a===A||"number"===typeof a&&"number"===typeof A&&isNaN(a)&&isNaN(A)},ke=function includes(a,A){for(var j=a.length,P=0;P<j;){if(we(a[P],A))return!0;P++}return!1},Oe=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},Se={},Te={},Ae={INDEXEDDB:se,WEBSQL:ye,LOCALSTORAGE:_e},je=[Ae.INDEXEDDB._driver,Ae.WEBSQL._driver,Ae.LOCALSTORAGE._driver],Fe=["dropInstance"],Re=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Fe),Me={description:"",driver:je.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function callWhenReady(a,A){a[A]=function(){var j=arguments;return a.ready().then((function(){return a[A].apply(a,j)}))}}function extend(){for(var a=1;a<arguments.length;a++){var A=arguments[a];if(A)for(var j in A)A.hasOwnProperty(j)&&(Oe(A[j])?arguments[0][j]=A[j].slice():arguments[0][j]=A[j])}return arguments[0]}var Ne=new(function(){function LocalForage(a){for(var A in function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,LocalForage),Ae)if(Ae.hasOwnProperty(A)){var j=Ae[A],P=j._driver;this[A]=P,Se[P]||this.defineDriver(j)}this._defaultConfig=extend({},Me),this._config=extend({},this._defaultConfig,a),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return LocalForage.prototype.config=function config(a){if("object"===("undefined"===typeof a?"undefined":P(a))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var A in a){if("storeName"===A&&(a[A]=a[A].replace(/\W/g,"_")),"version"===A&&"number"!==typeof a[A])return new Error("Database version must be a number.");this._config[A]=a[A]}return!("driver"in a)||!a.driver||this.setDriver(this._config.driver)}return"string"===typeof a?this._config[a]:this._config},LocalForage.prototype.defineDriver=function defineDriver(a,A,j){var P=new q((function(A,j){try{var P=a._driver,B=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver)return void j(B);for(var ne=Re.concat("_initStorage"),ie=0,oe=ne.length;ie<oe;ie++){var se=ne[ie];if((!ke(Fe,se)||a[se])&&"function"!==typeof a[se])return void j(B)}!function configureMissingMethods(){for(var A=function methodNotImplementedFactory(a){return function(){var A=new Error("Method "+a+" is not implemented by the current driver"),j=q.reject(A);return executeCallback(j,arguments[arguments.length-1]),j}},j=0,P=Fe.length;j<P;j++){var B=Fe[j];a[B]||(a[B]=A(B))}}();var le=function setDriverSupport(j){Se[P]&&console.info("Redefining LocalForage driver: "+P),Se[P]=a,Te[P]=j,A()};"_support"in a?a._support&&"function"===typeof a._support?a._support().then(le,j):le(!!a._support):le(!0)}catch(he){j(he)}}));return executeTwoCallbacks(P,A,j),P},LocalForage.prototype.driver=function driver(){return this._driver||null},LocalForage.prototype.getDriver=function getDriver(a,A,j){var P=Se[a]?q.resolve(Se[a]):q.reject(new Error("Driver not found."));return executeTwoCallbacks(P,A,j),P},LocalForage.prototype.getSerializer=function getSerializer(a){var A=q.resolve(ve);return executeTwoCallbacks(A,a),A},LocalForage.prototype.ready=function ready(a){var A=this,j=A._driverSet.then((function(){return null===A._ready&&(A._ready=A._initDriver()),A._ready}));return executeTwoCallbacks(j,a,a),j},LocalForage.prototype.setDriver=function setDriver(a,A,j){var P=this;Oe(a)||(a=[a]);var B=this._getSupportedDrivers(a);function setDriverToConfig(){P._config.driver=P.driver()}function extendSelfWithDriver(a){return P._extend(a),setDriverToConfig(),P._ready=P._initStorage(P._config),P._ready}var ne=null!==this._driverSet?this._driverSet.catch((function(){return q.resolve()})):q.resolve();return this._driverSet=ne.then((function(){var a=B[0];return P._dbInfo=null,P._ready=null,P.getDriver(a).then((function(a){P._driver=a._driver,setDriverToConfig(),P._wrapLibraryMethodsWithReady(),P._initDriver=function initDriver(a){return function(){var A=0;return function driverPromiseLoop(){for(;A<a.length;){var j=a[A];return A++,P._dbInfo=null,P._ready=null,P.getDriver(j).then(extendSelfWithDriver).catch(driverPromiseLoop)}setDriverToConfig();var B=new Error("No available storage method found.");return P._driverSet=q.reject(B),P._driverSet}()}}(B)}))})).catch((function(){setDriverToConfig();var a=new Error("No available storage method found.");return P._driverSet=q.reject(a),P._driverSet})),executeTwoCallbacks(this._driverSet,A,j),this._driverSet},LocalForage.prototype.supports=function supports(a){return!!Te[a]},LocalForage.prototype._extend=function _extend(a){extend(this,a)},LocalForage.prototype._getSupportedDrivers=function _getSupportedDrivers(a){for(var A=[],j=0,P=a.length;j<P;j++){var B=a[j];this.supports(B)&&A.push(B)}return A},LocalForage.prototype._wrapLibraryMethodsWithReady=function _wrapLibraryMethodsWithReady(){for(var a=0,A=Re.length;a<A;a++)callWhenReady(this,Re[a])},LocalForage.prototype.createInstance=function createInstance(a){return new LocalForage(a)},LocalForage}());A.exports=Ne},{3:3}]},{},[4])(4)}).call(this,j(35))},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.GITHUB_REDIRECT_LINK=A.GITHUB_REDIRECT_URI=A.GITHUB_AUTH_ENDPOINT=A.GITHUB_CLIENT_ID=A.APPLE_REDIRECT_LINK=A.APPLE_OAUTH_PARAMS=A.APPLE_STATE=A.APPLE_REDIRECT_URI=A.APPLE_SCOPES=A.APPLE_CLIENT_ID=A.APPLE_AUTH_ENDPOINT=A.GOOGLE_REDIRECT_LINK=A.GOOGLE_OAUTH_PARAMS=A.GOOGLE_REDIRECT_URI=A.GOOGLE_URL_ROOT=A.GOOGLE_AUTH_ENDPOINT=A.GOOGLE_CLIENT_ID=A.AUTH_PATH=void 0;var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(277));var B="localhost:3000";"undefined"!==typeof window&&window.location&&(B=window.location.host);A.AUTH_PATH="/auth/";var q=A.GOOGLE_CLIENT_ID="45471411055-ornt4svd2miog6dnopve7qtmh5mnu6id.apps.googleusercontent.com",ne=A.GOOGLE_AUTH_ENDPOINT="https://accounts.google.com/o/oauth2/auth",ie=(A.GOOGLE_URL_ROOT="https://www.googleapis.com/",A.GOOGLE_REDIRECT_URI="https://api.comma.ai/v2/auth/g/redirect/"),oe=A.GOOGLE_OAUTH_PARAMS={type:"web_server",client_id:q,redirect_uri:ie,response_type:"code",scope:"https://www.googleapis.com/auth/userinfo.email",state:"service,"+B,prompt:"select_account"},se=(A.GOOGLE_REDIRECT_LINK=ne+"?"+P.default.stringify(oe),A.APPLE_AUTH_ENDPOINT="https://appleid.apple.com/auth/authorize"),le=A.APPLE_CLIENT_ID="ai.comma.login",he=A.APPLE_SCOPES="name email",pe=A.APPLE_REDIRECT_URI="https://api.comma.ai/v2/auth/a/redirect/",ge=(A.APPLE_STATE="service,"+B,A.APPLE_OAUTH_PARAMS={client_id:le,redirect_uri:pe,response_type:"code",response_mode:"form_post",scope:he}),me=(A.APPLE_REDIRECT_LINK=se+"?"+P.default.stringify(ge),A.GITHUB_CLIENT_ID="28c4ecb54bb7272cb5a4"),ve=A.GITHUB_AUTH_ENDPOINT="https://github.com/login/oauth/authorize",ye={client_id:me,redirect_uri:A.GITHUB_REDIRECT_URI="https://api.comma.ai/v2/auth/h/redirect/",state:"service,"+B,scope:"read:user"};A.GITHUB_REDIRECT_LINK=ve+"?"+P.default.stringify(ye)},function(a,A,j){"use strict";var P=Object.prototype.hasOwnProperty;function decode(a){try{return decodeURIComponent(a.replace(/\+/g," "))}catch(A){return null}}function encode(a){try{return encodeURIComponent(a)}catch(A){return null}}A.stringify=function querystringify(a,A){A=A||"";var j,B,q=[];for(B in"string"!==typeof A&&(A="?"),a)if(P.call(a,B)){if((j=a[B])||null!==j&&void 0!==j&&!isNaN(j)||(j=""),B=encode(B),j=encode(j),null===B||null===j)continue;q.push(B+"="+j)}return q.length?A+q.join("&"):""},A.parse=function querystring(a){for(var A,j=/([^=?#&]+)=?([^&]*)/g,P={};A=j.exec(a);){var B=decode(A[1]),q=decode(A[2]);null===B||null===q||B in P||(P[B]=q)}return P}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getProfile=function getProfile(a){var A=a||"me";return P.get("v1/"+A+"/")};var P=function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var A={};if(null!=a)for(var j in a)Object.prototype.hasOwnProperty.call(a,j)&&(A[j]=a[j]);return A.default=a,A}(j(43))},function(a,A,j){var P=j(21),B=P.JSON||(P.JSON={stringify:JSON.stringify});a.exports=function stringify(a){return B.stringify.apply(B,arguments)}},function(a,A,j){a.exports={default:j(281),__esModule:!0}},function(a,A,j){j(282),a.exports=j(21).Object.keys},function(a,A,j){var P=j(64),B=j(74);j(172)("keys",(function(){return function keys(a){return B(P(a))}}))},function(a,A,j){"use strict";A.__esModule=!0;var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(284));A.default=P.default||function(a){for(var A=1;A<arguments.length;A++){var j=arguments[A];for(var P in j)Object.prototype.hasOwnProperty.call(j,P)&&(a[P]=j[P])}return a}},function(a,A,j){a.exports={default:j(285),__esModule:!0}},function(a,A,j){j(286),a.exports=j(21).Object.assign},function(a,A,j){var P=j(33);P(P.S+P.F,"Object",{assign:j(287)})},function(a,A,j){"use strict";var P=j(42),B=j(74),q=j(123),ne=j(87),ie=j(64),oe=j(158),se=Object.assign;a.exports=!se||j(62)((function(){var a={},A={},j=Symbol(),P="abcdefghijklmnopqrst";return a[j]=7,P.split("").forEach((function(a){A[a]=a})),7!=se({},a)[j]||Object.keys(se({},A)).join("")!=P}))?function assign(a,A){for(var j=ie(a),se=arguments.length,le=1,he=q.f,pe=ne.f;se>le;)for(var ge,me=oe(arguments[le++]),ve=he?B(me).concat(he(me)):B(me),ye=ve.length,_e=0;ye>_e;)ge=ve[_e++],P&&!pe.call(me,ge)||(j[ge]=me[ge]);return j}:se},function(a,A,j){"use strict";A.__esModule=!0;var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(289));A.default=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var B=A[j];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),(0,P.default)(a,B.key,B)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}()},function(a,A,j){a.exports={default:j(290),__esModule:!0}},function(a,A,j){j(291);var P=j(21).Object;a.exports=function defineProperty(a,A,j){return P.defineProperty(a,A,j)}},function(a,A,j){var P=j(33);P(P.S+P.F*!j(42),"Object",{defineProperty:j(40).f})},function(a,A,j){a.exports={default:j(293),__esModule:!0}},function(a,A,j){j(294),a.exports=j(21).Object.getPrototypeOf},function(a,A,j){var P=j(64),B=j(160);j(172)("getPrototypeOf",(function(){return function getPrototypeOf(a){return B(P(a))}}))},function(a,A,j){"use strict";A.__esModule=!0,A.default=function(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}},function(a,A,j){"use strict";A.__esModule=!0;var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(173));A.default=function(a,A){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!==("undefined"===typeof A?"undefined":(0,P.default)(A))&&"function"!==typeof A?a:A}},function(a,A,j){a.exports={default:j(298),__esModule:!0}},function(a,A,j){j(112),j(161),a.exports=j(124).f("iterator")},function(a,A,j){a.exports={default:j(300),__esModule:!0}},function(a,A,j){j(301),j(153),j(306),j(307),a.exports=j(21).Symbol},function(a,A,j){"use strict";var P=j(26),B=j(57),q=j(42),ne=j(33),ie=j(156),oe=j(302).KEY,se=j(62),le=j(120),he=j(86),pe=j(85),ge=j(27),me=j(124),ve=j(125),ye=j(303),_e=j(304),we=j(41),ke=j(47),Oe=j(64),Se=j(63),Te=j(116),Ae=j(72),je=j(117),Fe=j(305),Re=j(175),Me=j(123),Ne=j(40),Be=j(74),Ue=Re.f,We=Ne.f,Ve=Fe.f,Ye=P.Symbol,$e=P.JSON,Xe=$e&&$e.stringify,et=ge("_hidden"),tt=ge("toPrimitive"),nt={}.propertyIsEnumerable,rt=le("symbol-registry"),it=le("symbols"),at=le("op-symbols"),ot=Object.prototype,st="function"==typeof Ye&&!!Me.f,ut=P.QObject,lt=!ut||!ut.prototype||!ut.prototype.findChild,ct=q&&se((function(){return 7!=je(We({},"a",{get:function get(){return We(this,"a",{value:7}).a}})).a}))?function(a,A,j){var P=Ue(ot,A);P&&delete ot[A],We(a,A,j),P&&a!==ot&&We(ot,A,P)}:We,ft=function wrap(a){var A=it[a]=je(Ye.prototype);return A._k=a,A},dt=st&&"symbol"==typeof Ye.iterator?function(a){return"symbol"==typeof a}:function(a){return a instanceof Ye},ht=function defineProperty(a,A,j){return a===ot&&ht(at,A,j),we(a),A=Te(A,!0),we(j),B(it,A)?(j.enumerable?(B(a,et)&&a[et][A]&&(a[et][A]=!1),j=je(j,{enumerable:Ae(0,!1)})):(B(a,et)||We(a,et,Ae(1,{})),a[et][A]=!0),ct(a,A,j)):We(a,A,j)},pt=function defineProperties(a,A){we(a);for(var j,P=ye(A=Se(A)),B=0,q=P.length;q>B;)ht(a,j=P[B++],A[j]);return a},gt=function propertyIsEnumerable(a){var A=nt.call(this,a=Te(a,!0));return!(this===ot&&B(it,a)&&!B(at,a))&&(!(A||!B(this,a)||!B(it,a)||B(this,et)&&this[et][a])||A)},mt=function getOwnPropertyDescriptor(a,A){if(a=Se(a),A=Te(A,!0),a!==ot||!B(it,A)||B(at,A)){var j=Ue(a,A);return!j||!B(it,A)||B(a,et)&&a[et][A]||(j.enumerable=!0),j}},vt=function getOwnPropertyNames(a){for(var A,j=Ve(Se(a)),P=[],q=0;j.length>q;)B(it,A=j[q++])||A==et||A==oe||P.push(A);return P},yt=function getOwnPropertySymbols(a){for(var A,j=a===ot,P=Ve(j?at:Se(a)),q=[],ne=0;P.length>ne;)!B(it,A=P[ne++])||j&&!B(ot,A)||q.push(it[A]);return q};st||(ie((Ye=function Symbol(){if(this instanceof Ye)throw TypeError("Symbol is not a constructor!");var a=pe(arguments.length>0?arguments[0]:void 0),A=function $set(A){this===ot&&$set.call(at,A),B(this,et)&&B(this[et],a)&&(this[et][a]=!1),ct(this,a,Ae(1,A))};return q&&lt&&ct(ot,a,{configurable:!0,set:A}),ft(a)}).prototype,"toString",(function toString(){return this._k})),Re.f=mt,Ne.f=ht,j(174).f=Fe.f=vt,j(87).f=gt,Me.f=yt,q&&!j(71)&&ie(ot,"propertyIsEnumerable",gt,!0),me.f=function(a){return ft(ge(a))}),ne(ne.G+ne.W+ne.F*!st,{Symbol:Ye});for(var bt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),_t=0;bt.length>_t;)ge(bt[_t++]);for(var xt=Be(ge.store),wt=0;xt.length>wt;)ve(xt[wt++]);ne(ne.S+ne.F*!st,"Symbol",{for:function _for(a){return B(rt,a+="")?rt[a]:rt[a]=Ye(a)},keyFor:function keyFor(a){if(!dt(a))throw TypeError(a+" is not a symbol!");for(var A in rt)if(rt[A]===a)return A},useSetter:function useSetter(){lt=!0},useSimple:function useSimple(){lt=!1}}),ne(ne.S+ne.F*!st,"Object",{create:function create(a,A){return void 0===A?je(a):pt(je(a),A)},defineProperty:ht,defineProperties:pt,getOwnPropertyDescriptor:mt,getOwnPropertyNames:vt,getOwnPropertySymbols:yt});var kt=se((function(){Me.f(1)}));ne(ne.S+ne.F*kt,"Object",{getOwnPropertySymbols:function getOwnPropertySymbols(a){return Me.f(Oe(a))}}),$e&&ne(ne.S+ne.F*(!st||se((function(){var a=Ye();return"[null]"!=Xe([a])||"{}"!=Xe({a:a})||"{}"!=Xe(Object(a))}))),"JSON",{stringify:function stringify(a){for(var A,j,P=[a],B=1;arguments.length>B;)P.push(arguments[B++]);if(j=A=P[1],(ke(A)||void 0!==a)&&!dt(a))return _e(A)||(A=function replacer(a,A){if("function"==typeof j&&(A=j.call(this,a,A)),!dt(A))return A}),P[1]=A,Xe.apply($e,P)}}),Ye.prototype[tt]||j(56)(Ye.prototype,tt,Ye.prototype.valueOf),he(Ye,"Symbol"),he(Math,"Math",!0),he(P.JSON,"JSON",!0)},function(a,A,j){var P=j(85)("meta"),B=j(47),q=j(57),ne=j(40).f,ie=0,oe=Object.isExtensible||function(){return!0},se=!j(62)((function(){return oe(Object.preventExtensions({}))})),le=function setMeta(a){ne(a,P,{value:{i:"O"+ ++ie,w:{}}})},he=a.exports={KEY:P,NEED:!1,fastKey:function fastKey(a,A){if(!B(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!q(a,P)){if(!oe(a))return"F";if(!A)return"E";le(a)}return a[P].i},getWeak:function getWeak(a,A){if(!q(a,P)){if(!oe(a))return!0;if(!A)return!1;le(a)}return a[P].w},onFreeze:function onFreeze(a){return se&&he.NEED&&oe(a)&&!q(a,P)&&le(a),a}}},function(a,A,j){var P=j(74),B=j(123),q=j(87);a.exports=function(a){var A=P(a),j=B.f;if(j)for(var ne,ie=j(a),oe=q.f,se=0;ie.length>se;)oe.call(a,ne=ie[se++])&&A.push(ne);return A}},function(a,A,j){var P=j(75);a.exports=Array.isArray||function isArray(a){return"Array"==P(a)}},function(a,A,j){var P=j(63),B=j(174).f,q={}.toString,ne="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];a.exports.f=function getOwnPropertyNames(a){return ne&&"[object Window]"==q.call(a)?function getWindowNames(a){try{return B(a)}catch(A){return ne.slice()}}(a):B(P(a))}},function(a,A,j){j(125)("asyncIterator")},function(a,A,j){j(125)("observable")},function(a,A,j){"use strict";A.__esModule=!0;var P=_interopRequireDefault(j(309)),B=_interopRequireDefault(j(313)),q=_interopRequireDefault(j(173));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}A.default=function(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof A?"undefined":(0,q.default)(A)));a.prototype=(0,B.default)(A&&A.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A&&(P.default?(0,P.default)(a,A):a.__proto__=A)}},function(a,A,j){a.exports={default:j(310),__esModule:!0}},function(a,A,j){j(311),a.exports=j(21).Object.setPrototypeOf},function(a,A,j){var P=j(33);P(P.S,"Object",{setPrototypeOf:j(312).set})},function(a,A,j){var P=j(47),B=j(41),q=function check(a,A){if(B(a),!P(A)&&null!==A)throw TypeError(A+": can't set as prototype!")};a.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(a,A,P){try{(P=j(61)(Function.call,j(175).f(Object.prototype,"__proto__").set,2))(a,[]),A=!(a instanceof Array)}catch(B){A=!0}return function setPrototypeOf(a,j){return q(a,j),A?a.__proto__=j:P(a,j),a}}({},!1):void 0),check:q}},function(a,A,j){a.exports={default:j(314),__esModule:!0}},function(a,A,j){j(315);var P=j(21).Object;a.exports=function create(a,A){return P.create(a,A)}},function(a,A,j){var P=j(33);P(P.S,"Object",{create:j(117)})},function(a,A){a.exports=function _defineProperty(a,A,j){return A in a?Object.defineProperty(a,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):a[A]=j,a}},function(a,A,j){var P=j(318),B=j(319),q=j(126),ne=j(320);a.exports=function _slicedToArray(a,A){return P(a)||B(a,A)||q(a,A)||ne()}},function(a,A){a.exports=function _arrayWithHoles(a){if(Array.isArray(a))return a}},function(a,A){a.exports=function _iterableToArrayLimit(a,A){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(a)){var j=[],P=!0,B=!1,q=void 0;try{for(var ne,ie=a[Symbol.iterator]();!(P=(ne=ie.next()).done)&&(j.push(ne.value),!A||j.length!==A);P=!0);}catch(oe){B=!0,q=oe}finally{try{P||null==ie.return||ie.return()}finally{if(B)throw q}}return j}}},function(a,A){a.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(a,A,j){var P=j(126);a.exports=function _createForOfIteratorHelper(a){if("undefined"===typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(a=P(a))){var A=0,j=function F(){};return{s:j,n:function n(){return A>=a.length?{done:!0}:{done:!1,value:a[A++]}},e:function e(a){throw a},f:j}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var B,q,ne=!0,ie=!1;return{s:function s(){B=a[Symbol.iterator]()},n:function n(){var a=B.next();return ne=a.done,a},e:function e(a){ie=!0,q=a},f:function f(){try{ne||null==B.return||B.return()}finally{if(ie)throw q}}}}},function(a,A,j){var P=j(323),B=j(324),q=j(126),ne=j(325);a.exports=function _toConsumableArray(a){return P(a)||B(a)||q(a)||ne()}},function(a,A,j){var P=j(177);a.exports=function _arrayWithoutHoles(a){if(Array.isArray(a))return P(a)}},function(a,A){a.exports=function _iterableToArray(a){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}},function(a,A){a.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(a,A,j){"use strict";a.exports=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,(function(a){return"%".concat(a.charCodeAt(0).toString(16).toUpperCase())}))}},function(a,A,j){"use strict";a.exports=function(a,A){if("string"!==typeof a||"string"!==typeof A)throw new TypeError("Expected the arguments to be of type `string`");if(""===A)return[a];var j=a.indexOf(A);return-1===j?[a]:[a.slice(0,j),a.slice(j+A.length)]}},function(a,A,j){"use strict";a.exports=function(a,A){for(var j={},P=Object.keys(a),B=Array.isArray(A),q=0;q<P.length;q++){var ne=P[q],ie=a[ne];(B?-1!==A.indexOf(ne):A(ne,ie,a))&&(j[ne]=ie)}return j}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.postJsonRpcPayload=void 0;var P=_interopRequireDefault(j(31)),B=_interopRequireDefault(j(32));A.postJsonRpcPayload=function(){var a=(0,B.default)(P.default.mark((function _callee(a,A){return P.default.wrap((function _callee$(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ie.post(a,A);case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}}),_callee,this)})));return function postJsonRpcPayload(A,j){return a.apply(this,arguments)}}();A.configure=function configure(a){ie.configure(a)};var q=_interopRequireDefault(j(76)),ne=j(127);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var ie=new q.default(ne.ATHENA_URL_ROOT)},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.refreshAccessToken=void 0;var P=_interopRequireDefault(j(31)),B=_interopRequireDefault(j(32)),q=(A.refreshAccessToken=function(){var a=(0,B.default)(P.default.mark((function _callee(a,A){var j;return P.default.wrap((function _callee$(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,q.postForm("v2/auth/",{code:a,provider:A});case 2:if(null==(j=P.sent).access_token){P.next=8;break}return q.configure(j.access_token),P.abrupt("return",j.access_token);case 8:if(void 0===j.response){P.next=12;break}throw new Error("Could not exchange oauth code for access token: response "+j.response);case 12:if(void 0===j.error){P.next=16;break}throw new Error("Could not exchange oauth code for access token: error "+j.error);case 16:throw console.log(j),new Error("Could not exchange oauth code for access token");case 18:case"end":return P.stop()}}),_callee,this)})));return function refreshAccessToken(A,j){return a.apply(this,arguments)}}(),function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var A={};if(null!=a)for(var j in a)Object.prototype.hasOwnProperty.call(a,j)&&(A[j]=a[j]);return A.default=a,A}(j(43)));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getStripeSession=A.getStripePortal=A.getStripeCheckout=A.getSimValid=A.cancelPrime=A.getSubscribeInfo=A.getSubscription=void 0;var P=_interopRequireDefault(j(31)),B=_interopRequireDefault(j(32));A.getSubscription=function(){var a=(0,B.default)(P.default.mark((function _callee(a){return P.default.wrap((function _callee$(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,ie.get("v1/prime/subscription",{dongle_id:a});case 2:return A.abrupt("return",A.sent);case 3:case"end":return A.stop()}}),_callee,this)})));return function getSubscription(A){return a.apply(this,arguments)}}(),A.getSubscribeInfo=function(){var a=(0,B.default)(P.default.mark((function _callee2(a){return P.default.wrap((function _callee2$(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,ie.get("v1/prime/subscribe_info",{dongle_id:a});case 2:return A.abrupt("return",A.sent);case 3:case"end":return A.stop()}}),_callee2,this)})));return function getSubscribeInfo(A){return a.apply(this,arguments)}}(),A.cancelPrime=function(){var a=(0,B.default)(P.default.mark((function _callee3(a){return P.default.wrap((function _callee3$(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,ie.post("v1/prime/cancel",{dongle_id:a});case 2:return A.abrupt("return",A.sent);case 3:case"end":return A.stop()}}),_callee3,this)})));return function cancelPrime(A){return a.apply(this,arguments)}}(),A.getSimValid=function(){var a=(0,B.default)(P.default.mark((function _callee4(a,A){return P.default.wrap((function _callee4$(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ie.get("v1/prime/sim_valid",{dongle_id:a,sim_id:A});case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}}),_callee4,this)})));return function getSimValid(A,j){return a.apply(this,arguments)}}(),A.getStripeCheckout=function(){var a=(0,B.default)(P.default.mark((function _callee5(a,A,j){return P.default.wrap((function _callee5$(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,ie.post("v1/prime/stripe_checkout",{dongle_id:a,sim_id:A,plan:j});case 2:return P.abrupt("return",P.sent);case 3:case"end":return P.stop()}}),_callee5,this)})));return function getStripeCheckout(A,j,P){return a.apply(this,arguments)}}(),A.getStripePortal=function(){var a=(0,B.default)(P.default.mark((function _callee6(a){return P.default.wrap((function _callee6$(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,ie.get("v1/prime/stripe_portal",{dongle_id:a});case 2:return A.abrupt("return",A.sent);case 3:case"end":return A.stop()}}),_callee6,this)})));return function getStripePortal(A){return a.apply(this,arguments)}}(),A.getStripeSession=function(){var a=(0,B.default)(P.default.mark((function _callee7(a,A){return P.default.wrap((function _callee7$(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ie.get("v1/prime/stripe_session",{dongle_id:a,session_id:A});case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}}),_callee7,this)})));return function getStripeSession(A,j){return a.apply(this,arguments)}}();A.configure=function configure(a){ie.configure(a)};var q=_interopRequireDefault(j(76)),ne=j(127);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var ie=new q.default(ne.BILLING_URL_ROOT)},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.fetchLocation=void 0;var P=_interopRequireDefault(j(31)),B=_interopRequireDefault(j(171)),q=_interopRequireDefault(j(32));A.fetchLocation=function(){var a=(0,q.default)(P.default.mark((function _callee(a){var A,j;return P.default.wrap((function _callee$(P){for(;;)switch(P.prev=P.next){case 0:return A="v1/devices/"+a+"/location",P.next=3,ne.get(A);case 3:if(void 0===(j=P.sent)||void 0!==j.error){P.next=8;break}return P.abrupt("return",j);case 8:throw Error("Could not fetch device location: "+(0,B.default)(j));case 9:case"end":return P.stop()}}),_callee,this)})));return function fetchLocation(A){return a.apply(this,arguments)}}();A.listDevices=function listDevices(){return ne.get("v1/me/devices/")},A.setDeviceAlias=function setDeviceAlias(a,A){return ne.patch("v1/devices/"+a+"/",{alias:A})},A.setDeviceVehicleId=function setDeviceVehicleId(a,A){return ne.patch("v1/devices/"+a+"/",{vehicle_id:A})},A.grantDeviceReadPermission=function grantDeviceReadPermission(a,A){return ne.post("v1/devices/"+a+"/add_user",{email:A})},A.removeDeviceReadPermission=function removeDeviceReadPermission(a,A){return ne.post("v1/devices/"+a+"/del_user",{email:A})},A.fetchVehicles=function fetchVehicles(a){var A="v1/vehicles/"+a;return ne.get(A)},A.fetchDevice=function fetchDevice(a){var A="v1.1/devices/"+a+"/";return ne.get(A)},A.pilotPair=function pilotPair(a){return ne.postForm("v2/pilotpair/",{pair_token:a})},A.fetchDeviceStats=function fetchDeviceStats(a){return ne.get("v1.1/devices/"+a+"/stats")},A.unpair=function unpair(a){return ne.post("v1/devices/"+a+"/unpair")},A.fetchDeviceOwner=function fetchDeviceOwner(a){return ne.get("v1/devices/"+a+"/owner")},A.getAthenaQueue=function getAthenaQueue(a){return ne.get("v1/devices/"+a+"/athena_offline_queue")};var ne=function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var A={};if(null!=a)for(var j in a)Object.prototype.hasOwnProperty.call(a,j)&&(A[j]=a[j]);return A.default=a,A}(j(43));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=_interopRequireDefault(j(31)),B=_interopRequireDefault(j(32));A.default=function routeApi(a){var A=this,j=new q.default(a);return{getCoords:function(){var a=(0,B.default)(P.default.mark((function _callee(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return P.default.wrap((function _callee$(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,j.get("route.coords?s="+a);case 2:return A.abrupt("return",A.sent);case 3:case"end":return A.stop()}}),_callee,A)})));return function getCoords(){return a.apply(this,arguments)}}(),getJpegUrl:function getJpegUrl(A){return a+"/sec/"+A.toString()+".jpg"}}};var q=_interopRequireDefault(j(76));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.fetchRoutes=void 0;var P=_interopRequireDefault(j(335)),B=_interopRequireDefault(j(340)),q=_interopRequireDefault(j(31)),ne=_interopRequireDefault(j(32));A.fetchRoutes=function(){var a=(0,ne.default)(q.default.mark((function _callee(a,A,j){var P;return q.default.wrap((function _callee$(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,getSegmentMetadata(A,j,a);case 2:return P=B.sent,P=parseSegmentMetadata(A,j,P),B.abrupt("return",segmentsFromMetadata(P).reverse());case 5:case"end":return B.stop()}}),_callee,this)})));return function fetchRoutes(A,j,P){return a.apply(this,arguments)}}();A.getSegmentMetadata=getSegmentMetadata,A.getRouteInfo=function getRouteInfo(a){return ie.get("v1/route/"+a+"/")},A.setRouteRating=function setRouteRating(a,A){return ie.patch("v1/route/"+a+"/",{rating:A})},A.getShareSignature=function getShareSignature(a){return ie.get("v1/route/"+a+"/share_signature")},A.getRouteSegments=function getRouteSegments(a){return ie.get("v1/route/"+a+"/segments")},A.listRoutes=function listRoutes(a,A,j){var P={limit:A};"undefined"!==typeof j&&(P.createdAfter=j);return ie.get("v1/devices/"+a+"/routes",P)};var ie=function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var A={};if(null!=a)for(var j in a)Object.prototype.hasOwnProperty.call(a,j)&&(A[j]=a[j]);return A.default=a,A}(j(43));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function getSegmentMetadata(a,A,j){return ie.get("v1/devices/"+j+"/segments",{from:a,to:A})}function parseSegmentMetadata(a,A,j){var P={};return j.map((function(A){if(A.offset=Math.round(A.start_time_utc_millis)-a,P[A.canonical_route_name])A.routeOffset=P[A.canonical_route_name];else{var j=Number(A.canonical_name.split("--")[2]);A.segment=j,P[A.canonical_route_name]=j>0?A.offset-6e4*j:A.offset,A.routeOffset=P[A.canonical_route_name]}return A.offset,A.duration=Math.round(A.end_time_utc_millis-A.start_time_utc_millis),A}))}function segmentsFromMetadata(a){var A=null,j=null,q=[];return a.forEach((function(a){if(a.url&&(40===a.proc_log||40===a.proc_qlog)){var P=a.proc_dcamera>=0,ne=40===a.proc_dcamera,ie=40===a.proc_camera;if(ie&&null===j&&(j=a.offset),a.start_time_utc_millis,!A||A.route!==a.canonical_route_name){A&&finishSegment(A);var oe=a.url,se=oe.split("/");(0,B.default)(Number(se.pop()))&&(oe=se.join("/")),A={dongleId:a.dongle_id,offset:a.offset-6e4*a.segment,route:a.canonical_route_name,startTime:a.start_time_utc_millis,startCoord:[a.start_lng,a.start_lat],duration:0,segments:0,url:oe.replace("chffrprivate.blob.core.windows.net","chffrprivate.azureedge.net"),events:[],videoAvailableBetweenOffsets:[],hasVideo:ie,deviceType:a.devicetype,hpgps:a.hpgps,hasDriverCamera:P,hasDriverCameraStream:ne,locStart:"",locEnd:"",distanceMiles:0,cameraStreamSegCount:0,driverCameraStreamSegCount:0},q.push(A)}ie||null===j||(A.videoAvailableBetweenOffsets.push([j,a.offset]),j=null),A.hasVideo=A.hasVideo||ie,A.hasDriverCamera=A.hasDriverCamera||P,A.hasDriverCameraStream=A.hasDriverCameraStream||ne,A.hpgps=A.hpgps||a.hpgps,A.duration=a.offset-A.offset+a.duration,A.segments=Math.max(A.segments,Number(a.canonical_name.split("--").pop())+1),A.events=A.events.concat(a.events),A.endCoord=[a.end_lng,a.end_lat],A.distanceMiles+=a.length,A.cameraStreamSegCount+=Math.floor(ie),A.driverCameraStreamSegCount+=Math.floor(ne)}})),A&&finishSegment(A),q;function finishSegment(a){if(a.hasVideo){var A=a.videoAvailableBetweenOffsets[a.videoAvailableBetweenOffsets.length-1]||[a.offset,a.offset+a.duration];a.videoAvailableBetweenOffsets=[].concat((0,P.default)(a.videoAvailableBetweenOffsets.slice(0,a.videoAvailableBetweenOffsets.length-1)),[[A[0],a.offset+a.duration]])}}}},function(a,A,j){"use strict";A.__esModule=!0;var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(336));A.default=function(a){if(Array.isArray(a)){for(var A=0,j=Array(a.length);A<a.length;A++)j[A]=a[A];return j}return(0,P.default)(a)}},function(a,A,j){a.exports={default:j(337),__esModule:!0}},function(a,A,j){j(112),j(338),a.exports=j(21).Array.from},function(a,A,j){"use strict";var P=j(61),B=j(33),q=j(64),ne=j(163),ie=j(164),oe=j(118),se=j(339),le=j(165);B(B.S+B.F*!j(170)((function(a){Array.from(a)})),"Array",{from:function from(a){var A,j,B,he,pe=q(a),ge="function"==typeof this?this:Array,me=arguments.length,ve=me>1?arguments[1]:void 0,ye=void 0!==ve,_e=0,we=le(pe);if(ye&&(ve=P(ve,me>2?arguments[2]:void 0,2)),void 0==we||ge==Array&&ie(we))for(j=new ge(A=oe(pe.length));A>_e;_e++)se(j,_e,ye?ve(pe[_e],_e):pe[_e]);else for(he=we.call(pe),j=new ge;!(B=he.next()).done;_e++)se(j,_e,ye?ne(he,ve,[B.value,_e],!0):B.value);return j.length=_e,j}})},function(a,A,j){"use strict";var P=j(40),B=j(72);a.exports=function(a,A,j){A in a?P.f(a,A,B(0,j)):a[A]=j}},function(a,A,j){a.exports={default:j(341),__esModule:!0}},function(a,A,j){j(342),a.exports=j(21).Number.isFinite},function(a,A,j){var P=j(33),B=j(26).isFinite;P(P.S,"Number",{isFinite:function isFinite(a){return"number"==typeof a&&B(a)}})},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getLeaderboard=function getLeaderboard(){return P.get("v2/leaderboard/")};var P=function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var A={};if(null!=a)for(var j in a)Object.prototype.hasOwnProperty.call(a,j)&&(A[j]=a[j]);return A.default=a,A}(j(43))},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getUploadUrls=void 0;var P=_interopRequireDefault(j(31)),B=_interopRequireDefault(j(32)),q=(A.getUploadUrls=function(){var a=(0,B.default)(P.default.mark((function _callee(a,A,j){return P.default.wrap((function _callee$(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,ie.post("v1/"+a+"/upload_urls/",{paths:A,expiry_days:j});case 2:return P.abrupt("return",P.sent);case 3:case"end":return P.stop()}}),_callee,this)})));return function getUploadUrls(A,j,P){return a.apply(this,arguments)}}(),function(){var a=(0,B.default)(P.default.mark((function _callee2(a,A,j){return P.default.wrap((function _callee2$(P){for(;;)switch(P.prev=P.next){case 0:if(void 0!==A&&(a+="?"+ne.default.stringify(A)),!oe[a]||j){P.next=3;break}return P.abrupt("return",oe[a]);case 3:return P.next=5,ie.get(a);case 5:return oe[a]=P.sent,setTimeout((function(){delete oe[a]}),27e5),P.abrupt("return",oe[a]);case 8:case"end":return P.stop()}}),_callee2,this)})));return function getCached(A,j,P){return a.apply(this,arguments)}}());A.getRouteFiles=function getRouteFiles(a){var A=arguments.length>1&&void 0!==arguments[1]&&arguments[1],j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return q("v1/route/"+a+"/files",j,A)},A.getLogUrls=function getLogUrls(a,A){return q("v1/route/"+a+"/log_urls",A)},A.getUploadUrl=function getUploadUrl(a,A,j){return q("v1.4/"+a+"/upload_url/",{path:A,expiry_days:j})};var ne=_interopRequireDefault(j(176)),ie=function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var A={};if(null!=a)for(var j in a)Object.prototype.hasOwnProperty.call(a,j)&&(A[j]=a[j]);return A.default=a,A}(j(43));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var oe={}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.setDestination=function setDestination(a,A,j,B,q){return P.post("v1/navigation/"+a+"/set_destination",{latitude:A,longitude:j,place_name:B,place_details:q})},A.getLocationsData=function getLocationsData(a){return P.get("v1/navigation/"+a+"/locations")},A.putLocationSave=function putLocationSave(a,A,j,B,q,ne,ie){return P.put("v1/navigation/"+a+"/locations",{latitude:A,longitude:j,place_name:B,place_details:q,save_type:ne,label:ie})},A.patchLocationSave=function patchLocationSave(a,A,j,B){return P.patch("v1/navigation/"+a+"/locations",{id:A,save_type:j,label:B})},A.deleteLocationSave=function deleteLocationSave(a,A){return P.del("v1/navigation/"+a+"/locations",{id:A})},A.getLocationsNext=function getLocationsNext(a){return P.get("v1/navigation/"+a+"/next")};var P=function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var A={};if(null!=a)for(var j in a)Object.prototype.hasOwnProperty.call(a,j)&&(A[j]=a[j]);return A.default=a,A}(j(43))},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.clipsDelete=A.clipsUpdate=A.clipsDetails=A.clipsList=A.clipsCreate=void 0;var P=_interopRequireDefault(j(31)),B=_interopRequireDefault(j(32)),q=(A.clipsCreate=function(){var a=(0,B.default)(P.default.mark((function _callee(a,A,j,B,ne,ie){return P.default.wrap((function _callee$(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,q.post("v1/clips/create",{route:a,title:A,start_time:j,end_time:B,video_type:ne,is_public:ie});case 2:return P.abrupt("return",P.sent);case 3:case"end":return P.stop()}}),_callee,this)})));return function clipsCreate(A,j,P,B,q,ne){return a.apply(this,arguments)}}(),A.clipsList=function(){var a=(0,B.default)(P.default.mark((function _callee2(a){return P.default.wrap((function _callee2$(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,q.get("v1/clips/list",{dongle_id:a});case 2:return A.abrupt("return",A.sent);case 3:case"end":return A.stop()}}),_callee2,this)})));return function clipsList(A){return a.apply(this,arguments)}}(),A.clipsDetails=function(){var a=(0,B.default)(P.default.mark((function _callee3(a,A){return P.default.wrap((function _callee3$(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,q.get("v1/clips/details",{dongle_id:a,clip_id:A});case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}}),_callee3,this)})));return function clipsDetails(A,j){return a.apply(this,arguments)}}(),A.clipsUpdate=function(){var a=(0,B.default)(P.default.mark((function _callee4(a,A,j){return P.default.wrap((function _callee4$(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,q.patch("v1/clips/update",{dongle_id:a,clip_id:A,is_public:j});case 2:return P.abrupt("return",P.sent);case 3:case"end":return P.stop()}}),_callee4,this)})));return function clipsUpdate(A,j,P){return a.apply(this,arguments)}}(),A.clipsDelete=function(){var a=(0,B.default)(P.default.mark((function _callee5(a,A){return P.default.wrap((function _callee5$(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,q.del("v1/clips/update",{dongle_id:a,clip_id:A});case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}}),_callee5,this)})));return function clipsDelete(A,j){return a.apply(this,arguments)}}(),function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var A={};if(null!=a)for(var j in a)Object.prototype.hasOwnProperty.call(a,j)&&(A[j]=a[j]);return A.default=a,A}(j(43)));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function videoApi(a){var A=new P.default(a);return{getQcameraStreamIndexUrl:function getQcameraStreamIndexUrl(){return a+"/qcamera.m3u8"},getQcameraStreamIndex:function getQcameraStreamIndex(){return A.get("qcamera.m3u8",null,!1,!1)}}};var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(76))},function(a,A,j){"use strict";a.exports=function assertFunction(a){if("function"!==typeof a)throw new TypeError("Expected function, got: "+a)}},function(a,A,j){"use strict";A.byteLength=function byteLength(a){var A=getLens(a),j=A[0],P=A[1];return 3*(j+P)/4-P},A.toByteArray=function toByteArray(a){var A,j,P=getLens(a),ne=P[0],ie=P[1],oe=new q(function _byteLength(a,A,j){return 3*(A+j)/4-j}(0,ne,ie)),se=0,le=ie>0?ne-4:ne;for(j=0;j<le;j+=4)A=B[a.charCodeAt(j)]<<18|B[a.charCodeAt(j+1)]<<12|B[a.charCodeAt(j+2)]<<6|B[a.charCodeAt(j+3)],oe[se++]=A>>16&255,oe[se++]=A>>8&255,oe[se++]=255&A;2===ie&&(A=B[a.charCodeAt(j)]<<2|B[a.charCodeAt(j+1)]>>4,oe[se++]=255&A);1===ie&&(A=B[a.charCodeAt(j)]<<10|B[a.charCodeAt(j+1)]<<4|B[a.charCodeAt(j+2)]>>2,oe[se++]=A>>8&255,oe[se++]=255&A);return oe},A.fromByteArray=function fromByteArray(a){for(var A,j=a.length,B=j%3,q=[],ne=0,ie=j-B;ne<ie;ne+=16383)q.push(encodeChunk(a,ne,ne+16383>ie?ie:ne+16383));1===B?(A=a[j-1],q.push(P[A>>2]+P[A<<4&63]+"==")):2===B&&(A=(a[j-2]<<8)+a[j-1],q.push(P[A>>10]+P[A>>4&63]+P[A<<2&63]+"="));return q.join("")};for(var P=[],B=[],q="undefined"!==typeof Uint8Array?Uint8Array:Array,ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ie=0,oe=ne.length;ie<oe;++ie)P[ie]=ne[ie],B[ne.charCodeAt(ie)]=ie;function getLens(a){var A=a.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var j=a.indexOf("=");return-1===j&&(j=A),[j,j===A?0:4-j%4]}function encodeChunk(a,A,j){for(var B,q,ne=[],ie=A;ie<j;ie+=3)B=(a[ie]<<16&16711680)+(a[ie+1]<<8&65280)+(255&a[ie+2]),ne.push(P[(q=B)>>18&63]+P[q>>12&63]+P[q>>6&63]+P[63&q]);return ne.join("")}B["-".charCodeAt(0)]=62,B["_".charCodeAt(0)]=63},function(a,A){A.read=function(a,A,j,P,B){var q,ne,ie=8*B-P-1,oe=(1<<ie)-1,se=oe>>1,le=-7,he=j?B-1:0,pe=j?-1:1,ge=a[A+he];for(he+=pe,q=ge&(1<<-le)-1,ge>>=-le,le+=ie;le>0;q=256*q+a[A+he],he+=pe,le-=8);for(ne=q&(1<<-le)-1,q>>=-le,le+=P;le>0;ne=256*ne+a[A+he],he+=pe,le-=8);if(0===q)q=1-se;else{if(q===oe)return ne?NaN:1/0*(ge?-1:1);ne+=Math.pow(2,P),q-=se}return(ge?-1:1)*ne*Math.pow(2,q-P)},A.write=function(a,A,j,P,B,q){var ne,ie,oe,se=8*q-B-1,le=(1<<se)-1,he=le>>1,pe=23===B?Math.pow(2,-24)-Math.pow(2,-77):0,ge=P?0:q-1,me=P?1:-1,ve=A<0||0===A&&1/A<0?1:0;for(A=Math.abs(A),isNaN(A)||A===1/0?(ie=isNaN(A)?1:0,ne=le):(ne=Math.floor(Math.log(A)/Math.LN2),A*(oe=Math.pow(2,-ne))<1&&(ne--,oe*=2),(A+=ne+he>=1?pe/oe:pe*Math.pow(2,1-he))*oe>=2&&(ne++,oe/=2),ne+he>=le?(ie=0,ne=le):ne+he>=1?(ie=(A*oe-1)*Math.pow(2,B),ne+=he):(ie=A*Math.pow(2,he-1)*Math.pow(2,B),ne=0));B>=8;a[j+ge]=255&ie,ge+=me,ie/=256,B-=8);for(ne=ne<<B|ie,se+=B;se>0;a[j+ge]=255&ne,ge+=me,ne/=256,se-=8);a[j+ge-me]|=128*ve}},function(a,A){var j={}.toString;a.exports=Array.isArray||function(a){return"[object Array]"==j.call(a)}},function(a,A,j){var P,B,q;B=[a,j(353)],void 0===(q="function"===typeof(P=function(a,A){"use strict";var j=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(A),P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},B=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}(),q=function(){function ClipboardAction(a){!function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,ClipboardAction),this.resolveOptions(a),this.initSelection()}return B(ClipboardAction,[{key:"resolveOptions",value:function resolveOptions(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=a.action,this.container=a.container,this.emitter=a.emitter,this.target=a.target,this.text=a.text,this.trigger=a.trigger,this.selectedText=""}},{key:"initSelection",value:function initSelection(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function selectFake(){var a=this,A="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return a.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[A?"right":"left"]="-9999px";var P=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=P+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,j.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function removeFake(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function selectTarget(){this.selectedText=(0,j.default)(this.target),this.copyText()}},{key:"copyText",value:function copyText(){var a=void 0;try{a=document.execCommand(this.action)}catch(A){a=!1}this.handleResult(a)}},{key:"handleResult",value:function handleResult(a){this.emitter.emit(a?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function clearSelection(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function destroy(){this.removeFake()}},{key:"action",set:function set(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=a,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function get(){return this._action}},{key:"target",set:function set(a){if(void 0!==a){if(!a||"object"!==("undefined"===typeof a?"undefined":P(a))||1!==a.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&a.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(a.hasAttribute("readonly")||a.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=a}},get:function get(){return this._target}}]),ClipboardAction}();a.exports=q})?P.apply(A,B):P)||(a.exports=q)},function(a,A){a.exports=function select(a){var A;if("SELECT"===a.nodeName)a.focus(),A=a.value;else if("INPUT"===a.nodeName||"TEXTAREA"===a.nodeName){var j=a.hasAttribute("readonly");j||a.setAttribute("readonly",""),a.select(),a.setSelectionRange(0,a.value.length),j||a.removeAttribute("readonly"),A=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var P=window.getSelection(),B=document.createRange();B.selectNodeContents(a),P.removeAllRanges(),P.addRange(B),A=P.toString()}return A}},function(a,A){function E(){}E.prototype={on:function on(a,A,j){var P=this.e||(this.e={});return(P[a]||(P[a]=[])).push({fn:A,ctx:j}),this},once:function once(a,A,j){var P=this;function listener(){P.off(a,listener),A.apply(j,arguments)}return listener._=A,this.on(a,listener,j)},emit:function emit(a){for(var A=[].slice.call(arguments,1),j=((this.e||(this.e={}))[a]||[]).slice(),P=0,B=j.length;P<B;P++)j[P].fn.apply(j[P].ctx,A);return this},off:function off(a,A){var j=this.e||(this.e={}),P=j[a],B=[];if(P&&A)for(var q=0,ne=P.length;q<ne;q++)P[q].fn!==A&&P[q].fn._!==A&&B.push(P[q]);return B.length?j[a]=B:delete j[a],this}},a.exports=E,a.exports.TinyEmitter=E},function(a,A,j){var P=j(356),B=j(357);a.exports=function listen(a,A,j){if(!a&&!A&&!j)throw new Error("Missing required arguments");if(!P.string(A))throw new TypeError("Second argument must be a String");if(!P.fn(j))throw new TypeError("Third argument must be a Function");if(P.node(a))return function listenNode(a,A,j){return a.addEventListener(A,j),{destroy:function destroy(){a.removeEventListener(A,j)}}}(a,A,j);if(P.nodeList(a))return function listenNodeList(a,A,j){return Array.prototype.forEach.call(a,(function(a){a.addEventListener(A,j)})),{destroy:function destroy(){Array.prototype.forEach.call(a,(function(a){a.removeEventListener(A,j)}))}}}(a,A,j);if(P.string(a))return function listenSelector(a,A,j){return B(document.body,a,A,j)}(a,A,j);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(a,A){A.node=function(a){return void 0!==a&&a instanceof HTMLElement&&1===a.nodeType},A.nodeList=function(a){var j=Object.prototype.toString.call(a);return void 0!==a&&("[object NodeList]"===j||"[object HTMLCollection]"===j)&&"length"in a&&(0===a.length||A.node(a[0]))},A.string=function(a){return"string"===typeof a||a instanceof String},A.fn=function(a){return"[object Function]"===Object.prototype.toString.call(a)}},function(a,A,j){var P=j(358);function _delegate(a,A,j,P,B){var q=listener.apply(this,arguments);return a.addEventListener(j,q,B),{destroy:function destroy(){a.removeEventListener(j,q,B)}}}function listener(a,A,j,B){return function(j){j.delegateTarget=P(j.target,A),j.delegateTarget&&B.call(a,j)}}a.exports=function delegate(a,A,j,P,B){return"function"===typeof a.addEventListener?_delegate.apply(null,arguments):"function"===typeof j?_delegate.bind(null,document).apply(null,arguments):("string"===typeof a&&(a=document.querySelectorAll(a)),Array.prototype.map.call(a,(function(a){return _delegate(a,A,j,P,B)})))}},function(a,A){if("undefined"!==typeof Element&&!Element.prototype.matches){var j=Element.prototype;j.matches=j.matchesSelector||j.mozMatchesSelector||j.msMatchesSelector||j.oMatchesSelector||j.webkitMatchesSelector}a.exports=function closest(a,A){for(;a&&9!==a.nodeType;){if("function"===typeof a.matches&&a.matches(A))return a;a=a.parentNode}}},function(a,A,j){"use strict";var P=a.exports={};P.linearRegression=j(360),P.linearRegressionLine=j(361),P.standardDeviation=j(179),P.rSquared=j(362),P.mode=j(363),P.modeFast=j(364),P.modeSorted=j(183),P.min=j(184),P.max=j(185),P.minSorted=j(365),P.maxSorted=j(366),P.sum=j(181),P.sumSimple=j(367),P.product=j(368),P.quantile=j(129),P.quantileSorted=j(130),P.interquartileRange=P.iqr=j(370),P.medianAbsoluteDeviation=P.mad=j(371),P.chunk=j(372),P.sampleWithReplacement=j(373),P.shuffle=j(187),P.shuffleInPlace=j(188),P.sample=j(374),P.ckmeans=j(375),P.uniqueCountSorted=j(189),P.sumNthPowerDeviations=j(128),P.equalIntervalBreaks=j(376),P.sampleCovariance=j(190),P.sampleCorrelation=j(377),P.sampleVariance=j(131),P.sampleStandardDeviation=j(191),P.sampleSkewness=j(378),P.sampleKurtosis=j(379),P.permutationsHeap=j(380),P.combinations=j(381),P.combinationsReplacement=j(382),P.addToMean=j(383),P.combineMeans=j(192),P.combineVariances=j(384),P.geometricMean=j(385),P.harmonicMean=j(386),P.mean=P.average=j(49),P.median=j(186),P.medianSorted=j(387),P.subtractFromMean=j(388),P.rootMeanSquare=P.rms=j(389),P.variance=j(180),P.tTest=j(390),P.tTestTwoSample=j(391),P.BayesianClassifier=P.bayesian=j(392),P.PerceptronModel=P.perceptron=j(393),P.epsilon=j(88),P.factorial=j(394),P.bernoulliDistribution=j(395),P.binomialDistribution=j(396),P.poissonDistribution=j(397),P.chiSquaredGoodnessOfFit=j(398),P.zScore=j(400),P.cumulativeStdNormalProbability=j(401),P.standardNormalTable=j(193),P.errorFunction=P.erf=j(402),P.inverseErrorFunction=j(194),P.probit=j(403),P.bisect=j(404)},function(a,A,j){"use strict";a.exports=function linearRegression(a){var A,j,P=a.length;if(1===P)A=0,j=a[0][1];else{for(var B,q,ne,ie=0,oe=0,se=0,le=0,he=0;he<P;he++)ie+=q=(B=a[he])[0],oe+=ne=B[1],se+=q*q,le+=q*ne;j=oe/P-(A=(P*le-ie*oe)/(P*se-ie*ie))*ie/P}return{m:A,b:j}}},function(a,A,j){"use strict";a.exports=function linearRegressionLine(a){return function(A){return a.b+a.m*A}}},function(a,A,j){"use strict";a.exports=function rSquared(a,A){if(a.length<2)return 1;for(var j,P=0,B=0;B<a.length;B++)P+=a[B][1];j=P/a.length;for(var q=0,ne=0;ne<a.length;ne++)q+=Math.pow(j-a[ne][1],2);for(var ie=0,oe=0;oe<a.length;oe++)ie+=Math.pow(a[oe][1]-A(a[oe][0]),2);return 1-ie/q}},function(a,A,j){"use strict";var P=j(182),B=j(183);a.exports=function mode(a){return B(P(a))}},function(a,A,j){"use strict";a.exports=function modeFast(a){for(var A,j=new Map,P=0,B=0;B<a.length;B++){var q=j.get(a[B]);void 0===q?q=1:q++,q>P&&(A=a[B],P=q),j.set(a[B],q)}if(0===P)throw new Error("mode requires at last one data point");return A}},function(a,A,j){"use strict";a.exports=function minSorted(a){return a[0]}},function(a,A,j){"use strict";a.exports=function maxSorted(a){return a[a.length-1]}},function(a,A,j){"use strict";a.exports=function sumSimple(a){for(var A=0,j=0;j<a.length;j++)A+=a[j];return A}},function(a,A,j){"use strict";a.exports=function product(a){for(var A=1,j=0;j<a.length;j++)A*=a[j];return A}},function(a,A,j){"use strict";function swap(a,A,j){var P=a[A];a[A]=a[j],a[j]=P}a.exports=function quickselect(a,A,j,P){j=j||0,P=P||a.length-1;for(;P>j;){if(P-j>600){var B=P-j+1,q=A-j+1,ne=Math.log(B),ie=.5*Math.exp(2*ne/3),oe=.5*Math.sqrt(ne*ie*(B-ie)/B);q-B/2<0&&(oe*=-1);var se=Math.max(j,Math.floor(A-q*ie/B+oe)),le=Math.min(P,Math.floor(A+(B-q)*ie/B+oe));quickselect(a,A,se,le)}var he=a[A],pe=j,ge=P;for(swap(a,j,A),a[P]>he&&swap(a,j,P);pe<ge;){for(swap(a,pe,ge),pe++,ge--;a[pe]<he;)pe++;for(;a[ge]>he;)ge--}a[j]===he?swap(a,j,ge):(ge++,swap(a,ge,P)),ge<=A&&(j=ge+1),A<=ge&&(P=ge-1)}}},function(a,A,j){"use strict";var P=j(129);a.exports=function interquartileRange(a){var A=P(a,.75),j=P(a,.25);if("number"===typeof A&&"number"===typeof j)return A-j}},function(a,A,j){"use strict";var P=j(186);a.exports=function medianAbsoluteDeviation(a){for(var A=P(a),j=[],B=0;B<a.length;B++)j.push(Math.abs(a[B]-A));return P(j)}},function(a,A,j){"use strict";a.exports=function chunk(a,A){var j=[];if(A<1)throw new Error("chunk size must be a positive number");if(Math.floor(A)!==A)throw new Error("chunk size must be an integer");for(var P=0;P<a.length;P+=A)j.push(a.slice(P,P+A));return j}},function(a,A,j){"use strict";a.exports=function sampleWithReplacement(a,A,j){if(0===a.length)return[];j=j||Math.random;for(var P=a.length,B=[],q=0;q<A;q++){var ne=Math.floor(j()*P);B.push(a[ne])}return B}},function(a,A,j){"use strict";var P=j(187);a.exports=function sample(a,A,j){return P(a,j).slice(0,A)}},function(a,A,j){"use strict";var P=j(189),B=j(182);function makeMatrix(a,A){for(var j=[],P=0;P<a;P++){for(var B=[],q=0;q<A;q++)B.push(0);j.push(B)}return j}function ssq(a,A,j,P){var B;if(a>0){var q=(j[A]-j[a-1])/(A-a+1);B=P[A]-P[a-1]-(A-a+1)*q*q}else B=P[A]-j[A]*j[A]/(A+1);return B<0?0:B}function fillMatrixColumn(a,A,j,P,B,q,ne){if(!(a>A)){var ie=Math.floor((a+A)/2);P[j][ie]=P[j-1][ie-1],B[j][ie]=ie;var oe=j;a>j&&(oe=Math.max(oe,B[j][a-1]||0)),oe=Math.max(oe,B[j-1][ie]||0);var se,le,he,pe=ie-1;A<P.length-1&&(pe=Math.min(pe,B[j][A+1]||0));for(var ge=pe;ge>=oe&&!((se=ssq(ge,ie,q,ne))+P[j-1][oe-1]>=P[j][ie]);--ge)(le=ssq(oe,ie,q,ne)+P[j-1][oe-1])<P[j][ie]&&(P[j][ie]=le,B[j][ie]=oe),oe++,(he=se+P[j-1][ge-1])<P[j][ie]&&(P[j][ie]=he,B[j][ie]=ge);fillMatrixColumn(a,ie-1,j,P,B,q,ne),fillMatrixColumn(ie+1,A,j,P,B,q,ne)}}a.exports=function ckmeans(a,A){if(A>a.length)throw new Error("cannot generate more classes than there are data values");var j=B(a);if(1===P(j))return[j];var q=makeMatrix(A,j.length),ne=makeMatrix(A,j.length);!function fillMatrices(a,A,j){for(var P,B=A[0].length,q=a[Math.floor(B/2)],ne=[],ie=[],oe=0;oe<B;++oe)P=a[oe]-q,0===oe?(ne.push(P),ie.push(P*P)):(ne.push(ne[oe-1]+P),ie.push(ie[oe-1]+P*P)),A[0][oe]=ssq(0,oe,ne,ie),j[0][oe]=0;for(var se=1;se<A.length;++se)fillMatrixColumn(se<A.length-1?se:B-1,B-1,se,A,j,ne,ie)}(j,q,ne);for(var ie=[],oe=ne[0].length-1,se=ne.length-1;se>=0;se--){var le=ne[se][oe];ie[se]=j.slice(le,oe+1),se>0&&(oe=le-1)}return ie}},function(a,A,j){"use strict";var P=j(185),B=j(184);a.exports=function equalIntervalBreaks(a,A){if(a.length<2)return a;for(var j=B(a),q=P(a),ne=[j],ie=(q-j)/A,oe=1;oe<A;oe++)ne.push(ne[0]+ie*oe);return ne.push(q),ne}},function(a,A,j){"use strict";var P=j(190),B=j(191);a.exports=function sampleCorrelation(a,A){return P(a,A)/B(a)/B(A)}},function(a,A,j){"use strict";var P=j(49);a.exports=function sampleSkewness(a){if(a.length<3)throw new Error("sampleSkewness requires at least three data points");for(var A,j=P(a),B=0,q=0,ne=0;ne<a.length;ne++)B+=(A=a[ne]-j)*A,q+=A*A*A;var ie=a.length-1,oe=Math.sqrt(B/ie),se=a.length;return se*q/((se-1)*(se-2)*Math.pow(oe,3))}},function(a,A,j){"use strict";var P=j(49);a.exports=function sampleKurtosis(a){var A=a.length;if(A<4)throw new Error("sampleKurtosis requires at least four data points");for(var j,B=P(a),q=0,ne=0,ie=0;ie<A;ie++)q+=(j=a[ie]-B)*j,ne+=j*j*j*j;return(A-1)/((A-2)*(A-3))*(A*(A+1)*ne/(q*q)-3*(A-1))}},function(a,A,j){"use strict";a.exports=function permutationsHeap(a){for(var A=new Array(a.length),j=[a.slice()],P=0;P<a.length;P++)A[P]=0;for(P=0;P<a.length;)if(A[P]<P){var B=0;P%2!==0&&(B=A[P]);var q=a[B];a[B]=a[P],a[P]=q,j.push(a.slice()),A[P]++,P=0}else A[P]=0,P++;return j}},function(a,A,j){"use strict";a.exports=function combinations(a,A){var j,P,B,q,ne=[];for(j=0;j<a.length;j++)if(1===A)ne.push([a[j]]);else for(B=combinations(a.slice(j+1,a.length),A-1),P=0;P<B.length;P++)(q=B[P]).unshift(a[j]),ne.push(q);return ne}},function(a,A,j){"use strict";a.exports=function combinationsReplacement(a,A){for(var j=[],P=0;P<a.length;P++)if(1===A)j.push([a[P]]);else for(var B=combinationsReplacement(a.slice(P,a.length),A-1),q=0;q<B.length;q++)j.push([a[P]].concat(B[q]));return j}},function(a,A,j){"use strict";a.exports=function addToMean(a,A,j){return a+(j-a)/(A+1)}},function(a,A,j){"use strict";var P=j(192);a.exports=function combineVariances(a,A,j,B,q,ne){var ie=P(A,j,q,ne);return(j*(a+Math.pow(A-ie,2))+ne*(B+Math.pow(q-ie,2)))/(j+ne)}},function(a,A,j){"use strict";a.exports=function geometricMean(a){if(0===a.length)throw new Error("geometricMean requires at least one data point");for(var A=1,j=0;j<a.length;j++){if(a[j]<=0)throw new Error("geometricMean requires only positive numbers as input");A*=a[j]}return Math.pow(A,1/a.length)}},function(a,A,j){"use strict";a.exports=function harmonicMean(a){if(0===a.length)throw new Error("harmonicMean requires at least one data point");for(var A=0,j=0;j<a.length;j++){if(a[j]<=0)throw new Error("harmonicMean requires only positive numbers as input");A+=1/a[j]}return a.length/A}},function(a,A,j){"use strict";var P=j(130);a.exports=function medianSorted(a){return P(a,.5)}},function(a,A,j){"use strict";a.exports=function subtractFromMean(a,A,j){return(a*A-j)/(A-1)}},function(a,A,j){"use strict";a.exports=function rootMeanSquare(a){if(0===a.length)throw new Error("rootMeanSquare requires at least one data point");for(var A=0,j=0;j<a.length;j++)A+=Math.pow(a[j],2);return Math.sqrt(A/a.length)}},function(a,A,j){"use strict";var P=j(179),B=j(49);a.exports=function tTest(a,A){return(B(a)-A)/(P(a)/Math.sqrt(a.length))}},function(a,A,j){"use strict";var P=j(49),B=j(131);a.exports=function tTestTwoSample(a,A,j){var q=a.length,ne=A.length;if(!q||!ne)return null;j||(j=0);var ie=P(a),oe=P(A),se=B(a),le=B(A);if("number"===typeof ie&&"number"===typeof oe&&"number"===typeof se&&"number"===typeof le){var he=((q-1)*se+(ne-1)*le)/(q+ne-2);return(ie-oe-j)/Math.sqrt(he*(1/q+1/ne))}}},function(a,A,j){"use strict";function BayesianClassifier(){this.totalCount=0,this.data={}}BayesianClassifier.prototype.train=function(a,A){for(var j in this.data[A]||(this.data[A]={}),a){var P=a[j];void 0===this.data[A][j]&&(this.data[A][j]={}),void 0===this.data[A][j][P]&&(this.data[A][j][P]=0),this.data[A][j][P]++}this.totalCount++},BayesianClassifier.prototype.score=function(a){var A,j={};for(var P in a){var B=a[P];for(A in this.data)j[A]={},this.data[A][P]?j[A][P+"_"+B]=(this.data[A][P][B]||0)/this.totalCount:j[A][P+"_"+B]=0}var q={};for(A in j)for(var ne in q[A]=0,j[A])q[A]+=j[A][ne];return q},a.exports=BayesianClassifier},function(a,A,j){"use strict";function PerceptronModel(){this.weights=[],this.bias=0}PerceptronModel.prototype.predict=function(a){if(a.length!==this.weights.length)return null;for(var A=0,j=0;j<this.weights.length;j++)A+=this.weights[j]*a[j];return(A+=this.bias)>0?1:0},PerceptronModel.prototype.train=function(a,A){if(0!==A&&1!==A)return null;a.length!==this.weights.length&&(this.weights=a,this.bias=1);var j=this.predict(a);if(j!==A){for(var P=A-j,B=0;B<this.weights.length;B++)this.weights[B]+=P*a[B];this.bias+=P}return this},a.exports=PerceptronModel},function(a,A,j){"use strict";a.exports=function factorial(a){if(a<0)throw new Error("factorial requires a non-negative value");if(Math.floor(a)!==a)throw new Error("factorial requires an integer input");for(var A=1,j=2;j<=a;j++)A*=j;return A}},function(a,A,j){"use strict";a.exports=function bernoulliDistribution(a){if(a<0||a>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-a,a]}},function(a,A,j){"use strict";var P=j(88);a.exports=function binomialDistribution(a,A){if(!(A<0||A>1||a<=0||a%1!==0)){var j=0,B=0,q=[],ne=1;do{q[j]=ne*Math.pow(A,j)*Math.pow(1-A,a-j),B+=q[j],ne=ne*(a-++j+1)/j}while(B<1-P);return q}}},function(a,A,j){"use strict";var P=j(88);a.exports=function poissonDistribution(a){if(!(a<=0)){var A=0,j=0,B=[],q=1;do{B[A]=Math.exp(-a)*Math.pow(a,A)/q,j+=B[A],q*=++A}while(j<1-P);return B}}},function(a,A,j){"use strict";var P=j(49),B=j(399);a.exports=function chiSquaredGoodnessOfFit(a,A,j){for(var q,ne,ie=0,oe=A(P(a)),se=[],le=[],he=0;he<a.length;he++)void 0===se[a[he]]&&(se[a[he]]=0),se[a[he]]++;for(he=0;he<se.length;he++)void 0===se[he]&&(se[he]=0);for(ne in oe)ne in se&&(le[+ne]=oe[ne]*a.length);for(ne=le.length-1;ne>=0;ne--)le[ne]<3&&(le[ne-1]+=le[ne],le.pop(),se[ne-1]+=se[ne],se.pop());for(ne=0;ne<se.length;ne++)ie+=Math.pow(se[ne]-le[ne],2)/le[ne];return q=se.length-1-1,B[q][j]<ie}},function(a,A,j){"use strict";a.exports={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}}},function(a,A,j){"use strict";a.exports=function zScore(a,A,j){return(a-A)/j}},function(a,A,j){"use strict";var P=j(193);a.exports=function cumulativeStdNormalProbability(a){var A=Math.abs(a),j=Math.min(Math.round(100*A),P.length-1);return a>=0?P[j]:+(1-P[j]).toFixed(4)}},function(a,A,j){"use strict";a.exports=function errorFunction(a){var A=1/(1+.5*Math.abs(a)),j=A*Math.exp(-Math.pow(a,2)-1.26551223+1.00002368*A+.37409196*Math.pow(A,2)+.09678418*Math.pow(A,3)-.18628806*Math.pow(A,4)+.27886807*Math.pow(A,5)-1.13520398*Math.pow(A,6)+1.48851587*Math.pow(A,7)-.82215223*Math.pow(A,8)+.17087277*Math.pow(A,9));return a>=0?1-j:j-1}},function(a,A,j){"use strict";var P=j(88),B=j(194);a.exports=function probit(a){return 0===a?a=P:a>=1&&(a=1-P),Math.sqrt(2)*B(2*a-1)}},function(a,A,j){"use strict";var P=j(405);a.exports=function bisect(a,A,j,B,q){if("function"!==typeof a)throw new TypeError("func must be a function");for(var ne=0;ne<B;ne++){var ie=(A+j)/2;if(0===a(ie)||Math.abs((j-A)/2)<q)return ie;P(a(ie))===P(a(A))?A=ie:j=ie}throw new Error("maximum number of iterations exceeded")}},function(a,A,j){"use strict";a.exports=function sign(a){if("number"===typeof a)return a<0?-1:0===a?0:1;throw new TypeError("not a number")}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var P=j(132),B=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(197));A.default=(0,B.default)(!1,P.defaultSelectorHandlers),a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function createPrefixer(a){var A=a.prefixMap,j=a.plugins;return function prefixAll(a){for(var ie in a){var oe=a[ie];if((0,ne.default)(oe))a[ie]=prefixAll(oe);else if(Array.isArray(oe)){for(var se=[],le=0,he=oe.length;le<he;++le){var pe=(0,B.default)(j,ie,oe[le],a,A);(0,q.default)(se,pe||oe[le])}se.length>0&&(a[ie]=se)}else{var ge=(0,B.default)(j,ie,oe,a,A);ge&&(a[ie]=ge),(0,P.default)(A,ie,a)}}return a}};var P=_interopRequireDefault(j(408)),B=_interopRequireDefault(j(409)),q=_interopRequireDefault(j(410)),ne=_interopRequireDefault(j(411));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function prefixProperty(a,A,j){if(a.hasOwnProperty(A))for(var B=a[A],q=0,ne=B.length;q<ne;++q)j[B[q]+(0,P.default)(A)]=j[A]};var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(195));a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function prefixValue(a,A,j,P,B){for(var q=0,ne=a.length;q<ne;++q){var ie=a[q](A,j,P,B);if(ie)return ie}},a.exports=A.default},function(a,A,j){"use strict";function addIfNew(a,A){-1===a.indexOf(A)&&a.push(A)}Object.defineProperty(A,"__esModule",{value:!0}),A.default=function addNewValuesOnly(a,A){if(Array.isArray(A))for(var j=0,P=A.length;j<P;++j)addIfNew(a,A[j]);else addIfNew(a,A)},a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function isObject(a){return a instanceof Object&&!Array.isArray(a)},a.exports=A.default},function(a,A,j){var P=j(413),B=j(414),q=j(415),ne=j(416),ie=j(417),oe=j(418),se=j(419),le=j(420),he=j(421),pe=j(422),ge=j(423),me=j(424);a.exports={plugins:[P,B,q,ne,ie,oe,se,le,he,pe,ge,me],prefixMap:{transform:["Webkit","ms"],transformOrigin:["Webkit","ms"],transformOriginX:["Webkit","ms"],transformOriginY:["Webkit","ms"],backfaceVisibility:["Webkit"],perspective:["Webkit"],perspectiveOrigin:["Webkit"],transformStyle:["Webkit"],transformOriginZ:["Webkit"],animation:["Webkit"],animationDelay:["Webkit"],animationDirection:["Webkit"],animationFillMode:["Webkit"],animationDuration:["Webkit"],animationIterationCount:["Webkit"],animationName:["Webkit"],animationPlayState:["Webkit"],animationTimingFunction:["Webkit"],appearance:["Webkit","Moz"],userSelect:["Webkit","Moz","ms"],fontKerning:["Webkit"],textEmphasisPosition:["Webkit"],textEmphasis:["Webkit"],textEmphasisStyle:["Webkit"],textEmphasisColor:["Webkit"],boxDecorationBreak:["Webkit"],clipPath:["Webkit"],maskImage:["Webkit"],maskMode:["Webkit"],maskRepeat:["Webkit"],maskPosition:["Webkit"],maskClip:["Webkit"],maskOrigin:["Webkit"],maskSize:["Webkit"],maskComposite:["Webkit"],mask:["Webkit"],maskBorderSource:["Webkit"],maskBorderMode:["Webkit"],maskBorderSlice:["Webkit"],maskBorderWidth:["Webkit"],maskBorderOutset:["Webkit"],maskBorderRepeat:["Webkit"],maskBorder:["Webkit"],maskType:["Webkit"],textDecorationStyle:["Webkit","Moz"],textDecorationSkip:["Webkit","Moz"],textDecorationLine:["Webkit","Moz"],textDecorationColor:["Webkit","Moz"],filter:["Webkit"],fontFeatureSettings:["Webkit","Moz"],breakAfter:["Webkit","Moz","ms"],breakBefore:["Webkit","Moz","ms"],breakInside:["Webkit","Moz","ms"],columnCount:["Webkit","Moz"],columnFill:["Webkit","Moz"],columnGap:["Webkit","Moz"],columnRule:["Webkit","Moz"],columnRuleColor:["Webkit","Moz"],columnRuleStyle:["Webkit","Moz"],columnRuleWidth:["Webkit","Moz"],columns:["Webkit","Moz"],columnSpan:["Webkit","Moz"],columnWidth:["Webkit","Moz"],flex:["Webkit","ms"],flexBasis:["Webkit"],flexDirection:["Webkit","ms"],flexGrow:["Webkit"],flexFlow:["Webkit","ms"],flexShrink:["Webkit"],flexWrap:["Webkit","ms"],alignContent:["Webkit"],alignItems:["Webkit"],alignSelf:["Webkit"],justifyContent:["Webkit"],order:["Webkit"],transitionDelay:["Webkit"],transitionDuration:["Webkit"],transitionProperty:["Webkit"],transitionTimingFunction:["Webkit"],backdropFilter:["Webkit"],scrollSnapType:["Webkit","ms"],scrollSnapPointsX:["Webkit","ms"],scrollSnapPointsY:["Webkit","ms"],scrollSnapDestination:["Webkit","ms"],scrollSnapCoordinate:["Webkit","ms"],shapeImageThreshold:["Webkit"],shapeImageMargin:["Webkit"],shapeImageOutside:["Webkit"],hyphens:["Webkit","Moz","ms"],flowInto:["Webkit","ms"],flowFrom:["Webkit","ms"],regionFragment:["Webkit","ms"],boxSizing:["Moz"],textAlignLast:["Moz"],tabSize:["Moz"],wrapFlow:["ms"],wrapThrough:["ms"],wrapMargin:["ms"],touchAction:["ms"],gridTemplateColumns:["ms"],gridTemplateRows:["ms"],gridTemplateAreas:["ms"],gridTemplate:["ms"],gridAutoColumns:["ms"],gridAutoRows:["ms"],gridAutoFlow:["ms"],grid:["ms"],gridRowStart:["ms"],gridColumnStart:["ms"],gridRowEnd:["ms"],gridRow:["ms"],gridColumn:["ms"],gridColumnEnd:["ms"],gridColumnGap:["ms"],gridRowGap:["ms"],gridArea:["ms"],gridGap:["ms"],textSizeAdjust:["Webkit","ms"],borderImage:["Webkit"],borderImageOutset:["Webkit"],borderImageRepeat:["Webkit"],borderImageSlice:["Webkit"],borderImageSource:["Webkit"],borderImageWidth:["Webkit"]}}},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function calc(a,A){if("string"===typeof A&&!(0,P.default)(A)&&A.indexOf("calc(")>-1)return B.map((function(a){return A.replace(/calc\(/g,a+"calc(")}))};var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(65));var B=["-webkit-","-moz-",""];a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function crossFade(a,A){if("string"===typeof A&&!(0,P.default)(A)&&A.indexOf("cross-fade(")>-1)return B.map((function(a){return A.replace(/cross-fade\(/g,a+"cross-fade(")}))};var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(65));var B=["-webkit-",""];a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function cursor(a,A){if("cursor"===a&&B.hasOwnProperty(A))return P.map((function(a){return a+A}))};var P=["-webkit-","-moz-",""],B={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function filter(a,A){if("string"===typeof A&&!(0,P.default)(A)&&A.indexOf("filter(")>-1)return B.map((function(a){return A.replace(/filter\(/g,a+"filter(")}))};var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(65));var B=["-webkit-",""];a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function flex(a,A){if("display"===a&&P.hasOwnProperty(A))return P[A]};var P={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function flexboxIE(a,A,j){B.hasOwnProperty(a)&&(j[B[a]]=P[A]||A)};var P={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},B={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msFlexPreferredSize"};a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function flexboxOld(a,A,j){"flexDirection"===a&&"string"===typeof A&&(A.indexOf("column")>-1?j.WebkitBoxOrient="vertical":j.WebkitBoxOrient="horizontal",A.indexOf("reverse")>-1?j.WebkitBoxDirection="reverse":j.WebkitBoxDirection="normal");B.hasOwnProperty(a)&&(j[B[a]]=P[A]||A)};var P={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},B={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function gradient(a,A){if("string"===typeof A&&!(0,P.default)(A)&&q.test(A))return B.map((function(a){return a+A}))};var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(65));var B=["-webkit-","-moz-",""],q=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function imageSet(a,A){if("string"===typeof A&&!(0,P.default)(A)&&A.indexOf("image-set(")>-1)return B.map((function(a){return A.replace(/image-set\(/g,a+"image-set(")}))};var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(65));var B=["-webkit-",""];a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function position(a,A){if("position"===a&&"sticky"===A)return["-webkit-sticky","sticky"]},a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function sizing(a,A){if(B.hasOwnProperty(a)&&q.hasOwnProperty(A))return P.map((function(a){return a+A}))};var P=["-webkit-","-moz-",""],B={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},q={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function transition(a,A,j,oe){if("string"===typeof A&&ne.hasOwnProperty(a)){var se=function prefixValue(a,A){if((0,B.default)(a))return a;for(var j=a.split(/,(?![^()]*(?:\([^()]*\))?\))/g),q=0,ne=j.length;q<ne;++q){var oe=j[q],se=[oe];for(var le in A){var he=(0,P.default)(le);if(oe.indexOf(he)>-1&&"order"!==he)for(var pe=A[le],ge=0,me=pe.length;ge<me;++ge)se.unshift(oe.replace(he,ie[pe[ge]]+he))}j[q]=se.join(",")}return j.join(",")}(A,oe),le=se.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(a){return!/-moz-|-ms-/.test(a)})).join(",");if(a.indexOf("Webkit")>-1)return le;var he=se.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(a){return!/-webkit-|-ms-/.test(a)})).join(",");return a.indexOf("Moz")>-1?he:(j["Webkit"+(0,q.default)(a)]=le,j["Moz"+(0,q.default)(a)]=he,se)}};var P=_interopRequireDefault(j(425)),B=_interopRequireDefault(j(65)),q=_interopRequireDefault(j(195));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var ne={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},ie={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};a.exports=A.default},function(a,A,j){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.default=function hyphenateProperty(a){return(0,P.default)(a)};var P=function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(426));a.exports=A.default},function(a,A,j){"use strict";j.r(A);var P=/[A-Z]/g,B=/^ms-/,q={};function toHyphenLower(a){return"-"+a.toLowerCase()}A.default=function hyphenateStyleName(a){if(q.hasOwnProperty(a))return q[a];var A=a.replace(P,toHyphenLower);return q[a]=B.test(A)?"-"+A:A}},function(a,A,j){"use strict";a.exports=function hash(a){for(var A=5381,j=a.length;j;)A=33*A^a.charCodeAt(--j);return A>>>0}},function(a,A,j){"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(A,"__esModule",{value:!0});var P=_interopRequireDefault(j(429)),B=_interopRequireDefault(j(196)),q=j(132),ne=j(133),ie=null,oe={fontFamily:function fontFamily(a){return Array.isArray(a)?a.map(fontFamily).join(","):"object"===typeof a?(ge(a.src,"@font-face",[a],!1),'"'+a.fontFamily+'"'):a},animationName:function animationName(a,A){if(Array.isArray(a))return a.map((function(a){return animationName(a,A)})).join(",");if("object"===typeof a){var j="keyframe_"+(0,ne.hashObject)(a),P="@keyframes "+j+"{";return a instanceof B.default?a.forEach((function(a,j){P+=(0,q.generateCSS)(j,[a],A,oe,!1)})):Object.keys(a).forEach((function(j){P+=(0,q.generateCSS)(j,[a[j]],A,oe,!1)})),pe(j,P+="}"),j}return a}},se={},le="",he=!1,pe=function injectGeneratedCSSOnce(a,A){if(!se[a]){if(!he){if("undefined"===typeof document)throw new Error("Cannot automatically buffer without a document");he=!0,(0,P.default)(ve)}le+=A,se[a]=!0}},ge=function injectStyleOnce(a,A,j,P){var B=arguments.length<=4||void 0===arguments[4]?[]:arguments[4];if(!se[a]){var ne=(0,q.generateCSS)(A,j,B,oe,P);pe(a,ne)}};A.injectStyleOnce=ge;A.reset=function reset(){le="",se={},he=!1,ie=null};A.startBuffering=function startBuffering(){if(he)throw new Error("Cannot buffer while already buffering");he=!0};var me=function flushToString(){he=!1;var a=le;return le="",a};A.flushToString=me;var ve=function flushToStyleTag(){var a=me();a.length>0&&function injectStyleTag(a){if(null==ie&&null==(ie=document.querySelector("style[data-aphrodite]"))){var A=document.head||document.getElementsByTagName("head")[0];(ie=document.createElement("style")).type="text/css",ie.setAttribute("data-aphrodite",""),A.appendChild(ie)}ie.styleSheet?ie.styleSheet.cssText+=a:ie.appendChild(document.createTextNode(a))}(a)};A.flushToStyleTag=ve;A.getRenderedClassNames=function getRenderedClassNames(){return Object.keys(se)};A.addRenderedClassNames=function addRenderedClassNames(a){a.forEach((function(a){se[a]=!0}))};A.injectAndGetClassName=function injectAndGetClassName(a,A,j){var P={classNameBits:[],definitionBits:[]};if(function processStyleDefinitions(a,A){for(var j=0;j<a.length;j+=1)a[j]&&(Array.isArray(a[j])?processStyleDefinitions(a[j],A):(A.classNameBits.push(a[j]._name),A.definitionBits.push(a[j]._definition)))}(A,P),0===P.classNameBits.length)return"";var B=void 0;return B=1===P.classNameBits.length?"_"+P.classNameBits[0]:"_"+(0,ne.hashString)(P.classNameBits.join())+function getStyleDefinitionsLengthHash(a){return(a.reduce((function(a,A){return a+(A?A._len:0)}),0)%36).toString(36)}(A),ge(B,"."+B,P.definitionBits,a,j),B}},function(a,A,j){"use strict";var P=j(430),B=[],q=[],ne=P.makeRequestCallFromTimer((function throwFirstError(){if(q.length)throw q.shift()}));function asap(a){var A;(A=B.length?B.pop():new RawTask).task=a,P(A)}function RawTask(){this.task=null}a.exports=asap,RawTask.prototype.call=function(){try{this.task.call()}catch(a){asap.onerror?asap.onerror(a):(q.push(a),ne())}finally{this.task=null,B[B.length]=this}}},function(a,A,j){"use strict";(function(A){function rawAsap(a){P.length||(j(),!0),P[P.length]=a}a.exports=rawAsap;var j,P=[],B=0;function flush(){for(;B<P.length;){var a=B;if(B+=1,P[a].call(),B>1024){for(var A=0,j=P.length-B;A<j;A++)P[A]=P[A+B];P.length-=B,B=0}}P.length=0,B=0,!1}var q="undefined"!==typeof A?A:self,ne=q.MutationObserver||q.WebKitMutationObserver;function makeRequestCallFromTimer(a){return function requestCall(){var A=setTimeout(handleTimer,0),j=setInterval(handleTimer,50);function handleTimer(){clearTimeout(A),clearInterval(j),a()}}}j="function"===typeof ne?function makeRequestCallFromMutationObserver(a){var A=1,j=new ne(a),P=document.createTextNode("");return j.observe(P,{characterData:!0}),function requestCall(){A=-A,P.data=A}}(flush):makeRequestCallFromTimer(flush),rawAsap.requestFlush=j,rawAsap.makeRequestCallFromTimer=makeRequestCallFromTimer}).call(this,j(35))},function(a,A,j){"use strict";var P=j(432);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,a.exports=function(){function shim(a,A,j,B,q,ne){if(ne!==P){var ie=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw ie.name="Invariant Violation",ie}}function getShim(){return shim}shim.isRequired=shim;var a={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return a.PropTypes=a,a}},function(a,A,j){"use strict";a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(a,A,j){"use strict";a.exports=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,(function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()}))}},,,function(a,A){a.exports=function(){throw new Error("define cannot be used indirect")}},function(a,A){(function(A){a.exports=A}).call(this,{})},function(a,A,j){"use strict";var P=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}();var B=function(a){function Gist(a,A,j){!function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,Gist);var P=function _possibleConstructorReturn(a,A){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!==typeof A&&"function"!==typeof A?a:A}(this,(Gist.__proto__||Object.getPrototypeOf(Gist)).call(this,A,j));return P.__id=a,P}return function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(a,A):a.__proto__=A)}(Gist,a),P(Gist,[{key:"read",value:function read(a){return this._request("GET","/gists/"+this.__id,null,a)}},{key:"create",value:function create(a,A){var j=this;return this._request("POST","/gists",a,A).then((function(a){return j.__id=a.data.id,a}))}},{key:"delete",value:function _delete(a){return this._request("DELETE","/gists/"+this.__id,null,a)}},{key:"fork",value:function fork(a){return this._request("POST","/gists/"+this.__id+"/forks",null,a)}},{key:"update",value:function update(a,A){return this._request("PATCH","/gists/"+this.__id,a,A)}},{key:"star",value:function star(a){return this._request("PUT","/gists/"+this.__id+"/star",null,a)}},{key:"unstar",value:function unstar(a){return this._request("DELETE","/gists/"+this.__id+"/star",null,a)}},{key:"isStarred",value:function isStarred(a){return this._request204or404("/gists/"+this.__id+"/star",null,a)}},{key:"listCommits",value:function listCommits(a){return this._requestAllPages("/gists/"+this.__id+"/commits",null,a)}},{key:"getRevision",value:function getRevision(a,A){return this._request("GET","/gists/"+this.__id+"/"+a,null,A)}},{key:"listComments",value:function listComments(a){return this._requestAllPages("/gists/"+this.__id+"/comments",null,a)}},{key:"getComment",value:function getComment(a,A){return this._request("GET","/gists/"+this.__id+"/comments/"+a,null,A)}},{key:"createComment",value:function createComment(a,A){return this._request("POST","/gists/"+this.__id+"/comments",{body:a},A)}},{key:"editComment",value:function editComment(a,A,j){return this._request("PATCH","/gists/"+this.__id+"/comments/"+a,{body:A},j)}},{key:"deleteComment",value:function deleteComment(a,A){return this._request("DELETE","/gists/"+this.__id+"/comments/"+a,null,A)}}]),Gist}(function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(36)).default);a.exports=B},function(a,A,j){a.exports=j(440)},function(a,A,j){"use strict";var P=j(28),B=j(199),q=j(441),ne=j(205);function createInstance(a){var A=new q(a),j=B(q.prototype.request,A);return P.extend(j,q.prototype,A),P.extend(j,A),j}var ie=createInstance(j(134));ie.Axios=q,ie.create=function create(a){return createInstance(ne(ie.defaults,a))},ie.Cancel=j(206),ie.CancelToken=j(455),ie.isCancel=j(204),ie.all=function all(a){return Promise.all(a)},ie.spread=j(456),ie.isAxiosError=j(457),a.exports=ie,a.exports.default=ie},function(a,A,j){"use strict";var P=j(28),B=j(200),q=j(442),ne=j(443),ie=j(205),oe=j(453),se=oe.validators;function Axios(a){this.defaults=a,this.interceptors={request:new q,response:new q}}Axios.prototype.request=function request(a){"string"===typeof a?(a=arguments[1]||{}).url=arguments[0]:a=a||{},(a=ie(this.defaults,a)).method?a.method=a.method.toLowerCase():this.defaults.method?a.method=this.defaults.method.toLowerCase():a.method="get";var A=a.transitional;void 0!==A&&oe.assertOptions(A,{silentJSONParsing:se.transitional(se.boolean,"1.0.0"),forcedJSONParsing:se.transitional(se.boolean,"1.0.0"),clarifyTimeoutError:se.transitional(se.boolean,"1.0.0")},!1);var j=[],P=!0;this.interceptors.request.forEach((function unshiftRequestInterceptors(A){"function"===typeof A.runWhen&&!1===A.runWhen(a)||(P=P&&A.synchronous,j.unshift(A.fulfilled,A.rejected))}));var B,q=[];if(this.interceptors.response.forEach((function pushResponseInterceptors(a){q.push(a.fulfilled,a.rejected)})),!P){var le=[ne,void 0];for(Array.prototype.unshift.apply(le,j),le=le.concat(q),B=Promise.resolve(a);le.length;)B=B.then(le.shift(),le.shift());return B}for(var he=a;j.length;){var pe=j.shift(),ge=j.shift();try{he=pe(he)}catch(me){ge(me);break}}try{B=ne(he)}catch(me){return Promise.reject(me)}for(;q.length;)B=B.then(q.shift(),q.shift());return B},Axios.prototype.getUri=function getUri(a){return a=ie(this.defaults,a),B(a.url,a.params,a.paramsSerializer).replace(/^\?/,"")},P.forEach(["delete","get","head","options"],(function forEachMethodNoData(a){Axios.prototype[a]=function(A,j){return this.request(ie(j||{},{method:a,url:A,data:(j||{}).data}))}})),P.forEach(["post","put","patch"],(function forEachMethodWithData(a){Axios.prototype[a]=function(A,j,P){return this.request(ie(P||{},{method:a,url:A,data:j}))}})),a.exports=Axios},function(a,A,j){"use strict";var P=j(28);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(a,A,j){return this.handlers.push({fulfilled:a,rejected:A,synchronous:!!j&&j.synchronous,runWhen:j?j.runWhen:null}),this.handlers.length-1},InterceptorManager.prototype.eject=function eject(a){this.handlers[a]&&(this.handlers[a]=null)},InterceptorManager.prototype.forEach=function forEach(a){P.forEach(this.handlers,(function forEachHandler(A){null!==A&&a(A)}))},a.exports=InterceptorManager},function(a,A,j){"use strict";var P=j(28),B=j(444),q=j(204),ne=j(134);function throwIfCancellationRequested(a){a.cancelToken&&a.cancelToken.throwIfRequested()}a.exports=function dispatchRequest(a){return throwIfCancellationRequested(a),a.headers=a.headers||{},a.data=B.call(a,a.data,a.headers,a.transformRequest),a.headers=P.merge(a.headers.common||{},a.headers[a.method]||{},a.headers),P.forEach(["delete","get","head","post","put","patch","common"],(function cleanHeaderConfig(A){delete a.headers[A]})),(a.adapter||ne.adapter)(a).then((function onAdapterResolution(A){return throwIfCancellationRequested(a),A.data=B.call(a,A.data,A.headers,a.transformResponse),A}),(function onAdapterRejection(A){return q(A)||(throwIfCancellationRequested(a),A&&A.response&&(A.response.data=B.call(a,A.response.data,A.response.headers,a.transformResponse))),Promise.reject(A)}))}},function(a,A,j){"use strict";var P=j(28),B=j(134);a.exports=function transformData(a,A,j){var q=this||B;return P.forEach(j,(function transform(j){a=j.call(q,a,A)})),a}},function(a,A,j){"use strict";var P=j(28);a.exports=function normalizeHeaderName(a,A){P.forEach(a,(function processHeader(j,P){P!==A&&P.toUpperCase()===A.toUpperCase()&&(a[A]=j,delete a[P])}))}},function(a,A,j){"use strict";var P=j(203);a.exports=function settle(a,A,j){var B=j.config.validateStatus;j.status&&B&&!B(j.status)?A(P("Request failed with status code "+j.status,j.config,null,j.request,j)):a(j)}},function(a,A,j){"use strict";var P=j(28);a.exports=P.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(a,A,j,B,q,ne){var ie=[];ie.push(a+"="+encodeURIComponent(A)),P.isNumber(j)&&ie.push("expires="+new Date(j).toGMTString()),P.isString(B)&&ie.push("path="+B),P.isString(q)&&ie.push("domain="+q),!0===ne&&ie.push("secure"),document.cookie=ie.join("; ")},read:function read(a){var A=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return A?decodeURIComponent(A[3]):null},remove:function remove(a){this.write(a,"",Date.now()-864e5)}}}():{write:function write(){},read:function read(){return null},remove:function remove(){}}},function(a,A,j){"use strict";var P=j(449),B=j(450);a.exports=function buildFullPath(a,A){return a&&!P(A)?B(a,A):A}},function(a,A,j){"use strict";a.exports=function isAbsoluteURL(a){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(a)}},function(a,A,j){"use strict";a.exports=function combineURLs(a,A){return A?a.replace(/\/+$/,"")+"/"+A.replace(/^\/+/,""):a}},function(a,A,j){"use strict";var P=j(28),B=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];a.exports=function parseHeaders(a){var A,j,q,ne={};return a?(P.forEach(a.split("\n"),(function parser(a){if(q=a.indexOf(":"),A=P.trim(a.substr(0,q)).toLowerCase(),j=P.trim(a.substr(q+1)),A){if(ne[A]&&B.indexOf(A)>=0)return;ne[A]="set-cookie"===A?(ne[A]?ne[A]:[]).concat([j]):ne[A]?ne[A]+", "+j:j}})),ne):ne}},function(a,A,j){"use strict";var P=j(28);a.exports=P.isStandardBrowserEnv()?function standardBrowserEnv(){var a,A=/(msie|trident)/i.test(navigator.userAgent),j=document.createElement("a");function resolveURL(a){var P=a;return A&&(j.setAttribute("href",P),P=j.href),j.setAttribute("href",P),{href:j.href,protocol:j.protocol?j.protocol.replace(/:$/,""):"",host:j.host,search:j.search?j.search.replace(/^\?/,""):"",hash:j.hash?j.hash.replace(/^#/,""):"",hostname:j.hostname,port:j.port,pathname:"/"===j.pathname.charAt(0)?j.pathname:"/"+j.pathname}}return a=resolveURL(window.location.href),function isURLSameOrigin(A){var j=P.isString(A)?resolveURL(A):A;return j.protocol===a.protocol&&j.host===a.host}}():function isURLSameOrigin(){return!0}},function(a,A,j){"use strict";var P=j(454),B={};["object","boolean","number","function","string","symbol"].forEach((function(a,A){B[a]=function validator(j){return typeof j===a||"a"+(A<1?"n ":" ")+a}}));var q={},ne=P.version.split(".");function isOlderVersion(a,A){for(var j=A?A.split("."):ne,P=a.split("."),B=0;B<3;B++){if(j[B]>P[B])return!0;if(j[B]<P[B])return!1}return!1}B.transitional=function transitional(a,A,j){var B=A&&isOlderVersion(A);function formatMessage(a,A){return"[Axios v"+P.version+"] Transitional option '"+a+"'"+A+(j?". "+j:"")}return function(j,P,ne){if(!1===a)throw new Error(formatMessage(P," has been removed in "+A));return B&&!q[P]&&(q[P]=!0,console.warn(formatMessage(P," has been deprecated since v"+A+" and will be removed in the near future"))),!a||a(j,P,ne)}},a.exports={isOlderVersion:isOlderVersion,assertOptions:function assertOptions(a,A,j){if("object"!==typeof a)throw new TypeError("options must be an object");for(var P=Object.keys(a),B=P.length;B-- >0;){var q=P[B],ne=A[q];if(ne){var ie=a[q],oe=void 0===ie||ne(ie,q,a);if(!0!==oe)throw new TypeError("option "+q+" must be "+oe)}else if(!0!==j)throw Error("Unknown option "+q)}},validators:B}},function(a){a.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},function(a,A,j){"use strict";var P=j(206);function CancelToken(a){if("function"!==typeof a)throw new TypeError("executor must be a function.");var A;this.promise=new Promise((function promiseExecutor(a){A=a}));var j=this;a((function cancel(a){j.reason||(j.reason=new P(a),A(j.reason))}))}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason)throw this.reason},CancelToken.source=function source(){var a;return{token:new CancelToken((function executor(A){a=A})),cancel:a}},a.exports=CancelToken},function(a,A,j){"use strict";a.exports=function spread(a){return function wrap(A){return a.apply(null,A)}}},function(a,A,j){"use strict";a.exports=function isAxiosError(a){return"object"===typeof a&&!0===a.isAxiosError}},function(a,A,j){var P;function createDebug(a){function debug(){if(debug.enabled){var a=debug,j=+new Date,B=j-(P||j);a.diff=B,a.prev=P,a.curr=j,P=j;for(var q=new Array(arguments.length),ne=0;ne<q.length;ne++)q[ne]=arguments[ne];q[0]=A.coerce(q[0]),"string"!==typeof q[0]&&q.unshift("%O");var ie=0;q[0]=q[0].replace(/%([a-zA-Z%])/g,(function(j,P){if("%%"===j)return j;ie++;var B=A.formatters[P];if("function"===typeof B){var ne=q[ie];j=B.call(a,ne),q.splice(ie,1),ie--}return j})),A.formatArgs.call(a,q);var oe=debug.log||A.log||console.log.bind(console);oe.apply(a,q)}}return debug.namespace=a,debug.enabled=A.enabled(a),debug.useColors=A.useColors(),debug.color=function selectColor(a){var j,P=0;for(j in a)P=(P<<5)-P+a.charCodeAt(j),P|=0;return A.colors[Math.abs(P)%A.colors.length]}(a),"function"===typeof A.init&&A.init(debug),debug}(A=a.exports=createDebug.debug=createDebug.default=createDebug).coerce=function coerce(a){return a instanceof Error?a.stack||a.message:a},A.disable=function disable(){A.enable("")},A.enable=function enable(a){A.save(a),A.names=[],A.skips=[];for(var j=("string"===typeof a?a:"").split(/[\s,]+/),P=j.length,B=0;B<P;B++)j[B]&&("-"===(a=j[B].replace(/\*/g,".*?"))[0]?A.skips.push(new RegExp("^"+a.substr(1)+"$")):A.names.push(new RegExp("^"+a+"$")))},A.enabled=function enabled(a){var j,P;for(j=0,P=A.skips.length;j<P;j++)if(A.skips[j].test(a))return!1;for(j=0,P=A.names.length;j<P;j++)if(A.names[j].test(a))return!0;return!1},A.humanize=j(459),A.names=[],A.skips=[],A.formatters={}},function(a,A){var j=1e3,P=6e4,B=60*P,q=24*B;function plural(a,A,j){if(!(a<A))return a<1.5*A?Math.floor(a/A)+" "+j:Math.ceil(a/A)+" "+j+"s"}a.exports=function(a,A){A=A||{};var ne=typeof a;if("string"===ne&&a.length>0)return function parse(a){if((a=String(a)).length>100)return;var A=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(!A)return;var ne=parseFloat(A[1]);switch((A[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*ne;case"days":case"day":case"d":return ne*q;case"hours":case"hour":case"hrs":case"hr":case"h":return ne*B;case"minutes":case"minute":case"mins":case"min":case"m":return ne*P;case"seconds":case"second":case"secs":case"sec":case"s":return ne*j;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return ne;default:return}}(a);if("number"===ne&&!1===isNaN(a))return A.long?function fmtLong(a){return plural(a,q,"day")||plural(a,B,"hour")||plural(a,P,"minute")||plural(a,j,"second")||a+" ms"}(a):function fmtShort(a){if(a>=q)return Math.round(a/q)+"d";if(a>=B)return Math.round(a/B)+"h";if(a>=P)return Math.round(a/P)+"m";if(a>=j)return Math.round(a/j)+"s";return a+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},function(a,A,j){"use strict";var P=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}(),B=_interopRequireDefault(j(36));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var q=(0,_interopRequireDefault(j(77)).default)("github:user"),ne=function(a){function User(a,A,j){!function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,User);var P=function _possibleConstructorReturn(a,A){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!==typeof A&&"function"!==typeof A?a:A}(this,(User.__proto__||Object.getPrototypeOf(User)).call(this,A,j));return P.__user=a,P}return function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(a,A):a.__proto__=A)}(User,a),P(User,[{key:"__getScopedUrl",value:function __getScopedUrl(a){if(this.__user)return a?"/users/"+this.__user+"/"+a:"/users/"+this.__user;switch(a){case"":return"/user";case"notifications":case"gists":return"/"+a;default:return"/user/"+a}}},{key:"listRepos",value:function listRepos(a,A){return"function"===typeof a&&(A=a,a={}),a=this._getOptionsWithDefaults(a),q("Fetching repositories with options: "+JSON.stringify(a)),this._requestAllPages(this.__getScopedUrl("repos"),a,A)}},{key:"listOrgs",value:function listOrgs(a){return this._request("GET",this.__getScopedUrl("orgs"),null,a)}},{key:"listFollowers",value:function listFollowers(a){return this._request("GET",this.__getScopedUrl("followers"),null,a)}},{key:"listFollowing",value:function listFollowing(a){return this._request("GET",this.__getScopedUrl("following"),null,a)}},{key:"listGists",value:function listGists(a){return this._request("GET",this.__getScopedUrl("gists"),null,a)}},{key:"listNotifications",value:function listNotifications(a,A){return"function"===typeof(a=a||{})&&(A=a,a={}),a.since=this._dateToISO(a.since),a.before=this._dateToISO(a.before),this._request("GET",this.__getScopedUrl("notifications"),a,A)}},{key:"getProfile",value:function getProfile(a){return this._request("GET",this.__getScopedUrl(""),null,a)}},{key:"listStarredRepos",value:function listStarredRepos(a){var A=this._getOptionsWithDefaults();return this._requestAllPages(this.__getScopedUrl("starred"),A,a)}},{key:"listStarredGists",value:function listStarredGists(a,A){return"function"===typeof(a=a||{})&&(A=a,a={}),a.since=this._dateToISO(a.since),this._request("GET","/gists/starred",a,A)}},{key:"getEmails",value:function getEmails(a){return this._request("GET","/user/emails",null,a)}},{key:"follow",value:function follow(a,A){return this._request("PUT","/user/following/"+a,null,A)}},{key:"unfollow",value:function unfollow(a,A){return this._request("DELETE","/user/following/"+a,null,A)}},{key:"createRepo",value:function createRepo(a,A){return this._request("POST","/user/repos",a,A)}}]),User}(B.default);a.exports=ne},function(a,A,j){"use strict";var P=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}();var B=function(a){function Issue(a,A,j){!function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,Issue);var P=function _possibleConstructorReturn(a,A){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!==typeof A&&"function"!==typeof A?a:A}(this,(Issue.__proto__||Object.getPrototypeOf(Issue)).call(this,A,j));return P.__repository=a,P}return function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(a,A):a.__proto__=A)}(Issue,a),P(Issue,[{key:"createIssue",value:function createIssue(a,A){return this._request("POST","/repos/"+this.__repository+"/issues",a,A)}},{key:"listIssues",value:function listIssues(a,A){return this._requestAllPages("/repos/"+this.__repository+"/issues",a,A)}},{key:"listIssueEvents",value:function listIssueEvents(a,A){return this._request("GET","/repos/"+this.__repository+"/issues/"+a+"/events",null,A)}},{key:"listIssueComments",value:function listIssueComments(a,A){return this._request("GET","/repos/"+this.__repository+"/issues/"+a+"/comments",null,A)}},{key:"getIssueComment",value:function getIssueComment(a,A){return this._request("GET","/repos/"+this.__repository+"/issues/comments/"+a,null,A)}},{key:"createIssueComment",value:function createIssueComment(a,A,j){return this._request("POST","/repos/"+this.__repository+"/issues/"+a+"/comments",{body:A},j)}},{key:"editIssueComment",value:function editIssueComment(a,A,j){return this._request("PATCH","/repos/"+this.__repository+"/issues/comments/"+a,{body:A},j)}},{key:"deleteIssueComment",value:function deleteIssueComment(a,A){return this._request("DELETE","/repos/"+this.__repository+"/issues/comments/"+a,null,A)}},{key:"editIssue",value:function editIssue(a,A,j){return this._request("PATCH","/repos/"+this.__repository+"/issues/"+a,A,j)}},{key:"getIssue",value:function getIssue(a,A){return this._request("GET","/repos/"+this.__repository+"/issues/"+a,null,A)}},{key:"listMilestones",value:function listMilestones(a,A){return this._request("GET","/repos/"+this.__repository+"/milestones",a,A)}},{key:"getMilestone",value:function getMilestone(a,A){return this._request("GET","/repos/"+this.__repository+"/milestones/"+a,null,A)}},{key:"createMilestone",value:function createMilestone(a,A){return this._request("POST","/repos/"+this.__repository+"/milestones",a,A)}},{key:"editMilestone",value:function editMilestone(a,A,j){return this._request("PATCH","/repos/"+this.__repository+"/milestones/"+a,A,j)}},{key:"deleteMilestone",value:function deleteMilestone(a,A){return this._request("DELETE","/repos/"+this.__repository+"/milestones/"+a,null,A)}},{key:"createLabel",value:function createLabel(a,A){return this._request("POST","/repos/"+this.__repository+"/labels",a,A)}},{key:"listLabels",value:function listLabels(a,A){return this._request("GET","/repos/"+this.__repository+"/labels",a,A)}},{key:"getLabel",value:function getLabel(a,A){return this._request("GET","/repos/"+this.__repository+"/labels/"+a,null,A)}},{key:"editLabel",value:function editLabel(a,A,j){return this._request("PATCH","/repos/"+this.__repository+"/labels/"+a,A,j)}},{key:"deleteLabel",value:function deleteLabel(a,A){return this._request("DELETE","/repos/"+this.__repository+"/labels/"+a,null,A)}}]),Issue}(function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(36)).default);a.exports=B},function(a,A,j){"use strict";var P=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}(),B=_interopRequireDefault(j(36));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var q=(0,_interopRequireDefault(j(77)).default)("github:search"),ne=function(a){function Search(a,A,j){!function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,Search);var P=function _possibleConstructorReturn(a,A){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!==typeof A&&"function"!==typeof A?a:A}(this,(Search.__proto__||Object.getPrototypeOf(Search)).call(this,A,j));return P.__defaults=P._getOptionsWithDefaults(a),P}return function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(a,A):a.__proto__=A)}(Search,a),P(Search,[{key:"_search",value:function _search(a){var A=this,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,B={};return Object.keys(this.__defaults).forEach((function(a){B[a]=A.__defaults[a]})),Object.keys(j).forEach((function(a){B[a]=j[a]})),q("searching "+a+" with options:",B),this._requestAllPages("/search/"+a,B,P)}},{key:"forRepositories",value:function forRepositories(a,A){return this._search("repositories",a,A)}},{key:"forCode",value:function forCode(a,A){return this._search("code",a,A)}},{key:"forIssues",value:function forIssues(a,A){return this._search("issues",a,A)}},{key:"forUsers",value:function forUsers(a,A){return this._search("users",a,A)}}]),Search}(B.default);a.exports=ne},function(a,A,j){"use strict";var P=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}();var B=function(a){function RateLimit(a,A){return function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,RateLimit),function _possibleConstructorReturn(a,A){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!==typeof A&&"function"!==typeof A?a:A}(this,(RateLimit.__proto__||Object.getPrototypeOf(RateLimit)).call(this,a,A))}return function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(a,A):a.__proto__=A)}(RateLimit,a),P(RateLimit,[{key:"getRateLimit",value:function getRateLimit(a){return this._request("GET","/rate_limit",null,a)}}]),RateLimit}(function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(36)).default);a.exports=B},function(a,A,j){"use strict";(function(A){var P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},B=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}(),q=_interopRequireDefault(j(36)),ne=_interopRequireDefault(j(465)),ie=j(207);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var oe=(0,_interopRequireDefault(j(77)).default)("github:repository"),se=function(a){function Repository(a,A,j){!function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,Repository);var P=function _possibleConstructorReturn(a,A){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!==typeof A&&"function"!==typeof A?a:A}(this,(Repository.__proto__||Object.getPrototypeOf(Repository)).call(this,A,j));return P.__fullname=a,P.__currentTree={branch:null,sha:null},P}return function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(a,A):a.__proto__=A)}(Repository,a),B(Repository,[{key:"getRef",value:function getRef(a,A){return this._request("GET","/repos/"+this.__fullname+"/git/refs/"+a,null,A)}},{key:"createRef",value:function createRef(a,A){return this._request("POST","/repos/"+this.__fullname+"/git/refs",a,A)}},{key:"deleteRef",value:function deleteRef(a,A){return this._request("DELETE","/repos/"+this.__fullname+"/git/refs/"+a,null,A)}},{key:"deleteRepo",value:function deleteRepo(a){return this._request("DELETE","/repos/"+this.__fullname,null,a)}},{key:"listTags",value:function listTags(a){return this._request("GET","/repos/"+this.__fullname+"/tags",null,a)}},{key:"listPullRequests",value:function listPullRequests(a,A){return a=a||{},this._request("GET","/repos/"+this.__fullname+"/pulls",a,A)}},{key:"getPullRequest",value:function getPullRequest(a,A){return this._request("GET","/repos/"+this.__fullname+"/pulls/"+a,null,A)}},{key:"listPullRequestFiles",value:function listPullRequestFiles(a,A){return this._request("GET","/repos/"+this.__fullname+"/pulls/"+a+"/files",null,A)}},{key:"compareBranches",value:function compareBranches(a,A,j){return this._request("GET","/repos/"+this.__fullname+"/compare/"+a+"..."+A,null,j)}},{key:"listBranches",value:function listBranches(a){return this._request("GET","/repos/"+this.__fullname+"/branches",null,a)}},{key:"getBlob",value:function getBlob(a,A){return this._request("GET","/repos/"+this.__fullname+"/git/blobs/"+a,null,A,"raw")}},{key:"getBranch",value:function getBranch(a,A){return this._request("GET","/repos/"+this.__fullname+"/branches/"+a,null,A)}},{key:"getCommit",value:function getCommit(a,A){return this._request("GET","/repos/"+this.__fullname+"/git/commits/"+a,null,A)}},{key:"listCommits",value:function listCommits(a,A){return"function"===typeof(a=a||{})&&(A=a,a={}),a.since=this._dateToISO(a.since),a.until=this._dateToISO(a.until),this._request("GET","/repos/"+this.__fullname+"/commits",a,A)}},{key:"listCommitsOnPR",value:function listCommitsOnPR(a,A,j){return"function"===typeof(A=A||{})&&(j=A,A={}),this._request("GET","/repos/"+this.__fullname+"/pulls/"+a+"/commits",A,j)}},{key:"getSingleCommit",value:function getSingleCommit(a,A){return a=a||"",this._request("GET","/repos/"+this.__fullname+"/commits/"+a,null,A)}},{key:"getSha",value:function getSha(a,A,j){return a=a?"?ref="+a:"",this._request("GET","/repos/"+this.__fullname+"/contents/"+A+a,null,j)}},{key:"listStatuses",value:function listStatuses(a,A){return this._request("GET","/repos/"+this.__fullname+"/commits/"+a+"/statuses",null,A)}},{key:"getCombinedStatus",value:function getCombinedStatus(a,A){return this._request("GET","/repos/"+this.__fullname+"/commits/"+a+"/status",null,A)}},{key:"getTree",value:function getTree(a,A){return this._request("GET","/repos/"+this.__fullname+"/git/trees/"+a,null,A)}},{key:"createBlob",value:function createBlob(a,A){var j=this._getContentObject(a);return oe("sending content",j),this._request("POST","/repos/"+this.__fullname+"/git/blobs",j,A)}},{key:"_getContentObject",value:function _getContentObject(a){if("string"===typeof a)return oe("contet is a string"),{content:ne.default.encode(a),encoding:"utf-8"};if("undefined"!==typeof A&&a instanceof A)return oe("We appear to be in Node"),{content:a.toString("base64"),encoding:"base64"};if("undefined"!==typeof Blob&&a instanceof Blob)return oe("We appear to be in the browser"),{content:ie.Base64.encode(a),encoding:"base64"};throw oe("Not sure what this content is: "+("undefined"===typeof a?"undefined":P(a))+", "+JSON.stringify(a)),new Error("Unknown content passed to postBlob. Must be string or Buffer (node) or Blob (web)")}},{key:"updateTree",value:function updateTree(a,A,j,P){var B={base_tree:a,tree:[{path:A,sha:j,mode:"100644",type:"blob"}]};return this._request("POST","/repos/"+this.__fullname+"/git/trees",B,P)}},{key:"createTree",value:function createTree(a,A,j){return this._request("POST","/repos/"+this.__fullname+"/git/trees",{tree:a,base_tree:A},j)}},{key:"commit",value:function commit(a,A,j,P,B){var q=this;"function"===typeof P&&(B=P,P={});var ne={message:j,tree:A,parents:[a]};return ne=Object.assign({},P,ne),this._request("POST","/repos/"+this.__fullname+"/git/commits",ne,B).then((function(a){return q.__currentTree.sha=a.data.sha,a}))}},{key:"updateHead",value:function updateHead(a,A,j,P){return this._request("PATCH","/repos/"+this.__fullname+"/git/refs/"+a,{sha:A,force:j},P)}},{key:"updateStatus",value:function updateStatus(a,A,j){return this._request("POST","/repos/"+this.__fullname+"/statuses/"+a,A,j)}},{key:"updateRepository",value:function updateRepository(a,A){return this._request("PATCH","/repos/"+this.__fullname,a,A)}},{key:"getDetails",value:function getDetails(a){return this._request("GET","/repos/"+this.__fullname,null,a)}},{key:"getContributors",value:function getContributors(a){return this._request("GET","/repos/"+this.__fullname+"/contributors",null,a)}},{key:"getContributorStats",value:function getContributorStats(a){return this._request("GET","/repos/"+this.__fullname+"/stats/contributors",null,a)}},{key:"getCollaborators",value:function getCollaborators(a){return this._request("GET","/repos/"+this.__fullname+"/collaborators",null,a)}},{key:"isCollaborator",value:function isCollaborator(a,A){return this._request("GET","/repos/"+this.__fullname+"/collaborators/"+a,null,A)}},{key:"getContents",value:function getContents(a,A,j,P){return A=A?""+encodeURI(A):"",this._request("GET","/repos/"+this.__fullname+"/contents/"+A,{ref:a},P,j)}},{key:"getReadme",value:function getReadme(a,A,j){return this._request("GET","/repos/"+this.__fullname+"/readme",{ref:a},j,A)}},{key:"fork",value:function fork(a){return this._request("POST","/repos/"+this.__fullname+"/forks",null,a)}},{key:"forkToOrg",value:function forkToOrg(a,A){return this._request("POST","/repos/"+this.__fullname+"/forks?organization="+a,null,A)}},{key:"listForks",value:function listForks(a){return this._request("GET","/repos/"+this.__fullname+"/forks",null,a)}},{key:"createBranch",value:function createBranch(a,A,j){var P=this;return"function"===typeof A&&(j=A,A=a,a="master"),this.getRef("heads/"+a).then((function(a){var B=a.data.object.sha;return P.createRef({sha:B,ref:"refs/heads/"+A},j)}))}},{key:"createPullRequest",value:function createPullRequest(a,A){return this._request("POST","/repos/"+this.__fullname+"/pulls",a,A)}},{key:"updatePullRequest",value:function updatePullRequest(a,A,j){return this._request("PATCH","/repos/"+this.__fullname+"/pulls/"+a,A,j)}},{key:"listHooks",value:function listHooks(a){return this._request("GET","/repos/"+this.__fullname+"/hooks",null,a)}},{key:"getHook",value:function getHook(a,A){return this._request("GET","/repos/"+this.__fullname+"/hooks/"+a,null,A)}},{key:"createHook",value:function createHook(a,A){return this._request("POST","/repos/"+this.__fullname+"/hooks",a,A)}},{key:"updateHook",value:function updateHook(a,A,j){return this._request("PATCH","/repos/"+this.__fullname+"/hooks/"+a,A,j)}},{key:"deleteHook",value:function deleteHook(a,A){return this._request("DELETE","/repos/"+this.__fullname+"/hooks/"+a,null,A)}},{key:"listKeys",value:function listKeys(a){return this._request("GET","/repos/"+this.__fullname+"/keys",null,a)}},{key:"getKey",value:function getKey(a,A){return this._request("GET","/repos/"+this.__fullname+"/keys/"+a,null,A)}},{key:"createKey",value:function createKey(a,A){return this._request("POST","/repos/"+this.__fullname+"/keys",a,A)}},{key:"deleteKey",value:function deleteKey(a,A){return this._request("DELETE","/repos/"+this.__fullname+"/keys/"+a,null,A)}},{key:"deleteFile",value:function deleteFile(a,A,j){var P=this;return this.getSha(a,A).then((function(B){var q={message:"Delete the file at '"+A+"'",sha:B.data.sha,branch:a};return P._request("DELETE","/repos/"+P.__fullname+"/contents/"+A,q,j)}))}},{key:"move",value:function move(a,A,j,P){var B=this,q=void 0;return this.getRef("heads/"+a).then((function(a){var A=a.data.object;return B.getTree(A.sha+"?recursive=true")})).then((function(a){var P=a.data,ne=P.tree,ie=P.sha;q=ie;var oe=ne.map((function(a){return a.path===A&&(a.path=j),"tree"===a.type&&delete a.sha,a}));return B.createTree(oe)})).then((function(a){var P=a.data;return B.commit(q,P.sha,"Renamed '"+A+"' to '"+j+"'")})).then((function(A){var j=A.data;return B.updateHead("heads/"+a,j.sha,!0,P)}))}},{key:"writeFile",value:function writeFile(a,A,j,P,B,q){var ne=this;"function"===typeof(B=B||{})&&(q=B,B={});var oe=A?encodeURI(A):"",se=!1!==B.encode,le={branch:a,message:P,author:B.author,committer:B.committer,content:se?ie.Base64.encode(j):j};return this.getSha(a,oe).then((function(a){return le.sha=a.data.sha,ne._request("PUT","/repos/"+ne.__fullname+"/contents/"+oe,le,q)}),(function(){return ne._request("PUT","/repos/"+ne.__fullname+"/contents/"+oe,le,q)}))}},{key:"isStarred",value:function isStarred(a){return this._request204or404("/user/starred/"+this.__fullname,null,a)}},{key:"star",value:function star(a){return this._request("PUT","/user/starred/"+this.__fullname,null,a)}},{key:"unstar",value:function unstar(a){return this._request("DELETE","/user/starred/"+this.__fullname,null,a)}},{key:"createRelease",value:function createRelease(a,A){return this._request("POST","/repos/"+this.__fullname+"/releases",a,A)}},{key:"updateRelease",value:function updateRelease(a,A,j){return this._request("PATCH","/repos/"+this.__fullname+"/releases/"+a,A,j)}},{key:"listReleases",value:function listReleases(a){return this._request("GET","/repos/"+this.__fullname+"/releases",null,a)}},{key:"getRelease",value:function getRelease(a,A){return this._request("GET","/repos/"+this.__fullname+"/releases/"+a,null,A)}},{key:"deleteRelease",value:function deleteRelease(a,A){return this._request("DELETE","/repos/"+this.__fullname+"/releases/"+a,null,A)}},{key:"mergePullRequest",value:function mergePullRequest(a,A,j){return this._request("PUT","/repos/"+this.__fullname+"/pulls/"+a+"/merge",A,j)}},{key:"listProjects",value:function listProjects(a){return this._requestAllPages("/repos/"+this.__fullname+"/projects",{AcceptHeader:"inertia-preview"},a)}},{key:"createProject",value:function createProject(a,A){return(a=a||{}).AcceptHeader="inertia-preview",this._request("POST","/repos/"+this.__fullname+"/projects",a,A)}}]),Repository}(q.default);a.exports=se}).call(this,j(48).Buffer)},function(a,A,j){(function(a,P){var B;!function(q){var ne=A,ie=(a&&a.exports,"object"==typeof P&&P);ie.global!==ie&&ie.window;var oe,se,le,he=String.fromCharCode;function ucs2decode(a){for(var A,j,P=[],B=0,q=a.length;B<q;)(A=a.charCodeAt(B++))>=55296&&A<=56319&&B<q?56320==(64512&(j=a.charCodeAt(B++)))?P.push(((1023&A)<<10)+(1023&j)+65536):(P.push(A),B--):P.push(A);return P}function checkScalarValue(a){if(a>=55296&&a<=57343)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value")}function createByte(a,A){return he(a>>A&63|128)}function encodeCodePoint(a){if(0==(4294967168&a))return he(a);var A="";return 0==(4294965248&a)?A=he(a>>6&31|192):0==(4294901760&a)?(checkScalarValue(a),A=he(a>>12&15|224),A+=createByte(a,6)):0==(4292870144&a)&&(A=he(a>>18&7|240),A+=createByte(a,12),A+=createByte(a,6)),A+=he(63&a|128)}function readContinuationByte(){if(le>=se)throw Error("Invalid byte index");var a=255&oe[le];if(le++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function decodeSymbol(){var a,A;if(le>se)throw Error("Invalid byte index");if(le==se)return!1;if(a=255&oe[le],le++,0==(128&a))return a;if(192==(224&a)){if((A=(31&a)<<6|readContinuationByte())>=128)return A;throw Error("Invalid continuation byte")}if(224==(240&a)){if((A=(15&a)<<12|readContinuationByte()<<6|readContinuationByte())>=2048)return checkScalarValue(A),A;throw Error("Invalid continuation byte")}if(240==(248&a)&&(A=(7&a)<<18|readContinuationByte()<<12|readContinuationByte()<<6|readContinuationByte())>=65536&&A<=1114111)return A;throw Error("Invalid UTF-8 detected")}var pe={version:"2.1.2",encode:function utf8encode(a){for(var A=ucs2decode(a),j=A.length,P=-1,B="";++P<j;)B+=encodeCodePoint(A[P]);return B},decode:function utf8decode(a){oe=ucs2decode(a),se=oe.length,le=0;for(var A,j=[];!1!==(A=decodeSymbol());)j.push(A);return function ucs2encode(a){for(var A,j=a.length,P=-1,B="";++P<j;)(A=a[P])>65535&&(B+=he((A-=65536)>>>10&1023|55296),A=56320|1023&A),B+=he(A);return B}(j)}};void 0===(B=function(){return pe}.call(A,j,A,a))||(a.exports=B)}()}).call(this,j(111)(a),j(35))},function(a,A,j){"use strict";var P=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}();var B=function(a){function Organization(a,A,j){!function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,Organization);var P=function _possibleConstructorReturn(a,A){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!==typeof A&&"function"!==typeof A?a:A}(this,(Organization.__proto__||Object.getPrototypeOf(Organization)).call(this,A,j));return P.__name=a,P}return function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(a,A):a.__proto__=A)}(Organization,a),P(Organization,[{key:"createRepo",value:function createRepo(a,A){return this._request("POST","/orgs/"+this.__name+"/repos",a,A)}},{key:"getRepos",value:function getRepos(a){var A=this._getOptionsWithDefaults({direction:"desc"});return this._requestAllPages("/orgs/"+this.__name+"/repos",A,a)}},{key:"isMember",value:function isMember(a,A){return this._request204or404("/orgs/"+this.__name+"/members/"+a,null,A)}},{key:"listMembers",value:function listMembers(a,A){return this._request("GET","/orgs/"+this.__name+"/members",a,A)}},{key:"getTeams",value:function getTeams(a){return this._requestAllPages("/orgs/"+this.__name+"/teams",void 0,a)}},{key:"createTeam",value:function createTeam(a,A){return this._request("POST","/orgs/"+this.__name+"/teams",a,A)}},{key:"listProjects",value:function listProjects(a){return this._requestAllPages("/orgs/"+this.__name+"/projects",{AcceptHeader:"inertia-preview"},a)}},{key:"createProject",value:function createProject(a,A){return(a=a||{}).AcceptHeader="inertia-preview",this._request("POST","/orgs/"+this.__name+"/projects",a,A)}}]),Organization}(function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(36)).default);a.exports=B},function(a,A,j){"use strict";var P=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}(),B=_interopRequireDefault(j(36));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var q=(0,_interopRequireDefault(j(77)).default)("github:team"),ne=function(a){function Team(a,A,j){!function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,Team);var P=function _possibleConstructorReturn(a,A){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!==typeof A&&"function"!==typeof A?a:A}(this,(Team.__proto__||Object.getPrototypeOf(Team)).call(this,A,j));return P.__teamId=a,P}return function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(a,A):a.__proto__=A)}(Team,a),P(Team,[{key:"getTeam",value:function getTeam(a){return q("Fetching Team "+this.__teamId),this._request("Get","/teams/"+this.__teamId,void 0,a)}},{key:"listRepos",value:function listRepos(a){return q("Fetching repositories for Team "+this.__teamId),this._requestAllPages("/teams/"+this.__teamId+"/repos",void 0,a)}},{key:"editTeam",value:function editTeam(a,A){return q("Editing Team "+this.__teamId),this._request("PATCH","/teams/"+this.__teamId,a,A)}},{key:"listMembers",value:function listMembers(a,A){return q("Getting members of Team "+this.__teamId),this._requestAllPages("/teams/"+this.__teamId+"/members",a,A)}},{key:"getMembership",value:function getMembership(a,A){return q("Getting membership of user "+a+" in Team "+this.__teamId),this._request("GET","/teams/"+this.__teamId+"/memberships/"+a,void 0,A)}},{key:"addMembership",value:function addMembership(a,A,j){return q("Adding user "+a+" to Team "+this.__teamId),this._request("PUT","/teams/"+this.__teamId+"/memberships/"+a,A,j)}},{key:"isManagedRepo",value:function isManagedRepo(a,A,j){return q("Getting repo management by Team "+this.__teamId+" for repo "+a+"/"+A),this._request204or404("/teams/"+this.__teamId+"/repos/"+a+"/"+A,void 0,j)}},{key:"manageRepo",value:function manageRepo(a,A,j,P){return q("Adding or Updating repo management by Team "+this.__teamId+" for repo "+a+"/"+A),this._request204or404("/teams/"+this.__teamId+"/repos/"+a+"/"+A,j,P,"PUT")}},{key:"unmanageRepo",value:function unmanageRepo(a,A,j){return q("Remove repo management by Team "+this.__teamId+" for repo "+a+"/"+A),this._request204or404("/teams/"+this.__teamId+"/repos/"+a+"/"+A,void 0,j,"DELETE")}},{key:"deleteTeam",value:function deleteTeam(a){return q("Deleting Team "+this.__teamId),this._request204or404("/teams/"+this.__teamId,void 0,a,"DELETE")}}]),Team}(B.default);a.exports=ne},function(a,A,j){"use strict";var P=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}();var B=function(a){function Markdown(a,A){return function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,Markdown),function _possibleConstructorReturn(a,A){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!==typeof A&&"function"!==typeof A?a:A}(this,(Markdown.__proto__||Object.getPrototypeOf(Markdown)).call(this,a,A))}return function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(a,A):a.__proto__=A)}(Markdown,a),P(Markdown,[{key:"render",value:function render(a,A){return this._request("POST","/markdown",a,A,!0)}}]),Markdown}(function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(36)).default);a.exports=B},function(a,A,j){"use strict";var P=function(){function defineProperties(a,A){for(var j=0;j<A.length;j++){var P=A[j];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(a,P.key,P)}}return function(a,A,j){return A&&defineProperties(a.prototype,A),j&&defineProperties(a,j),a}}();var B=function(a){function Project(a,A,j){!function _classCallCheck(a,A){if(!(a instanceof A))throw new TypeError("Cannot call a class as a function")}(this,Project);var P=function _possibleConstructorReturn(a,A){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!==typeof A&&"function"!==typeof A?a:A}(this,(Project.__proto__||Object.getPrototypeOf(Project)).call(this,A,j,"inertia-preview"));return P.__id=a,P}return function _inherits(a,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);a.prototype=Object.create(A&&A.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(a,A):a.__proto__=A)}(Project,a),P(Project,[{key:"getProject",value:function getProject(a){return this._request("GET","/projects/"+this.__id,null,a)}},{key:"updateProject",value:function updateProject(a,A){return this._request("PATCH","/projects/"+this.__id,a,A)}},{key:"deleteProject",value:function deleteProject(a){return this._request("DELETE","/projects/"+this.__id,null,a)}},{key:"listProjectColumns",value:function listProjectColumns(a){return this._requestAllPages("/projects/"+this.__id+"/columns",null,a)}},{key:"getProjectColumn",value:function getProjectColumn(a,A){return this._request("GET","/projects/columns/"+a,null,A)}},{key:"createProjectColumn",value:function createProjectColumn(a,A){return this._request("POST","/projects/"+this.__id+"/columns",a,A)}},{key:"updateProjectColumn",value:function updateProjectColumn(a,A,j){return this._request("PATCH","/projects/columns/"+a,A,j)}},{key:"deleteProjectColumn",value:function deleteProjectColumn(a,A){return this._request("DELETE","/projects/columns/"+a,null,A)}},{key:"moveProjectColumn",value:function moveProjectColumn(a,A,j){return this._request("POST","/projects/columns/"+a+"/moves",{position:A},j)}},{key:"listProjectCards",value:function listProjectCards(a){var A=this;return this.listProjectColumns().then((function(a){var j=a.data;return Promise.all(j.map((function(a){return A._requestAllPages("/projects/columns/"+a.id+"/cards",null)})))})).then((function(A){var j=A.reduce((function(a,A){var j=A.data;return a.push.apply(a,function _toConsumableArray(a){if(Array.isArray(a)){for(var A=0,j=Array(a.length);A<a.length;A++)j[A]=a[A];return j}return Array.from(a)}(j)),a}),[]);return a&&a(null,j),j})).catch((function(A){if(!a)throw A;a(A)}))}},{key:"listColumnCards",value:function listColumnCards(a,A){return this._requestAllPages("/projects/columns/"+a+"/cards",null,A)}},{key:"getProjectCard",value:function getProjectCard(a,A){return this._request("GET","/projects/columns/cards/"+a,null,A)}},{key:"createProjectCard",value:function createProjectCard(a,A,j){return this._request("POST","/projects/columns/"+a+"/cards",A,j)}},{key:"updateProjectCard",value:function updateProjectCard(a,A,j){return this._request("PATCH","/projects/columns/cards/"+a,A,j)}},{key:"deleteProjectCard",value:function deleteProjectCard(a,A){return this._request("DELETE","/projects/columns/cards/"+a,null,A)}},{key:"moveProjectCard",value:function moveProjectCard(a,A,j,P){return this._request("POST","/projects/columns/cards/"+a+"/moves",{position:A,column_id:j},P)}}]),Project}(function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}(j(36)).default);a.exports=B},function(a,A,j){var P=j(208),B=j(89)("socket.io-client:url");a.exports=function url(a,A){var j=a;A=A||"undefined"!==typeof location&&location,null==a&&(a=A.protocol+"//"+A.host);"string"===typeof a&&("/"===a.charAt(0)&&(a="/"===a.charAt(1)?A.protocol+a:A.host+a),/^(https?|wss?):\/\//.test(a)||(B("protocol-less url %s",a),a="undefined"!==typeof A?A.protocol+"//"+a:"https://"+a),B("parse %s",a),j=P(a));j.port||(/^(http|ws)$/.test(j.protocol)?j.port="80":/^(http|ws)s$/.test(j.protocol)&&(j.port="443"));j.path=j.path||"/";var q=-1!==j.host.indexOf(":")?"["+j.host+"]":j.host;return j.id=j.protocol+"://"+q+":"+j.port,j.href=j.protocol+"://"+q+(A&&A.port===j.port?"":":"+j.port),j}},function(a,A,j){function createDebug(a){var j;function debug(){if(debug.enabled){var a=debug,P=+new Date,B=P-(j||P);a.diff=B,a.prev=j,a.curr=P,j=P;for(var q=new Array(arguments.length),ne=0;ne<q.length;ne++)q[ne]=arguments[ne];q[0]=A.coerce(q[0]),"string"!==typeof q[0]&&q.unshift("%O");var ie=0;q[0]=q[0].replace(/%([a-zA-Z%])/g,(function(j,P){if("%%"===j)return j;ie++;var B=A.formatters[P];if("function"===typeof B){var ne=q[ie];j=B.call(a,ne),q.splice(ie,1),ie--}return j})),A.formatArgs.call(a,q);var oe=debug.log||A.log||console.log.bind(console);oe.apply(a,q)}}return debug.namespace=a,debug.enabled=A.enabled(a),debug.useColors=A.useColors(),debug.color=function selectColor(a){var j,P=0;for(j in a)P=(P<<5)-P+a.charCodeAt(j),P|=0;return A.colors[Math.abs(P)%A.colors.length]}(a),debug.destroy=destroy,"function"===typeof A.init&&A.init(debug),A.instances.push(debug),debug}function destroy(){var a=A.instances.indexOf(this);return-1!==a&&(A.instances.splice(a,1),!0)}(A=a.exports=createDebug.debug=createDebug.default=createDebug).coerce=function coerce(a){return a instanceof Error?a.stack||a.message:a},A.disable=function disable(){A.enable("")},A.enable=function enable(a){var j;A.save(a),A.names=[],A.skips=[];var P=("string"===typeof a?a:"").split(/[\s,]+/),B=P.length;for(j=0;j<B;j++)P[j]&&("-"===(a=P[j].replace(/\*/g,".*?"))[0]?A.skips.push(new RegExp("^"+a.substr(1)+"$")):A.names.push(new RegExp("^"+a+"$")));for(j=0;j<A.instances.length;j++){var q=A.instances[j];q.enabled=A.enabled(q.namespace)}},A.enabled=function enabled(a){if("*"===a[a.length-1])return!0;var j,P;for(j=0,P=A.skips.length;j<P;j++)if(A.skips[j].test(a))return!1;for(j=0,P=A.names.length;j<P;j++)if(A.names[j].test(a))return!0;return!1},A.humanize=j(472),A.instances=[],A.names=[],A.skips=[],A.formatters={}},function(a,A){var j=1e3,P=6e4,B=60*P,q=24*B;function plural(a,A,j){if(!(a<A))return a<1.5*A?Math.floor(a/A)+" "+j:Math.ceil(a/A)+" "+j+"s"}a.exports=function(a,A){A=A||{};var ne=typeof a;if("string"===ne&&a.length>0)return function parse(a){if((a=String(a)).length>100)return;var A=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(!A)return;var ne=parseFloat(A[1]);switch((A[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*ne;case"days":case"day":case"d":return ne*q;case"hours":case"hour":case"hrs":case"hr":case"h":return ne*B;case"minutes":case"minute":case"mins":case"min":case"m":return ne*P;case"seconds":case"second":case"secs":case"sec":case"s":return ne*j;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return ne;default:return}}(a);if("number"===ne&&!1===isNaN(a))return A.long?function fmtLong(a){return plural(a,q,"day")||plural(a,B,"hour")||plural(a,P,"minute")||plural(a,j,"second")||a+" ms"}(a):function fmtShort(a){if(a>=q)return Math.round(a/q)+"d";if(a>=B)return Math.round(a/B)+"h";if(a>=P)return Math.round(a/P)+"m";if(a>=j)return Math.round(a/j)+"s";return a+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},function(a,A,j){(function(P){function load(){var a;try{a=A.storage.debug}catch(j){}return!a&&"undefined"!==typeof P&&"env"in P&&(a=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).DEBUG),a}(A=a.exports=j(474)).log=function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},A.formatArgs=function formatArgs(a){var j=this.useColors;if(a[0]=(j?"%c":"")+this.namespace+(j?" %c":" ")+a[0]+(j?"%c ":" ")+"+"+A.humanize(this.diff),!j)return;var P="color: "+this.color;a.splice(1,0,P,"color: inherit");var B=0,q=0;a[0].replace(/%[a-zA-Z%]/g,(function(a){"%%"!==a&&(B++,"%c"===a&&(q=B))})),a.splice(q,0,P)},A.save=function save(a){try{null==a?A.storage.removeItem("debug"):A.storage.debug=a}catch(j){}},A.load=load,A.useColors=function useColors(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},A.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function localstorage(){try{return window.localStorage}catch(a){}}(),A.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],A.formatters.j=function(a){try{return JSON.stringify(a)}catch(A){return"[UnexpectedJSONParseError]: "+A.message}},A.enable(load())}).call(this,j(66))},function(a,A,j){function createDebug(a){var j;function debug(){if(debug.enabled){var a=debug,P=+new Date,B=P-(j||P);a.diff=B,a.prev=j,a.curr=P,j=P;for(var q=new Array(arguments.length),ne=0;ne<q.length;ne++)q[ne]=arguments[ne];q[0]=A.coerce(q[0]),"string"!==typeof q[0]&&q.unshift("%O");var ie=0;q[0]=q[0].replace(/%([a-zA-Z%])/g,(function(j,P){if("%%"===j)return j;ie++;var B=A.formatters[P];if("function"===typeof B){var ne=q[ie];j=B.call(a,ne),q.splice(ie,1),ie--}return j})),A.formatArgs.call(a,q);var oe=debug.log||A.log||console.log.bind(console);oe.apply(a,q)}}return debug.namespace=a,debug.enabled=A.enabled(a),debug.useColors=A.useColors(),debug.color=function selectColor(a){var j,P=0;for(j in a)P=(P<<5)-P+a.charCodeAt(j),P|=0;return A.colors[Math.abs(P)%A.colors.length]}(a),debug.destroy=destroy,"function"===typeof A.init&&A.init(debug),A.instances.push(debug),debug}function destroy(){var a=A.instances.indexOf(this);return-1!==a&&(A.instances.splice(a,1),!0)}(A=a.exports=createDebug.debug=createDebug.default=createDebug).coerce=function coerce(a){return a instanceof Error?a.stack||a.message:a},A.disable=function disable(){A.enable("")},A.enable=function enable(a){var j;A.save(a),A.names=[],A.skips=[];var P=("string"===typeof a?a:"").split(/[\s,]+/),B=P.length;for(j=0;j<B;j++)P[j]&&("-"===(a=P[j].replace(/\*/g,".*?"))[0]?A.skips.push(new RegExp("^"+a.substr(1)+"$")):A.names.push(new RegExp("^"+a+"$")));for(j=0;j<A.instances.length;j++){var q=A.instances[j];q.enabled=A.enabled(q.namespace)}},A.enabled=function enabled(a){if("*"===a[a.length-1])return!0;var j,P;for(j=0,P=A.skips.length;j<P;j++)if(A.skips[j].test(a))return!1;for(j=0,P=A.names.length;j<P;j++)if(A.names[j].test(a))return!0;return!1},A.humanize=j(475),A.instances=[],A.names=[],A.skips=[],A.formatters={}},function(a,A){var j=1e3,P=6e4,B=60*P,q=24*B;function plural(a,A,j){if(!(a<A))return a<1.5*A?Math.floor(a/A)+" "+j:Math.ceil(a/A)+" "+j+"s"}a.exports=function(a,A){A=A||{};var ne=typeof a;if("string"===ne&&a.length>0)return function parse(a){if((a=String(a)).length>100)return;var A=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(!A)return;var ne=parseFloat(A[1]);switch((A[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*ne;case"days":case"day":case"d":return ne*q;case"hours":case"hour":case"hrs":case"hr":case"h":return ne*B;case"minutes":case"minute":case"mins":case"min":case"m":return ne*P;case"seconds":case"second":case"secs":case"sec":case"s":return ne*j;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return ne;default:return}}(a);if("number"===ne&&!1===isNaN(a))return A.long?function fmtLong(a){return plural(a,q,"day")||plural(a,B,"hour")||plural(a,P,"minute")||plural(a,j,"second")||a+" ms"}(a):function fmtShort(a){if(a>=q)return Math.round(a/q)+"d";if(a>=B)return Math.round(a/B)+"h";if(a>=P)return Math.round(a/P)+"m";if(a>=j)return Math.round(a/j)+"s";return a+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},function(a,A,j){var P=j(209),B=j(210),q=Object.prototype.toString,ne="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===q.call(Blob),ie="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===q.call(File);A.deconstructPacket=function(a){var A=[],j=a.data,q=a;return q.data=function _deconstructPacket(a,A){if(!a)return a;if(B(a)){var j={_placeholder:!0,num:A.length};return A.push(a),j}if(P(a)){for(var q=new Array(a.length),ne=0;ne<a.length;ne++)q[ne]=_deconstructPacket(a[ne],A);return q}if("object"===typeof a&&!(a instanceof Date)){q={};for(var ie in a)q[ie]=_deconstructPacket(a[ie],A);return q}return a}(j,A),q.attachments=A.length,{packet:q,buffers:A}},A.reconstructPacket=function(a,A){return a.data=function _reconstructPacket(a,A){if(!a)return a;if(a&&a._placeholder)return A[a.num];if(P(a))for(var j=0;j<a.length;j++)a[j]=_reconstructPacket(a[j],A);else if("object"===typeof a)for(var B in a)a[B]=_reconstructPacket(a[B],A);return a}(a.data,A),a.attachments=void 0,a},A.removeBlobs=function(a,A){var j=0,q=a;!function _removeBlobs(a,oe,se){if(!a)return a;if(ne&&a instanceof Blob||ie&&a instanceof File){j++;var le=new FileReader;le.onload=function(){se?se[oe]=this.result:q=this.result,--j||A(q)},le.readAsArrayBuffer(a)}else if(P(a))for(var he=0;he<a.length;he++)_removeBlobs(a[he],he,a);else if("object"===typeof a&&!B(a))for(var pe in a)_removeBlobs(a[pe],pe,a)}(q),j||A(q)}},function(a,A,j){a.exports=j(478),a.exports.parser=j(68)},function(a,A,j){var P=j(212),B=j(67),q=j(92)("engine.io-client:socket"),ne=j(216),ie=j(68),oe=j(208),se=j(90);function Socket(a,A){if(!(this instanceof Socket))return new Socket(a,A);A=A||{},a&&"object"===typeof a&&(A=a,a=null),a?(a=oe(a),A.hostname=a.host,A.secure="https"===a.protocol||"wss"===a.protocol,A.port=a.port,a.query&&(A.query=a.query)):A.host&&(A.hostname=oe(A.host).host),this.secure=null!=A.secure?A.secure:"undefined"!==typeof location&&"https:"===location.protocol,A.hostname&&!A.port&&(A.port=this.secure?"443":"80"),this.agent=A.agent||!1,this.hostname=A.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=A.port||("undefined"!==typeof location&&location.port?location.port:this.secure?443:80),this.query=A.query||{},"string"===typeof this.query&&(this.query=se.decode(this.query)),this.upgrade=!1!==A.upgrade,this.path=(A.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!A.forceJSONP,this.jsonp=!1!==A.jsonp,this.forceBase64=!!A.forceBase64,this.enablesXDR=!!A.enablesXDR,this.withCredentials=!1!==A.withCredentials,this.timestampParam=A.timestampParam||"t",this.timestampRequests=A.timestampRequests,this.transports=A.transports||["polling","websocket"],this.transportOptions=A.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=A.policyPort||843,this.rememberUpgrade=A.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=A.onlyBinaryUpgrades,this.perMessageDeflate=!1!==A.perMessageDeflate&&(A.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=A.pfx||void 0,this.key=A.key||void 0,this.passphrase=A.passphrase||void 0,this.cert=A.cert||void 0,this.ca=A.ca||void 0,this.ciphers=A.ciphers||void 0,this.rejectUnauthorized=void 0===A.rejectUnauthorized||A.rejectUnauthorized,this.forceNode=!!A.forceNode,this.isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"===typeof self||this.isReactNative)&&(A.extraHeaders&&Object.keys(A.extraHeaders).length>0&&(this.extraHeaders=A.extraHeaders),A.localAddress&&(this.localAddress=A.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}a.exports=Socket,Socket.priorWebsocketSuccess=!1,B(Socket.prototype),Socket.protocol=ie.protocol,Socket.Socket=Socket,Socket.Transport=j(138),Socket.transports=j(212),Socket.parser=j(68),Socket.prototype.createTransport=function(a){q('creating transport "%s"',a);var A=function clone(a){var A={};for(var j in a)a.hasOwnProperty(j)&&(A[j]=a[j]);return A}(this.query);A.EIO=ie.protocol,A.transport=a;var j=this.transportOptions[a]||{};return this.id&&(A.sid=this.id),new P[a]({query:A,socket:this,agent:j.agent||this.agent,hostname:j.hostname||this.hostname,port:j.port||this.port,secure:j.secure||this.secure,path:j.path||this.path,forceJSONP:j.forceJSONP||this.forceJSONP,jsonp:j.jsonp||this.jsonp,forceBase64:j.forceBase64||this.forceBase64,enablesXDR:j.enablesXDR||this.enablesXDR,withCredentials:j.withCredentials||this.withCredentials,timestampRequests:j.timestampRequests||this.timestampRequests,timestampParam:j.timestampParam||this.timestampParam,policyPort:j.policyPort||this.policyPort,pfx:j.pfx||this.pfx,key:j.key||this.key,passphrase:j.passphrase||this.passphrase,cert:j.cert||this.cert,ca:j.ca||this.ca,ciphers:j.ciphers||this.ciphers,rejectUnauthorized:j.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:j.perMessageDeflate||this.perMessageDeflate,extraHeaders:j.extraHeaders||this.extraHeaders,forceNode:j.forceNode||this.forceNode,localAddress:j.localAddress||this.localAddress,requestTimeout:j.requestTimeout||this.requestTimeout,protocols:j.protocols||void 0,isReactNative:this.isReactNative})},Socket.prototype.open=function(){var a;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))a="websocket";else{if(0===this.transports.length){var A=this;return void setTimeout((function(){A.emit("error","No transports available")}),0)}a=this.transports[0]}this.readyState="opening";try{a=this.createTransport(a)}catch(j){return this.transports.shift(),void this.open()}a.open(),this.setTransport(a)},Socket.prototype.setTransport=function(a){q("setting transport %s",a.name);var A=this;this.transport&&(q("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",(function(){A.onDrain()})).on("packet",(function(a){A.onPacket(a)})).on("error",(function(a){A.onError(a)})).on("close",(function(){A.onClose("transport close")}))},Socket.prototype.probe=function(a){q('probing transport "%s"',a);var A=this.createTransport(a,{probe:1}),j=!1,P=this;function onTransportOpen(){if(P.onlyBinaryUpgrades){var B=!this.supportsBinary&&P.transport.supportsBinary;j=j||B}j||(q('probe transport "%s" opened',a),A.send([{type:"ping",data:"probe"}]),A.once("packet",(function(B){if(!j)if("pong"===B.type&&"probe"===B.data){if(q('probe transport "%s" pong',a),P.upgrading=!0,P.emit("upgrading",A),!A)return;Socket.priorWebsocketSuccess="websocket"===A.name,q('pausing current transport "%s"',P.transport.name),P.transport.pause((function(){j||"closed"!==P.readyState&&(q("changing transport and sending upgrade packet"),cleanup(),P.setTransport(A),A.send([{type:"upgrade"}]),P.emit("upgrade",A),A=null,P.upgrading=!1,P.flush())}))}else{q('probe transport "%s" failed',a);var ne=new Error("probe error");ne.transport=A.name,P.emit("upgradeError",ne)}})))}function freezeTransport(){j||(j=!0,cleanup(),A.close(),A=null)}function onerror(j){var B=new Error("probe error: "+j);B.transport=A.name,freezeTransport(),q('probe transport "%s" failed because of error: %s',a,j),P.emit("upgradeError",B)}function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(a){A&&a.name!==A.name&&(q('"%s" works - aborting "%s"',a.name,A.name),freezeTransport())}function cleanup(){A.removeListener("open",onTransportOpen),A.removeListener("error",onerror),A.removeListener("close",onTransportClose),P.removeListener("close",onclose),P.removeListener("upgrading",onupgrade)}Socket.priorWebsocketSuccess=!1,A.once("open",onTransportOpen),A.once("error",onerror),A.once("close",onTransportClose),this.once("close",onclose),this.once("upgrading",onupgrade),A.open()},Socket.prototype.onOpen=function(){if(q("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){q("starting upgrade probes");for(var a=0,A=this.upgrades.length;a<A;a++)this.probe(this.upgrades[a])}},Socket.prototype.onPacket=function(a){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(q('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(JSON.parse(a.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var A=new Error("server error");A.code=a.data,this.onError(A);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else q('packet received with socket readyState "%s"',this.readyState)},Socket.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var A=this;A.pingTimeoutTimer=setTimeout((function(){"closed"!==A.readyState&&A.onClose("ping timeout")}),a||A.pingInterval+A.pingTimeout)},Socket.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout((function(){q("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)}),a.pingInterval)},Socket.prototype.ping=function(){var a=this;this.sendPacket("ping",(function(){a.emit("ping")}))},Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(q("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},Socket.prototype.write=Socket.prototype.send=function(a,A,j){return this.sendPacket("message",a,A,j),this},Socket.prototype.sendPacket=function(a,A,j,P){if("function"===typeof A&&(P=A,A=void 0),"function"===typeof j&&(P=j,j=null),"closing"!==this.readyState&&"closed"!==this.readyState){(j=j||{}).compress=!1!==j.compress;var B={type:a,data:A,options:j};this.emit("packetCreate",B),this.writeBuffer.push(B),P&&this.once("flush",P),this.flush()}},Socket.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var a=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?waitForUpgrade():close()})):this.upgrading?waitForUpgrade():close()}function close(){a.onClose("forced close"),q("socket closing - telling transport to close"),a.transport.close()}function cleanupAndClose(){a.removeListener("upgrade",cleanupAndClose),a.removeListener("upgradeError",cleanupAndClose),close()}function waitForUpgrade(){a.once("upgrade",cleanupAndClose),a.once("upgradeError",cleanupAndClose)}return this},Socket.prototype.onError=function(a){q("socket error %j",a),Socket.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},Socket.prototype.onClose=function(a,A){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){q('socket close with reason: "%s"',a);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,A),this.writeBuffer=[],this.prevBufferLen=0}},Socket.prototype.filterUpgrades=function(a){for(var A=[],j=0,P=a.length;j<P;j++)~ne(this.transports,a[j])&&A.push(a[j]);return A}},function(a,A){try{a.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(j){a.exports=!1}},function(a,A,j){var P=j(136),B=j(213),q=j(67),ne=j(91),ie=j(92)("engine.io-client:polling-xhr"),oe=j(137);function empty(){}function XHR(a){if(B.call(this,a),this.requestTimeout=a.requestTimeout,this.extraHeaders=a.extraHeaders,"undefined"!==typeof location){var A="https:"===location.protocol,j=location.port;j||(j=A?443:80),this.xd="undefined"!==typeof location&&a.hostname!==location.hostname||j!==a.port,this.xs=a.secure!==A}}function Request(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.xs=!!a.xs,this.async=!1!==a.async,this.data=void 0!==a.data?a.data:null,this.agent=a.agent,this.isBinary=a.isBinary,this.supportsBinary=a.supportsBinary,this.enablesXDR=a.enablesXDR,this.withCredentials=a.withCredentials,this.requestTimeout=a.requestTimeout,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.extraHeaders=a.extraHeaders,this.create()}if(a.exports=XHR,a.exports.Request=Request,ne(XHR,B),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(a){return(a=a||{}).uri=this.uri(),a.xd=this.xd,a.xs=this.xs,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,a.enablesXDR=this.enablesXDR,a.withCredentials=this.withCredentials,a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized,a.requestTimeout=this.requestTimeout,a.extraHeaders=this.extraHeaders,new Request(a)},XHR.prototype.doWrite=function(a,A){var j="string"!==typeof a&&void 0!==a,P=this.request({method:"POST",data:a,isBinary:j}),B=this;P.on("success",A),P.on("error",(function(a){B.onError("xhr post error",a)})),this.sendXhr=P},XHR.prototype.doPoll=function(){ie("xhr poll");var a=this.request(),A=this;a.on("data",(function(a){A.onData(a)})),a.on("error",(function(a){A.onError("xhr poll error",a)})),this.pollXhr=a},q(Request.prototype),Request.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized;var A=this.xhr=new P(a),j=this;try{ie("xhr open %s: %s",this.method,this.uri),A.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var B in A.setDisableHeaderCheck&&A.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(B)&&A.setRequestHeader(B,this.extraHeaders[B])}catch(q){}if("POST"===this.method)try{this.isBinary?A.setRequestHeader("Content-type","application/octet-stream"):A.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(q){}try{A.setRequestHeader("Accept","*/*")}catch(q){}"withCredentials"in A&&(A.withCredentials=this.withCredentials),this.requestTimeout&&(A.timeout=this.requestTimeout),this.hasXDR()?(A.onload=function(){j.onLoad()},A.onerror=function(){j.onError(A.responseText)}):A.onreadystatechange=function(){if(2===A.readyState)try{var a=A.getResponseHeader("Content-Type");(j.supportsBinary&&"application/octet-stream"===a||"application/octet-stream; charset=UTF-8"===a)&&(A.responseType="arraybuffer")}catch(q){}4===A.readyState&&(200===A.status||1223===A.status?j.onLoad():setTimeout((function(){j.onError("number"===typeof A.status?A.status:0)}),0))},ie("xhr data %s",this.data),A.send(this.data)}catch(q){return void setTimeout((function(){j.onError(q)}),0)}"undefined"!==typeof document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},Request.prototype.onError=function(a){this.emit("error",a),this.cleanup(!0)},Request.prototype.cleanup=function(a){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty:this.xhr.onreadystatechange=empty,a)try{this.xhr.abort()}catch(A){}"undefined"!==typeof document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){var a;try{var A;try{A=this.xhr.getResponseHeader("Content-Type")}catch(j){}a=("application/octet-stream"===A||"application/octet-stream; charset=UTF-8"===A)&&this.xhr.response||this.xhr.responseText}catch(j){this.onError(j)}null!=a&&this.onData(a)},Request.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!this.xs&&this.enablesXDR},Request.prototype.abort=function(){this.cleanup()},Request.requestsCount=0,Request.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",unloadHandler);else if("function"===typeof addEventListener){addEventListener("onpagehide"in oe?"pagehide":"unload",unloadHandler,!1)}function unloadHandler(){for(var a in Request.requests)Request.requests.hasOwnProperty(a)&&Request.requests[a].abort()}},function(a,A){a.exports=Object.keys||function keys(a){var A=[],j=Object.prototype.hasOwnProperty;for(var P in a)j.call(a,P)&&A.push(P);return A}},function(a,A){var j={}.toString;a.exports=Array.isArray||function(a){return"[object Array]"==j.call(a)}},function(a,A){a.exports=function(a,A,j){var P=a.byteLength;if(A=A||0,j=j||P,a.slice)return a.slice(A,j);if(A<0&&(A+=P),j<0&&(j+=P),j>P&&(j=P),A>=P||A>=j||0===P)return new ArrayBuffer(0);for(var B=new Uint8Array(a),q=new Uint8Array(j-A),ne=A,ie=0;ne<j;ne++,ie++)q[ie]=B[ne];return q.buffer}},function(a,A){function noop(){}a.exports=function after(a,A,j){var P=!1;return j=j||noop,proxy.count=a,0===a?A():proxy;function proxy(a,B){if(proxy.count<=0)throw new Error("after called too many times");--proxy.count,a?(P=!0,A(a),A=j):0!==proxy.count||P||A(null,B)}}},function(a,A){var j,P,B,q=String.fromCharCode;function ucs2decode(a){for(var A,j,P=[],B=0,q=a.length;B<q;)(A=a.charCodeAt(B++))>=55296&&A<=56319&&B<q?56320==(64512&(j=a.charCodeAt(B++)))?P.push(((1023&A)<<10)+(1023&j)+65536):(P.push(A),B--):P.push(A);return P}function checkScalarValue(a,A){if(a>=55296&&a<=57343){if(A)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function createByte(a,A){return q(a>>A&63|128)}function encodeCodePoint(a,A){if(0==(4294967168&a))return q(a);var j="";return 0==(4294965248&a)?j=q(a>>6&31|192):0==(4294901760&a)?(checkScalarValue(a,A)||(a=65533),j=q(a>>12&15|224),j+=createByte(a,6)):0==(4292870144&a)&&(j=q(a>>18&7|240),j+=createByte(a,12),j+=createByte(a,6)),j+=q(63&a|128)}function readContinuationByte(){if(B>=P)throw Error("Invalid byte index");var a=255&j[B];if(B++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function decodeSymbol(a){var A,q;if(B>P)throw Error("Invalid byte index");if(B==P)return!1;if(A=255&j[B],B++,0==(128&A))return A;if(192==(224&A)){if((q=(31&A)<<6|readContinuationByte())>=128)return q;throw Error("Invalid continuation byte")}if(224==(240&A)){if((q=(15&A)<<12|readContinuationByte()<<6|readContinuationByte())>=2048)return checkScalarValue(q,a)?q:65533;throw Error("Invalid continuation byte")}if(240==(248&A)&&(q=(7&A)<<18|readContinuationByte()<<12|readContinuationByte()<<6|readContinuationByte())>=65536&&q<=1114111)return q;throw Error("Invalid UTF-8 detected")}a.exports={version:"2.1.2",encode:function utf8encode(a,A){for(var j=!1!==(A=A||{}).strict,P=ucs2decode(a),B=P.length,q=-1,ne="";++q<B;)ne+=encodeCodePoint(P[q],j);return ne},decode:function utf8decode(a,A){var ne=!1!==(A=A||{}).strict;j=ucs2decode(a),P=j.length,B=0;for(var ie,oe=[];!1!==(ie=decodeSymbol(ne));)oe.push(ie);return function ucs2encode(a){for(var A,j=a.length,P=-1,B="";++P<j;)(A=a[P])>65535&&(B+=q((A-=65536)>>>10&1023|55296),A=56320|1023&A),B+=q(A);return B}(oe)}}},function(a,A){!function(a){"use strict";A.encode=function(A){var j,P=new Uint8Array(A),B=P.length,q="";for(j=0;j<B;j+=3)q+=a[P[j]>>2],q+=a[(3&P[j])<<4|P[j+1]>>4],q+=a[(15&P[j+1])<<2|P[j+2]>>6],q+=a[63&P[j+2]];return B%3===2?q=q.substring(0,q.length-1)+"=":B%3===1&&(q=q.substring(0,q.length-2)+"=="),q},A.decode=function(A){var j,P,B,q,ne,ie=.75*A.length,oe=A.length,se=0;"="===A[A.length-1]&&(ie--,"="===A[A.length-2]&&ie--);var le=new ArrayBuffer(ie),he=new Uint8Array(le);for(j=0;j<oe;j+=4)P=a.indexOf(A[j]),B=a.indexOf(A[j+1]),q=a.indexOf(A[j+2]),ne=a.indexOf(A[j+3]),he[se++]=P<<2|B>>4,he[se++]=(15&B)<<4|q>>2,he[se++]=(3&q)<<6|63&ne;return le}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(a,A){var j="undefined"!==typeof j?j:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder&&MozBlobBuilder,P=function(){try{return 2===new Blob(["hi"]).size}catch(a){return!1}}(),B=P&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(a){return!1}}(),q=j&&j.prototype.append&&j.prototype.getBlob;function mapArrayBufferViews(a){return a.map((function(a){if(a.buffer instanceof ArrayBuffer){var A=a.buffer;if(a.byteLength!==A.byteLength){var j=new Uint8Array(a.byteLength);j.set(new Uint8Array(A,a.byteOffset,a.byteLength)),A=j.buffer}return A}return a}))}function BlobBuilderConstructor(a,A){A=A||{};var P=new j;return mapArrayBufferViews(a).forEach((function(a){P.append(a)})),A.type?P.getBlob(A.type):P.getBlob()}function BlobConstructor(a,A){return new Blob(mapArrayBufferViews(a),A||{})}"undefined"!==typeof Blob&&(BlobBuilderConstructor.prototype=Blob.prototype,BlobConstructor.prototype=Blob.prototype),a.exports=P?B?Blob:BlobConstructor:q?BlobBuilderConstructor:void 0},function(a,A,j){function createDebug(a){var j;function debug(){if(debug.enabled){var a=debug,P=+new Date,B=P-(j||P);a.diff=B,a.prev=j,a.curr=P,j=P;for(var q=new Array(arguments.length),ne=0;ne<q.length;ne++)q[ne]=arguments[ne];q[0]=A.coerce(q[0]),"string"!==typeof q[0]&&q.unshift("%O");var ie=0;q[0]=q[0].replace(/%([a-zA-Z%])/g,(function(j,P){if("%%"===j)return j;ie++;var B=A.formatters[P];if("function"===typeof B){var ne=q[ie];j=B.call(a,ne),q.splice(ie,1),ie--}return j})),A.formatArgs.call(a,q);var oe=debug.log||A.log||console.log.bind(console);oe.apply(a,q)}}return debug.namespace=a,debug.enabled=A.enabled(a),debug.useColors=A.useColors(),debug.color=function selectColor(a){var j,P=0;for(j in a)P=(P<<5)-P+a.charCodeAt(j),P|=0;return A.colors[Math.abs(P)%A.colors.length]}(a),debug.destroy=destroy,"function"===typeof A.init&&A.init(debug),A.instances.push(debug),debug}function destroy(){var a=A.instances.indexOf(this);return-1!==a&&(A.instances.splice(a,1),!0)}(A=a.exports=createDebug.debug=createDebug.default=createDebug).coerce=function coerce(a){return a instanceof Error?a.stack||a.message:a},A.disable=function disable(){A.enable("")},A.enable=function enable(a){var j;A.save(a),A.names=[],A.skips=[];var P=("string"===typeof a?a:"").split(/[\s,]+/),B=P.length;for(j=0;j<B;j++)P[j]&&("-"===(a=P[j].replace(/\*/g,".*?"))[0]?A.skips.push(new RegExp("^"+a.substr(1)+"$")):A.names.push(new RegExp("^"+a+"$")));for(j=0;j<A.instances.length;j++){var q=A.instances[j];q.enabled=A.enabled(q.namespace)}},A.enabled=function enabled(a){if("*"===a[a.length-1])return!0;var j,P;for(j=0,P=A.skips.length;j<P;j++)if(A.skips[j].test(a))return!1;for(j=0,P=A.names.length;j<P;j++)if(A.names[j].test(a))return!0;return!1},A.humanize=j(489),A.instances=[],A.names=[],A.skips=[],A.formatters={}},function(a,A){var j=1e3,P=6e4,B=60*P,q=24*B;function plural(a,A,j){if(!(a<A))return a<1.5*A?Math.floor(a/A)+" "+j:Math.ceil(a/A)+" "+j+"s"}a.exports=function(a,A){A=A||{};var ne=typeof a;if("string"===ne&&a.length>0)return function parse(a){if((a=String(a)).length>100)return;var A=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(!A)return;var ne=parseFloat(A[1]);switch((A[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*ne;case"days":case"day":case"d":return ne*q;case"hours":case"hour":case"hrs":case"hr":case"h":return ne*B;case"minutes":case"minute":case"mins":case"min":case"m":return ne*P;case"seconds":case"second":case"secs":case"sec":case"s":return ne*j;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return ne;default:return}}(a);if("number"===ne&&!1===isNaN(a))return A.long?function fmtLong(a){return plural(a,q,"day")||plural(a,B,"hour")||plural(a,P,"minute")||plural(a,j,"second")||a+" ms"}(a):function fmtShort(a){if(a>=q)return Math.round(a/q)+"d";if(a>=B)return Math.round(a/B)+"h";if(a>=P)return Math.round(a/P)+"m";if(a>=j)return Math.round(a/j)+"s";return a+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},function(a,A,j){var P=j(213),B=j(91),q=j(137);a.exports=JSONPPolling;var ne,ie=/\n/g,oe=/\\n/g;function empty(){}function JSONPPolling(a){P.call(this,a),this.query=this.query||{},ne||(ne=q.___eio=q.___eio||[]),this.index=ne.length;var A=this;ne.push((function(a){A.onData(a)})),this.query.j=this.index,"function"===typeof addEventListener&&addEventListener("beforeunload",(function(){A.script&&(A.script.onerror=empty)}),!1)}B(JSONPPolling,P),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),P.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){var a=this,A=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),A.async=!0,A.src=this.uri(),A.onerror=function(A){a.onError("jsonp poll error",A)};var j=document.getElementsByTagName("script")[0];j?j.parentNode.insertBefore(A,j):(document.head||document.body).appendChild(A),this.script=A,"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)}),100)},JSONPPolling.prototype.doWrite=function(a,A){var j=this;if(!this.form){var P,B=document.createElement("form"),q=document.createElement("textarea"),ne=this.iframeId="eio_iframe_"+this.index;B.className="socketio",B.style.position="absolute",B.style.top="-1000px",B.style.left="-1000px",B.target=ne,B.method="POST",B.setAttribute("accept-charset","utf-8"),q.name="d",B.appendChild(q),document.body.appendChild(B),this.form=B,this.area=q}function complete(){initIframe(),A()}function initIframe(){if(j.iframe)try{j.form.removeChild(j.iframe)}catch(A){j.onError("jsonp polling iframe removal error",A)}try{var a='<iframe src="javascript:0" name="'+j.iframeId+'">';P=document.createElement(a)}catch(A){(P=document.createElement("iframe")).name=j.iframeId,P.src="javascript:0"}P.id=j.iframeId,j.form.appendChild(P),j.iframe=P}this.form.action=this.uri(),initIframe(),a=a.replace(oe,"\\\n"),this.area.value=a.replace(ie,"\\n");try{this.form.submit()}catch(se){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===j.iframe.readyState&&complete()}:this.iframe.onload=complete}},function(a,A,j){(function(A){var P,B,q=j(138),ne=j(68),ie=j(90),oe=j(91),se=j(215),le=j(92)("engine.io-client:websocket");if("undefined"!==typeof WebSocket?P=WebSocket:"undefined"!==typeof self&&(P=self.WebSocket||self.MozWebSocket),"undefined"===typeof window)try{B=j(492)}catch(pe){}var he=P||B;function WS(a){a&&a.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=a.perMessageDeflate,this.usingBrowserWebSocket=P&&!a.forceNode,this.protocols=a.protocols,this.usingBrowserWebSocket||(he=B),q.call(this,a)}a.exports=WS,oe(WS,q),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var a=this.uri(),A=this.protocols,j={};this.isReactNative||(j.agent=this.agent,j.perMessageDeflate=this.perMessageDeflate,j.pfx=this.pfx,j.key=this.key,j.passphrase=this.passphrase,j.cert=this.cert,j.ca=this.ca,j.ciphers=this.ciphers,j.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(j.headers=this.extraHeaders),this.localAddress&&(j.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?A?new he(a,A):new he(a):new he(a,A,j)}catch(P){return this.emit("error",P)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(A){a.onData(A.data)},this.ws.onerror=function(A){a.onError("websocket error",A)}},WS.prototype.write=function(a){var j=this;this.writable=!1;for(var P=a.length,B=0,q=P;B<q;B++)!function(a){ne.encodePacket(a,j.supportsBinary,(function(B){if(!j.usingBrowserWebSocket){var q={};if(a.options&&(q.compress=a.options.compress),j.perMessageDeflate)("string"===typeof B?A.byteLength(B):B.length)<j.perMessageDeflate.threshold&&(q.compress=!1)}try{j.usingBrowserWebSocket?j.ws.send(B):j.ws.send(B,q)}catch(pe){le("websocket closed before onclose event")}--P||done()}))}(a[B]);function done(){j.emit("flush"),setTimeout((function(){j.writable=!0,j.emit("drain")}),0)}},WS.prototype.onClose=function(){q.prototype.onClose.call(this)},WS.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()},WS.prototype.uri=function(){var a=this.query||{},A=this.secure?"wss":"ws",j="";return this.port&&("wss"===A&&443!==Number(this.port)||"ws"===A&&80!==Number(this.port))&&(j=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=se()),this.supportsBinary||(a.b64=1),(a=ie.encode(a)).length&&(a="?"+a),A+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+j+this.path+a},WS.prototype.check=function(){return!!he&&!("__initialize"in he&&this.name===WS.prototype.name)}}).call(this,j(48).Buffer)},,function(a,A){a.exports=function toArray(a,A){for(var j=[],P=(A=A||0)||0;P<a.length;P++)j[P-A]=a[P];return j}},function(a,A){function Backoff(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}a.exports=Backoff,Backoff.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var A=Math.random(),j=Math.floor(A*this.jitter*a);a=0==(1&Math.floor(10*A))?a-j:a+j}return 0|Math.min(a,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(a){this.ms=a},Backoff.prototype.setMax=function(a){this.max=a},Backoff.prototype.setJitter=function(a){this.jitter=a}},,,,,function(a,A,j){(function(A){var P=j(500),B=j(220),q=j(501),ne=j(502),ie=j(139),oe=ie.isErrorEvent,se=ie.isDOMError,le=ie.isDOMException,he=ie.isError,pe=ie.isObject,ge=ie.isPlainObject,me=ie.isUndefined,ve=ie.isFunction,ye=ie.isString,_e=ie.isArray,we=ie.isEmptyObject,ke=ie.each,Oe=ie.objectMerge,Se=ie.truncate,Te=ie.objectFrozen,Ae=ie.hasKey,je=ie.joinRegExp,Fe=ie.urlencode,Re=ie.uuid4,Me=ie.htmlTreeAsString,Ne=ie.isSameException,Be=ie.isSameStacktrace,Ue=ie.parseUrl,We=ie.fill,Ve=ie.supportsFetch,Ye=ie.supportsReferrerPolicy,$e=ie.serializeKeysForMessage,Xe=ie.serializeException,et=ie.sanitize,tt=j(503).wrapMethod,nt="source protocol user pass host port path".split(" "),rt=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function now(){return+new Date}var it="undefined"!==typeof window?window:"undefined"!==typeof A?A:"undefined"!==typeof self?self:{},at=it.document,ot=it.navigator;function keepOriginalCallback(a,A){return ve(A)?function(j){return A(j,a)}:A}function Raven(){for(var a in this._hasJSON=!("object"!==typeof JSON||!JSON.stringify),this._hasDocument=!me(at),this._hasNavigator=!me(ot),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={release:it.SENTRY_RELEASE&&it.SENTRY_RELEASE.id,logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:!0,captureUnhandledRejections:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1,sanitizeKeys:[]},this._fetchDefaults={method:"POST",referrerPolicy:Ye()?"origin":""},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=it.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=now(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=it.location,this._lastHref=this._location&&this._location.href,this._resetBackoff(),this._originalConsole)this._originalConsoleMethods[a]=this._originalConsole[a]}Raven.prototype={VERSION:"3.27.2",debug:!1,TraceKit:P,config:function config(a,A){var j=this;if(j._globalServer)return this._logDebug("error","Error: Raven has already been configured"),j;if(!a)return j;var B=j._globalOptions;A&&ke(A,(function(a,A){"tags"===a||"extra"===a||"user"===a?j._globalContext[a]=A:B[a]=A})),j.setDSN(a),B.ignoreErrors.push(/^Script error\.?$/),B.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),B.ignoreErrors=je(B.ignoreErrors),B.ignoreUrls=!!B.ignoreUrls.length&&je(B.ignoreUrls),B.whitelistUrls=!!B.whitelistUrls.length&&je(B.whitelistUrls),B.includePaths=je(B.includePaths),B.maxBreadcrumbs=Math.max(0,Math.min(B.maxBreadcrumbs||100,100));var q={xhr:!0,console:!0,dom:!0,location:!0,sentry:!0},ne=B.autoBreadcrumbs;"[object Object]"==={}.toString.call(ne)?ne=Oe(q,ne):!1!==ne&&(ne=q),B.autoBreadcrumbs=ne;var ie={tryCatch:!0},oe=B.instrument;return"[object Object]"==={}.toString.call(oe)?oe=Oe(ie,oe):!1!==oe&&(oe=ie),B.instrument=oe,P.collectWindowErrors=!!B.collectWindowErrors,j},install:function install(){var a=this;return a.isSetup()&&!a._isRavenInstalled&&(P.report.subscribe((function(){a._handleOnErrorStackInfo.apply(a,arguments)})),a._globalOptions.captureUnhandledRejections&&a._attachPromiseRejectionHandler(),a._patchFunctionToString(),a._globalOptions.instrument&&a._globalOptions.instrument.tryCatch&&a._instrumentTryCatch(),a._globalOptions.autoBreadcrumbs&&a._instrumentBreadcrumbs(),a._drainPlugins(),a._isRavenInstalled=!0),Error.stackTraceLimit=a._globalOptions.stackTraceLimit,this},setDSN:function setDSN(a){var A=this._parseDSN(a),j=A.path.lastIndexOf("/"),P=A.path.substr(1,j);this._dsn=a,this._globalKey=A.user,this._globalSecret=A.pass&&A.pass.substr(1),this._globalProject=A.path.substr(j+1),this._globalServer=this._getGlobalServer(A),this._globalEndpoint=this._globalServer+"/"+P+"api/"+this._globalProject+"/store/",this._resetBackoff()},context:function context(a,A,j){return ve(a)&&(j=A||[],A=a,a={}),this.wrap(a,A).apply(this,j)},wrap:function wrap(a,A,j){var P=this;if(me(A)&&!ve(a))return a;if(ve(a)&&(A=a,a=void 0),!ve(A))return A;try{if(A.__raven__)return A;if(A.__raven_wrapper__)return A.__raven_wrapper__}catch(q){return A}function wrapped(){var B=[],ne=arguments.length,ie=!a||a&&!1!==a.deep;for(j&&ve(j)&&j.apply(this,arguments);ne--;)B[ne]=ie?P.wrap(a,arguments[ne]):arguments[ne];try{return A.apply(this,B)}catch(q){throw P._ignoreNextOnError(),P.captureException(q,a),q}}for(var B in A)Ae(A,B)&&(wrapped[B]=A[B]);return wrapped.prototype=A.prototype,A.__raven_wrapper__=wrapped,wrapped.__raven__=!0,wrapped.__orig__=A,wrapped},uninstall:function uninstall(){return P.report.uninstall(),this._detachPromiseRejectionHandler(),this._unpatchFunctionToString(),this._restoreBuiltIns(),this._restoreConsole(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},_promiseRejectionHandler:function _promiseRejectionHandler(a){this._logDebug("debug","Raven caught unhandled promise rejection:",a),this.captureException(a.reason,{mechanism:{type:"onunhandledrejection",handled:!1}})},_attachPromiseRejectionHandler:function _attachPromiseRejectionHandler(){return this._promiseRejectionHandler=this._promiseRejectionHandler.bind(this),it.addEventListener&&it.addEventListener("unhandledrejection",this._promiseRejectionHandler),this},_detachPromiseRejectionHandler:function _detachPromiseRejectionHandler(){return it.removeEventListener&&it.removeEventListener("unhandledrejection",this._promiseRejectionHandler),this},captureException:function captureException(a,A){if(A=Oe({trimHeadFrames:0},A||{}),oe(a)&&a.error)a=a.error;else{if(se(a)||le(a)){var j=a.name||(se(a)?"DOMError":"DOMException"),B=a.message?j+": "+a.message:j;return this.captureMessage(B,Oe(A,{stacktrace:!0,trimHeadFrames:A.trimHeadFrames+1}))}if(he(a))a=a;else{if(!ge(a))return this.captureMessage(a,Oe(A,{stacktrace:!0,trimHeadFrames:A.trimHeadFrames+1}));A=this._getCaptureExceptionOptionsFromPlainObject(A,a),a=new Error(A.message)}}this._lastCapturedException=a;try{var q=P.computeStackTrace(a);this._handleStackInfo(q,A)}catch(ne){if(a!==ne)throw ne}return this},_getCaptureExceptionOptionsFromPlainObject:function _getCaptureExceptionOptionsFromPlainObject(a,A){var j=Object.keys(A).sort(),P=Oe(a,{message:"Non-Error exception captured with keys: "+$e(j),fingerprint:[q(j)],extra:a.extra||{}});return P.extra.__serialized__=Xe(A),P},captureMessage:function captureMessage(a,A){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(a)){var j,B=Oe({message:a+=""},A=A||{});try{throw new Error(a)}catch(se){j=se}j.name=null;var q=P.computeStackTrace(j),ne=_e(q.stack)&&q.stack[1];ne&&"Raven.captureException"===ne.func&&(ne=q.stack[2]);var ie=ne&&ne.url||"";if((!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(ie))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(ie))){if(this._globalOptions.stacktrace||A.stacktrace||""===B.message){B.fingerprint=null==B.fingerprint?a:B.fingerprint,(A=Oe({trimHeadFrames:0},A)).trimHeadFrames+=1;var oe=this._prepareFrames(q,A);B.stacktrace={frames:oe.reverse()}}return B.fingerprint&&(B.fingerprint=_e(B.fingerprint)?B.fingerprint:[B.fingerprint]),this._send(B),this}}},captureBreadcrumb:function captureBreadcrumb(a){var A=Oe({timestamp:now()/1e3},a);if(ve(this._globalOptions.breadcrumbCallback)){var j=this._globalOptions.breadcrumbCallback(A);if(pe(j)&&!we(j))A=j;else if(!1===j)return this}return this._breadcrumbs.push(A),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function addPlugin(a){var A=[].slice.call(arguments,1);return this._plugins.push([a,A]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function setUserContext(a){return this._globalContext.user=a,this},setExtraContext:function setExtraContext(a){return this._mergeContext("extra",a),this},setTagsContext:function setTagsContext(a){return this._mergeContext("tags",a),this},clearContext:function clearContext(){return this._globalContext={},this},getContext:function getContext(){return JSON.parse(B(this._globalContext))},setEnvironment:function setEnvironment(a){return this._globalOptions.environment=a,this},setRelease:function setRelease(a){return this._globalOptions.release=a,this},setDataCallback:function setDataCallback(a){var A=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=keepOriginalCallback(A,a),this},setBreadcrumbCallback:function setBreadcrumbCallback(a){var A=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=keepOriginalCallback(A,a),this},setShouldSendCallback:function setShouldSendCallback(a){var A=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=keepOriginalCallback(A,a),this},setTransport:function setTransport(a){return this._globalOptions.transport=a,this},lastException:function lastException(){return this._lastCapturedException},lastEventId:function lastEventId(){return this._lastEventId},isSetup:function isSetup(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function afterLoad(){var a=it.RavenConfig;a&&this.config(a.dsn,a.config).install()},showReportDialog:function showReportDialog(a){if(at){if(!(a=Oe({eventId:this.lastEventId(),dsn:this._dsn,user:this._globalContext.user||{}},a)).eventId)throw new ne("Missing eventId");if(!a.dsn)throw new ne("Missing DSN");var A=encodeURIComponent,j=[];for(var P in a)if("user"===P){var B=a.user;B.name&&j.push("name="+A(B.name)),B.email&&j.push("email="+A(B.email))}else j.push(A(P)+"="+A(a[P]));var q=this._getGlobalServer(this._parseDSN(a.dsn)),ie=at.createElement("script");ie.async=!0,ie.src=q+"/api/embed/error-page/?"+j.join("&"),(at.head||at.body).appendChild(ie)}},_ignoreNextOnError:function _ignoreNextOnError(){var a=this;this._ignoreOnError+=1,setTimeout((function(){a._ignoreOnError-=1}))},_triggerEvent:function _triggerEvent(a,A){var j,P;if(this._hasDocument){for(P in A=A||{},a="raven"+a.substr(0,1).toUpperCase()+a.substr(1),at.createEvent?(j=at.createEvent("HTMLEvents")).initEvent(a,!0,!0):(j=at.createEventObject()).eventType=a,A)Ae(A,P)&&(j[P]=A[P]);if(at.createEvent)at.dispatchEvent(j);else try{at.fireEvent("on"+j.eventType.toLowerCase(),j)}catch(B){}}},_breadcrumbEventHandler:function _breadcrumbEventHandler(a){var A=this;return function(j){if(A._keypressTimeout=null,A._lastCapturedEvent!==j){var P;A._lastCapturedEvent=j;try{P=Me(j.target)}catch(B){P="<unknown>"}A.captureBreadcrumb({category:"ui."+a,message:P})}}},_keypressEventHandler:function _keypressEventHandler(){var a=this;return function(A){var j;try{j=A.target}catch(q){return}var P=j&&j.tagName;if(P&&("INPUT"===P||"TEXTAREA"===P||j.isContentEditable)){var B=a._keypressTimeout;B||a._breadcrumbEventHandler("input")(A),clearTimeout(B),a._keypressTimeout=setTimeout((function(){a._keypressTimeout=null}),1e3)}}},_captureUrlChange:function _captureUrlChange(a,A){var j=Ue(this._location.href),P=Ue(A),B=Ue(a);this._lastHref=A,j.protocol===P.protocol&&j.host===P.host&&(A=P.relative),j.protocol===B.protocol&&j.host===B.host&&(a=B.relative),this.captureBreadcrumb({category:"navigation",data:{to:A,from:a}})},_patchFunctionToString:function _patchFunctionToString(){var a=this;a._originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){return"function"===typeof this&&this.__raven__?a._originalFunctionToString.apply(this.__orig__,arguments):a._originalFunctionToString.apply(this,arguments)}},_unpatchFunctionToString:function _unpatchFunctionToString(){this._originalFunctionToString&&(Function.prototype.toString=this._originalFunctionToString)},_instrumentTryCatch:function _instrumentTryCatch(){var a=this,A=a._wrappedBuiltIns;function wrapTimeFn(A){return function(j,P){for(var B=new Array(arguments.length),q=0;q<B.length;++q)B[q]=arguments[q];var ne=B[0];return ve(ne)&&(B[0]=a.wrap({mechanism:{type:"instrument",data:{function:A.name||"<anonymous>"}}},ne)),A.apply?A.apply(this,B):A(B[0],B[1])}}var j=this._globalOptions.autoBreadcrumbs;function wrapEventTarget(P){var B=it[P]&&it[P].prototype;B&&B.hasOwnProperty&&B.hasOwnProperty("addEventListener")&&(We(B,"addEventListener",(function(A){return function(B,q,ne,ie){try{q&&q.handleEvent&&(q.handleEvent=a.wrap({mechanism:{type:"instrument",data:{target:P,function:"handleEvent",handler:q&&q.name||"<anonymous>"}}},q.handleEvent))}catch(he){}var oe,se,le;return j&&j.dom&&("EventTarget"===P||"Node"===P)&&(se=a._breadcrumbEventHandler("click"),le=a._keypressEventHandler(),oe=function before(a){if(a){var A;try{A=a.type}catch(j){return}return"click"===A?se(a):"keypress"===A?le(a):void 0}}),A.call(this,B,a.wrap({mechanism:{type:"instrument",data:{target:P,function:"addEventListener",handler:q&&q.name||"<anonymous>"}}},q,oe),ne,ie)}}),A),We(B,"removeEventListener",(function(a){return function(A,j,P,B){try{j=j&&(j.__raven_wrapper__?j.__raven_wrapper__:j)}catch(q){}return a.call(this,A,j,P,B)}}),A))}We(it,"setTimeout",wrapTimeFn,A),We(it,"setInterval",wrapTimeFn,A),it.requestAnimationFrame&&We(it,"requestAnimationFrame",(function(A){return function(j){return A(a.wrap({mechanism:{type:"instrument",data:{function:"requestAnimationFrame",handler:A&&A.name||"<anonymous>"}}},j))}}),A);for(var P=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],B=0;B<P.length;B++)wrapEventTarget(P[B])},_instrumentBreadcrumbs:function _instrumentBreadcrumbs(){var a=this,A=this._globalOptions.autoBreadcrumbs,j=a._wrappedBuiltIns;function wrapProp(A,j){A in j&&ve(j[A])&&We(j,A,(function(j){return a.wrap({mechanism:{type:"instrument",data:{function:A,handler:j&&j.name||"<anonymous>"}}},j)}))}if(A.xhr&&"XMLHttpRequest"in it){var P=it.XMLHttpRequest&&it.XMLHttpRequest.prototype;We(P,"open",(function(A){return function(j,P){return ye(P)&&-1===P.indexOf(a._globalKey)&&(this.__raven_xhr={method:j,url:P,status_code:null}),A.apply(this,arguments)}}),j),We(P,"send",(function(A){return function(){var j=this;function onreadystatechangeHandler(){if(j.__raven_xhr&&4===j.readyState){try{j.__raven_xhr.status_code=j.status}catch(A){}a.captureBreadcrumb({type:"http",category:"xhr",data:j.__raven_xhr})}}for(var P=["onload","onerror","onprogress"],B=0;B<P.length;B++)wrapProp(P[B],j);return"onreadystatechange"in j&&ve(j.onreadystatechange)?We(j,"onreadystatechange",(function(A){return a.wrap({mechanism:{type:"instrument",data:{function:"onreadystatechange",handler:A&&A.name||"<anonymous>"}}},A,onreadystatechangeHandler)})):j.onreadystatechange=onreadystatechangeHandler,A.apply(this,arguments)}}),j)}A.xhr&&Ve()&&We(it,"fetch",(function(A){return function(){for(var j=new Array(arguments.length),P=0;P<j.length;++P)j[P]=arguments[P];var B,q=j[0],ne="GET";if("string"===typeof q?B=q:"Request"in it&&q instanceof it.Request?(B=q.url,q.method&&(ne=q.method)):B=""+q,-1!==B.indexOf(a._globalKey))return A.apply(this,j);j[1]&&j[1].method&&(ne=j[1].method);var ie={method:ne,url:B,status_code:null};return A.apply(this,j).then((function(A){return ie.status_code=A.status,a.captureBreadcrumb({type:"http",category:"fetch",data:ie}),A})).catch((function(A){throw a.captureBreadcrumb({type:"http",category:"fetch",data:ie,level:"error"}),A}))}}),j),A.dom&&this._hasDocument&&(at.addEventListener?(at.addEventListener("click",a._breadcrumbEventHandler("click"),!1),at.addEventListener("keypress",a._keypressEventHandler(),!1)):at.attachEvent&&(at.attachEvent("onclick",a._breadcrumbEventHandler("click")),at.attachEvent("onkeypress",a._keypressEventHandler())));var B=it.chrome,q=!(B&&B.app&&B.app.runtime)&&it.history&&it.history.pushState&&it.history.replaceState;if(A.location&&q){var ne=it.onpopstate;it.onpopstate=function(){var A=a._location.href;if(a._captureUrlChange(a._lastHref,A),ne)return ne.apply(this,arguments)};var ie=function historyReplacementFunction(A){return function(){var j=arguments.length>2?arguments[2]:void 0;return j&&a._captureUrlChange(a._lastHref,j+""),A.apply(this,arguments)}};We(it.history,"pushState",ie,j),We(it.history,"replaceState",ie,j)}if(A.console&&"console"in it&&console.log){var oe=function consoleMethodCallback(A,j){a.captureBreadcrumb({message:A,level:j.level,category:"console"})};ke(["debug","info","warn","error","log"],(function(a,A){tt(console,A,oe)}))}},_restoreBuiltIns:function _restoreBuiltIns(){for(var a;this._wrappedBuiltIns.length;){var A=(a=this._wrappedBuiltIns.shift())[0],j=a[1],P=a[2];A[j]=P}},_restoreConsole:function _restoreConsole(){for(var a in this._originalConsoleMethods)this._originalConsole[a]=this._originalConsoleMethods[a]},_drainPlugins:function _drainPlugins(){var a=this;ke(this._plugins,(function(A,j){var P=j[0],B=j[1];P.apply(a,[a].concat(B))}))},_parseDSN:function _parseDSN(a){var A=rt.exec(a),j={},P=7;try{for(;P--;)j[nt[P]]=A[P]||""}catch(B){throw new ne("Invalid DSN: "+a)}if(j.pass&&!this._globalOptions.allowSecretKey)throw new ne("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return j},_getGlobalServer:function _getGlobalServer(a){var A="//"+a.host+(a.port?":"+a.port:"");return a.protocol&&(A=a.protocol+":"+A),A},_handleOnErrorStackInfo:function _handleOnErrorStackInfo(a,A){(A=A||{}).mechanism=A.mechanism||{type:"onerror",handled:!1},this._ignoreOnError||this._handleStackInfo(a,A)},_handleStackInfo:function _handleStackInfo(a,A){var j=this._prepareFrames(a,A);this._triggerEvent("handle",{stackInfo:a,options:A}),this._processException(a.name,a.message,a.url,a.lineno,j,A)},_prepareFrames:function _prepareFrames(a,A){var j=this,P=[];if(a.stack&&a.stack.length&&(ke(a.stack,(function(A,B){var q=j._normalizeFrame(B,a.url);q&&P.push(q)})),A&&A.trimHeadFrames))for(var B=0;B<A.trimHeadFrames&&B<P.length;B++)P[B].in_app=!1;return P=P.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function _normalizeFrame(a,A){var j={filename:a.url,lineno:a.line,colno:a.column,function:a.func||"?"};return a.url||(j.filename=A),j.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(j.filename)||/(Raven|TraceKit)\./.test(j.function)||/raven\.(min\.)?js$/.test(j.filename)),j},_processException:function _processException(a,A,j,P,B,q){var ne,ie=(a?a+": ":"")+(A||"");if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(A)&&!this._globalOptions.ignoreErrors.test(ie))&&(B&&B.length?(j=B[0].filename||j,B.reverse(),ne={frames:B}):j&&(ne={frames:[{filename:j,lineno:P,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(j))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(j)))){var oe=Oe({exception:{values:[{type:a,value:A,stacktrace:ne}]},transaction:j},q),se=oe.exception.values[0];null==se.type&&""===se.value&&(se.value="Unrecoverable error caught"),!oe.exception.mechanism&&oe.mechanism&&(oe.exception.mechanism=oe.mechanism,delete oe.mechanism),oe.exception.mechanism=Oe({type:"generic",handled:!0},oe.exception.mechanism||{}),this._send(oe)}},_trimPacket:function _trimPacket(a){var A=this._globalOptions.maxMessageLength;if(a.message&&(a.message=Se(a.message,A)),a.exception){var j=a.exception.values[0];j.value=Se(j.value,A)}var P=a.request;return P&&(P.url&&(P.url=Se(P.url,this._globalOptions.maxUrlLength)),P.Referer&&(P.Referer=Se(P.Referer,this._globalOptions.maxUrlLength))),a.breadcrumbs&&a.breadcrumbs.values&&this._trimBreadcrumbs(a.breadcrumbs),a},_trimBreadcrumbs:function _trimBreadcrumbs(a){for(var A,j,P,B=["to","from","url"],q=0;q<a.values.length;++q)if((j=a.values[q]).hasOwnProperty("data")&&pe(j.data)&&!Te(j.data)){P=Oe({},j.data);for(var ne=0;ne<B.length;++ne)A=B[ne],P.hasOwnProperty(A)&&P[A]&&(P[A]=Se(P[A],this._globalOptions.maxUrlLength));a.values[q].data=P}},_getHttpData:function _getHttpData(){if(this._hasNavigator||this._hasDocument){var a={};return this._hasNavigator&&ot.userAgent&&(a.headers={"User-Agent":ot.userAgent}),it.location&&it.location.href&&(a.url=it.location.href),this._hasDocument&&at.referrer&&(a.headers||(a.headers={}),a.headers.Referer=at.referrer),a}},_resetBackoff:function _resetBackoff(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function _shouldBackoff(){return this._backoffDuration&&now()-this._backoffStart<this._backoffDuration},_isRepeatData:function _isRepeatData(a){var A=this._lastData;return!(!A||a.message!==A.message||a.transaction!==A.transaction)&&(a.stacktrace||A.stacktrace?Be(a.stacktrace,A.stacktrace):a.exception||A.exception?Ne(a.exception,A.exception):!a.fingerprint&&!A.fingerprint||Boolean(a.fingerprint&&A.fingerprint)&&JSON.stringify(a.fingerprint)===JSON.stringify(A.fingerprint))},_setBackoffState:function _setBackoffState(a){if(!this._shouldBackoff()){var A=a.status;if(400===A||401===A||429===A){var j;try{j=Ve()?a.headers.get("Retry-After"):a.getResponseHeader("Retry-After"),j=1e3*parseInt(j,10)}catch(P){}this._backoffDuration=j||(2*this._backoffDuration||1e3),this._backoffStart=now()}}},_send:function _send(a){var A=this._globalOptions,j={project:this._globalProject,logger:A.logger,platform:"javascript"},P=this._getHttpData();P&&(j.request=P),a.trimHeadFrames&&delete a.trimHeadFrames,(a=Oe(j,a)).tags=Oe(Oe({},this._globalContext.tags),a.tags),a.extra=Oe(Oe({},this._globalContext.extra),a.extra),a.extra["session:duration"]=now()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(a.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),this._globalContext.user&&(a.user=this._globalContext.user),A.environment&&(a.environment=A.environment),A.release&&(a.release=A.release),A.serverName&&(a.server_name=A.serverName),a=this._sanitizeData(a),Object.keys(a).forEach((function(A){(null==a[A]||""===a[A]||we(a[A]))&&delete a[A]})),ve(A.dataCallback)&&(a=A.dataCallback(a)||a),a&&!we(a)&&(ve(A.shouldSendCallback)&&!A.shouldSendCallback(a)||(this._shouldBackoff()?this._logDebug("warn","Raven dropped error due to backoff: ",a):"number"===typeof A.sampleRate?Math.random()<A.sampleRate&&this._sendProcessedPayload(a):this._sendProcessedPayload(a)))},_sanitizeData:function _sanitizeData(a){return et(a,this._globalOptions.sanitizeKeys)},_getUuid:function _getUuid(){return Re()},_sendProcessedPayload:function _sendProcessedPayload(a,A){var j=this,P=this._globalOptions;if(this.isSetup())if(a=this._trimPacket(a),this._globalOptions.allowDuplicates||!this._isRepeatData(a)){this._lastEventId=a.event_id||(a.event_id=this._getUuid()),this._lastData=a,this._logDebug("debug","Raven about to send:",a);var B={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(B.sentry_secret=this._globalSecret);var q=a.exception&&a.exception.values[0];this._globalOptions.autoBreadcrumbs&&this._globalOptions.autoBreadcrumbs.sentry&&this.captureBreadcrumb({category:"sentry",message:q?(q.type?q.type+": ":"")+q.value:a.message,event_id:a.event_id,level:a.level||"error"});var ne=this._globalEndpoint;(P.transport||this._makeRequest).call(this,{url:ne,auth:B,data:a,options:P,onSuccess:function success(){j._resetBackoff(),j._triggerEvent("success",{data:a,src:ne}),A&&A()},onError:function failure(P){j._logDebug("error","Raven transport failed to send: ",P),P.request&&j._setBackoffState(P.request),j._triggerEvent("failure",{data:a,src:ne}),P=P||new Error("Raven send failed (no additional details provided)"),A&&A(P)}})}else this._logDebug("warn","Raven dropped repeat event: ",a)},_makeRequest:function _makeRequest(a){var A=a.url+"?"+Fe(a.auth),j=null,P={};if(a.options.headers&&(j=this._evaluateHash(a.options.headers)),a.options.fetchParameters&&(P=this._evaluateHash(a.options.fetchParameters)),Ve()){P.body=B(a.data);var q=Oe({},this._fetchDefaults),ne=Oe(q,P);return j&&(ne.headers=j),it.fetch(A,ne).then((function(A){if(A.ok)a.onSuccess&&a.onSuccess();else{var j=new Error("Sentry error code: "+A.status);j.request=A,a.onError&&a.onError(j)}})).catch((function(){a.onError&&a.onError(new Error("Sentry error code: network unavailable"))}))}var ie=it.XMLHttpRequest&&new it.XMLHttpRequest;ie&&(("withCredentials"in ie||"undefined"!==typeof XDomainRequest)&&("withCredentials"in ie?ie.onreadystatechange=function(){if(4===ie.readyState)if(200===ie.status)a.onSuccess&&a.onSuccess();else if(a.onError){var A=new Error("Sentry error code: "+ie.status);A.request=ie,a.onError(A)}}:(ie=new XDomainRequest,A=A.replace(/^https?:/,""),a.onSuccess&&(ie.onload=a.onSuccess),a.onError&&(ie.onerror=function(){var A=new Error("Sentry error code: XDomainRequest");A.request=ie,a.onError(A)})),ie.open("POST",A),j&&ke(j,(function(a,A){ie.setRequestHeader(a,A)})),ie.send(B(a.data))))},_evaluateHash:function _evaluateHash(a){var A={};for(var j in a)if(a.hasOwnProperty(j)){var P=a[j];A[j]="function"===typeof P?P():P}return A},_logDebug:function _logDebug(a){this._originalConsoleMethods[a]&&(this.debug||this._globalOptions.debug)&&Function.prototype.apply.call(this._originalConsoleMethods[a],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function _mergeContext(a,A){me(A)?delete this._globalContext[a]:this._globalContext[a]=Oe(this._globalContext[a]||{},A)}},Raven.prototype.setUser=Raven.prototype.setUserContext,Raven.prototype.setReleaseContext=Raven.prototype.setRelease,a.exports=Raven}).call(this,j(35))},function(a,A,j){(function(A){var P=j(139),B={collectWindowErrors:!0,debug:!1},q="undefined"!==typeof window?window:"undefined"!==typeof A?A:"undefined"!==typeof self?self:{},ne=[].slice,ie=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function getLocationHref(){return"undefined"===typeof document||null==document.location?"":document.location.href}B.report=function reportModuleWrapper(){var a,A,j=[],oe=null,se=null,le=null;function notifyHandlers(a,A){var P=null;if(!A||B.collectWindowErrors){for(var q in j)if(j.hasOwnProperty(q))try{j[q].apply(null,[a].concat(ne.call(arguments,2)))}catch(ie){P=ie}if(P)throw P}}function traceKitWindowOnError(A,j,q,ne,oe){var se=P.isErrorEvent(oe)?oe.error:oe,he=P.isErrorEvent(A)?A.message:A;if(le)B.computeStackTrace.augmentStackTraceWithInitialElement(le,j,q,he),processLastException();else if(se&&P.isError(se))notifyHandlers(B.computeStackTrace(se),!0);else{var pe,ge={url:j,line:q,column:ne},me=void 0;if("[object String]"==={}.toString.call(he))(pe=he.match(ie))&&(me=pe[1],he=pe[2]);ge.func="?",notifyHandlers({name:me,message:he,url:getLocationHref(),stack:[ge]},!0)}return!!a&&a.apply(this,arguments)}function processLastException(){var a=le,A=oe;oe=null,le=null,se=null,notifyHandlers.apply(null,[a,!1].concat(A))}function report(a,A){var j=ne.call(arguments,1);if(le){if(se===a)return;processLastException()}var P=B.computeStackTrace(a);if(le=P,se=a,oe=j,setTimeout((function(){se===a&&processLastException()}),P.incomplete?2e3:0),!1!==A)throw a}return report.subscribe=function subscribe(P){!function installGlobalHandler(){if(A)return;a=q.onerror,q.onerror=traceKitWindowOnError,A=!0}(),j.push(P)},report.unsubscribe=function unsubscribe(a){for(var A=j.length-1;A>=0;--A)j[A]===a&&j.splice(A,1)},report.uninstall=function unsubscribeAll(){!function uninstallGlobalHandler(){if(!A)return;q.onerror=a,A=!1,a=void 0}(),j=[]},report}(),B.computeStackTrace=function computeStackTraceWrapper(){function computeStackTraceFromStackProp(a){if("undefined"!==typeof a.stack&&a.stack){for(var A,j,P,B=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,q=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ne=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,ie=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,oe=/\((\S*)(?::(\d+))(?::(\d+))\)/,se=a.stack.split("\n"),le=[],he=(/^(.*) is undefined$/.exec(a.message),0),pe=se.length;he<pe;++he){if(j=B.exec(se[he])){var ge=j[2]&&0===j[2].indexOf("native");j[2]&&0===j[2].indexOf("eval")&&(A=oe.exec(j[2]))&&(j[2]=A[1],j[3]=A[2],j[4]=A[3]),P={url:ge?null:j[2],func:j[1]||"?",args:ge?[j[2]]:[],line:j[3]?+j[3]:null,column:j[4]?+j[4]:null}}else if(j=q.exec(se[he]))P={url:j[2],func:j[1]||"?",args:[],line:+j[3],column:j[4]?+j[4]:null};else{if(!(j=ne.exec(se[he])))continue;j[3]&&j[3].indexOf(" > eval")>-1&&(A=ie.exec(j[3]))?(j[3]=A[1],j[4]=A[2],j[5]=null):0!==he||j[5]||"undefined"===typeof a.columnNumber||(le[0].column=a.columnNumber+1),P={url:j[3],func:j[1]||"?",args:j[2]?j[2].split(","):[],line:j[4]?+j[4]:null,column:j[5]?+j[5]:null}}if(!P.func&&P.line&&(P.func="?"),P.url&&"blob:"===P.url.substr(0,5)){var me=new XMLHttpRequest;if(me.open("GET",P.url,!1),me.send(null),200===me.status){var ve=me.responseText||"",ye=(ve=ve.slice(-300)).match(/\/\/# sourceMappingURL=(.*)$/);if(ye){var _e=ye[1];"~"===_e.charAt(0)&&(_e=("undefined"===typeof document||null==document.location?"":document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""))+_e.slice(1)),P.url=_e.slice(0,-4)}}}le.push(P)}return le.length?{name:a.name,message:a.message,url:getLocationHref(),stack:le}:null}}function augmentStackTraceWithInitialElement(a,A,j,P){var B={url:A,line:j};if(B.url&&B.line){if(a.incomplete=!1,B.func||(B.func="?"),a.stack.length>0&&a.stack[0].url===B.url){if(a.stack[0].line===B.line)return!1;if(!a.stack[0].line&&a.stack[0].func===B.func)return a.stack[0].line=B.line,!1}return a.stack.unshift(B),a.partial=!0,!0}return a.incomplete=!0,!1}function computeStackTraceByWalkingCallerChain(a,A){for(var j,P,q=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,ne=[],ie={},oe=!1,se=computeStackTraceByWalkingCallerChain.caller;se&&!oe;se=se.caller)if(se!==computeStackTrace&&se!==B.report){if(P={url:null,func:"?",line:null,column:null},se.name?P.func=se.name:(j=q.exec(se.toString()))&&(P.func=j[1]),"undefined"===typeof P.func)try{P.func=j.input.substring(0,j.input.indexOf("{"))}catch(he){}ie[""+se]?oe=!0:ie[""+se]=!0,ne.push(P)}A&&ne.splice(0,A);var le={name:a.name,message:a.message,url:getLocationHref(),stack:ne};return augmentStackTraceWithInitialElement(le,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description),le}function computeStackTrace(a,A){var j=null;A=null==A?0:+A;try{if(j=computeStackTraceFromStackProp(a))return j}catch(P){if(B.debug)throw P}try{if(j=computeStackTraceByWalkingCallerChain(a,A+1))return j}catch(P){if(B.debug)throw P}return{name:a.name,message:a.message,url:getLocationHref()}}return computeStackTrace.augmentStackTraceWithInitialElement=augmentStackTraceWithInitialElement,computeStackTrace.computeStackTraceFromStackProp=computeStackTraceFromStackProp,computeStackTrace}(),a.exports=B}).call(this,j(35))},function(a,A){function safeAdd(a,A){var j=(65535&a)+(65535&A);return(a>>16)+(A>>16)+(j>>16)<<16|65535&j}function md5cmn(a,A,j,P,B,q){return safeAdd(function bitRotateLeft(a,A){return a<<A|a>>>32-A}(safeAdd(safeAdd(A,a),safeAdd(P,q)),B),j)}function md5ff(a,A,j,P,B,q,ne){return md5cmn(A&j|~A&P,a,A,B,q,ne)}function md5gg(a,A,j,P,B,q,ne){return md5cmn(A&P|j&~P,a,A,B,q,ne)}function md5hh(a,A,j,P,B,q,ne){return md5cmn(A^j^P,a,A,B,q,ne)}function md5ii(a,A,j,P,B,q,ne){return md5cmn(j^(A|~P),a,A,B,q,ne)}function binlMD5(a,A){var j,P,B,q,ne;a[A>>5]|=128<<A%32,a[14+(A+64>>>9<<4)]=A;var ie=1732584193,oe=-271733879,se=-1732584194,le=271733878;for(j=0;j<a.length;j+=16)P=ie,B=oe,q=se,ne=le,ie=md5ff(ie,oe,se,le,a[j],7,-680876936),le=md5ff(le,ie,oe,se,a[j+1],12,-389564586),se=md5ff(se,le,ie,oe,a[j+2],17,606105819),oe=md5ff(oe,se,le,ie,a[j+3],22,-1044525330),ie=md5ff(ie,oe,se,le,a[j+4],7,-176418897),le=md5ff(le,ie,oe,se,a[j+5],12,1200080426),se=md5ff(se,le,ie,oe,a[j+6],17,-1473231341),oe=md5ff(oe,se,le,ie,a[j+7],22,-45705983),ie=md5ff(ie,oe,se,le,a[j+8],7,1770035416),le=md5ff(le,ie,oe,se,a[j+9],12,-1958414417),se=md5ff(se,le,ie,oe,a[j+10],17,-42063),oe=md5ff(oe,se,le,ie,a[j+11],22,-1990404162),ie=md5ff(ie,oe,se,le,a[j+12],7,1804603682),le=md5ff(le,ie,oe,se,a[j+13],12,-40341101),se=md5ff(se,le,ie,oe,a[j+14],17,-1502002290),ie=md5gg(ie,oe=md5ff(oe,se,le,ie,a[j+15],22,1236535329),se,le,a[j+1],5,-165796510),le=md5gg(le,ie,oe,se,a[j+6],9,-1069501632),se=md5gg(se,le,ie,oe,a[j+11],14,643717713),oe=md5gg(oe,se,le,ie,a[j],20,-373897302),ie=md5gg(ie,oe,se,le,a[j+5],5,-701558691),le=md5gg(le,ie,oe,se,a[j+10],9,38016083),se=md5gg(se,le,ie,oe,a[j+15],14,-660478335),oe=md5gg(oe,se,le,ie,a[j+4],20,-405537848),ie=md5gg(ie,oe,se,le,a[j+9],5,568446438),le=md5gg(le,ie,oe,se,a[j+14],9,-1019803690),se=md5gg(se,le,ie,oe,a[j+3],14,-187363961),oe=md5gg(oe,se,le,ie,a[j+8],20,1163531501),ie=md5gg(ie,oe,se,le,a[j+13],5,-1444681467),le=md5gg(le,ie,oe,se,a[j+2],9,-51403784),se=md5gg(se,le,ie,oe,a[j+7],14,1735328473),ie=md5hh(ie,oe=md5gg(oe,se,le,ie,a[j+12],20,-1926607734),se,le,a[j+5],4,-378558),le=md5hh(le,ie,oe,se,a[j+8],11,-2022574463),se=md5hh(se,le,ie,oe,a[j+11],16,1839030562),oe=md5hh(oe,se,le,ie,a[j+14],23,-35309556),ie=md5hh(ie,oe,se,le,a[j+1],4,-1530992060),le=md5hh(le,ie,oe,se,a[j+4],11,1272893353),se=md5hh(se,le,ie,oe,a[j+7],16,-155497632),oe=md5hh(oe,se,le,ie,a[j+10],23,-1094730640),ie=md5hh(ie,oe,se,le,a[j+13],4,681279174),le=md5hh(le,ie,oe,se,a[j],11,-358537222),se=md5hh(se,le,ie,oe,a[j+3],16,-722521979),oe=md5hh(oe,se,le,ie,a[j+6],23,76029189),ie=md5hh(ie,oe,se,le,a[j+9],4,-640364487),le=md5hh(le,ie,oe,se,a[j+12],11,-421815835),se=md5hh(se,le,ie,oe,a[j+15],16,530742520),ie=md5ii(ie,oe=md5hh(oe,se,le,ie,a[j+2],23,-995338651),se,le,a[j],6,-198630844),le=md5ii(le,ie,oe,se,a[j+7],10,1126891415),se=md5ii(se,le,ie,oe,a[j+14],15,-1416354905),oe=md5ii(oe,se,le,ie,a[j+5],21,-57434055),ie=md5ii(ie,oe,se,le,a[j+12],6,1700485571),le=md5ii(le,ie,oe,se,a[j+3],10,-1894986606),se=md5ii(se,le,ie,oe,a[j+10],15,-1051523),oe=md5ii(oe,se,le,ie,a[j+1],21,-2054922799),ie=md5ii(ie,oe,se,le,a[j+8],6,1873313359),le=md5ii(le,ie,oe,se,a[j+15],10,-30611744),se=md5ii(se,le,ie,oe,a[j+6],15,-1560198380),oe=md5ii(oe,se,le,ie,a[j+13],21,1309151649),ie=md5ii(ie,oe,se,le,a[j+4],6,-145523070),le=md5ii(le,ie,oe,se,a[j+11],10,-1120210379),se=md5ii(se,le,ie,oe,a[j+2],15,718787259),oe=md5ii(oe,se,le,ie,a[j+9],21,-343485551),ie=safeAdd(ie,P),oe=safeAdd(oe,B),se=safeAdd(se,q),le=safeAdd(le,ne);return[ie,oe,se,le]}function binl2rstr(a){var A,j="",P=32*a.length;for(A=0;A<P;A+=8)j+=String.fromCharCode(a[A>>5]>>>A%32&255);return j}function rstr2binl(a){var A,j=[];for(j[(a.length>>2)-1]=void 0,A=0;A<j.length;A+=1)j[A]=0;var P=8*a.length;for(A=0;A<P;A+=8)j[A>>5]|=(255&a.charCodeAt(A/8))<<A%32;return j}function rstr2hex(a){var A,j,P="";for(j=0;j<a.length;j+=1)A=a.charCodeAt(j),P+="0123456789abcdef".charAt(A>>>4&15)+"0123456789abcdef".charAt(15&A);return P}function str2rstrUTF8(a){return unescape(encodeURIComponent(a))}function rawMD5(a){return function rstrMD5(a){return binl2rstr(binlMD5(rstr2binl(a),8*a.length))}(str2rstrUTF8(a))}function rawHMACMD5(a,A){return function rstrHMACMD5(a,A){var j,P,B=rstr2binl(a),q=[],ne=[];for(q[15]=ne[15]=void 0,B.length>16&&(B=binlMD5(B,8*a.length)),j=0;j<16;j+=1)q[j]=909522486^B[j],ne[j]=1549556828^B[j];return P=binlMD5(q.concat(rstr2binl(A)),512+8*A.length),binl2rstr(binlMD5(ne.concat(P),640))}(str2rstrUTF8(a),str2rstrUTF8(A))}a.exports=function md5(a,A,j){return A?j?rawHMACMD5(A,a):function hexHMACMD5(a,A){return rstr2hex(rawHMACMD5(a,A))}(A,a):j?rawMD5(a):function hexMD5(a){return rstr2hex(rawMD5(a))}(a)}},function(a,A){function RavenConfigError(a){this.name="RavenConfigError",this.message=a}RavenConfigError.prototype=new Error,RavenConfigError.prototype.constructor=RavenConfigError,a.exports=RavenConfigError},function(a,A,j){var P=j(139);a.exports={wrapMethod:function wrapMethod(a,A,j){var B=a[A],q=a;if(A in a){var ne="warn"===A?"warning":A;a[A]=function(){var a=[].slice.call(arguments),ie=P.safeJoin(a," "),oe={level:ne,logger:"console",extra:{arguments:a}};"assert"===A?!1===a[0]&&(ie="Assertion failed: "+(P.safeJoin(a.slice(1)," ")||"console.assert"),oe.extra.arguments=a.slice(1),j&&j(ie,oe)):j&&j(ie,oe),B&&Function.prototype.apply.call(B,q,a)}}}}},,,function(a,A,j){"use strict";var P=j(37);A.a=function(a,A){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Object(P.a)(A)/3)))-Object(P.a)(Math.abs(a)))}},function(a,A,j){"use strict";var P=j(37);A.a=function(a,A){return a=Math.abs(a),A=Math.abs(A)-a,Math.max(0,Object(P.a)(A)-Object(P.a)(a))+1}},function(a,A,j){"use strict";var P=j(37);A.a=function(a){return Math.max(0,-Object(P.a)(Math.abs(a)))}},function(a,A,j){"use strict";var P={},B={};function objectConverter(a){return new Function("d","return {"+a.map((function(a,A){return JSON.stringify(a)+": d["+A+'] || ""'})).join(",")+"}")}function inferColumns(a){var A=Object.create(null),j=[];return a.forEach((function(a){for(var P in a)P in A||j.push(A[P]=P)})),j}function pad(a,A){var j=a+"",P=j.length;return P<A?new Array(A-P+1).join(0)+j:j}function formatDate(a){var A=a.getUTCHours(),j=a.getUTCMinutes(),P=a.getUTCSeconds(),B=a.getUTCMilliseconds();return isNaN(a)?"Invalid Date":function formatYear(a){return a<0?"-"+pad(-a,6):a>9999?"+"+pad(a,6):pad(a,4)}(a.getUTCFullYear())+"-"+pad(a.getUTCMonth()+1,2)+"-"+pad(a.getUTCDate(),2)+(B?"T"+pad(A,2)+":"+pad(j,2)+":"+pad(P,2)+"."+pad(B,3)+"Z":P?"T"+pad(A,2)+":"+pad(j,2)+":"+pad(P,2)+"Z":j||A?"T"+pad(A,2)+":"+pad(j,2)+"Z":"")}A.a=function(a){var A=new RegExp('["'+a+"\n\r]"),j=a.charCodeAt(0);function parseRows(a,A){var q,ne=[],ie=a.length,oe=0,se=0,le=ie<=0,he=!1;function token(){if(le)return B;if(he)return he=!1,P;var A,q,ne=oe;if(34===a.charCodeAt(ne)){for(;oe++<ie&&34!==a.charCodeAt(oe)||34===a.charCodeAt(++oe););return(A=oe)>=ie?le=!0:10===(q=a.charCodeAt(oe++))?he=!0:13===q&&(he=!0,10===a.charCodeAt(oe)&&++oe),a.slice(ne+1,A-1).replace(/""/g,'"')}for(;oe<ie;){if(10===(q=a.charCodeAt(A=oe++)))he=!0;else if(13===q)he=!0,10===a.charCodeAt(oe)&&++oe;else if(q!==j)continue;return a.slice(ne,A)}return le=!0,a.slice(ne,ie)}for(10===a.charCodeAt(ie-1)&&--ie,13===a.charCodeAt(ie-1)&&--ie;(q=token())!==B;){for(var pe=[];q!==P&&q!==B;)pe.push(q),q=token();A&&null==(pe=A(pe,se++))||ne.push(pe)}return ne}function preformatBody(A,j){return A.map((function(A){return j.map((function(a){return formatValue(A[a])})).join(a)}))}function formatRow(A){return A.map(formatValue).join(a)}function formatValue(a){return null==a?"":a instanceof Date?formatDate(a):A.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}return{parse:function parse(a,A){var j,P,B=parseRows(a,(function(a,B){if(j)return j(a,B-1);P=a,j=A?function customConverter(a,A){var j=objectConverter(a);return function(P,B){return A(j(P),B,a)}}(a,A):objectConverter(a)}));return B.columns=P||[],B},parseRows:parseRows,format:function format(A,j){return null==j&&(j=inferColumns(A)),[j.map(formatValue).join(a)].concat(preformatBody(A,j)).join("\n")},formatBody:function formatBody(a,A){return null==A&&(A=inferColumns(a)),preformatBody(a,A).join("\n")},formatRows:function formatRows(a){return a.map(formatRow).join("\n")},formatRow:formatRow,formatValue:formatValue}}},,,,,,,,,function(a,A,j){"use strict";function _objectWithoutProperties(a,A){if(null==a)return{};var j,P,B=function _objectWithoutPropertiesLoose(a,A){if(null==a)return{};var j,P,B={},q=Object.keys(a);for(P=0;P<q.length;P++)j=q[P],A.indexOf(j)>=0||(B[j]=a[j]);return B}(a,A);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(a);for(P=0;P<q.length;P++)j=q[P],A.indexOf(j)>=0||Object.prototype.propertyIsEnumerable.call(a,j)&&(B[j]=a[j])}return B}j.d(A,"a",(function(){return Te}));var P=j(3),B=j(4),q=j(7),ne=j(8),ie=j(9),oe=j(1),se=j.n(oe),le={};function shallowEqual(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le,j=Object.keys(a),P=Object.keys(A);return a===A||j.length===P.length&&j.every((function(j){return a[j]===A[j]}))}var he=j(98);function updateMultipleDatasetsInView(a,A){Object.keys(A).forEach((function(j){!function updateSingleDatasetInView(a,A,j){j&&(!function isFunction(a){return!!a&&"[object Function]"==={}.toString.call(a)}(j)?a.change(A,he.b.changeset().remove((function(){return!0})).insert(j)):j(a.data(A)))}(a,j,A[j])}))}var pe=j(25),ge=j.n(pe);function getUniqueFieldNames(a){var A=new Set;return a.forEach((function(a){Object.keys(a).forEach((function(a){A.add(a)}))})),A}var me=function NOOP(){};function addSignalListenersToView(a,A){var j=Object.keys(A);return j.forEach((function(j){try{a.addSignalListener(j,A[j])}catch(P){console.warn("Cannot add invalid signal listener.",P)}})),j.length>0}var ve=j(5),ye=j(99),_e=j.n(ye);function removeSignalListenersFromView(a,A){var j=Object.keys(A);return j.forEach((function(j){try{a.removeSignalListener(j,A[j])}catch(P){console.warn("Cannot remove invalid signal listener.",P)}})),j.length>0}var we=j(15);function combineSpecWithDimension(a){var A=a.spec,j=a.width,P=a.height;return"undefined"!==typeof j&&"undefined"!==typeof P?Object(we.a)(Object(we.a)({},A),{},{width:j,height:P}):"undefined"!==typeof j?Object(we.a)(Object(we.a)({},A),{},{width:j}):"undefined"!==typeof P?Object(we.a)(Object(we.a)({},A),{},{height:P}):A}var ke=["spec","onNewView","signalListeners","width","height"];function _defineProperty(a,A,j){return A in a?Object.defineProperty(a,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):a[A]=j,a}var Oe=function(a){Object(ne.a)(VegaEmbed,a);var A=Object(ie.a)(VegaEmbed);function VegaEmbed(){var a;Object(P.a)(this,VegaEmbed);for(var j=arguments.length,B=new Array(j),ne=0;ne<j;ne++)B[ne]=arguments[ne];return a=A.call.apply(A,[this].concat(B)),_defineProperty(Object(q.a)(a),"containerRef",se.a.createRef()),_defineProperty(Object(q.a)(a),"resultPromise",void 0),_defineProperty(Object(q.a)(a),"handleError",(function(A){var j=a.props.onError;(void 0===j?me:j)(A),console.warn(A)})),_defineProperty(Object(q.a)(a),"modifyView",(function(A){a.resultPromise&&a.resultPromise.then((function(a){return a&&A(a.view),!0})).catch(a.handleError)})),a}return Object(B.a)(VegaEmbed,[{key:"componentDidMount",value:function componentDidMount(){this.createView()}},{key:"componentDidUpdate",value:function componentDidUpdate(a){var A=this,j=getUniqueFieldNames([this.props,a]);if(j.delete("className"),j.delete("signalListeners"),j.delete("spec"),j.delete("style"),j.delete("width"),j.delete("height"),Array.from(j).some((function(j){return A.props[j]!==a[j]})))this.clearView(),this.createView();else{var P=function computeSpecChanges(a,A){if(a===A)return!1;var j={width:!1,height:!1,isExpensive:!1},P=getUniqueFieldNames([a,A]);return!P.has("width")||"width"in a&&"width"in A&&a.width===A.width||("width"in a&&"number"===typeof a.width?j.width=a.width:j.isExpensive=!0),!P.has("height")||"height"in a&&"height"in A&&a.height===A.height||("height"in a&&"number"===typeof a.height?j.height=a.height:j.isExpensive=!0),P.delete("width"),P.delete("height"),Object(ve.a)(P).some((function(j){return!(j in a)||!(j in A)||!_e()(a[j],A[j])}))&&(j.isExpensive=!0),!(!1===j.width&&!1===j.height&&!j.isExpensive)&&j}(combineSpecWithDimension(this.props),combineSpecWithDimension(a)),B=this.props.signalListeners,q=a.signalListeners;if(P)if(P.isExpensive)this.clearView(),this.createView();else{var ne=!shallowEqual(B,q);this.modifyView((function(a){!1!==P.width&&a.width(P.width),!1!==P.height&&a.height(P.height),ne&&(q&&removeSignalListenersFromView(a,q),B&&addSignalListenersToView(a,B)),a.run()}))}else shallowEqual(B,q)||this.modifyView((function(a){q&&removeSignalListenersFromView(a,q),B&&addSignalListenersToView(a,B),a.run()}))}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.clearView()}},{key:"createView",value:function createView(){var a=this.props,A=(a.spec,a.onNewView),j=a.signalListeners,P=void 0===j?{}:j,B=(a.width,a.height,_objectWithoutProperties(a,ke));if(this.containerRef.current){var q=combineSpecWithDimension(this.props);this.resultPromise=Object(he.a)(this.containerRef.current,q,B).then((function(a){if(a){var A=a.view;addSignalListenersToView(A,P)&&A.run()}return a})).catch(this.handleError),A&&this.modifyView(A)}}},{key:"clearView",value:function clearView(){return this.resultPromise&&this.resultPromise.then((function(a){a&&a.finalize()})).catch(this.handleError),this.resultPromise=void 0,this}},{key:"render",value:function render(){var a=this.props,A=a.className,j=a.style;return se.a.createElement("div",{ref:this.containerRef,className:A,style:j})}}]),VegaEmbed}(se.a.PureComponent);_defineProperty(Oe,"propTypes",{className:ge.a.string,onError:ge.a.func});var Se=["data"];function _extends(){return(_extends=Object.assign||function(a){for(var A=1;A<arguments.length;A++){var j=arguments[A];for(var P in j)Object.prototype.hasOwnProperty.call(j,P)&&(a[P]=j[P])}return a}).apply(this,arguments)}function Vega_defineProperty(a,A,j){return A in a?Object.defineProperty(a,A,{value:j,enumerable:!0,configurable:!0,writable:!0}):a[A]=j,a}var Te=function(a){Object(ne.a)(Vega,a);var A=Object(ie.a)(Vega);function Vega(){var a;Object(P.a)(this,Vega);for(var j=arguments.length,B=new Array(j),ne=0;ne<j;ne++)B[ne]=arguments[ne];return a=A.call.apply(A,[this].concat(B)),Vega_defineProperty(Object(q.a)(a),"vegaEmbed",se.a.createRef()),Vega_defineProperty(Object(q.a)(a),"handleNewView",(function(A){a.update();var j=a.props.onNewView;(void 0===j?me:j)(A)})),a}return Object(B.a)(Vega,[{key:"componentDidMount",value:function componentDidMount(){this.update()}},{key:"componentDidUpdate",value:function componentDidUpdate(a){shallowEqual(this.props.data,a.data)||this.update()}},{key:"update",value:function update(){var a=this.props.data;this.vegaEmbed.current&&a&&Object.keys(a).length>0&&this.vegaEmbed.current.modifyView((function(A){updateMultipleDatasetsInView(A,a),A.resize().run()}))}},{key:"render",value:function render(){var a=this.props,A=(a.data,_objectWithoutProperties(a,Se));return se.a.createElement(Oe,_extends({ref:this.vegaEmbed},A,{onNewView:this.handleNewView}))}}]),Vega}(se.a.PureComponent);Vega_defineProperty(Te,"defaultProps",{data:{}})}]]);
//# sourceMappingURL=2.a2f3fb3d.chunk.js.map